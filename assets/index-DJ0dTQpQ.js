function kC(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kb={exports:{}},Wd={},Cb={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh=Symbol.for("react.element"),CC=Symbol.for("react.portal"),AC=Symbol.for("react.fragment"),NC=Symbol.for("react.strict_mode"),PC=Symbol.for("react.profiler"),RC=Symbol.for("react.provider"),OC=Symbol.for("react.context"),jC=Symbol.for("react.forward_ref"),DC=Symbol.for("react.suspense"),MC=Symbol.for("react.memo"),LC=Symbol.for("react.lazy"),m_=Symbol.iterator;function VC(n){return n===null||typeof n!="object"?null:(n=m_&&n[m_]||n["@@iterator"],typeof n=="function"?n:null)}var Ab={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nb=Object.assign,Pb={};function nu(n,e,r){this.props=n,this.context=e,this.refs=Pb,this.updater=r||Ab}nu.prototype.isReactComponent={};nu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};nu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Rb(){}Rb.prototype=nu.prototype;function Wy(n,e,r){this.props=n,this.context=e,this.refs=Pb,this.updater=r||Ab}var Gy=Wy.prototype=new Rb;Gy.constructor=Wy;Nb(Gy,nu.prototype);Gy.isPureReactComponent=!0;var g_=Array.isArray,Ob=Object.prototype.hasOwnProperty,Qy={current:null},jb={key:!0,ref:!0,__self:!0,__source:!0};function Db(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ob.call(e,i)&&!jb.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:rh,type:n,key:o,ref:a,props:s,_owner:Qy.current}}function FC(n,e){return{$$typeof:rh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Yy(n){return typeof n=="object"&&n!==null&&n.$$typeof===rh}function UC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var y_=/\/+/g;function Jp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?UC(""+n.key):e.toString(36)}function df(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case rh:case CC:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+Jp(a,0):i,g_(s)?(r="",n!=null&&(r=n.replace(y_,"$&/")+"/"),df(s,e,r,"",function(c){return c})):s!=null&&(Yy(s)&&(s=FC(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(y_,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",g_(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+Jp(o,l);a+=df(o,e,r,u,s)}else if(u=VC(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+Jp(o,l++),a+=df(o,e,r,u,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Dh(n,e,r){if(n==null)return n;var i=[],s=0;return df(n,i,"","",function(o){return e.call(r,o,s++)}),i}function zC(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var zn={current:null},pf={transition:null},$C={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:pf,ReactCurrentOwner:Qy};function Mb(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Dh,forEach:function(n,e,r){Dh(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return Dh(n,function(){e++}),e},toArray:function(n){return Dh(n,function(e){return e})||[]},only:function(n){if(!Yy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};tt.Component=nu;tt.Fragment=AC;tt.Profiler=PC;tt.PureComponent=Wy;tt.StrictMode=NC;tt.Suspense=DC;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;tt.act=Mb;tt.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Nb({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Qy.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)Ob.call(e,u)&&!jb.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:rh,type:n.type,key:s,ref:o,props:i,_owner:a}};tt.createContext=function(n){return n={$$typeof:OC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:RC,_context:n},n.Consumer=n};tt.createElement=Db;tt.createFactory=function(n){var e=Db.bind(null,n);return e.type=n,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(n){return{$$typeof:jC,render:n}};tt.isValidElement=Yy;tt.lazy=function(n){return{$$typeof:LC,_payload:{_status:-1,_result:n},_init:zC}};tt.memo=function(n,e){return{$$typeof:MC,type:n,compare:e===void 0?null:e}};tt.startTransition=function(n){var e=pf.transition;pf.transition={};try{n()}finally{pf.transition=e}};tt.unstable_act=Mb;tt.useCallback=function(n,e){return zn.current.useCallback(n,e)};tt.useContext=function(n){return zn.current.useContext(n)};tt.useDebugValue=function(){};tt.useDeferredValue=function(n){return zn.current.useDeferredValue(n)};tt.useEffect=function(n,e){return zn.current.useEffect(n,e)};tt.useId=function(){return zn.current.useId()};tt.useImperativeHandle=function(n,e,r){return zn.current.useImperativeHandle(n,e,r)};tt.useInsertionEffect=function(n,e){return zn.current.useInsertionEffect(n,e)};tt.useLayoutEffect=function(n,e){return zn.current.useLayoutEffect(n,e)};tt.useMemo=function(n,e){return zn.current.useMemo(n,e)};tt.useReducer=function(n,e,r){return zn.current.useReducer(n,e,r)};tt.useRef=function(n){return zn.current.useRef(n)};tt.useState=function(n){return zn.current.useState(n)};tt.useSyncExternalStore=function(n,e,r){return zn.current.useSyncExternalStore(n,e,r)};tt.useTransition=function(){return zn.current.useTransition()};tt.version="18.3.1";Cb.exports=tt;var fe=Cb.exports;const gt=Kd(fe),BC=kC({__proto__:null,default:gt},[fe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC=fe,HC=Symbol.for("react.element"),KC=Symbol.for("react.fragment"),WC=Object.prototype.hasOwnProperty,GC=qC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QC={key:!0,ref:!0,__self:!0,__source:!0};function Lb(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)WC.call(e,i)&&!QC.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:HC,type:n,key:o,ref:a,props:s,_owner:GC.current}}Wd.Fragment=KC;Wd.jsx=Lb;Wd.jsxs=Lb;kb.exports=Wd;var y=kb.exports,tg={},Vb={exports:{}},gr={},Fb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ce,q){var K=ce.length;ce.push(q);e:for(;0<K;){var ne=K-1>>>1,de=ce[ne];if(0<s(de,q))ce[ne]=q,ce[K]=de,K=ne;else break e}}function r(ce){return ce.length===0?null:ce[0]}function i(ce){if(ce.length===0)return null;var q=ce[0],K=ce.pop();if(K!==q){ce[0]=K;e:for(var ne=0,de=ce.length,he=de>>>1;ne<he;){var me=2*(ne+1)-1,Me=ce[me],Re=me+1,Ue=ce[Re];if(0>s(Me,K))Re<de&&0>s(Ue,Me)?(ce[ne]=Ue,ce[Re]=K,ne=Re):(ce[ne]=Me,ce[me]=K,ne=me);else if(Re<de&&0>s(Ue,K))ce[ne]=Ue,ce[Re]=K,ne=Re;else break e}}return q}function s(ce,q){var K=ce.sortIndex-q.sortIndex;return K!==0?K:ce.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],c=[],f=1,d=null,g=3,_=!1,x=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ce){for(var q=r(c);q!==null;){if(q.callback===null)i(c);else if(q.startTime<=ce)i(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=r(c)}}function O(ce){if(I=!1,A(ce),!x)if(r(u)!==null)x=!0,ie(M);else{var q=r(c);q!==null&&_e(O,q.startTime-ce)}}function M(ce,q){x=!1,I&&(I=!1,b(C),C=-1),_=!0;var K=g;try{for(A(q),d=r(u);d!==null&&(!(d.expirationTime>q)||ce&&!V());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,g=d.priorityLevel;var de=ne(d.expirationTime<=q);q=n.unstable_now(),typeof de=="function"?d.callback=de:d===r(u)&&i(u),A(q)}else i(u);d=r(u)}if(d!==null)var he=!0;else{var me=r(c);me!==null&&_e(O,me.startTime-q),he=!1}return he}finally{d=null,g=K,_=!1}}var z=!1,N=null,C=-1,D=5,L=-1;function V(){return!(n.unstable_now()-L<D)}function U(){if(N!==null){var ce=n.unstable_now();L=ce;var q=!0;try{q=N(!0,ce)}finally{q?R():(z=!1,N=null)}}else z=!1}var R;if(typeof T=="function")R=function(){T(U)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ae=B.port2;B.port1.onmessage=U,R=function(){ae.postMessage(null)}}else R=function(){P(U,0)};function ie(ce){N=ce,z||(z=!0,R())}function _e(ce,q){C=P(function(){ce(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){x||_||(x=!0,ie(M))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(ce){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var K=g;g=q;try{return ce()}finally{g=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,q){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var K=g;g=ce;try{return q()}finally{g=K}},n.unstable_scheduleCallback=function(ce,q,K){var ne=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ne+K:ne):K=ne,ce){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=K+de,ce={id:f++,callback:q,priorityLevel:ce,startTime:K,expirationTime:de,sortIndex:-1},K>ne?(ce.sortIndex=K,e(c,ce),r(u)===null&&ce===r(c)&&(I?(b(C),C=-1):I=!0,_e(O,K-ne))):(ce.sortIndex=de,e(u,ce),x||_||(x=!0,ie(M))),ce},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ce){var q=g;return function(){var K=g;g=q;try{return ce.apply(this,arguments)}finally{g=K}}}})(Ub);Fb.exports=Ub;var YC=Fb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=fe,pr=YC;function we(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zb=new Set,bc={};function ja(n,e){Vl(n,e),Vl(n+"Capture",e)}function Vl(n,e){for(bc[n]=e,n=0;n<e.length;n++)zb.add(e[n])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=Object.prototype.hasOwnProperty,JC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},__={};function ZC(n){return ng.call(__,n)?!0:ng.call(v_,n)?!1:JC.test(n)?__[n]=!0:(v_[n]=!0,!1)}function eA(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function tA(n,e,r,i){if(e===null||typeof e>"u"||eA(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $n(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){vn[n]=new $n(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];vn[e]=new $n(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){vn[n]=new $n(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){vn[n]=new $n(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){vn[n]=new $n(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){vn[n]=new $n(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){vn[n]=new $n(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){vn[n]=new $n(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){vn[n]=new $n(n,5,!1,n.toLowerCase(),null,!1,!1)});var Xy=/[\-:]([a-z])/g;function Jy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Xy,Jy);vn[e]=new $n(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Xy,Jy);vn[e]=new $n(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Xy,Jy);vn[e]=new $n(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){vn[n]=new $n(n,1,!1,n.toLowerCase(),null,!1,!1)});vn.xlinkHref=new $n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){vn[n]=new $n(n,1,!1,n.toLowerCase(),null,!0,!0)});function Zy(n,e,r,i){var s=vn.hasOwnProperty(e)?vn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tA(e,r,s,i)&&(r=null),i||s===null?ZC(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Ps=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mh=Symbol.for("react.element"),cl=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),ev=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),$b=Symbol.for("react.provider"),Bb=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),sg=Symbol.for("react.suspense_list"),nv=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),w_=Symbol.iterator;function Au(n){return n===null||typeof n!="object"?null:(n=w_&&n[w_]||n["@@iterator"],typeof n=="function"?n:null)}var Lt=Object.assign,Zp;function Ku(n){if(Zp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Zp=e&&e[1]||""}return`
`+Zp+n}var em=!1;function tm(n,e){if(!n||em)return"";em=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{em=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Ku(n):""}function nA(n){switch(n.tag){case 5:return Ku(n.type);case 16:return Ku("Lazy");case 13:return Ku("Suspense");case 19:return Ku("SuspenseList");case 0:case 2:case 15:return n=tm(n.type,!1),n;case 11:return n=tm(n.type.render,!1),n;case 1:return n=tm(n.type,!0),n;default:return""}}function og(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case hl:return"Fragment";case cl:return"Portal";case rg:return"Profiler";case ev:return"StrictMode";case ig:return"Suspense";case sg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Bb:return(n.displayName||"Context")+".Consumer";case $b:return(n._context.displayName||"Context")+".Provider";case tv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nv:return e=n.displayName||null,e!==null?e:og(n.type)||"Memo";case Ys:e=n._payload,n=n._init;try{return og(n(e))}catch{}}return null}function rA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(e);case 8:return e===ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hb(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iA(n){var e=Hb(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Lh(n){n._valueTracker||(n._valueTracker=iA(n))}function Kb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=Hb(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function zf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ag(n,e){var r=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function x_(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=xo(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wb(n,e){e=e.checked,e!=null&&Zy(n,"checked",e,!1)}function lg(n,e){Wb(n,e);var r=xo(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ug(n,e.type,r):e.hasOwnProperty("defaultValue")&&ug(n,e.type,xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function b_(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function ug(n,e,r){(e!=="number"||zf(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Wu=Array.isArray;function El(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+xo(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function cg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function E_(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(we(92));if(Wu(r)){if(1<r.length)throw Error(we(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:xo(r)}}function Gb(n,e){var r=xo(e.value),i=xo(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function T_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Qb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Qb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vh,Yb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vh=Vh||document.createElement("div"),Vh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ec(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sA=["Webkit","ms","Moz","O"];Object.keys(ic).forEach(function(n){sA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ic[e]=ic[n]})});function Xb(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ic.hasOwnProperty(n)&&ic[n]?(""+e).trim():e+"px"}function Jb(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=Xb(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var oA=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fg(n,e){if(e){if(oA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function dg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=null;function rv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mg=null,Tl=null,Il=null;function I_(n){if(n=oh(n)){if(typeof mg!="function")throw Error(we(280));var e=n.stateNode;e&&(e=Jd(e),mg(n.stateNode,n.type,e))}}function Zb(n){Tl?Il?Il.push(n):Il=[n]:Tl=n}function eE(){if(Tl){var n=Tl,e=Il;if(Il=Tl=null,I_(n),e)for(n=0;n<e.length;n++)I_(e[n])}}function tE(n,e){return n(e)}function nE(){}var nm=!1;function rE(n,e,r){if(nm)return n(e,r);nm=!0;try{return tE(n,e,r)}finally{nm=!1,(Tl!==null||Il!==null)&&(nE(),eE())}}function Tc(n,e){var r=n.stateNode;if(r===null)return null;var i=Jd(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(we(231,e,typeof r));return r}var gg=!1;if(bs)try{var Nu={};Object.defineProperty(Nu,"passive",{get:function(){gg=!0}}),window.addEventListener("test",Nu,Nu),window.removeEventListener("test",Nu,Nu)}catch{gg=!1}function aA(n,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(f){this.onError(f)}}var sc=!1,$f=null,Bf=!1,yg=null,lA={onError:function(n){sc=!0,$f=n}};function uA(n,e,r,i,s,o,a,l,u){sc=!1,$f=null,aA.apply(lA,arguments)}function cA(n,e,r,i,s,o,a,l,u){if(uA.apply(this,arguments),sc){if(sc){var c=$f;sc=!1,$f=null}else throw Error(we(198));Bf||(Bf=!0,yg=c)}}function Da(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function iE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function S_(n){if(Da(n)!==n)throw Error(we(188))}function hA(n){var e=n.alternate;if(!e){if(e=Da(n),e===null)throw Error(we(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return S_(s),n;if(o===i)return S_(s),e;o=o.sibling}throw Error(we(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(we(189))}}if(r.alternate!==i)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?n:e}function sE(n){return n=hA(n),n!==null?oE(n):null}function oE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=oE(n);if(e!==null)return e;n=n.sibling}return null}var aE=pr.unstable_scheduleCallback,k_=pr.unstable_cancelCallback,fA=pr.unstable_shouldYield,dA=pr.unstable_requestPaint,Kt=pr.unstable_now,pA=pr.unstable_getCurrentPriorityLevel,iv=pr.unstable_ImmediatePriority,lE=pr.unstable_UserBlockingPriority,qf=pr.unstable_NormalPriority,mA=pr.unstable_LowPriority,uE=pr.unstable_IdlePriority,Gd=null,ji=null;function gA(n){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(Gd,n,void 0,(n.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:_A,yA=Math.log,vA=Math.LN2;function _A(n){return n>>>=0,n===0?32:31-(yA(n)/vA|0)|0}var Fh=64,Uh=4194304;function Gu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hf(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Gu(l):(o&=a,o!==0&&(i=Gu(o)))}else a=r&~s,a!==0?i=Gu(a):o!==0&&(i=Gu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-oi(e),s=1<<r,i|=n[r],e&=~s;return i}function wA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xA(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-oi(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=wA(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function vg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function cE(){var n=Fh;return Fh<<=1,!(Fh&4194240)&&(Fh=64),n}function rm(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function ih(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-oi(e),n[e]=r}function bA(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-oi(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function sv(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-oi(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var pt=0;function hE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var fE,ov,dE,pE,mE,_g=!1,zh=[],lo=null,uo=null,co=null,Ic=new Map,Sc=new Map,Zs=[],EA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(n,e){switch(n){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":Ic.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(e.pointerId)}}function Pu(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=oh(e),e!==null&&ov(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function TA(n,e,r,i,s){switch(e){case"focusin":return lo=Pu(lo,n,e,r,i,s),!0;case"dragenter":return uo=Pu(uo,n,e,r,i,s),!0;case"mouseover":return co=Pu(co,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return Ic.set(o,Pu(Ic.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Sc.set(o,Pu(Sc.get(o)||null,n,e,r,i,s)),!0}return!1}function gE(n){var e=la(n.target);if(e!==null){var r=Da(e);if(r!==null){if(e=r.tag,e===13){if(e=iE(r),e!==null){n.blockedOn=e,mE(n.priority,function(){dE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=wg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);pg=i,r.target.dispatchEvent(i),pg=null}else return e=oh(r),e!==null&&ov(e),n.blockedOn=r,!1;e.shift()}return!0}function A_(n,e,r){mf(n)&&r.delete(e)}function IA(){_g=!1,lo!==null&&mf(lo)&&(lo=null),uo!==null&&mf(uo)&&(uo=null),co!==null&&mf(co)&&(co=null),Ic.forEach(A_),Sc.forEach(A_)}function Ru(n,e){n.blockedOn===e&&(n.blockedOn=null,_g||(_g=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,IA)))}function kc(n){function e(s){return Ru(s,n)}if(0<zh.length){Ru(zh[0],n);for(var r=1;r<zh.length;r++){var i=zh[r];i.blockedOn===n&&(i.blockedOn=null)}}for(lo!==null&&Ru(lo,n),uo!==null&&Ru(uo,n),co!==null&&Ru(co,n),Ic.forEach(e),Sc.forEach(e),r=0;r<Zs.length;r++)i=Zs[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<Zs.length&&(r=Zs[0],r.blockedOn===null);)gE(r),r.blockedOn===null&&Zs.shift()}var Sl=Ps.ReactCurrentBatchConfig,Kf=!0;function SA(n,e,r,i){var s=pt,o=Sl.transition;Sl.transition=null;try{pt=1,av(n,e,r,i)}finally{pt=s,Sl.transition=o}}function kA(n,e,r,i){var s=pt,o=Sl.transition;Sl.transition=null;try{pt=4,av(n,e,r,i)}finally{pt=s,Sl.transition=o}}function av(n,e,r,i){if(Kf){var s=wg(n,e,r,i);if(s===null)dm(n,e,i,Wf,r),C_(n,i);else if(TA(s,n,e,r,i))i.stopPropagation();else if(C_(n,i),e&4&&-1<EA.indexOf(n)){for(;s!==null;){var o=oh(s);if(o!==null&&fE(o),o=wg(n,e,r,i),o===null&&dm(n,e,i,Wf,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else dm(n,e,i,null,r)}}var Wf=null;function wg(n,e,r,i){if(Wf=null,n=rv(i),n=la(n),n!==null)if(e=Da(n),e===null)n=null;else if(r=e.tag,r===13){if(n=iE(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Wf=n,null}function yE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pA()){case iv:return 1;case lE:return 4;case qf:case mA:return 16;case uE:return 536870912;default:return 16}default:return 16}}var io=null,lv=null,gf=null;function vE(){if(gf)return gf;var n,e=lv,r=e.length,i,s="value"in io?io.value:io.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return gf=s.slice(n,1<i?1-i:void 0)}function yf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $h(){return!0}function N_(){return!1}function yr(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$h:N_,this.isPropagationStopped=N_,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$h)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$h)},persist:function(){},isPersistent:$h}),e}var ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=yr(ru),sh=Lt({},ru,{view:0,detail:0}),CA=yr(sh),im,sm,Ou,Qd=Lt({},sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ou&&(Ou&&n.type==="mousemove"?(im=n.screenX-Ou.screenX,sm=n.screenY-Ou.screenY):sm=im=0,Ou=n),im)},movementY:function(n){return"movementY"in n?n.movementY:sm}}),P_=yr(Qd),AA=Lt({},Qd,{dataTransfer:0}),NA=yr(AA),PA=Lt({},sh,{relatedTarget:0}),om=yr(PA),RA=Lt({},ru,{animationName:0,elapsedTime:0,pseudoElement:0}),OA=yr(RA),jA=Lt({},ru,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),DA=yr(jA),MA=Lt({},ru,{data:0}),R_=yr(MA),LA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UA(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=FA[n])?!!e[n]:!1}function cv(){return UA}var zA=Lt({},sh,{key:function(n){if(n.key){var e=LA[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=yf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(n){return n.type==="keypress"?yf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$A=yr(zA),BA=Lt({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=yr(BA),qA=Lt({},sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),HA=yr(qA),KA=Lt({},ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),WA=yr(KA),GA=Lt({},Qd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),QA=yr(GA),YA=[9,13,27,32],hv=bs&&"CompositionEvent"in window,oc=null;bs&&"documentMode"in document&&(oc=document.documentMode);var XA=bs&&"TextEvent"in window&&!oc,_E=bs&&(!hv||oc&&8<oc&&11>=oc),j_=" ",D_=!1;function wE(n,e){switch(n){case"keyup":return YA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fl=!1;function JA(n,e){switch(n){case"compositionend":return xE(e);case"keypress":return e.which!==32?null:(D_=!0,j_);case"textInput":return n=e.data,n===j_&&D_?null:n;default:return null}}function ZA(n,e){if(fl)return n==="compositionend"||!hv&&wE(n,e)?(n=vE(),gf=lv=io=null,fl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _E&&e.locale!=="ko"?null:e.data;default:return null}}var eN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!eN[n.type]:e==="textarea"}function bE(n,e,r,i){Zb(i),e=Gf(e,"onChange"),0<e.length&&(r=new uv("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var ac=null,Cc=null;function tN(n){OE(n,0)}function Yd(n){var e=ml(n);if(Kb(e))return n}function nN(n,e){if(n==="change")return e}var EE=!1;if(bs){var am;if(bs){var lm="oninput"in document;if(!lm){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),lm=typeof L_.oninput=="function"}am=lm}else am=!1;EE=am&&(!document.documentMode||9<document.documentMode)}function V_(){ac&&(ac.detachEvent("onpropertychange",TE),Cc=ac=null)}function TE(n){if(n.propertyName==="value"&&Yd(Cc)){var e=[];bE(e,Cc,n,rv(n)),rE(tN,e)}}function rN(n,e,r){n==="focusin"?(V_(),ac=e,Cc=r,ac.attachEvent("onpropertychange",TE)):n==="focusout"&&V_()}function iN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yd(Cc)}function sN(n,e){if(n==="click")return Yd(e)}function oN(n,e){if(n==="input"||n==="change")return Yd(e)}function aN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ci=typeof Object.is=="function"?Object.is:aN;function Ac(n,e){if(ci(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!ng.call(e,s)||!ci(n[s],e[s]))return!1}return!0}function F_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function U_(n,e){var r=F_(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=F_(r)}}function IE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?IE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function SE(){for(var n=window,e=zf();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=zf(n.document)}return e}function fv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function lN(n){var e=SE(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&IE(r.ownerDocument.documentElement,r)){if(i!==null&&fv(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=U_(r,o);var a=U_(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uN=bs&&"documentMode"in document&&11>=document.documentMode,dl=null,xg=null,lc=null,bg=!1;function z_(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bg||dl==null||dl!==zf(i)||(i=dl,"selectionStart"in i&&fv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lc&&Ac(lc,i)||(lc=i,i=Gf(xg,"onSelect"),0<i.length&&(e=new uv("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=dl)))}function Bh(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var pl={animationend:Bh("Animation","AnimationEnd"),animationiteration:Bh("Animation","AnimationIteration"),animationstart:Bh("Animation","AnimationStart"),transitionend:Bh("Transition","TransitionEnd")},um={},kE={};bs&&(kE=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Xd(n){if(um[n])return um[n];if(!pl[n])return n;var e=pl[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in kE)return um[n]=e[r];return n}var CE=Xd("animationend"),AE=Xd("animationiteration"),NE=Xd("animationstart"),PE=Xd("transitionend"),RE=new Map,$_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Po(n,e){RE.set(n,e),ja(e,[n])}for(var cm=0;cm<$_.length;cm++){var hm=$_[cm],cN=hm.toLowerCase(),hN=hm[0].toUpperCase()+hm.slice(1);Po(cN,"on"+hN)}Po(CE,"onAnimationEnd");Po(AE,"onAnimationIteration");Po(NE,"onAnimationStart");Po("dblclick","onDoubleClick");Po("focusin","onFocus");Po("focusout","onBlur");Po(PE,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qu));function B_(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,cA(i,e,void 0,n),n.currentTarget=null}function OE(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;B_(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;B_(s,l,c),o=u}}}if(Bf)throw n=yg,Bf=!1,yg=null,n}function Et(n,e){var r=e[kg];r===void 0&&(r=e[kg]=new Set);var i=n+"__bubble";r.has(i)||(jE(e,n,2,!1),r.add(i))}function fm(n,e,r){var i=0;e&&(i|=4),jE(r,n,i,e)}var qh="_reactListening"+Math.random().toString(36).slice(2);function Nc(n){if(!n[qh]){n[qh]=!0,zb.forEach(function(r){r!=="selectionchange"&&(fN.has(r)||fm(r,!1,n),fm(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[qh]||(e[qh]=!0,fm("selectionchange",!1,e))}}function jE(n,e,r,i){switch(yE(e)){case 1:var s=SA;break;case 4:s=kA;break;default:s=av}r=s.bind(null,e,r,n),s=void 0,!gg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function dm(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=la(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}rE(function(){var c=o,f=rv(r),d=[];e:{var g=RE.get(n);if(g!==void 0){var _=uv,x=n;switch(n){case"keypress":if(yf(r)===0)break e;case"keydown":case"keyup":_=$A;break;case"focusin":x="focus",_=om;break;case"focusout":x="blur",_=om;break;case"beforeblur":case"afterblur":_=om;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=P_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=NA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=HA;break;case CE:case AE:case NE:_=OA;break;case PE:_=WA;break;case"scroll":_=CA;break;case"wheel":_=QA;break;case"copy":case"cut":case"paste":_=DA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=O_}var I=(e&4)!==0,P=!I&&n==="scroll",b=I?g!==null?g+"Capture":null:g;I=[];for(var T=c,A;T!==null;){A=T;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,b!==null&&(O=Tc(T,b),O!=null&&I.push(Pc(T,O,A)))),P)break;T=T.return}0<I.length&&(g=new _(g,x,null,r,f),d.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=n==="mouseover"||n==="pointerover",_=n==="mouseout"||n==="pointerout",g&&r!==pg&&(x=r.relatedTarget||r.fromElement)&&(la(x)||x[Es]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(x=r.relatedTarget||r.toElement,_=c,x=x?la(x):null,x!==null&&(P=Da(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(_=null,x=c),_!==x)){if(I=P_,O="onMouseLeave",b="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(I=O_,O="onPointerLeave",b="onPointerEnter",T="pointer"),P=_==null?g:ml(_),A=x==null?g:ml(x),g=new I(O,T+"leave",_,r,f),g.target=P,g.relatedTarget=A,O=null,la(f)===c&&(I=new I(b,T+"enter",x,r,f),I.target=A,I.relatedTarget=P,O=I),P=O,_&&x)t:{for(I=_,b=x,T=0,A=I;A;A=rl(A))T++;for(A=0,O=b;O;O=rl(O))A++;for(;0<T-A;)I=rl(I),T--;for(;0<A-T;)b=rl(b),A--;for(;T--;){if(I===b||b!==null&&I===b.alternate)break t;I=rl(I),b=rl(b)}I=null}else I=null;_!==null&&q_(d,g,_,I,!1),x!==null&&P!==null&&q_(d,P,x,I,!0)}}e:{if(g=c?ml(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var M=nN;else if(M_(g))if(EE)M=oN;else{M=iN;var z=rN}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=sN);if(M&&(M=M(n,c))){bE(d,M,r,f);break e}z&&z(n,g,c),n==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&ug(g,"number",g.value)}switch(z=c?ml(c):window,n){case"focusin":(M_(z)||z.contentEditable==="true")&&(dl=z,xg=c,lc=null);break;case"focusout":lc=xg=dl=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,z_(d,r,f);break;case"selectionchange":if(uN)break;case"keydown":case"keyup":z_(d,r,f)}var N;if(hv)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else fl?wE(n,r)&&(C="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(_E&&r.locale!=="ko"&&(fl||C!=="onCompositionStart"?C==="onCompositionEnd"&&fl&&(N=vE()):(io=f,lv="value"in io?io.value:io.textContent,fl=!0)),z=Gf(c,C),0<z.length&&(C=new R_(C,n,null,r,f),d.push({event:C,listeners:z}),N?C.data=N:(N=xE(r),N!==null&&(C.data=N)))),(N=XA?JA(n,r):ZA(n,r))&&(c=Gf(c,"onBeforeInput"),0<c.length&&(f=new R_("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:c}),f.data=N))}OE(d,e)})}function Pc(n,e,r){return{instance:n,listener:e,currentTarget:r}}function Gf(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Tc(n,r),o!=null&&i.unshift(Pc(n,o,s)),o=Tc(n,e),o!=null&&i.push(Pc(n,o,s))),n=n.return}return i}function rl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function q_(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=Tc(r,o),u!=null&&a.unshift(Pc(r,u,l))):s||(u=Tc(r,o),u!=null&&a.push(Pc(r,u,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var dN=/\r\n?/g,pN=/\u0000|\uFFFD/g;function H_(n){return(typeof n=="string"?n:""+n).replace(dN,`
`).replace(pN,"")}function Hh(n,e,r){if(e=H_(e),H_(n)!==e&&r)throw Error(we(425))}function Qf(){}var Eg=null,Tg=null;function Ig(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sg=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,gN=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(n){return K_.resolve(null).then(n).catch(yN)}:Sg;function yN(n){setTimeout(function(){throw n})}function pm(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),kc(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);kc(e)}function ho(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function W_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var iu=Math.random().toString(36).slice(2),Ri="__reactFiber$"+iu,Rc="__reactProps$"+iu,Es="__reactContainer$"+iu,kg="__reactEvents$"+iu,vN="__reactListeners$"+iu,_N="__reactHandles$"+iu;function la(n){var e=n[Ri];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Es]||r[Ri]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=W_(n);n!==null;){if(r=n[Ri])return r;n=W_(n)}return e}n=r,r=n.parentNode}return null}function oh(n){return n=n[Ri]||n[Es],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ml(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(we(33))}function Jd(n){return n[Rc]||null}var Cg=[],gl=-1;function Ro(n){return{current:n}}function kt(n){0>gl||(n.current=Cg[gl],Cg[gl]=null,gl--)}function bt(n,e){gl++,Cg[gl]=n.current,n.current=e}var bo={},Rn=Ro(bo),Xn=Ro(!1),ba=bo;function Fl(n,e){var r=n.type.contextTypes;if(!r)return bo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Jn(n){return n=n.childContextTypes,n!=null}function Yf(){kt(Xn),kt(Rn)}function G_(n,e,r){if(Rn.current!==bo)throw Error(we(168));bt(Rn,e),bt(Xn,r)}function DE(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(we(108,rA(n)||"Unknown",s));return Lt({},r,i)}function Xf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||bo,ba=Rn.current,bt(Rn,n),bt(Xn,Xn.current),!0}function Q_(n,e,r){var i=n.stateNode;if(!i)throw Error(we(169));r?(n=DE(n,e,ba),i.__reactInternalMemoizedMergedChildContext=n,kt(Xn),kt(Rn),bt(Rn,n)):kt(Xn),bt(Xn,r)}var cs=null,Zd=!1,mm=!1;function ME(n){cs===null?cs=[n]:cs.push(n)}function wN(n){Zd=!0,ME(n)}function Oo(){if(!mm&&cs!==null){mm=!0;var n=0,e=pt;try{var r=cs;for(pt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}cs=null,Zd=!1}catch(s){throw cs!==null&&(cs=cs.slice(n+1)),aE(iv,Oo),s}finally{pt=e,mm=!1}}return null}var yl=[],vl=0,Jf=null,Zf=0,Sr=[],kr=0,Ea=null,ds=1,ps="";function ra(n,e){yl[vl++]=Zf,yl[vl++]=Jf,Jf=n,Zf=e}function LE(n,e,r){Sr[kr++]=ds,Sr[kr++]=ps,Sr[kr++]=Ea,Ea=n;var i=ds;n=ps;var s=32-oi(i)-1;i&=~(1<<s),r+=1;var o=32-oi(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ds=1<<32-oi(e)+s|r<<s|i,ps=o+n}else ds=1<<o|r<<s|i,ps=n}function dv(n){n.return!==null&&(ra(n,1),LE(n,1,0))}function pv(n){for(;n===Jf;)Jf=yl[--vl],yl[vl]=null,Zf=yl[--vl],yl[vl]=null;for(;n===Ea;)Ea=Sr[--kr],Sr[kr]=null,ps=Sr[--kr],Sr[kr]=null,ds=Sr[--kr],Sr[kr]=null}var fr=null,cr=null,Nt=!1,ti=null;function VE(n,e){var r=Pr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function Y_(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fr=n,cr=ho(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fr=n,cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ea!==null?{id:ds,overflow:ps}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Pr(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,fr=n,cr=null,!0):!1;default:return!1}}function Ag(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ng(n){if(Nt){var e=cr;if(e){var r=e;if(!Y_(n,e)){if(Ag(n))throw Error(we(418));e=ho(r.nextSibling);var i=fr;e&&Y_(n,e)?VE(i,r):(n.flags=n.flags&-4097|2,Nt=!1,fr=n)}}else{if(Ag(n))throw Error(we(418));n.flags=n.flags&-4097|2,Nt=!1,fr=n}}}function X_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fr=n}function Kh(n){if(n!==fr)return!1;if(!Nt)return X_(n),Nt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ig(n.type,n.memoizedProps)),e&&(e=cr)){if(Ag(n))throw FE(),Error(we(418));for(;e;)VE(n,e),e=ho(e.nextSibling)}if(X_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){cr=ho(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}cr=null}}else cr=fr?ho(n.stateNode.nextSibling):null;return!0}function FE(){for(var n=cr;n;)n=ho(n.nextSibling)}function Ul(){cr=fr=null,Nt=!1}function mv(n){ti===null?ti=[n]:ti.push(n)}var xN=Ps.ReactCurrentBatchConfig;function ju(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var i=r.stateNode}if(!i)throw Error(we(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,n))}return n}function Wh(n,e){throw n=Object.prototype.toString.call(e),Error(we(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function J_(n){var e=n._init;return e(n._payload)}function UE(n){function e(b,T){if(n){var A=b.deletions;A===null?(b.deletions=[T],b.flags|=16):A.push(T)}}function r(b,T){if(!n)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function i(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function s(b,T){return b=go(b,T),b.index=0,b.sibling=null,b}function o(b,T,A){return b.index=A,n?(A=b.alternate,A!==null?(A=A.index,A<T?(b.flags|=2,T):A):(b.flags|=2,T)):(b.flags|=1048576,T)}function a(b){return n&&b.alternate===null&&(b.flags|=2),b}function l(b,T,A,O){return T===null||T.tag!==6?(T=bm(A,b.mode,O),T.return=b,T):(T=s(T,A),T.return=b,T)}function u(b,T,A,O){var M=A.type;return M===hl?f(b,T,A.props.children,O,A.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ys&&J_(M)===T.type)?(O=s(T,A.props),O.ref=ju(b,T,A),O.return=b,O):(O=Tf(A.type,A.key,A.props,null,b.mode,O),O.ref=ju(b,T,A),O.return=b,O)}function c(b,T,A,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=Em(A,b.mode,O),T.return=b,T):(T=s(T,A.children||[]),T.return=b,T)}function f(b,T,A,O,M){return T===null||T.tag!==7?(T=ga(A,b.mode,O,M),T.return=b,T):(T=s(T,A),T.return=b,T)}function d(b,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=bm(""+T,b.mode,A),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Mh:return A=Tf(T.type,T.key,T.props,null,b.mode,A),A.ref=ju(b,null,T),A.return=b,A;case cl:return T=Em(T,b.mode,A),T.return=b,T;case Ys:var O=T._init;return d(b,O(T._payload),A)}if(Wu(T)||Au(T))return T=ga(T,b.mode,A,null),T.return=b,T;Wh(b,T)}return null}function g(b,T,A,O){var M=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(b,T,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Mh:return A.key===M?u(b,T,A,O):null;case cl:return A.key===M?c(b,T,A,O):null;case Ys:return M=A._init,g(b,T,M(A._payload),O)}if(Wu(A)||Au(A))return M!==null?null:f(b,T,A,O,null);Wh(b,A)}return null}function _(b,T,A,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(A)||null,l(T,b,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Mh:return b=b.get(O.key===null?A:O.key)||null,u(T,b,O,M);case cl:return b=b.get(O.key===null?A:O.key)||null,c(T,b,O,M);case Ys:var z=O._init;return _(b,T,A,z(O._payload),M)}if(Wu(O)||Au(O))return b=b.get(A)||null,f(T,b,O,M,null);Wh(T,O)}return null}function x(b,T,A,O){for(var M=null,z=null,N=T,C=T=0,D=null;N!==null&&C<A.length;C++){N.index>C?(D=N,N=null):D=N.sibling;var L=g(b,N,A[C],O);if(L===null){N===null&&(N=D);break}n&&N&&L.alternate===null&&e(b,N),T=o(L,T,C),z===null?M=L:z.sibling=L,z=L,N=D}if(C===A.length)return r(b,N),Nt&&ra(b,C),M;if(N===null){for(;C<A.length;C++)N=d(b,A[C],O),N!==null&&(T=o(N,T,C),z===null?M=N:z.sibling=N,z=N);return Nt&&ra(b,C),M}for(N=i(b,N);C<A.length;C++)D=_(N,b,C,A[C],O),D!==null&&(n&&D.alternate!==null&&N.delete(D.key===null?C:D.key),T=o(D,T,C),z===null?M=D:z.sibling=D,z=D);return n&&N.forEach(function(V){return e(b,V)}),Nt&&ra(b,C),M}function I(b,T,A,O){var M=Au(A);if(typeof M!="function")throw Error(we(150));if(A=M.call(A),A==null)throw Error(we(151));for(var z=M=null,N=T,C=T=0,D=null,L=A.next();N!==null&&!L.done;C++,L=A.next()){N.index>C?(D=N,N=null):D=N.sibling;var V=g(b,N,L.value,O);if(V===null){N===null&&(N=D);break}n&&N&&V.alternate===null&&e(b,N),T=o(V,T,C),z===null?M=V:z.sibling=V,z=V,N=D}if(L.done)return r(b,N),Nt&&ra(b,C),M;if(N===null){for(;!L.done;C++,L=A.next())L=d(b,L.value,O),L!==null&&(T=o(L,T,C),z===null?M=L:z.sibling=L,z=L);return Nt&&ra(b,C),M}for(N=i(b,N);!L.done;C++,L=A.next())L=_(N,b,C,L.value,O),L!==null&&(n&&L.alternate!==null&&N.delete(L.key===null?C:L.key),T=o(L,T,C),z===null?M=L:z.sibling=L,z=L);return n&&N.forEach(function(U){return e(b,U)}),Nt&&ra(b,C),M}function P(b,T,A,O){if(typeof A=="object"&&A!==null&&A.type===hl&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Mh:e:{for(var M=A.key,z=T;z!==null;){if(z.key===M){if(M=A.type,M===hl){if(z.tag===7){r(b,z.sibling),T=s(z,A.props.children),T.return=b,b=T;break e}}else if(z.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ys&&J_(M)===z.type){r(b,z.sibling),T=s(z,A.props),T.ref=ju(b,z,A),T.return=b,b=T;break e}r(b,z);break}else e(b,z);z=z.sibling}A.type===hl?(T=ga(A.props.children,b.mode,O,A.key),T.return=b,b=T):(O=Tf(A.type,A.key,A.props,null,b.mode,O),O.ref=ju(b,T,A),O.return=b,b=O)}return a(b);case cl:e:{for(z=A.key;T!==null;){if(T.key===z)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){r(b,T.sibling),T=s(T,A.children||[]),T.return=b,b=T;break e}else{r(b,T);break}else e(b,T);T=T.sibling}T=Em(A,b.mode,O),T.return=b,b=T}return a(b);case Ys:return z=A._init,P(b,T,z(A._payload),O)}if(Wu(A))return x(b,T,A,O);if(Au(A))return I(b,T,A,O);Wh(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(r(b,T.sibling),T=s(T,A),T.return=b,b=T):(r(b,T),T=bm(A,b.mode,O),T.return=b,b=T),a(b)):r(b,T)}return P}var zl=UE(!0),zE=UE(!1),ed=Ro(null),td=null,_l=null,gv=null;function yv(){gv=_l=td=null}function vv(n){var e=ed.current;kt(ed),n._currentValue=e}function Pg(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function kl(n,e){td=n,gv=_l=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qn=!0),n.firstContext=null)}function Dr(n){var e=n._currentValue;if(gv!==n)if(n={context:n,memoizedValue:e,next:null},_l===null){if(td===null)throw Error(we(308));_l=n,td.dependencies={lanes:0,firstContext:n}}else _l=_l.next=n;return e}var ua=null;function _v(n){ua===null?ua=[n]:ua.push(n)}function $E(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,_v(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ts(n,i)}function Ts(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var Xs=!1;function wv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function _s(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function fo(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ut&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ts(n,r)}return s=i.interleaved,s===null?(e.next=e,_v(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ts(n,r)}function vf(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,sv(n,r)}}function Z_(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function nd(n,e,r,i){var s=n.updateQueue;Xs=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var f=n.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var d=s.baseState;a=0,f=c=u=null,l=o;do{var g=l.lane,_=l.eventTime;if((i&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=n,I=l;switch(g=e,_=r,I.tag){case 1:if(x=I.payload,typeof x=="function"){d=x.call(_,d,g);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=I.payload,g=typeof x=="function"?x.call(_,d,g):x,g==null)break e;d=Lt({},d,g);break e;case 2:Xs=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=_,u=d):f=f.next=_,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ia|=a,n.lanes=a,n.memoizedState=d}}function ew(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(we(191,s));s.call(i)}}}var ah={},Di=Ro(ah),Oc=Ro(ah),jc=Ro(ah);function ca(n){if(n===ah)throw Error(we(174));return n}function xv(n,e){switch(bt(jc,e),bt(Oc,n),bt(Di,ah),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=hg(e,n)}kt(Di),bt(Di,e)}function $l(){kt(Di),kt(Oc),kt(jc)}function qE(n){ca(jc.current);var e=ca(Di.current),r=hg(e,n.type);e!==r&&(bt(Oc,n),bt(Di,r))}function bv(n){Oc.current===n&&(kt(Di),kt(Oc))}var Dt=Ro(0);function rd(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gm=[];function Ev(){for(var n=0;n<gm.length;n++)gm[n]._workInProgressVersionPrimary=null;gm.length=0}var _f=Ps.ReactCurrentDispatcher,ym=Ps.ReactCurrentBatchConfig,Ta=0,Mt=null,en=null,fn=null,id=!1,uc=!1,Dc=0,bN=0;function In(){throw Error(we(321))}function Tv(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!ci(n[r],e[r]))return!1;return!0}function Iv(n,e,r,i,s,o){if(Ta=o,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_f.current=n===null||n.memoizedState===null?SN:kN,n=r(i,s),uc){o=0;do{if(uc=!1,Dc=0,25<=o)throw Error(we(301));o+=1,fn=en=null,e.updateQueue=null,_f.current=CN,n=r(i,s)}while(uc)}if(_f.current=sd,e=en!==null&&en.next!==null,Ta=0,fn=en=Mt=null,id=!1,e)throw Error(we(300));return n}function Sv(){var n=Dc!==0;return Dc=0,n}function Ci(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Mt.memoizedState=fn=n:fn=fn.next=n,fn}function Mr(){if(en===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=en.next;var e=fn===null?Mt.memoizedState:fn.next;if(e!==null)fn=e,en=n;else{if(n===null)throw Error(we(310));en=n,n={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},fn===null?Mt.memoizedState=fn=n:fn=fn.next=n}return fn}function Mc(n,e){return typeof e=="function"?e(n):e}function vm(n){var e=Mr(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=n;var i=en,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var f=c.lane;if((Ta&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,a=i):u=u.next=d,Mt.lanes|=f,Ia|=f}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,ci(i,e.memoizedState)||(Qn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Mt.lanes|=o,Ia|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function _m(n){var e=Mr(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);ci(o,e.memoizedState)||(Qn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function HE(){}function KE(n,e){var r=Mt,i=Mr(),s=e(),o=!ci(i.memoizedState,s);if(o&&(i.memoizedState=s,Qn=!0),i=i.queue,kv(QE.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||fn!==null&&fn.memoizedState.tag&1){if(r.flags|=2048,Lc(9,GE.bind(null,r,i,s,e),void 0,null),dn===null)throw Error(we(349));Ta&30||WE(r,e,s)}return s}function WE(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function GE(n,e,r,i){e.value=r,e.getSnapshot=i,YE(e)&&XE(n)}function QE(n,e,r){return r(function(){YE(e)&&XE(n)})}function YE(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!ci(n,r)}catch{return!0}}function XE(n){var e=Ts(n,1);e!==null&&ai(e,n,1,-1)}function tw(n){var e=Ci();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:n},e.queue=n,n=n.dispatch=IN.bind(null,Mt,n),[e.memoizedState,n]}function Lc(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function JE(){return Mr().memoizedState}function wf(n,e,r,i){var s=Ci();Mt.flags|=n,s.memoizedState=Lc(1|e,r,void 0,i===void 0?null:i)}function ep(n,e,r,i){var s=Mr();i=i===void 0?null:i;var o=void 0;if(en!==null){var a=en.memoizedState;if(o=a.destroy,i!==null&&Tv(i,a.deps)){s.memoizedState=Lc(e,r,o,i);return}}Mt.flags|=n,s.memoizedState=Lc(1|e,r,o,i)}function nw(n,e){return wf(8390656,8,n,e)}function kv(n,e){return ep(2048,8,n,e)}function ZE(n,e){return ep(4,2,n,e)}function eT(n,e){return ep(4,4,n,e)}function tT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function nT(n,e,r){return r=r!=null?r.concat([n]):null,ep(4,4,tT.bind(null,e,n),r)}function Cv(){}function rT(n,e){var r=Mr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Tv(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function iT(n,e){var r=Mr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Tv(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function sT(n,e,r){return Ta&21?(ci(r,e)||(r=cE(),Mt.lanes|=r,Ia|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qn=!0),n.memoizedState=r)}function EN(n,e){var r=pt;pt=r!==0&&4>r?r:4,n(!0);var i=ym.transition;ym.transition={};try{n(!1),e()}finally{pt=r,ym.transition=i}}function oT(){return Mr().memoizedState}function TN(n,e,r){var i=mo(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},aT(n))lT(e,r);else if(r=$E(n,e,r,i),r!==null){var s=Fn();ai(r,n,i,s),uT(r,e,i)}}function IN(n,e,r){var i=mo(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(aT(n))lT(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,ci(l,a)){var u=e.interleaved;u===null?(s.next=s,_v(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=$E(n,e,s,i),r!==null&&(s=Fn(),ai(r,n,i,s),uT(r,e,i))}}function aT(n){var e=n.alternate;return n===Mt||e!==null&&e===Mt}function lT(n,e){uc=id=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function uT(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,sv(n,r)}}var sd={readContext:Dr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},SN={readContext:Dr,useCallback:function(n,e){return Ci().memoizedState=[n,e===void 0?null:e],n},useContext:Dr,useEffect:nw,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,wf(4194308,4,tT.bind(null,e,n),r)},useLayoutEffect:function(n,e){return wf(4194308,4,n,e)},useInsertionEffect:function(n,e){return wf(4,2,n,e)},useMemo:function(n,e){var r=Ci();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Ci();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=TN.bind(null,Mt,n),[i.memoizedState,n]},useRef:function(n){var e=Ci();return n={current:n},e.memoizedState=n},useState:tw,useDebugValue:Cv,useDeferredValue:function(n){return Ci().memoizedState=n},useTransition:function(){var n=tw(!1),e=n[0];return n=EN.bind(null,n[1]),Ci().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Mt,s=Ci();if(Nt){if(r===void 0)throw Error(we(407));r=r()}else{if(r=e(),dn===null)throw Error(we(349));Ta&30||WE(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,nw(QE.bind(null,i,o,n),[n]),i.flags|=2048,Lc(9,GE.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=Ci(),e=dn.identifierPrefix;if(Nt){var r=ps,i=ds;r=(i&~(1<<32-oi(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Dc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=bN++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},kN={readContext:Dr,useCallback:rT,useContext:Dr,useEffect:kv,useImperativeHandle:nT,useInsertionEffect:ZE,useLayoutEffect:eT,useMemo:iT,useReducer:vm,useRef:JE,useState:function(){return vm(Mc)},useDebugValue:Cv,useDeferredValue:function(n){var e=Mr();return sT(e,en.memoizedState,n)},useTransition:function(){var n=vm(Mc)[0],e=Mr().memoizedState;return[n,e]},useMutableSource:HE,useSyncExternalStore:KE,useId:oT,unstable_isNewReconciler:!1},CN={readContext:Dr,useCallback:rT,useContext:Dr,useEffect:kv,useImperativeHandle:nT,useInsertionEffect:ZE,useLayoutEffect:eT,useMemo:iT,useReducer:_m,useRef:JE,useState:function(){return _m(Mc)},useDebugValue:Cv,useDeferredValue:function(n){var e=Mr();return en===null?e.memoizedState=n:sT(e,en.memoizedState,n)},useTransition:function(){var n=_m(Mc)[0],e=Mr().memoizedState;return[n,e]},useMutableSource:HE,useSyncExternalStore:KE,useId:oT,unstable_isNewReconciler:!1};function Zr(n,e){if(n&&n.defaultProps){e=Lt({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Rg(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Lt({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var tp={isMounted:function(n){return(n=n._reactInternals)?Da(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Fn(),s=mo(n),o=_s(i,s);o.payload=e,r!=null&&(o.callback=r),e=fo(n,o,s),e!==null&&(ai(e,n,s,i),vf(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Fn(),s=mo(n),o=_s(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=fo(n,o,s),e!==null&&(ai(e,n,s,i),vf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Fn(),i=mo(n),s=_s(r,i);s.tag=2,e!=null&&(s.callback=e),e=fo(n,s,i),e!==null&&(ai(e,n,i,r),vf(e,n,i))}};function rw(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ac(r,i)||!Ac(s,o):!0}function cT(n,e,r){var i=!1,s=bo,o=e.contextType;return typeof o=="object"&&o!==null?o=Dr(o):(s=Jn(e)?ba:Rn.current,i=e.contextTypes,o=(i=i!=null)?Fl(n,s):bo),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tp,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function iw(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&tp.enqueueReplaceState(e,e.state,null)}function Og(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},wv(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Dr(o):(o=Jn(e)?ba:Rn.current,s.context=Fl(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Rg(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tp.enqueueReplaceState(s,s.state,null),nd(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Bl(n,e){try{var r="",i=e;do r+=nA(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function wm(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function jg(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var AN=typeof WeakMap=="function"?WeakMap:Map;function hT(n,e,r){r=_s(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){ad||(ad=!0,qg=i),jg(n,e)},r}function fT(n,e,r){r=_s(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){jg(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){jg(n,e),typeof i!="function"&&(po===null?po=new Set([this]):po.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function sw(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new AN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=BN.bind(null,n,e,r),e.then(n,n))}function ow(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function aw(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=_s(-1,1),e.tag=2,fo(r,e,1))),r.lanes|=1),n)}var NN=Ps.ReactCurrentOwner,Qn=!1;function Ln(n,e,r,i){e.child=n===null?zE(e,null,r,i):zl(e,n.child,r,i)}function lw(n,e,r,i,s){r=r.render;var o=e.ref;return kl(e,s),i=Iv(n,e,r,i,o,s),r=Sv(),n!==null&&!Qn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Is(n,e,s)):(Nt&&r&&dv(e),e.flags|=1,Ln(n,e,i,s),e.child)}function uw(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!Mv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,dT(n,e,o,i,s)):(n=Tf(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ac,r(a,i)&&n.ref===e.ref)return Is(n,e,s)}return e.flags|=1,n=go(o,i),n.ref=e.ref,n.return=e,e.child=n}function dT(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(Ac(o,i)&&n.ref===e.ref)if(Qn=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Qn=!0);else return e.lanes=n.lanes,Is(n,e,s)}return Dg(n,e,r,i,s)}function pT(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(xl,ur),ur|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,bt(xl,ur),ur|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,bt(xl,ur),ur|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,bt(xl,ur),ur|=i;return Ln(n,e,s,r),e.child}function mT(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Dg(n,e,r,i,s){var o=Jn(r)?ba:Rn.current;return o=Fl(e,o),kl(e,s),r=Iv(n,e,r,i,o,s),i=Sv(),n!==null&&!Qn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Is(n,e,s)):(Nt&&i&&dv(e),e.flags|=1,Ln(n,e,r,s),e.child)}function cw(n,e,r,i,s){if(Jn(r)){var o=!0;Xf(e)}else o=!1;if(kl(e,s),e.stateNode===null)xf(n,e),cT(e,r,i),Og(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Dr(c):(c=Jn(r)?ba:Rn.current,c=Fl(e,c));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&iw(e,a,i,c),Xs=!1;var g=e.memoizedState;a.state=g,nd(e,i,a,s),u=e.memoizedState,l!==i||g!==u||Xn.current||Xs?(typeof f=="function"&&(Rg(e,r,f,i),u=e.memoizedState),(l=Xs||rw(e,r,l,i,g,u,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,BE(n,e),l=e.memoizedProps,c=e.type===e.elementType?l:Zr(e.type,l),a.props=c,d=e.pendingProps,g=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Dr(u):(u=Jn(r)?ba:Rn.current,u=Fl(e,u));var _=r.getDerivedStateFromProps;(f=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||g!==u)&&iw(e,a,i,u),Xs=!1,g=e.memoizedState,a.state=g,nd(e,i,a,s);var x=e.memoizedState;l!==d||g!==x||Xn.current||Xs?(typeof _=="function"&&(Rg(e,r,_,i),x=e.memoizedState),(c=Xs||rw(e,r,c,i,g,x,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,x,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),a.props=i,a.state=x,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&g===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&g===n.memoizedState||(e.flags|=1024),i=!1)}return Mg(n,e,r,i,o,s)}function Mg(n,e,r,i,s,o){mT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&Q_(e,r,!1),Is(n,e,o);i=e.stateNode,NN.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=zl(e,n.child,null,o),e.child=zl(e,null,l,o)):Ln(n,e,l,o),e.memoizedState=i.state,s&&Q_(e,r,!0),e.child}function gT(n){var e=n.stateNode;e.pendingContext?G_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&G_(n,e.context,!1),xv(n,e.containerInfo)}function hw(n,e,r,i,s){return Ul(),mv(s),e.flags|=256,Ln(n,e,r,i),e.child}var Lg={dehydrated:null,treeContext:null,retryLane:0};function Vg(n){return{baseLanes:n,cachePool:null,transitions:null}}function yT(n,e,r){var i=e.pendingProps,s=Dt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),bt(Dt,s&1),n===null)return Ng(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ip(a,i,0,null),n=ga(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Vg(r),e.memoizedState=Lg,n):Av(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return PN(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=go(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=go(l,o):(o=ga(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?Vg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=Lg,i}return o=n.child,n=o.sibling,i=go(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function Av(n,e){return e=ip({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Gh(n,e,r,i){return i!==null&&mv(i),zl(e,n.child,null,r),n=Av(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function PN(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=wm(Error(we(422))),Gh(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=ip({mode:"visible",children:i.children},s,0,null),o=ga(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&zl(e,n.child,null,a),e.child.memoizedState=Vg(a),e.memoizedState=Lg,o);if(!(e.mode&1))return Gh(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(we(419)),i=wm(o,i,void 0),Gh(n,e,a,i)}if(l=(a&n.childLanes)!==0,Qn||l){if(i=dn,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ts(n,s),ai(i,n,s,-1))}return Dv(),i=wm(Error(we(421))),Gh(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=qN.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,cr=ho(s.nextSibling),fr=e,Nt=!0,ti=null,n!==null&&(Sr[kr++]=ds,Sr[kr++]=ps,Sr[kr++]=Ea,ds=n.id,ps=n.overflow,Ea=e),e=Av(e,i.children),e.flags|=4096,e)}function fw(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Pg(n.return,e,r)}function xm(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function vT(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Ln(n,e,i.children,r),i=Dt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fw(n,r,e);else if(n.tag===19)fw(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(bt(Dt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&rd(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),xm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&rd(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}xm(e,!0,r,null,o);break;case"together":xm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Is(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Ia|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(we(153));if(e.child!==null){for(n=e.child,r=go(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=go(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function RN(n,e,r){switch(e.tag){case 3:gT(e),Ul();break;case 5:qE(e);break;case 1:Jn(e.type)&&Xf(e);break;case 4:xv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;bt(ed,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(bt(Dt,Dt.current&1),e.flags|=128,null):r&e.child.childLanes?yT(n,e,r):(bt(Dt,Dt.current&1),n=Is(n,e,r),n!==null?n.sibling:null);bt(Dt,Dt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return vT(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),bt(Dt,Dt.current),i)break;return null;case 22:case 23:return e.lanes=0,pT(n,e,r)}return Is(n,e,r)}var _T,Fg,wT,xT;_T=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fg=function(){};wT=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,ca(Di.current);var o=null;switch(r){case"input":s=ag(n,s),i=ag(n,i),o=[];break;case"select":s=Lt({},s,{value:void 0}),i=Lt({},i,{value:void 0}),o=[];break;case"textarea":s=cg(n,s),i=cg(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Qf)}fg(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(bc.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(bc.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Et("scroll",n),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};xT=function(n,e,r,i){r!==i&&(e.flags|=4)};function Du(n,e){if(!Nt)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Sn(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function ON(n,e,r){var i=e.pendingProps;switch(pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return Jn(e.type)&&Yf(),Sn(e),null;case 3:return i=e.stateNode,$l(),kt(Xn),kt(Rn),Ev(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Kh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(Wg(ti),ti=null))),Fg(n,e),Sn(e),null;case 5:bv(e);var s=ca(jc.current);if(r=e.type,n!==null&&e.stateNode!=null)wT(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(we(166));return Sn(e),null}if(n=ca(Di.current),Kh(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Ri]=e,i[Rc]=o,n=(e.mode&1)!==0,r){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(s=0;s<Qu.length;s++)Et(Qu[s],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":x_(i,o),Et("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Et("invalid",i);break;case"textarea":E_(i,o),Et("invalid",i)}fg(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Hh(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Hh(i.textContent,l,n),s=["children",""+l]):bc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Et("scroll",i)}switch(r){case"input":Lh(i),b_(i,o,!0);break;case"textarea":Lh(i),T_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Qf)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qb(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Ri]=e,n[Rc]=i,_T(n,e,!1,!1),e.stateNode=n;e:{switch(a=dg(r,i),r){case"dialog":Et("cancel",n),Et("close",n),s=i;break;case"iframe":case"object":case"embed":Et("load",n),s=i;break;case"video":case"audio":for(s=0;s<Qu.length;s++)Et(Qu[s],n);s=i;break;case"source":Et("error",n),s=i;break;case"img":case"image":case"link":Et("error",n),Et("load",n),s=i;break;case"details":Et("toggle",n),s=i;break;case"input":x_(n,i),s=ag(n,i),Et("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Lt({},i,{value:void 0}),Et("invalid",n);break;case"textarea":E_(n,i),s=cg(n,i),Et("invalid",n);break;default:s=i}fg(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Jb(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yb(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Ec(n,u):typeof u=="number"&&Ec(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bc.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Et("scroll",n):u!=null&&Zy(n,o,u,a))}switch(r){case"input":Lh(n),b_(n,i,!1);break;case"textarea":Lh(n),T_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+xo(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?El(n,!!i.multiple,o,!1):i.defaultValue!=null&&El(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Qf)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(n&&e.stateNode!=null)xT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(we(166));if(r=ca(jc.current),ca(Di.current),Kh(e)){if(i=e.stateNode,r=e.memoizedProps,i[Ri]=e,(o=i.nodeValue!==r)&&(n=fr,n!==null))switch(n.tag){case 3:Hh(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Hh(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ri]=e,e.stateNode=i}return Sn(e),null;case 13:if(kt(Dt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nt&&cr!==null&&e.mode&1&&!(e.flags&128))FE(),Ul(),e.flags|=98560,o=!1;else if(o=Kh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(we(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[Ri]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),o=!1}else ti!==null&&(Wg(ti),ti=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Dt.current&1?nn===0&&(nn=3):Dv())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return $l(),Fg(n,e),n===null&&Nc(e.stateNode.containerInfo),Sn(e),null;case 10:return vv(e.type._context),Sn(e),null;case 17:return Jn(e.type)&&Yf(),Sn(e),null;case 19:if(kt(Dt),o=e.memoizedState,o===null)return Sn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Du(o,!1);else{if(nn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=rd(n),a!==null){for(e.flags|=128,Du(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return bt(Dt,Dt.current&1|2),e.child}n=n.sibling}o.tail!==null&&Kt()>ql&&(e.flags|=128,i=!0,Du(o,!1),e.lanes=4194304)}else{if(!i)if(n=rd(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Du(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Nt)return Sn(e),null}else 2*Kt()-o.renderingStartTime>ql&&r!==1073741824&&(e.flags|=128,i=!0,Du(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Kt(),e.sibling=null,r=Dt.current,bt(Dt,i?r&1|2:r&1),e):(Sn(e),null);case 22:case 23:return jv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ur&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function jN(n,e){switch(pv(e),e.tag){case 1:return Jn(e.type)&&Yf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return $l(),kt(Xn),kt(Rn),Ev(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return bv(e),null;case 13:if(kt(Dt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Ul()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return kt(Dt),null;case 4:return $l(),null;case 10:return vv(e.type._context),null;case 22:case 23:return jv(),null;case 24:return null;default:return null}}var Qh=!1,Nn=!1,DN=typeof WeakSet=="function"?WeakSet:Set,Le=null;function wl(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){zt(n,e,i)}else r.current=null}function Ug(n,e,r){try{r()}catch(i){zt(n,e,i)}}var dw=!1;function MN(n,e){if(Eg=Kf,n=SE(),fv(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,f=0,d=n,g=null;t:for(;;){for(var _;d!==r||s!==0&&d.nodeType!==3||(l=a+s),d!==o||i!==0&&d.nodeType!==3||(u=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(_=d.firstChild)!==null;)g=d,d=_;for(;;){if(d===n)break t;if(g===r&&++c===s&&(l=a),g===o&&++f===i&&(u=a),(_=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=_}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tg={focusedElem:n,selectionRange:r},Kf=!1,Le=e;Le!==null;)if(e=Le,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Le=n;else for(;Le!==null;){e=Le;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var I=x.memoizedProps,P=x.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?I:Zr(e.type,I),P);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(O){zt(e,e.return,O)}if(n=e.sibling,n!==null){n.return=e.return,Le=n;break}Le=e.return}return x=dw,dw=!1,x}function cc(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ug(e,r,o)}s=s.next}while(s!==i)}}function np(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function zg(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function bT(n){var e=n.alternate;e!==null&&(n.alternate=null,bT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ri],delete e[Rc],delete e[kg],delete e[vN],delete e[_N])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ET(n){return n.tag===5||n.tag===3||n.tag===4}function pw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ET(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $g(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Qf));else if(i!==4&&(n=n.child,n!==null))for($g(n,e,r),n=n.sibling;n!==null;)$g(n,e,r),n=n.sibling}function Bg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Bg(n,e,r),n=n.sibling;n!==null;)Bg(n,e,r),n=n.sibling}var pn=null,ei=!1;function Ks(n,e,r){for(r=r.child;r!==null;)TT(n,e,r),r=r.sibling}function TT(n,e,r){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(Gd,r)}catch{}switch(r.tag){case 5:Nn||wl(r,e);case 6:var i=pn,s=ei;pn=null,Ks(n,e,r),pn=i,ei=s,pn!==null&&(ei?(n=pn,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):pn.removeChild(r.stateNode));break;case 18:pn!==null&&(ei?(n=pn,r=r.stateNode,n.nodeType===8?pm(n.parentNode,r):n.nodeType===1&&pm(n,r),kc(n)):pm(pn,r.stateNode));break;case 4:i=pn,s=ei,pn=r.stateNode.containerInfo,ei=!0,Ks(n,e,r),pn=i,ei=s;break;case 0:case 11:case 14:case 15:if(!Nn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ug(r,e,a),s=s.next}while(s!==i)}Ks(n,e,r);break;case 1:if(!Nn&&(wl(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){zt(r,e,l)}Ks(n,e,r);break;case 21:Ks(n,e,r);break;case 22:r.mode&1?(Nn=(i=Nn)||r.memoizedState!==null,Ks(n,e,r),Nn=i):Ks(n,e,r);break;default:Ks(n,e,r)}}function mw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new DN),e.forEach(function(i){var s=HN.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Qr(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:pn=l.stateNode,ei=!1;break e;case 3:pn=l.stateNode.containerInfo,ei=!0;break e;case 4:pn=l.stateNode.containerInfo,ei=!0;break e}l=l.return}if(pn===null)throw Error(we(160));TT(o,a,s),pn=null,ei=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){zt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IT(e,n),e=e.sibling}function IT(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Qr(e,n),Si(n),i&4){try{cc(3,n,n.return),np(3,n)}catch(I){zt(n,n.return,I)}try{cc(5,n,n.return)}catch(I){zt(n,n.return,I)}}break;case 1:Qr(e,n),Si(n),i&512&&r!==null&&wl(r,r.return);break;case 5:if(Qr(e,n),Si(n),i&512&&r!==null&&wl(r,r.return),n.flags&32){var s=n.stateNode;try{Ec(s,"")}catch(I){zt(n,n.return,I)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Wb(s,o),dg(l,a);var c=dg(l,o);for(a=0;a<u.length;a+=2){var f=u[a],d=u[a+1];f==="style"?Jb(s,d):f==="dangerouslySetInnerHTML"?Yb(s,d):f==="children"?Ec(s,d):Zy(s,f,d,c)}switch(l){case"input":lg(s,o);break;case"textarea":Gb(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?El(s,!!o.multiple,_,!1):g!==!!o.multiple&&(o.defaultValue!=null?El(s,!!o.multiple,o.defaultValue,!0):El(s,!!o.multiple,o.multiple?[]:"",!1))}s[Rc]=o}catch(I){zt(n,n.return,I)}}break;case 6:if(Qr(e,n),Si(n),i&4){if(n.stateNode===null)throw Error(we(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(I){zt(n,n.return,I)}}break;case 3:if(Qr(e,n),Si(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{kc(e.containerInfo)}catch(I){zt(n,n.return,I)}break;case 4:Qr(e,n),Si(n);break;case 13:Qr(e,n),Si(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Rv=Kt())),i&4&&mw(n);break;case 22:if(f=r!==null&&r.memoizedState!==null,n.mode&1?(Nn=(c=Nn)||f,Qr(e,n),Nn=c):Qr(e,n),Si(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!f&&n.mode&1)for(Le=n,f=n.child;f!==null;){for(d=Le=f;Le!==null;){switch(g=Le,_=g.child,g.tag){case 0:case 11:case 14:case 15:cc(4,g,g.return);break;case 1:wl(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){i=g,r=g.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(I){zt(i,r,I)}}break;case 5:wl(g,g.return);break;case 22:if(g.memoizedState!==null){yw(d);continue}}_!==null?(_.return=g,Le=_):yw(d)}f=f.sibling}e:for(f=null,d=n;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,u=d.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Xb("display",a))}catch(I){zt(n,n.return,I)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(I){zt(n,n.return,I)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Qr(e,n),Si(n),i&4&&mw(n);break;case 21:break;default:Qr(e,n),Si(n)}}function Si(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(ET(r)){var i=r;break e}r=r.return}throw Error(we(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ec(s,""),i.flags&=-33);var o=pw(n);Bg(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=pw(n);$g(n,l,a);break;default:throw Error(we(161))}}catch(u){zt(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function LN(n,e,r){Le=n,ST(n)}function ST(n,e,r){for(var i=(n.mode&1)!==0;Le!==null;){var s=Le,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Qh;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Nn;l=Qh;var c=Nn;if(Qh=a,(Nn=u)&&!c)for(Le=s;Le!==null;)a=Le,u=a.child,a.tag===22&&a.memoizedState!==null?vw(s):u!==null?(u.return=a,Le=u):vw(s);for(;o!==null;)Le=o,ST(o),o=o.sibling;Le=s,Qh=l,Nn=c}gw(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Le=o):gw(n)}}function gw(n){for(;Le!==null;){var e=Le;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nn||np(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Nn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Zr(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ew(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ew(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&kc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}Nn||e.flags&512&&zg(e)}catch(g){zt(e,e.return,g)}}if(e===n){Le=null;break}if(r=e.sibling,r!==null){r.return=e.return,Le=r;break}Le=e.return}}function yw(n){for(;Le!==null;){var e=Le;if(e===n){Le=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Le=r;break}Le=e.return}}function vw(n){for(;Le!==null;){var e=Le;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{np(4,e)}catch(u){zt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){zt(e,s,u)}}var o=e.return;try{zg(e)}catch(u){zt(e,o,u)}break;case 5:var a=e.return;try{zg(e)}catch(u){zt(e,a,u)}}}catch(u){zt(e,e.return,u)}if(e===n){Le=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Le=l;break}Le=e.return}}var VN=Math.ceil,od=Ps.ReactCurrentDispatcher,Nv=Ps.ReactCurrentOwner,Rr=Ps.ReactCurrentBatchConfig,ut=0,dn=null,Yt=null,yn=0,ur=0,xl=Ro(0),nn=0,Vc=null,Ia=0,rp=0,Pv=0,hc=null,Wn=null,Rv=0,ql=1/0,us=null,ad=!1,qg=null,po=null,Yh=!1,so=null,ld=0,fc=0,Hg=null,bf=-1,Ef=0;function Fn(){return ut&6?Kt():bf!==-1?bf:bf=Kt()}function mo(n){return n.mode&1?ut&2&&yn!==0?yn&-yn:xN.transition!==null?(Ef===0&&(Ef=cE()),Ef):(n=pt,n!==0||(n=window.event,n=n===void 0?16:yE(n.type)),n):1}function ai(n,e,r,i){if(50<fc)throw fc=0,Hg=null,Error(we(185));ih(n,r,i),(!(ut&2)||n!==dn)&&(n===dn&&(!(ut&2)&&(rp|=r),nn===4&&eo(n,yn)),Zn(n,i),r===1&&ut===0&&!(e.mode&1)&&(ql=Kt()+500,Zd&&Oo()))}function Zn(n,e){var r=n.callbackNode;xA(n,e);var i=Hf(n,n===dn?yn:0);if(i===0)r!==null&&k_(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&k_(r),e===1)n.tag===0?wN(_w.bind(null,n)):ME(_w.bind(null,n)),gN(function(){!(ut&6)&&Oo()}),r=null;else{switch(hE(i)){case 1:r=iv;break;case 4:r=lE;break;case 16:r=qf;break;case 536870912:r=uE;break;default:r=qf}r=jT(r,kT.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function kT(n,e){if(bf=-1,Ef=0,ut&6)throw Error(we(327));var r=n.callbackNode;if(Cl()&&n.callbackNode!==r)return null;var i=Hf(n,n===dn?yn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=ud(n,i);else{e=i;var s=ut;ut|=2;var o=AT();(dn!==n||yn!==e)&&(us=null,ql=Kt()+500,ma(n,e));do try{zN();break}catch(l){CT(n,l)}while(!0);yv(),od.current=o,ut=s,Yt!==null?e=0:(dn=null,yn=0,e=nn)}if(e!==0){if(e===2&&(s=vg(n),s!==0&&(i=s,e=Kg(n,s))),e===1)throw r=Vc,ma(n,0),eo(n,i),Zn(n,Kt()),r;if(e===6)eo(n,i);else{if(s=n.current.alternate,!(i&30)&&!FN(s)&&(e=ud(n,i),e===2&&(o=vg(n),o!==0&&(i=o,e=Kg(n,o))),e===1))throw r=Vc,ma(n,0),eo(n,i),Zn(n,Kt()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(we(345));case 2:ia(n,Wn,us);break;case 3:if(eo(n,i),(i&130023424)===i&&(e=Rv+500-Kt(),10<e)){if(Hf(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Fn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Sg(ia.bind(null,n,Wn,us),e);break}ia(n,Wn,us);break;case 4:if(eo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-oi(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VN(i/1960))-i,10<i){n.timeoutHandle=Sg(ia.bind(null,n,Wn,us),i);break}ia(n,Wn,us);break;case 5:ia(n,Wn,us);break;default:throw Error(we(329))}}}return Zn(n,Kt()),n.callbackNode===r?kT.bind(null,n):null}function Kg(n,e){var r=hc;return n.current.memoizedState.isDehydrated&&(ma(n,e).flags|=256),n=ud(n,e),n!==2&&(e=Wn,Wn=r,e!==null&&Wg(e)),n}function Wg(n){Wn===null?Wn=n:Wn.push.apply(Wn,n)}function FN(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!ci(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function eo(n,e){for(e&=~Pv,e&=~rp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-oi(e),i=1<<r;n[r]=-1,e&=~i}}function _w(n){if(ut&6)throw Error(we(327));Cl();var e=Hf(n,0);if(!(e&1))return Zn(n,Kt()),null;var r=ud(n,e);if(n.tag!==0&&r===2){var i=vg(n);i!==0&&(e=i,r=Kg(n,i))}if(r===1)throw r=Vc,ma(n,0),eo(n,e),Zn(n,Kt()),r;if(r===6)throw Error(we(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ia(n,Wn,us),Zn(n,Kt()),null}function Ov(n,e){var r=ut;ut|=1;try{return n(e)}finally{ut=r,ut===0&&(ql=Kt()+500,Zd&&Oo())}}function Sa(n){so!==null&&so.tag===0&&!(ut&6)&&Cl();var e=ut;ut|=1;var r=Rr.transition,i=pt;try{if(Rr.transition=null,pt=1,n)return n()}finally{pt=i,Rr.transition=r,ut=e,!(ut&6)&&Oo()}}function jv(){ur=xl.current,kt(xl)}function ma(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,mN(r)),Yt!==null)for(r=Yt.return;r!==null;){var i=r;switch(pv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Yf();break;case 3:$l(),kt(Xn),kt(Rn),Ev();break;case 5:bv(i);break;case 4:$l();break;case 13:kt(Dt);break;case 19:kt(Dt);break;case 10:vv(i.type._context);break;case 22:case 23:jv()}r=r.return}if(dn=n,Yt=n=go(n.current,null),yn=ur=e,nn=0,Vc=null,Pv=rp=Ia=0,Wn=hc=null,ua!==null){for(e=0;e<ua.length;e++)if(r=ua[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}ua=null}return n}function CT(n,e){do{var r=Yt;try{if(yv(),_f.current=sd,id){for(var i=Mt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}id=!1}if(Ta=0,fn=en=Mt=null,uc=!1,Dc=0,Nv.current=null,r===null||r.return===null){nn=1,Vc=e,Yt=null;break}e:{var o=n,a=r.return,l=r,u=e;if(e=yn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=ow(a);if(_!==null){_.flags&=-257,aw(_,a,l,o,e),_.mode&1&&sw(o,c,e),e=_,u=c;var x=e.updateQueue;if(x===null){var I=new Set;I.add(u),e.updateQueue=I}else x.add(u);break e}else{if(!(e&1)){sw(o,c,e),Dv();break e}u=Error(we(426))}}else if(Nt&&l.mode&1){var P=ow(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),aw(P,a,l,o,e),mv(Bl(u,l));break e}}o=u=Bl(u,l),nn!==4&&(nn=2),hc===null?hc=[o]:hc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=hT(o,u,e);Z_(o,b);break e;case 1:l=u;var T=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(po===null||!po.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var O=fT(o,l,e);Z_(o,O);break e}}o=o.return}while(o!==null)}PT(r)}catch(M){e=M,Yt===r&&r!==null&&(Yt=r=r.return);continue}break}while(!0)}function AT(){var n=od.current;return od.current=sd,n===null?sd:n}function Dv(){(nn===0||nn===3||nn===2)&&(nn=4),dn===null||!(Ia&268435455)&&!(rp&268435455)||eo(dn,yn)}function ud(n,e){var r=ut;ut|=2;var i=AT();(dn!==n||yn!==e)&&(us=null,ma(n,e));do try{UN();break}catch(s){CT(n,s)}while(!0);if(yv(),ut=r,od.current=i,Yt!==null)throw Error(we(261));return dn=null,yn=0,nn}function UN(){for(;Yt!==null;)NT(Yt)}function zN(){for(;Yt!==null&&!fA();)NT(Yt)}function NT(n){var e=OT(n.alternate,n,ur);n.memoizedProps=n.pendingProps,e===null?PT(n):Yt=e,Nv.current=null}function PT(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=jN(r,e),r!==null){r.flags&=32767,Yt=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{nn=6,Yt=null;return}}else if(r=ON(r,e,ur),r!==null){Yt=r;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=n}while(e!==null);nn===0&&(nn=5)}function ia(n,e,r){var i=pt,s=Rr.transition;try{Rr.transition=null,pt=1,$N(n,e,r,i)}finally{Rr.transition=s,pt=i}return null}function $N(n,e,r,i){do Cl();while(so!==null);if(ut&6)throw Error(we(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(we(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(bA(n,o),n===dn&&(Yt=dn=null,yn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yh||(Yh=!0,jT(qf,function(){return Cl(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Rr.transition,Rr.transition=null;var a=pt;pt=1;var l=ut;ut|=4,Nv.current=null,MN(n,r),IT(r,n),lN(Tg),Kf=!!Eg,Tg=Eg=null,n.current=r,LN(r),dA(),ut=l,pt=a,Rr.transition=o}else n.current=r;if(Yh&&(Yh=!1,so=n,ld=s),o=n.pendingLanes,o===0&&(po=null),gA(r.stateNode),Zn(n,Kt()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(ad)throw ad=!1,n=qg,qg=null,n;return ld&1&&n.tag!==0&&Cl(),o=n.pendingLanes,o&1?n===Hg?fc++:(fc=0,Hg=n):fc=0,Oo(),null}function Cl(){if(so!==null){var n=hE(ld),e=Rr.transition,r=pt;try{if(Rr.transition=null,pt=16>n?16:n,so===null)var i=!1;else{if(n=so,so=null,ld=0,ut&6)throw Error(we(331));var s=ut;for(ut|=4,Le=n.current;Le!==null;){var o=Le,a=o.child;if(Le.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Le=c;Le!==null;){var f=Le;switch(f.tag){case 0:case 11:case 15:cc(8,f,o)}var d=f.child;if(d!==null)d.return=f,Le=d;else for(;Le!==null;){f=Le;var g=f.sibling,_=f.return;if(bT(f),f===c){Le=null;break}if(g!==null){g.return=_,Le=g;break}Le=_}}}var x=o.alternate;if(x!==null){var I=x.child;if(I!==null){x.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}Le=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Le=a;else e:for(;Le!==null;){if(o=Le,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cc(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Le=b;break e}Le=o.return}}var T=n.current;for(Le=T;Le!==null;){a=Le;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,Le=A;else e:for(a=T;Le!==null;){if(l=Le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:np(9,l)}}catch(M){zt(l,l.return,M)}if(l===a){Le=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,Le=O;break e}Le=l.return}}if(ut=s,Oo(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(Gd,n)}catch{}i=!0}return i}finally{pt=r,Rr.transition=e}}return!1}function ww(n,e,r){e=Bl(r,e),e=hT(n,e,1),n=fo(n,e,1),e=Fn(),n!==null&&(ih(n,1,e),Zn(n,e))}function zt(n,e,r){if(n.tag===3)ww(n,n,r);else for(;e!==null;){if(e.tag===3){ww(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(po===null||!po.has(i))){n=Bl(r,n),n=fT(e,n,1),e=fo(e,n,1),n=Fn(),e!==null&&(ih(e,1,n),Zn(e,n));break}}e=e.return}}function BN(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Fn(),n.pingedLanes|=n.suspendedLanes&r,dn===n&&(yn&r)===r&&(nn===4||nn===3&&(yn&130023424)===yn&&500>Kt()-Rv?ma(n,0):Pv|=r),Zn(n,e)}function RT(n,e){e===0&&(n.mode&1?(e=Uh,Uh<<=1,!(Uh&130023424)&&(Uh=4194304)):e=1);var r=Fn();n=Ts(n,e),n!==null&&(ih(n,e,r),Zn(n,r))}function qN(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),RT(n,r)}function HN(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(e),RT(n,r)}var OT;OT=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||Xn.current)Qn=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return Qn=!1,RN(n,e,r);Qn=!!(n.flags&131072)}else Qn=!1,Nt&&e.flags&1048576&&LE(e,Zf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;xf(n,e),n=e.pendingProps;var s=Fl(e,Rn.current);kl(e,r),s=Iv(null,e,i,n,s,r);var o=Sv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(i)?(o=!0,Xf(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wv(e),s.updater=tp,e.stateNode=s,s._reactInternals=e,Og(e,i,n,r),e=Mg(null,e,i,!0,o,r)):(e.tag=0,Nt&&o&&dv(e),Ln(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(xf(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=WN(i),n=Zr(i,n),s){case 0:e=Dg(null,e,i,n,r);break e;case 1:e=cw(null,e,i,n,r);break e;case 11:e=lw(null,e,i,n,r);break e;case 14:e=uw(null,e,i,Zr(i.type,n),r);break e}throw Error(we(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),Dg(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),cw(n,e,i,s,r);case 3:e:{if(gT(e),n===null)throw Error(we(387));i=e.pendingProps,o=e.memoizedState,s=o.element,BE(n,e),nd(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Bl(Error(we(423)),e),e=hw(n,e,i,r,s);break e}else if(i!==s){s=Bl(Error(we(424)),e),e=hw(n,e,i,r,s);break e}else for(cr=ho(e.stateNode.containerInfo.firstChild),fr=e,Nt=!0,ti=null,r=zE(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ul(),i===s){e=Is(n,e,r);break e}Ln(n,e,i,r)}e=e.child}return e;case 5:return qE(e),n===null&&Ng(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,Ig(i,s)?a=null:o!==null&&Ig(i,o)&&(e.flags|=32),mT(n,e),Ln(n,e,a,r),e.child;case 6:return n===null&&Ng(e),null;case 13:return yT(n,e,r);case 4:return xv(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=zl(e,null,i,r):Ln(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),lw(n,e,i,s,r);case 7:return Ln(n,e,e.pendingProps,r),e.child;case 8:return Ln(n,e,e.pendingProps.children,r),e.child;case 12:return Ln(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,bt(ed,i._currentValue),i._currentValue=a,o!==null)if(ci(o.value,a)){if(o.children===s.children&&!Xn.current){e=Is(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=_s(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Pg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(we(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Pg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ln(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,kl(e,r),s=Dr(s),i=i(s),e.flags|=1,Ln(n,e,i,r),e.child;case 14:return i=e.type,s=Zr(i,e.pendingProps),s=Zr(i.type,s),uw(n,e,i,s,r);case 15:return dT(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),xf(n,e),e.tag=1,Jn(i)?(n=!0,Xf(e)):n=!1,kl(e,r),cT(e,i,s),Og(e,i,s,r),Mg(null,e,i,!0,n,r);case 19:return vT(n,e,r);case 22:return pT(n,e,r)}throw Error(we(156,e.tag))};function jT(n,e){return aE(n,e)}function KN(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(n,e,r,i){return new KN(n,e,r,i)}function Mv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WN(n){if(typeof n=="function")return Mv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===tv)return 11;if(n===nv)return 14}return 2}function go(n,e){var r=n.alternate;return r===null?(r=Pr(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Tf(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")Mv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case hl:return ga(r.children,s,o,e);case ev:a=8,s|=8;break;case rg:return n=Pr(12,r,e,s|2),n.elementType=rg,n.lanes=o,n;case ig:return n=Pr(13,r,e,s),n.elementType=ig,n.lanes=o,n;case sg:return n=Pr(19,r,e,s),n.elementType=sg,n.lanes=o,n;case qb:return ip(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $b:a=10;break e;case Bb:a=9;break e;case tv:a=11;break e;case nv:a=14;break e;case Ys:a=16,i=null;break e}throw Error(we(130,n==null?n:typeof n,""))}return e=Pr(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function ga(n,e,r,i){return n=Pr(7,n,i,e),n.lanes=r,n}function ip(n,e,r,i){return n=Pr(22,n,i,e),n.elementType=qb,n.lanes=r,n.stateNode={isHidden:!1},n}function bm(n,e,r){return n=Pr(6,n,null,e),n.lanes=r,n}function Em(n,e,r){return e=Pr(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function GN(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rm(0),this.expirationTimes=rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lv(n,e,r,i,s,o,a,l,u){return n=new GN(n,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pr(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wv(o),n}function QN(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function DT(n){if(!n)return bo;n=n._reactInternals;e:{if(Da(n)!==n||n.tag!==1)throw Error(we(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(n.tag===1){var r=n.type;if(Jn(r))return DE(n,r,e)}return e}function MT(n,e,r,i,s,o,a,l,u){return n=Lv(r,i,!0,n,s,o,a,l,u),n.context=DT(null),r=n.current,i=Fn(),s=mo(r),o=_s(i,s),o.callback=e??null,fo(r,o,s),n.current.lanes=s,ih(n,s,i),Zn(n,i),n}function sp(n,e,r,i){var s=e.current,o=Fn(),a=mo(s);return r=DT(r),e.context===null?e.context=r:e.pendingContext=r,e=_s(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=fo(s,e,a),n!==null&&(ai(n,s,a,o),vf(n,s,a)),a}function cd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Vv(n,e){xw(n,e),(n=n.alternate)&&xw(n,e)}function YN(){return null}var LT=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fv(n){this._internalRoot=n}op.prototype.render=Fv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(we(409));sp(n,e,null,null)};op.prototype.unmount=Fv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Sa(function(){sp(null,n,null,null)}),e[Es]=null}};function op(n){this._internalRoot=n}op.prototype.unstable_scheduleHydration=function(n){if(n){var e=pE();n={blockedOn:null,target:n,priority:e};for(var r=0;r<Zs.length&&e!==0&&e<Zs[r].priority;r++);Zs.splice(r,0,n),r===0&&gE(n)}};function Uv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ap(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bw(){}function XN(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=cd(a);o.call(c)}}var a=MT(e,i,n,0,null,!1,!1,"",bw);return n._reactRootContainer=a,n[Es]=a.current,Nc(n.nodeType===8?n.parentNode:n),Sa(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=cd(u);l.call(c)}}var u=Lv(n,0,!1,null,null,!1,!1,"",bw);return n._reactRootContainer=u,n[Es]=u.current,Nc(n.nodeType===8?n.parentNode:n),Sa(function(){sp(e,u,r,i)}),u}function lp(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=cd(a);l.call(u)}}sp(e,a,n,s)}else a=XN(r,e,n,s,i);return cd(a)}fE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Gu(e.pendingLanes);r!==0&&(sv(e,r|1),Zn(e,Kt()),!(ut&6)&&(ql=Kt()+500,Oo()))}break;case 13:Sa(function(){var i=Ts(n,1);if(i!==null){var s=Fn();ai(i,n,1,s)}}),Vv(n,1)}};ov=function(n){if(n.tag===13){var e=Ts(n,134217728);if(e!==null){var r=Fn();ai(e,n,134217728,r)}Vv(n,134217728)}};dE=function(n){if(n.tag===13){var e=mo(n),r=Ts(n,e);if(r!==null){var i=Fn();ai(r,n,e,i)}Vv(n,e)}};pE=function(){return pt};mE=function(n,e){var r=pt;try{return pt=n,e()}finally{pt=r}};mg=function(n,e,r){switch(e){case"input":if(lg(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=Jd(i);if(!s)throw Error(we(90));Kb(i),lg(i,s)}}}break;case"textarea":Gb(n,r);break;case"select":e=r.value,e!=null&&El(n,!!r.multiple,e,!1)}};tE=Ov;nE=Sa;var JN={usingClientEntryPoint:!1,Events:[oh,ml,Jd,Zb,eE,Ov]},Mu={findFiberByHostInstance:la,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZN={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sE(n),n===null?null:n.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||YN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{Gd=Xh.inject(ZN),ji=Xh}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JN;gr.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uv(e))throw Error(we(200));return QN(n,e,null,r)};gr.createRoot=function(n,e){if(!Uv(n))throw Error(we(299));var r=!1,i="",s=LT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lv(n,1,!1,null,null,r,!1,i,s),n[Es]=e.current,Nc(n.nodeType===8?n.parentNode:n),new Fv(e)};gr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(we(188)):(n=Object.keys(n).join(","),Error(we(268,n)));return n=sE(e),n=n===null?null:n.stateNode,n};gr.flushSync=function(n){return Sa(n)};gr.hydrate=function(n,e,r){if(!ap(e))throw Error(we(200));return lp(null,n,e,!0,r)};gr.hydrateRoot=function(n,e,r){if(!Uv(n))throw Error(we(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=LT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=MT(e,null,n,1,r??null,s,!1,o,a),n[Es]=e.current,Nc(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new op(e)};gr.render=function(n,e,r){if(!ap(e))throw Error(we(200));return lp(null,n,e,!1,r)};gr.unmountComponentAtNode=function(n){if(!ap(n))throw Error(we(40));return n._reactRootContainer?(Sa(function(){lp(null,null,n,!1,function(){n._reactRootContainer=null,n[Es]=null})}),!0):!1};gr.unstable_batchedUpdates=Ov;gr.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!ap(r))throw Error(we(200));if(n==null||n._reactInternals===void 0)throw Error(we(38));return lp(n,e,r,!1,i)};gr.version="18.3.1-next-f1338f8080-20240426";function VT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VT)}catch(n){console.error(n)}}VT(),Vb.exports=gr;var eP=Vb.exports,Ew=eP;tg.createRoot=Ew.createRoot,tg.hydrateRoot=Ew.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fc(){return Fc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Fc.apply(this,arguments)}var oo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(oo||(oo={}));const Tw="popstate";function tP(n){n===void 0&&(n={});function e(i,s){let{pathname:o,search:a,hash:l}=i.location;return Gg("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:FT(s)}return rP(e,r,null,n)}function sn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nP(){return Math.random().toString(36).substr(2,8)}function Iw(n,e){return{usr:n.state,key:n.key,idx:e}}function Gg(n,e,r,i){return r===void 0&&(r=null),Fc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?su(e):e,{state:r,key:e&&e.key||i||nP()})}function FT(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function su(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function rP(n,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=oo.Pop,u=null,c=f();c==null&&(c=0,a.replaceState(Fc({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function d(){l=oo.Pop;let P=f(),b=P==null?null:P-c;c=P,u&&u({action:l,location:I.location,delta:b})}function g(P,b){l=oo.Push;let T=Gg(I.location,P,b);c=f()+1;let A=Iw(T,c),O=I.createHref(T);try{a.pushState(A,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(O)}o&&u&&u({action:l,location:I.location,delta:1})}function _(P,b){l=oo.Replace;let T=Gg(I.location,P,b);c=f();let A=Iw(T,c),O=I.createHref(T);a.replaceState(A,"",O),o&&u&&u({action:l,location:I.location,delta:0})}function x(P){let b=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof P=="string"?P:FT(P);return T=T.replace(/ $/,"%20"),sn(b,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,b)}let I={get action(){return l},get location(){return n(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Tw,d),u=P,()=>{s.removeEventListener(Tw,d),u=null}},createHref(P){return e(s,P)},createURL:x,encodeLocation(P){let b=x(P);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:_,go(P){return a.go(P)}};return I}var Sw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Sw||(Sw={}));function iP(n,e,r){return r===void 0&&(r="/"),sP(n,e,r)}function sP(n,e,r,i){let s=typeof e=="string"?su(e):e,o=$T(s.pathname||"/",r);if(o==null)return null;let a=UT(n);oP(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=vP(o);l=mP(a[u],c)}return l}function UT(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(sn(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=ya([i,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(sn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UT(o.children,e,f,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:dP(c,o.index),routesMeta:f})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of zT(o.path))s(o,a,u)}),e}function zT(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=zT(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function oP(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:pP(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const aP=/^:[\w-]+$/,lP=3,uP=2,cP=1,hP=10,fP=-2,kw=n=>n==="*";function dP(n,e){let r=n.split("/"),i=r.length;return r.some(kw)&&(i+=fP),e&&(i+=uP),r.filter(s=>!kw(s)).reduce((s,o)=>s+(aP.test(o)?lP:o===""?cP:hP),i)}function pP(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function mP(n,e,r){let{routesMeta:i}=n,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,f=o==="/"?e:e.slice(o.length)||"/",d=gP({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),g=u.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:ya([o,d.pathname]),pathnameBase:IP(ya([o,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(o=ya([o,d.pathnameBase]))}return a}function gP(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=yP(n.path,n.caseSensitive,n.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,f,d)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let I=l[d]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const x=l[d];return _&&!x?c[g]=void 0:c[g]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:n}}function yP(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),zv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function vP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function $T(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}const _P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wP=n=>_P.test(n);function xP(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof n=="string"?su(n):n,o;if(r)if(wP(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),zv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Cw(r.substring(1),"/"):o=Cw(r,e)}else o=e;return{pathname:o,search:SP(i),hash:kP(s)}}function Cw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Tm(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bP(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function EP(n,e){let r=bP(n);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function TP(n,e,r,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=su(n):(s=Fc({},n),sn(!s.pathname||!s.pathname.includes("?"),Tm("?","pathname","search",s)),sn(!s.pathname||!s.pathname.includes("#"),Tm("#","pathname","hash",s)),sn(!s.search||!s.search.includes("#"),Tm("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let d=e.length-1;if(!i&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),d-=1;s.pathname=g.join("/")}l=d>=0?e[d]:"/"}let u=xP(s,l),c=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const ya=n=>n.join("/").replace(/\/\/+/g,"/"),IP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function CP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const BT=["post","put","patch","delete"];new Set(BT);const AP=["get",...BT];new Set(AP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Uc.apply(this,arguments)}const $v=fe.createContext(null),NP=fe.createContext(null),up=fe.createContext(null),cp=fe.createContext(null),Ma=fe.createContext({outlet:null,matches:[],isDataRoute:!1}),qT=fe.createContext(null);function hp(){return fe.useContext(cp)!=null}function Bv(){return hp()||sn(!1),fe.useContext(cp).location}function HT(n){fe.useContext(up).static||fe.useLayoutEffect(n)}function jo(){let{isDataRoute:n}=fe.useContext(Ma);return n?BP():PP()}function PP(){hp()||sn(!1);let n=fe.useContext($v),{basename:e,future:r,navigator:i}=fe.useContext(up),{matches:s}=fe.useContext(Ma),{pathname:o}=Bv(),a=JSON.stringify(EP(s,r.v7_relativeSplatPath)),l=fe.useRef(!1);return HT(()=>{l.current=!0}),fe.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let d=TP(c,JSON.parse(a),o,f.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ya([e,d.pathname])),(f.replace?i.replace:i.push)(d,f.state,f)},[e,i,a,o,n])}function KT(){let{matches:n}=fe.useContext(Ma),e=n[n.length-1];return e?e.params:{}}function RP(n,e){return OP(n,e)}function OP(n,e,r,i){hp()||sn(!1);let{navigator:s}=fe.useContext(up),{matches:o}=fe.useContext(Ma),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Bv(),f;if(e){var d;let P=typeof e=="string"?su(e):e;u==="/"||(d=P.pathname)!=null&&d.startsWith(u)||sn(!1),f=P}else f=c;let g=f.pathname||"/",_=g;if(u!=="/"){let P=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(P.length).join("/")}let x=iP(n,{pathname:_}),I=VP(x&&x.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:ya([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:ya([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,r,i);return e&&I?fe.createElement(cp.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:oo.Pop}},I):I}function jP(){let n=$P(),e=CP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return fe.createElement(fe.Fragment,null,fe.createElement("h2",null,"Unexpected Application Error!"),fe.createElement("h3",{style:{fontStyle:"italic"}},e),r?fe.createElement("pre",{style:s},r):null,null)}const DP=fe.createElement(jP,null);class MP extends fe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?fe.createElement(Ma.Provider,{value:this.props.routeContext},fe.createElement(qT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LP(n){let{routeContext:e,match:r,children:i}=n,s=fe.useContext($v);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),fe.createElement(Ma.Provider,{value:e},i)}function VP(n,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let a=n,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||sn(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let f=0;f<a.length;f++){let d=a[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:g,errors:_}=r,x=d.route.loader&&g[d.route.id]===void 0&&(!_||_[d.route.id]===void 0);if(d.route.lazy||x){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,d,g)=>{let _,x=!1,I=null,P=null;r&&(_=l&&d.route.id?l[d.route.id]:void 0,I=d.route.errorElement||DP,u&&(c<0&&g===0?(qP("route-fallback"),x=!0,P=null):c===g&&(x=!0,P=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,g+1)),T=()=>{let A;return _?A=I:x?A=P:d.route.Component?A=fe.createElement(d.route.Component,null):d.route.element?A=d.route.element:A=f,fe.createElement(LP,{match:d,routeContext:{outlet:f,matches:b,isDataRoute:r!=null},children:A})};return r&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?fe.createElement(MP,{location:r.location,revalidation:r.revalidation,component:I,error:_,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}var WT=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(WT||{}),GT=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(GT||{});function FP(n){let e=fe.useContext($v);return e||sn(!1),e}function UP(n){let e=fe.useContext(NP);return e||sn(!1),e}function zP(n){let e=fe.useContext(Ma);return e||sn(!1),e}function QT(n){let e=zP(),r=e.matches[e.matches.length-1];return r.route.id||sn(!1),r.route.id}function $P(){var n;let e=fe.useContext(qT),r=UP(),i=QT();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function BP(){let{router:n}=FP(WT.UseNavigateStable),e=QT(GT.UseNavigateStable),r=fe.useRef(!1);return HT(()=>{r.current=!0}),fe.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Uc({fromRouteId:e},o)))},[n,e])}const Aw={};function qP(n,e,r){Aw[n]||(Aw[n]=!0)}function HP(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ki(n){sn(!1)}function KP(n){let{basename:e="/",children:r=null,location:i,navigationType:s=oo.Pop,navigator:o,static:a=!1,future:l}=n;hp()&&sn(!1);let u=e.replace(/^\/*/,"/"),c=fe.useMemo(()=>({basename:u,navigator:o,static:a,future:Uc({v7_relativeSplatPath:!1},l)}),[u,l,o,a]);typeof i=="string"&&(i=su(i));let{pathname:f="/",search:d="",hash:g="",state:_=null,key:x="default"}=i,I=fe.useMemo(()=>{let P=$T(f,u);return P==null?null:{location:{pathname:P,search:d,hash:g,state:_,key:x},navigationType:s}},[u,f,d,g,_,x,s]);return I==null?null:fe.createElement(up.Provider,{value:c},fe.createElement(cp.Provider,{children:r,value:I}))}function Nw(n){let{children:e,location:r}=n;return RP(Qg(e),r)}new Promise(()=>{});function Qg(n,e){e===void 0&&(e=[]);let r=[];return fe.Children.forEach(n,(i,s)=>{if(!fe.isValidElement(i))return;let o=[...e,s];if(i.type===fe.Fragment){r.push.apply(r,Qg(i.props.children,o));return}i.type!==ki&&sn(!1),!i.props.index||!i.props.children||sn(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Qg(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const WP="6";try{window.__reactRouterVersion=WP}catch{}const GP="startTransition",Pw=BC[GP];function QP(n){let{basename:e,children:r,future:i,window:s}=n,o=fe.useRef();o.current==null&&(o.current=tP({window:s,v5Compat:!0}));let a=o.current,[l,u]=fe.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},f=fe.useCallback(d=>{c&&Pw?Pw(()=>u(d)):u(d)},[u,c]);return fe.useLayoutEffect(()=>a.listen(f),[a,f]),fe.useEffect(()=>HP(i),[i]),fe.createElement(KP,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:i})}var Rw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Rw||(Rw={}));var Ow;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));var YP={exports:{}};(function(n){var e=function(r){var i=Object.prototype,s=i.hasOwnProperty,o=Object.defineProperty||function(q,K,ne){q[K]=ne.value},a,l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function d(q,K,ne){return Object.defineProperty(q,K,{value:ne,enumerable:!0,configurable:!0,writable:!0}),q[K]}try{d({},"")}catch{d=function(K,ne,de){return K[ne]=de}}function g(q,K,ne,de){var he=K&&K.prototype instanceof A?K:A,me=Object.create(he.prototype),Me=new ie(de||[]);return o(me,"_invoke",{value:U(q,ne,Me)}),me}r.wrap=g;function _(q,K,ne){try{return{type:"normal",arg:q.call(K,ne)}}catch(de){return{type:"throw",arg:de}}}var x="suspendedStart",I="suspendedYield",P="executing",b="completed",T={};function A(){}function O(){}function M(){}var z={};d(z,u,function(){return this});var N=Object.getPrototypeOf,C=N&&N(N(_e([])));C&&C!==i&&s.call(C,u)&&(z=C);var D=M.prototype=A.prototype=Object.create(z);O.prototype=M,o(D,"constructor",{value:M,configurable:!0}),o(M,"constructor",{value:O,configurable:!0}),O.displayName=d(M,f,"GeneratorFunction");function L(q){["next","throw","return"].forEach(function(K){d(q,K,function(ne){return this._invoke(K,ne)})})}r.isGeneratorFunction=function(q){var K=typeof q=="function"&&q.constructor;return K?K===O||(K.displayName||K.name)==="GeneratorFunction":!1},r.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,M):(q.__proto__=M,d(q,f,"GeneratorFunction")),q.prototype=Object.create(D),q},r.awrap=function(q){return{__await:q}};function V(q,K){function ne(me,Me,Re,Ue){var Qe=_(q[me],q,Me);if(Qe.type==="throw")Ue(Qe.arg);else{var Pe=Qe.arg,an=Pe.value;return an&&typeof an=="object"&&s.call(an,"__await")?K.resolve(an.__await).then(function(ln){ne("next",ln,Re,Ue)},function(ln){ne("throw",ln,Re,Ue)}):K.resolve(an).then(function(ln){Pe.value=ln,Re(Pe)},function(ln){return ne("throw",ln,Re,Ue)})}}var de;function he(me,Me){function Re(){return new K(function(Ue,Qe){ne(me,Me,Ue,Qe)})}return de=de?de.then(Re,Re):Re()}o(this,"_invoke",{value:he})}L(V.prototype),d(V.prototype,c,function(){return this}),r.AsyncIterator=V,r.async=function(q,K,ne,de,he){he===void 0&&(he=Promise);var me=new V(g(q,K,ne,de),he);return r.isGeneratorFunction(K)?me:me.next().then(function(Me){return Me.done?Me.value:me.next()})};function U(q,K,ne){var de=x;return function(me,Me){if(de===P)throw new Error("Generator is already running");if(de===b){if(me==="throw")throw Me;return ce()}for(ne.method=me,ne.arg=Me;;){var Re=ne.delegate;if(Re){var Ue=R(Re,ne);if(Ue){if(Ue===T)continue;return Ue}}if(ne.method==="next")ne.sent=ne._sent=ne.arg;else if(ne.method==="throw"){if(de===x)throw de=b,ne.arg;ne.dispatchException(ne.arg)}else ne.method==="return"&&ne.abrupt("return",ne.arg);de=P;var Qe=_(q,K,ne);if(Qe.type==="normal"){if(de=ne.done?b:I,Qe.arg===T)continue;return{value:Qe.arg,done:ne.done}}else Qe.type==="throw"&&(de=b,ne.method="throw",ne.arg=Qe.arg)}}}function R(q,K){var ne=K.method,de=q.iterator[ne];if(de===a)return K.delegate=null,ne==="throw"&&q.iterator.return&&(K.method="return",K.arg=a,R(q,K),K.method==="throw")||ne!=="return"&&(K.method="throw",K.arg=new TypeError("The iterator does not provide a '"+ne+"' method")),T;var he=_(de,q.iterator,K.arg);if(he.type==="throw")return K.method="throw",K.arg=he.arg,K.delegate=null,T;var me=he.arg;if(!me)return K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,T;if(me.done)K[q.resultName]=me.value,K.next=q.nextLoc,K.method!=="return"&&(K.method="next",K.arg=a);else return me;return K.delegate=null,T}L(D),d(D,f,"Generator"),d(D,u,function(){return this}),d(D,"toString",function(){return"[object Generator]"});function B(q){var K={tryLoc:q[0]};1 in q&&(K.catchLoc=q[1]),2 in q&&(K.finallyLoc=q[2],K.afterLoc=q[3]),this.tryEntries.push(K)}function ae(q){var K=q.completion||{};K.type="normal",delete K.arg,q.completion=K}function ie(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(B,this),this.reset(!0)}r.keys=function(q){var K=Object(q),ne=[];for(var de in K)ne.push(de);return ne.reverse(),function he(){for(;ne.length;){var me=ne.pop();if(me in K)return he.value=me,he.done=!1,he}return he.done=!0,he}};function _e(q){if(q){var K=q[u];if(K)return K.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var ne=-1,de=function he(){for(;++ne<q.length;)if(s.call(q,ne))return he.value=q[ne],he.done=!1,he;return he.value=a,he.done=!0,he};return de.next=de}}return{next:ce}}r.values=_e;function ce(){return{value:a,done:!0}}return ie.prototype={constructor:ie,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(ae),!q)for(var K in this)K.charAt(0)==="t"&&s.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=a)},stop:function(){this.done=!0;var q=this.tryEntries[0],K=q.completion;if(K.type==="throw")throw K.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var K=this;function ne(Ue,Qe){return me.type="throw",me.arg=q,K.next=Ue,Qe&&(K.method="next",K.arg=a),!!Qe}for(var de=this.tryEntries.length-1;de>=0;--de){var he=this.tryEntries[de],me=he.completion;if(he.tryLoc==="root")return ne("end");if(he.tryLoc<=this.prev){var Me=s.call(he,"catchLoc"),Re=s.call(he,"finallyLoc");if(Me&&Re){if(this.prev<he.catchLoc)return ne(he.catchLoc,!0);if(this.prev<he.finallyLoc)return ne(he.finallyLoc)}else if(Me){if(this.prev<he.catchLoc)return ne(he.catchLoc,!0)}else if(Re){if(this.prev<he.finallyLoc)return ne(he.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(q,K){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var de=this.tryEntries[ne];if(de.tryLoc<=this.prev&&s.call(de,"finallyLoc")&&this.prev<de.finallyLoc){var he=de;break}}he&&(q==="break"||q==="continue")&&he.tryLoc<=K&&K<=he.finallyLoc&&(he=null);var me=he?he.completion:{};return me.type=q,me.arg=K,he?(this.method="next",this.next=he.finallyLoc,T):this.complete(me)},complete:function(q,K){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&K&&(this.next=K),T},finish:function(q){for(var K=this.tryEntries.length-1;K>=0;--K){var ne=this.tryEntries[K];if(ne.finallyLoc===q)return this.complete(ne.completion,ne.afterLoc),ae(ne),T}},catch:function(q){for(var K=this.tryEntries.length-1;K>=0;--K){var ne=this.tryEntries[K];if(ne.tryLoc===q){var de=ne.completion;if(de.type==="throw"){var he=de.arg;ae(ne)}return he}}throw new Error("illegal catch attempt")},delegateYield:function(q,K,ne){return this.delegate={iterator:_e(q),resultName:K,nextLoc:ne},this.method==="next"&&(this.arg=a),T}},r}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(YP);var qv=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const XP=qv;let jw=0;var YT=({id:n,action:e,payload:r={}})=>{let i=n;return typeof i>"u"&&(i=XP("Job",jw),jw+=1),{id:i,action:e,payload:r}},ou={};let Hv=!1;ou.logging=Hv;ou.setLogging=n=>{Hv=n};ou.log=(...n)=>Hv?console.log.apply(void 0,n):null;const JP=YT,{log:Jh}=ou,ZP=qv;let Dw=0;var eR=()=>{const n=ZP("Scheduler",Dw),e={},r={};let i=[];Dw+=1;const s=()=>i.length,o=()=>Object.keys(e).length,a=()=>{if(i.length!==0){const d=Object.keys(e);for(let g=0;g<d.length;g+=1)if(typeof r[d[g]]>"u"){i[0](e[d[g]]);break}}},l=(d,g)=>new Promise((_,x)=>{const I=JP({action:d,payload:g});i.push(async P=>{i.shift(),r[P.id]=I;try{_(await P[d].apply(void 0,[...g,I.id]))}catch(b){x(b)}finally{delete r[P.id],a()}}),Jh(`[${n}]: Add ${I.id} to JobQueue`),Jh(`[${n}]: JobQueue length=${i.length}`),a()});return{addWorker:d=>(e[d.id]=d,Jh(`[${n}]: Add ${d.id}`),Jh(`[${n}]: Number of workers=${o()}`),a(),d.id),addJob:async(d,...g)=>{if(o()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return l(d,g)},terminate:async()=>{Object.keys(e).forEach(async d=>{await e[d].terminate()}),i=[]},getQueueLen:s,getNumWorkers:o}};function tR(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function nR(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var rR=nR;const iR=rR;var sR=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":iR()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof tR=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const oR=sR("type")==="browser",aR=oR?n=>new URL(n,window.location.href).href:n=>n;var lR=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(r=>{n[r]&&(e[r]=aR(e[r]))}),e},uR=n=>{const e=[],r=[],i=[],s=[],o=[];return n.blocks&&n.blocks.forEach(a=>{a.paragraphs.forEach(l=>{l.lines.forEach(u=>{u.words.forEach(c=>{c.symbols.forEach(f=>{o.push({...f,page:n,block:a,paragraph:l,line:u,word:c})}),s.push({...c,page:n,block:a,paragraph:l,line:u})}),i.push({...u,page:n,block:a,paragraph:l})}),r.push({...l,page:n,block:a})}),e.push({...a,page:n})}),{...n,blocks:e,paragraphs:r,lines:i,words:s,symbols:o}},XT={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const cR="5.1.1",hR={version:cR};var fR={workerBlobURL:!0,logger:()=>{}};const dR=hR.version,pR=fR;var mR={...pR,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${dR}/dist/worker.min.js`},gR=({workerPath:n,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(i))}else r=new Worker(n);return r},yR=n=>{n.terminate()},vR=(n,e)=>{n.onmessage=({data:r})=>{e(r)}},_R=async(n,e)=>{n.postMessage(e)};const Im=n=>new Promise((e,r)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},i.readAsArrayBuffer(n)}),Yg=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await Yg(n.src)),n.tagName==="VIDEO"&&(e=await Yg(n.poster)),n.tagName==="CANVAS"&&await new Promise(r=>{n.toBlob(async i=>{e=await Im(i),r()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const r=await n.convertToBlob();e=await Im(r)}else(n instanceof File||n instanceof Blob)&&(e=await Im(n));return new Uint8Array(e)};var wR=Yg;const xR=mR,bR=gR,ER=yR,TR=vR,IR=_R,SR=wR;var kR={defaultOptions:xR,spawnWorker:bR,terminateWorker:ER,onMessage:TR,send:IR,loadImage:SR};const CR=lR,AR=uR,Yr=YT,{log:Mw}=ou,NR=qv,ta=XT,{defaultOptions:PR,spawnWorker:RR,terminateWorker:OR,onMessage:jR,loadImage:Lw,send:DR}=kR;let Vw=0;var JT=async(n="eng",e=ta.LSTM_ONLY,r={},i={})=>{const s=NR("Worker",Vw),{logger:o,errorHandler:a,...l}=CR({...PR,...r}),u={},c={},f=typeof n=="string"?n.split("+"):n;let d=e,g=i;const _=[ta.DEFAULT,ta.LSTM_ONLY].includes(e)&&!l.legacyCore;let x,I;const P=new Promise((he,me)=>{I=he,x=me}),b=he=>{x(he.message)};let T=RR(l);T.onerror=b,Vw+=1;const A=(he,me)=>{u[he]=me},O=(he,me)=>{c[he]=me},M=({id:he,action:me,payload:Me})=>new Promise((Re,Ue)=>{Mw(`[${s}]: Start ${he}, action=${me}`);const Qe=`${me}-${he}`;A(Qe,Re),O(Qe,Ue),DR(T,{workerId:s,jobId:he,action:me,payload:Me})}),z=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),N=he=>M(Yr({id:he,action:"load",payload:{options:{lstmOnly:_,corePath:l.corePath,logging:l.logging}}})),C=(he,me,Me)=>M(Yr({id:Me,action:"FS",payload:{method:"writeFile",args:[he,me]}})),D=(he,me)=>M(Yr({id:me,action:"FS",payload:{method:"readFile",args:[he,{encoding:"utf8"}]}})),L=(he,me)=>M(Yr({id:me,action:"FS",payload:{method:"unlink",args:[he]}})),V=(he,me,Me)=>M(Yr({id:Me,action:"FS",payload:{method:he,args:me}})),U=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),R=(he,me)=>M(Yr({id:me,action:"loadLanguage",payload:{langs:he,options:{langPath:l.langPath,dataPath:l.dataPath,cachePath:l.cachePath,cacheMethod:l.cacheMethod,gzip:l.gzip,lstmOnly:[ta.DEFAULT,ta.LSTM_ONLY].includes(d)&&!l.legacyLang}}})),B=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),ae=(he,me,Me,Re)=>M(Yr({id:Re,action:"initialize",payload:{langs:he,oem:me,config:Me}})),ie=(he="eng",me,Me,Re)=>{if(_&&[ta.TESSERACT_ONLY,ta.TESSERACT_LSTM_COMBINED].includes(me))throw Error("Legacy model requested but code missing.");const Ue=me||d;d=Ue;const Qe=Me||g;g=Qe;const an=(typeof he=="string"?he.split("+"):he).filter(ln=>!f.includes(ln));return f.push(...an),an.length>0?R(an,Re).then(()=>ae(he,Ue,Qe,Re)):ae(he,Ue,Qe,Re)},_e=(he={},me)=>M(Yr({id:me,action:"setParameters",payload:{params:he}})),ce=async(he,me={},Me={blocks:!0,text:!0,hocr:!0,tsv:!0},Re)=>M(Yr({id:Re,action:"recognize",payload:{image:await Lw(he),options:me,output:Me}})),q=(he="Tesseract OCR Result",me=!1,Me)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),M(Yr({id:Me,action:"getPDF",payload:{title:he,textonly:me}}))),K=async(he,me)=>{if(_)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return M(Yr({id:me,action:"detect",payload:{image:await Lw(he)}}))},ne=async()=>(T!==null&&(OR(T),T=null),Promise.resolve());jR(T,({workerId:he,jobId:me,status:Me,action:Re,data:Ue})=>{const Qe=`${Re}-${me}`;if(Me==="resolve"){Mw(`[${he}]: Complete ${me}`);let Pe=Ue;Re==="recognize"?Pe=AR(Ue):Re==="getPDF"&&(Pe=Array.from({...Ue,length:Object.keys(Ue).length})),u[Qe]({jobId:me,data:Pe})}else if(Me==="reject")if(c[Qe](Ue),Re==="load"&&x(Ue),a)a(Ue);else throw Error(Ue);else Me==="progress"&&o({...Ue,userJobId:me})});const de={id:s,worker:T,setResolve:A,setReject:O,load:z,writeText:C,readText:D,removeFile:L,FS:V,loadLanguage:U,initialize:B,reinitialize:ie,setParameters:_e,recognize:ce,getPDF:q,detect:K,terminate:ne};return N().then(()=>R(n)).then(()=>ae(n,e,i)).then(()=>I(de)).catch(()=>{}),P};const ZT=JT,MR=async(n,e,r)=>{const i=await ZT(e,1,r);return i.recognize(n).finally(async()=>{await i.terminate()})},LR=async(n,e)=>{const r=await ZT("osd",0,e);return r.detect(n).finally(async()=>{await r.terminate()})};var VR={recognize:MR,detect:LR},FR={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},UR={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const zR=eR,$R=JT,BR=VR,qR=FR,HR=XT,KR=UR,{setLogging:WR}=ou;var GR={languages:qR,OEM:HR,PSM:KR,createScheduler:zR,createWorker:$R,setLogging:WR,...BR};const QR=Kd(GR);var YR=Object.defineProperty,hd=Object.getOwnPropertySymbols,e2=Object.prototype.hasOwnProperty,t2=Object.prototype.propertyIsEnumerable,Fw=(n,e,r)=>e in n?YR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Xg=(n,e)=>{for(var r in e||(e={}))e2.call(e,r)&&Fw(n,r,e[r]);if(hd)for(var r of hd(e))t2.call(e,r)&&Fw(n,r,e[r]);return n},Jg=(n,e)=>{var r={};for(var i in n)e2.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&hd)for(var i of hd(n))e.indexOf(i)<0&&t2.call(n,i)&&(r[i]=n[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ka;(n=>{const e=class et{constructor(u,c,f,d){if(this.version=u,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],u<et.MIN_VERSION||u>et.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let g=[];for(let x=0;x<this.size;x++)g.push(!1);for(let x=0;x<this.size;x++)this.modules.push(g.slice()),this.isFunction.push(g.slice());this.drawFunctionPatterns();const _=this.addEccAndInterleave(f);if(this.drawCodewords(_),d==-1){let x=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const P=this.getPenaltyScore();P<x&&(d=I,x=P),this.applyMask(I)}}s(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(u,c){const f=n.QrSegment.makeSegments(u);return et.encodeSegments(f,c)}static encodeBinary(u,c){const f=n.QrSegment.makeBytes(u);return et.encodeSegments([f],c)}static encodeSegments(u,c,f=1,d=40,g=-1,_=!0){if(!(et.MIN_VERSION<=f&&f<=d&&d<=et.MAX_VERSION)||g<-1||g>7)throw new RangeError("Invalid value");let x,I;for(x=f;;x++){const A=et.getNumDataCodewords(x,c)*8,O=a.getTotalBits(u,x);if(O<=A){I=O;break}if(x>=d)throw new RangeError("Data too long")}for(const A of[et.Ecc.MEDIUM,et.Ecc.QUARTILE,et.Ecc.HIGH])_&&I<=et.getNumDataCodewords(x,A)*8&&(c=A);let P=[];for(const A of u){r(A.mode.modeBits,4,P),r(A.numChars,A.mode.numCharCountBits(x),P);for(const O of A.getData())P.push(O)}s(P.length==I);const b=et.getNumDataCodewords(x,c)*8;s(P.length<=b),r(0,Math.min(4,b-P.length),P),r(0,(8-P.length%8)%8,P),s(P.length%8==0);for(let A=236;P.length<b;A^=253)r(A,8,P);let T=[];for(;T.length*8<P.length;)T.push(0);return P.forEach((A,O)=>T[O>>>3]|=A<<7-(O&7)),new et(x,c,T,g)}getModule(u,c){return 0<=u&&u<this.size&&0<=c&&c<this.size&&this.modules[c][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),c=u.length;for(let f=0;f<c;f++)for(let d=0;d<c;d++)f==0&&d==0||f==0&&d==c-1||f==c-1&&d==0||this.drawAlignmentPattern(u[f],u[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const c=this.errorCorrectionLevel.formatBits<<3|u;let f=c;for(let g=0;g<10;g++)f=f<<1^(f>>>9)*1335;const d=(c<<10|f)^21522;s(d>>>15==0);for(let g=0;g<=5;g++)this.setFunctionModule(8,g,i(d,g));this.setFunctionModule(8,7,i(d,6)),this.setFunctionModule(8,8,i(d,7)),this.setFunctionModule(7,8,i(d,8));for(let g=9;g<15;g++)this.setFunctionModule(14-g,8,i(d,g));for(let g=0;g<8;g++)this.setFunctionModule(this.size-1-g,8,i(d,g));for(let g=8;g<15;g++)this.setFunctionModule(8,this.size-15+g,i(d,g));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let f=0;f<12;f++)u=u<<1^(u>>>11)*7973;const c=this.version<<12|u;s(c>>>18==0);for(let f=0;f<18;f++){const d=i(c,f),g=this.size-11+f%3,_=Math.floor(f/3);this.setFunctionModule(g,_,d),this.setFunctionModule(_,g,d)}}drawFinderPattern(u,c){for(let f=-4;f<=4;f++)for(let d=-4;d<=4;d++){const g=Math.max(Math.abs(d),Math.abs(f)),_=u+d,x=c+f;0<=_&&_<this.size&&0<=x&&x<this.size&&this.setFunctionModule(_,x,g!=2&&g!=4)}}drawAlignmentPattern(u,c){for(let f=-2;f<=2;f++)for(let d=-2;d<=2;d++)this.setFunctionModule(u+d,c+f,Math.max(Math.abs(d),Math.abs(f))!=1)}setFunctionModule(u,c,f){this.modules[c][u]=f,this.isFunction[c][u]=!0}addEccAndInterleave(u){const c=this.version,f=this.errorCorrectionLevel;if(u.length!=et.getNumDataCodewords(c,f))throw new RangeError("Invalid argument");const d=et.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][c],g=et.ECC_CODEWORDS_PER_BLOCK[f.ordinal][c],_=Math.floor(et.getNumRawDataModules(c)/8),x=d-_%d,I=Math.floor(_/d);let P=[];const b=et.reedSolomonComputeDivisor(g);for(let A=0,O=0;A<d;A++){let M=u.slice(O,O+I-g+(A<x?0:1));O+=M.length;const z=et.reedSolomonComputeRemainder(M,b);A<x&&M.push(0),P.push(M.concat(z))}let T=[];for(let A=0;A<P[0].length;A++)P.forEach((O,M)=>{(A!=I-g||M>=x)&&T.push(O[A])});return s(T.length==_),T}drawCodewords(u){if(u.length!=Math.floor(et.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let d=0;d<this.size;d++)for(let g=0;g<2;g++){const _=f-g,I=(f+1&2)==0?this.size-1-d:d;!this.isFunction[I][_]&&c<u.length*8&&(this.modules[I][_]=i(u[c>>>3],7-(c&7)),c++)}}s(c==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let f=0;f<this.size;f++){let d;switch(u){case 0:d=(f+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=f%3==0;break;case 3:d=(f+c)%3==0;break;case 4:d=(Math.floor(f/3)+Math.floor(c/2))%2==0;break;case 5:d=f*c%2+f*c%3==0;break;case 6:d=(f*c%2+f*c%3)%2==0;break;case 7:d=((f+c)%2+f*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][f]&&d&&(this.modules[c][f]=!this.modules[c][f])}}getPenaltyScore(){let u=0;for(let g=0;g<this.size;g++){let _=!1,x=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[g][P]==_?(x++,x==5?u+=et.PENALTY_N1:x>5&&u++):(this.finderPenaltyAddHistory(x,I),_||(u+=this.finderPenaltyCountPatterns(I)*et.PENALTY_N3),_=this.modules[g][P],x=1);u+=this.finderPenaltyTerminateAndCount(_,x,I)*et.PENALTY_N3}for(let g=0;g<this.size;g++){let _=!1,x=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][g]==_?(x++,x==5?u+=et.PENALTY_N1:x>5&&u++):(this.finderPenaltyAddHistory(x,I),_||(u+=this.finderPenaltyCountPatterns(I)*et.PENALTY_N3),_=this.modules[P][g],x=1);u+=this.finderPenaltyTerminateAndCount(_,x,I)*et.PENALTY_N3}for(let g=0;g<this.size-1;g++)for(let _=0;_<this.size-1;_++){const x=this.modules[g][_];x==this.modules[g][_+1]&&x==this.modules[g+1][_]&&x==this.modules[g+1][_+1]&&(u+=et.PENALTY_N2)}let c=0;for(const g of this.modules)c=g.reduce((_,x)=>_+(x?1:0),c);const f=this.size*this.size,d=Math.ceil(Math.abs(c*20-f*10)/f)-1;return s(0<=d&&d<=9),u+=d*et.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let f=[6];for(let d=this.size-7;f.length<u;d-=c)f.splice(1,0,d);return f}}static getNumRawDataModules(u){if(u<et.MIN_VERSION||u>et.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*u+128)*u+64;if(u>=2){const f=Math.floor(u/7)+2;c-=(25*f-10)*f-55,u>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(u,c){return Math.floor(et.getNumRawDataModules(u)/8)-et.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u]*et.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<u-1;d++)c.push(0);c.push(1);let f=1;for(let d=0;d<u;d++){for(let g=0;g<c.length;g++)c[g]=et.reedSolomonMultiply(c[g],f),g+1<c.length&&(c[g]^=c[g+1]);f=et.reedSolomonMultiply(f,2)}return c}static reedSolomonComputeRemainder(u,c){let f=c.map(d=>0);for(const d of u){const g=d^f.shift();f.push(0),c.forEach((_,x)=>f[x]^=et.reedSolomonMultiply(_,g))}return f}static reedSolomonMultiply(u,c){if(u>>>8||c>>>8)throw new RangeError("Byte out of range");let f=0;for(let d=7;d>=0;d--)f=f<<1^(f>>>7)*285,f^=(c>>>d&1)*u;return s(f>>>8==0),f}finderPenaltyCountPatterns(u){const c=u[1];s(c<=this.size*3);const f=c>0&&u[2]==c&&u[3]==c*3&&u[4]==c&&u[5]==c;return(f&&u[0]>=c*4&&u[6]>=c?1:0)+(f&&u[6]>=c*4&&u[0]>=c?1:0)}finderPenaltyTerminateAndCount(u,c,f){return u&&(this.finderPenaltyAddHistory(c,f),c=0),c+=this.size,this.finderPenaltyAddHistory(c,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(u,c){c[0]==0&&(u+=this.size),c.pop(),c.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function r(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let f=u-1;f>=0;f--)c.push(l>>>f&1)}function i(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class Ut{constructor(u,c,f){if(this.mode=u,this.numChars=c,this.bitData=f,c<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(u){let c=[];for(const f of u)r(f,8,c);return new Ut(Ut.Mode.BYTE,u.length,c)}static makeNumeric(u){if(!Ut.isNumeric(u))throw new RangeError("String contains non-numeric characters");let c=[];for(let f=0;f<u.length;){const d=Math.min(u.length-f,3);r(parseInt(u.substring(f,f+d),10),d*3+1,c),f+=d}return new Ut(Ut.Mode.NUMERIC,u.length,c)}static makeAlphanumeric(u){if(!Ut.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],f;for(f=0;f+2<=u.length;f+=2){let d=Ut.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f))*45;d+=Ut.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f+1)),r(d,11,c)}return f<u.length&&r(Ut.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f)),6,c),new Ut(Ut.Mode.ALPHANUMERIC,u.length,c)}static makeSegments(u){return u==""?[]:Ut.isNumeric(u)?[Ut.makeNumeric(u)]:Ut.isAlphanumeric(u)?[Ut.makeAlphanumeric(u)]:[Ut.makeBytes(Ut.toUtf8ByteArray(u))]}static makeEci(u){let c=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,c);else if(u<16384)r(2,2,c),r(u,14,c);else if(u<1e6)r(6,3,c),r(u,21,c);else throw new RangeError("ECI assignment value out of range");return new Ut(Ut.Mode.ECI,0,c)}static isNumeric(u){return Ut.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Ut.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,c){let f=0;for(const d of u){const g=d.mode.numCharCountBits(c);if(d.numChars>=1<<g)return 1/0;f+=4+g+d.bitData.length}return f}static toUtf8ByteArray(u){u=encodeURI(u);let c=[];for(let f=0;f<u.length;f++)u.charAt(f)!="%"?c.push(u.charCodeAt(f)):(c.push(parseInt(u.substring(f+1,f+3),16)),f+=2);return c}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;n.QrSegment=o})(ka||(ka={}));(n=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(ka||(ka={}));(n=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(ka||(ka={}));var bl=ka;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var XR={L:bl.QrCode.Ecc.LOW,M:bl.QrCode.Ecc.MEDIUM,Q:bl.QrCode.Ecc.QUARTILE,H:bl.QrCode.Ecc.HIGH},n2=128,r2="L",i2="#FFFFFF",s2="#000000",o2=!1,a2=1,JR=4,ZR=0,eO=.1;function l2(n,e=0){const r=[];return n.forEach(function(i,s){let o=null;i.forEach(function(a,l){if(!a&&o!==null){r.push(`M${o+e} ${s+e}h${l-o}v1H${o+e}z`),o=null;return}if(l===i.length-1){if(!a)return;o===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${o+e},${s+e} h${l+1-o}v1H${o+e}z`);return}a&&o===null&&(o=l)})}),r.join("")}function u2(n,e){return n.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function tO(n,e,r,i){if(i==null)return null;const s=n.length+r*2,o=Math.floor(e*eO),a=s/e,l=(i.width||o)*a,u=(i.height||o)*a,c=i.x==null?n.length/2-l/2:i.x*a,f=i.y==null?n.length/2-u/2:i.y*a,d=i.opacity==null?1:i.opacity;let g=null;if(i.excavate){let x=Math.floor(c),I=Math.floor(f),P=Math.ceil(l+c-x),b=Math.ceil(u+f-I);g={x,y:I,w:P,h:b}}const _=i.crossOrigin;return{x:c,y:f,h:u,w:l,excavation:g,opacity:d,crossOrigin:_}}function nO(n,e){return e!=null?Math.max(Math.floor(e),0):n?JR:ZR}function c2({value:n,level:e,minVersion:r,includeMargin:i,marginSize:s,imageSettings:o,size:a,boostLevel:l}){let u=gt.useMemo(()=>{const x=(Array.isArray(n)?n:[n]).reduce((I,P)=>(I.push(...bl.QrSegment.makeSegments(P)),I),[]);return bl.QrCode.encodeSegments(x,XR[e],r,void 0,void 0,l)},[n,e,r,l]);const{cells:c,margin:f,numCells:d,calculatedImageSettings:g}=gt.useMemo(()=>{let _=u.getModules();const x=nO(i,s),I=_.length+x*2,P=tO(_,a,x,o);return{cells:_,margin:x,numCells:I,calculatedImageSettings:P}},[u,a,o,i,s]);return{qrcode:u,margin:f,cells:c,numCells:d,calculatedImageSettings:g}}var rO=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),iO=gt.forwardRef(function(e,r){const i=e,{value:s,size:o=n2,level:a=r2,bgColor:l=i2,fgColor:u=s2,includeMargin:c=o2,minVersion:f=a2,boostLevel:d,marginSize:g,imageSettings:_}=i,I=Jg(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=I,b=Jg(I,["style"]),T=_==null?void 0:_.src,A=gt.useRef(null),O=gt.useRef(null),M=gt.useCallback(B=>{A.current=B,typeof r=="function"?r(B):r&&(r.current=B)},[r]),[z,N]=gt.useState(!1),{margin:C,cells:D,numCells:L,calculatedImageSettings:V}=c2({value:s,level:a,minVersion:f,boostLevel:d,includeMargin:c,marginSize:g,imageSettings:_,size:o});gt.useEffect(()=>{if(A.current!=null){const B=A.current,ae=B.getContext("2d");if(!ae)return;let ie=D;const _e=O.current,ce=V!=null&&_e!==null&&_e.complete&&_e.naturalHeight!==0&&_e.naturalWidth!==0;ce&&V.excavation!=null&&(ie=u2(D,V.excavation));const q=window.devicePixelRatio||1;B.height=B.width=o*q;const K=o/L*q;ae.scale(K,K),ae.fillStyle=l,ae.fillRect(0,0,L,L),ae.fillStyle=u,rO?ae.fill(new Path2D(l2(ie,C))):D.forEach(function(ne,de){ne.forEach(function(he,me){he&&ae.fillRect(me+C,de+C,1,1)})}),V&&(ae.globalAlpha=V.opacity),ce&&ae.drawImage(_e,V.x+C,V.y+C,V.w,V.h)}}),gt.useEffect(()=>{N(!1)},[T]);const U=Xg({height:o,width:o},P);let R=null;return T!=null&&(R=gt.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{N(!0)},ref:O,crossOrigin:V==null?void 0:V.crossOrigin})),gt.createElement(gt.Fragment,null,gt.createElement("canvas",Xg({style:U,height:o,width:o,ref:M,role:"img"},b)),R)});iO.displayName="QRCodeCanvas";var Kv=gt.forwardRef(function(e,r){const i=e,{value:s,size:o=n2,level:a=r2,bgColor:l=i2,fgColor:u=s2,includeMargin:c=o2,minVersion:f=a2,boostLevel:d,title:g,marginSize:_,imageSettings:x}=i,I=Jg(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:b,numCells:T,calculatedImageSettings:A}=c2({value:s,level:a,minVersion:f,boostLevel:d,includeMargin:c,marginSize:_,imageSettings:x,size:o});let O=b,M=null;x!=null&&A!=null&&(A.excavation!=null&&(O=u2(b,A.excavation)),M=gt.createElement("image",{href:x.src,height:A.h,width:A.w,x:A.x+P,y:A.y+P,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const z=l2(O,P);return gt.createElement("svg",Xg({height:o,width:o,viewBox:`0 0 ${T} ${T}`,ref:r,role:"img"},I),!!g&&gt.createElement("title",null,g),gt.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),gt.createElement("path",{fill:u,d:z,shapeRendering:"crispEdges"}),M)});Kv.displayName="QRCodeSVG";var h2={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(p_,function(){var r=function(p,m){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,E){v.__proto__=E}||function(v,E){for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(v[k]=E[k])})(p,m)},i=function(){return(i=Object.assign||function(p){for(var m,v=1,E=arguments.length;v<E;v++)for(var k in m=arguments[v])Object.prototype.hasOwnProperty.call(m,k)&&(p[k]=m[k]);return p}).apply(this,arguments)};function s(p,m,v){for(var E,k=0,j=m.length;k<j;k++)!E&&k in m||((E=E||Array.prototype.slice.call(m,0,k))[k]=m[k]);return p.concat(E||Array.prototype.slice.call(m))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:p_,a=Object.keys,l=Array.isArray;function u(p,m){return typeof m!="object"||a(m).forEach(function(v){p[v]=m[v]}),p}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function d(p,m){return f.call(p,m)}function g(p,m){typeof m=="function"&&(m=m(c(p))),(typeof Reflect>"u"?a:Reflect.ownKeys)(m).forEach(function(v){x(p,v,m[v])})}var _=Object.defineProperty;function x(p,m,v,E){_(p,m,u(v&&d(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},E))}function I(p){return{from:function(m){return p.prototype=Object.create(m.prototype),x(p.prototype,"constructor",p),{extend:g.bind(null,p.prototype)}}}}var P=Object.getOwnPropertyDescriptor,b=[].slice;function T(p,m,v){return b.call(p,m,v)}function A(p,m){return m(p)}function O(p){if(!p)throw new Error("Assertion Failed")}function M(p){o.setImmediate?setImmediate(p):setTimeout(p,0)}function z(p,m){if(typeof m=="string"&&d(p,m))return p[m];if(!m)return p;if(typeof m!="string"){for(var v=[],E=0,k=m.length;E<k;++E){var j=z(p,m[E]);v.push(j)}return v}var $=m.indexOf(".");if($!==-1){var H=p[m.substr(0,$)];return H==null?void 0:z(H,m.substr($+1))}}function N(p,m,v){if(p&&m!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof m!="string"&&"length"in m){O(typeof v!="string"&&"length"in v);for(var E=0,k=m.length;E<k;++E)N(p,m[E],v[E])}else{var j,$,H=m.indexOf(".");H!==-1?(j=m.substr(0,H),($=m.substr(H+1))===""?v===void 0?l(p)&&!isNaN(parseInt(j))?p.splice(j,1):delete p[j]:p[j]=v:N(H=!(H=p[j])||!d(p,j)?p[j]={}:H,$,v)):v===void 0?l(p)&&!isNaN(parseInt(m))?p.splice(m,1):delete p[m]:p[m]=v}}function C(p){var m,v={};for(m in p)d(p,m)&&(v[m]=p[m]);return v}var D=[].concat;function L(p){return D.apply([],p)}var nr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(m){return m+p+"Array"})}))).filter(function(p){return o[p]}),V=new Set(nr.map(function(p){return o[p]})),U=null;function R(p){return U=new WeakMap,p=function m(v){if(!v||typeof v!="object")return v;var E=U.get(v);if(E)return E;if(l(v)){E=[],U.set(v,E);for(var k=0,j=v.length;k<j;++k)E.push(m(v[k]))}else if(V.has(v.constructor))E=v;else{var $,H=c(v);for($ in E=H===Object.prototype?{}:Object.create(H),U.set(v,E),v)d(v,$)&&(E[$]=m(v[$]))}return E}(p),U=null,p}var B={}.toString;function ae(p){return B.call(p).slice(8,-1)}var ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof ie=="symbol"?function(p){var m;return p!=null&&(m=p[ie])&&m.apply(p)}:function(){return null};function ce(p,m){return m=p.indexOf(m),0<=m&&p.splice(m,1),0<=m}var q={};function K(p){var m,v,E,k;if(arguments.length===1){if(l(p))return p.slice();if(this===q&&typeof p=="string")return[p];if(k=_e(p)){for(v=[];!(E=k.next()).done;)v.push(E.value);return v}if(p==null)return[p];if(typeof(m=p.length)!="number")return[p];for(v=new Array(m);m--;)v[m]=p[m];return v}for(m=arguments.length,v=new Array(m);m--;)v[m]=arguments[m];return v}var ne=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},tr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Er=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(tr),de={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function he(p,m){this.name=p,this.message=m}function me(p,m){return p+". Errors: "+Object.keys(m).map(function(v){return m[v].toString()}).filter(function(v,E,k){return k.indexOf(v)===E}).join(`
`)}function Me(p,m,v,E){this.failures=m,this.failedKeys=E,this.successCount=v,this.message=me(p,m)}function Re(p,m){this.name="BulkError",this.failures=Object.keys(m).map(function(v){return m[v]}),this.failuresByPos=m,this.message=me(p,this.failures)}I(he).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(Me).from(he),I(Re).from(he);var Ue=Er.reduce(function(p,m){return p[m]=m+"Error",p},{}),Qe=he,Pe=Er.reduce(function(p,m){var v=m+"Error";function E(k,j){this.name=v,k?typeof k=="string"?(this.message="".concat(k).concat(j?`
 `+j:""),this.inner=j||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=de[m]||v,this.inner=null)}return I(E).from(Qe),p[m]=E,p},{});Pe.Syntax=SyntaxError,Pe.Type=TypeError,Pe.Range=RangeError;var an=tr.reduce(function(p,m){return p[m+"Error"]=Pe[m],p},{}),ln=Er.reduce(function(p,m){return["Syntax","Type","Range"].indexOf(m)===-1&&(p[m+"Error"]=Pe[m]),p},{});function at(){}function ke(p){return p}function Xe(p,m){return p==null||p===ke?m:function(v){return m(p(v))}}function yt(p,m){return function(){p.apply(this,arguments),m.apply(this,arguments)}}function xn(p,m){return p===at?m:function(){var v=p.apply(this,arguments);v!==void 0&&(arguments[0]=v);var E=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var j=m.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?yt(E,this.onsuccess):E),k&&(this.onerror=this.onerror?yt(k,this.onerror):k),j!==void 0?j:v}}function Vo(p,m){return p===at?m:function(){p.apply(this,arguments);var v=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,m.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?yt(v,this.onsuccess):v),E&&(this.onerror=this.onerror?yt(E,this.onerror):E)}}function pu(p,m){return p===at?m:function(v){var E=p.apply(this,arguments);u(v,E);var k=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,v=m.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?yt(k,this.onsuccess):k),j&&(this.onerror=this.onerror?yt(j,this.onerror):j),E===void 0?v===void 0?void 0:v:u(E,v)}}function Ct(p,m){return p===at?m:function(){return m.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Rt(p,m){return p===at?m:function(){var v=p.apply(this,arguments);if(v&&typeof v.then=="function"){for(var E=this,k=arguments.length,j=new Array(k);k--;)j[k]=arguments[k];return v.then(function(){return m.apply(E,j)})}return m.apply(this,arguments)}}ln.ModifyError=Me,ln.DexieError=he,ln.BulkError=Re;var un=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Fo(p){un=p}var Lr={},Rs=100,nr=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,c(p),p];var m=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[m,c(m),p]}(),tr=nr[0],Er=nr[1],nr=nr[2],Er=Er&&Er.then,vr=tr&&tr.constructor,pi=!!nr,mi=function(p,m){gi.push([p,m]),Wi&&(queueMicrotask(qp),Wi=!1)},Os=!0,Wi=!0,Ot=[],Wt=[],Gi=ke,qn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:at,pgp:!1,env:{},finalize:at},Oe=qn,gi=[],Hn=0,Qi=[];function Ie(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var m=this._PSD=Oe;if(typeof p!="function"){if(p!==Lr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$a(this,this._value))}this._state=null,this._value=null,++m.ref,function v(E,k){try{k(function(j){if(E._state===null){if(j===E)throw new TypeError("A promise cannot be resolved with itself.");var $=E._lib&&rr();j&&typeof j.then=="function"?v(E,function(H,G){j instanceof Ie?j._then(H,G):j.then(H,G)}):(E._state=!0,E._value=j,js(E)),$&&Ds()}},$a.bind(null,E))}catch(j){$a(E,j)}}(this,p)}var za={get:function(){var p=Oe,m=ir;function v(E,k){var j=this,$=!p.global&&(p!==Oe||m!==ir),H=$&&!_r(),G=new Ie(function(Q,ee){Yi(j,new cn(yu(E,p,$,H),yu(k,p,$,H),Q,ee,p))});return this._consoleTask&&(G._consoleTask=this._consoleTask),G}return v.prototype=Lr,v},set:function(p){x(this,"then",p&&p.prototype===Lr?za:{get:function(){return p},set:za.set})}};function cn(p,m,v,E,k){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof m=="function"?m:null,this.resolve=v,this.reject=E,this.psd=k}function $a(p,m){var v,E;Wt.push(m),p._state===null&&(v=p._lib&&rr(),m=Gi(m),p._state=!1,p._value=m,E=p,Ot.some(function(k){return k._value===E._value})||Ot.push(E),js(p),v&&Ds())}function js(p){var m=p._listeners;p._listeners=[];for(var v=0,E=m.length;v<E;++v)Yi(p,m[v]);var k=p._PSD;--k.ref||k.finalize(),Hn===0&&(++Hn,mi(function(){--Hn==0&&mu()},[]))}function Yi(p,m){if(p._state!==null){var v=p._state?m.onFulfilled:m.onRejected;if(v===null)return(p._state?m.resolve:m.reject)(p._value);++m.psd.ref,++Hn,mi(Bp,[v,p,m])}else p._listeners.push(m)}function Bp(p,m,v){try{var E,k=m._value;!m._state&&Wt.length&&(Wt=[]),E=un&&m._consoleTask?m._consoleTask.run(function(){return p(k)}):p(k),m._state||Wt.indexOf(k)!==-1||function(j){for(var $=Ot.length;$;)if(Ot[--$]._value===j._value)return Ot.splice($,1)}(m),v.resolve(E)}catch(j){v.reject(j)}finally{--Hn==0&&mu(),--v.psd.ref||v.psd.finalize()}}function qp(){wr(qn,function(){rr()&&Ds()})}function rr(){var p=Os;return Wi=Os=!1,p}function Ds(){var p,m,v;do for(;0<gi.length;)for(p=gi,gi=[],v=p.length,m=0;m<v;++m){var E=p[m];E[0].apply(null,E[1])}while(0<gi.length);Wi=Os=!0}function mu(){var p=Ot;Ot=[],p.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var m=Qi.slice(0),v=m.length;v;)m[--v]()}function Xi(p){return new Ie(Lr,!1,p)}function vt(p,m){var v=Oe;return function(){var E=rr(),k=Oe;try{return Fr(v,!0),p.apply(this,arguments)}catch(j){m&&m(j)}finally{Fr(k,!1),E&&Ds()}}}g(Ie.prototype,{then:za,_then:function(p,m){Yi(this,new cn(null,null,p,m,Oe))},catch:function(p){if(arguments.length===1)return this.then(null,p);var m=p,v=arguments[1];return typeof m=="function"?this.then(null,function(E){return(E instanceof m?v:Xi)(E)}):this.then(null,function(E){return(E&&E.name===m?v:Xi)(E)})},finally:function(p){return this.then(function(m){return Ie.resolve(p()).then(function(){return m})},function(m){return Ie.resolve(p()).then(function(){return Xi(m)})})},timeout:function(p,m){var v=this;return p<1/0?new Ie(function(E,k){var j=setTimeout(function(){return k(new Pe.Timeout(m))},p);v.then(E,k).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&x(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),qn.env=Eh(),g(Ie,{all:function(){var p=K.apply(null,arguments).map(Uo);return new Ie(function(m,v){p.length===0&&m([]);var E=p.length;p.forEach(function(k,j){return Ie.resolve(k).then(function($){p[j]=$,--E||m(p)},v)})})},resolve:function(p){return p instanceof Ie?p:p&&typeof p.then=="function"?new Ie(function(m,v){p.then(m,v)}):new Ie(Lr,!0,p)},reject:Xi,race:function(){var p=K.apply(null,arguments).map(Uo);return new Ie(function(m,v){p.map(function(E){return Ie.resolve(E).then(m,v)})})},PSD:{get:function(){return Oe},set:function(p){return Oe=p}},totalEchoes:{get:function(){return ir}},newPSD:Vr,usePSD:wr,scheduler:{get:function(){return mi},set:function(p){mi=p}},rejectionMapper:{get:function(){return Gi},set:function(p){Gi=p}},follow:function(p,m){return new Ie(function(v,E){return Vr(function(k,j){var $=Oe;$.unhandleds=[],$.onunhandled=j,$.finalize=yt(function(){var H,G=this;H=function(){G.unhandleds.length===0?k():j(G.unhandleds[0])},Qi.push(function Q(){H(),Qi.splice(Qi.indexOf(Q),1)}),++Hn,mi(function(){--Hn==0&&mu()},[])},$.finalize),p()},m,v,E)})}}),vr&&(vr.allSettled&&x(Ie,"allSettled",function(){var p=K.apply(null,arguments).map(Uo);return new Ie(function(m){p.length===0&&m([]);var v=p.length,E=new Array(v);p.forEach(function(k,j){return Ie.resolve(k).then(function($){return E[j]={status:"fulfilled",value:$}},function($){return E[j]={status:"rejected",reason:$}}).then(function(){return--v||m(E)})})})}),vr.any&&typeof AggregateError<"u"&&x(Ie,"any",function(){var p=K.apply(null,arguments).map(Uo);return new Ie(function(m,v){p.length===0&&v(new AggregateError([]));var E=p.length,k=new Array(E);p.forEach(function(j,$){return Ie.resolve(j).then(function(H){return m(H)},function(H){k[$]=H,--E||v(new AggregateError(k))})})})}),vr.withResolvers&&(Ie.withResolvers=vr.withResolvers));var $t={awaits:0,echoes:0,id:0},gu=0,yi=[],Ba=0,ir=0,bh=0;function Vr(p,m,v,E){var k=Oe,j=Object.create(k);return j.parent=k,j.ref=0,j.global=!1,j.id=++bh,qn.env,j.env=pi?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},m&&u(j,m),++k.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},E=wr(j,p,v,E),j.ref===0&&j.finalize(),E}function vi(){return $t.id||($t.id=++gu),++$t.awaits,$t.echoes+=Rs,$t.id}function _r(){return!!$t.awaits&&(--$t.awaits==0&&($t.id=0),$t.echoes=$t.awaits*Rs,!0)}function Uo(p){return $t.echoes&&p&&p.constructor===vr?(vi(),p.then(function(m){return _r(),m},function(m){return _r(),_t(m)})):p}function Hp(){var p=yi[yi.length-1];yi.pop(),Fr(p,!1)}function Fr(p,m){var v,E=Oe;(m?!$t.echoes||Ba++&&p===Oe:!Ba||--Ba&&p===Oe)||queueMicrotask(m?(function(k){++ir,$t.echoes&&--$t.echoes!=0||($t.echoes=$t.awaits=$t.id=0),yi.push(Oe),Fr(k,!0)}).bind(null,p):Hp),p!==Oe&&(Oe=p,E===qn&&(qn.env=Eh()),pi&&(v=qn.env.Promise,m=p.env,(E.global||p.global)&&(Object.defineProperty(o,"Promise",m.PromiseProp),v.all=m.all,v.race=m.race,v.resolve=m.resolve,v.reject=m.reject,m.allSettled&&(v.allSettled=m.allSettled),m.any&&(v.any=m.any))))}function Eh(){var p=o.Promise;return pi?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function wr(p,m,v,E,k){var j=Oe;try{return Fr(p,!0),m(v,E,k)}finally{Fr(j,!1)}}function yu(p,m,v,E){return typeof p!="function"?p:function(){var k=Oe;v&&vi(),Fr(m,!0);try{return p.apply(this,arguments)}finally{Fr(k,!1),E&&queueMicrotask(_r)}}}function zo(p){Promise===vr&&$t.echoes===0?Ba===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Er).indexOf("[native code]")===-1&&(vi=_r=at);var _t=Ie.reject,jn="",sr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Th="String expected.",Ji=[],$o="__dbnames",qa="readonly",Bo="readwrite";function Ur(p,m){return p?m?function(){return p.apply(this,arguments)&&m.apply(this,arguments)}:p:m}var vu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function qo(p){return typeof p!="string"||/\./.test(p)?function(m){return m}:function(m){return m[p]===void 0&&p in m&&delete(m=R(m))[p],m}}function _u(){throw Pe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ze(p,m){try{var v=zr(p),E=zr(m);if(v!==E)return v==="Array"?1:E==="Array"?-1:v==="binary"?1:E==="binary"?-1:v==="string"?1:E==="string"?-1:v==="Date"?1:E!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return m<p?1:p<m?-1:0;case"binary":return function(k,j){for(var $=k.length,H=j.length,G=$<H?$:H,Q=0;Q<G;++Q)if(k[Q]!==j[Q])return k[Q]<j[Q]?-1:1;return $===H?0:$<H?-1:1}(or(p),or(m));case"Array":return function(k,j){for(var $=k.length,H=j.length,G=$<H?$:H,Q=0;Q<G;++Q){var ee=Ze(k[Q],j[Q]);if(ee!==0)return ee}return $===H?0:$<H?-1:1}(p,m)}}catch{}return NaN}function zr(p){var m=typeof p;return m!="object"?m:ArrayBuffer.isView(p)?"binary":(p=ae(p),p==="ArrayBuffer"?"binary":p)}function or(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function _i(p,m,v){var E=p.schema.yProps;return E?(m&&0<v.numFailures&&(m=m.filter(function(k,j){return!v.failures[j]})),Promise.all(E.map(function(k){return k=k.updatesTable,m?p.db.table(k).where("k").anyOf(m).delete():p.db.table(k).clear()})).then(function(){return v})):v}var $r=(Ha.prototype.execute=function(p){var m=this["@@propmod"];if(m.add!==void 0){var v=m.add;if(l(v))return s(s([],l(p)?p:[],!0),v).sort();if(typeof v=="number")return(Number(p)||0)+v;if(typeof v=="bigint")try{return BigInt(p)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(m.remove!==void 0){var E=m.remove;if(l(E))return l(p)?p.filter(function(k){return!E.includes(k)}).sort():[];if(typeof E=="number")return Number(p)-E;if(typeof E=="bigint")try{return BigInt(p)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return v=(v=m.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof p=="string"&&p.startsWith(v)?m.replacePrefix[1]+p.substring(v.length):p},Ha);function Ha(p){this["@@propmod"]=p}function mt(p,m){for(var v=a(m),E=v.length,k=!1,j=0;j<E;++j){var $=v[j],H=m[$],G=z(p,$);H instanceof $r?(N(p,$,H.execute(G)),k=!0):G!==H&&(N(p,$,H),k=!0)}return k}var Ho=(ct.prototype._trans=function(p,m,v){var E=this._tx||Oe.trans,k=this.name,j=un&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function $(Q,ee,W){if(!W.schema[k])throw new Pe.NotFound("Table "+k+" not part of transaction");return m(W.idbtrans,W)}var H=rr();try{var G=E&&E.db._novip===this.db._novip?E===Oe.trans?E._promise(p,$,v):Vr(function(){return E._promise(p,$,v)},{trans:E,transless:Oe.transless||Oe}):function Q(ee,W,re,Y){if(ee.idbdb&&(ee._state.openComplete||Oe.letThrough||ee._vip)){var J=ee._createTransaction(W,re,ee._dbSchema);try{J.create(),ee._state.PR1398_maxLoop=3}catch(Z){return Z.name===Ue.InvalidState&&ee.isOpen()&&0<--ee._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ee.close({disableAutoOpen:!1}),ee.open().then(function(){return Q(ee,W,re,Y)})):_t(Z)}return J._promise(W,function(Z,te){return Vr(function(){return Oe.trans=J,Y(Z,te,J)})}).then(function(Z){if(W==="readwrite")try{J.idbtrans.commit()}catch{}return W==="readonly"?Z:J._completion.then(function(){return Z})})}if(ee._state.openComplete)return _t(new Pe.DatabaseClosed(ee._state.dbOpenError));if(!ee._state.isBeingOpened){if(!ee._state.autoOpen)return _t(new Pe.DatabaseClosed);ee.open().catch(at)}return ee._state.dbReadyPromise.then(function(){return Q(ee,W,re,Y)})}(this.db,p,[this.name],$);return j&&(G._consoleTask=j,G=G.catch(function(Q){return console.trace(Q),_t(Q)})),G}finally{H&&Ds()}},ct.prototype.get=function(p,m){var v=this;return p&&p.constructor===Object?this.where(p).first(m):p==null?_t(new Pe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return v.core.get({trans:E,key:p}).then(function(k){return v.hook.reading.fire(k)})}).then(m)},ct.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(l(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var m=a(p);if(m.length===1)return this.where(m[0]).equals(p[m[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(H){if(H.compound&&m.every(function(Q){return 0<=H.keyPath.indexOf(Q)})){for(var G=0;G<m.length;++G)if(m.indexOf(H.keyPath[G])===-1)return!1;return!0}return!1}).sort(function(H,G){return H.keyPath.length-G.keyPath.length})[0];if(v&&this.db._maxKey!==jn){var j=v.keyPath.slice(0,m.length);return this.where(j).equals(j.map(function(G){return p[G]}))}!v&&un&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(m.join("+"),"]"));var E=this.schema.idxByName;function k(H,G){return Ze(H,G)===0}var $=m.reduce(function(W,G){var Q=W[0],ee=W[1],W=E[G],re=p[G];return[Q||W,Q||!W?Ur(ee,W&&W.multi?function(Y){return Y=z(Y,G),l(Y)&&Y.some(function(J){return k(re,J)})}:function(Y){return k(re,z(Y,G))}):ee]},[null,null]),j=$[0],$=$[1];return j?this.where(j.name).equals(p[j.keyPath]).filter($):v?this.filter($):this.where(m).equals("")},ct.prototype.filter=function(p){return this.toCollection().and(p)},ct.prototype.count=function(p){return this.toCollection().count(p)},ct.prototype.offset=function(p){return this.toCollection().offset(p)},ct.prototype.limit=function(p){return this.toCollection().limit(p)},ct.prototype.each=function(p){return this.toCollection().each(p)},ct.prototype.toArray=function(p){return this.toCollection().toArray(p)},ct.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ct.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,l(p)?"[".concat(p.join("+"),"]"):p))},ct.prototype.reverse=function(){return this.toCollection().reverse()},ct.prototype.mapToClass=function(p){var m,v=this.db,E=this.name;function k(){return m!==null&&m.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof _u&&(function(G,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function ee(){this.constructor=G}r(G,Q),G.prototype=Q===null?Object.create(Q):(ee.prototype=Q.prototype,new ee)}(k,m=p),Object.defineProperty(k.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),k.prototype.table=function(){return E},p=k);for(var j=new Set,$=p.prototype;$;$=c($))Object.getOwnPropertyNames($).forEach(function(G){return j.add(G)});function H(G){if(!G)return G;var Q,ee=Object.create(p.prototype);for(Q in G)if(!j.has(Q))try{ee[Q]=G[Q]}catch{}return ee}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=H,this.hook("reading",H),p},ct.prototype.defineClass=function(){return this.mapToClass(function(p){u(this,p)})},ct.prototype.add=function(p,m){var v=this,E=this.schema.primKey,k=E.auto,j=E.keyPath,$=p;return j&&k&&($=qo(j)(p)),this._trans("readwrite",function(H){return v.core.mutate({trans:H,type:"add",keys:m!=null?[m]:null,values:[$]})}).then(function(H){return H.numFailures?Ie.reject(H.failures[0]):H.lastResult}).then(function(H){if(j)try{N(p,j,H)}catch{}return H})},ct.prototype.upsert=function(p,m){var v=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return v.core.get({trans:k,key:p}).then(function(j){var $=j??{};return mt($,m),E&&N($,E,p),v.core.mutate({trans:k,type:"put",values:[$],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[m]}}).then(function(H){return H.numFailures?Ie.reject(H.failures[0]):!!j})})})},ct.prototype.update=function(p,m){return typeof p!="object"||l(p)?this.where(":id").equals(p).modify(m):(p=z(p,this.schema.primKey.keyPath),p===void 0?_t(new Pe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(m))},ct.prototype.put=function(p,m){var v=this,E=this.schema.primKey,k=E.auto,j=E.keyPath,$=p;return j&&k&&($=qo(j)(p)),this._trans("readwrite",function(H){return v.core.mutate({trans:H,type:"put",values:[$],keys:m!=null?[m]:null})}).then(function(H){return H.numFailures?Ie.reject(H.failures[0]):H.lastResult}).then(function(H){if(j)try{N(p,j,H)}catch{}return H})},ct.prototype.delete=function(p){var m=this;return this._trans("readwrite",function(v){return m.core.mutate({trans:v,type:"delete",keys:[p]}).then(function(E){return _i(m,[p],E)}).then(function(E){return E.numFailures?Ie.reject(E.failures[0]):void 0})})},ct.prototype.clear=function(){var p=this;return this._trans("readwrite",function(m){return p.core.mutate({trans:m,type:"deleteRange",range:vu}).then(function(v){return _i(p,null,v)})}).then(function(m){return m.numFailures?Ie.reject(m.failures[0]):void 0})},ct.prototype.bulkGet=function(p){var m=this;return this._trans("readonly",function(v){return m.core.getMany({keys:p,trans:v}).then(function(E){return E.map(function(k){return m.hook.reading.fire(k)})})})},ct.prototype.bulkAdd=function(p,m,v){var E=this,k=Array.isArray(m)?m:void 0,j=(v=v||(k?void 0:m))?v.allKeys:void 0;return this._trans("readwrite",function($){var Q=E.schema.primKey,H=Q.auto,Q=Q.keyPath;if(Q&&k)throw new Pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Pe.InvalidArgument("Arguments objects and keys must have the same length");var G=p.length,Q=Q&&H?p.map(qo(Q)):p;return E.core.mutate({trans:$,type:"add",keys:k,values:Q,wantResults:j}).then(function(J){var W=J.numFailures,re=J.results,Y=J.lastResult,J=J.failures;if(W===0)return j?re:Y;throw new Re("".concat(E.name,".bulkAdd(): ").concat(W," of ").concat(G," operations failed"),J)})})},ct.prototype.bulkPut=function(p,m,v){var E=this,k=Array.isArray(m)?m:void 0,j=(v=v||(k?void 0:m))?v.allKeys:void 0;return this._trans("readwrite",function($){var Q=E.schema.primKey,H=Q.auto,Q=Q.keyPath;if(Q&&k)throw new Pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Pe.InvalidArgument("Arguments objects and keys must have the same length");var G=p.length,Q=Q&&H?p.map(qo(Q)):p;return E.core.mutate({trans:$,type:"put",keys:k,values:Q,wantResults:j}).then(function(J){var W=J.numFailures,re=J.results,Y=J.lastResult,J=J.failures;if(W===0)return j?re:Y;throw new Re("".concat(E.name,".bulkPut(): ").concat(W," of ").concat(G," operations failed"),J)})})},ct.prototype.bulkUpdate=function(p){var m=this,v=this.core,E=p.map(function($){return $.key}),k=p.map(function($){return $.changes}),j=[];return this._trans("readwrite",function($){return v.getMany({trans:$,keys:E,cache:"clone"}).then(function(H){var G=[],Q=[];p.forEach(function(W,re){var Y=W.key,J=W.changes,Z=H[re];if(Z){for(var te=0,oe=Object.keys(J);te<oe.length;te++){var le=oe[te],pe=J[le];if(le===m.schema.primKey.keyPath){if(Ze(pe,Y)!==0)throw new Pe.Constraint("Cannot update primary key in bulkUpdate()")}else N(Z,le,pe)}j.push(re),G.push(Y),Q.push(Z)}});var ee=G.length;return v.mutate({trans:$,type:"put",keys:G,values:Q,updates:{keys:E,changeSpecs:k}}).then(function(W){var re=W.numFailures,Y=W.failures;if(re===0)return ee;for(var J=0,Z=Object.keys(Y);J<Z.length;J++){var te,oe=Z[J],le=j[Number(oe)];le!=null&&(te=Y[oe],delete Y[oe],Y[le]=te)}throw new Re("".concat(m.name,".bulkUpdate(): ").concat(re," of ").concat(ee," operations failed"),Y)})})})},ct.prototype.bulkDelete=function(p){var m=this,v=p.length;return this._trans("readwrite",function(E){return m.core.mutate({trans:E,type:"delete",keys:p}).then(function(k){return _i(m,p,k)})}).then(function($){var k=$.numFailures,j=$.lastResult,$=$.failures;if(k===0)return j;throw new Re("".concat(m.name,".bulkDelete(): ").concat(k," of ").concat(v," operations failed"),$)})},ct);function ct(){}function Br(p){function m($,H){if(H){for(var G=arguments.length,Q=new Array(G-1);--G;)Q[G-1]=arguments[G];return v[$].subscribe.apply(null,Q),p}if(typeof $=="string")return v[$]}var v={};m.addEventType=j;for(var E=1,k=arguments.length;E<k;++E)j(arguments[E]);return m;function j($,H,G){if(typeof $!="object"){var Q;H=H||Ct;var ee={subscribers:[],fire:G=G||at,subscribe:function(W){ee.subscribers.indexOf(W)===-1&&(ee.subscribers.push(W),ee.fire=H(ee.fire,W))},unsubscribe:function(W){ee.subscribers=ee.subscribers.filter(function(re){return re!==W}),ee.fire=ee.subscribers.reduce(H,G)}};return v[$]=m[$]=ee}a(Q=$).forEach(function(W){var re=Q[W];if(l(re))j(W,Q[W][0],Q[W][1]);else{if(re!=="asap")throw new Pe.InvalidArgument("Invalid event config");var Y=j(W,ke,function(){for(var J=arguments.length,Z=new Array(J);J--;)Z[J]=arguments[J];Y.subscribers.forEach(function(te){M(function(){te.apply(null,Z)})})})}})}}function Ko(p,m){return I(m).from({prototype:p}),m}function Zi(p,m){return!(p.filter||p.algorithm||p.or)&&(m?p.justLimit:!p.replayFilter)}function wu(p,m){p.filter=Ur(p.filter,m)}function xu(p,m,v){var E=p.replayFilter;p.replayFilter=E?function(){return Ur(E(),m())}:m,p.justLimit=v&&!E}function Ka(p,m){if(p.isPrimKey)return m.primaryKey;var v=m.getIndexByKeyPath(p.index);if(!v)throw new Pe.Schema("KeyPath "+p.index+" on object store "+m.name+" is not indexed");return v}function Ih(p,m,v){var E=Ka(p,m.schema);return m.openCursor({trans:v,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:E,range:p.range}})}function wi(p,m,v,E){var k=p.replayFilter?Ur(p.filter,p.replayFilter()):p.filter;if(p.or){var j={},$=function(H,G,Q){var ee,W;k&&!k(G,Q,function(re){return G.stop(re)},function(re){return G.fail(re)})||((W=""+(ee=G.primaryKey))=="[object ArrayBuffer]"&&(W=""+new Uint8Array(ee)),d(j,W)||(j[W]=!0,m(H,G,Q)))};return Promise.all([p.or._iterate($,v),xi(Ih(p,E,v),p.algorithm,$,!p.keysOnly&&p.valueMapper)])}return xi(Ih(p,E,v),Ur(p.algorithm,k),m,!p.keysOnly&&p.valueMapper)}function xi(p,m,v,E){var k=vt(E?function(j,$,H){return v(E(j),$,H)}:v);return p.then(function(j){if(j)return j.start(function(){var $=function(){return j.continue()};m&&!m(j,function(H){return $=H},function(H){j.stop(H),$=at},function(H){j.fail(H),$=at})||k(j.value,j,function(H){return $=H}),$()})})}var Sh=(st.prototype._read=function(p,m){var v=this._ctx;return v.error?v.table._trans(null,_t.bind(null,v.error)):v.table._trans("readonly",p).then(m)},st.prototype._write=function(p){var m=this._ctx;return m.error?m.table._trans(null,_t.bind(null,m.error)):m.table._trans("readwrite",p,"locked")},st.prototype._addAlgorithm=function(p){var m=this._ctx;m.algorithm=Ur(m.algorithm,p)},st.prototype._iterate=function(p,m){return wi(this._ctx,p,m,this._ctx.table.core)},st.prototype.clone=function(p){var m=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return p&&u(v,p),m._ctx=v,m},st.prototype.raw=function(){return this._ctx.valueMapper=null,this},st.prototype.each=function(p){var m=this._ctx;return this._read(function(v){return wi(m,p,v,m.table.core)})},st.prototype.count=function(p){var m=this;return this._read(function(v){var E=m._ctx,k=E.table.core;if(Zi(E,!0))return k.count({trans:v,query:{index:Ka(E,k.schema),range:E.range}}).then(function($){return Math.min($,E.limit)});var j=0;return wi(E,function(){return++j,!1},v,k).then(function(){return j})}).then(p)},st.prototype.sortBy=function(p,m){var v=p.split(".").reverse(),E=v[0],k=v.length-1;function j(G,Q){return Q?j(G[v[Q]],Q-1):G[E]}var $=this._ctx.dir==="next"?1:-1;function H(G,Q){return Ze(j(G,k),j(Q,k))*$}return this.toArray(function(G){return G.sort(H)}).then(m)},st.prototype.toArray=function(p){var m=this;return this._read(function(v){var E=m._ctx;if(E.dir==="next"&&Zi(E,!0)&&0<E.limit){var k=E.valueMapper,j=Ka(E,E.table.core.schema);return E.table.core.query({trans:v,limit:E.limit,values:!0,query:{index:j,range:E.range}}).then(function(H){return H=H.result,k?H.map(k):H})}var $=[];return wi(E,function(H){return $.push(H)},v,E.table.core).then(function(){return $})},p)},st.prototype.offset=function(p){var m=this._ctx;return p<=0||(m.offset+=p,Zi(m)?xu(m,function(){var v=p;return function(E,k){return v===0||(v===1?--v:k(function(){E.advance(v),v=0}),!1)}}):xu(m,function(){var v=p;return function(){return--v<0}})),this},st.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),xu(this._ctx,function(){var m=p;return function(v,E,k){return--m<=0&&E(k),0<=m}},!0),this},st.prototype.until=function(p,m){return wu(this._ctx,function(v,E,k){return!p(v.value)||(E(k),m)}),this},st.prototype.first=function(p){return this.limit(1).toArray(function(m){return m[0]}).then(p)},st.prototype.last=function(p){return this.reverse().first(p)},st.prototype.filter=function(p){var m;return wu(this._ctx,function(v){return p(v.value)}),(m=this._ctx).isMatch=Ur(m.isMatch,p),this},st.prototype.and=function(p){return this.filter(p)},st.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},st.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},st.prototype.desc=function(){return this.reverse()},st.prototype.eachKey=function(p){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(v,E){p(E.key,E)})},st.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},st.prototype.eachPrimaryKey=function(p){var m=this._ctx;return m.keysOnly=!m.isMatch,this.each(function(v,E){p(E.primaryKey,E)})},st.prototype.keys=function(p){var m=this._ctx;m.keysOnly=!m.isMatch;var v=[];return this.each(function(E,k){v.push(k.key)}).then(function(){return v}).then(p)},st.prototype.primaryKeys=function(p){var m=this._ctx;if(m.dir==="next"&&Zi(m,!0)&&0<m.limit)return this._read(function(E){var k=Ka(m,m.table.core.schema);return m.table.core.query({trans:E,values:!1,limit:m.limit,query:{index:k,range:m.range}})}).then(function(E){return E.result}).then(p);m.keysOnly=!m.isMatch;var v=[];return this.each(function(E,k){v.push(k.primaryKey)}).then(function(){return v}).then(p)},st.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},st.prototype.firstKey=function(p){return this.limit(1).keys(function(m){return m[0]}).then(p)},st.prototype.lastKey=function(p){return this.reverse().firstKey(p)},st.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var m={};return wu(this._ctx,function(k){var E=k.primaryKey.toString(),k=d(m,E);return m[E]=!0,!k}),this},st.prototype.modify=function(p){var m=this,v=this._ctx;return this._write(function(E){var k=typeof p=="function"?p:function(Z){return mt(Z,p)},j=v.table.core,Q=j.schema.primaryKey,$=Q.outbound,H=Q.extractKey,G=200,Q=m.db._options.modifyChunkSize;Q&&(G=typeof Q=="object"?Q[j.name]||Q["*"]||200:Q);function ee(Z,le){var oe=le.failures,le=le.numFailures;re+=Z-le;for(var pe=0,ge=a(oe);pe<ge.length;pe++){var Ee=ge[pe];W.push(oe[Ee])}}var W=[],re=0,Y=[],J=p===bu;return m.clone().primaryKeys().then(function(Z){function te(le){var pe=Math.min(G,Z.length-le),ge=Z.slice(le,le+pe);return(J?Promise.resolve([]):j.getMany({trans:E,keys:ge,cache:"immutable"})).then(function(Ee){var Ae=[],xe=[],Se=$?[]:null,Ne=J?ge:[];if(!J)for(var Ce=0;Ce<pe;++Ce){var De=Ee[Ce],Ge={value:R(De),primKey:Z[le+Ce]};k.call(Ge,Ge.value,Ge)!==!1&&(Ge.value==null?Ne.push(Z[le+Ce]):$||Ze(H(De),H(Ge.value))===0?(xe.push(Ge.value),$&&Se.push(Z[le+Ce])):(Ne.push(Z[le+Ce]),Ae.push(Ge.value)))}return Promise.resolve(0<Ae.length&&j.mutate({trans:E,type:"add",values:Ae}).then(function(Ye){for(var Je in Ye.failures)Ne.splice(parseInt(Je),1);ee(Ae.length,Ye)})).then(function(){return(0<xe.length||oe&&typeof p=="object")&&j.mutate({trans:E,type:"put",keys:Se,values:xe,criteria:oe,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<le}).then(function(Ye){return ee(xe.length,Ye)})}).then(function(){return(0<Ne.length||oe&&J)&&j.mutate({trans:E,type:"delete",keys:Ne,criteria:oe,isAdditionalChunk:0<le}).then(function(Ye){return _i(v.table,Ne,Ye)}).then(function(Ye){return ee(Ne.length,Ye)})}).then(function(){return Z.length>le+pe&&te(le+G)})})}var oe=Zi(v)&&v.limit===1/0&&(typeof p!="function"||J)&&{index:v.index,range:v.range};return te(0).then(function(){if(0<W.length)throw new Me("Error modifying one or more objects",W,re,Y);return Z.length})})})},st.prototype.delete=function(){var p=this._ctx,m=p.range;return!Zi(p)||p.table.schema.yProps||!p.isPrimKey&&m.type!==3?this.modify(bu):this._write(function(v){var E=p.table.core.schema.primaryKey,k=m;return p.table.core.count({trans:v,query:{index:E,range:k}}).then(function(j){return p.table.core.mutate({trans:v,type:"deleteRange",range:k}).then(function(G){var H=G.failures,G=G.numFailures;if(G)throw new Me("Could not delete some values",Object.keys(H).map(function(Q){return H[Q]}),j-G);return j-G})})})},st);function st(){}var bu=function(p,m){return m.value=null};function kh(p,m){return p<m?-1:p===m?0:1}function Ch(p,m){return m<p?-1:p===m?0:1}function Gt(p,m,v){return p=p instanceof Ah?new p.Collection(p):p,p._ctx.error=new(v||TypeError)(m),p}function Ms(p){return new p.Collection(p,function(){return qr("")}).limit(0)}function Wa(p,m,v,E){var k,j,$,H,G,Q,ee,W=v.length;if(!v.every(function(J){return typeof J=="string"}))return Gt(p,Th);function re(J){k=J==="next"?function(te){return te.toUpperCase()}:function(te){return te.toLowerCase()},j=J==="next"?function(te){return te.toLowerCase()}:function(te){return te.toUpperCase()},$=J==="next"?kh:Ch;var Z=v.map(function(te){return{lower:j(te),upper:k(te)}}).sort(function(te,oe){return $(te.lower,oe.lower)});H=Z.map(function(te){return te.upper}),G=Z.map(function(te){return te.lower}),ee=(Q=J)==="next"?"":E}re("next"),p=new p.Collection(p,function(){return bi(H[0],G[W-1]+E)}),p._ondirectionchange=function(J){re(J)};var Y=0;return p._addAlgorithm(function(J,Z,te){var oe=J.key;if(typeof oe!="string")return!1;var le=j(oe);if(m(le,G,Y))return!0;for(var pe=null,ge=Y;ge<W;++ge){var Ee=function(Ae,xe,Se,Ne,Ce,De){for(var Ge=Math.min(Ae.length,Ne.length),Ye=-1,Je=0;Je<Ge;++Je){var ar=xe[Je];if(ar!==Ne[Je])return Ce(Ae[Je],Se[Je])<0?Ae.substr(0,Je)+Se[Je]+Se.substr(Je+1):Ce(Ae[Je],Ne[Je])<0?Ae.substr(0,Je)+Ne[Je]+Se.substr(Je+1):0<=Ye?Ae.substr(0,Ye)+xe[Ye]+Se.substr(Ye+1):null;Ce(Ae[Je],ar)<0&&(Ye=Je)}return Ge<Ne.length&&De==="next"?Ae+Se.substr(Ae.length):Ge<Ae.length&&De==="prev"?Ae.substr(0,Se.length):Ye<0?null:Ae.substr(0,Ye)+Ne[Ye]+Se.substr(Ye+1)}(oe,le,H[ge],G[ge],$,Q);Ee===null&&pe===null?Y=ge+1:(pe===null||0<$(pe,Ee))&&(pe=Ee)}return Z(pe!==null?function(){J.continue(pe+ee)}:te),!1}),p}function bi(p,m,v,E){return{type:2,lower:p,upper:m,lowerOpen:v,upperOpen:E}}function qr(p){return{type:1,lower:p,upper:p}}var Ah=(Object.defineProperty(Ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ft.prototype.between=function(p,m,v,E){v=v!==!1,E=E===!0;try{return 0<this._cmp(p,m)||this._cmp(p,m)===0&&(v||E)&&(!v||!E)?Ms(this):new this.Collection(this,function(){return bi(p,m,!v,!E)})}catch{return Gt(this,sr)}},Ft.prototype.equals=function(p){return p==null?Gt(this,sr):new this.Collection(this,function(){return qr(p)})},Ft.prototype.above=function(p){return p==null?Gt(this,sr):new this.Collection(this,function(){return bi(p,void 0,!0)})},Ft.prototype.aboveOrEqual=function(p){return p==null?Gt(this,sr):new this.Collection(this,function(){return bi(p,void 0,!1)})},Ft.prototype.below=function(p){return p==null?Gt(this,sr):new this.Collection(this,function(){return bi(void 0,p,!1,!0)})},Ft.prototype.belowOrEqual=function(p){return p==null?Gt(this,sr):new this.Collection(this,function(){return bi(void 0,p)})},Ft.prototype.startsWith=function(p){return typeof p!="string"?Gt(this,Th):this.between(p,p+jn,!0,!0)},Ft.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):Wa(this,function(m,v){return m.indexOf(v[0])===0},[p],jn)},Ft.prototype.equalsIgnoreCase=function(p){return Wa(this,function(m,v){return m===v[0]},[p],"")},Ft.prototype.anyOfIgnoreCase=function(){var p=K.apply(q,arguments);return p.length===0?Ms(this):Wa(this,function(m,v){return v.indexOf(m)!==-1},p,"")},Ft.prototype.startsWithAnyOfIgnoreCase=function(){var p=K.apply(q,arguments);return p.length===0?Ms(this):Wa(this,function(m,v){return v.some(function(E){return m.indexOf(E)===0})},p,jn)},Ft.prototype.anyOf=function(){var p=this,m=K.apply(q,arguments),v=this._cmp;try{m.sort(v)}catch{return Gt(this,sr)}if(m.length===0)return Ms(this);var E=new this.Collection(this,function(){return bi(m[0],m[m.length-1])});E._ondirectionchange=function(j){v=j==="next"?p._ascending:p._descending,m.sort(v)};var k=0;return E._addAlgorithm(function(j,$,H){for(var G=j.key;0<v(G,m[k]);)if(++k===m.length)return $(H),!1;return v(G,m[k])===0||($(function(){j.continue(m[k])}),!1)}),E},Ft.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ft.prototype.noneOf=function(){var p=K.apply(q,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return Gt(this,sr)}var m=p.reduce(function(v,E){return v?v.concat([[v[v.length-1][1],E]]):[[-1/0,E]]},null);return m.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(m,{includeLowers:!1,includeUppers:!1})},Ft.prototype.inAnyRange=function(oe,m){var v=this,E=this._cmp,k=this._ascending,j=this._descending,$=this._min,H=this._max;if(oe.length===0)return Ms(this);if(!oe.every(function(le){return le[0]!==void 0&&le[1]!==void 0&&k(le[0],le[1])<=0}))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Pe.InvalidArgument);var G=!m||m.includeLowers!==!1,Q=m&&m.includeUppers===!0,ee,W=k;function re(le,pe){return W(le[0],pe[0])}try{(ee=oe.reduce(function(le,pe){for(var ge=0,Ee=le.length;ge<Ee;++ge){var Ae=le[ge];if(E(pe[0],Ae[1])<0&&0<E(pe[1],Ae[0])){Ae[0]=$(Ae[0],pe[0]),Ae[1]=H(Ae[1],pe[1]);break}}return ge===Ee&&le.push(pe),le},[])).sort(re)}catch{return Gt(this,sr)}var Y=0,J=Q?function(le){return 0<k(le,ee[Y][1])}:function(le){return 0<=k(le,ee[Y][1])},Z=G?function(le){return 0<j(le,ee[Y][0])}:function(le){return 0<=j(le,ee[Y][0])},te=J,oe=new this.Collection(this,function(){return bi(ee[0][0],ee[ee.length-1][1],!G,!Q)});return oe._ondirectionchange=function(le){W=le==="next"?(te=J,k):(te=Z,j),ee.sort(re)},oe._addAlgorithm(function(le,pe,ge){for(var Ee,Ae=le.key;te(Ae);)if(++Y===ee.length)return pe(ge),!1;return!J(Ee=Ae)&&!Z(Ee)||(v._cmp(Ae,ee[Y][1])===0||v._cmp(Ae,ee[Y][0])===0||pe(function(){W===k?le.continue(ee[Y][0]):le.continue(ee[Y][1])}),!1)}),oe},Ft.prototype.startsWithAnyOf=function(){var p=K.apply(q,arguments);return p.every(function(m){return typeof m=="string"})?p.length===0?Ms(this):this.inAnyRange(p.map(function(m){return[m,m+jn]})):Gt(this,"startsWithAnyOf() only works with strings")},Ft);function Ft(){}function Dn(p){return vt(function(m){return Ls(m),p(m.target.error),!1})}function Ls(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Hr="storagemutated",es="x-storagemutated-1",Kr=Br(null,Hr),Eu=(lt.prototype._lock=function(){return O(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this},lt.prototype._unlock=function(){if(O(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{wr(p[1],p[0])}catch{}}return this},lt.prototype._locked=function(){return this._reculock&&Oe.lockOwnerFor!==this},lt.prototype.create=function(p){var m=this;if(!this.mode)return this;var v=this.db.idbdb,E=this.db._state.dbOpenError;if(O(!this.idbtrans),!p&&!v)switch(E&&E.name){case"DatabaseClosedError":throw new Pe.DatabaseClosed(E);case"MissingAPIError":throw new Pe.MissingAPI(E.message,E);default:throw new Pe.OpenFailed(E)}if(!this.active)throw new Pe.TransactionInactive;return O(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(k){Ls(k),m._reject(p.error)}),p.onabort=vt(function(k){Ls(k),m.active&&m._reject(new Pe.Abort(p.error)),m.active=!1,m.on("abort").fire(k)}),p.oncomplete=vt(function(){m.active=!1,m._resolve(),"mutatedParts"in p&&Kr.storagemutated.fire(p.mutatedParts)}),this},lt.prototype._promise=function(p,m,v){var E=this;if(p==="readwrite"&&this.mode!=="readwrite")return _t(new Pe.ReadOnly("Transaction is readonly"));if(!this.active)return _t(new Pe.TransactionInactive);if(this._locked())return new Ie(function(j,$){E._blockedFuncs.push([function(){E._promise(p,m,v).then(j,$)},Oe])});if(v)return Vr(function(){var j=new Ie(function($,H){E._lock();var G=m($,H,E);G&&G.then&&G.then($,H)});return j.finally(function(){return E._unlock()}),j._lib=!0,j});var k=new Ie(function(j,$){var H=m(j,$,E);H&&H.then&&H.then(j,$)});return k._lib=!0,k},lt.prototype._root=function(){return this.parent?this.parent._root():this},lt.prototype.waitFor=function(p){var m,v=this._root(),E=Ie.resolve(p);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return E}):(v._waitingFor=E,v._waitingQueue=[],m=v.idbtrans.objectStore(v.storeNames[0]),function j(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(m.get(-1/0).onsuccess=j)}());var k=v._waitingFor;return new Ie(function(j,$){E.then(function(H){return v._waitingQueue.push(vt(j.bind(null,H)))},function(H){return v._waitingQueue.push(vt($.bind(null,H)))}).finally(function(){v._waitingFor===k&&(v._waitingFor=null)})})},lt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Pe.Abort))},lt.prototype.table=function(p){var m=this._memoizedTables||(this._memoizedTables={});if(d(m,p))return m[p];var v=this.schema[p];if(!v)throw new Pe.NotFound("Table "+p+" not part of transaction");return v=new this.db.Table(p,v,this),v.core=this.db.core.table(p),m[p]=v},lt);function lt(){}function Tu(p,m,v,E,k,j,$,H){return{name:p,keyPath:m,unique:v,multi:E,auto:k,compound:j,src:(v&&!$?"&":"")+(E?"*":"")+(k?"++":"")+Nh(m),type:H}}function Nh(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Ga(p,m,v){return{name:p,primKey:m,indexes:v,mappedClass:null,idxByName:(E=function(k){return[k.name,k]},v.reduce(function(k,j,$){return $=E(j,$),$&&(k[$[0]]=$[1]),k},{}))};var E}var Vs=function(p){try{return p.only([[]]),Vs=function(){return[[]]},[[]]}catch{return Vs=function(){return jn},jn}};function Qa(p){return p==null?function(){}:typeof p=="string"?(m=p).split(".").length===1?function(v){return v[m]}:function(v){return z(v,m)}:function(v){return z(v,p)};var m}function Wo(p){return[].slice.call(p)}var Ei=0;function Fs(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function Kp(p,m,G){function E(te){if(te.type===3)return null;if(te.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Y=te.lower,J=te.upper,Z=te.lowerOpen,te=te.upperOpen;return Y===void 0?J===void 0?null:m.upperBound(J,!!te):J===void 0?m.lowerBound(Y,!!Z):m.bound(Y,J,!!Z,!!te)}function k(re){var Y,J=re.name;return{name:J,schema:re,mutate:function(Z){var te=Z.trans,oe=Z.type,le=Z.keys,pe=Z.values,ge=Z.range;return new Promise(function(Ee,Ae){Ee=vt(Ee);var xe=te.objectStore(J),Se=xe.keyPath==null,Ne=oe==="put"||oe==="add";if(!Ne&&oe!=="delete"&&oe!=="deleteRange")throw new Error("Invalid operation type: "+oe);var Ce,De=(le||pe||{length:1}).length;if(le&&pe&&le.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if(De===0)return Ee({numFailures:0,failures:{},results:[],lastResult:void 0});function Ge(Mn){++ar,Ls(Mn)}var Ye=[],Je=[],ar=0;if(oe==="deleteRange"){if(ge.type===4)return Ee({numFailures:ar,failures:Je,results:[],lastResult:void 0});ge.type===3?Ye.push(Ce=xe.clear()):Ye.push(Ce=xe.delete(E(ge)))}else{var Se=Ne?Se?[pe,le]:[pe,null]:[le,null],We=Se[0],En=Se[1];if(Ne)for(var Tn=0;Tn<De;++Tn)Ye.push(Ce=En&&En[Tn]!==void 0?xe[oe](We[Tn],En[Tn]):xe[oe](We[Tn])),Ce.onerror=Ge;else for(Tn=0;Tn<De;++Tn)Ye.push(Ce=xe[oe](We[Tn])),Ce.onerror=Ge}function jh(Mn){Mn=Mn.target.result,Ye.forEach(function(ea,Xp){return ea.error!=null&&(Je[Xp]=ea.error)}),Ee({numFailures:ar,failures:Je,results:oe==="delete"?le:Ye.map(function(ea){return ea.result}),lastResult:Mn})}Ce.onerror=function(Mn){Ge(Mn),jh(Mn)},Ce.onsuccess=jh})},getMany:function(Z){var te=Z.trans,oe=Z.keys;return new Promise(function(le,pe){le=vt(le);for(var ge,Ee=te.objectStore(J),Ae=oe.length,xe=new Array(Ae),Se=0,Ne=0,Ce=function(Ye){Ye=Ye.target,xe[Ye._pos]=Ye.result,++Ne===Se&&le(xe)},De=Dn(pe),Ge=0;Ge<Ae;++Ge)oe[Ge]!=null&&((ge=Ee.get(oe[Ge]))._pos=Ge,ge.onsuccess=Ce,ge.onerror=De,++Se);Se===0&&le(xe)})},get:function(Z){var te=Z.trans,oe=Z.key;return new Promise(function(le,pe){le=vt(le);var ge=te.objectStore(J).get(oe);ge.onsuccess=function(Ee){return le(Ee.target.result)},ge.onerror=Dn(pe)})},query:(Y=Q,function(Z){return new Promise(function(te,oe){te=vt(te);var le,pe,ge,Se=Z.trans,Ee=Z.values,Ae=Z.limit,Ce=Z.query,xe=Ae===1/0?void 0:Ae,Ne=Ce.index,Ce=Ce.range,Se=Se.objectStore(J),Ne=Ne.isPrimaryKey?Se:Se.index(Ne.name),Ce=E(Ce);if(Ae===0)return te({result:[]});Y?((xe=Ee?Ne.getAll(Ce,xe):Ne.getAllKeys(Ce,xe)).onsuccess=function(De){return te({result:De.target.result})},xe.onerror=Dn(oe)):(le=0,pe=!Ee&&"openKeyCursor"in Ne?Ne.openKeyCursor(Ce):Ne.openCursor(Ce),ge=[],pe.onsuccess=function(De){var Ge=pe.result;return Ge?(ge.push(Ee?Ge.value:Ge.primaryKey),++le===Ae?te({result:ge}):void Ge.continue()):te({result:ge})},pe.onerror=Dn(oe))})}),openCursor:function(Z){var te=Z.trans,oe=Z.values,le=Z.query,pe=Z.reverse,ge=Z.unique;return new Promise(function(Ee,Ae){Ee=vt(Ee);var Ne=le.index,xe=le.range,Se=te.objectStore(J),Se=Ne.isPrimaryKey?Se:Se.index(Ne.name),Ne=pe?ge?"prevunique":"prev":ge?"nextunique":"next",Ce=!oe&&"openKeyCursor"in Se?Se.openKeyCursor(E(xe),Ne):Se.openCursor(E(xe),Ne);Ce.onerror=Dn(Ae),Ce.onsuccess=vt(function(De){var Ge,Ye,Je,ar,We=Ce.result;We?(We.___id=++Ei,We.done=!1,Ge=We.continue.bind(We),Ye=(Ye=We.continuePrimaryKey)&&Ye.bind(We),Je=We.advance.bind(We),ar=function(){throw new Error("Cursor not stopped")},We.trans=te,We.stop=We.continue=We.continuePrimaryKey=We.advance=function(){throw new Error("Cursor not started")},We.fail=vt(Ae),We.next=function(){var En=this,Tn=1;return this.start(function(){return Tn--?En.continue():En.stop()}).then(function(){return En})},We.start=function(En){function Tn(){if(Ce.result)try{En()}catch(Mn){We.fail(Mn)}else We.done=!0,We.start=function(){throw new Error("Cursor behind last entry")},We.stop()}var jh=new Promise(function(Mn,ea){Mn=vt(Mn),Ce.onerror=Dn(ea),We.fail=ea,We.stop=function(Xp){We.stop=We.continue=We.continuePrimaryKey=We.advance=ar,Mn(Xp)}});return Ce.onsuccess=vt(function(Mn){Ce.onsuccess=Tn,Tn()}),We.continue=Ge,We.continuePrimaryKey=Ye,We.advance=Je,Tn(),jh},Ee(We)):Ee(null)},Ae)})},count:function(Z){var te=Z.query,oe=Z.trans,le=te.index,pe=te.range;return new Promise(function(ge,Ee){var Ae=oe.objectStore(J),xe=le.isPrimaryKey?Ae:Ae.index(le.name),Ae=E(pe),xe=Ae?xe.count(Ae):xe.count();xe.onsuccess=vt(function(Se){return ge(Se.target.result)}),xe.onerror=Dn(Ee)})}}}var j,$,H,ee=($=G,H=Wo((j=p).objectStoreNames),{schema:{name:j.name,tables:H.map(function(re){return $.objectStore(re)}).map(function(re){var Y=re.keyPath,te=re.autoIncrement,J=l(Y),Z={},te={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Y==null,compound:J,keyPath:Y,autoIncrement:te,unique:!0,extractKey:Qa(Y)},indexes:Wo(re.indexNames).map(function(oe){return re.index(oe)}).map(function(ge){var le=ge.name,pe=ge.unique,Ee=ge.multiEntry,ge=ge.keyPath,Ee={name:le,compound:l(ge),keyPath:ge,unique:pe,multiEntry:Ee,extractKey:Qa(ge)};return Z[Fs(ge)]=Ee}),getIndexByKeyPath:function(oe){return Z[Fs(oe)]}};return Z[":id"]=te.primaryKey,Y!=null&&(Z[Fs(Y)]=te.primaryKey),te})},hasGetAll:0<H.length&&"getAll"in $.objectStore(H[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),G=ee.schema,Q=ee.hasGetAll,ee=G.tables.map(k),W={};return ee.forEach(function(re){return W[re.name]=re}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(re){if(!W[re])throw new Error("Table '".concat(re,"' not found"));return W[re]},MIN_KEY:-1/0,MAX_KEY:Vs(m),schema:G}}function Go(p,m,v,E){var k=v.IDBKeyRange;return v.indexedDB,{dbcore:(E=Kp(m,k,E),p.dbcore.reduce(function(j,$){return $=$.create,i(i({},j),$(j))},E))}}function Qo(p,E){var v=E.db,E=Go(p._middlewares,v,p._deps,E);p.core=E.dbcore,p.tables.forEach(function(k){var j=k.name;p.core.schema.tables.some(function($){return $.name===j})&&(k.core=p.core.table(j),p[j]instanceof p.Table&&(p[j].core=k.core))})}function Us(p,m,v,E){v.forEach(function(k){var j=E[k];m.forEach(function($){var H=function G(Q,ee){return P(Q,ee)||(Q=c(Q))&&G(Q,ee)}($,k);(!H||"value"in H&&H.value===void 0)&&($===p.Transaction.prototype||$ instanceof p.Transaction?x($,k,{get:function(){return this.table(k)},set:function(G){_(this,k,{value:G,writable:!0,configurable:!0,enumerable:!0})}}):$[k]=new p.Table(k,j))})})}function zs(p,m){m.forEach(function(v){for(var E in v)v[E]instanceof p.Table&&delete v[E]})}function Ph(p,m){return p._cfg.version-m._cfg.version}function Ya(p,m,v,E){var k=p._dbSchema;v.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=Ga("$meta",Su("")[0],[]),p._storeNames.push("$meta"));var j=p._createTransaction("readwrite",p._storeNames,k);j.create(v),j._completion.catch(E);var $=j._reject.bind(j),H=Oe.transless||Oe;Vr(function(){return Oe.trans=j,Oe.transless=H,m!==0?(Qo(p,v),Q=m,((G=j).storeNames.includes("$meta")?G.table("$meta").get("version").then(function(ee){return ee??Q}):Ie.resolve(Q)).then(function(ee){return re=ee,Y=j,J=v,Z=[],ee=(W=p)._versions,te=W._dbSchema=$s(0,W.idbdb,J),(ee=ee.filter(function(oe){return oe._cfg.version>=re})).length!==0?(ee.forEach(function(oe){Z.push(function(){var le=te,pe=oe._cfg.dbschema;Bs(W,le,J),Bs(W,pe,J),te=W._dbSchema=pe;var ge=Xa(le,pe);ge.add.forEach(function(Ne){ts(J,Ne[0],Ne[1].primKey,Ne[1].indexes)}),ge.change.forEach(function(Ne){if(Ne.recreate)throw new Pe.Upgrade("Not yet support for changing primary key");var Ce=J.objectStore(Ne.name);Ne.add.forEach(function(De){return Yo(Ce,De)}),Ne.change.forEach(function(De){Ce.deleteIndex(De.name),Yo(Ce,De)}),Ne.del.forEach(function(De){return Ce.deleteIndex(De)})});var Ee=oe._cfg.contentUpgrade;if(Ee&&oe._cfg.version>re){Qo(W,J),Y._memoizedTables={};var Ae=C(pe);ge.del.forEach(function(Ne){Ae[Ne]=le[Ne]}),zs(W,[W.Transaction.prototype]),Us(W,[W.Transaction.prototype],a(Ae),Ae),Y.schema=Ae;var xe,Se=ne(Ee);return Se&&vi(),ge=Ie.follow(function(){var Ne;(xe=Ee(Y))&&Se&&(Ne=_r.bind(null,null),xe.then(Ne,Ne))}),xe&&typeof xe.then=="function"?Ie.resolve(xe):ge.then(function(){return xe})}}),Z.push(function(le){var pe,ge,Ee=oe._cfg.dbschema;pe=Ee,ge=le,[].slice.call(ge.db.objectStoreNames).forEach(function(Ae){return pe[Ae]==null&&ge.db.deleteObjectStore(Ae)}),zs(W,[W.Transaction.prototype]),Us(W,[W.Transaction.prototype],W._storeNames,W._dbSchema),Y.schema=W._dbSchema}),Z.push(function(le){W.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(W.idbdb.version/10)===oe._cfg.version?(W.idbdb.deleteObjectStore("$meta"),delete W._dbSchema.$meta,W._storeNames=W._storeNames.filter(function(pe){return pe!=="$meta"})):le.objectStore("$meta").put(oe._cfg.version,"version"))})}),function oe(){return Z.length?Ie.resolve(Z.shift()(Y.idbtrans)).then(oe):Ie.resolve()}().then(function(){Iu(te,J)})):Ie.resolve();var W,re,Y,J,Z,te}).catch($)):(a(k).forEach(function(ee){ts(v,ee,k[ee].primKey,k[ee].indexes)}),Qo(p,v),void Ie.follow(function(){return p.on.populate.fire(j)}).catch($));var G,Q})}function Wp(p,m){Iu(p._dbSchema,m),m.db.version%10!=0||m.objectStoreNames.contains("$meta")||m.db.createObjectStore("$meta").add(Math.ceil(m.db.version/10-1),"version");var v=$s(0,p.idbdb,m);Bs(p,p._dbSchema,m);for(var E=0,k=Xa(v,p._dbSchema).change;E<k.length;E++){var j=function($){if($.change.length||$.recreate)return console.warn("Unable to patch indexes of table ".concat($.name," because it has changes on the type of index or primary key.")),{value:void 0};var H=m.objectStore($.name);$.add.forEach(function(G){un&&console.debug("Dexie upgrade patch: Creating missing index ".concat($.name,".").concat(G.src)),Yo(H,G)})}(k[E]);if(typeof j=="object")return j.value}}function Xa(p,m){var v,E={del:[],add:[],change:[]};for(v in p)m[v]||E.del.push(v);for(v in m){var k=p[v],j=m[v];if(k){var $={name:v,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||k.primKey.auto!==j.primKey.auto)$.recreate=!0,E.change.push($);else{var H=k.idxByName,G=j.idxByName,Q=void 0;for(Q in H)G[Q]||$.del.push(Q);for(Q in G){var ee=H[Q],W=G[Q];ee?ee.src!==W.src&&$.change.push(W):$.add.push(W)}(0<$.del.length||0<$.add.length||0<$.change.length)&&E.change.push($)}}else E.add.push([v,j])}return E}function ts(p,m,v,E){var k=p.db.createObjectStore(m,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return E.forEach(function(j){return Yo(k,j)}),k}function Iu(p,m){a(p).forEach(function(v){m.db.objectStoreNames.contains(v)||(un&&console.debug("Dexie: Creating missing table",v),ts(m,v,p[v].primKey,p[v].indexes))})}function Yo(p,m){p.createIndex(m.name,m.keyPath,{unique:m.unique,multiEntry:m.multi})}function $s(p,m,v){var E={};return T(m.objectStoreNames,0).forEach(function(k){for(var j=v.objectStore(k),$=Tu(Nh(Q=j.keyPath),Q||"",!0,!1,!!j.autoIncrement,Q&&typeof Q!="string",!0),H=[],G=0;G<j.indexNames.length;++G){var ee=j.index(j.indexNames[G]),Q=ee.keyPath,ee=Tu(ee.name,Q,!!ee.unique,!!ee.multiEntry,!1,Q&&typeof Q!="string",!1);H.push(ee)}E[k]=Ga(k,$,H)}),E}function Bs(p,m,v){for(var E=v.db.objectStoreNames,k=0;k<E.length;++k){var j=E[k],$=v.objectStore(j);p._hasGetAll="getAll"in $;for(var H=0;H<$.indexNames.length;++H){var G=$.indexNames[H],Q=$.index(G).keyPath,ee=typeof Q=="string"?Q:"["+T(Q).join("+")+"]";!m[j]||(Q=m[j].idxByName[ee])&&(Q.name=G,delete m[j].idxByName[ee],m[j].idxByName[G]=Q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function Su(p){return p.split(",").map(function(m,v){var j=m.split(":"),E=(k=j[1])===null||k===void 0?void 0:k.trim(),k=(m=j[0].trim()).replace(/([&*]|\+\+)/g,""),j=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Tu(k,j||null,/\&/.test(m),/\*/.test(m),/\+\+/.test(m),l(j),v===0,E)})}var Ja=(ns.prototype._createTableSchema=Ga,ns.prototype._parseIndexSyntax=Su,ns.prototype._parseStoresSpec=function(p,m){var v=this;a(p).forEach(function(E){if(p[E]!==null){var k=v._parseIndexSyntax(p[E]),j=k.shift();if(!j)throw new Pe.Schema("Invalid schema for table "+E+": "+p[E]);if(j.unique=!0,j.multi)throw new Pe.Schema("Primary key cannot be multiEntry*");k.forEach(function($){if($.auto)throw new Pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!$.keyPath)throw new Pe.Schema("Index must have a name and cannot be an empty string")}),k=v._createTableSchema(E,j,k),m[E]=k}})},ns.prototype.stores=function(v){var m=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,v):v;var v=m._versions,E={},k={};return v.forEach(function(j){u(E,j._cfg.storesSource),k=j._cfg.dbschema={},j._parseStoresSpec(E,k)}),m._dbSchema=k,zs(m,[m._allTables,m,m.Transaction.prototype]),Us(m,[m._allTables,m,m.Transaction.prototype,this._cfg.tables],a(k),k),m._storeNames=a(k),this},ns.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Rt(this._cfg.contentUpgrade||at,p),this},ns);function ns(){}function Za(p,m){var v=p._dbNamesDB;return v||(v=p._dbNamesDB=new is($o,{addons:[],indexedDB:p,IDBKeyRange:m})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function Wr(p){return p&&typeof p.databases=="function"}function el(p){return Vr(function(){return Oe.letThrough=!0,p()})}function tl(p){return!("from"in p)}var Zt=function(p,m){if(!this){var v=new Zt;return p&&"d"in p&&u(v,p),v}u(this,arguments.length?{d:1,from:p,to:1<arguments.length?m:p}:{d:0})};function qs(p,m,v){var E=Ze(m,v);if(!isNaN(E)){if(0<E)throw RangeError();if(tl(p))return u(p,{from:m,to:v,d:1});var k=p.l,E=p.r;if(Ze(v,p.from)<0)return k?qs(k,m,v):p.l={from:m,to:v,d:1,l:null,r:null},ku(p);if(0<Ze(m,p.to))return E?qs(E,m,v):p.r={from:m,to:v,d:1,l:null,r:null},ku(p);Ze(m,p.from)<0&&(p.from=m,p.l=null,p.d=E?E.d+1:1),0<Ze(v,p.to)&&(p.to=v,p.r=null,p.d=p.l?p.l.d+1:1),v=!p.r,k&&!p.l&&Ti(p,k),E&&v&&Ti(p,E)}}function Ti(p,m){tl(m)||function v(E,G){var j=G.from,$=G.to,H=G.l,G=G.r;qs(E,j,$),H&&v(E,H),G&&v(E,G)}(p,m)}function bn(p,m){var v=Xo(m),E=v.next();if(E.done)return!1;for(var k=E.value,j=Xo(p),$=j.next(k.from),H=$.value;!E.done&&!$.done;){if(Ze(H.from,k.to)<=0&&0<=Ze(H.to,k.from))return!0;Ze(k.from,H.from)<0?k=(E=v.next(H.from)).value:H=($=j.next(k.from)).value}return!1}function Xo(p){var m=tl(p)?null:{s:0,n:p};return{next:function(v){for(var E=0<arguments.length;m;)switch(m.s){case 0:if(m.s=1,E)for(;m.n.l&&Ze(v,m.n.from)<0;)m={up:m,n:m.n.l,s:1};else for(;m.n.l;)m={up:m,n:m.n.l,s:1};case 1:if(m.s=2,!E||Ze(v,m.n.to)<=0)return{value:m.n,done:!1};case 2:if(m.n.r){m.s=3,m={up:m,n:m.n.r,s:0};continue}case 3:m=m.up}return{done:!0}}}}function ku(p){var m,v,E=(((m=p.r)===null||m===void 0?void 0:m.d)||0)-(((v=p.l)===null||v===void 0?void 0:v.d)||0),k=1<E?"r":E<-1?"l":"";k&&(m=k=="r"?"l":"r",v=i({},p),E=p[k],p.from=E.from,p.to=E.to,p[k]=E[k],v[k]=E[m],(p[m]=v).d=rs(v)),p.d=rs(p)}function rs(v){var m=v.r,v=v.l;return(m?v?Math.max(m.d,v.d):m.d:v?v.d:0)+1}function h(p,m){return a(m).forEach(function(v){p[v]?Ti(p[v],m[v]):p[v]=function E(k){var j,$,H={};for(j in k)d(k,j)&&($=k[j],H[j]=!$||typeof $!="object"||V.has($.constructor)?$:E($));return H}(m[v])}),p}function w(p,m){return p.all||m.all||Object.keys(p).some(function(v){return m[v]&&bn(m[v],p[v])})}g(Zt.prototype,((Er={add:function(p){return Ti(this,p),this},addKey:function(p){return qs(this,p,p),this},addKeys:function(p){var m=this;return p.forEach(function(v){return qs(m,v,v)}),this},hasKey:function(p){var m=Xo(this).next(p).value;return m&&Ze(m.from,p)<=0&&0<=Ze(m.to,p)}})[ie]=function(){return Xo(this)},Er));var S={},F={},se=!1;function ue(p){h(F,p),se||(se=!0,setTimeout(function(){se=!1,Te(F,!(F={}))},0))}function Te(p,m){m===void 0&&(m=!1);var v=new Set;if(p.all)for(var E=0,k=Object.values(S);E<k.length;E++)Ke($=k[E],p,v,m);else for(var j in p){var $,H=/^idb\:\/\/(.*)\/(.*)\//.exec(j);H&&(j=H[1],H=H[2],($=S["idb://".concat(j,"/").concat(H)])&&Ke($,p,v,m))}v.forEach(function(G){return G()})}function Ke(p,m,v,E){for(var k=[],j=0,$=Object.entries(p.queries.query);j<$.length;j++){for(var H=$[j],G=H[0],Q=[],ee=0,W=H[1];ee<W.length;ee++){var re=W[ee];w(m,re.obsSet)?re.subscribers.forEach(function(te){return v.add(te)}):E&&Q.push(re)}E&&k.push([G,Q])}if(E)for(var Y=0,J=k;Y<J.length;Y++){var Z=J[Y],G=Z[0],Q=Z[1];p.queries.query[G]=Q}}function Bt(p){var m=p._state,v=p._deps.indexedDB;if(m.isBeingOpened||p.idbdb)return m.dbReadyPromise.then(function(){return m.dbOpenError?_t(m.dbOpenError):p});m.isBeingOpened=!0,m.dbOpenError=null,m.openComplete=!1;var E=m.openCanceller,k=Math.round(10*p.verno),j=!1;function $(){if(m.openCanceller!==E)throw new Pe.DatabaseClosed("db.open() was cancelled")}function H(){return new Ie(function(re,Y){if($(),!v)throw new Pe.MissingAPI;var J=p.name,Z=m.autoSchema||!k?v.open(J):v.open(J,k);if(!Z)throw new Pe.MissingAPI;Z.onerror=Dn(Y),Z.onblocked=vt(p._fireOnBlocked),Z.onupgradeneeded=vt(function(te){var oe;ee=Z.transaction,m.autoSchema&&!p._options.allowEmptyDB?(Z.onerror=Ls,ee.abort(),Z.result.close(),(oe=v.deleteDatabase(J)).onsuccess=oe.onerror=vt(function(){Y(new Pe.NoSuchDatabase("Database ".concat(J," doesnt exist")))})):(ee.onerror=Dn(Y),te=te.oldVersion>Math.pow(2,62)?0:te.oldVersion,W=te<1,p.idbdb=Z.result,j&&Wp(p,ee),Ya(p,te/10,ee,Y))},Y),Z.onsuccess=vt(function(){ee=null;var te,oe,le,pe,ge,Ee=p.idbdb=Z.result,Ae=T(Ee.objectStoreNames);if(0<Ae.length)try{var xe=Ee.transaction((pe=Ae).length===1?pe[0]:pe,"readonly");if(m.autoSchema)oe=Ee,le=xe,(te=p).verno=oe.version/10,le=te._dbSchema=$s(0,oe,le),te._storeNames=T(oe.objectStoreNames,0),Us(te,[te._allTables],a(le),le);else if(Bs(p,p._dbSchema,xe),((ge=Xa($s(0,(ge=p).idbdb,xe),ge._dbSchema)).add.length||ge.change.some(function(Se){return Se.add.length||Se.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ee.close(),k=Ee.version+1,j=!0,re(H());Qo(p,xe)}catch{}Ji.push(p),Ee.onversionchange=vt(function(Se){m.vcFired=!0,p.on("versionchange").fire(Se)}),Ee.onclose=vt(function(){p.close({disableAutoOpen:!1})}),W&&(ge=p._deps,xe=J,Ee=ge.indexedDB,ge=ge.IDBKeyRange,Wr(Ee)||xe===$o||Za(Ee,ge).put({name:xe}).catch(at)),re()},Y)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<m.PR1398_maxLoop)return m.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),H();break;case"VersionError":if(0<k)return k=0,H()}return Ie.reject(re)})}var G,Q=m.dbReadyResolve,ee=null,W=!1;return Ie.race([E,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function Y(){return indexedDB.databases().finally(re)}G=setInterval(Y,100),Y()}).finally(function(){return clearInterval(G)}):Promise.resolve()).then(H)]).then(function(){return $(),m.onReadyBeingFired=[],Ie.resolve(el(function(){return p.on.ready.fire(p.vip)})).then(function re(){if(0<m.onReadyBeingFired.length){var Y=m.onReadyBeingFired.reduce(Rt,at);return m.onReadyBeingFired=[],Ie.resolve(el(function(){return Y(p.vip)})).then(re)}})}).finally(function(){m.openCanceller===E&&(m.onReadyBeingFired=null,m.isBeingOpened=!1)}).catch(function(re){m.dbOpenError=re;try{ee&&ee.abort()}catch{}return E===m.openCanceller&&p._close(),_t(re)}).finally(function(){m.openComplete=!0,Q()}).then(function(){var re;return W&&(re={},p.tables.forEach(function(Y){Y.schema.indexes.forEach(function(J){J.name&&(re["idb://".concat(p.name,"/").concat(Y.name,"/").concat(J.name)]=new Zt(-1/0,[[[]]]))}),re["idb://".concat(p.name,"/").concat(Y.name,"/")]=re["idb://".concat(p.name,"/").concat(Y.name,"/:dels")]=new Zt(-1/0,[[[]]])}),Kr(Hr).fire(re),Te(re,!0)),p})}function ht(p){function m(j){return p.next(j)}var v=k(m),E=k(function(j){return p.throw(j)});function k(j){return function(G){var H=j(G),G=H.value;return H.done?G:G&&typeof G.then=="function"?G.then(v,E):l(G)?Promise.all(G).then(v,E):v(G)}}return k(m)()}function jt(p,m,v){for(var E=l(p)?p.slice():[p],k=0;k<v;++k)E.push(m);return E}var xr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return i(i({},p),{table:function(m){var v=p.table(m),E=v.schema,k={},j=[];function $(W,re,Y){var J=Fs(W),Z=k[J]=k[J]||[],te=W==null?0:typeof W=="string"?1:W.length,oe=0<re,oe=i(i({},Y),{name:oe?"".concat(J,"(virtual-from:").concat(Y.name,")"):Y.name,lowLevelIndex:Y,isVirtual:oe,keyTail:re,keyLength:te,extractKey:Qa(W),unique:!oe&&Y.unique});return Z.push(oe),oe.isPrimaryKey||j.push(oe),1<te&&$(te===2?W[0]:W.slice(0,te-1),re+1,Y),Z.sort(function(le,pe){return le.keyTail-pe.keyTail}),oe}m=$(E.primaryKey.keyPath,0,E.primaryKey),k[":id"]=[m];for(var H=0,G=E.indexes;H<G.length;H++){var Q=G[H];$(Q.keyPath,0,Q)}function ee(W){var re,Y=W.query.index;return Y.isVirtual?i(i({},W),{query:{index:Y.lowLevelIndex,range:(re=W.query.range,Y=Y.keyTail,{type:re.type===1?2:re.type,lower:jt(re.lower,re.lowerOpen?p.MAX_KEY:p.MIN_KEY,Y),lowerOpen:!0,upper:jt(re.upper,re.upperOpen?p.MIN_KEY:p.MAX_KEY,Y),upperOpen:!0})}}):W}return i(i({},v),{schema:i(i({},E),{primaryKey:m,indexes:j,getIndexByKeyPath:function(W){return(W=k[Fs(W)])&&W[0]}}),count:function(W){return v.count(ee(W))},query:function(W){return v.query(ee(W))},openCursor:function(W){var re=W.query.index,Y=re.keyTail,J=re.isVirtual,Z=re.keyLength;return J?v.openCursor(ee(W)).then(function(oe){return oe&&te(oe)}):v.openCursor(W);function te(oe){return Object.create(oe,{continue:{value:function(le){le!=null?oe.continue(jt(le,W.reverse?p.MAX_KEY:p.MIN_KEY,Y)):W.unique?oe.continue(oe.key.slice(0,Z).concat(W.reverse?p.MIN_KEY:p.MAX_KEY,Y)):oe.continue()}},continuePrimaryKey:{value:function(le,pe){oe.continuePrimaryKey(jt(le,p.MAX_KEY,Y),pe)}},primaryKey:{get:function(){return oe.primaryKey}},key:{get:function(){var le=oe.key;return Z===1?le[0]:le.slice(0,Z)}},value:{get:function(){return oe.value}}})}}})}})}};function Gr(p,m,v,E){return v=v||{},E=E||"",a(p).forEach(function(k){var j,$,H;d(m,k)?(j=p[k],$=m[k],typeof j=="object"&&typeof $=="object"&&j&&$?(H=ae(j))!==ae($)?v[E+k]=m[k]:H==="Object"?Gr(j,$,v,E+k+"."):j!==$&&(v[E+k]=m[k]):j!==$&&(v[E+k]=m[k])):v[E+k]=void 0}),a(m).forEach(function(k){d(p,k)||(v[E+k]=m[k])}),v}function br(p,m){return m.type==="delete"?m.keys:m.keys||m.values.map(p.extractKey)}var Ii={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return i(i({},p),{table:function(m){var v=p.table(m),E=v.schema.primaryKey;return i(i({},v),{mutate:function(k){var j=Oe.trans,$=j.table(m).hook,H=$.deleting,G=$.creating,Q=$.updating;switch(k.type){case"add":if(G.fire===at)break;return j._promise("readwrite",function(){return ee(k)},!0);case"put":if(G.fire===at&&Q.fire===at)break;return j._promise("readwrite",function(){return ee(k)},!0);case"delete":if(H.fire===at)break;return j._promise("readwrite",function(){return ee(k)},!0);case"deleteRange":if(H.fire===at)break;return j._promise("readwrite",function(){return function W(re,Y,J){return v.query({trans:re,values:!1,query:{index:E,range:Y},limit:J}).then(function(Z){var te=Z.result;return ee({type:"delete",keys:te,trans:re}).then(function(oe){return 0<oe.numFailures?Promise.reject(oe.failures[0]):te.length<J?{failures:[],numFailures:0,lastResult:void 0}:W(re,i(i({},Y),{lower:te[te.length-1],lowerOpen:!0}),J)})})}(k.trans,k.range,1e4)},!0)}return v.mutate(k);function ee(W){var re,Y,J,Z=Oe.trans,te=W.keys||br(E,W);if(!te)throw new Error("Keys missing");return(W=W.type==="add"||W.type==="put"?i(i({},W),{keys:te}):i({},W)).type!=="delete"&&(W.values=s([],W.values)),W.keys&&(W.keys=s([],W.keys)),re=v,J=te,((Y=W).type==="add"?Promise.resolve([]):re.getMany({trans:Y.trans,keys:J,cache:"immutable"})).then(function(oe){var le=te.map(function(pe,ge){var Ee,Ae,xe,Se=oe[ge],Ne={onerror:null,onsuccess:null};return W.type==="delete"?H.fire.call(Ne,pe,Se,Z):W.type==="add"||Se===void 0?(Ee=G.fire.call(Ne,pe,W.values[ge],Z),pe==null&&Ee!=null&&(W.keys[ge]=pe=Ee,E.outbound||N(W.values[ge],E.keyPath,pe))):(Ee=Gr(Se,W.values[ge]),(Ae=Q.fire.call(Ne,Ee,pe,Se,Z))&&(xe=W.values[ge],Object.keys(Ae).forEach(function(Ce){d(xe,Ce)?xe[Ce]=Ae[Ce]:N(xe,Ce,Ae[Ce])}))),Ne});return v.mutate(W).then(function(pe){for(var ge=pe.failures,Ee=pe.results,Ae=pe.numFailures,pe=pe.lastResult,xe=0;xe<te.length;++xe){var Se=(Ee||te)[xe],Ne=le[xe];Se==null?Ne.onerror&&Ne.onerror(ge[xe]):Ne.onsuccess&&Ne.onsuccess(W.type==="put"&&oe[xe]?W.values[xe]:Se)}return{failures:ge,results:Ee,numFailures:Ae,lastResult:pe}}).catch(function(pe){return le.forEach(function(ge){return ge.onerror&&ge.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function Jo(p,m,v){try{if(!m||m.keys.length<p.length)return null;for(var E=[],k=0,j=0;k<m.keys.length&&j<p.length;++k)Ze(m.keys[k],p[j])===0&&(E.push(v?R(m.values[k]):m.values[k]),++j);return E.length===p.length?E:null}catch{return null}}var Cu={stack:"dbcore",level:-1,create:function(p){return{table:function(m){var v=p.table(m);return i(i({},v),{getMany:function(E){if(!E.cache)return v.getMany(E);var k=Jo(E.keys,E.trans._cache,E.cache==="clone");return k?Ie.resolve(k):v.getMany(E).then(function(j){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?R(j):j},j})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),v.mutate(E)}})}}}};function a_(p,m){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!m.schema.primaryKey.outbound}function l_(p,m){switch(p){case"query":return m.values&&!m.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var bC={stack:"dbcore",level:0,name:"Observability",create:function(p){var m=p.schema.name,v=new Zt(p.MIN_KEY,p.MAX_KEY);return i(i({},p),{transaction:function(E,k,j){if(Oe.subscr&&k!=="readonly")throw new Pe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Oe.querier));return p.transaction(E,k,j)},table:function(E){var k=p.table(E),j=k.schema,$=j.primaryKey,W=j.indexes,H=$.extractKey,G=$.outbound,Q=$.autoIncrement&&W.filter(function(Y){return Y.compound&&Y.keyPath.includes($.keyPath)}),ee=i(i({},k),{mutate:function(Y){function J(Ce){return Ce="idb://".concat(m,"/").concat(E,"/").concat(Ce),pe[Ce]||(pe[Ce]=new Zt)}var Z,te,oe,le=Y.trans,pe=Y.mutatedParts||(Y.mutatedParts={}),ge=J(""),Ee=J(":dels"),Ae=Y.type,Ne=Y.type==="deleteRange"?[Y.range]:Y.type==="delete"?[Y.keys]:Y.values.length<50?[br($,Y).filter(function(Ce){return Ce}),Y.values]:[],xe=Ne[0],Se=Ne[1],Ne=Y.trans._cache;return l(xe)?(ge.addKeys(xe),(Ne=Ae==="delete"||xe.length===Se.length?Jo(xe,Ne):null)||Ee.addKeys(xe),(Ne||Se)&&(Z=J,te=Ne,oe=Se,j.indexes.forEach(function(Ce){var De=Z(Ce.name||"");function Ge(Je){return Je!=null?Ce.extractKey(Je):null}function Ye(Je){return Ce.multiEntry&&l(Je)?Je.forEach(function(ar){return De.addKey(ar)}):De.addKey(Je)}(te||oe).forEach(function(Je,En){var We=te&&Ge(te[En]),En=oe&&Ge(oe[En]);Ze(We,En)!==0&&(We!=null&&Ye(We),En!=null&&Ye(En))})}))):xe?(Se={from:(Se=xe.lower)!==null&&Se!==void 0?Se:p.MIN_KEY,to:(Se=xe.upper)!==null&&Se!==void 0?Se:p.MAX_KEY},Ee.add(Se),ge.add(Se)):(ge.add(v),Ee.add(v),j.indexes.forEach(function(Ce){return J(Ce.name).add(v)})),k.mutate(Y).then(function(Ce){return!xe||Y.type!=="add"&&Y.type!=="put"||(ge.addKeys(Ce.results),Q&&Q.forEach(function(De){for(var Ge=Y.values.map(function(We){return De.extractKey(We)}),Ye=De.keyPath.findIndex(function(We){return We===$.keyPath}),Je=0,ar=Ce.results.length;Je<ar;++Je)Ge[Je][Ye]=Ce.results[Je];J(De.name).addKeys(Ge)})),le.mutatedParts=h(le.mutatedParts||{},pe),Ce})}}),W=function(J){var Z=J.query,J=Z.index,Z=Z.range;return[J,new Zt((J=Z.lower)!==null&&J!==void 0?J:p.MIN_KEY,(Z=Z.upper)!==null&&Z!==void 0?Z:p.MAX_KEY)]},re={get:function(Y){return[$,new Zt(Y.key)]},getMany:function(Y){return[$,new Zt().addKeys(Y.keys)]},count:W,query:W,openCursor:W};return a(re).forEach(function(Y){ee[Y]=function(J){var Z=Oe.subscr,te=!!Z,oe=a_(Oe,k)&&l_(Y,J)?J.obsSet={}:Z;if(te){var le=function(Se){return Se="idb://".concat(m,"/").concat(E,"/").concat(Se),oe[Se]||(oe[Se]=new Zt)},pe=le(""),ge=le(":dels"),Z=re[Y](J),te=Z[0],Z=Z[1];if((Y==="query"&&te.isPrimaryKey&&!J.values?ge:le(te.name||"")).add(Z),!te.isPrimaryKey){if(Y!=="count"){var Ee=Y==="query"&&G&&J.values&&k.query(i(i({},J),{values:!1}));return k[Y].apply(this,arguments).then(function(Se){if(Y==="query"){if(G&&J.values)return Ee.then(function(Ge){return Ge=Ge.result,pe.addKeys(Ge),Se});var Ne=J.values?Se.result.map(H):Se.result;(J.values?pe:ge).addKeys(Ne)}else if(Y==="openCursor"){var Ce=Se,De=J.values;return Ce&&Object.create(Ce,{key:{get:function(){return ge.addKey(Ce.primaryKey),Ce.key}},primaryKey:{get:function(){var Ge=Ce.primaryKey;return ge.addKey(Ge),Ge}},value:{get:function(){return De&&pe.addKey(Ce.primaryKey),Ce.value}}})}return Se})}ge.add(v)}}return k[Y].apply(this,arguments)}}),ee}})}};function u_(p,m,v){if(v.numFailures===0)return m;if(m.type==="deleteRange")return null;var E=m.keys?m.keys.length:"values"in m&&m.values?m.values.length:1;return v.numFailures===E?null:(m=i({},m),l(m.keys)&&(m.keys=m.keys.filter(function(k,j){return!(j in v.failures)})),"values"in m&&l(m.values)&&(m.values=m.values.filter(function(k,j){return!(j in v.failures)})),m)}function Gp(p,m){return v=p,((E=m).lower===void 0||(E.lowerOpen?0<Ze(v,E.lower):0<=Ze(v,E.lower)))&&(p=p,(m=m).upper===void 0||(m.upperOpen?Ze(p,m.upper)<0:Ze(p,m.upper)<=0));var v,E}function c_(p,m,re,E,k,j){if(!re||re.length===0)return p;var $=m.query.index,H=$.multiEntry,G=m.query.range,Q=E.schema.primaryKey.extractKey,ee=$.extractKey,W=($.lowLevelIndex||$).extractKey,re=re.reduce(function(Y,J){var Z=Y,te=[];if(J.type==="add"||J.type==="put")for(var oe=new Zt,le=J.values.length-1;0<=le;--le){var pe,ge=J.values[le],Ee=Q(ge);oe.hasKey(Ee)||(pe=ee(ge),(H&&l(pe)?pe.some(function(Ce){return Gp(Ce,G)}):Gp(pe,G))&&(oe.addKey(Ee),te.push(ge)))}switch(J.type){case"add":var Ae=new Zt().addKeys(m.values?Y.map(function(De){return Q(De)}):Y),Z=Y.concat(m.values?te.filter(function(De){return De=Q(De),!Ae.hasKey(De)&&(Ae.addKey(De),!0)}):te.map(function(De){return Q(De)}).filter(function(De){return!Ae.hasKey(De)&&(Ae.addKey(De),!0)}));break;case"put":var xe=new Zt().addKeys(J.values.map(function(De){return Q(De)}));Z=Y.filter(function(De){return!xe.hasKey(m.values?Q(De):De)}).concat(m.values?te:te.map(function(De){return Q(De)}));break;case"delete":var Se=new Zt().addKeys(J.keys);Z=Y.filter(function(De){return!Se.hasKey(m.values?Q(De):De)});break;case"deleteRange":var Ne=J.range;Z=Y.filter(function(De){return!Gp(Q(De),Ne)})}return Z},p);return re===p?p:(re.sort(function(Y,J){return Ze(W(Y),W(J))||Ze(Q(Y),Q(J))}),m.limit&&m.limit<1/0&&(re.length>m.limit?re.length=m.limit:p.length===m.limit&&re.length<m.limit&&(k.dirty=!0)),j?Object.freeze(re):re)}function h_(p,m){return Ze(p.lower,m.lower)===0&&Ze(p.upper,m.upper)===0&&!!p.lowerOpen==!!m.lowerOpen&&!!p.upperOpen==!!m.upperOpen}function EC(p,m){return function(v,E,k,j){if(v===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=Ze(v,E))===0){if(k&&j)return 0;if(k)return 1;if(j)return-1}return E}(p.lower,m.lower,p.lowerOpen,m.lowerOpen)<=0&&0<=function(v,E,k,j){if(v===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=Ze(v,E))===0){if(k&&j)return 0;if(k)return-1;if(j)return 1}return E}(p.upper,m.upper,p.upperOpen,m.upperOpen)}function TC(p,m,v,E){p.subscribers.add(v),E.addEventListener("abort",function(){var k,j;p.subscribers.delete(v),p.subscribers.size===0&&(k=p,j=m,setTimeout(function(){k.subscribers.size===0&&ce(j,k)},3e3))})}var IC={stack:"dbcore",level:0,name:"Cache",create:function(p){var m=p.schema.name;return i(i({},p),{transaction:function(v,E,k){var j,$,H=p.transaction(v,E,k);return E==="readwrite"&&($=(j=new AbortController).signal,k=function(G){return function(){if(j.abort(),E==="readwrite"){for(var Q=new Set,ee=0,W=v;ee<W.length;ee++){var re=W[ee],Y=S["idb://".concat(m,"/").concat(re)];if(Y){var J=p.table(re),Z=Y.optimisticOps.filter(function(De){return De.trans===H});if(H._explicit&&G&&H.mutatedParts)for(var te=0,oe=Object.values(Y.queries.query);te<oe.length;te++)for(var le=0,pe=(Ae=oe[te]).slice();le<pe.length;le++)w((xe=pe[le]).obsSet,H.mutatedParts)&&(ce(Ae,xe),xe.subscribers.forEach(function(De){return Q.add(De)}));else if(0<Z.length){Y.optimisticOps=Y.optimisticOps.filter(function(De){return De.trans!==H});for(var ge=0,Ee=Object.values(Y.queries.query);ge<Ee.length;ge++)for(var Ae,xe,Se,Ne=0,Ce=(Ae=Ee[ge]).slice();Ne<Ce.length;Ne++)(xe=Ce[Ne]).res!=null&&H.mutatedParts&&(G&&!xe.dirty?(Se=Object.isFrozen(xe.res),Se=c_(xe.res,xe.req,Z,J,xe,Se),xe.dirty?(ce(Ae,xe),xe.subscribers.forEach(function(De){return Q.add(De)})):Se!==xe.res&&(xe.res=Se,xe.promise=Ie.resolve({result:Se}))):(xe.dirty&&ce(Ae,xe),xe.subscribers.forEach(function(De){return Q.add(De)})))}}}Q.forEach(function(De){return De()})}}},H.addEventListener("abort",k(!1),{signal:$}),H.addEventListener("error",k(!1),{signal:$}),H.addEventListener("complete",k(!0),{signal:$})),H},table:function(v){var E=p.table(v),k=E.schema.primaryKey;return i(i({},E),{mutate:function(j){var $=Oe.trans;if(k.outbound||$.db._options.cache==="disabled"||$.explicit||$.idbtrans.mode!=="readwrite")return E.mutate(j);var H=S["idb://".concat(m,"/").concat(v)];return H?($=E.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||br(k,j).some(function(G){return G==null}))?(H.optimisticOps.push(j),j.mutatedParts&&ue(j.mutatedParts),$.then(function(G){0<G.numFailures&&(ce(H.optimisticOps,j),(G=u_(0,j,G))&&H.optimisticOps.push(G),j.mutatedParts&&ue(j.mutatedParts))}),$.catch(function(){ce(H.optimisticOps,j),j.mutatedParts&&ue(j.mutatedParts)})):$.then(function(G){var Q=u_(0,i(i({},j),{values:j.values.map(function(ee,W){var re;return G.failures[W]?ee:(ee=(re=k.keyPath)!==null&&re!==void 0&&re.includes(".")?R(ee):i({},ee),N(ee,k.keyPath,G.results[W]),ee)})}),G);H.optimisticOps.push(Q),queueMicrotask(function(){return j.mutatedParts&&ue(j.mutatedParts)})}),$):E.mutate(j)},query:function(j){if(!a_(Oe,E)||!l_("query",j))return E.query(j);var $=((Q=Oe.trans)===null||Q===void 0?void 0:Q.db._options.cache)==="immutable",W=Oe,H=W.requery,G=W.signal,Q=function(J,Z,te,oe){var le=S["idb://".concat(J,"/").concat(Z)];if(!le)return[];if(!(Z=le.queries[te]))return[null,!1,le,null];var pe=Z[(oe.query?oe.query.index.name:null)||""];if(!pe)return[null,!1,le,null];switch(te){case"query":var ge=pe.find(function(Ee){return Ee.req.limit===oe.limit&&Ee.req.values===oe.values&&h_(Ee.req.query.range,oe.query.range)});return ge?[ge,!0,le,pe]:[pe.find(function(Ee){return("limit"in Ee.req?Ee.req.limit:1/0)>=oe.limit&&(!oe.values||Ee.req.values)&&EC(Ee.req.query.range,oe.query.range)}),!1,le,pe];case"count":return ge=pe.find(function(Ee){return h_(Ee.req.query.range,oe.query.range)}),[ge,!!ge,le,pe]}}(m,v,"query",j),ee=Q[0],W=Q[1],re=Q[2],Y=Q[3];return ee&&W?ee.obsSet=j.obsSet:(W=E.query(j).then(function(J){var Z=J.result;if(ee&&(ee.res=Z),$){for(var te=0,oe=Z.length;te<oe;++te)Object.freeze(Z[te]);Object.freeze(Z)}else J.result=R(Z);return J}).catch(function(J){return Y&&ee&&ce(Y,ee),Promise.reject(J)}),ee={obsSet:j.obsSet,promise:W,subscribers:new Set,type:"query",req:j,dirty:!1},Y?Y.push(ee):(Y=[ee],(re=re||(S["idb://".concat(m,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=Y)),TC(ee,Y,H,G),ee.promise.then(function(J){return{result:c_(J.result,j,re==null?void 0:re.optimisticOps,E,ee,$)}})}})}})}};function Rh(p,m){return new Proxy(p,{get:function(v,E,k){return E==="db"?m:Reflect.get(v,E,k)}})}var is=(qt.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Pe.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var m=this._versions,v=m.filter(function(E){return E._cfg.version===p})[0];return v||(v=new this.Version(p),m.push(v),m.sort(Ph),v.stores({}),this._state.autoSchema=!1,v)},qt.prototype._whenReady=function(p){var m=this;return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?p():new Ie(function(v,E){if(m._state.openComplete)return E(new Pe.DatabaseClosed(m._state.dbOpenError));if(!m._state.isBeingOpened){if(!m._state.autoOpen)return void E(new Pe.DatabaseClosed);m.open().catch(at)}m._state.dbReadyPromise.then(v,E)}).then(p)},qt.prototype.use=function(p){var m=p.stack,v=p.create,E=p.level,k=p.name;return k&&this.unuse({stack:m,name:k}),p=this._middlewares[m]||(this._middlewares[m]=[]),p.push({stack:m,create:v,level:E??10,name:k}),p.sort(function(j,$){return j.level-$.level}),this},qt.prototype.unuse=function(p){var m=p.stack,v=p.name,E=p.create;return m&&this._middlewares[m]&&(this._middlewares[m]=this._middlewares[m].filter(function(k){return E?k.create!==E:!!v&&k.name!==v})),this},qt.prototype.open=function(){var p=this;return wr(qn,function(){return Bt(p)})},qt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,m=Ji.indexOf(this);if(0<=m&&Ji.splice(m,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new Ie(function(v){p.dbReadyResolve=v}),p.openCanceller=new Ie(function(v,E){p.cancelOpen=E}))},qt.prototype.close=function(v){var m=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;m?(v.isBeingOpened&&v.cancelOpen(new Pe.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new Pe.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},qt.prototype.delete=function(p){var m=this;p===void 0&&(p={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ie(function(k,j){function $(){m.close(p);var H=m._deps.indexedDB.deleteDatabase(m.name);H.onsuccess=vt(function(){var G,Q,ee;G=m._deps,Q=m.name,ee=G.indexedDB,G=G.IDBKeyRange,Wr(ee)||Q===$o||Za(ee,G).delete(Q).catch(at),k()}),H.onerror=Dn(j),H.onblocked=m._fireOnBlocked}if(v)throw new Pe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then($):$()})},qt.prototype.backendDB=function(){return this.idbdb},qt.prototype.isOpen=function(){return this.idbdb!==null},qt.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},qt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},qt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(qt.prototype,"tables",{get:function(){var p=this;return a(this._allTables).map(function(m){return p._allTables[m]})},enumerable:!1,configurable:!0}),qt.prototype.transaction=function(){var p=(function(m,v,E){var k=arguments.length;if(k<2)throw new Pe.InvalidArgument("Too few arguments");for(var j=new Array(k-1);--k;)j[k-1]=arguments[k];return E=j.pop(),[m,L(j),E]}).apply(this,arguments);return this._transaction.apply(this,p)},qt.prototype._transaction=function(p,m,v){var E=this,k=Oe.trans;k&&k.db===this&&p.indexOf("!")===-1||(k=null);var j,$,H=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if($=m.map(function(Q){if(Q=Q instanceof E.Table?Q.name:Q,typeof Q!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Q}),p=="r"||p===qa)j=qa;else{if(p!="rw"&&p!=Bo)throw new Pe.InvalidArgument("Invalid transaction mode: "+p);j=Bo}if(k){if(k.mode===qa&&j===Bo){if(!H)throw new Pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&$.forEach(function(Q){if(k&&k.storeNames.indexOf(Q)===-1){if(!H)throw new Pe.SubTransaction("Table "+Q+" not included in parent transaction.");k=null}}),H&&k&&!k.active&&(k=null)}}catch(Q){return k?k._promise(null,function(ee,W){W(Q)}):_t(Q)}var G=(function Q(ee,W,re,Y,J){return Ie.resolve().then(function(){var Z=Oe.transless||Oe,te=ee._createTransaction(W,re,ee._dbSchema,Y);if(te.explicit=!0,Z={trans:te,transless:Z},Y)te.idbtrans=Y.idbtrans;else try{te.create(),te.idbtrans._explicit=!0,ee._state.PR1398_maxLoop=3}catch(pe){return pe.name===Ue.InvalidState&&ee.isOpen()&&0<--ee._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ee.close({disableAutoOpen:!1}),ee.open().then(function(){return Q(ee,W,re,null,J)})):_t(pe)}var oe,le=ne(J);return le&&vi(),Z=Ie.follow(function(){var pe;(oe=J.call(te,te))&&(le?(pe=_r.bind(null,null),oe.then(pe,pe)):typeof oe.next=="function"&&typeof oe.throw=="function"&&(oe=ht(oe)))},Z),(oe&&typeof oe.then=="function"?Ie.resolve(oe).then(function(pe){return te.active?pe:_t(new Pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return oe})).then(function(pe){return Y&&te._resolve(),te._completion.then(function(){return pe})}).catch(function(pe){return te._reject(pe),_t(pe)})})}).bind(null,this,j,$,k,v);return k?k._promise(j,G,"lock"):Oe.trans?wr(Oe.transless,function(){return E._whenReady(G)}):this._whenReady(G)},qt.prototype.table=function(p){if(!d(this._allTables,p))throw new Pe.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},qt);function qt(p,m){var v=this;this._middlewares={},this.verno=0;var E=qt.dependencies;this._options=m=i({addons:qt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},m),this._deps={indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange},E=m.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var k,j,$,H,G,Q={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:at,dbReadyPromise:null,cancelOpen:at,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:m.autoOpen};Q.dbReadyPromise=new Ie(function(W){Q.dbReadyResolve=W}),Q.openCanceller=new Ie(function(W,re){Q.cancelOpen=re}),this._state=Q,this.name=p,this.on=Br(this,"populate","blocked","versionchange","close",{ready:[Rt,at]}),this.once=function(W,re){var Y=function(){for(var J=[],Z=0;Z<arguments.length;Z++)J[Z]=arguments[Z];v.on(W).unsubscribe(Y),re.apply(v,J)};return v.on(W,Y)},this.on.ready.subscribe=A(this.on.ready.subscribe,function(W){return function(re,Y){qt.vip(function(){var J,Z=v._state;Z.openComplete?(Z.dbOpenError||Ie.resolve().then(re),Y&&W(re)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(re),Y&&W(re)):(W(re),J=v,Y||W(function te(){J.on.ready.unsubscribe(re),J.on.ready.unsubscribe(te)}))})}}),this.Collection=(k=this,Ko(Sh.prototype,function(oe,te){this.db=k;var Y=vu,J=null;if(te)try{Y=te()}catch(le){J=le}var Z=oe._ctx,te=Z.table,oe=te.hook.reading.fire;this._ctx={table:te,index:Z.index,isPrimKey:!Z.index||te.schema.primKey.keyPath&&Z.index===te.schema.primKey.name,range:Y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:J,or:Z.or,valueMapper:oe!==ke?oe:null}})),this.Table=(j=this,Ko(Ho.prototype,function(W,re,Y){this.db=j,this._tx=Y,this.name=W,this.schema=re,this.hook=j._allTables[W]?j._allTables[W].hook:Br(null,{creating:[xn,at],reading:[Xe,ke],updating:[pu,at],deleting:[Vo,at]})})),this.Transaction=($=this,Ko(Eu.prototype,function(W,re,Y,J,Z){var te=this;W!=="readonly"&&re.forEach(function(oe){oe=(oe=Y[oe])===null||oe===void 0?void 0:oe.yProps,oe&&(re=re.concat(oe.map(function(le){return le.updatesTable})))}),this.db=$,this.mode=W,this.storeNames=re,this.schema=Y,this.chromeTransactionDurability=J,this.idbtrans=null,this.on=Br(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(oe,le){te._resolve=oe,te._reject=le}),this._completion.then(function(){te.active=!1,te.on.complete.fire()},function(oe){var le=te.active;return te.active=!1,te.on.error.fire(oe),te.parent?te.parent._reject(oe):le&&te.idbtrans&&te.idbtrans.abort(),_t(oe)})})),this.Version=(H=this,Ko(Ja.prototype,function(W){this.db=H,this._cfg={version:W,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(G=this,Ko(Ah.prototype,function(W,re,Y){if(this.db=G,this._ctx={table:W,index:re===":id"?null:re,or:Y},this._cmp=this._ascending=Ze,this._descending=function(J,Z){return Ze(Z,J)},this._max=function(J,Z){return 0<Ze(J,Z)?J:Z},this._min=function(J,Z){return Ze(J,Z)<0?J:Z},this._IDBKeyRange=G._deps.IDBKeyRange,!this._IDBKeyRange)throw new Pe.MissingAPI})),this.on("versionchange",function(W){0<W.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(W){!W.newVersion||W.newVersion<W.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(W.oldVersion/10))}),this._maxKey=Vs(m.IDBKeyRange),this._createTransaction=function(W,re,Y,J){return new v.Transaction(W,re,Y,v._options.chromeTransactionDurability,J)},this._fireOnBlocked=function(W){v.on("blocked").fire(W),Ji.filter(function(re){return re.name===v.name&&re!==v&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(W)})},this.use(Cu),this.use(IC),this.use(bC),this.use(xr),this.use(Ii);var ee=new Proxy(this,{get:function(W,re,Y){if(re==="_vip")return!0;if(re==="table")return function(Z){return Rh(v.table(Z),ee)};var J=Reflect.get(W,re,Y);return J instanceof Ho?Rh(J,ee):re==="tables"?J.map(function(Z){return Rh(Z,ee)}):re==="_createTransaction"?function(){return Rh(J.apply(this,arguments),ee)}:J}});this.vip=ee,E.forEach(function(W){return W(v)})}var Oh,Er=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",SC=(Qp.prototype.subscribe=function(p,m,v){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:m,complete:v})},Qp.prototype[Er]=function(){return this},Qp);function Qp(p){this._subscribe=p}try{Oh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Oh={indexedDB:null,IDBKeyRange:null}}function f_(p){var m,v=!1,E=new SC(function(k){var j=ne(p),$,H=!1,G={},Q={},ee={get closed(){return H},unsubscribe:function(){H||(H=!0,$&&$.abort(),W&&Kr.storagemutated.unsubscribe(Y))}};k.start&&k.start(ee);var W=!1,re=function(){return zo(J)},Y=function(Z){h(G,Z),w(Q,G)&&re()},J=function(){var Z,te,oe;!H&&Oh.indexedDB&&(G={},Z={},$&&$.abort(),$=new AbortController,oe=function(le){var pe=rr();try{j&&vi();var ge=Vr(p,le);return ge=j?ge.finally(_r):ge}finally{pe&&Ds()}}(te={subscr:Z,signal:$.signal,requery:re,querier:p,trans:null}),Promise.resolve(oe).then(function(le){v=!0,m=le,H||te.signal.aborted||(G={},function(pe){for(var ge in pe)if(d(pe,ge))return;return 1}(Q=Z)||W||(Kr(Hr,Y),W=!0),zo(function(){return!H&&k.next&&k.next(le)}))},function(le){v=!1,["DatabaseClosedError","AbortError"].includes(le==null?void 0:le.name)||H||zo(function(){H||k.error&&k.error(le)})}))};return setTimeout(re,0),ee});return E.hasValue=function(){return v},E.getValue=function(){return m},E}var Zo=is;function Yp(p){var m=Hs;try{Hs=!0,Kr.storagemutated.fire(p),Te(p,!0)}finally{Hs=m}}g(Zo,i(i({},ln),{delete:function(p){return new Zo(p,{addons:[]}).delete()},exists:function(p){return new Zo(p,{addons:[]}).open().then(function(m){return m.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return m=Zo.dependencies,v=m.indexedDB,m=m.IDBKeyRange,(Wr(v)?Promise.resolve(v.databases()).then(function(E){return E.map(function(k){return k.name}).filter(function(k){return k!==$o})}):Za(v,m).toCollection().primaryKeys()).then(p)}catch{return _t(new Pe.MissingAPI)}var m,v},defineClass:function(){return function(p){u(this,p)}},ignoreTransaction:function(p){return Oe.trans?wr(Oe.transless,p):p()},vip:el,async:function(p){return function(){try{var m=ht(p.apply(this,arguments));return m&&typeof m.then=="function"?m:Ie.resolve(m)}catch(v){return _t(v)}}},spawn:function(p,m,v){try{var E=ht(p.apply(v,m||[]));return E&&typeof E.then=="function"?E:Ie.resolve(E)}catch(k){return _t(k)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(p,m){return m=Ie.resolve(typeof p=="function"?Zo.ignoreTransaction(p):p).timeout(m||6e4),Oe.trans?Oe.trans.waitFor(m):m},Promise:Ie,debug:{get:function(){return un},set:function(p){Fo(p)}},derive:I,extend:u,props:g,override:A,Events:Br,on:Kr,liveQuery:f_,extendObservabilitySet:h,getByKeyPath:z,setByKeyPath:N,delByKeyPath:function(p,m){typeof m=="string"?N(p,m,void 0):"length"in m&&[].map.call(m,function(v){N(p,v,void 0)})},shallowClone:C,deepClone:R,getObjectDiff:Gr,cmp:Ze,asap:M,minKey:-1/0,addons:[],connections:Ji,errnames:Ue,dependencies:Oh,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(p){return parseInt(p)}).reduce(function(p,m,v){return p+m/Math.pow(10,2*v)})})),Zo.maxKey=Vs(Zo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kr(Hr,function(p){Hs||(p=new CustomEvent(es,{detail:p}),Hs=!0,dispatchEvent(p),Hs=!1)}),addEventListener(es,function(p){p=p.detail,Hs||Yp(p)}));var nl,Hs=!1,d_=function(){};return typeof BroadcastChannel<"u"&&((d_=function(){(nl=new BroadcastChannel(es)).onmessage=function(p){return p.data&&Yp(p.data)}})(),typeof nl.unref=="function"&&nl.unref(),Kr(Hr,function(p){Hs||nl.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!is.disableBfCache&&p.persisted){un&&console.debug("Dexie: handling persisted pagehide"),nl!=null&&nl.close();for(var m=0,v=Ji;m<v.length;m++)v[m].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!is.disableBfCache&&p.persisted&&(un&&console.debug("Dexie: handling persisted pageshow"),d_(),Yp({all:new Zt(-1/0,[[]])}))})),Ie.rejectionMapper=function(p,m){return!p||p instanceof he||p instanceof TypeError||p instanceof SyntaxError||!p.name||!an[p.name]?p:(m=new an[p.name](m||p.message,p),"stack"in p&&x(m,"stack",{get:function(){return this.inner.stack}}),m)},Fo(un),i(is,Object.freeze({__proto__:null,Dexie:is,liveQuery:f_,Entity:_u,cmp:Ze,PropModification:$r,replacePrefix:function(p,m){return new $r({replacePrefix:[p,m]})},add:function(p){return new $r({add:p})},remove:function(p){return new $r({remove:p})},default:is,RangeSet:Zt,mergeRanges:Ti,rangesOverlap:bn}),{default:is}),is})})(h2);var sO=h2.exports;const Zg=Kd(sO),Uw=Symbol.for("Dexie"),Hl=globalThis[Uw]||(globalThis[Uw]=Zg);if(Zg.semVer!==Hl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Zg.semVer} and ${Hl.semVer}`);const{liveQuery:z7,mergeRanges:$7,rangesOverlap:B7,RangeSet:q7,cmp:H7,Entity:K7,PropModification:W7,replacePrefix:G7,add:Q7,remove:Y7,DexieYProvider:X7}=Hl,xt=new Hl("NexusMindDB");xt.version(4).stores({contacts:"id, name, ocrText, phone, email, company, *tags, lastUpdated",settings:"id",schedules:"id, title, date, *contactIds, type"});function oO(n,e,r){var i,s;typeof n=="function"?(i=e||[],s=r):(i=[],s=e);var o=gt.useRef({hasResult:!1,result:s,error:null}),a=gt.useReducer(function(c){return c+1},0);a[0];var l=a[1],u=gt.useMemo(function(){var c=typeof n=="function"?n():n;if(!c||typeof c.subscribe!="function")throw n===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")o.current.result=c.getValue(),o.current.hasResult=!0;else{var f=c.subscribe(function(d){o.current.result=d,o.current.hasResult=!0});typeof f=="function"?f():f.unsubscribe()}return c},i);if(gt.useDebugValue(o.current.result),gt.useEffect(function(){var c=u.subscribe(function(f){var d=o.current;(d.error!==null||d.result!==f)&&(d.error=null,d.result=f,d.hasResult=!0,l())},function(f){var d=o.current;d.error!==f&&(d.error=f,l())});return typeof c=="function"?c:c.unsubscribe.bind(c)},i),o.current.error)throw o.current.error;return o.current.result}function If(n,e,r){return oO(function(){return Hl.liveQuery(n)},e||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=Hl.DexieYProvider;e&&e.release(n)});const aO=()=>{};var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=function(n){const e=[];let r=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},lO=function(n){const e=[];let r=0,i=0;for(;r<n.length;){const s=n[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[r++],a=n[r++],l=n[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],a=n[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},d2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,f=o>>2,d=(o&3)<<4|l>>4;let g=(l&15)<<2|c>>6,_=c&63;u||(_=64,a||(g=64)),i.push(r[f],r[d],r[g],r[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(f2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=r[n.charAt(s++)],l=s<n.length?r[n.charAt(s)]:0;++s;const c=s<n.length?r[n.charAt(s)]:64;++s;const d=s<n.length?r[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||d==null)throw new uO;const g=o<<2|l>>4;if(i.push(g),c!==64){const _=l<<4&240|c>>2;if(i.push(_),d!==64){const x=c<<6&192|d;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cO=function(n){const e=f2(n);return d2.encodeByteArray(e,!0)},fd=function(n){return cO(n).replace(/\./g,"")},p2=function(n){try{return d2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=()=>hO().__FIREBASE_DEFAULTS__,dO=()=>{if(typeof process>"u"||typeof zw>"u")return;const n=zw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&p2(n[1]);return e&&JSON.parse(e)},fp=()=>{try{return aO()||fO()||dO()||pO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m2=n=>{var e,r;return(r=(e=fp())==null?void 0:e.emulatorHosts)==null?void 0:r[n]},mO=n=>{const e=m2(n);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},g2=()=>{var n;return(n=fp())==null?void 0:n.config},y2=n=>{var e;return(e=fp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v2(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[fd(JSON.stringify(r)),fd(JSON.stringify(a)),""].join(".")}const dc={};function vO(){const n={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?n.emulator.push(e):n.prod.push(e);return n}function _O(n){let e=document.getElementById(n),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),r=!0),{created:r,element:e}}let $w=!1;function _2(n,e){if(typeof window>"u"||typeof document>"u"||!au(window.location.host)||dc[n]===e||dc[n]||$w)return;dc[n]=e;function r(g){return`__firebase__banner__${g}`}const i="__firebase__banner",o=vO().prod.length>0;function a(){const g=document.getElementById(i);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{$w=!0,a()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function d(){const g=_O(i),_=r("text"),x=document.getElementById(_)||document.createElement("span"),I=r("learnmore"),P=document.getElementById(I)||document.createElement("a"),b=r("preprendIcon"),T=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;l(A),f(P,I);const O=c();u(T,b),A.append(T,x,P,O),document.body.appendChild(A)}o?(x.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function xO(){var e;const n=(e=fp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function EO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TO(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IO(){return!xO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x2(){try{return typeof indexedDB=="object"}catch{return!1}}function b2(){return new Promise((n,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function SO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="FirebaseError";class fi extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=kO,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,La.prototype.create)}}class La{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?CO(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fi(s,l,i)}}function CO(n,e){return n.replace(AO,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const AO=/\{\$([^}]+)}/g;function NO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Eo(n,e){if(n===e)return!0;const r=Object.keys(n),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(Bw(o)&&Bw(a)){if(!Eo(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Bw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n){const e=[];for(const[r,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function PO(n,e){const r=new RO(n,e);return r.subscribe.bind(r)}class RO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");OO(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OO(n,e){if(typeof n!="object"||n===null)return!1;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=1e3,DO=2,MO=4*60*60*1e3,LO=.5;function qw(n,e=jO,r=DO){const i=e*Math.pow(r,n),s=Math.round(LO*i*(Math.random()-.5)*2);return Math.min(MO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n){return n&&n._delegate?n._delegate:n}class hi{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new gO;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UO(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){const i=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FO(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FO(n){return n===sa?void 0:n}function UO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new VO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const $O={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},BO=nt.INFO,qO={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},HO=(n,e,...r)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=qO[e];if(s)console[s](`[${i}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dp{constructor(e){this.name=e,this._logLevel=BO,this._logHandler=HO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$O[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const KO=(n,e)=>e.some(r=>n instanceof r);let Hw,Kw;function WO(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GO(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E2=new WeakMap,ey=new WeakMap,T2=new WeakMap,km=new WeakMap,Wv=new WeakMap;function QO(n){const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(yo(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&E2.set(r,n)}).catch(()=>{}),Wv.set(e,n),e}function YO(n){if(ey.has(n))return;const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});ey.set(n,e)}let ty={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T2.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return yo(n[e])},set(n,e,r){return n[e]=r,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function XO(n){ty=n(ty)}function JO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=n.call(Cm(this),e,...r);return T2.set(i,e.sort?e.sort():[e]),yo(i)}:GO().includes(n)?function(...e){return n.apply(Cm(this),e),yo(E2.get(this))}:function(...e){return yo(n.apply(Cm(this),e))}}function ZO(n){return typeof n=="function"?JO(n):(n instanceof IDBTransaction&&YO(n),KO(n,WO())?new Proxy(n,ty):n)}function yo(n){if(n instanceof IDBRequest)return QO(n);if(km.has(n))return km.get(n);const e=ZO(n);return e!==n&&(km.set(n,e),Wv.set(e,n)),e}const Cm=n=>Wv.get(n);function I2(n,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=yo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(yo(a.result),u.oldVersion,u.newVersion,yo(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const e4=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],Am=new Map;function Ww(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=t4.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||e4.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Am.set(e,o),o}XO(n=>({...n,get:(e,r,i)=>Ww(e,r)||n.get(e,r,i),has:(e,r)=>!!Ww(e,r)||n.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(r4(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function r4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ny="@firebase/app",Gw="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new dp("@firebase/app"),i4="@firebase/app-compat",s4="@firebase/analytics-compat",o4="@firebase/analytics",a4="@firebase/app-check-compat",l4="@firebase/app-check",u4="@firebase/auth",c4="@firebase/auth-compat",h4="@firebase/database",f4="@firebase/data-connect",d4="@firebase/database-compat",p4="@firebase/functions",m4="@firebase/functions-compat",g4="@firebase/installations",y4="@firebase/installations-compat",v4="@firebase/messaging",_4="@firebase/messaging-compat",w4="@firebase/performance",x4="@firebase/performance-compat",b4="@firebase/remote-config",E4="@firebase/remote-config-compat",T4="@firebase/storage",I4="@firebase/storage-compat",S4="@firebase/firestore",k4="@firebase/ai",C4="@firebase/firestore-compat",A4="firebase",N4="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",P4={[ny]:"fire-core",[i4]:"fire-core-compat",[o4]:"fire-analytics",[s4]:"fire-analytics-compat",[l4]:"fire-app-check",[a4]:"fire-app-check-compat",[u4]:"fire-auth",[c4]:"fire-auth-compat",[h4]:"fire-rtdb",[f4]:"fire-data-connect",[d4]:"fire-rtdb-compat",[p4]:"fire-fn",[m4]:"fire-fn-compat",[g4]:"fire-iid",[y4]:"fire-iid-compat",[v4]:"fire-fcm",[_4]:"fire-fcm-compat",[w4]:"fire-perf",[x4]:"fire-perf-compat",[b4]:"fire-rc",[E4]:"fire-rc-compat",[T4]:"fire-gcs",[I4]:"fire-gcs-compat",[S4]:"fire-fst",[C4]:"fire-fst-compat",[k4]:"fire-vertex","fire-js":"fire-js",[A4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new Map,R4=new Map,iy=new Map;function Qw(n,e){try{n.container.addComponent(e)}catch(r){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function zi(n){const e=n.name;if(iy.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,n);for(const r of dd.values())Qw(r,n);for(const r of R4.values())Qw(r,n);return!0}function Va(n,e){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function ni(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new La("app","Firebase",O4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,r,i){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=N4;function S2(n,e={}){let r=n;typeof e!="object"&&(e={name:e});const i={name:ry,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw vo.create("bad-app-name",{appName:String(s)});if(r||(r=g2()),!r)throw vo.create("no-options");const o=dd.get(s);if(o){if(Eo(r,o.options)&&Eo(i,o.config))return o;throw vo.create("duplicate-app",{appName:s})}const a=new zO(s);for(const u of iy.values())a.addComponent(u);const l=new j4(r,i,a);return dd.set(s,l),l}function Gv(n=ry){const e=dd.get(n);if(!e&&n===ry&&g2())return S2();if(!e)throw vo.create("no-app",{appName:n});return e}function Or(n,e,r){let i=P4[n]??n;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(a.join(" "));return}zi(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="firebase-heartbeat-database",M4=1,zc="firebase-heartbeat-store";let Nm=null;function k2(){return Nm||(Nm=I2(D4,M4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zc)}catch(r){console.warn(r)}}}}).catch(n=>{throw vo.create("idb-open",{originalErrorMessage:n.message})})),Nm}async function L4(n){try{const r=(await k2()).transaction(zc),i=await r.objectStore(zc).get(C2(n));return await r.done,i}catch(e){if(e instanceof fi)Ss.warn(e.message);else{const r=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(r.message)}}}async function Yw(n,e){try{const i=(await k2()).transaction(zc,"readwrite");await i.objectStore(zc).put(e,C2(n)),await i.done}catch(r){if(r instanceof fi)Ss.warn(r.message);else{const i=vo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ss.warn(i.message)}}}function C2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=1024,F4=30;class U4{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new $4(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>F4){const a=B4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ss.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Xw(),{heartbeatsToSend:i,unsentEntries:s}=z4(this._heartbeatsCache.heartbeats),o=fd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Ss.warn(r),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function z4(n,e=V4){const r=[];let i=n.slice();for(const s of n){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Jw(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Jw(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class $4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x2()?b2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await L4(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jw(n){return fd(JSON.stringify({version:2,heartbeats:n})).length}function B4(n){if(n.length===0)return-1;let e=0,r=n[0].date;for(let i=1;i<n.length;i++)n[i].date<r&&(r=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){zi(new hi("platform-logger",e=>new n4(e),"PRIVATE")),zi(new hi("heartbeat",e=>new U4(e),"PRIVATE")),Or(ny,Gw,n),Or(ny,Gw,"esm2020"),Or("fire-js","")}q4("");var H4="firebase",K4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(H4,K4,"app");function A2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W4=A2,N2=new La("auth","Firebase",A2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new dp("@firebase/auth");function G4(n,...e){pd.logLevel<=nt.WARN&&pd.warn(`Auth (${lu}): ${n}`,...e)}function Sf(n,...e){pd.logLevel<=nt.ERROR&&pd.error(`Auth (${lu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(n,...e){throw Yv(n,...e)}function li(n,...e){return Yv(n,...e)}function Qv(n,e,r){const i={...W4(),[e]:r};return new La("auth","Firebase",i).create(e,{appName:n.name})}function va(n){return Qv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q4(n,e,r){const i=r;if(!(e instanceof i))throw i.name!==e.constructor.name&&$i(n,"argument-error"),Qv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yv(n,...e){if(typeof n!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(r,...i)}return N2.create(n,...e)}function Be(n,e,...r){if(!n)throw Yv(e,...r)}function ms(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sf(e),new Error(e)}function ks(n,e){n||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Y4(){return Zw()==="http:"||Zw()==="https:"}function Zw(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y4()||w2()||"connection"in navigator)?navigator.onLine:!0}function J4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,r){this.shortDelay=e,this.longDelay=r,ks(r>e,"Short delay should be less than long delay!"),this.isMobile=wO()||EO()}get(){return X4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n,e){ks(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tj=new uh(3e4,6e4);function Jv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function uu(n,e,r,i,s={}){return R2(n,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=lh({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:u,...o};return bO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&au(n.emulatorConfig.host)&&(c.credentials="include"),P2.fetch()(await O2(n,n.config.apiHost,r,l),c)})}async function R2(n,e,r){n._canInitEmulator=!1;const i={...Z4,...e};try{const s=new rj(n),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Zh(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zh(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Zh(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw Zh(n,"user-disabled",a);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Qv(n,f,c);$i(n,f)}}catch(s){if(s instanceof fi)throw s;$i(n,"network-request-failed",{message:String(s)})}}async function nj(n,e,r,i,s={}){const o=await uu(n,e,r,i,s);return"mfaPendingCredential"in o&&$i(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function O2(n,e,r,i){const s=`${e}${r}?${i}`,o=n,a=o.config.emulator?Xv(n.config,s):`${n.config.apiScheme}://${s}`;return ej.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class rj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(li(this.auth,"network-request-failed")),tj.get())})}}function Zh(n,e,r){const i={appName:n.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=li(n,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(n,e){return uu(n,"POST","/v1/accounts:delete",e)}async function md(n,e){return uu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sj(n,e=!1){const r=Jt(n),i=await r.getIdToken(e),s=Zv(i);Be(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:pc(Pm(s.auth_time)),issuedAtTime:pc(Pm(s.iat)),expirationTime:pc(Pm(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Pm(n){return Number(n)*1e3}function Zv(n){const[e,r,i]=n.split(".");if(e===void 0||r===void 0||i===void 0)return Sf("JWT malformed, contained fewer than 3 sections"),null;try{const s=p2(r);return s?JSON.parse(s):(Sf("Failed to decode base64 JWT payload"),null)}catch(s){return Sf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ex(n){const e=Zv(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(n,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof fi&&oj(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function oj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gd(n){var d;const e=n.auth,r=await n.getIdToken(),i=await $c(n,md(e,{idToken:r}));Be(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(d=s.providerUserInfo)!=null&&d.length?j2(s.providerUserInfo):[],a=uj(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new oy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,f)}async function lj(n){const e=Jt(n);await gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uj(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function j2(n){return n.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(n,e){const r=await R2(n,{},async()=>{const i=lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await O2(n,s,"/v1/token",`key=${o}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return n.emulatorConfig&&au(n.emulatorConfig.host)&&(u.credentials="include"),P2.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function hj(n,e){return uu(n,"POST","/v2/accounts:revokeToken",Jv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const r=ex(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await cj(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new Al;return i&&(Be(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(Be(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(Be(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Al,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:r,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new aj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await $c(this,this.stsTokenManager.getToken(this.auth,e));return Be(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return sj(this,e)}reload(){return lj(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await gd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(va(this.auth));const e=await this.getIdToken();return await $c(this,ij(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const i=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,c=r.createdAt??void 0,f=r.lastLoginAt??void 0,{uid:d,emailVerified:g,isAnonymous:_,providerData:x,stsTokenManager:I}=r;Be(d&&I,e,"internal-error");const P=Al.fromJSON(this.name,I);Be(typeof d=="string",e,"internal-error"),Ws(i,e.name),Ws(s,e.name),Be(typeof g=="boolean",e,"internal-error"),Be(typeof _=="boolean",e,"internal-error"),Ws(o,e.name),Ws(a,e.name),Ws(l,e.name),Ws(u,e.name),Ws(c,e.name),Ws(f,e.name);const b=new ii({uid:d,auth:e,email:s,emailVerified:g,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:P,createdAt:c,lastLoginAt:f});return x&&Array.isArray(x)&&(b.providerData=x.map(T=>({...T}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,r,i=!1){const s=new Al;s.updateFromServerResponse(r);const o=new ii({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await gd(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];Be(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?j2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Al;l.updateFromIdToken(i);const u=new ii({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new oy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;function gs(n){ks(n instanceof Function,"Expected a class definition");let e=tx.get(n);return e?(ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}D2.type="NONE";const nx=D2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n,e,r){return`firebase:${n}:${e}:${r}`}class Nl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=kf(this.userKey,s.apiKey,o),this.fullPersistenceKey=kf("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await md(this.auth,{idToken:e}).catch(()=>{});return r?ii._fromGetAccountInfoResponse(this.auth,r,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Nl(gs(nx),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||gs(nx);const a=kf(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const f=await c._get(a);if(f){let d;if(typeof f=="string"){const g=await md(e,{idToken:f}).catch(()=>{});if(!g)break;d=await ii._fromGetAccountInfoResponse(e,g,f)}else d=ii._fromJSON(e,f);c!==o&&(l=d),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Nl(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Nl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z2(e))return"Blackberry";if($2(e))return"Webos";if(L2(e))return"Safari";if((e.includes("chrome/")||V2(e))&&!e.includes("edge/"))return"Chrome";if(U2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function M2(n=On()){return/firefox\//i.test(n)}function L2(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V2(n=On()){return/crios\//i.test(n)}function F2(n=On()){return/iemobile/i.test(n)}function U2(n=On()){return/android/i.test(n)}function z2(n=On()){return/blackberry/i.test(n)}function $2(n=On()){return/webos/i.test(n)}function e0(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fj(n=On()){var e;return e0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function dj(){return TO()&&document.documentMode===10}function B2(n=On()){return e0(n)||U2(n)||$2(n)||z2(n)||/windows phone/i.test(n)||F2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n,e=[]){let r;switch(n){case"Browser":r=rx(On());break;case"Worker":r=`${rx(On())}-${n}`;break;default:r=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${lu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(n,e={}){return uu(n,"GET","/v2/passwordPolicy",Jv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=6;class yj{constructor(e){var i;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??gj,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ix(this),this.idTokenSubscription=new ix(this),this.beforeStateQueue=new pj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=gs(r)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await md(this,{idToken:e}),i=await ii._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ni(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await gd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(va(this));const r=e?Jt(e):null;return r&&Be(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mj(this),r=new yj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new La("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await hj(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&gs(e)||this._popupRedirectResolver;Be(r,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[gs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var r;if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&G4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pp(n){return Jt(n)}class ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=PO(r=>this.observer=r)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _j(n){t0=n}function wj(n){return t0.loadJS(n)}function xj(){return t0.gapiScript}function bj(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(n,e){const r=Va(n,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(Eo(o,e??{}))return s;$i(s,"already-initialized")}return r.initialize({options:e})}function Tj(n,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(gs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Ij(n,e,r){const i=pp(n);Be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=H2(e),{host:a,port:l}=Sj(e),u=l===null?"":`:${l}`,c={url:`${o}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Be(Eo(c,i.config.emulator)&&Eo(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,au(a)?(v2(`${o}//${a}${u}`),_2("Auth",!0)):kj()}function H2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Sj(n){const e=H2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:sx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:sx(a)}}}function sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kj(){function n(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,r){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n,e){return nj(n,"POST","/v1/accounts:signInWithIdp",Jv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="http://localhost";class Ca extends K2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):$i("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=r;if(!i||!s)return null;const a=new Ca(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Pl(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Pl(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Pl(e,r)}buildRequest(){const e={requestUri:Cj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=lh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends n0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends ch{constructor(){super("facebook.com")}static credential(e){return Ca._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ca._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return fs.credential(r,i)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends ch{constructor(){super("github.com")}static credential(e){return Ca._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends ch{constructor(){super("twitter.com")}static credential(e,r){return Ca._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return ro.credential(r,i)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await ii._fromIdTokenResponse(e,i,s),a=ox(i);return new Kl({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=ox(i);return new Kl({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function ox(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends fi{constructor(e,r,i,s){super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new yd(e,r,i,s)}}function W2(n,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(n,o,e,i):o})}async function Aj(n,e,r=!1){const i=await $c(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Kl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(n,e,r=!1){const{auth:i}=n;if(ni(i.app))return Promise.reject(va(i));const s="reauthenticate";try{const o=await $c(n,W2(i,s,e,n),r);Be(o.idToken,i,"internal-error");const a=Zv(o.idToken);Be(a,i,"internal-error");const{sub:l}=a;return Be(n.uid===l,i,"user-mismatch"),Kl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$i(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(n,e,r=!1){if(ni(n.app))return Promise.reject(va(n));const i="signIn",s=await W2(n,i,e),o=await Kl._fromIdTokenResponse(n,i,s);return r||await n._updateCurrentUser(o.user),o}function Rj(n,e,r,i){return Jt(n).onIdTokenChanged(e,r,i)}function Oj(n,e,r){return Jt(n).beforeAuthStateChanged(e,r)}function jj(n,e,r,i){return Jt(n).onAuthStateChanged(e,r,i)}function Dj(n){return Jt(n).signOut()}const vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(vd,"1"),this.storage.removeItem(vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=1e3,Lj=10;class Q2 extends G2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);dj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Lj):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},Mj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q2.type="LOCAL";const Vj=Q2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2 extends G2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Y2.type="SESSION";const X2=Y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new mp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await Fj(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=r0("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(d){const g=d;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(g.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return window}function zj(n){Mi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof Mi().WorkerGlobalScope<"u"&&typeof Mi().importScripts=="function"}async function $j(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Bj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function qj(){return J2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebaseLocalStorageDb",Hj=1,_d="firebaseLocalStorage",eI="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function gp(n,e){return n.transaction([_d],e?"readwrite":"readonly").objectStore(_d)}function Kj(){const n=indexedDB.deleteDatabase(Z2);return new hh(n).toPromise()}function ay(){const n=indexedDB.open(Z2,Hj);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_d,{keyPath:eI})}catch(s){r(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(_d)?e(i):(i.close(),await Kj(),e(await ay()))})})}async function ax(n,e,r){const i=gp(n,!0).put({[eI]:e,value:r});return new hh(i).toPromise()}async function Wj(n,e){const r=gp(n,!1).get(e),i=await new hh(r).toPromise();return i===void 0?null:i.value}function lx(n,e){const r=gp(n,!0).delete(e);return new hh(r).toPromise()}const Gj=800,Qj=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>Qj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mp._getInstance(qj()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await $j(),!this.activeServiceWorker)return;this.sender=new Uj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Bj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await ax(e,vd,"1"),await lx(e,vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>ax(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>Wj(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=gp(s,!1).getAll();return new hh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const Yj=tI;new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e){return e?gs(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends K2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Pl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Xj(n){return Pj(n.auth,new i0(n),n.bypassAuthState)}function Jj(n){const{auth:e,user:r}=n;return Be(r,e,"internal-error"),Nj(r,new i0(n),n.bypassAuthState)}async function Zj(n){const{auth:e,user:r}=n;return Be(r,e,"internal-error"),Aj(r,new i0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xj;case"linkViaPopup":case"linkViaRedirect":return Zj;case"reauthViaPopup":case"reauthViaRedirect":return Jj;default:$i(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new uh(2e3,1e4);async function tD(n,e,r){if(ni(n.app))return Promise.reject(li(n,"operation-not-supported-in-this-environment"));const i=pp(n);Q4(n,e,n0);const s=nI(i,r);return new ha(i,"signInViaPopup",e,s).executeNotNull()}class ha extends rI{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=r0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eD.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="pendingRedirect",Cf=new Map;class rD extends rI{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Cf.get(this.auth._key());if(!e){try{const i=await iD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Cf.set(this.auth._key(),e)}return this.bypassAuthState||Cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iD(n,e){const r=aD(e),i=oD(n);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function sD(n,e){Cf.set(n._key(),e)}function oD(n){return gs(n._redirectPersistence)}function aD(n){return kf(nD,n.config.apiKey,n.name)}async function lD(n,e,r=!1){if(ni(n.app))return Promise.reject(va(n));const i=pp(n),s=nI(i,e),a=await new rD(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=10*60*1e3;class cD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!iI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(li(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(n,e={}){return uu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pD=/^https?/;async function mD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fD(n);for(const r of e)try{if(gD(r))return}catch{}$i(n,"unauthorized-domain")}function gD(n){const e=sy(),{protocol:r,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!pD.test(r))return!1;if(dD.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new uh(3e4,6e4);function cx(){const n=Mi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function vD(n){return new Promise((e,r)=>{var s,o,a;function i(){cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cx(),r(li(n,"network-request-failed"))},timeout:yD.get()})}if((o=(s=Mi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Mi().gapi)!=null&&a.load)i();else{const l=bj("iframefcb");return Mi()[l]=()=>{gapi.load?i():r(li(n,"network-request-failed"))},wj(`${xj()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Af=null,e})}let Af=null;function _D(n){return Af=Af||vD(n),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new uh(5e3,15e3),xD="__/auth/iframe",bD="emulator/auth/iframe",ED={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ID(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const r=e.emulator?Xv(e,bD):`https://${n.config.authDomain}/${xD}`,i={apiKey:e.apiKey,appName:n.name,v:lu},s=TD.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${lh(i).slice(1)}`}async function SD(n){const e=await _D(n),r=Mi().gapi;return Be(r,n,"internal-error"),e.open({where:document.body,url:ID(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ED,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=li(n,"network-request-failed"),l=Mi().setTimeout(()=>{o(a)},wD.get());function u(){Mi().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CD=500,AD=600,ND="_blank",PD="http://localhost";class hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RD(n,e,r,i=CD,s=AD){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...kD,width:i.toString(),height:s.toString(),top:o,left:a},c=On().toLowerCase();r&&(l=V2(c)?ND:r),M2(c)&&(e=e||PD,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,x])=>`${g}${_}=${x},`,"");if(fj(c)&&l!=="_self")return OD(e||"",l),new hx(null);const d=window.open(e||"",l,f);Be(d,n,"popup-blocked");try{d.focus()}catch{}return new hx(d)}function OD(n,e){const r=document.createElement("a");r.href=n,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="__/auth/handler",DD="emulator/auth/handler",MD=encodeURIComponent("fac");async function fx(n,e,r,i,s,o){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:i,v:lu,eventId:s};if(e instanceof n0){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",NO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof ch){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await n._getAppCheckToken(),c=u?`#${MD}=${encodeURIComponent(u)}`:"";return`${LD(n)}?${lh(l).slice(1)}${c}`}function LD({config:n}){return n.emulator?Xv(n,DD):`https://${n.authDomain}/${jD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="webStorageSupport";class VD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X2,this._completeRedirectFn=lD,this._overrideRedirectResult=sD}async _openPopup(e,r,i,s){var a;ks((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await fx(e,r,i,sy(),s);return RD(e,o,r0())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await fx(e,r,i,sy(),s);return zj(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(ks(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await SD(e),i=new cD(e);return r.register("authEvent",s=>(Be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Rm,{type:Rm},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[Rm];o!==void 0&&r(!!o),$i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=mD(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return B2()||L2()||e0()}}const FD=VD;var dx="@firebase/auth",px="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $D(n){zi(new hi("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Be(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q2(n)},c=new vj(i,s,o,u);return Tj(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),zi(new hi("auth-internal",e=>{const r=pp(e.getProvider("auth").getImmediate());return(i=>new UD(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(dx,px,zD(n)),Or(dx,px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=5*60,qD=y2("authIdTokenMaxAge")||BD;let mx=null;const HD=n=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>qD)return;const s=r==null?void 0:r.token;mx!==s&&(mx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KD(n=Gv()){const e=Va(n,"auth");if(e.isInitialized())return e.getImmediate();const r=Ej(n,{popupRedirectResolver:FD,persistence:[Yj,Vj,X2]}),i=y2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=HD(o.toString());Oj(r,a,()=>a(r.currentUser)),Rj(r,l=>a(l))}}const s=m2("auth");return s&&Ij(r,`http://${s}`),r}function WD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}_j({loadJS(n){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=li("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",WD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$D("Browser");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _o,sI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function D(){}D.prototype=C.prototype,N.F=C.prototype,N.prototype=new D,N.prototype.constructor=N,N.D=function(L,V,U){for(var R=Array(arguments.length-2),B=2;B<arguments.length;B++)R[B-2]=arguments[B];return C.prototype[V].apply(L,R)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,C,D){D||(D=0);const L=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)L[V]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(V=0;V<16;++V)L[V]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=N.g[0],D=N.g[1],V=N.g[2];let U=N.g[3],R;R=C+(U^D&(V^U))+L[0]+3614090360&4294967295,C=D+(R<<7&4294967295|R>>>25),R=U+(V^C&(D^V))+L[1]+3905402710&4294967295,U=C+(R<<12&4294967295|R>>>20),R=V+(D^U&(C^D))+L[2]+606105819&4294967295,V=U+(R<<17&4294967295|R>>>15),R=D+(C^V&(U^C))+L[3]+3250441966&4294967295,D=V+(R<<22&4294967295|R>>>10),R=C+(U^D&(V^U))+L[4]+4118548399&4294967295,C=D+(R<<7&4294967295|R>>>25),R=U+(V^C&(D^V))+L[5]+1200080426&4294967295,U=C+(R<<12&4294967295|R>>>20),R=V+(D^U&(C^D))+L[6]+2821735955&4294967295,V=U+(R<<17&4294967295|R>>>15),R=D+(C^V&(U^C))+L[7]+4249261313&4294967295,D=V+(R<<22&4294967295|R>>>10),R=C+(U^D&(V^U))+L[8]+1770035416&4294967295,C=D+(R<<7&4294967295|R>>>25),R=U+(V^C&(D^V))+L[9]+2336552879&4294967295,U=C+(R<<12&4294967295|R>>>20),R=V+(D^U&(C^D))+L[10]+4294925233&4294967295,V=U+(R<<17&4294967295|R>>>15),R=D+(C^V&(U^C))+L[11]+2304563134&4294967295,D=V+(R<<22&4294967295|R>>>10),R=C+(U^D&(V^U))+L[12]+1804603682&4294967295,C=D+(R<<7&4294967295|R>>>25),R=U+(V^C&(D^V))+L[13]+4254626195&4294967295,U=C+(R<<12&4294967295|R>>>20),R=V+(D^U&(C^D))+L[14]+2792965006&4294967295,V=U+(R<<17&4294967295|R>>>15),R=D+(C^V&(U^C))+L[15]+1236535329&4294967295,D=V+(R<<22&4294967295|R>>>10),R=C+(V^U&(D^V))+L[1]+4129170786&4294967295,C=D+(R<<5&4294967295|R>>>27),R=U+(D^V&(C^D))+L[6]+3225465664&4294967295,U=C+(R<<9&4294967295|R>>>23),R=V+(C^D&(U^C))+L[11]+643717713&4294967295,V=U+(R<<14&4294967295|R>>>18),R=D+(U^C&(V^U))+L[0]+3921069994&4294967295,D=V+(R<<20&4294967295|R>>>12),R=C+(V^U&(D^V))+L[5]+3593408605&4294967295,C=D+(R<<5&4294967295|R>>>27),R=U+(D^V&(C^D))+L[10]+38016083&4294967295,U=C+(R<<9&4294967295|R>>>23),R=V+(C^D&(U^C))+L[15]+3634488961&4294967295,V=U+(R<<14&4294967295|R>>>18),R=D+(U^C&(V^U))+L[4]+3889429448&4294967295,D=V+(R<<20&4294967295|R>>>12),R=C+(V^U&(D^V))+L[9]+568446438&4294967295,C=D+(R<<5&4294967295|R>>>27),R=U+(D^V&(C^D))+L[14]+3275163606&4294967295,U=C+(R<<9&4294967295|R>>>23),R=V+(C^D&(U^C))+L[3]+4107603335&4294967295,V=U+(R<<14&4294967295|R>>>18),R=D+(U^C&(V^U))+L[8]+1163531501&4294967295,D=V+(R<<20&4294967295|R>>>12),R=C+(V^U&(D^V))+L[13]+2850285829&4294967295,C=D+(R<<5&4294967295|R>>>27),R=U+(D^V&(C^D))+L[2]+4243563512&4294967295,U=C+(R<<9&4294967295|R>>>23),R=V+(C^D&(U^C))+L[7]+1735328473&4294967295,V=U+(R<<14&4294967295|R>>>18),R=D+(U^C&(V^U))+L[12]+2368359562&4294967295,D=V+(R<<20&4294967295|R>>>12),R=C+(D^V^U)+L[5]+4294588738&4294967295,C=D+(R<<4&4294967295|R>>>28),R=U+(C^D^V)+L[8]+2272392833&4294967295,U=C+(R<<11&4294967295|R>>>21),R=V+(U^C^D)+L[11]+1839030562&4294967295,V=U+(R<<16&4294967295|R>>>16),R=D+(V^U^C)+L[14]+4259657740&4294967295,D=V+(R<<23&4294967295|R>>>9),R=C+(D^V^U)+L[1]+2763975236&4294967295,C=D+(R<<4&4294967295|R>>>28),R=U+(C^D^V)+L[4]+1272893353&4294967295,U=C+(R<<11&4294967295|R>>>21),R=V+(U^C^D)+L[7]+4139469664&4294967295,V=U+(R<<16&4294967295|R>>>16),R=D+(V^U^C)+L[10]+3200236656&4294967295,D=V+(R<<23&4294967295|R>>>9),R=C+(D^V^U)+L[13]+681279174&4294967295,C=D+(R<<4&4294967295|R>>>28),R=U+(C^D^V)+L[0]+3936430074&4294967295,U=C+(R<<11&4294967295|R>>>21),R=V+(U^C^D)+L[3]+3572445317&4294967295,V=U+(R<<16&4294967295|R>>>16),R=D+(V^U^C)+L[6]+76029189&4294967295,D=V+(R<<23&4294967295|R>>>9),R=C+(D^V^U)+L[9]+3654602809&4294967295,C=D+(R<<4&4294967295|R>>>28),R=U+(C^D^V)+L[12]+3873151461&4294967295,U=C+(R<<11&4294967295|R>>>21),R=V+(U^C^D)+L[15]+530742520&4294967295,V=U+(R<<16&4294967295|R>>>16),R=D+(V^U^C)+L[2]+3299628645&4294967295,D=V+(R<<23&4294967295|R>>>9),R=C+(V^(D|~U))+L[0]+4096336452&4294967295,C=D+(R<<6&4294967295|R>>>26),R=U+(D^(C|~V))+L[7]+1126891415&4294967295,U=C+(R<<10&4294967295|R>>>22),R=V+(C^(U|~D))+L[14]+2878612391&4294967295,V=U+(R<<15&4294967295|R>>>17),R=D+(U^(V|~C))+L[5]+4237533241&4294967295,D=V+(R<<21&4294967295|R>>>11),R=C+(V^(D|~U))+L[12]+1700485571&4294967295,C=D+(R<<6&4294967295|R>>>26),R=U+(D^(C|~V))+L[3]+2399980690&4294967295,U=C+(R<<10&4294967295|R>>>22),R=V+(C^(U|~D))+L[10]+4293915773&4294967295,V=U+(R<<15&4294967295|R>>>17),R=D+(U^(V|~C))+L[1]+2240044497&4294967295,D=V+(R<<21&4294967295|R>>>11),R=C+(V^(D|~U))+L[8]+1873313359&4294967295,C=D+(R<<6&4294967295|R>>>26),R=U+(D^(C|~V))+L[15]+4264355552&4294967295,U=C+(R<<10&4294967295|R>>>22),R=V+(C^(U|~D))+L[6]+2734768916&4294967295,V=U+(R<<15&4294967295|R>>>17),R=D+(U^(V|~C))+L[13]+1309151649&4294967295,D=V+(R<<21&4294967295|R>>>11),R=C+(V^(D|~U))+L[4]+4149444226&4294967295,C=D+(R<<6&4294967295|R>>>26),R=U+(D^(C|~V))+L[11]+3174756917&4294967295,U=C+(R<<10&4294967295|R>>>22),R=V+(C^(U|~D))+L[2]+718787259&4294967295,V=U+(R<<15&4294967295|R>>>17),R=D+(U^(V|~C))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.v=function(N,C){C===void 0&&(C=N.length);const D=C-this.blockSize,L=this.C;let V=this.h,U=0;for(;U<C;){if(V==0)for(;U<=D;)s(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<C;)if(L[V++]=N.charCodeAt(U++),V==this.blockSize){s(this,L),V=0;break}}else for(;U<C;)if(L[V++]=N[U++],V==this.blockSize){s(this,L),V=0;break}}this.h=V,this.o+=C},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var D=N.length-8;D<N.length;++D)N[D]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,D=0;D<4;++D)for(let L=0;L<32;L+=8)N[C++]=this.g[D]>>>L&255;return N};function o(N,C){var D=l;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=C(N)}function a(N,C){this.h=C;const D=[];let L=!0;for(let V=N.length-1;V>=0;V--){const U=N[V]|0;L&&U==C||(D[V]=U,L=!1)}this.g=D}var l={};function u(N){return-128<=N&&N<128?o(N,function(C){return new a([C|0],C<0?-1:0)}):new a([N|0],N<0?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return d;if(N<0)return P(c(-N));const C=[];let D=1;for(let L=0;N>=D;L++)C[L]=N/D|0,D*=4294967296;return new a(C,0)}function f(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return P(f(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=c(Math.pow(C,8));let L=d;for(let U=0;U<N.length;U+=8){var V=Math.min(8,N.length-U);const R=parseInt(N.substring(U,U+V),C);V<8?(V=c(Math.pow(C,V)),L=L.j(V).add(c(R))):(L=L.j(D),L=L.add(c(R)))}return L}var d=u(0),g=u(1),_=u(16777216);n=a.prototype,n.m=function(){if(I(this))return-P(this).m();let N=0,C=1;for(let D=0;D<this.g.length;D++){const L=this.i(D);N+=(L>=0?L:4294967296+L)*C,C*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(I(this))return"-"+P(this).toString(N);const C=c(Math.pow(N,6));var D=this;let L="";for(;;){const V=O(D,C).g;D=b(D,V.j(C));let U=((D.g.length>0?D.g[0]:D.h)>>>0).toString(N);if(D=V,x(D))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function I(N){return N.h==-1}n.l=function(N){return N=b(this,N),I(N)?-1:x(N)?0:1};function P(N){const C=N.g.length,D=[];for(let L=0;L<C;L++)D[L]=~N.g[L];return new a(D,~N.h).add(g)}n.abs=function(){return I(this)?P(this):this},n.add=function(N){const C=Math.max(this.g.length,N.g.length),D=[];let L=0;for(let V=0;V<=C;V++){let U=L+(this.i(V)&65535)+(N.i(V)&65535),R=(U>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);L=R>>>16,U&=65535,R&=65535,D[V]=R<<16|U}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(N,C){return N.add(P(C))}n.j=function(N){if(x(this)||x(N))return d;if(I(this))return I(N)?P(this).j(P(N)):P(P(this).j(N));if(I(N))return P(this.j(P(N)));if(this.l(_)<0&&N.l(_)<0)return c(this.m()*N.m());const C=this.g.length+N.g.length,D=[];for(var L=0;L<2*C;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<N.g.length;V++){const U=this.i(L)>>>16,R=this.i(L)&65535,B=N.i(V)>>>16,ae=N.i(V)&65535;D[2*L+2*V]+=R*ae,T(D,2*L+2*V),D[2*L+2*V+1]+=U*ae,T(D,2*L+2*V+1),D[2*L+2*V+1]+=R*B,T(D,2*L+2*V+1),D[2*L+2*V+2]+=U*B,T(D,2*L+2*V+2)}for(N=0;N<C;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=C;N<2*C;N++)D[N]=0;return new a(D,0)};function T(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function A(N,C){this.g=N,this.h=C}function O(N,C){if(x(C))throw Error("division by zero");if(x(N))return new A(d,d);if(I(N))return C=O(P(N),C),new A(P(C.g),P(C.h));if(I(C))return C=O(N,P(C)),new A(P(C.g),C.h);if(N.g.length>30){if(I(N)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var D=g,L=C;L.l(N)<=0;)D=M(D),L=M(L);var V=z(D,1),U=z(L,1);for(L=z(L,2),D=z(D,2);!x(L);){var R=U.add(L);R.l(N)<=0&&(V=V.add(D),U=R),L=z(L,1),D=z(D,1)}return C=b(N,V.j(C)),new A(V,C)}for(V=d;N.l(C)>=0;){for(D=Math.max(1,Math.floor(N.m()/C.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=c(D),R=U.j(C);I(R)||R.l(N)>0;)D-=L,U=c(D),R=U.j(C);x(U)&&(U=g),V=V.add(U),N=b(N,R)}return new A(V,N)}n.B=function(N){return O(this,N).h},n.and=function(N){const C=Math.max(this.g.length,N.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)&N.i(L);return new a(D,this.h&N.h)},n.or=function(N){const C=Math.max(this.g.length,N.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)|N.i(L);return new a(D,this.h|N.h)},n.xor=function(N){const C=Math.max(this.g.length,N.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)^N.i(L);return new a(D,this.h^N.h)};function M(N){const C=N.g.length+1,D=[];for(let L=0;L<C;L++)D[L]=N.i(L)<<1|N.i(L-1)>>>31;return new a(D,N.h)}function z(N,C){const D=C>>5;C%=32;const L=N.g.length-D,V=[];for(let U=0;U<L;U++)V[U]=C>0?N.i(U+D)>>>C|N.i(U+D+1)<<32-C:N.i(U+D);return new a(V,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,_o=a}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,Yu,aI,Nf,ly,lI,uI,cI;(function(){var n,e=Object.defineProperty;function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var w=0;w<h.length;++w){var S=h[w];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=r(this);function s(h,w){if(w)e:{var S=i;h=h.split(".");for(var F=0;F<h.length-1;F++){var se=h[F];if(!(se in S))break e;S=S[se]}h=h[h.length-1],F=S[h],w=w(F),w!=F&&w!=null&&e(S,h,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(w){var S=[],F;for(F in w)Object.prototype.hasOwnProperty.call(w,F)&&S.push([F,w[F]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function u(h,w,S){return h.call.apply(h.bind,arguments)}function c(h,w,S){return c=u,c.apply(null,arguments)}function f(h,w){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),h.apply(this,F)}}function d(h,w){function S(){}S.prototype=w.prototype,h.Z=w.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(F,se,ue){for(var Te=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Te[Ke-2]=arguments[Ke];return w.prototype[se].apply(F,Te)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function _(h){const w=h.length;if(w>0){const S=Array(w);for(let F=0;F<w;F++)S[F]=h[F];return S}return[]}function x(h,w){for(let F=1;F<arguments.length;F++){const se=arguments[F];var S=typeof se;if(S=S!="object"?S:se?Array.isArray(se)?"array":S:"null",S=="array"||S=="object"&&typeof se.length=="number"){S=h.length||0;const ue=se.length||0;h.length=S+ue;for(let Te=0;Te<ue;Te++)h[S+Te]=se[Te]}else h.push(se)}}class I{constructor(w,S){this.i=w,this.j=S,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function P(h){a.setTimeout(()=>{throw h},0)}function b(){var h=N;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class T{constructor(){this.h=this.g=null}add(w,S){const F=A.get();F.set(w,S),this.h?this.h.next=F:this.g=F,this.h=F}}var A=new I(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(w,S){this.h=w,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let M,z=!1,N=new T,C=()=>{const h=Promise.resolve(void 0);M=()=>{h.then(D)}};function D(){for(var h;h=b();){try{h.h.call(h.g)}catch(S){P(S)}var w=A;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}z=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};a.addEventListener("test",S,w),a.removeEventListener("test",S,w)}catch{}return h}();function R(h){return/^[\s\xa0]*$/.test(h)}function B(h,w){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}d(B,V),B.prototype.init=function(h,w){const S=this.type=h.type,F=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(S=="mouseover"?w=h.fromElement:S=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),ie=0;function _e(h,w,S,F,se){this.listener=h,this.proxy=null,this.src=w,this.type=S,this.capture=!!F,this.ha=se,this.key=++ie,this.da=this.fa=!1}function ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function q(h,w,S){for(const F in h)w.call(S,h[F],F,h)}function K(h,w){for(const S in h)w.call(void 0,h[S],S,h)}function ne(h){const w={};for(const S in h)w[S]=h[S];return w}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,w){let S,F;for(let se=1;se<arguments.length;se++){F=arguments[se];for(S in F)h[S]=F[S];for(let ue=0;ue<de.length;ue++)S=de[ue],Object.prototype.hasOwnProperty.call(F,S)&&(h[S]=F[S])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,w,S,F,se){const ue=h.toString();h=this.g[ue],h||(h=this.g[ue]=[],this.h++);const Te=Re(h,w,F,se);return Te>-1?(w=h[Te],S||(w.fa=!1)):(w=new _e(w,this.src,ue,!!F,se),w.fa=S,h.push(w)),w};function Me(h,w){const S=w.type;if(S in h.g){var F=h.g[S],se=Array.prototype.indexOf.call(F,w,void 0),ue;(ue=se>=0)&&Array.prototype.splice.call(F,se,1),ue&&(ce(w),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Re(h,w,S,F){for(let se=0;se<h.length;++se){const ue=h[se];if(!ue.da&&ue.listener==w&&ue.capture==!!S&&ue.ha==F)return se}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Qe={};function Pe(h,w,S,F,se){if(Array.isArray(w)){for(let ue=0;ue<w.length;ue++)Pe(h,w[ue],S,F,se);return null}return S=pu(S),h&&h[ae]?h.J(w,S,l(F)?!!F.capture:!1,se):an(h,w,S,!1,F,se)}function an(h,w,S,F,se,ue){if(!w)throw Error("Invalid event type");const Te=l(se)?!!se.capture:!!se;let Ke=xn(h);if(Ke||(h[Ue]=Ke=new me(h)),S=Ke.add(w,S,F,Te,ue),S.proxy)return S;if(F=ln(),S.proxy=F,F.src=h,F.listener=S,h.addEventListener)U||(se=Te),se===void 0&&(se=!1),h.addEventListener(w.toString(),F,se);else if(h.attachEvent)h.attachEvent(Xe(w.toString()),F);else if(h.addListener&&h.removeListener)h.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ln(){function h(S){return w.call(h.src,h.listener,S)}const w=yt;return h}function at(h,w,S,F,se){if(Array.isArray(w))for(var ue=0;ue<w.length;ue++)at(h,w[ue],S,F,se);else F=l(F)?!!F.capture:!!F,S=pu(S),h&&h[ae]?(h=h.i,ue=String(w).toString(),ue in h.g&&(w=h.g[ue],S=Re(w,S,F,se),S>-1&&(ce(w[S]),Array.prototype.splice.call(w,S,1),w.length==0&&(delete h.g[ue],h.h--)))):h&&(h=xn(h))&&(w=h.g[w.toString()],h=-1,w&&(h=Re(w,S,F,se)),(S=h>-1?w[h]:null)&&ke(S))}function ke(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[ae])Me(w.i,h);else{var S=h.type,F=h.proxy;w.removeEventListener?w.removeEventListener(S,F,h.capture):w.detachEvent?w.detachEvent(Xe(S),F):w.addListener&&w.removeListener&&w.removeListener(F),(S=xn(w))?(Me(S,h),S.h==0&&(S.src=null,w[Ue]=null)):ce(h)}}}function Xe(h){return h in Qe?Qe[h]:Qe[h]="on"+h}function yt(h,w){if(h.da)h=!0;else{w=new B(w,this);const S=h.listener,F=h.ha||h.src;h.fa&&ke(h),h=S.call(F,w)}return h}function xn(h){return h=h[Ue],h instanceof me?h:null}var Vo="__closure_events_fn_"+(Math.random()*1e9>>>0);function pu(h){return typeof h=="function"?h:(h[Vo]||(h[Vo]=function(w){return h.handleEvent(w)}),h[Vo])}function Ct(){L.call(this),this.i=new me(this),this.M=this,this.G=null}d(Ct,L),Ct.prototype[ae]=!0,Ct.prototype.removeEventListener=function(h,w,S,F){at(this,h,w,S,F)};function Rt(h,w){var S,F=h.G;if(F)for(S=[];F;F=F.G)S.push(F);if(h=h.M,F=w.type||w,typeof w=="string")w=new V(w,h);else if(w instanceof V)w.target=w.target||h;else{var se=w;w=new V(F,h),he(w,se)}se=!0;let ue,Te;if(S)for(Te=S.length-1;Te>=0;Te--)ue=w.g=S[Te],se=un(ue,F,!0,w)&&se;if(ue=w.g=h,se=un(ue,F,!0,w)&&se,se=un(ue,F,!1,w)&&se,S)for(Te=0;Te<S.length;Te++)ue=w.g=S[Te],se=un(ue,F,!1,w)&&se}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const S=h.g[w];for(let F=0;F<S.length;F++)ce(S[F]);delete h.g[w],h.h--}}this.G=null},Ct.prototype.J=function(h,w,S,F){return this.i.add(String(h),w,!1,S,F)},Ct.prototype.K=function(h,w,S,F){return this.i.add(String(h),w,!0,S,F)};function un(h,w,S,F){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let se=!0;for(let ue=0;ue<w.length;++ue){const Te=w[ue];if(Te&&!Te.da&&Te.capture==S){const Ke=Te.listener,Bt=Te.ha||Te.src;Te.fa&&Me(h.i,Te),se=Ke.call(Bt,F)!==!1&&se}}return se&&!F.defaultPrevented}function Fo(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=c(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(h,w||0)}function Lr(h){h.g=Fo(()=>{h.g=null,h.i&&(h.i=!1,Lr(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Rs extends L{constructor(w,S){super(),this.m=w,this.l=S,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Lr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(h){L.call(this),this.h=h,this.g={}}d(tr,L);var nr=[];function vr(h){q(h.g,function(w,S){this.g.hasOwnProperty(S)&&ke(w)},h),h.g={}}tr.prototype.N=function(){tr.Z.N.call(this),vr(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=a.JSON.stringify,mi=a.JSON.parse,Os=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Wi(){}function Ot(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gi(){V.call(this,"d")}d(Gi,V);function qn(){V.call(this,"c")}d(qn,V);var Oe={},gi=null;function Hn(){return gi=gi||new Ct}Oe.Ia="serverreachability";function Qi(h){V.call(this,Oe.Ia,h)}d(Qi,V);function Ie(h){const w=Hn();Rt(w,new Qi(w))}Oe.STAT_EVENT="statevent";function za(h,w){V.call(this,Oe.STAT_EVENT,h),this.stat=w}d(za,V);function cn(h){const w=Hn();Rt(w,new za(w,h))}Oe.Ja="timingevent";function $a(h,w){V.call(this,Oe.Ja,h),this.size=w}d($a,V);function js(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},w)}function Yi(){this.g=!0}Yi.prototype.ua=function(){this.g=!1};function Bp(h,w,S,F,se,ue){h.info(function(){if(h.g)if(ue){var Te="",Ke=ue.split("&");for(let ht=0;ht<Ke.length;ht++){var Bt=Ke[ht].split("=");if(Bt.length>1){const jt=Bt[0];Bt=Bt[1];const xr=jt.split("_");Te=xr.length>=2&&xr[1]=="type"?Te+(jt+"="+Bt+"&"):Te+(jt+"=redacted&")}}}else Te=null;else Te=ue;return"XMLHTTP REQ ("+F+") [attempt "+se+"]: "+w+`
`+S+`
`+Te})}function qp(h,w,S,F,se,ue,Te){h.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+se+"]: "+w+`
`+S+`
`+ue+" "+Te})}function rr(h,w,S,F){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+mu(h,S)+(F?" "+F:"")})}function Ds(h,w){h.info(function(){return"TIMEOUT: "+w})}Yi.prototype.info=function(){};function mu(h,w){if(!h.g)return w;if(!w)return null;try{const ue=JSON.parse(w);if(ue){for(h=0;h<ue.length;h++)if(Array.isArray(ue[h])){var S=ue[h];if(!(S.length<2)){var F=S[1];if(Array.isArray(F)&&!(F.length<1)){var se=F[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Te=1;Te<F.length;Te++)F[Te]=""}}}}return pi(ue)}catch{return w}}var Xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$t;function gu(){}d(gu,Wi),gu.prototype.g=function(){return new XMLHttpRequest},$t=new gu;function yi(h){return encodeURIComponent(String(h))}function Ba(h){var w=1;h=h.split(":");const S=[];for(;w>0&&h.length;)S.push(h.shift()),w--;return h.length&&S.push(h.join(":")),S}function ir(h,w,S,F){this.j=h,this.i=w,this.l=S,this.S=F||1,this.V=new tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bh}function bh(){this.i=null,this.g="",this.h=!1}var Vr={},vi={};function _r(h,w,S){h.M=1,h.A=Ho(or(w)),h.u=S,h.R=!0,Uo(h,null)}function Uo(h,w){h.F=Date.now(),wr(h),h.B=or(h.A);var S=h.B,F=h.S;Array.isArray(F)||(F=[String(F)]),kh(S.i,"t",F),h.C=0,S=h.j.L,h.h=new bh,h.g=Zt(h.j,S?w:null,!h.u),h.P>0&&(h.O=new Rs(c(h.Y,h,h.g),h.P)),w=h.V,S=h.g,F=h.ba;var se="readystatechange";Array.isArray(se)||(se&&(nr[0]=se.toString()),se=nr);for(let ue=0;ue<se.length;ue++){const Te=Pe(S,se[ue],F||w.handleEvent,!1,w.h||w);if(!Te)break;w.g[Te.key]=Te}w=h.J?ne(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),Ie(),Bp(h.i,h.v,h.B,h.l,h.S,h.u)}ir.prototype.ba=function(h){h=h.target;const w=this.O;w&&Ei(h)==3?w.j():this.Y(h)},ir.prototype.Y=function(h){try{if(h==this.g)e:{const Ke=Ei(this.g),Bt=this.g.ya(),ht=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||Fs(this.g)))){this.K||Ke!=4||Bt==7||(Bt==8||ht<=0?Ie(3):Ie(2)),zo(this);var w=this.g.ca();this.X=w;var S=Hp(this);if(this.o=w==200,qp(this.i,this.v,this.B,this.l,this.S,Ke,w),this.o){if(this.U&&!this.L){t:{if(this.g){var F,se=this.g;if((F=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(F)){var ue=F;break t}}ue=null}if(h=ue)rr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sr(this,h);else{this.o=!1,this.m=3,cn(12),jn(this),_t(this);break e}}if(this.R){h=!0;let jt;for(;!this.K&&this.C<S.length;)if(jt=Eh(this,S),jt==vi){Ke==4&&(this.m=4,cn(14),h=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Vr){this.m=4,cn(15),rr(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else rr(this.i,this.l,jt,null),sr(this,jt);if(Fr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||S.length!=0||this.h.h||(this.m=1,cn(16),h=!1),this.o=this.o&&h,!h)rr(this.i,this.l,S,"[Invalid Chunked Response]"),jn(this),_t(this);else if(S.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Bs(Te),Te.P=!0,cn(11))}}else rr(this.i,this.l,S,null),sr(this,S);Ke==4&&jn(this),this.o&&!this.K&&(Ke==4?ns(this.j,this):(this.o=!1,wr(this)))}else Kp(this.g),w==400&&S.indexOf("Unknown SID")>0?(this.m=3,cn(12)):(this.m=0,cn(13)),jn(this),_t(this)}}}catch{}finally{}};function Hp(h){if(!Fr(h))return h.g.la();const w=Fs(h.g);if(w==="")return"";let S="";const F=w.length,se=Ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return jn(h),_t(h),"";h.h.i=new a.TextDecoder}for(let ue=0;ue<F;ue++)h.h.h=!0,S+=h.h.i.decode(w[ue],{stream:!(se&&ue==F-1)});return w.length=0,h.h.g+=S,h.C=0,h.h.g}function Fr(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Eh(h,w){var S=h.C,F=w.indexOf(`
`,S);return F==-1?vi:(S=Number(w.substring(S,F)),isNaN(S)?Vr:(F+=1,F+S>w.length?vi:(w=w.slice(F,F+S),h.C=F+S,w)))}ir.prototype.cancel=function(){this.K=!0,jn(this)};function wr(h){h.T=Date.now()+h.H,yu(h,h.H)}function yu(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=js(c(h.aa,h),w)}function zo(h){h.D&&(a.clearTimeout(h.D),h.D=null)}ir.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ds(this.i,this.B),this.M!=2&&(Ie(),cn(17)),jn(this),this.m=2,_t(this)):yu(this,this.T-h)};function _t(h){h.j.I==0||h.K||ns(h.j,h)}function jn(h){zo(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,vr(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function sr(h,w){try{var S=h.j;if(S.I!=0&&(S.g==h||Bo(S.h,h))){if(!h.L&&Bo(S.h,h)&&S.I==3){try{var F=S.Ba.g.parse(w)}catch{F=null}if(Array.isArray(F)&&F.length==3){var se=F;if(se[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Ja(S),zs(S);else break e;$s(S),cn(18)}}else S.xa=se[1],0<S.xa-S.K&&se[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=js(c(S.Va,S),6e3));qa(S.h)<=1&&S.ta&&(S.ta=void 0)}else Wr(S,11)}else if((h.L||S.g==h)&&Ja(S),!R(w))for(se=S.Ba.g.parse(w),w=0;w<se.length;w++){let ht=se[w];const jt=ht[0];if(!(jt<=S.K))if(S.K=jt,ht=ht[1],S.I==2)if(ht[0]=="c"){S.M=ht[1],S.ba=ht[2];const xr=ht[3];xr!=null&&(S.ka=xr,S.j.info("VER="+S.ka));const Gr=ht[4];Gr!=null&&(S.za=Gr,S.j.info("SVER="+S.za));const br=ht[5];br!=null&&typeof br=="number"&&br>0&&(F=1.5*br,S.O=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const Ii=h.g;if(Ii){const Jo=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var ue=F.h;ue.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Ur(ue,ue.h),ue.h=null))}if(F.G){const Cu=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Cu&&(F.wa=Cu,mt(F.J,F.G,Cu))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),F=S;var Te=h;if(F.na=tl(F,F.L?F.ba:null,F.W),Te.L){vu(F.h,Te);var Ke=Te,Bt=F.O;Bt&&(Ke.H=Bt),Ke.D&&(zo(Ke),wr(Ke)),F.g=Te}else Yo(F);S.i.length>0&&Ya(S)}else ht[0]!="stop"&&ht[0]!="close"||Wr(S,7);else S.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Wr(S,7):Us(S):ht[0]!="noop"&&S.l&&S.l.qa(ht),S.A=0)}}Ie(4)}catch{}}var Th=class{constructor(h,w){this.g=h,this.map=w}};function Ji(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qa(h){return h.h?1:h.g?h.g.size:0}function Bo(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Ur(h,w){h.g?h.g.add(w):h.h=w}function vu(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Ji.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function qo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const S of h.g.values())w=w.concat(S.G);return w}return _(h.i)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(h,w){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const F=h[S].indexOf("=");let se,ue=null;F>=0?(se=h[S].substring(0,F),ue=h[S].substring(F+1)):se=h[S],w(se,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function zr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof zr?(this.l=h.l,_i(this,h.j),this.o=h.o,this.g=h.g,$r(this,h.u),this.h=h.h,Ha(this,Ch(h.i)),this.m=h.m):h&&(w=String(h).match(_u))?(this.l=!1,_i(this,w[1]||"",!0),this.o=ct(w[2]||""),this.g=ct(w[3]||"",!0),$r(this,w[4]),this.h=ct(w[5]||"",!0),Ha(this,w[6]||"",!0),this.m=ct(w[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}zr.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(Br(w,Zi,!0),":");var S=this.g;return(S||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Br(w,Zi,!0),"@"),h.push(yi(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Br(S,S.charAt(0)=="/"?xu:wu,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Br(S,Ih)),h.join("")},zr.prototype.resolve=function(h){const w=or(this);let S=!!h.j;S?_i(w,h.j):S=!!h.o,S?w.o=h.o:S=!!h.g,S?w.g=h.g:S=h.u!=null;var F=h.h;if(S)$r(w,h.u);else if(S=!!h.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var se=w.h.lastIndexOf("/");se!=-1&&(F=w.h.slice(0,se+1)+F)}if(se=F,se==".."||se==".")F="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){F=se.lastIndexOf("/",0)==0,se=se.split("/");const ue=[];for(let Te=0;Te<se.length;){const Ke=se[Te++];Ke=="."?F&&Te==se.length&&ue.push(""):Ke==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),F&&Te==se.length&&ue.push("")):(ue.push(Ke),F=!0)}F=ue.join("/")}else F=se}return S?w.h=F:S=h.i.toString()!=="",S?Ha(w,Ch(h.i)):S=!!h.m,S&&(w.m=h.m),w};function or(h){return new zr(h)}function _i(h,w,S){h.j=S?ct(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function $r(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function Ha(h,w,S){w instanceof wi?(h.i=w,Ms(h.i,h.l)):(S||(w=Br(w,Ka)),h.i=new wi(w,h.l))}function mt(h,w,S){h.i.set(w,S)}function Ho(h){return mt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ct(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Br(h,w,S){return typeof h=="string"?(h=encodeURI(h).replace(w,Ko),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ko(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Zi=/[#\/\?@]/g,wu=/[#\?:]/g,xu=/[#\?]/g,Ka=/[#\?@]/g,Ih=/#/g;function wi(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function xi(h){h.g||(h.g=new Map,h.h=0,h.i&&Ze(h.i,function(w,S){h.add(decodeURIComponent(w.replace(/\+/g," ")),S)}))}n=wi.prototype,n.add=function(h,w){xi(this),this.i=null,h=Gt(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(w),this.h+=1,this};function Sh(h,w){xi(h),w=Gt(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function st(h,w){return xi(h),w=Gt(h,w),h.g.has(w)}n.forEach=function(h,w){xi(this),this.g.forEach(function(S,F){S.forEach(function(se){h.call(w,se,F,this)},this)},this)};function bu(h,w){xi(h);let S=[];if(typeof w=="string")st(h,w)&&(S=S.concat(h.g.get(Gt(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)S=S.concat(h[w]);return S}n.set=function(h,w){return xi(this),this.i=null,h=Gt(this,h),st(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=bu(this,h),h.length>0?String(h[0]):w):w};function kh(h,w,S){Sh(h,w),S.length>0&&(h.i=null,h.g.set(Gt(h,w),_(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let F=0;F<w.length;F++){var S=w[F];const se=yi(S);S=bu(this,S);for(let ue=0;ue<S.length;ue++){let Te=se;S[ue]!==""&&(Te+="="+yi(S[ue])),h.push(Te)}}return this.i=h.join("&")};function Ch(h){const w=new wi;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Gt(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function Ms(h,w){w&&!h.j&&(xi(h),h.i=null,h.g.forEach(function(S,F){const se=F.toLowerCase();F!=se&&(Sh(this,F),kh(this,se,S))},h)),h.j=w}function Wa(h,w){const S=new Yi;if(a.Image){const F=new Image;F.onload=f(qr,S,"TestLoadImage: loaded",!0,w,F),F.onerror=f(qr,S,"TestLoadImage: error",!1,w,F),F.onabort=f(qr,S,"TestLoadImage: abort",!1,w,F),F.ontimeout=f(qr,S,"TestLoadImage: timeout",!1,w,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=h}else w(!1)}function bi(h,w){const S=new Yi,F=new AbortController,se=setTimeout(()=>{F.abort(),qr(S,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:F.signal}).then(ue=>{clearTimeout(se),ue.ok?qr(S,"TestPingServer: ok",!0,w):qr(S,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(se),qr(S,"TestPingServer: error",!1,w)})}function qr(h,w,S,F,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),F(S)}catch{}}function Ah(){this.g=new Os}function Ft(h){this.i=h.Sb||null,this.h=h.ab||!1}d(Ft,Wi),Ft.prototype.g=function(){return new Dn(this.i,this.h)};function Dn(h,w){Ct.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Dn,Ct),n=Dn.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,es(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ls(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ls(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Hr(this):es(this),this.readyState==3&&Ls(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Hr(this))},n.Na=function(h){this.g&&(this.response=h,Hr(this))},n.ga=function(){this.g&&Hr(this)};function Hr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,es(h)}n.setRequestHeader=function(h,w){this.A.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var S=w.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=w.next();return h.join(`\r
`)};function es(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Dn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Kr(h){let w="";return q(h,function(S,F){w+=F,w+=":",w+=S,w+=`\r
`}),w}function Eu(h,w,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=Kr(S),typeof h=="string"?S!=null&&yi(S):mt(h,w,S))}function lt(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(lt,Ct);var Tu=/^https?$/i,Nh=["POST","PUT"];n=lt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,w,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$t.g(),this.g.onreadystatechange=g(c(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(ue){Ga(this,ue);return}if(h=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var se in F)S.set(se,F[se]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ue of F.keys())S.set(ue,F.get(ue));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(ue=>ue.toLowerCase()=="content-type"),se=a.FormData&&h instanceof a.FormData,!(Array.prototype.indexOf.call(Nh,w,void 0)>=0)||F||se||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Te]of S)this.g.setRequestHeader(ue,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ue){Ga(this,ue)}};function Ga(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,Vs(h),Wo(h)}function Vs(h){h.A||(h.A=!0,Rt(h,"complete"),Rt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Rt(this,"complete"),Rt(this,"abort"),Wo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wo(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Qa(this):this.Xa())},n.Xa=function(){Qa(this)};function Qa(h){if(h.h&&typeof o<"u"){if(h.v&&Ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(Rt(h,"readystatechange"),Ei(h)==4){h.h=!1;try{const ue=h.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var S;if(!(S=w)){var F;if(F=ue===0){let Te=String(h.D).match(_u)[1]||null;!Te&&a.self&&a.self.location&&(Te=a.self.location.protocol.slice(0,-1)),F=!Tu.test(Te?Te.toLowerCase():"")}S=F}if(S)Rt(h,"complete"),Rt(h,"success");else{h.o=6;try{var se=Ei(h)>2?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.ca()+"]",Vs(h)}}finally{Wo(h)}}}}function Wo(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,w||Rt(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ei(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),mi(w)}};function Fs(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Kp(h){const w={};h=(h.g&&Ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<h.length;F++){if(R(h[F]))continue;var S=Ba(h[F]);const se=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ue=w[se]||[];w[se]=ue,ue.push(S)}K(w,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(h,w,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||w}function Qo(h){this.za=0,this.i=[],this.j=new Yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Go("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Go("baseRetryDelayMs",5e3,h),this.Za=Go("retryDelaySeedMs",1e4,h),this.Ta=Go("forwardChannelMaxRetries",2,h),this.va=Go("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ji(h&&h.concurrentRequestLimit),this.Ba=new Ah,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qo.prototype,n.ka=8,n.I=1,n.connect=function(h,w,S,F){cn(0),this.W=h,this.H=w||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.J=tl(this,null,this.W),Ya(this)};function Us(h){if(Ph(h),h.I==3){var w=h.V++,S=or(h.J);if(mt(S,"SID",h.M),mt(S,"RID",w),mt(S,"TYPE","terminate"),ts(h,S),w=new ir(h,h.j,w),w.M=2,w.A=Ho(or(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!S&&a.Image&&(new Image().src=w.A,S=!0),S||(w.g=Zt(w.j,null),w.g.ea(w.A)),w.F=Date.now(),wr(w)}el(h)}function zs(h){h.g&&(Bs(h),h.g.cancel(),h.g=null)}function Ph(h){zs(h),h.v&&(a.clearTimeout(h.v),h.v=null),Ja(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&a.clearTimeout(h.m),h.m=null)}function Ya(h){if(!$o(h.h)&&!h.m){h.m=!0;var w=h.Ea;M||C(),z||(M(),z=!0),N.add(w,h),h.D=0}}function Wp(h,w){return qa(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=js(c(h.Ea,h,w),Za(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const se=new ir(this,this.j,h);let ue=this.o;if(this.U&&(ue?(ue=ne(ue),he(ue,this.U)):ue=this.U),this.u!==null||this.R||(se.J=ue,ue=null),this.S)e:{for(var w=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(w+=F,w>4096){w=S;break e}if(w===4096||S===this.i.length-1){w=S+1;break e}}w=1e3}else w=1e3;w=Iu(this,se,w),S=or(this.J),mt(S,"RID",h),mt(S,"CVER",22),this.G&&mt(S,"X-HTTP-Session-Id",this.G),ts(this,S),ue&&(this.R?w="headers="+yi(Kr(ue))+"&"+w:this.u&&Eu(S,this.u,ue)),Ur(this.h,se),this.Ra&&mt(S,"TYPE","init"),this.S?(mt(S,"$req",w),mt(S,"SID","null"),se.U=!0,_r(se,S,null)):_r(se,S,w),this.I=2}}else this.I==3&&(h?Xa(this,h):this.i.length==0||$o(this.h)||Xa(this))};function Xa(h,w){var S;w?S=w.l:S=h.V++;const F=or(h.J);mt(F,"SID",h.M),mt(F,"RID",S),mt(F,"AID",h.K),ts(h,F),h.u&&h.o&&Eu(F,h.u,h.o),S=new ir(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Iu(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ur(h.h,S),_r(S,F,w)}function ts(h,w){h.H&&q(h.H,function(S,F){mt(w,F,S)}),h.l&&q({},function(S,F){mt(w,F,S)})}function Iu(h,w,S){S=Math.min(h.i.length,S);const F=h.l?c(h.l.Ka,h.l,h):null;e:{var se=h.i;let Ke=-1;for(;;){const Bt=["count="+S];Ke==-1?S>0?(Ke=se[0].g,Bt.push("ofs="+Ke)):Ke=0:Bt.push("ofs="+Ke);let ht=!0;for(let jt=0;jt<S;jt++){var ue=se[jt].g;const xr=se[jt].map;if(ue-=Ke,ue<0)Ke=Math.max(0,se[jt].g-100),ht=!1;else try{ue="req"+ue+"_"||"";try{var Te=xr instanceof Map?xr:Object.entries(xr);for(const[Gr,br]of Te){let Ii=br;l(br)&&(Ii=pi(br)),Bt.push(ue+Gr+"="+encodeURIComponent(Ii))}}catch(Gr){throw Bt.push(ue+"type="+encodeURIComponent("_badmap")),Gr}}catch{F&&F(xr)}}if(ht){Te=Bt.join("&");break e}}Te=void 0}return h=h.i.splice(0,S),w.G=h,Te}function Yo(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;M||C(),z||(M(),z=!0),N.add(w,h),h.A=0}}function $s(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=js(c(h.Da,h),Za(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=js(c(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,cn(10),zs(this),Su(this))};function Bs(h){h.B!=null&&(a.clearTimeout(h.B),h.B=null)}function Su(h){h.g=new ir(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=or(h.na);mt(w,"RID","rpc"),mt(w,"SID",h.M),mt(w,"AID",h.K),mt(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&mt(w,"TO",h.ia),mt(w,"TYPE","xmlhttp"),ts(h,w),h.u&&h.o&&Eu(w,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Ho(or(w)),S.u=null,S.R=!0,Uo(S,h)}n.Va=function(){this.C!=null&&(this.C=null,zs(this),$s(this),cn(19))};function Ja(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function ns(h,w){var S=null;if(h.g==w){Ja(h),Bs(h),h.g=null;var F=2}else if(Bo(h.h,w))S=w.G,vu(h.h,w),F=1;else return;if(h.I!=0){if(w.o)if(F==1){S=w.u?w.u.length:0,w=Date.now()-w.F;var se=h.D;F=Hn(),Rt(F,new $a(F,S)),Ya(h)}else Yo(h);else if(se=w.m,se==3||se==0&&w.X>0||!(F==1&&Wp(h,w)||F==2&&$s(h)))switch(S&&S.length>0&&(w=h.h,w.i=w.i.concat(S)),se){case 1:Wr(h,5);break;case 4:Wr(h,10);break;case 3:Wr(h,6);break;default:Wr(h,2)}}}function Za(h,w){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*w}function Wr(h,w){if(h.j.info("Error code "+w),w==2){var S=c(h.bb,h),F=h.Ua;const se=!F;F=new zr(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_i(F,"https"),Ho(F),se?Wa(F.toString(),S):bi(F.toString(),S)}else cn(2);h.I=0,h.l&&h.l.pa(w),el(h),Ph(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function el(h){if(h.I=0,h.ja=[],h.l){const w=qo(h.h);(w.length!=0||h.i.length!=0)&&(x(h.ja,w),x(h.ja,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.oa()}}function tl(h,w,S){var F=S instanceof zr?or(S):new zr(S);if(F.g!="")w&&(F.g=w+"."+F.g),$r(F,F.u);else{var se=a.location;F=se.protocol,w=w?w+"."+se.hostname:se.hostname,se=+se.port;const ue=new zr(null);F&&_i(ue,F),w&&(ue.g=w),se&&$r(ue,se),S&&(ue.h=S),F=ue}return S=h.G,w=h.wa,S&&w&&mt(F,S,w),mt(F,"VER",h.ka),ts(h,F),F}function Zt(h,w,S){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new lt(new Ft({ab:S})):new lt(h.ma),w.Fa(h.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qs(){}n=qs.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ti(){}Ti.prototype.g=function(h,w){return new bn(h,w)};function bn(h,w){Ct.call(this),this.g=new Qo(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!R(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!R(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new rs(this)}d(bn,Ct),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Us(this.g)},bn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=pi(h),h=S);w.i.push(new Th(w.Ya++,h)),w.I==3&&Ya(w)},bn.prototype.N=function(){this.g.l=null,delete this.j,Us(this.g),delete this.g,bn.Z.N.call(this)};function Xo(h){Gi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const S in w){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}d(Xo,Gi);function ku(){qn.call(this),this.status=1}d(ku,qn);function rs(h){this.g=h}d(rs,qs),rs.prototype.ra=function(){Rt(this.g,"a")},rs.prototype.qa=function(h){Rt(this.g,new Xo(h))},rs.prototype.pa=function(h){Rt(this.g,new ku)},rs.prototype.oa=function(){Rt(this.g,"b")},Ti.prototype.createWebChannel=Ti.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,cI=function(){return new Ti},uI=function(){return Hn()},lI=Oe,ly={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,Nf=Xi,vt.COMPLETE="complete",aI=vt,Ot.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Yu=Ot,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,oI=lt}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu="12.8.0";function GD(n){cu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new dp("@firebase/firestore");function ol(){return Aa.logLevel}function je(n,...e){if(Aa.logLevel<=nt.DEBUG){const r=e.map(s0);Aa.debug(`Firestore (${cu}): ${n}`,...r)}}function Cs(n,...e){if(Aa.logLevel<=nt.ERROR){const r=e.map(s0);Aa.error(`Firestore (${cu}): ${n}`,...r)}}function Wl(n,...e){if(Aa.logLevel<=nt.WARN){const r=e.map(s0);Aa.warn(`Firestore (${cu}): ${n}`,...r)}}function s0(n){if(typeof n=="string")return n;try{return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,hI(n,i,r)}function hI(n,e,r){let i=`FIRESTORE (${cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw Cs(i),new Error(i)}function dt(n,e,r,i){let s="Unexpected state";typeof r=="string"?s=r:i=r,n||hI(e,s,i)}function He(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends fi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(An.UNAUTHENTICATED))}shutdown(){}}class YD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class XD{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){dt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ws,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ws)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string",31837,{l:i}),new fI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class JD{constructor(e,r,i){this.P=e,this.T=r,this.I=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ZD{constructor(e,r,i){this.P=e,this.T=r,this.I=i}getToken(){return Promise.resolve(new JD(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eM{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){dt(this.o===void 0,3512);const i=o=>{o.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(dt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new yx(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<n;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tM(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function rt(n,e){return n<e?-1:n>e?1:0}function uy(n,e){const r=Math.min(n.length,e.length);for(let i=0;i<r;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return Om(s)===Om(o)?rt(s,o):Om(s)?1:-1}return rt(n.length,e.length)}const nM=55296,rM=57343;function Om(n){const e=n.charCodeAt(0);return e>=nM&&e<=rM}function Gl(n,e,r){return n.length===e.length&&n.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__name__";class Ni{constructor(e,r,i){r===void 0?r=0:r>e.length&&$e(637,{offset:r,range:e.length}),i===void 0?i=e.length-r:i>e.length-r&&$e(1746,{length:i,range:e.length-r}),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Ni.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return rt(e.length,r.length)}static compareSegments(e,r){const i=Ni.isNumericId(e),s=Ni.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Ni.extractNumericId(e).compare(Ni.extractNumericId(r)):uy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _o.fromString(e.substring(4,e.length-2))}}class It extends Ni{construct(e,r,i){return new It(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new It(r)}static emptyPath(){return new It([])}}const iM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Ni{construct(e,r,i){return new gn(e,r,i)}static isValidIdentifier(e){return iM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vx}static keyField(){return new gn([vx])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Ve(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ve(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ve(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new Ve(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(r)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(It.fromString(e))}static fromName(e){return new ze(It.fromString(e).popFirst(5))}static empty(){return new ze(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return It.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n,e,r){if(!r)throw new Ve(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sM(n,e,r,i){if(e===!0&&i===!0)throw new Ve(ve.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function _x(n){if(!ze.isDocumentKey(n))throw new Ve(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if(ze.isDocumentKey(n))throw new Ve(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function a0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$e(12329,{type:typeof n})}function To(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=a0(n);throw new Ve(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n,e){const r={typeString:n};return e&&(r.value=e),r}function fh(n,e){if(!pI(n))throw new Ve(ve.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){r=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){r=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${i}' field to equal '${o.value}'`;break}}if(r)throw new Ve(ve.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=-62135596800,bx=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*bx);return new St(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<xx)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fh(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Xt("string",St._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new St(0,0))}static max(){return new qe(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=-1;function oM(n,e){const r=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=qe.fromTimestamp(i===1e9?new St(r+1,0):new St(r,i));return new Io(s,ze.empty(),e)}function aM(n){return new Io(n.readTime,n.key,Bc)}class Io{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new Io(qe.min(),ze.empty(),Bc)}static max(){return new Io(qe.max(),ze.empty(),Bc)}}function lM(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0?r:(r=ze.comparator(n.documentKey,e.documentKey),r!==0?r:rt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==uM)throw n;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ye((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ye?r:ye.resolve(r)}catch(r){return ye.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ye.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ye.reject(r)}static resolve(e){return new ye((r,i)=>{r(e)})}static reject(e){return new ye((r,i)=>{i(e)})}static waitFor(e){return new ye((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=ye.resolve(!1);for(const i of e)r=r.next(s=>s?ye.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new ye((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(f=>{a[c]=f,++l,l===o&&i(a)},f=>s(f))}})}static doWhile(e,r){return new ye((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function hM(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function fu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-1;function vp(n){return n==null}function wd(n){return n===0&&1/n==-1/0}function fM(n){return typeof n=="number"&&Number.isInteger(n)&&!wd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="";function dM(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e=Ex(e)),e=pM(n.get(r),e);return Ex(e)}function pM(n,e){let r=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":r+="";break;case mI:r+="";break;default:r+=o}}return r}function Ex(n){return n+mI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){let e=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function Do(n,e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function gI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r){this.comparator=e,this.root=r||mn.EMPTY}insert(e,r){return new Vt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??mn.RED,this.left=s??mn.EMPTY,this.right=o??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new mn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return mn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,r,i,s,o){return this}insert(e,r,i){return new mn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new on(this.comparator);return r.data=e,r}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new hr([])}unionWith(e){let r=new on(gn.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new hr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yI("Invalid base64 string: "+o):o}}(e);return new _n(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new _n(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const mM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const r=mM.exec(n);if(dt(!!r,46558,{timestamp:n}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ht(n.seconds),nanos:Ht(n.nanos)}}function Ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ko(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="server_timestamp",_I="__type__",wI="__previous_value__",xI="__local_write_time__";function u0(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[_I])==null?void 0:i.stringValue)===vI}function _p(n){const e=n.mapValue.fields[wI];return u0(e)?_p(e):e}function qc(n){const e=So(n.mapValue.fields[xI].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,r,i,s,o,a,l,u,c,f,d){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=f,this.apiKey=d}}const xd="(default)";class Hc{constructor(e,r){this.projectId=e,this.database=r||xd}static empty(){return new Hc("","")}get isDefaultDatabase(){return this.database===xd}isEqual(e){return e instanceof Hc&&e.projectId===this.projectId&&e.database===this.database}}function yM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ve(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="__type__",vM="__max__",nf={mapValue:{}},EI="__vector__",bd="value";function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?u0(n)?4:wM(n)?9007199254740991:_M(n)?10:11:$e(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const r=Co(n);if(r!==Co(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qc(n).isEqual(qc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=So(s.timestampValue),l=So(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return ko(s.bytesValue).isEqual(ko(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Ht(s.geoPointValue.latitude)===Ht(o.geoPointValue.latitude)&&Ht(s.geoPointValue.longitude)===Ht(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Ht(s.integerValue)===Ht(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Ht(s.doubleValue),l=Ht(o.doubleValue);return a===l?wd(a)===wd(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Gl(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Tx(a)!==Tx(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Bi(a[u],l[u])))return!1;return!0}(n,e);default:return $e(52216,{left:n})}}function Kc(n,e){return(n.values||[]).find(r=>Bi(r,e))!==void 0}function Ql(n,e){if(n===e)return 0;const r=Co(n),i=Co(e);if(r!==i)return rt(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Ht(o.integerValue||o.doubleValue),u=Ht(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return Sx(n.timestampValue,e.timestampValue);case 4:return Sx(qc(n),qc(e));case 5:return uy(n.stringValue,e.stringValue);case 6:return function(o,a){const l=ko(o),u=ko(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=rt(l[c],u[c]);if(f!==0)return f}return rt(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const l=rt(Ht(o.latitude),Ht(a.latitude));return l!==0?l:rt(Ht(o.longitude),Ht(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var g,_,x,I;const l=o.fields||{},u=a.fields||{},c=(g=l[bd])==null?void 0:g.arrayValue,f=(_=u[bd])==null?void 0:_.arrayValue,d=rt(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((I=f==null?void 0:f.values)==null?void 0:I.length)||0);return d!==0?d:kx(c,f)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===nf.mapValue&&a===nf.mapValue)return 0;if(o===nf.mapValue)return 1;if(a===nf.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let d=0;d<u.length&&d<f.length;++d){const g=uy(u[d],f[d]);if(g!==0)return g;const _=Ql(l[u[d]],c[f[d]]);if(_!==0)return _}return rt(u.length,f.length)}(n.mapValue,e.mapValue);default:throw $e(23264,{he:r})}}function Sx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return rt(n,e);const r=So(n),i=So(e),s=rt(r.seconds,i.seconds);return s!==0?s:rt(r.nanos,i.nanos)}function kx(n,e){const r=n.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=Ql(r[s],i[s]);if(o)return o}return rt(r.length,i.length)}function Yl(n){return cy(n)}function cy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=So(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return ko(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return ze.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=cy(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${cy(r.fields[a])}`;return s+"}"}(n.mapValue):$e(61005,{value:n})}function Pf(n){switch(Co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_p(n);return e?16+Pf(e):16;case 5:return 2*n.stringValue.length;case 6:return ko(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Pf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Do(i.fields,(o,a)=>{s+=o.length+Pf(a)}),s}(n.mapValue);default:throw $e(13486,{value:n})}}function hy(n){return!!n&&"integerValue"in n}function c0(n){return!!n&&"arrayValue"in n}function Cx(n){return!!n&&"nullValue"in n}function Ax(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function _M(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[bI])==null?void 0:i.stringValue)===EI}function mc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Do(n.mapValue.fields,(r,i)=>e.mapValue.fields[r]=mc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=mc(n.arrayValue.values[r]);return e}return{...n}}function wM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Rf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(r)}setAll(e){let r=gn.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=mc(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());Rf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Rf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Do(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Gn(mc(this.value))}}function TI(n){const e=[];return Do(n.fields,(r,i)=>{const s=new gn([r]);if(Rf(i)){const o=TI(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Pn(e,0,qe.min(),qe.min(),qe.min(),Gn.empty(),0)}static newFoundDocument(e,r,i,s){return new Pn(e,1,r,qe.min(),i,s,0)}static newNoDocument(e,r){return new Pn(e,2,r,qe.min(),qe.min(),Gn.empty(),0)}static newUnknownDocument(e,r){return new Pn(e,3,r,qe.min(),qe.min(),Gn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,r){this.position=e,this.inclusive=r}}function Nx(n,e,r){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?i=ze.comparator(ze.fromName(a.referenceValue),r.key):i=Ql(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Px(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Bi(n.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r="asc"){this.field=e,this.dir=r}}function xM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class tn extends II{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new EM(e,r,i):r==="array-contains"?new SM(e,i):r==="in"?new kM(e,i):r==="not-in"?new CM(e,i):r==="array-contains-any"?new AM(e,i):new tn(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new TM(e,i):new IM(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Ql(r,this.value)):r!==null&&Co(this.value)===Co(r)&&this.matchesComparison(Ql(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends II{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new qi(e,r)}matches(e){return SI(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SI(n){return n.op==="and"}function kI(n){return bM(n)&&SI(n)}function bM(n){for(const e of n.filters)if(e instanceof qi)return!1;return!0}function fy(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Yl(n.value);if(kI(n))return n.filters.map(e=>fy(e)).join(",");{const e=n.filters.map(r=>fy(r)).join(",");return`${n.op}(${e})`}}function CI(n,e){return n instanceof tn?function(i,s){return s instanceof tn&&i.op===s.op&&i.field.isEqual(s.field)&&Bi(i.value,s.value)}(n,e):n instanceof qi?function(i,s){return s instanceof qi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&CI(a,s.filters[l]),!0):!1}(n,e):void $e(19439)}function AI(n){return n instanceof tn?function(r){return`${r.field.canonicalString()} ${r.op} ${Yl(r.value)}`}(n):n instanceof qi?function(r){return r.op.toString()+" {"+r.getFilters().map(AI).join(" ,")+"}"}(n):"Filter"}class EM extends tn{constructor(e,r,i){super(e,r,i),this.key=ze.fromName(i.referenceValue)}matches(e){const r=ze.comparator(e.key,this.key);return this.matchesComparison(r)}}class TM extends tn{constructor(e,r){super(e,"in",r),this.keys=NI("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class IM extends tn{constructor(e,r){super(e,"not-in",r),this.keys=NI("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function NI(n,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(i=>ze.fromName(i.referenceValue))}class SM extends tn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return c0(r)&&Kc(r.arrayValue,this.value)}}class kM extends tn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Kc(this.value.arrayValue,r)}}class CM extends tn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Kc(this.value.arrayValue,r)}}class AM extends tn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!c0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Kc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function Rx(n,e=null,r=[],i=[],s=null,o=null,a=null){return new NM(n,e,r,i,s,o,a)}function h0(n){const e=He(n);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>fy(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),vp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Yl(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Yl(i)).join(",")),e.Te=r}return e.Te}function f0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!xM(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!CI(n.filters[r],e.filters[r]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Px(n.startAt,e.startAt)&&Px(n.endAt,e.endAt)}function dy(n){return ze.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function PM(n,e,r,i,s,o,a,l){return new wp(n,e,r,i,s,o,a,l)}function d0(n){return new wp(n)}function Ox(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RM(n){return ze.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function OM(n){return n.collectionGroup!==null}function gc(n){const e=He(n);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new on(gn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Td(o,i))}),r.has(gn.keyField().canonicalString())||e.Ie.push(new Td(gn.keyField(),i))}return e.Ie}function Li(n){const e=He(n);return e.Ee||(e.Ee=jM(e,gc(n))),e.Ee}function jM(n,e){if(n.limitType==="F")return Rx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Td(s.field,o)});const r=n.endAt?new Ed(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ed(n.startAt.position,n.startAt.inclusive):null;return Rx(n.path,n.collectionGroup,e,n.filters,n.limit,r,i)}}function py(n,e,r){return new wp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function xp(n,e){return f0(Li(n),Li(e))&&n.limitType===e.limitType}function PI(n){return`${h0(Li(n))}|lt:${n.limitType}`}function al(n){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>AI(s)).join(", ")}]`),vp(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>Yl(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>Yl(s)).join(",")),`Target(${i})`}(Li(n))}; limitType=${n.limitType})`}function bp(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ze.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of gc(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Nx(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,gc(i),s)||i.endAt&&!function(a,l,u){const c=Nx(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,gc(i),s))}(n,e)}function DM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RI(n){return(e,r)=>{let i=!1;for(const s of gc(n)){const o=MM(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function MM(n,e,r){const i=n.field.isKeyField()?ze.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Ql(u,c):$e(42886)}(n.field,e,r);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return gI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Vt(ze.comparator);function As(){return LM}const OI=new Vt(ze.comparator);function Xu(...n){let e=OI;for(const r of n)e=e.insert(r.key,r);return e}function jI(n){let e=OI;return n.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function fa(){return yc()}function DI(){return yc()}function yc(){return new Fa(n=>n.toString(),(n,e)=>n.isEqual(e))}const VM=new Vt(ze.comparator),FM=new on(ze.comparator);function it(...n){let e=FM;for(const r of n)e=e.add(r);return e}const UM=new on(rt);function zM(){return UM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function MI(n){return{integerValue:""+n}}function $M(n,e){return fM(e)?MI(e):p0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this._=void 0}}function BM(n,e,r){return n instanceof Id?function(s,o){const a={fields:{[_I]:{stringValue:vI},[xI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&u0(o)&&(o=_p(o)),o&&(a.fields[wI]=o),{mapValue:a}}(r,e):n instanceof Wc?VI(n,e):n instanceof Gc?FI(n,e):function(s,o){const a=LI(s,o),l=jx(a)+jx(s.Ae);return hy(a)&&hy(s.Ae)?MI(l):p0(s.serializer,l)}(n,e)}function qM(n,e,r){return n instanceof Wc?VI(n,e):n instanceof Gc?FI(n,e):r}function LI(n,e){return n instanceof Sd?function(i){return hy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Id extends Ep{}class Wc extends Ep{constructor(e){super(),this.elements=e}}function VI(n,e){const r=UI(e);for(const i of n.elements)r.some(s=>Bi(s,i))||r.push(i);return{arrayValue:{values:r}}}class Gc extends Ep{constructor(e){super(),this.elements=e}}function FI(n,e){let r=UI(e);for(const i of n.elements)r=r.filter(s=>!Bi(s,i));return{arrayValue:{values:r}}}class Sd extends Ep{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function jx(n){return Ht(n.integerValue||n.doubleValue)}function UI(n){return c0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function HM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Wc&&s instanceof Wc||i instanceof Gc&&s instanceof Gc?Gl(i.elements,s.elements,Bi):i instanceof Sd&&s instanceof Sd?Bi(i.Ae,s.Ae):i instanceof Id&&s instanceof Id}(n.transform,e.transform)}class KM{constructor(e,r){this.version=e,this.transformResults=r}}class jr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Tp{}function zI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new m0(n.key,jr.none()):new dh(n.key,n.data,jr.none());{const r=n.data,i=Gn.empty();let s=new on(gn.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Mo(n.key,i,new hr(s.toArray()),jr.none())}}function WM(n,e,r){n instanceof dh?function(s,o,a){const l=s.value.clone(),u=Mx(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,r):n instanceof Mo?function(s,o,a){if(!Of(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Mx(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll($I(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function vc(n,e,r,i){return n instanceof dh?function(o,a,l,u){if(!Of(o.precondition,a))return l;const c=o.value.clone(),f=Lx(o.fieldTransforms,u,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,r,i):n instanceof Mo?function(o,a,l,u){if(!Of(o.precondition,a))return l;const c=Lx(o.fieldTransforms,u,a),f=a.data;return f.setAll($I(o)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,r,i):function(o,a,l){return Of(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,r)}function GM(n,e){let r=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=LI(i.transform,s||null);o!=null&&(r===null&&(r=Gn.empty()),r.set(i.field,o))}return r||null}function Dx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Gl(i,s,(o,a)=>HM(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class dh extends Tp{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mo extends Tp{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $I(n){const e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=n.data.field(r);e.set(r,i)}}),e}function Mx(n,e,r){const i=new Map;dt(n.length===r.length,32656,{Ve:r.length,de:n.length});for(let s=0;s<r.length;s++){const o=n[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,qM(a,l,r[s]))}return i}function Lx(n,e,r){const i=new Map;for(const s of n){const o=s.transform,a=r.data.field(s.field);i.set(s.field,BM(o,a,e))}return i}class m0 extends Tp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QM extends Tp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&WM(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=vc(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=vc(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=DI();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=zI(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(qe.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),it())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,(r,i)=>Dx(r,i))&&Gl(this.baseMutations,e.baseMutations,(r,i)=>Dx(r,i))}}class g0{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){dt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return VM}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new g0(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,ot;function ZM(n){switch(n){case ve.OK:return $e(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return $e(15467,{code:n})}}function BI(n){if(n===void 0)return Cs("GRPC error has no .code"),ve.UNKNOWN;switch(n){case Qt.OK:return ve.OK;case Qt.CANCELLED:return ve.CANCELLED;case Qt.UNKNOWN:return ve.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ve.INTERNAL;case Qt.UNAVAILABLE:return ve.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ve.NOT_FOUND;case Qt.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Qt.ABORTED:return ve.ABORTED;case Qt.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Qt.DATA_LOSS:return ve.DATA_LOSS;default:return $e(39323,{code:n})}}(ot=Qt||(Qt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=new _o([4294967295,4294967295],0);function Vx(n){const e=e3().encode(n),r=new sI;return r.update(e),new Uint8Array(r.digest())}function Fx(n){const e=new DataView(n.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new _o([r,i],0),new _o([s,o],0)]}class y0{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Ju(`Invalid padding: ${r}`);if(i<0)throw new Ju(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=_o.fromNumber(this.ge)}ye(e,r,i){let s=e.add(r.multiply(_o.fromNumber(i)));return s.compare(t3)===1&&(s=new _o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Vx(e),[i,s]=Fx(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new y0(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=Vx(e),[i,s]=Fx(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.be(a)}}be(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,ph.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Ip(qe.min(),s,new Vt(rt),As(),it())}}class ph{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new ph(i,r,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,r,i,s){this.Se=e,this.removedTargetIds=r,this.key=i,this.De=s}}class qI{constructor(e,r){this.targetId=e,this.Ce=r}}class HI{constructor(e,r,i=_n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Ux{constructor(){this.ve=0,this.Fe=zx(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),r=it(),i=it();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:$e(38017,{changeType:o})}}),new ph(this.Me,this.xe,e,r,i)}Ke(){this.Oe=!1,this.Fe=zx()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class n3{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.He=rf(),this.Je=rf(),this.Ze=new Vt(rt)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const i=this.nt(r);switch(e.state){case 0:this.rt(r)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),i.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((i,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,i=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(dy(o))if(i===0){const a=new ze(o.path);this.et(r,a,Pn.newNoDocument(a,qe.min()))}else dt(i===1,20013,{expectedCount:i});else{const a=this._t(r);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=ko(i).toUint8Array()}catch(u){if(u instanceof yI)return Wl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new y0(a,s,o)}catch(u){return Wl(u instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,i){return r.Ce.count===i-this.Pt(e,r.targetId)?0:2}Pt(e,r){const i=this.Ge.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&dy(l.target)){const u=new ze(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Pn.newNoDocument(u,e))}o.Be&&(r.set(a,o.ke()),o.Ke())}});let i=it();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Ip(e,r,this.Ze,this.je,i);return this.je=As(),this.He=rf(),this.Je=rf(),this.Ze=new Vt(rt),s}Ye(e,r){if(!this.rt(e))return;const i=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,i),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),i&&(this.je=this.je.insert(r,i))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new Ux,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new on(rt),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new on(rt),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||je("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ux),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function rf(){return new Vt(ze.comparator)}function zx(){return new Vt(ze.comparator)}const r3={asc:"ASCENDING",desc:"DESCENDING"},i3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s3={and:"AND",or:"OR"};class o3{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function my(n,e){return n.useProto3Json||vp(e)?e:{value:e}}function kd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a3(n,e){return kd(n,e.toTimestamp())}function Vi(n){return dt(!!n,49232),qe.fromTimestamp(function(r){const i=So(r);return new St(i.seconds,i.nanos)}(n))}function v0(n,e){return gy(n,e).canonicalString()}function gy(n,e){const r=function(s){return new It(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?r:r.child(e)}function WI(n){const e=It.fromString(n);return dt(JI(e),10190,{key:e.toString()}),e}function yy(n,e){return v0(n.databaseId,e.path)}function jm(n,e){const r=WI(e);if(r.get(1)!==n.databaseId.projectId)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Ve(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new ze(QI(r))}function GI(n,e){return v0(n.databaseId,e)}function l3(n){const e=WI(n);return e.length===4?It.emptyPath():QI(e)}function vy(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QI(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $x(n,e,r){return{name:yy(n,e),fields:r.value.mapValue.fields}}function u3(n,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$e(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,f){return c.useProto3Json?(dt(f===void 0||typeof f=="string",58123),_n.fromBase64String(f||"")):(dt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),_n.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const f=c.code===void 0?ve.UNKNOWN:BI(c.code);return new Ve(f,c.message||"")}(a);r=new HI(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=jm(n,i.document.name),o=Vi(i.document.updateTime),a=i.document.createTime?Vi(i.document.createTime):qe.min(),l=new Gn({mapValue:{fields:i.document.fields}}),u=Pn.newFoundDocument(s,o,a,l),c=i.targetIds||[],f=i.removedTargetIds||[];r=new jf(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=jm(n,i.document),o=i.readTime?Vi(i.readTime):qe.min(),a=Pn.newNoDocument(s,o),l=i.removedTargetIds||[];r=new jf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=jm(n,i.document),o=i.removedTargetIds||[];r=new jf([],o,s,null)}else{if(!("filter"in e))return $e(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new JM(s,o),l=i.targetId;r=new qI(l,a)}}return r}function c3(n,e){let r;if(e instanceof dh)r={update:$x(n,e.key,e.value)};else if(e instanceof m0)r={delete:yy(n,e.key)};else if(e instanceof Mo)r={update:$x(n,e.key,e.data),updateMask:_3(e.fieldMask)};else{if(!(e instanceof QM))return $e(16599,{dt:e.type});r={verify:yy(n,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Id)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Gc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sd)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw $e(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:a3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$e(27497)}(n,e.precondition)),r}function h3(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(r=>function(s,o){let a=s.updateTime?Vi(s.updateTime):Vi(o);return a.isEqual(qe.min())&&(a=Vi(o)),new KM(a,s.transformResults||[])}(r,e))):[]}function f3(n,e){return{documents:[GI(n,e.path)]}}function d3(n,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=GI(n,s);const o=function(c){if(c.length!==0)return XI(qi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(f=>function(g){return{field:ll(g.field),direction:g3(g.dir)}}(f))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=my(n,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function p3(n){let e=l3(n.parent);const r=n.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){dt(i===1,65062);const f=r.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let o=[];r.where&&(o=function(d){const g=YI(d);return g instanceof qi&&kI(g)?g.getFilters():[g]}(r.where));let a=[];r.orderBy&&(a=function(d){return d.map(g=>function(x){return new Td(ul(x.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(r.orderBy));let l=null;r.limit&&(l=function(d){let g;return g=typeof d=="object"?d.value:d,vp(g)?null:g}(r.limit));let u=null;r.startAt&&(u=function(d){const g=!!d.before,_=d.values||[];return new Ed(_,g)}(r.startAt));let c=null;return r.endAt&&(c=function(d){const g=!d.before,_=d.values||[];return new Ed(_,g)}(r.endAt)),PM(e,s,a,o,l,"F",u,c)}function m3(n,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function YI(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=ul(r.unaryFilter.field);return tn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ul(r.unaryFilter.field);return tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ul(r.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ul(r.unaryFilter.field);return tn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}}(n):n.fieldFilter!==void 0?function(r){return tn.create(ul(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return qi.create(r.compositeFilter.filters.map(i=>YI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return $e(1026)}}(r.compositeFilter.op))}(n):$e(30097,{filter:n})}function g3(n){return r3[n]}function y3(n){return i3[n]}function v3(n){return s3[n]}function ll(n){return{fieldPath:n.canonicalString()}}function ul(n){return gn.fromServerFormat(n.fieldPath)}function XI(n){return n instanceof tn?function(r){if(r.op==="=="){if(Ax(r.value))return{unaryFilter:{field:ll(r.field),op:"IS_NAN"}};if(Cx(r.value))return{unaryFilter:{field:ll(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ax(r.value))return{unaryFilter:{field:ll(r.field),op:"IS_NOT_NAN"}};if(Cx(r.value))return{unaryFilter:{field:ll(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(r.field),op:y3(r.op),value:r.value}}}(n):n instanceof qi?function(r){const i=r.getFilters().map(s=>XI(s));return i.length===1?i[0]:{compositeFilter:{op:v3(r.op),filters:i}}}(n):$e(54877,{filter:n})}function _3(n){const e=[];return n.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function JI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function ZI(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,r,i,s,o=qe.min(),a=qe.min(),l=_n.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.yt=e}}function x3(n){const e=p3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?py(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.Sn=new E3}addToCollectionParentIndex(e,r){return this.Sn.add(r),ye.resolve()}getCollectionParents(e,r){return ye.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return ye.resolve()}deleteFieldIndex(e,r){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,r){return ye.resolve()}getDocumentsMatchingTarget(e,r){return ye.resolve(null)}getIndexType(e,r){return ye.resolve(0)}getFieldIndexes(e,r){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,r){return ye.resolve(Io.min())}getMinOffsetFromCollectionGroup(e,r){return ye.resolve(Io.min())}updateCollectionGroup(e,r,i){return ye.resolve()}updateIndexEntries(e,r){return ye.resolve()}}class E3{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new on(It.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new on(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eS=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(eS,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xl(0)}static ar(){return new Xl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LruGarbageCollector",T3=1048576;function Hx([n,e],[r,i]){const s=rt(n,r);return s===0?rt(e,i):s}class I3{constructor(e){this.Pr=e,this.buffer=new on(Hx),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Hx(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class S3{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){je(qx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){fu(r)?je(qx,"Ignoring IndexedDB error during garbage collection: ",r):await hu(r)}await this.Ar(3e5)})}}class k3{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return ye.resolve(yp.ce);const i=new I3(r);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.Vr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Bx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let i,s,o,a,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(i=d,l=Date.now(),this.removeTargets(e,i,r))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),ol()<=nt.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:d})))}}function C3(n,e){return new k3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.changes=new Fa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?ye.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&vc(i.mutation,s,hr.empty(),St.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,it()).next(()=>i))}getLocalViewOfDocuments(e,r,i=it()){const s=fa();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=Xu();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=fa();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,it()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=As();const a=yc(),l=function(){return yc()}();return r.forEach((u,c)=>{const f=i.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof Mo)?o=o.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),vc(f.mutation,c,f.mutation.getFieldMask(),St.now())):a.set(c.key,hr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,f)=>a.set(c,f)),r.forEach((c,f)=>l.set(c,new N3(f,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,r){const i=yc();let s=new Vt((a,l)=>a-l),o=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let f=i.get(u)||hr.empty();f=l.applyToLocalView(c,f),i.set(u,f);const d=(s.get(l.batchId)||it()).add(u);s=s.insert(l.batchId,d)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,d=DI();f.forEach(g=>{if(!o.has(g)){const _=zI(r.get(g),i.get(g));_!==null&&d.set(g,_),o=o.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ye.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return RM(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):OM(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):ye.resolve(fa());let l=Bc,u=o;return a.next(c=>ye.forEach(c,(f,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),o.get(f)?ye.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,it())).next(f=>({batchId:l,changes:jI(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ze(r)).next(i=>{let s=Xu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=Xu();return this.indexManager.getCollectionParents(e,o).next(l=>ye.forEach(l,u=>{const c=function(d,g){return new wp(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(f=>{f.forEach((d,g)=>{a=a.insert(d,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,Pn.newInvalidDocument(f)))});let l=Xu();return a.forEach((u,c)=>{const f=o.get(u);f!==void 0&&vc(f.mutation,c,hr.empty(),St.now()),bp(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return ye.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Vi(s.createTime)}}(r)),ye.resolve()}getNamedQuery(e,r){return ye.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:x3(s.bundledQuery),readTime:Vi(s.readTime)}}(r)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.overlays=new Vt(ze.comparator),this.Lr=new Map}getOverlay(e,r){return ye.resolve(this.overlays.get(r))}getOverlays(e,r){const i=fa();return ye.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.bt(e,r,o)}),ye.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),ye.resolve()}getOverlaysForCollection(e,r,i){const s=fa(),o=r.length+1,a=new ze(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ye.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new Vt((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let f=o.get(c.largestBatchId);f===null&&(f=fa(),o=o.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=fa(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=s)););return ye.resolve(l)}bt(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new XM(r,i));let o=this.Lr.get(r);o===void 0&&(o=it(),this.Lr.set(r,o)),this.Lr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.kr=new on(hn.Kr),this.qr=new on(hn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const i=new hn(e,r);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Wr(new hn(e,r))}Qr(e,r){e.forEach(i=>this.removeReference(i,r))}Gr(e){const r=new ze(new It([])),i=new hn(r,e),s=new hn(r,e+1),o=[];return this.qr.forEachInRange([i,s],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new ze(new It([])),i=new hn(r,e),s=new hn(r,e+1);let o=it();return this.qr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new hn(e,0),i=this.kr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class hn{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return ze.comparator(e.key,r.key)||rt(e.Hr,r.Hr)}static Ur(e,r){return rt(e.Hr,r.Hr)||ze.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new on(hn.Kr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new YM(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new hn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ye.resolve(a)}lookupMutationBatch(e,r){return ye.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Xr(i),o=s<0?0:s;return ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?l0:this.Yn-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new hn(r,0),s=new hn(r,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],a=>{const l=this.Zr(a.Hr);o.push(l)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new on(rt);return r.forEach(s=>{const o=new hn(s,0),a=new hn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),ye.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;ze.isDocumentKey(o)||(o=o.child(""));const a=new hn(new ze(o),0);let l=new on(rt);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},a),ye.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){dt(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ye.forEach(r.mutations,s=>{const o=new hn(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,r){const i=new hn(r,0),s=this.Jr.firstAfterOrEqual(i);return ye.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.ti=e,this.docs=function(){return new Vt(ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return ye.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(r))}getEntries(e,r){let i=As();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Pn.newInvalidDocument(s))}),ye.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=As();const a=r.path,l=new ze(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||lM(aM(f),i)<=0||(s.has(f.key)||bp(r,f))&&(o=o.insert(f.key,f.mutableCopy()))}return ye.resolve(o)}getAllFromCollectionGroup(e,r,i,s){$e(9500)}ni(e,r){return ye.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new L3(this)}getSize(e){return ye.resolve(this.size)}}class L3 extends A3{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),ye.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.persistence=e,this.ri=new Fa(r=>h0(r),f0),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.ii=0,this.si=new _0,this.targetCount=0,this.oi=Xl._r()}forEachTarget(e,r){return this.ri.forEach((i,s)=>r(s)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ii&&(this.ii=r),ye.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new Xl(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,ye.resolve()}updateTargetData(e,r){return this.lr(r),ye.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ye.waitFor(o).next(()=>s)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,r){const i=this.ri.get(r)||null;return ye.resolve(i)}addMatchingKeys(e,r,i){return this.si.$r(r,i),ye.resolve()}removeMatchingKeys(e,r,i){this.si.Qr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ye.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),ye.resolve()}getMatchingKeysForTargetId(e,r){const i=this.si.jr(r);return ye.resolve(i)}containsKey(e,r){return ye.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,r){this._i={},this.overlays={},this.ai=new yp(0),this.ui=!1,this.ui=!0,this.ci=new j3,this.referenceDelegate=e(this),this.li=new V3(this),this.indexManager=new b3,this.remoteDocumentCache=function(s){return new M3(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new w3(r),this.Pi=new R3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new O3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this._i[e.toKey()];return i||(i=new D3(r,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,i){je("MemoryPersistence","Starting transaction:",e);const s=new F3(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,r){return ye.or(Object.values(this._i).map(i=>()=>i.containsKey(e,r)))}}class F3 extends cM{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Ri=new _0,this.Ai=null}static Vi(e){return new w0(e)}get di(){if(this.Ai)return this.Ai;throw $e(60996)}addReference(e,r,i){return this.Ri.addReference(i,r),this.di.delete(i.toString()),ye.resolve()}removeReference(e,r,i){return this.Ri.removeReference(i,r),this.di.add(i.toString()),ye.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),ye.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.di,i=>{const s=ze.fromPath(i);return this.mi(e,s).next(o=>{o||r.removeEntry(s,qe.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(i=>{i?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return ye.or([()=>ye.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class Cd{constructor(e,r){this.persistence=e,this.fi=new Fa(i=>dM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=C3(this,r)}static Vi(e,r){return new Cd(e,r)}Ti(){}Ii(e){return ye.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}pr(e){let r=0;return this.mr(e,i=>{r++}).next(()=>r)}mr(e,r){return ye.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?ye.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(i++,o.removeEntry(a,qe.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ye.resolve()}removeReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Pf(e.data.value)),r}wr(e,r,i){return ye.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return ye.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Ts=i,this.Is=s}static Es(e,r){let i=it(),s=it();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new x0(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return IO()?8:hM(On())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.gs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new U3;return this.ys(e,r,a).next(l=>{if(o.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>o.result)}ws(e,r,i,s){return i.documentReadCount<this.Vs?(ol()<=nt.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",al(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(ol()<=nt.DEBUG&&je("QueryEngine","Query:",al(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(ol()<=nt.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",al(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(r))):ye.resolve())}gs(e,r){if(Ox(r))return ye.resolve(null);let i=Li(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=py(r,null,"F"),i=Li(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=it(...o);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.bs(r,l);return this.Ss(r,c,a,u.readTime)?this.gs(e,py(r,null,"F")):this.Ds(e,c,r,u)}))})))}ps(e,r,i,s){return Ox(r)||s.isEqual(qe.min())?ye.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(r,o);return this.Ss(r,a,i,s)?ye.resolve(null):(ol()<=nt.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),al(r)),this.Ds(e,a,r,oM(s,Bc)).next(l=>l))})}bs(e,r){let i=new on(RI(e));return r.forEach((s,o)=>{bp(e,o)&&(i=i.add(o))}),i}Ss(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,r,i){return ol()<=nt.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",al(r)),this.fs.getDocumentsMatchingQuery(e,r,Io.min(),i)}Ds(e,r,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LocalStore",$3=3e8;class B3{constructor(e,r,i,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new Vt(rt),this.Fs=new Fa(o=>h0(o),f0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function q3(n,e,r,i){return new B3(n,e,r,i)}async function nS(n,e){const r=He(n);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.Os(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=it();for(const c of s){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of o){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function H3(n,e){const r=He(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const d=c.batch,g=d.keys();let _=ye.resolve();return g.forEach(x=>{_=_.next(()=>f.getEntry(u,x)).next(I=>{const P=c.docVersions.get(x);dt(P!==null,48541),I.version.compareTo(P)<0&&(d.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),f.addEntry(I)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=it();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function rS(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function K3(n,e){const r=He(n),i=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((f,d)=>{const g=s.get(d);if(!g)return;l.push(r.li.removeMatchingKeys(o,f.removedDocuments,d).next(()=>r.li.addMatchingKeys(o,f.addedDocuments,d)));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(_n.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,i)),s=s.insert(d,_),function(I,P,b){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=$3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,_,f)&&l.push(r.li.updateTargetData(o,_))});let u=As(),c=it();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(W3(o,a,e.documentUpdates).next(f=>{u=f.Bs,c=f.Ls})),!i.isEqual(qe.min())){const f=r.li.getLastRemoteSnapshotVersion(o).next(d=>r.li.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(f)}return ye.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.vs=s,o))}function W3(n,e,r){let i=it(),s=it();return r.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=As();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(qe.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):je(b0,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function G3(n,e){const r=He(n);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=l0),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Q3(n,e){const r=He(n);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.li.getTargetData(i,e).next(o=>o?(s=o,ye.resolve(s)):r.li.allocateTargetId(i).next(a=>(s=new ao(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(i.targetId,i),r.Fs.set(e,i.targetId)),i})}async function _y(n,e,r){const i=He(n),s=i.vs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!fu(a))throw a;je(b0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function Kx(n,e,r){const i=He(n);let s=qe.min(),o=it();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,f){const d=He(u),g=d.Fs.get(f);return g!==void 0?ye.resolve(d.vs.get(g)):d.li.getTargetData(c,f)}(i,a,Li(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,r?s:qe.min(),r?o:it())).next(l=>(Y3(i,DM(e),l),{documents:l,ks:o})))}function Y3(n,e,r){let i=n.Ms.get(e)||qe.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ms.set(e,i)}class Wx{constructor(){this.activeTargetIds=zM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X3{constructor(){this.vo=new Wx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,i){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Wx,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="ConnectivityMonitor";class Qx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){je(Gx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){je(Gx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf=null;function wy(){return sf===null?sf=function(){return 268435456+Math.round(2147483648*Math.random())}():sf++,"0x"+sf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",Z3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class e5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===xd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,r,i,s,o){const a=wy(),l=this.Qo(e,r.toUriEncodedString());je(Dm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,o);const{host:c}=new URL(l),f=au(c);return this.zo(e,l,u,i,f).then(d=>(je(Dm,`Received RPC '${e}' ${a}: `,d),d),d=>{throw Wl(Dm,`RPC '${e}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}jo(e,r,i,s,o,a){return this.Wo(e,r,i,s,o)}Go(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,r){const i=Z3[e];let s=`${this.qo}/v1/${r}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection",Lu=(n,e,r)=>{n.listen(e,i=>{try{r(i)}catch(s){setTimeout(()=>{throw s},0)}})};class Rl extends e5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Rl.c_){const e=uI();Lu(e,lI.STAT_EVENT,r=>{r.stat===ly.PROXY?je(kn,"STAT_EVENT: detected buffering proxy"):r.stat===ly.NOPROXY&&je(kn,"STAT_EVENT: detected no buffering proxy")}),Rl.c_=!0}}zo(e,r,i,s,o){const a=wy();return new Promise((l,u)=>{const c=new oI;c.setWithCredentials(!0),c.listenOnce(aI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nf.NO_ERROR:const d=c.getResponseJson();je(kn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),l(d);break;case Nf.TIMEOUT:je(kn,`RPC '${e}' ${a} timed out`),u(new Ve(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const g=c.getStatus();if(je(kn,`RPC '${e}' ${a} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const I=function(b){const T=b.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(T)>=0?T:ve.UNKNOWN}(x.status);u(new Ve(I,x.message))}else u(new Ve(ve.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Ve(ve.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{je(kn,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);je(kn,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",f,i,15)})}T_(e,r,i){const s=wy(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,i),l.encodeInitMessageHeaders=!0;const c=o.join("");je(kn,`Creating RPC '${e}' stream ${s}: ${c}`,l);const f=a.createWebChannel(c,l);this.I_(f);let d=!1,g=!1;const _=new t5({Ho:x=>{g?je(kn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(d||(je(kn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),d=!0),je(kn,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Jo:()=>f.close()});return Lu(f,Yu.EventType.OPEN,()=>{g||(je(kn,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),Lu(f,Yu.EventType.CLOSE,()=>{g||(g=!0,je(kn,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(f))}),Lu(f,Yu.EventType.ERROR,x=>{g||(g=!0,Wl(kn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),_.o_(new Ve(ve.UNAVAILABLE,"The operation could not be completed")))}),Lu(f,Yu.EventType.MESSAGE,x=>{var I;if(!g){const P=x.data[0];dt(!!P,16349);const b=P,T=(b==null?void 0:b.error)||((I=b[0])==null?void 0:I.error);if(T){je(kn,`RPC '${e}' stream ${s} received error:`,T);const A=T.status;let O=function(N){const C=Qt[N];if(C!==void 0)return BI(C)}(A),M=T.message;O===void 0&&(O=ve.INTERNAL,M="Unknown error status: "+A+" with message "+T.message),g=!0,_.o_(new Ve(O,M)),f.close()}else je(kn,`RPC '${e}' stream ${s} received:`,P),_.__(P)}}),Rl.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,i){super.Go(e,r,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cI()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(n){return new Rl(n)}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(n){return new o3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rl.c_=!1;class iS{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=r,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-i);s>0&&je("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="PersistentStream";class sS{constructor(e,r,i,s,o,a,l,u){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ve.RESOURCE_EXHAUSTED?(Cs(r.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===r&&this.G_(i,s)},i=>{e(()=>{const s=new Ve(ve.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,r){const i=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return je(Yx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(je(Yx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r5 extends sS{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=u3(this.serializer,e),i=function(o){if(!("targetChange"in o))return qe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?qe.min():a.readTime?Vi(a.readTime):qe.min()}(e);return this.listener.J_(r,i)}Z_(e){const r={};r.database=vy(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=dy(u)?{documents:f3(o,u)}:{query:d3(o,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=KI(o,a.resumeToken);const c=my(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(qe.min())>0){l.readTime=kd(o,a.snapshotVersion.toTimestamp());const c=my(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=m3(this.serializer,e);i&&(r.labels=i),this.K_(r)}X_(e){const r={};r.database=vy(this.serializer),r.removeTarget=e,this.K_(r)}}class i5 extends sS{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=h3(e.writeResults,e.commitTime),i=Vi(e.commitTime);return this.listener.na(i,r)}ra(){const e={};e.database=vy(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>c3(this.serializer,i))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{}class o5 extends s5{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,gy(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(ve.UNKNOWN,o.toString())})}jo(e,r,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,gy(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(ve.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function a5(n,e,r,i){return new o5(n,e,r,i)}class l5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cs(r),this.aa=!1):je("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class u5{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{Ua(this)&&(je(Na,"Restarting streams for network reachability change."),await async function(u){const c=He(u);c.Ea.add(4),await mh(c),c.Va.set("Unknown"),c.Ea.delete(4),await kp(c)}(this))})}),this.Va=new l5(i,s)}}async function kp(n){if(Ua(n))for(const e of n.Ra)await e(!0)}async function mh(n){for(const e of n.Ra)await e(!1)}function oS(n,e){const r=He(n);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),S0(r)?I0(r):du(r).O_()&&T0(r,e))}function E0(n,e){const r=He(n),i=du(r);r.Ia.delete(e),i.O_()&&aS(r,e),r.Ia.size===0&&(i.O_()?i.L_():Ua(r)&&r.Va.set("Unknown"))}function T0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}du(n).Z_(e)}function aS(n,e){n.da.$e(e),du(n).X_(e)}function I0(n){n.da=new n3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),du(n).start(),n.Va.ua()}function S0(n){return Ua(n)&&!du(n).x_()&&n.Ia.size>0}function Ua(n){return He(n).Ea.size===0}function lS(n){n.da=void 0}async function c5(n){n.Va.set("Online")}async function h5(n){n.Ia.forEach((e,r)=>{T0(n,e)})}async function f5(n,e){lS(n),S0(n)?(n.Va.ha(e),I0(n)):n.Va.set("Unknown")}async function d5(n,e,r){if(n.Va.set("Online"),e instanceof HI&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(n,e)}catch(i){je(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ad(n,i)}else if(e instanceof jf?n.da.Xe(e):e instanceof qI?n.da.st(e):n.da.tt(e),!r.isEqual(qe.min()))try{const i=await rS(n.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.Ia.get(c);f&&o.Ia.set(c,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(_n.EMPTY_BYTE_STRING,f.snapshotVersion)),aS(o,u);const d=new ao(f.target,u,c,f.sequenceNumber);T0(o,d)}),o.remoteSyncer.applyRemoteEvent(l)}(n,r)}catch(i){je(Na,"Failed to raise snapshot:",i),await Ad(n,i)}}async function Ad(n,e,r){if(!fu(e))throw e;n.Ea.add(1),await mh(n),n.Va.set("Offline"),r||(r=()=>rS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{je(Na,"Retrying IndexedDB access"),await r(),n.Ea.delete(1),await kp(n)})}function uS(n,e){return e().catch(r=>Ad(n,r,e))}async function Cp(n){const e=He(n),r=Ao(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:l0;for(;p5(e);)try{const s=await G3(e.localStore,i);if(s===null){e.Ta.length===0&&r.L_();break}i=s.batchId,m5(e,s)}catch(s){await Ad(e,s)}cS(e)&&hS(e)}function p5(n){return Ua(n)&&n.Ta.length<10}function m5(n,e){n.Ta.push(e);const r=Ao(n);r.O_()&&r.Y_&&r.ea(e.mutations)}function cS(n){return Ua(n)&&!Ao(n).x_()&&n.Ta.length>0}function hS(n){Ao(n).start()}async function g5(n){Ao(n).ra()}async function y5(n){const e=Ao(n);for(const r of n.Ta)e.ea(r.mutations)}async function v5(n,e,r){const i=n.Ta.shift(),s=g0.from(i,e,r);await uS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Cp(n)}async function _5(n,e){e&&Ao(n).Y_&&await async function(i,s){if(function(a){return ZM(a)&&a!==ve.ABORTED}(s.code)){const o=i.Ta.shift();Ao(i).B_(),await uS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Cp(i)}}(n,e),cS(n)&&hS(n)}async function Xx(n,e){const r=He(n);r.asyncQueue.verifyOperationInProgress(),je(Na,"RemoteStore received new credentials");const i=Ua(r);r.Ea.add(3),await mh(r),i&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await kp(r)}async function w5(n,e){const r=He(n);e?(r.Ea.delete(2),await kp(r)):e||(r.Ea.add(2),await mh(r),r.Va.set("Unknown"))}function du(n){return n.ma||(n.ma=function(r,i,s){const o=He(r);return o.sa(),new r5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:c5.bind(null,n),Yo:h5.bind(null,n),t_:f5.bind(null,n),J_:d5.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),S0(n)?I0(n):n.Va.set("Unknown")):(await n.ma.stop(),lS(n))})),n.ma}function Ao(n){return n.fa||(n.fa=function(r,i,s){const o=He(r);return o.sa(),new i5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:g5.bind(null,n),t_:_5.bind(null,n),ta:y5.bind(null,n),na:v5.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await Cp(n)):(await n.fa.stop(),n.Ta.length>0&&(je(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new k0(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(n,e){if(Cs("AsyncQueue",`${e}: ${n}`),fu(n))return new Ve(ve.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static emptySet(e){return new Ol(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||ze.comparator(r.key,i.key):(r,i)=>ze.comparator(r.key,i.key),this.keyedMap=Xu(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Ol;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.ga=new Vt(ze.comparator)}track(e){const r=e.doc.key,i=this.ga.get(r);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(r,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(r):e.type===1&&i.type===2?this.ga=this.ga.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):$e(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,i)=>{e.push(i)}),e}}class Jl{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new Jl(e,r,Ol.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class b5{constructor(){this.queries=Zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,i){const s=He(r),o=s.queries;s.queries=Zx(),o.forEach((a,l)=>{for(const u of l.ba)u.onError(i)})})(this,new Ve(ve.ABORTED,"Firestore shutting down"))}}function Zx(){return new Fa(n=>PI(n),xp)}async function fS(n,e){const r=He(n);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new x5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=C0(a,`Initialization of query '${al(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ba.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&A0(r)}async function dS(n,e){const r=He(n),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function E5(n,e){const r=He(n);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ba)l.Fa(s)&&(i=!0);a.wa=s}}i&&A0(r)}function T5(n,e,r){const i=He(n),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(r);i.queries.delete(e)}function A0(n){n.Ca.forEach(e=>{e.next()})}var xy,e1;(e1=xy||(xy={})).Ma="default",e1.Cache="cache";class pS{constructor(e,r,i){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Jl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const i=r!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.key=e}}class gS{constructor(e){this.key=e}}class I5{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=it(),this.mutatedKeys=it(),this.eu=RI(e),this.tu=new Ol(this.eu)}get nu(){return this.Za}ru(e,r){const i=r?r.iu:new Jx,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,d)=>{const g=s.get(f),_=bp(this.query,d)?d:null,x=!!g&&this.mutatedKeys.has(g.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;g&&_?g.data.isEqual(_.data)?x!==I&&(i.track({type:3,doc:_}),P=!0):this.su(g,_)||(i.track({type:2,doc:_}),P=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(l=!0)):!g&&_?(i.track({type:0,doc:_}),P=!0):g&&!_&&(i.track({type:1,doc:g}),P=!0,(u||c)&&(l=!0)),P&&(_?(a=a.add(_),o=I?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),i.track({type:1,doc:f})}return{tu:a,iu:i,Ss:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,d)=>function(_,x){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Vt:P})}};return I(_)-I(x)}(f.type,d.type)||this.eu(f.doc,d.doc)),this.ou(i),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new Jl(this.query,e.tu,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=it(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const r=[];return e.forEach(i=>{this.Ya.has(i)||r.push(new gS(i))}),this.Ya.forEach(i=>{e.has(i)||r.push(new mS(i))}),r}cu(e){this.Za=e.ks,this.Ya=it();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const N0="SyncEngine";class S5{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class k5{constructor(e){this.key=e,this.hu=!1}}class C5{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Fa(l=>PI(l),xp),this.Iu=new Map,this.Eu=new Set,this.Ru=new Vt(ze.comparator),this.Au=new Map,this.Vu=new _0,this.du={},this.mu=new Map,this.fu=Xl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function A5(n,e,r=!0){const i=bS(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await yS(i,e,r,!0),s}async function N5(n,e){const r=bS(n);await yS(r,e,!0,!1)}async function yS(n,e,r,i){const s=await Q3(n.localStore,Li(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await P5(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&r&&oS(n.remoteStore,s),l}async function P5(n,e,r,i,s){n.pu=(d,g,_)=>async function(I,P,b,T){let A=P.view.ru(b);A.Ss&&(A=await Kx(I.localStore,P.query,!1).then(({documents:N})=>P.view.ru(N,A)));const O=T&&T.targetChanges.get(P.targetId),M=T&&T.targetMismatches.get(P.targetId)!=null,z=P.view.applyChanges(A,I.isPrimaryClient,O,M);return n1(I,P.targetId,z.au),z.snapshot}(n,d,g,_);const o=await Kx(n.localStore,e,!0),a=new I5(e,o.ks),l=a.ru(o.documents),u=ph.createSynthesizedTargetChangeForCurrentChange(r,i&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);n1(n,r,c.au);const f=new S5(e,r,a);return n.Tu.set(e,f),n.Iu.has(r)?n.Iu.get(r).push(e):n.Iu.set(r,[e]),c.snapshot}async function R5(n,e,r){const i=He(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!xp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await _y(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&E0(i.remoteStore,s.targetId),by(i,s.targetId)}).catch(hu)):(by(i,s.targetId),await _y(i.localStore,s.targetId,!0))}async function O5(n,e){const r=He(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),E0(r.remoteStore,i.targetId))}async function j5(n,e,r){const i=z5(n);try{const s=await function(a,l){const u=He(a),c=St.now(),f=l.reduce((_,x)=>_.add(x.key),it());let d,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=As(),I=it();return u.xs.getEntries(_,f).next(P=>{x=P,x.forEach((b,T)=>{T.isValidDocument()||(I=I.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(P=>{d=P;const b=[];for(const T of l){const A=GM(T,d.get(T.key).overlayedDocument);A!=null&&b.push(new Mo(T.key,A,TI(A.value.mapValue),jr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,b,l)}).next(P=>{g=P;const b=P.applyToLocalDocumentSet(d,I);return u.documentOverlayCache.saveOverlays(_,P.batchId,b)})}).then(()=>({batchId:g.batchId,changes:jI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new Vt(rt)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(i,s.batchId,r),await gh(i,s.changes),await Cp(i.remoteStore)}catch(s){const o=C0(s,"Failed to persist write");r.reject(o)}}async function vS(n,e){const r=He(n);try{const i=await K3(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?dt(a.hu,14607):s.removedDocuments.size>0&&(dt(a.hu,42227),a.hu=!1))}),await gh(r,i,e)}catch(i){await hu(i)}}function t1(n,e,r){const i=He(n);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=He(a);u.onlineState=l;let c=!1;u.queries.forEach((f,d)=>{for(const g of d.ba)g.va(l)&&(c=!0)}),c&&A0(u)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function D5(n,e,r){const i=He(n);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Au.get(e),o=s&&s.key;if(o){let a=new Vt(ze.comparator);a=a.insert(o,Pn.newNoDocument(o,qe.min()));const l=it().add(o),u=new Ip(qe.min(),new Map,new Vt(rt),a,l);await vS(i,u),i.Ru=i.Ru.remove(o),i.Au.delete(e),P0(i)}else await _y(i.localStore,e,!1).then(()=>by(i,e,r)).catch(hu)}async function M5(n,e){const r=He(n),i=e.batch.batchId;try{const s=await H3(r.localStore,e);wS(r,i,null),_S(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await gh(r,s)}catch(s){await hu(s)}}async function L5(n,e,r){const i=He(n);try{const s=await function(a,l){const u=He(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(d=>(dt(d!==null,37113),f=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(i.localStore,e);wS(i,e,r),_S(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await gh(i,s)}catch(s){await hu(s)}}function _S(n,e){(n.mu.get(e)||[]).forEach(r=>{r.resolve()}),n.mu.delete(e)}function wS(n,e,r){const i=He(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function by(n,e,r=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),r&&n.Pu.yu(i,r);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(i=>{n.Vu.containsKey(i)||xS(n,i)})}function xS(n,e){n.Eu.delete(e.path.canonicalString());const r=n.Ru.get(e);r!==null&&(E0(n.remoteStore,r),n.Ru=n.Ru.remove(e),n.Au.delete(r),P0(n))}function n1(n,e,r){for(const i of r)i instanceof mS?(n.Vu.addReference(i.key,e),V5(n,i)):i instanceof gS?(je(N0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||xS(n,i.key)):$e(19791,{wu:i})}function V5(n,e){const r=e.key,i=r.path.canonicalString();n.Ru.get(r)||n.Eu.has(i)||(je(N0,"New document in limbo: "+r),n.Eu.add(i),P0(n))}function P0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const r=new ze(It.fromString(e)),i=n.fu.next();n.Au.set(i,new k5(r)),n.Ru=n.Ru.insert(r,i),oS(n.remoteStore,new ao(Li(d0(r.path)),i,"TargetPurposeLimboResolution",yp.ce))}}async function gh(n,e,r){const i=He(n),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,r).then(c=>{var f;if((c||r)&&i.isPrimaryClient){const d=c?!c.fromCache:(f=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){s.push(c);const d=x0.Es(u.targetId,c);o.push(d)}}))}),await Promise.all(a),i.Pu.J_(s),await async function(u,c){const f=He(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ye.forEach(c,g=>ye.forEach(g.Ts,_=>f.persistence.referenceDelegate.addReference(d,g.targetId,_)).next(()=>ye.forEach(g.Is,_=>f.persistence.referenceDelegate.removeReference(d,g.targetId,_)))))}catch(d){if(!fu(d))throw d;je(b0,"Failed to update sequence numbers: "+d)}for(const d of c){const g=d.targetId;if(!d.fromCache){const _=f.vs.get(g),x=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(x);f.vs=f.vs.insert(g,I)}}}(i.localStore,o))}async function F5(n,e){const r=He(n);if(!r.currentUser.isEqual(e)){je(N0,"User change. New user:",e.toKey());const i=await nS(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new Ve(ve.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gh(r,i.Ns)}}function U5(n,e){const r=He(n),i=r.Au.get(e);if(i&&i.hu)return it().add(i.key);{let s=it();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function bS(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D5.bind(null,e),e.Pu.J_=E5.bind(null,e.eventManager),e.Pu.yu=T5.bind(null,e.eventManager),e}function z5(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L5.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return q3(this.persistence,new z3,e.initialUser,this.serializer)}Cu(e){return new tS(w0.Vi,this.serializer)}Du(e){return new X3}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class $5 extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){dt(this.persistence.referenceDelegate instanceof Cd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new S3(i,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new tS(i=>Cd.Vi(i,r),this.serializer)}}class Ey{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>t1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=F5.bind(null,this.syncEngine),await w5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b5}()}createDatastore(e){const r=Sp(e.databaseInfo.databaseId),i=n5(e.databaseInfo);return a5(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new u5(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>t1(this.syncEngine,r,0),function(){return Qx.v()?new Qx:new J3}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,f){const d=new C5(s,o,a,l,u,c);return f&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=He(s);je(Na,"RemoteStore shutting down."),o.Ea.add(5),await mh(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Ey.provider={build:()=>new Ey};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="FirestoreClient";class B5{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this._databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=o0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{je(No,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(je(No,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=C0(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lm(n,e){n.asyncQueue.verifyOperationInProgress(),je(No,"Initializing OfflineComponentProvider");const r=n.configuration;await e.initialize(r);let i=r.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await nS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function r1(n,e){n.asyncQueue.verifyOperationInProgress();const r=await q5(n);je(No,"Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(i=>Xx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Xx(e.remoteStore,s)),n._onlineComponents=e}async function q5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je(No,"Using user provided OfflineComponentProvider");try{await Lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ve.FAILED_PRECONDITION||s.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Wl("Error using user provided cache. Falling back to memory cache: "+r),await Lm(n,new Nd)}}else je(No,"Using default OfflineComponentProvider"),await Lm(n,new $5(void 0));return n._offlineComponents}async function TS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je(No,"Using user provided OnlineComponentProvider"),await r1(n,n._uninitializedComponentsProvider._online)):(je(No,"Using default OnlineComponentProvider"),await r1(n,new Ey))),n._onlineComponents}function H5(n){return TS(n).then(e=>e.syncEngine)}async function IS(n){const e=await TS(n),r=e.eventManager;return r.onListen=A5.bind(null,e.syncEngine),r.onUnlisten=R5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=N5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=O5.bind(null,e.syncEngine),r}function K5(n,e,r={}){const i=new ws;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const f=new ES({next:g=>{f.Nu(),a.enqueueAndForget(()=>dS(o,d));const _=g.docs.has(l);!_&&g.fromCache?c.reject(new Ve(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new Ve(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),d=new pS(d0(l.path),f,{includeMetadataChanges:!0,Ka:!0});return fS(o,d)}(await IS(n),n.asyncQueue,e,r,i)),i.promise}function W5(n,e,r={}){const i=new ws;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const f=new ES({next:g=>{f.Nu(),a.enqueueAndForget(()=>dS(o,d)),g.fromCache&&u.source==="server"?c.reject(new Ve(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),d=new pS(l,f,{includeMetadataChanges:!0,Ka:!0});return fS(o,d)}(await IS(n),n.asyncQueue,e,r,i)),i.promise}function G5(n,e){const r=new ws;return n.asyncQueue.enqueueAndForget(async()=>j5(await H5(n),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="ComponentProvider",i1=new Map;function Y5(n,e,r,i,s){return new gM(n,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,SS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firestore.googleapis.com",s1=!0;class o1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kS,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T3)throw new Ve(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ve(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ap{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new QD;switch(i.type){case"firstParty":return new ZD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=i1.get(r);i&&(je(Q5,"Removing Datastore"),i1.delete(r),i.terminate())}(this),Promise.resolve()}}function X5(n,e,r,i={}){var c;n=To(n,Ap);const s=au(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${r}`;s&&(v2(`https://${l}`),_2("Firestore",!0)),o.host!==kS&&o.host!==l&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:i};if(!Eo(u,a)&&(n._setSettings(u),i.mockUserToken)){let f,d;if(typeof i.mockUserToken=="string")f=i.mockUserToken,d=An.MOCK_USER;else{f=yO(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new Ve(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new An(g)}n._authCredentials=new YD(new fI(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Np(this.firestore,e,this._query)}}class rn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,i){if(fh(r,rn._jsonSchema))return new rn(e,i||null,new ze(It.fromString(r.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:Xt("string",rn._jsonSchemaVersion),referencePath:Xt("string")};class wo extends Np{constructor(e,r,i){super(e,r,d0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ze(e))}withConverter(e){return new wo(this.firestore,e,this._path)}}function Vm(n,e,...r){if(n=Jt(n),dI("collection","path",e),n instanceof Ap){const i=It.fromString(e,...r);return wx(i),new wo(n,null,i)}{if(!(n instanceof rn||n instanceof wo))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(It.fromString(e,...r));return wx(i),new wo(n.firestore,null,i)}}function oa(n,e,...r){if(n=Jt(n),arguments.length===1&&(e=o0.newId()),dI("doc","path",e),n instanceof Ap){const i=It.fromString(e,...r);return _x(i),new rn(n,null,new ze(i))}{if(!(n instanceof rn||n instanceof wo))throw new Ve(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(It.fromString(e,...r));return _x(i),new rn(n.firestore,n instanceof wo?n.converter:null,new ze(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iS(this,"async_queue_retry"),this._c=()=>{const i=Mm();i&&je(a1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const r=Mm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Mm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new ws;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!fu(e))throw e;je(a1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Cs("INTERNAL UNHANDLED ERROR: ",u1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=r,r}enqueueAfterDelay(e,r,i){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=k0.createAndSchedule(this,e,r,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&$e(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function u1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class yh extends Ap{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new l1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function J5(n,e){const r=typeof n=="object"?n:Gv(),i=typeof n=="string"?n:xd,s=Va(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=mO("firestore");o&&X5(s,...o)}return s}function Pp(n){if(n._terminated)throw new Ve(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Z5(n),n._firestoreClient}function Z5(n){var i,s,o,a;const e=n._freezeSettings(),r=Y5(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new B5(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(_n.fromBase64String(e))}catch(r){throw new Ve(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Cr(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fh(e,Cr._jsonSchema))return Cr.fromBase64String(e.bytes)}}Cr._jsonSchemaVersion="firestore/bytes/1.0",Cr._jsonSchema={type:Xt("string",Cr._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ve(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ve(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ve(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(fh(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Xt("string",Fi._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fh(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new ui(e.vectorValues);throw new Ve(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Xt("string",ui._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=/^__.*__$/;class tL{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Mo(e,this.data,this.fieldMask,r,this.fieldTransforms):new dh(e,this.data,r,this.fieldTransforms)}}class CS{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Mo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function AS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{dataSource:n})}}class j0{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new j0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Pd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AS(this.dataSource)&&eL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class nL{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Sp(e)}createContext(e,r,i,s=!1){return new j0({dataSource:e,methodName:r,targetDoc:i,path:gn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NS(n){const e=n._freezeSettings(),r=Sp(n._databaseId);return new nL(n._databaseId,!!e.ignoreUndefinedProperties,r)}function PS(n,e,r,i,s,o={}){const a=n.createContext(o.merge||o.mergeFields?2:0,e,r,s);D0("Data must be an object, but it was:",a,i);const l=RS(i,a);let u,c;if(o.merge)u=new hr(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const d of o.mergeFields){const g=Qc(e,d,r);if(!a.contains(g))throw new Ve(ve.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);DS(f,g)||f.push(g)}u=new hr(f),c=a.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=a.fieldTransforms;return new tL(new Gn(l),u,c)}class Rp extends O0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rp}}function rL(n,e,r,i){const s=n.createContext(1,e,r);D0("Data must be an object, but it was:",s,i);const o=[],a=Gn.empty();Do(i,(u,c)=>{const f=jS(e,u,r);c=Jt(c);const d=s.childContextForFieldPath(f);if(c instanceof Rp)o.push(f);else{const g=Op(c,d);g!=null&&(o.push(f),a.set(f,g))}});const l=new hr(o);return new CS(a,l,s.fieldTransforms)}function iL(n,e,r,i,s,o){const a=n.createContext(1,e,r),l=[Qc(e,i,r)],u=[s];if(o.length%2!=0)throw new Ve(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)l.push(Qc(e,o[g])),u.push(o[g+1]);const c=[],f=Gn.empty();for(let g=l.length-1;g>=0;--g)if(!DS(c,l[g])){const _=l[g];let x=u[g];x=Jt(x);const I=a.childContextForFieldPath(_);if(x instanceof Rp)c.push(_);else{const P=Op(x,I);P!=null&&(c.push(_),f.set(_,P))}}const d=new hr(c);return new CS(f,d,a.fieldTransforms)}function Op(n,e){if(OS(n=Jt(n)))return D0("Unsupported field value:",e,n),RS(n,e);if(n instanceof O0)return function(i,s){if(!AS(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=Op(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $M(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=St.fromDate(i);return{timestampValue:kd(s.serializer,o)}}if(i instanceof St){const o=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:kd(s.serializer,o)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Cr)return{bytesValue:KI(s.serializer,i._byteString)};if(i instanceof rn){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:v0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ui)return function(a,l){const u=a instanceof ui?a.toArray():a;return{mapValue:{fields:{[bI]:{stringValue:EI},[bd]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw l.createError("VectorValues must only contain numeric values.");return p0(l.serializer,f)})}}}}}}(i,s);if(ZI(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${a0(i)}`)}(n,e)}function RS(n,e){const r={};return gI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(n,(i,s)=>{const o=Op(s,e.childContextForField(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function OS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Fi||n instanceof Cr||n instanceof rn||n instanceof O0||n instanceof ui||ZI(n))}function D0(n,e,r){if(!OS(r)||!pI(r)){const i=a0(r);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Qc(n,e,r){if((e=Jt(e))instanceof R0)return e._internalPath;if(typeof e=="string")return jS(n,e);throw Pd("Field path arguments must be of type string or ",n,!1,void 0,r)}const sL=new RegExp("[~\\*/\\[\\]]");function jS(n,e,r){if(e.search(sL)>=0)throw Pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new R0(...e.split("."))._internalPath}catch{throw Pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Pd(n,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Ve(ve.INVALID_ARGUMENT,l+n+u)}function DS(n,e){return n.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{convertValue(e,r="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Do(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var i,s,o;const r=(o=(s=(i=e.fields)==null?void 0:i[bd].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Ht(a.doubleValue));return new ui(r)}convertGeoPoint(e){return new Fi(Ht(e.latitude),Ht(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=_p(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const r=So(e);return new St(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=It.fromString(e);dt(JI(i),9688,{name:e});const s=new Hc(i.get(1),i.get(3)),o=new ze(i.popFirst(5));return s.isEqual(r)||Cs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends oL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,r)}}const c1="@firebase/firestore",h1="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(Qc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class aL extends LS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function VS(n,e,r){let i;return i=n?r&&(r.merge||r.mergeFields)?n.toFirestore(e,r):n.toFirestore(e):e,i}class Zu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends LS{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(Qc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=_a._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}_a._jsonSchemaVersion="firestore/documentSnapshot/1.0",_a._jsonSchema={type:Xt("string",_a._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Df extends _a{data(e={}){return super.data(e)}}class jl{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Zu(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Df(this._firestore,this._userDataWriter,i.key,i,new Zu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ve(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Df(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Zu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Df(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Zu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:uL(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jl._jsonSchemaVersion="firestore/querySnapshot/1.0",jl._jsonSchema={type:Xt("string",jl._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=NS(e)}set(e,r,i){this._verifyNotCommitted();const s=Fm(e,this._firestore),o=VS(s.converter,r,i),a=PS(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,jr.none())),this}update(e,r,i,...s){this._verifyNotCommitted();const o=Fm(e,this._firestore);let a;return a=typeof(r=Jt(r))=="string"||r instanceof R0?iL(this._dataReader,"WriteBatch.update",o._key,r,i,s):rL(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new m0(r._key,jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fm(n,e){if((n=Jt(n)).firestore!==e)throw new Ve(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n){n=To(n,rn);const e=To(n.firestore,yh),r=Pp(e);return K5(r,n._key).then(i=>hL(e,n,i))}function Um(n){n=To(n,Np);const e=To(n.firestore,yh),r=Pp(e),i=new MS(e);return lL(n._query),W5(r,n._query).then(s=>new jl(e,i,n,s))}function f1(n,e,r){n=To(n,rn);const i=To(n.firestore,yh),s=VS(n.converter,e,r),o=NS(i);return FS(i,[PS(o,"setDoc",n._key,s,n.converter!==null,r).toMutation(n._key,jr.none())])}function FS(n,e){const r=Pp(n);return G5(r,e)}function hL(n,e,r){const i=r.docs.get(e._key),s=new MS(n);return new _a(n,s,e._key,i,new Zu(r.hasPendingWrites,r.fromCache),e.converter)}function zm(n){return n=To(n,yh),Pp(n),new cL(n,e=>FS(n,e))}(function(e,r=!0){GD(lu),zi(new hi("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new yh(new XD(i.getProvider("auth-internal")),new eM(a,i.getProvider("app-check-internal")),yM(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Or(c1,h1,e),Or(c1,h1,"esm2020")})();const US="@firebase/installations",M0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=1e4,$S=`w:${M0}`,BS="FIS_v2",fL="https://firebaseinstallations.googleapis.com/v1",dL=60*60*1e3,pL="installations",mL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pa=new La(pL,mL,gL);function qS(n){return n instanceof fi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS({projectId:n}){return`${fL}/projects/${n}/installations`}function KS(n){return{token:n.token,requestStatus:2,expiresIn:vL(n.expiresIn),creationTime:Date.now()}}async function WS(n,e){const i=(await e.json()).error;return Pa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function GS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function yL(n,{refreshToken:e}){const r=GS(n);return r.append("Authorization",_L(e)),r}async function QS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function vL(n){return Number(n.replace("s","000"))}function _L(n){return`${BS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL({appConfig:n,heartbeatServiceProvider:e},{fid:r}){const i=HS(n),s=GS(n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:BS,appId:n.appId,sdkVersion:$S},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await QS(()=>fetch(i,l));if(u.ok){const c=await u.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:KS(c.authToken)}}else throw await WS("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=/^[cdef][\w-]{21}$/,Iy="";function EL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=TL(n);return bL.test(r)?r:Iy}catch{return Iy}}function TL(n){return xL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new Map;function JS(n,e){const r=jp(n);ZS(r,e),IL(r,e)}function ZS(n,e){const r=XS.get(n);if(r)for(const i of r)i(e)}function IL(n,e){const r=SL();r&&r.postMessage({key:n,fid:e}),kL()}let da=null;function SL(){return!da&&"BroadcastChannel"in self&&(da=new BroadcastChannel("[Firebase] FID Change"),da.onmessage=n=>{ZS(n.data.key,n.data.fid)}),da}function kL(){XS.size===0&&da&&(da.close(),da=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="firebase-installations-database",AL=1,Ra="firebase-installations-store";let $m=null;function L0(){return $m||($m=I2(CL,AL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ra)}}})),$m}async function Rd(n,e){const r=jp(n),s=(await L0()).transaction(Ra,"readwrite"),o=s.objectStore(Ra),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&JS(n,e.fid),e}async function ek(n){const e=jp(n),i=(await L0()).transaction(Ra,"readwrite");await i.objectStore(Ra).delete(e),await i.done}async function Dp(n,e){const r=jp(n),s=(await L0()).transaction(Ra,"readwrite"),o=s.objectStore(Ra),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&JS(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0(n){let e;const r=await Dp(n.appConfig,i=>{const s=NL(i),o=PL(n,s);return e=o.registrationPromise,o.installationEntry});return r.fid===Iy?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function NL(n){const e=n||{fid:EL(),registrationStatus:0};return tk(e)}function PL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Pa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=RL(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OL(n)}:{installationEntry:e}}async function RL(n,e){try{const r=await wL(n,e);return Rd(n.appConfig,r)}catch(r){throw qS(r)&&r.customData.serverCode===409?await ek(n.appConfig):await Rd(n.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function OL(n){let e=await d1(n.appConfig);for(;e.registrationStatus===1;)await YS(100),e=await d1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await V0(n);return i||r}return e}function d1(n){return Dp(n,e=>{if(!e)throw Pa.create("installation-not-found");return tk(e)})}function tk(n){return jL(n)?{fid:n.fid,registrationStatus:0}:n}function jL(n){return n.registrationStatus===1&&n.registrationTime+zS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL({appConfig:n,heartbeatServiceProvider:e},r){const i=ML(n,r),s=yL(n,r),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:$S,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await QS(()=>fetch(i,l));if(u.ok){const c=await u.json();return KS(c)}else throw await WS("Generate Auth Token",u)}function ML(n,{fid:e}){return`${HS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(n,e=!1){let r;const i=await Dp(n.appConfig,o=>{if(!nk(o))throw Pa.create("not-registered");const a=o.authToken;if(!e&&FL(a))return o;if(a.requestStatus===1)return r=LL(n,e),o;{if(!navigator.onLine)throw Pa.create("app-offline");const l=zL(o);return r=VL(n,l),l}});return r?await r:i.authToken}async function LL(n,e){let r=await p1(n.appConfig);for(;r.authToken.requestStatus===1;)await YS(100),r=await p1(n.appConfig);const i=r.authToken;return i.requestStatus===0?F0(n,e):i}function p1(n){return Dp(n,e=>{if(!nk(e))throw Pa.create("not-registered");const r=e.authToken;return $L(r)?{...e,authToken:{requestStatus:0}}:e})}async function VL(n,e){try{const r=await DL(n,e),i={...e,authToken:r};return await Rd(n.appConfig,i),r}catch(r){if(qS(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await ek(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Rd(n.appConfig,i)}throw r}}function nk(n){return n!==void 0&&n.registrationStatus===2}function FL(n){return n.requestStatus===2&&!UL(n)}function UL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+dL}function zL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function $L(n){return n.requestStatus===1&&n.requestTime+zS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(n){const e=n,{installationEntry:r,registrationPromise:i}=await V0(e);return i?i.catch(console.error):F0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(n,e=!1){const r=n;return await HL(r),(await F0(r,e)).token}async function HL(n){const{registrationPromise:e}=await V0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(n){if(!n||!n.options)throw Bm("App Configuration");if(!n.name)throw Bm("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!n.options[r])throw Bm(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Bm(n){return Pa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="installations",WL="installations-internal",GL=n=>{const e=n.getProvider("app").getImmediate(),r=KL(e),i=Va(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},QL=n=>{const e=n.getProvider("app").getImmediate(),r=Va(e,rk).getImmediate();return{getId:()=>BL(r),getToken:s=>qL(r,s)}};function YL(){zi(new hi(rk,GL,"PUBLIC")),zi(new hi(WL,QL,"PRIVATE"))}YL();Or(US,M0);Or(US,M0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="analytics",XL="firebase_id",JL="origin",ZL=60*1e3,e6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",U0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new dp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dr=new La("analytics","Analytics",t6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(n){if(!n.startsWith(U0)){const e=dr.create("invalid-gtag-resource",{gtagURL:n});return Un.warn(e.message),""}return n}function ik(n){return Promise.all(n.map(e=>e.catch(r=>r)))}function r6(n,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,e)),r}function i6(n,e){const r=r6("firebase-js-sdk-policy",{createScriptURL:n6}),i=document.createElement("script"),s=`${U0}?l=${n}&id=${e}`;i.src=r?r==null?void 0:r.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function s6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function o6(n,e,r,i,s,o){const a=i[s];try{if(a)await e[a];else{const u=(await ik(r)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(l){Un.error(l)}n("config",s,o)}async function a6(n,e,r,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await ik(r);for(const u of a){const c=l.find(d=>d.measurementId===u),f=c&&e[c.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,s||{})}catch(o){Un.error(o)}}function l6(n,e,r,i){async function s(o,...a){try{if(o==="event"){const[l,u]=a;await a6(n,e,r,l,u)}else if(o==="config"){const[l,u]=a;await o6(n,e,r,i,l,u)}else if(o==="consent"){const[l,u]=a;n("consent",l,u)}else if(o==="get"){const[l,u,c]=a;n("get",l,u,c)}else if(o==="set"){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Un.error(l)}}return s}function u6(n,e,r,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=l6(o,n,e,r),{gtagCore:o,wrappedGtag:window[s]}}function c6(n){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(U0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=30,f6=1e3;class d6{constructor(e={},r=f6){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sk=new d6;function p6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function m6(n){var a;const{appId:e,apiKey:r}=n,i={method:"GET",headers:p6(r)},s=e6.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw dr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function g6(n,e=sk,r){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw dr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw dr.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new _6;return setTimeout(async()=>{l.abort()},ZL),ok({appId:i,apiKey:s,measurementId:o},a,l,e)}async function ok(n,{throttleEndTimeMillis:e,backoffCount:r},i,s=sk){var l;const{appId:o,measurementId:a}=n;try{await y6(i,e)}catch(u){if(a)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await m6(n);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!v6(c)){if(s.deleteThrottleMetadata(o),a)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const f=Number((l=c==null?void 0:c.customData)==null?void 0:l.httpStatus)===503?qw(r,s.intervalMillis,h6):qw(r,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return s.setThrottleMetadata(o,d),Un.debug(`Calling attemptFetch again in ${f} millis`),ok(n,d,i,s)}}function y6(n,e){return new Promise((r,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);n.addEventListener(()=>{clearTimeout(o),i(dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function v6(n){if(!(n instanceof fi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class _6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function w6(n,e,r,i,s){if(s&&s.global){n("event",r,i);return}else{const o=await e,a={...i,send_to:o};n("event",r,a)}}async function x6(n,e,r,i){if(i&&i.global){const s={};for(const o of Object.keys(r))s[`user_properties.${o}`]=r[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6(){if(x2())try{await b2()}catch(n){return Un.warn(dr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Un.warn(dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function E6(n,e,r,i,s,o,a){const l=g6(n);l.then(g=>{r[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Un.error(g)),e.push(l);const u=b6().then(g=>{if(g)return i.getId()}),[c,f]=await Promise.all([l,u]);c6(o)||i6(o,c.measurementId),s("js",new Date);const d=(a==null?void 0:a.config)??{};return d[JL]="firebase",d.update=!0,f!=null&&(d[XL]=f),s("config",c.measurementId,d),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.app=e}_delete(){return delete Dl[this.app.options.appId],Promise.resolve()}}let Dl={},m1=[];const g1={};let qm="dataLayer",I6="gtag",y1,z0,v1=!1;function S6(){const n=[];if(w2()&&n.push("This is a browser extension environment."),SO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),r=dr.create("invalid-analytics-context",{errorInfo:e});Un.warn(r.message)}}function k6(n,e,r){S6();const i=n.options.appId;if(!i)throw dr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dr.create("no-api-key");if(Dl[i]!=null)throw dr.create("already-exists",{id:i});if(!v1){s6(qm);const{wrappedGtag:o,gtagCore:a}=u6(Dl,m1,g1,qm,I6);z0=o,y1=a,v1=!0}return Dl[i]=E6(n,m1,g1,e,y1,qm,r),new T6(n)}function C6(n=Gv()){n=Jt(n);const e=Va(n,Od);return e.isInitialized()?e.getImmediate():A6(n)}function A6(n,e={}){const r=Va(n,Od);if(r.isInitialized()){const s=r.getImmediate();if(Eo(e,r.getOptions()))return s;throw dr.create("already-initialized")}return r.initialize({options:e})}function N6(n,e,r){n=Jt(n),x6(z0,Dl[n.app.options.appId],e,r).catch(i=>Un.error(i))}function P6(n,e,r,i){n=Jt(n),w6(z0,Dl[n.app.options.appId],e,r,i).catch(s=>Un.error(s))}const _1="@firebase/analytics",w1="0.10.19";function R6(){zi(new hi(Od,(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return k6(i,s,r)},"PUBLIC")),zi(new hi("analytics-internal",n,"PRIVATE")),Or(_1,w1),Or(_1,w1,"esm2020");function n(e){try{const r=e.getProvider(Od).getImmediate();return{logEvent:(i,s,o)=>P6(r,i,s,o),setUserProperties:(i,s)=>N6(r,i,s)}}catch(r){throw dr.create("interop-component-reg-failed",{reason:r})}}}R6();const O6={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"},$0=S2(O6),Hm=KD($0),j6=new fs,Xr=J5($0);typeof window<"u"&&C6($0);const ak=fe.createContext(),Lo=()=>fe.useContext(ak),D6=({children:n})=>{const e=If(()=>xt.contacts.orderBy("lastUpdated").reverse().toArray()),r=If(()=>xt.schedules.orderBy("date").toArray()),i=If(()=>xt.settings.get("userProfile")),[s,o]=fe.useState(null),[a,l]=fe.useState(null),[u,c]=fe.useState(!1),[f,d]=fe.useState(!1);fe.useEffect(()=>{const U=jj(Hm,R=>{l(R)});return()=>U()},[]);const g=async()=>{try{const R=(await tD(Hm,j6)).user,B=oa(Xr,"users",R.uid);return(await Ty(B)).exists()&&await xt.contacts.count()===0&&window.confirm("")&&(l(R),await I()),R}catch(U){throw console.error("Login Error:",U),U}},_=async()=>{try{await Dj(Hm)}catch(U){console.error("Logout Error:",U)}},x=async()=>{if(a){c(!0);try{const U=await xt.contacts.toArray(),R=await xt.schedules.toArray(),B=await xt.settings.get("userProfile"),ae=oa(Xr,"users",a.uid);await f1(ae,{profile:B,lastSynced:new Date,email:a.email},{merge:!0});const ie=async(_e,ce)=>{const q=Vm(Xr,"users",a.uid,_e),ne=(await Um(q)).docs.map(Re=>Re.id),de=ce.map(Re=>Re.id),he=ne.filter(Re=>!de.includes(Re));let me=zm(Xr),Me=0;for(const Re of he)me.delete(oa(q,Re)),Me++,Me===500&&(await me.commit(),me=zm(Xr),Me=0);for(const Re of ce){const Ue=JSON.parse(JSON.stringify(Re));me.set(oa(q,Re.id),Ue),Me++,Me===500&&(await me.commit(),me=zm(Xr),Me=0)}Me>0&&await me.commit()};await ie("contacts",U),await ie("schedules",R),console.log("Synced to cloud successfully (Mirror Mode)")}catch(U){throw console.error("Sync Error:",U),U}finally{c(!1)}}},I=async()=>{if(a){c(!0);try{const U=oa(Xr,"users",a.uid),R=await Ty(U);if(R.exists()){const K=R.data();K.profile&&await xt.settings.put({...K.profile,id:"userProfile"})}const B=Vm(Xr,"users",a.uid,"contacts"),ae=await Um(B),ie=[];ae.forEach(K=>{const ne=K.data();ne.memories&&(ne.memories=ne.memories.map(de=>({...de,date:de.date?new Date(de.date):new Date}))),ie.push(ne)}),ie.length>0&&(await xt.contacts.clear(),await xt.contacts.bulkPut(ie));const _e=Vm(Xr,"users",a.uid,"schedules"),ce=await Um(_e),q=[];ce.forEach(K=>{const ne=K.data();ne.date&&(ne.date=new Date(ne.date)),q.push(ne)}),q.length>0&&(await xt.schedules.clear(),await xt.schedules.bulkPut(q)),console.log("Synced from cloud successfully (Mirror Mode)")}catch(U){throw console.error("Download Error:",U),U}finally{c(!1)}}};fe.useEffect(()=>{(async()=>{await xt.settings.get("userProfile")||await xt.settings.add({id:"userProfile",name:"",bio:"",avatar:"",themeColor:"#2b6cee",links:[],categories:["","","","",""]})})()},[]),fe.useEffect(()=>{if(i!=null&&i.themeColor){document.documentElement.style.setProperty("--primary-color",i.themeColor);const U=i.themeColor.replace("#",""),R=parseInt(U.substring(0,2),16),B=parseInt(U.substring(2,4),16),ae=parseInt(U.substring(4,6),16);document.documentElement.style.setProperty("--primary-color-rgb",`${R}, ${B}, ${ae}`)}},[i==null?void 0:i.themeColor]);const P=async U=>{const R=crypto.randomUUID();return await xt.contacts.add({...U,id:R,lastUpdated:new Date}),R},b=async(U,R)=>{await xt.contacts.update(U,{...R,lastUpdated:new Date})},T=async U=>{await xt.settings.update("userProfile",U)},A=async U=>{await xt.contacts.delete(U)},O=async()=>{if(!a)throw new Error("");const U=await xt.settings.get("userProfile"),R=oa(Xr,"public_profiles",a.uid),B={name:U.name,avatar:U.avatar,bio:U.bio,links:U.links||[],uid:a.uid,updatedAt:new Date};return await f1(R,B),a.uid},M=async(U,R)=>{const B=await xt.contacts.get(U);if(B){const ae=[...B.memories||[],{...R,date:R.date||new Date}];await xt.contacts.update(U,{memories:ae,lastUpdated:new Date})}},[z,N]=fe.useState(null),C=(U,R="")=>new Promise(B=>{N({title:U,placeholder:R,onConfirm:ae=>{N(null),B(ae)},onCancel:()=>{N(null),B(null)}})}),D=async U=>{const R=crypto.randomUUID();return await xt.schedules.add({...U,id:R}),R},L=async(U,R)=>{await xt.schedules.update(U,R)},V=async U=>{await xt.schedules.delete(U)};return y.jsxs(ak.Provider,{value:{contacts:e,schedules:r,currentContactId:s,setCurrentContactId:o,userProfile:i,updateProfile:T,publishProfile:O,addContact:P,updateContact:b,deleteContact:A,addMemory:M,addSchedule:D,updateSchedule:L,deleteSchedule:V,customPrompt:C,promptConfig:z,setPromptConfig:N,currentUser:a,login:g,logout:_,syncToCloud:x,syncFromCloud:I,isSyncing:u,unsavedChanges:f,setUnsavedChanges:d},children:[n,z&&y.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[y.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:z.title}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:z.placeholder,onKeyDown:U=>{U.key==="Enter"&&z.onConfirm(U.target.value),U.key==="Escape"&&z.onCancel()},id:"custom-prompt-input"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:z.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:()=>{const U=document.getElementById("custom-prompt-input").value;z.onConfirm(U)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},M6=()=>{const n=jo(),{contacts:e,addContact:r,updateContact:i,addMemory:s,userProfile:o,updateProfile:a,customPrompt:l,schedules:u,currentUser:c}=Lo(),[f,d]=fe.useState(!1),[g,_]=fe.useState(!1),[x,I]=fe.useState(!1),[P,b]=fe.useState(!1),[T,A]=fe.useState(!1),O=fe.useMemo(()=>c?`${window.location.origin}/nexus-mind/p/${c.uid}`:null,[c]),M=[{icon:"auto_awesome_motion",title:"",desc:"",color:"text-primary"},{icon:"qr_code_2",title:"",desc:" QR  QR Code",color:"text-amber-400"},{icon:"hub",title:"",desc:"",color:"text-indigo-400"},{icon:"search",title:"",desc:"",color:"text-purple-400"},{icon:"calendar_month",title:"",desc:"",color:"text-emerald-400"},{icon:"cloud_sync",title:"100% ",desc:" Google",color:"text-blue-400"}],z=fe.useMemo(()=>{if(!u||!e)return[];const ke=new Date;return ke.setHours(0,0,0,0),u.filter(Xe=>{const yt=new Date(Xe.date);yt.setHours(0,0,0,0);const xn=Math.ceil((yt.getTime()-ke.getTime())/(1e3*60*60*24));return xn>=0&&xn<=3}).map(Xe=>({...Xe,diffDays:Math.ceil((new Date(Xe.date).getTime()-ke.getTime())/(1e3*60*60*24))}))},[u,e]),[N,C]=fe.useState(!1),[D,L]=fe.useState(""),[V,U]=fe.useState(null),[R,B]=fe.useState(""),[ae,ie]=fe.useState(""),[_e,ce]=fe.useState(""),[q,K]=fe.useState(""),[ne,de]=fe.useState(""),[he,me]=fe.useState(new Date().toISOString().split("T")[0]),[Me,Re]=fe.useState("synced"),[Ue,Qe]=fe.useState(!1),Pe=fe.useMemo(()=>(o==null?void 0:o.categories)||["","","","",""],[o]);gt.useEffect(()=>{Pe.length>0&&!ne&&de(Pe[0])},[Pe]);const an=fe.useMemo(()=>D.trim()?(e==null?void 0:e.filter(ke=>{var Xe,yt;return ke.name.toLowerCase().includes(D.toLowerCase())||((Xe=ke.company)==null?void 0:Xe.toLowerCase().includes(D.toLowerCase()))||((yt=ke.tags)==null?void 0:yt.some(xn=>xn.toLowerCase().includes(D.toLowerCase())))}).sort((ke,Xe)=>new Date(Xe.lastUpdated).getTime()-new Date(ke.lastUpdated).getTime()))||[]:[],[e,D]),ln=async()=>{let ke=V;if(!ke&&ae.trim())ke=await r({name:ae,phone:q,tags:[ne,""],importance:50,birthday:_e||null,memories:[]});else if(ke&&(_e||q)){const Xe={};_e&&(Xe.birthday=_e),q&&(Xe.phone=q),await i(ke,Xe)}ke&&R.trim()&&(await s(ke,{content:R,location:"",date:new Date(he)}),C(!1),L(""),U(null),B(""),ie(""),ce(""),K(""),de(Pe[0]||""),me(new Date().toISOString().split("T")[0]),d(!1),navigator.vibrate&&navigator.vibrate(50))},at=async ke=>{const Xe=ke.target.files[0];if(Xe){_(!0);try{const yt=new FileReader,Vo=await new Promise(Ot=>{yt.onloadend=()=>Ot(yt.result),yt.readAsDataURL(Xe)}),Ct=(await QR.recognize(Xe,"chi_tra+eng",{logger:Ot=>console.log(Ot)})).data.text,Rt=Ct.split(`
`).map(Ot=>Ot.trim()).filter(Boolean);let un=" (OCR)",Fo="",Lr="",Rs="";const tr=/(?:\+?886|0)9\d{2}-?\d{3}-?\d{3}|(?:\+?886|0)\d{1,2}-?\d{3,4}-?\d{4}/,nr=Ct.match(tr);nr&&(Fo=nr[0]);const vr=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/,pi=Ct.match(vr);pi&&(Lr=pi[0]);const mi=["","","","","Co.","Ltd.","Inc.","Corp."],Os=Rt.find(Ot=>mi.some(Wt=>Ot.includes(Wt))&&Ot.length>2&&Ot.length<30);if(Os&&(Rs=Os.trim()),Rt.length>0){const Ot=Rt.find(Wt=>{const Gi=Wt.length>10,qn=Wt.length<2,Oe=Wt.includes("@"),gi=/\d{4}/.test(Wt),Hn=Rs===Wt||mi.some(Ie=>Wt.includes(Ie)),Qi=["","","","","","",""].some(Ie=>Wt.includes(Ie));return!Gi&&!qn&&!Oe&&!gi&&!Hn&&!Qi});Ot&&(un=Ot)}const Wi=await r({name:un,phone:Fo,email:Lr,company:Rs,cardImage:Vo,ocrText:Ct,tags:["OCR "],memories:[{date:new Date,content:`
${Ct.substring(0,100)}...`,location:""}],importance:50});navigator.vibrate&&navigator.vibrate(50),n(`/profile/${Wi}`)}catch(yt){console.error("OCR failed:",yt)}finally{_(!1),d(!1)}}};return y.jsxs("div",{className:"w-full h-full",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 mb-2 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>A(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-amber-400 hover:bg-amber-400/10 hover:border-amber-400/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"qr_code_2"})}),y.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>n("/settings"),children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-primary to-primary/60 p-0.5 shadow-lg shadow-primary/20 relative z-10",children:y.jsx("div",{className:"w-full h-full rounded-[14px] bg-[#0a0a0c] flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar?y.jsx("img",{src:o.avatar,className:"w-full h-full object-cover",alt:"avatar"}):y.jsx("span",{className:"material-symbols-outlined text-white/20 text-2xl",children:"person"})})})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-clip-text",children:""}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"size-1.5 rounded-full bg-primary animate-pulse"}),y.jsx("p",{className:"text-[10px] font-black text-white/30 tracking-[0.2em] uppercase",children:"Nexus Core Active"})]})]})]}),y.jsx("button",{onClick:()=>b(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 hover:border-primary/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"help_outline"})})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{type:"text",placeholder:"...",value:D,onChange:ke=>L(ke.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/40 transition-all"})]})]}),z.length>0&&y.jsx("div",{className:"px-6 py-4 animate-in fade-in slide-in-from-top-4 duration-500",children:y.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-[28px] p-5 backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"notification_important"}),y.jsx("h2",{className:"text-xs font-bold text-primary uppercase tracking-widest",children:""})]}),y.jsx("div",{className:"space-y-4",children:z.map(ke=>y.jsxs("div",{className:"flex items-center justify-between group",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 truncate",children:ke.title}),y.jsxs("div",{className:"flex gap-2",children:[ke.contactIds.slice(0,3).map(Xe=>{var yt;return y.jsx("button",{onClick:()=>n(`/profile/${Xe}`),className:"text-[10px] text-primary/80 font-bold hover:text-primary transition-colors underline decoration-primary/30 underline-offset-2",children:(yt=e.find(xn=>xn.id===Xe))==null?void 0:yt.name},Xe)}),ke.contactIds.length>3&&y.jsx("span",{className:"text-[10px] text-white/30",children:"..."})]})]}),y.jsxs("div",{className:"text-right shrink-0 ml-4",children:[y.jsx("p",{className:"text-[10px] font-black text-primary uppercase",children:ke.diffDays===0?"":`${ke.diffDays} `}),y.jsxs("button",{onClick:()=>n("/vault"),className:"text-[10px] font-bold text-white/30 hover:text-white transition-colors flex items-center gap-1 mt-1",children:["",y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"})]})]})]},ke.id))})]})}),y.jsx("div",{className:"mb-8 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:["","","",""].map((ke,Xe)=>y.jsx("button",{className:`px-5 py-2.5 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-300 ${Xe===0?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white border border-white/5"}`,children:ke},ke))})}),y.jsxs("main",{className:"flex-1 pb-32",children:[g&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/5 rounded-3xl border border-white/5 border-dashed",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl animate-pulse"}),y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent relative z-10"})]}),y.jsx("span",{className:"mt-4 text-sm font-medium text-white/40 animate-pulse",children:"..."})]}),(e==null?void 0:e.length)===0&&!g&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-white/20",children:[y.jsx("div",{className:"size-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"database_off"})}),y.jsx("p",{className:"text-sm font-medium",children:""})]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:an.map(ke=>{var Xe,yt,xn;return y.jsx("div",{onClick:()=>n(`/profile/${ke.id}`),className:"glass-card-modern group p-5 rounded-[24px] cursor-pointer",children:y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"size-16 rounded-2xl overflow-hidden bg-black/40 border border-white/10 group-hover:border-primary/40 transition-all duration-500",children:ke.cardImage?y.jsx("img",{src:ke.cardImage,alt:ke.name,className:"size-full object-cover group-hover:scale-110 transition-transform duration-700"}):y.jsx("div",{className:"size-full flex items-center justify-center text-white/10 text-2xl font-black bg-gradient-to-br from-white/5 to-transparent",children:ke.name[0]})}),ke.importance>80&&y.jsx("div",{className:"absolute -top-1.5 -right-1.5 size-5 bg-primary rounded-full border-2 border-[#030303] flex items-center justify-center shadow-lg shadow-primary/40",children:y.jsx("span",{className:"material-symbols-outlined text-[10px] text-white font-black",children:"priority_high"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[y.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors truncate",children:ke.name}),y.jsx("span",{className:"text-[10px] font-medium text-white/20 tracking-wider uppercase",children:new Date(ke.lastUpdated).toLocaleDateString("zh-TW",{month:"short",day:"numeric"})})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[10px] font-black text-primary px-2.5 py-1 bg-primary/10 rounded-lg border border-primary/20 uppercase tracking-widest",children:((Xe=ke.tags)==null?void 0:Xe[0])||""}),y.jsx("p",{className:"text-[13px] text-white/40 truncate italic font-medium",children:((xn=(yt=ke.memories)==null?void 0:yt[0])==null?void 0:xn.content)||"..."})]})]}),y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 -translate-x-2 group-hover:translate-x-0",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary text-xl",children:"chevron_right"})})]})},ke.id)})})]}),y.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:y.jsxs("div",{className:"relative",children:[f&&y.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[y.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:at})]}),y.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>C(!0),children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),y.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${f?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>d(!f),children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),P&&y.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-white/10 rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"px-8 pt-10 pb-6 text-center border-b border-white/5 bg-gradient-to-b from-primary/10 to-transparent",children:[y.jsx("div",{className:"size-16 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"auto_awesome"})}),y.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-bold text-primary/60 uppercase tracking-[0.2em] mt-1",children:"Nexus Mind Guide"})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto no-scrollbar space-y-6",children:M.map((ke,Xe)=>y.jsxs("div",{className:"flex gap-4 group",children:[y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0 group-hover:bg-white/10 transition-colors",children:y.jsx("span",{className:`material-symbols-outlined text-[20px] ${ke.color}`,children:ke.icon})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("h4",{className:"text-xs font-bold text-white/90",children:ke.title}),y.jsx("p",{className:"text-[10px] leading-relaxed text-white/40 font-medium",children:ke.desc})]})]},Xe))}),y.jsx("div",{className:"p-6 bg-white/5",children:y.jsx("button",{onClick:()=>b(!1),className:"w-full py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 active:scale-95",children:""})})]})}),T&&y.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center px-4 pb-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>A(!1)}),y.jsxs("div",{className:"w-full max-w-[440px] bg-gradient-to-b from-[#1a1c22] to-[#0a0a0c] border border-white/10 rounded-[40px] p-8 relative z-10 animate-in slide-in-from-bottom-full duration-500 shadow-2xl",children:[y.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full mx-auto mb-10"}),y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"size-20 rounded-[28px] bg-amber-400/10 flex items-center justify-center mb-6 ring-1 ring-amber-400/20",children:y.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"qr_code_2"})}),y.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:""}),c?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-white/40 text-sm mb-10 leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),y.jsx("div",{className:"p-6 bg-white rounded-[32px] shadow-2xl relative z-10",children:y.jsx(Kv,{value:O,size:240,level:"H",includeMargin:!0,imageSettings:{src:(o==null?void 0:o.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:48,width:48,excavate:!0}})})]}),y.jsxs("div",{className:"mt-10 w-full p-5 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between group cursor-pointer hover:bg-white/10 transition-all",onClick:()=>{navigator.clipboard.writeText(O),alert("")},children:[y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-1",children:""}),y.jsx("span",{className:"text-xs text-primary font-bold truncate max-w-[200px]",children:O})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors",children:"content_copy"})]})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-white/40 text-sm leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("button",{onClick:login,className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-black font-black text-sm hover:bg-white/90 transition-all active:scale-95 shadow-xl",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})," Google "]})]})]}),y.jsx("button",{onClick:()=>A(!1),className:"w-full h-16 bg-white/5 hover:bg-white/10 text-white font-bold rounded-3xl mt-8 transition-all border border-white/5 active:scale-95",children:""})]})]}),N&&y.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[y.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>C(!1)}),y.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[y.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),y.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),y.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),y.jsx("button",{onClick:()=>C(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:D,onChange:ke=>{L(ke.target.value),V||ie(ke.target.value)}}),V&&y.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[y.jsx("span",{children:""}),y.jsx("button",{onClick:()=>{U(null),L(ae)},className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),D&&!V&&y.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:an.length>0?an.map(ke=>{var Xe;return y.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{U(ke.id),L(ke.name),ie(ke.name)},children:[y.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:ke.name}),y.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(Xe=ke.tags)==null?void 0:Xe[0]})]},ke.id)}):y.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",D,""]})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pe.map(ke=>y.jsx("button",{onClick:()=>de(ke),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${ne===ke?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:ke},ke)),y.jsxs("button",{onClick:async()=>{const ke=await l("","...");if(ke){const Xe=(o==null?void 0:o.categories)||["","","","",""];Xe.includes(ke)||(a({...o,categories:[...Xe,ke]}),de(ke))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:R,onChange:ke=>B(ke.target.value)})]}),y.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3.5 text-white text-sm focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:he,onChange:ke=>me(ke.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3.5 text-white text-sm focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:q,onChange:ke=>K(ke.target.value)})]})]}),y.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${(V||ae)&&R?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!((V||ae)&&R),onClick:ln,children:""})]})]})]})]})},L6=()=>{const n=jo(),{contacts:e,userProfile:r}=Lo(),[i,s]=fe.useState(""),[o,a]=fe.useState(""),l=fe.useMemo(()=>["",...(r==null?void 0:r.categories)||["","","","",""]],[r]),u=fe.useMemo(()=>{let c=e||[];if(o!==""&&(c=c.filter(f=>{var d;return(d=f.tags)==null?void 0:d.includes(o)})),i.trim()){const f=i.toLowerCase();c=c.filter(d=>{var T,A,O,M,z,N;const g=(T=d.name)==null?void 0:T.toLowerCase().includes(f),_=(A=d.company)==null?void 0:A.toLowerCase().includes(f),x=(O=d.phone)==null?void 0:O.toLowerCase().includes(f),I=(M=d.tags)==null?void 0:M.some(C=>C.toLowerCase().includes(f)),P=(z=d.ocrText)==null?void 0:z.toLowerCase().includes(f),b=(N=d.memories)==null?void 0:N.some(C=>C.content.toLowerCase().includes(f));return g||_||x||I||P||b?(d._matchReason=g?"":_?"":x?"":I?` #${f}`:P?"":"",!0):!1})}else o===""&&(c=c.slice(0,5));return c},[e,i,o]);return y.jsxs("div",{className:"bg-mesh pb-32 overflow-x-hidden",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-12 pb-6 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",onClick:()=>n(-1),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),y.jsx("div",{className:"size-10"})]})]}),y.jsx("div",{className:"px-6 py-6",children:y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 text-[20px] group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{className:"block w-full h-12 pl-12 pr-10 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[14px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:i,onChange:c=>s(c.target.value)}),i&&y.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:y.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>s(""),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),y.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:l.map(c=>y.jsx("button",{onClick:()=>a(c),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${o===c?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:y.jsx("span",{className:"text-xs font-bold tracking-wider",children:c})},c))}),y.jsxs("main",{className:"px-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[y.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:i||o!==""?` (${u.length})`:""}),y.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),y.jsx("div",{className:"grid gap-4",children:u.map(c=>y.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>n(`/profile/${c.id}`),children:y.jsxs("div",{className:"p-5 flex gap-4",children:[y.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:c.cardImage?y.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:c.cardImage,alt:c.name}):y.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[y.jsx("div",{className:"flex items-center gap-2 mb-1",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:c._matchReason||""})}),y.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:c.name}),y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[c.phone&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),y.jsx("span",{className:"text-[11px] font-medium",children:c.phone})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),y.jsx("span",{className:"text-[11px] font-medium",children:new Date(c.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},c.id))}),u.length===0&&y.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),y.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},V6=()=>{var C,D,L,V,U;const{id:n}=KT(),e=jo(),{updateContact:r,deleteContact:i,userProfile:s,updateProfile:o,customPrompt:a,schedules:l}=Lo(),u=If(()=>xt.contacts.get(n),[n]),c=fe.useMemo(()=>!l||!n?[]:l.filter(R=>R.contactIds.includes(n)),[l,n]),[f,d]=fe.useState(!1),[g,_]=fe.useState(!1),[x,I]=fe.useState(null),[P,b]=fe.useState(!1),T=(R,B)=>{const ae=R.target.files[0];if(!ae)return;const ie=new FileReader;ie.onloadend=()=>{const _e=ie.result;I(ce=>({...ce,cardImage:_e}))},ie.readAsDataURL(ae)};if(!u)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const A=()=>{var R;I({name:u.name,company:u.company||"",birthday:u.birthday||"",phone:u.phone||"",email:u.email||"",tags:((R=u.tags)==null?void 0:R.join(", "))||"",ocrText:u.ocrText||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[],cardImage:u.cardImage||""}),_(!0),d(!1)},O=async()=>{await r(n,{name:x.name,company:x.company,birthday:x.birthday||null,phone:x.phone,email:x.email,tags:x.tags.split(",").map(R=>R.trim()).filter(R=>R),ocrText:x.ocrText,events:x.events,bio:x.bio,links:x.links,gallery:x.gallery,cardImage:x.cardImage}),_(!1)},M=()=>{var B;const R=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(B=u.tags)!=null&&B.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(R),b(!0),setTimeout(()=>b(!1),2e3),d(!1)},z=async()=>{window.confirm(` ${u.name} `)&&(await i(n),e("/"))},N=async R=>{if(window.confirm("")){const B=[...u.memories];B.splice(R,1),await r(n,{memories:B})}};return y.jsxs("div",{className:"bg-nexus min-h-screen text-white pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-8 pb-4 flex items-center justify-between transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsx("div",{onClick:()=>e(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90 cursor-pointer",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile Analytics"})]}),y.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[y.jsx("button",{onClick:()=>d(!f),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_vert"})}),f&&y.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[y.jsxs("button",{onClick:A,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),y.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),y.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),y.jsxs("button",{onClick:z,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),y.jsx("span",{children:""})]})]})]})]}),y.jsx("div",{className:"px-6 py-4",children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((C=u.tags)==null?void 0:C[0])||""})}),y.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),y.jsxs("div",{className:"flex flex-col gap-1",children:[u.company&&y.jsxs("div",{className:"flex items-center gap-2 text-primary/80 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"business"}),y.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:u.company})]}),u.phone&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.email&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.email})]})]})]})})]})}),y.jsxs("div",{className:"px-6 pb-2",children:[c.length>0&&y.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary ml-1",children:""}),y.jsx("div",{className:"space-y-3",children:c.map(R=>{const B=Math.ceil((new Date(R.date)-new Date().setHours(0,0,0,0))/864e5),ae=B>=0&&B<=3;return y.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${ae?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/5":"bg-white/5 border-white/10"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm text-white",children:R.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(R.date).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})})]}),y.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg ${ae?"bg-primary text-white":"bg-white/10 text-white/60"}`,children:B===0?"":B<0?"":`${B} `})]}),ae&&y.jsxs("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-primary animate-pulse",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"info"}),""]})]},R.id)})})]}),g?y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsxs("div",{onClick:()=>document.getElementById("card-image-input").click(),className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/10 group cursor-pointer hover:border-primary/50 transition-all shadow-2xl",children:[x.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${x.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})}):y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-white/20",children:[y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_a_photo"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("input",{id:"card-image-input",type:"file",accept:"image/*",className:"hidden",onChange:R=>T(R)})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:x.name,onChange:R=>I({...x,name:R.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:x.company,onChange:R=>I({...x,company:R.target.value})})]}),y.jsxs("div",{className:"flex flex-col sm:grid sm:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:x.phone,onChange:R=>I({...x,phone:R.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"email",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"example@mail.com",value:x.email,onChange:R=>I({...x,email:R.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (YYYY-MM-DD)"}),y.jsx("input",{type:"date",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:x.birthday,onChange:R=>I({...x,birthday:R.target.value})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:y.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((s==null?void 0:s.categories)||["","","","",""]).map(R=>{const B=x.tags.split(",").map(ie=>ie.trim()).filter(ie=>ie),ae=B.includes(R);return y.jsx("button",{type:"button",onClick:()=>{let ie;ae?ie=B.filter(_e=>_e!==R):ie=[...B,R],I({...x,tags:ie.join(", ")})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${ae?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:R},R)}),y.jsxs("button",{type:"button",onClick:async()=>{const R=await a("","...");if(R){const B=(s==null?void 0:s.categories)||["","","","",""];if(!B.includes(R)){o({...s,categories:[...B,R]});const ae=x.tags.split(",").map(ie=>ie.trim()).filter(ie=>ie);I({...x,tags:[...ae,R].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),y.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:x.bio,onChange:R=>I({...x,bio:R.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>I({...x,links:[...x.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:x.links.map((R,B)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-300",children:[y.jsx("input",{className:"w-20 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all shrink-0",placeholder:"",value:R.label,onChange:ae=>{const ie=[...x.links];ie[B].label=ae.target.value,I({...x,links:ie})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:R.url,onChange:ae=>{const ie=[...x.links];ie[B].url=ae.target.value,I({...x,links:ie})}}),y.jsx("button",{onClick:()=>I({...x,links:x.links.filter((ae,ie)=>ie!==B)}),className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},B))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]}),y.jsx("input",{id:"gallery-upload-input",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:R=>{Array.from(R.target.files).forEach(ae=>{const ie=new FileReader;ie.onloadend=()=>{I(_e=>({..._e,gallery:[..._e.gallery,ie.result]}))},ie.readAsDataURL(ae)})}})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[x.gallery.map((R,B)=>y.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[y.jsx("img",{src:R,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),y.jsx("button",{onClick:()=>I({...x,gallery:x.gallery.filter((ae,ie)=>ie!==B)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},B)),y.jsx("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:x.ocrText,onChange:R=>I({...x,ocrText:R.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),y.jsxs("button",{onClick:()=>I({...x,events:[...x.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:x.events.map((R,B)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-200",children:[y.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-2 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-[110px] shrink-0",value:R.date,onChange:ae=>{const ie=[...x.events];ie[B].date=ae.target.value,I({...x,events:ie})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:R.title,onChange:ae=>{const ie=[...x.events];ie[B].title=ae.target.value,I({...x,events:ie})}}),y.jsx("button",{onClick:()=>{const ae=[...x.events];ae.splice(B,1),I({...x,events:ae})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},B))})]}),y.jsxs("div",{className:"flex gap-3 pt-6",children:[y.jsx("button",{onClick:O,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),y.jsx("button",{onClick:()=>_(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),y.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:((D=u.ocrText)==null?void 0:D.split(`
`)[0])||""}),u.phone&&y.jsxs("div",{className:"flex items-center gap-2 mt-2 text-primary/80",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&y.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((R,B)=>y.jsxs("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),R.label]},B))}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[(L=u.tags)==null?void 0:L.map((R,B)=>y.jsxs("div",{className:`${B===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",R]},B)),u.birthday&&y.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})]}),y.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&y.jsxs("div",{className:"px-4 mb-6",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((R,B)=>y.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:y.jsx("img",{src:R,className:"w-full h-full object-cover",alt:`gallery-${B}`})},B))})]}),y.jsxs("div",{className:"px-4",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),y.jsxs("div",{className:"space-y-8",children:[(V=u.memories)==null?void 0:V.map((R,B)=>y.jsxs("div",{className:`relative ${B!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[y.jsx("div",{className:`absolute ${B===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex flex-col flex-1",children:[y.jsx("span",{className:"text-white font-semibold text-sm",children:R.content}),y.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(R.date).toLocaleDateString("zh-TW"),"  ",R.location]})]}),y.jsx("button",{onClick:()=>N(B),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},B)),!((U=u.memories)!=null&&U.length)&&y.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),P&&y.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),y.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},F6=()=>{var T;const n=jo(),{contacts:e,updateContact:r,addMemory:i}=Lo(),[s,o]=fe.useState(!1),[a,l]=fe.useState(""),[u,c]=fe.useState(65),[f,d]=fe.useState(40),[g,_]=fe.useState(null);fe.useEffect(()=>{e&&e.length>0&&!g&&(_(e[0].id),c(e[0].importance||50))},[e]);const x=A=>{const O=parseInt(A.target.value);c(O),g&&r(g,{importance:O})},I=async()=>{!a.trim()||!g||(await i(g,{content:a,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),l(""),o(!1))},P=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),I())},b=e==null?void 0:e.find(A=>A.id===g);return y.jsxs("div",{className:"text-white overflow-hidden select-none relative h-screen bg-[#030303]",children:[y.jsxs("div",{className:"absolute top-0 w-full z-50 px-8 pt-6 pb-4 flex justify-between items-center transition-all",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none -z-10"}),y.jsx("div",{className:"text-sm font-black tracking-tighter",onClick:()=>n(-1),children:y.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded-md backdrop-blur-md",children:"9:41"})}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),y.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>o(!0),children:[y.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),y.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),y.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>n("/"),children:[y.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[y.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),y.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[y.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),y.jsxs("div",{className:"text-center py-2",children:[y.jsx("div",{className:"text-sm font-bold truncate w-28",children:(b==null?void 0:b.name)||""}),y.jsx("div",{className:"text-xs text-white/50",children:((T=b==null?void 0:b.tags)==null?void 0:T[0])||""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:u,onChange:x,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${u}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${u>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${u>50?"text-black/40":"text-white/40"}`,children:""})]})]}),y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:A=>d(parseInt(A.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${f}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${f>50?"text-black/40":"text-white/40"}`,children:"speed"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${f>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>n("/search"),children:y.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),y.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),y.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),s&&y.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),y.jsx("button",{onClick:()=>o(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),y.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:a,onChange:A=>l(A.target.value),onKeyDown:P}),y.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),y.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:I,children:" SAVE TO VAULT"})]})]})}),y.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[y.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),y.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},U6=()=>{const n=jo(),{contacts:e,schedules:r,addSchedule:i,deleteSchedule:s}=Lo(),[o,a]=fe.useState(!1),[l,u]=fe.useState({title:"",date:"",contactIds:[]}),[c,f]=fe.useState(""),d=fe.useMemo(()=>e?e.filter(I=>{var P;return I.name.toLowerCase().includes(c.toLowerCase())||((P=I.tags)==null?void 0:P.some(b=>b.toLowerCase().includes(c.toLowerCase())))}):[],[e,c]),g=fe.useMemo(()=>{if(!e)return[];const I=[],P=new Date;P.setHours(0,0,0,0),r&&r.forEach(T=>{const A=new Date(T.date);A.setHours(0,0,0,0);const O=Math.ceil((A-P)/(1e3*60*60*24));I.push({id:`schedule-${T.id}`,date:A,title:T.title,description:`: ${T.contactIds.map(M=>{var z;return(z=e.find(N=>N.id===M))==null?void 0:z.name}).filter(Boolean).join(", ")}`,type:"schedule",diffDays:O,isUpcoming:O<=30&&O>=0,contactIds:T.contactIds,scheduleId:T.id})});const b=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(T=>{if(T.birthday){const[A,O,M]=T.birthday.split("-").map(Number),z=new Date(P.getFullYear(),O-1,M);z<P&&z.setFullYear(P.getFullYear()+1);const N=Math.ceil((z-P)/(1e3*60*60*24));I.push({id:`birthday-${T.id}`,contactId:T.id,contactName:T.name,date:z,title:"",description:`${T.name} `,type:"birthday",diffDays:N,isUpcoming:N<=30&&N>=0})}if(T.events&&T.events.forEach((A,O)=>{const M=new Date(A.date);M.setHours(0,0,0,0);const z=Math.ceil((M-P)/(1e3*60*60*24));I.push({id:`event-${T.id}-${O}`,contactId:T.id,contactName:T.name,date:M,title:A.title,description:"",type:A.type||"event",diffDays:z,isUpcoming:z<=30&&z>=0})}),T.memories&&T.memories.forEach((A,O)=>{const M=new Date(A.date);M.setHours(0,0,0,0);const z=Math.ceil((M-P)/(1e3*60*60*24));I.push({id:`memory-${T.id}-${O}`,contactId:T.id,contactName:T.name,date:M,title:"",description:A.content.substring(0,20)+(A.content.length>20?"...":""),type:"memory",diffDays:z,isUpcoming:z<=30&&z>=0});let N;for(;(N=b.exec(A.content))!==null;){const[C,D,L,V]=N,U=D?parseInt(D.replace(/[-/]/,"")):P.getFullYear(),R=new Date(U,parseInt(L)-1,parseInt(V));if(R.setHours(0,0,0,0),!isNaN(R.getTime())){const B=Math.ceil((R-P)/864e5);I.push({id:`extracted-mem-${T.id}-${O}-${N.index}`,contactId:T.id,contactName:T.name,date:R,title:"",description:`: ${C}`,type:"extracted",diffDays:B,isUpcoming:B<=30&&B>=0})}}}),T.ocrText){let A;for(;(A=b.exec(T.ocrText))!==null;){const[O,M,z,N]=A,C=M?parseInt(M.replace(/[-/]/,"")):P.getFullYear(),D=new Date(C,parseInt(z)-1,parseInt(N));if(D.setHours(0,0,0,0),!isNaN(D.getTime())){const L=Math.ceil((D-P)/864e5);I.push({id:`extracted-ocr-${T.id}-${A.index}`,contactId:T.id,contactName:T.name,date:D,title:"/",description:`: ${O}`,type:"extracted",diffDays:L,isUpcoming:L<=30&&L>=0})}}}}),I.sort((T,A)=>A.date-T.date)},[e]),_=g.filter(I=>I.isUpcoming),x=g.filter(I=>!I.isUpcoming);return y.jsxs("div",{className:"pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>n(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"Important Schedules"})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"size-11 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/20",children:y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})})]})]}),y.jsxs("main",{className:"p-4 space-y-8",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),y.jsx("div",{className:"space-y-3",children:_.length>0?_.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${I.type==="birthday"?"bg-pink-500/20 text-pink-500":I.type==="memory"?"bg-blue-500/20 text-blue-500":I.type==="extracted"?"bg-amber-500/20 text-amber-500":I.type==="schedule"?"bg-emerald-500/20 text-emerald-500":"bg-primary/20 text-primary"}`,children:y.jsx("span",{className:"material-symbols-outlined",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-bold text-sm text-white/90 truncate",children:I.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-0.5 truncate",children:I.contactName||""})]}),y.jsxs("div",{className:"text-right shrink-0",children:[y.jsx("p",{className:"text-xs font-bold text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),y.jsx("p",{className:`text-[10px] font-bold ${I.diffDays===0?"text-red-500":"text-primary"}`,children:I.diffDays===0?"":`${I.diffDays} `}),I.type==="schedule"&&y.jsx("button",{onClick:P=>{P.stopPropagation(),window.confirm("")&&s(I.scheduleId)},className:"mt-1 text-red-500/40 hover:text-red-500 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"delete"})})]})]}),y.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:I.description})]})]},I.id)):y.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:y.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),y.jsx("div",{className:"space-y-3",children:x.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsxs("div",{className:"text-center min-w-[50px]",children:[y.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:I.date.getFullYear()}),y.jsx("p",{className:"text-sm font-black text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),y.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[I.title,"  ",I.contactName||""]}),y.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:I.description})]})]},I.id))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-[480px] bg-[#1a1a1a] border-t sm:border border-white/10 rounded-t-[32px] sm:rounded-[32px] p-8 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:""}),y.jsx("button",{onClick:()=>a(!1),className:"material-symbols-outlined text-white/40",children:"close"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all",placeholder:"...",value:l.title,onChange:I=>u({...l,title:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all color-scheme-dark",value:l.date,onChange:I=>u({...l,date:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center ml-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),l.contactIds.length>0&&y.jsxs("span",{className:"text-[10px] font-bold text-primary/60",children:[" ",l.contactIds.length," "]})]}),y.jsxs("div",{className:"relative mb-3",children:[y.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-[18px]",children:"search"}),y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-white text-xs font-medium outline-none focus:ring-1 ring-primary/50 transition-all",placeholder:"...",value:c,onChange:I=>f(I.target.value)}),c&&y.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2 size-6 flex items-center justify-center text-white/20 hover:text-white/40",children:y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),y.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar p-1",children:d.length>0?d.map(I=>y.jsx("button",{onClick:()=>{const P=l.contactIds.includes(I.id)?l.contactIds.filter(b=>b!==I.id):[...l.contactIds,I.id];u({...l,contactIds:P})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${l.contactIds.includes(I.id)?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:I.name},I.id)):y.jsx("div",{className:"w-full py-4 text-center text-[10px] text-white/20 italic",children:""})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:async()=>{!l.title||!l.date||(await i(l),a(!1),u({title:"",date:"",contactIds:[]}))},disabled:!l.title||!l.date,className:"flex-1 py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none",children:""})]})]})]})})]})},z6=()=>{var _e,ce;const n=jo(),{userProfile:e,updateProfile:r,publishProfile:i,customPrompt:s,currentUser:o,login:a,logout:l,syncToCloud:u,syncFromCloud:c,isSyncing:f,setUnsavedChanges:d}=Lo(),[g,_]=fe.useState(!1),[x,I]=fe.useState(!1),[P,b]=fe.useState(!1),[T,A]=fe.useState(""),[O,M]=fe.useState({name:"",bio:"",avatar:"",themeColor:"",links:[],categories:[]}),z=JSON.stringify(O)!==JSON.stringify({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",themeColor:(e==null?void 0:e.themeColor)||"#2b6cee",links:(e==null?void 0:e.links)||[],categories:(e==null?void 0:e.categories)||["","","","",""]});fe.useEffect(()=>(d(g&&z),()=>d(!1)),[g,z,d]),fe.useEffect(()=>{const q=K=>{g&&z&&(K.preventDefault(),K.returnValue="")};return window.addEventListener("beforeunload",q),()=>{window.removeEventListener("beforeunload",q)}},[g,z]);const N=()=>{g&&z?window.confirm("")&&(d(!1),n(-1)):n(-1)};fe.useEffect(()=>{e&&M({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",themeColor:e.themeColor||"#2b6cee",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const C=[{name:"Nexus Blue",value:"#2b6cee"},{name:"Cyber Purple",value:"#8b5cf6"},{name:"Neon Pink",value:"#ec4899"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Crimson",value:"#ef4444"},{name:"Midnight",value:"#334155"}],D=async()=>{await r(O),d(!1),_(!1)},L=q=>{const K=q.target.files[0];if(!K)return;const ne=new FileReader;ne.onloadend=()=>{M(de=>({...de,avatar:ne.result}))},ne.readAsDataURL(K)},V=async()=>{try{await u(),alert("")}catch(q){alert(""+q.message)}},U=async()=>{if(window.confirm(""))try{await c(),alert("")}catch(q){alert(""+q.message)}},R=async()=>{const q=await s("","...");if(q)if(g)O.categories.includes(q)||M({...O,categories:[...O.categories,q]});else{const K=e.categories||["","","","",""];K.includes(q)||await r({...e,categories:[...K,q]})}},B=async(q,K)=>{const ne=await s("","...",q);if(ne&&ne!==q)if(g){const de=[...O.categories];de[K]=ne,M({...O,categories:de})}else{const de=[...e.categories||["","","","",""]];de[K]=ne,await r({...e,categories:de})}},ae=async()=>{if(!o){alert(" Google ");return}b(!0);try{const q=await i(),K=`${window.location.origin}/nexus-mind/p/${q}`;A(K),I(!0)}catch(q){console.error("Publish Error:",q),alert("")}finally{b(!1)}},ie=async q=>{g?M({...O,themeColor:q}):await r({...e,themeColor:q})};return e?y.jsxs("div",{className:"text-white pb-24",children:[y.jsxs("div",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:N,className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"v1.0.1  User Preferences"})]})]}),g?y.jsx("button",{onClick:D,className:"text-xs font-black text-white px-6 py-2.5 rounded-xl bg-primary hover:bg-primary-dark transition-all uppercase tracking-widest shadow-lg shadow-primary/20",children:""}):y.jsx("button",{onClick:()=>_(!0),className:"text-xs font-black text-primary px-5 py-2.5 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary hover:text-white transition-all uppercase tracking-widest shadow-lg shadow-primary/10",children:""})]})]}),y.jsxs("main",{className:"px-6 pt-8 space-y-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:O.avatar?y.jsx("img",{src:O.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):y.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),g&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>document.getElementById("avatar-input").click(),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})}),y.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:L})]})]}),y.jsx("div",{className:"text-center space-y-1 w-full",children:g?y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:O.name,onChange:q=>M({...O,name:q.target.value}),placeholder:""}):y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})}),!g&&y.jsxs("button",{onClick:ae,disabled:P,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:border-primary/50 hover:bg-primary/10 transition-all group",children:[y.jsx("span",{className:`material-symbols-outlined text-sm ${P?"animate-spin":"text-primary"}`,children:P?"sync":"share"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/60 group-hover:text-primary transition-colors",children:""})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),g?y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px]",value:O.bio,onChange:q=>M({...O,bio:q.target.value}),placeholder:"..."}):y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic whitespace-pre-wrap",children:e.bio||""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),g&&y.jsxs("button",{onClick:()=>M({...O,links:[...O.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),y.jsxs("div",{className:"space-y-2",children:[(_e=g?O.links:e.links)==null?void 0:_e.map((q,K)=>y.jsx("div",{className:"flex gap-2 items-center",children:g?y.jsxs(y.Fragment,{children:[y.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:q.label,onChange:ne=>{const de=[...O.links];de[K].label=ne.target.value,M({...O,links:de})}}),y.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:q.url,onChange:ne=>{const de=[...O.links];de[K].url=ne.target.value,M({...O,links:de})}}),y.jsx("button",{onClick:()=>M({...O,links:O.links.filter((ne,de)=>de!==K)}),className:"text-white/20 hover:text-red-400 p-1",children:y.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):y.jsxs("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[y.jsx("span",{className:"text-sm font-medium text-white/80",children:q.label}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},K)),!g&&((ce=e.links)==null?void 0:ce.length)===0&&y.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!g&&y.jsxs("div",{className:"pt-8 space-y-4",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:o?y.jsxs("div",{className:"divide-y divide-white/5",children:[y.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[y.jsx("img",{src:o.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-bold truncate",children:o.displayName}),y.jsx("p",{className:"text-[10px] text-white/30 truncate",children:o.email})]}),y.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),y.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:V,disabled:f,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${f?"animate-spin":""}`,children:"cloud_upload"}),f?"...":""]}),y.jsxs("button",{onClick:U,disabled:f,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${f?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):y.jsxs("button",{onClick:a,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[y.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-bold",children:" Google "}),y.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[y.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),y.jsx("span",{className:"text-sm",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),y.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),y.jsx("span",{className:"text-sm",children:""})]})})]}),y.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y.jsxs("button",{onClick:R,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[y.jsxs("div",{className:"flex flex-wrap gap-2",children:[O.categories.map((q,K)=>y.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-full text-[11px] font-bold transition-all border border-transparent ${g?"bg-white/10 text-white hover:border-white/20":"bg-white/5 text-white/60"}`,children:[y.jsx("span",{onClick:()=>g&&B(q,K),className:g?"cursor-pointer hover:text-primary transition-colors":"",children:q}),g&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>B(q,K),className:"opacity-0 group-hover:opacity-100 text-white/40 hover:text-primary transition-all flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{onClick:()=>{window.confirm(`${q}`)&&M({...O,categories:O.categories.filter((ne,de)=>de!==K)})},className:"opacity-0 group-hover:opacity-100 text-white/40 hover:text-red-400 transition-all flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},K)),g&&y.jsxs("button",{onClick:R,className:"px-3 py-1.5 rounded-full text-[11px] font-bold bg-primary/10 text-primary border border-primary/20 border-dashed hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]})]}),!g&&O.categories.length===0&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[y.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),y.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),y.jsx("div",{className:"text-center pt-4",children:y.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]}),y.jsxs("div",{className:"space-y-4 pt-8 border-t border-white/5",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 block",children:" ()"}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:y.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-3",children:[C.map(q=>y.jsx("button",{onClick:()=>ie(q.value),className:`relative aspect-square rounded-xl transition-all duration-300 ${(g?O.themeColor:e.themeColor)===q.value?"scale-110 ring-2 ring-white ring-offset-4 ring-offset-[#030303]":"hover:scale-105 opacity-50"} cursor-pointer`,style:{backgroundColor:q.value},title:q.name,children:(g?O.themeColor:e.themeColor)===q.value&&y.jsx("span",{className:"material-symbols-outlined text-white text-sm absolute inset-0 flex items-center justify-center",children:"check"})},q.value)),y.jsxs("div",{className:"relative aspect-square rounded-xl bg-white/5 border border-dashed border-white/20 flex items-center justify-center group overflow-hidden",children:[y.jsx("input",{type:"color",value:g?O.themeColor:e.themeColor,onChange:q=>ie(q.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-white transition-colors",children:"palette"})]})]})})]})]}),x&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-6",children:[y.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>I(!1)}),y.jsx("div",{className:"relative w-full max-w-sm bg-[#1c1f27] border border-white/10 rounded-[32px] p-8 animate-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[y.jsx("div",{className:"size-16 rounded-2xl bg-primary/20 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"qr_code_2"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}),y.jsx("div",{className:"p-5 bg-white rounded-3xl shadow-xl",children:y.jsx(Kv,{value:T,size:200,level:"H",includeMargin:!0,imageSettings:{src:(e==null?void 0:e.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),y.jsxs("div",{className:"w-full space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/5 border border-white/10 rounded-xl",children:[y.jsx("span",{className:"flex-1 text-[10px] text-white/40 truncate",children:T}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(T),alert("")},className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("button",{onClick:()=>I(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all",children:""})]})]})})]})]}):null},$6=()=>{const{uid:n}=KT(),[e,r]=fe.useState(null),[i,s]=fe.useState(!0),[o,a]=fe.useState(null);return fe.useEffect(()=>{(async()=>{try{const u=oa(Xr,"public_profiles",n),c=await Ty(u);c.exists()?r(c.data()):a("")}catch(u){console.error("Error fetching public profile:",u),a("")}finally{s(!1)}})()},[n]),i?y.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o||!e?y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/10 mb-4",children:"person_off"}),y.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:o||""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}):y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white selection:bg-primary/30",children:[y.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none opacity-50",children:[y.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 blur-[120px] rounded-full"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),y.jsxs("main",{className:"relative z-10 max-w-2xl mx-auto px-6 pt-24 pb-32",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-16 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[y.jsxs("div",{className:"relative mb-8 group",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-700 scale-110"}),e.avatar?y.jsx("img",{src:e.avatar,className:"relative size-32 rounded-full object-cover border-4 border-white/10 shadow-2xl",alt:e.name}):y.jsx("div",{className:"relative size-32 rounded-full bg-gradient-to-br from-white/10 to-white/5 border-4 border-white/10 flex items-center justify-center shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-5xl text-white/20",children:"person"})})]}),y.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4 bg-gradient-to-b from-white to-white/60 bg-clip-text text-transparent",children:e.name}),y.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6"}),y.jsx("p",{className:"text-lg text-white/60 leading-relaxed font-medium max-w-md italic whitespace-pre-wrap",children:e.bio})]}),e.links&&e.links.length>0&&y.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[y.jsx("h2",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] text-center mb-8",children:""}),e.links.map((l,u)=>y.jsxs("a",{href:l.url.startsWith("http")?l.url:`https://${l.url}`,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-3xl hover:bg-white/10 hover:border-primary/50 transition-all duration-500 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[y.jsx("div",{className:"size-10 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary transition-colors",children:l.label.toLowerCase().includes("ig")||l.label.toLowerCase().includes("instagram")?"camera":l.label.toLowerCase().includes("fb")||l.label.toLowerCase().includes("facebook")?"facebook":"link"})}),y.jsx("span",{className:"font-bold text-lg text-white/80 group-hover:text-white transition-colors",children:l.label})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary group-hover:translate-x-1 transition-all relative z-10",children:"arrow_forward"})]},u))]}),y.jsxs("footer",{className:"mt-24 flex flex-col items-center gap-6 animate-in fade-in duration-1000 delay-500",children:[y.jsx("div",{className:"h-px w-12 bg-white/10 mb-2"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-bold text-white/90 mb-2",children:" Nexus Mind"}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("a",{href:window.location.origin+"/nexus-mind/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl bg-primary/10 border border-primary/20 text-primary hover:bg-primary hover:text-white transition-all duration-300 font-bold text-sm shadow-lg shadow-primary/5",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"explore"}),""]})]}),y.jsxs("div",{className:"mt-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:[y.jsx("span",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Powered by"}),y.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Nexus Mind"})]})]})]})]})};function B6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function q6(n,e,r){return e=J6(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function x1(n,e){return W6(n)||B6(n,e)||lk(n,e)||Y6()}function H6(n){return K6(n)||G6(n)||lk(n)||Q6()}function K6(n){if(Array.isArray(n))return Sy(n)}function W6(n){if(Array.isArray(n))return n}function G6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lk(n,e){if(n){if(typeof n=="string")return Sy(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(n,e)}}function Sy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Q6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X6(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function J6(n){var e=X6(n,"string");return typeof e=="symbol"?e:String(e)}var Z6=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(H6(Object.entries(e).filter(function(s){var o=x1(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=x1(s,2),a=o[0],l=o[1];return q6({},a,l)}))))};function ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function eV(n){if(Array.isArray(n))return n}function tV(n){if(Array.isArray(n))return ky(n)}function nV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rV(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function iV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oV(n,e){return eV(n)||rV(n,e)||uk(n,e)||iV()}function b1(n){return tV(n)||nV(n)||uk(n)||sV()}function uk(n,e){if(n){if(typeof n=="string")return ky(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ky(n,e):void 0}}function aV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(f){return f}:s,a=e.methodNames,l=a===void 0?[]:a,u=e.initPropNames,c=u===void 0?[]:u;return fe.forwardRef(function(f,d){var g=fe.useRef(),_=fe.useMemo(function(){var P=Object.fromEntries(c.filter(function(b){return f.hasOwnProperty(b)}).map(function(b){return[b,f[b]]}));return n(P)},[]);E1(function(){_(o(g.current))},fe.useLayoutEffect),E1(function(){return _._destructor instanceof Function?_._destructor:void 0});var x=fe.useCallback(function(P){for(var b=arguments.length,T=new Array(b>1?b-1:0),A=1;A<b;A++)T[A-1]=arguments[A];return _[P]instanceof Function?_[P].apply(_,T):void 0},[_]),I=fe.useRef({});return Object.keys(Z6(f,[].concat(b1(l),b1(c)))).filter(function(P){return I.current[P]!==f[P]}).forEach(function(P){return x(P,f[P])}),I.current=f,fe.useImperativeHandle(d,function(){return Object.fromEntries(l.map(function(P){return[P,function(){for(var b=arguments.length,T=new Array(b),A=0;A<b;A++)T[A]=arguments[A];return x.apply(void 0,[P].concat(T))}]}))},[x]),gt.createElement(i,{ref:g})})}function E1(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.useEffect,r=fe.useRef(),i=fe.useRef(!1),s=fe.useRef(!1),o=fe.useState(0),a=oV(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(u){return u+1}),function(){s.current&&r.current&&r.current()}},[])}var Cy="http://www.w3.org/1999/xhtml";const T1={svg:"http://www.w3.org/2000/svg",xhtml:Cy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Mp(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),T1.hasOwnProperty(e)?{space:T1[e],local:n}:n}function lV(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Cy&&e.documentElement.namespaceURI===Cy?e.createElement(n):e.createElementNS(r,n)}}function uV(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function ck(n){var e=Mp(n);return(e.local?uV:lV)(e)}function cV(){}function B0(n){return n==null?cV:function(){return this.querySelector(n)}}function hV(n){typeof n!="function"&&(n=B0(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),u,c,f=0;f<a;++f)(u=o[f])&&(c=n.call(u,u.__data__,f,o))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new mr(i,this._parents)}function fV(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function dV(){return[]}function hk(n){return n==null?dV:function(){return this.querySelectorAll(n)}}function pV(n){return function(){return fV(n.apply(this,arguments))}}function mV(n){typeof n=="function"?n=pV(n):n=hk(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(i.push(n.call(u,u.__data__,c,a)),s.push(u));return new mr(i,s)}function fk(n){return function(){return this.matches(n)}}function dk(n){return function(e){return e.matches(n)}}var gV=Array.prototype.find;function yV(n){return function(){return gV.call(this.children,n)}}function vV(){return this.firstElementChild}function _V(n){return this.select(n==null?vV:yV(typeof n=="function"?n:dk(n)))}var wV=Array.prototype.filter;function xV(){return Array.from(this.children)}function bV(n){return function(){return wV.call(this.children,n)}}function EV(n){return this.selectAll(n==null?xV:bV(typeof n=="function"?n:dk(n)))}function TV(n){typeof n!="function"&&(n=fk(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new mr(i,this._parents)}function pk(n){return new Array(n.length)}function IV(){return new mr(this._enter||this._groups.map(pk),this._parents)}function jd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}jd.prototype={constructor:jd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function SV(n){return function(){return n}}function kV(n,e,r,i,s,o){for(var a=0,l,u=e.length,c=o.length;a<c;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new jd(n,o[a]);for(;a<u;++a)(l=e[a])&&(s[a]=l)}function CV(n,e,r,i,s,o,a){var l,u,c=new Map,f=e.length,d=o.length,g=new Array(f),_;for(l=0;l<f;++l)(u=e[l])&&(g[l]=_=a.call(u,u.__data__,l,e)+"",c.has(_)?s[l]=u:c.set(_,u));for(l=0;l<d;++l)_=a.call(n,o[l],l,o)+"",(u=c.get(_))?(i[l]=u,u.__data__=o[l],c.delete(_)):r[l]=new jd(n,o[l]);for(l=0;l<f;++l)(u=e[l])&&c.get(g[l])===u&&(s[l]=u)}function AV(n){return n.__data__}function NV(n,e){if(!arguments.length)return Array.from(this,AV);var r=e?CV:kV,i=this._parents,s=this._groups;typeof n!="function"&&(n=SV(n));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var f=i[c],d=s[c],g=d.length,_=PV(n.call(f,f&&f.__data__,c,i)),x=_.length,I=l[c]=new Array(x),P=a[c]=new Array(x),b=u[c]=new Array(g);r(f,d,I,P,b,_,e);for(var T=0,A=0,O,M;T<x;++T)if(O=I[T]){for(T>=A&&(A=T+1);!(M=P[A])&&++A<x;);O._next=M||null}}return a=new mr(a,i),a._enter=l,a._exit=u,a}function PV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function RV(){return new mr(this._exit||this._groups.map(pk),this._parents)}function OV(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function jV(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=r[u],f=i[u],d=c.length,g=l[u]=new Array(d),_,x=0;x<d;++x)(_=c[x]||f[x])&&(g[x]=_);for(;u<s;++u)l[u]=r[u];return new mr(l,this._parents)}function DV(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function MV(n){n||(n=LV);function e(d,g){return d&&g?n(d.__data__,g.__data__):!d-!g}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,f=0;f<l;++f)(c=a[f])&&(u[f]=c);u.sort(e)}return new mr(s,this._parents).order()}function LV(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function VV(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function FV(){return Array.from(this)}function UV(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function zV(){let n=0;for(const e of this)++n;return n}function $V(){return!this.node()}function BV(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function qV(n){return function(){this.removeAttribute(n)}}function HV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function KV(n,e){return function(){this.setAttribute(n,e)}}function WV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function GV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function QV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function YV(n,e){var r=Mp(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?HV:qV:typeof e=="function"?r.local?QV:GV:r.local?WV:KV)(r,e))}function mk(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function XV(n){return function(){this.style.removeProperty(n)}}function JV(n,e,r){return function(){this.style.setProperty(n,e,r)}}function ZV(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function eF(n,e,r){return arguments.length>1?this.each((e==null?XV:typeof e=="function"?ZV:JV)(n,e,r??"")):Zl(this.node(),n)}function Zl(n,e){return n.style.getPropertyValue(e)||mk(n).getComputedStyle(n,null).getPropertyValue(e)}function tF(n){return function(){delete this[n]}}function nF(n,e){return function(){this[n]=e}}function rF(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function iF(n,e){return arguments.length>1?this.each((e==null?tF:typeof e=="function"?rF:nF)(n,e)):this.node()[n]}function gk(n){return n.trim().split(/^|\s+/)}function q0(n){return n.classList||new yk(n)}function yk(n){this._node=n,this._names=gk(n.getAttribute("class")||"")}yk.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function vk(n,e){for(var r=q0(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function _k(n,e){for(var r=q0(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function sF(n){return function(){vk(this,n)}}function oF(n){return function(){_k(this,n)}}function aF(n,e){return function(){(e.apply(this,arguments)?vk:_k)(this,n)}}function lF(n,e){var r=gk(n+"");if(arguments.length<2){for(var i=q0(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?aF:e?sF:oF)(r,e))}function uF(){this.textContent=""}function cF(n){return function(){this.textContent=n}}function hF(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function fF(n){return arguments.length?this.each(n==null?uF:(typeof n=="function"?hF:cF)(n)):this.node().textContent}function dF(){this.innerHTML=""}function pF(n){return function(){this.innerHTML=n}}function mF(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function gF(n){return arguments.length?this.each(n==null?dF:(typeof n=="function"?mF:pF)(n)):this.node().innerHTML}function yF(){this.nextSibling&&this.parentNode.appendChild(this)}function vF(){return this.each(yF)}function _F(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wF(){return this.each(_F)}function xF(n){var e=typeof n=="function"?n:ck(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bF(){return null}function EF(n,e){var r=typeof n=="function"?n:ck(n),i=e==null?bF:typeof e=="function"?e:B0(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function TF(){var n=this.parentNode;n&&n.removeChild(this)}function IF(){return this.each(TF)}function SF(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function kF(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function CF(n){return this.select(n?kF:SF)}function AF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function NF(n){return function(e){n.call(this,e,this.__data__)}}function PF(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function RF(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function OF(n,e,r){return function(){var i=this.__on,s,o=NF(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function jF(n,e,r){var i=PF(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(s=0,f=l[u];s<o;++s)if((a=i[s]).type===f.type&&a.name===f.name)return f.value}return}for(l=e?OF:RF,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function wk(n,e,r){var i=mk(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function DF(n,e){return function(){return wk(this,n,e)}}function MF(n,e){return function(){return wk(this,n,e.apply(this,arguments))}}function LF(n,e){return this.each((typeof e=="function"?MF:DF)(n,e))}function*VF(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var xk=[null];function mr(n,e){this._groups=n,this._parents=e}function vh(){return new mr([[document.documentElement]],xk)}function FF(){return this}mr.prototype=vh.prototype={constructor:mr,select:hV,selectAll:mV,selectChild:_V,selectChildren:EV,filter:TV,data:NV,enter:IV,exit:RV,join:OV,merge:jV,selection:FF,order:DV,sort:MV,call:VV,nodes:FV,node:UV,size:zV,empty:$V,each:BV,attr:YV,style:eF,property:iF,classed:lF,text:fF,html:gF,raise:vF,lower:wF,append:xF,insert:EF,remove:IF,clone:CF,datum:AF,on:jF,dispatch:LF,[Symbol.iterator]:VF};function Ar(n){return typeof n=="string"?new mr([[document.querySelector(n)]],[document.documentElement]):new mr([[n]],xk)}function UF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Pi(n,e){if(n=UF(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var zF={value:()=>{}};function _h(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Mf(r)}function Mf(n){this._=n}function $F(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Mf.prototype=_h.prototype={constructor:Mf,on:function(n,e){var r=this._,i=$F(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=BF(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=I1(r[s],n.name,e);else if(e==null)for(s in r)r[s]=I1(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new Mf(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function BF(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function I1(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=zF,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const qF={passive:!1},Yc={capture:!0,passive:!1};function Km(n){n.stopImmediatePropagation()}function Ml(n){n.preventDefault(),n.stopImmediatePropagation()}function bk(n){var e=n.document.documentElement,r=Ar(n).on("dragstart.drag",Ml,Yc);"onselectstart"in e?r.on("selectstart.drag",Ml,Yc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ek(n,e){var r=n.document.documentElement,i=Ar(n).on("dragstart.drag",null);e&&(i.on("click.drag",Ml,Yc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const of=n=>()=>n;function Ay(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}Ay.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function HF(n){return!n.ctrlKey&&!n.button}function KF(){return this.parentNode}function WF(n,e){return e??{x:n.x,y:n.y}}function GF(){return navigator.maxTouchPoints||"ontouchstart"in this}function QF(){var n=HF,e=KF,r=WF,i=GF,s={},o=_h("start","drag","end"),a=0,l,u,c,f,d=0;function g(O){O.on("mousedown.drag",_).filter(i).on("touchstart.drag",P).on("touchmove.drag",b,qF).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(O,M){if(!(f||!n.call(this,O,M))){var z=A(this,e.call(this,O,M),O,M,"mouse");z&&(Ar(O.view).on("mousemove.drag",x,Yc).on("mouseup.drag",I,Yc),bk(O.view),Km(O),c=!1,l=O.clientX,u=O.clientY,z("start",O))}}function x(O){if(Ml(O),!c){var M=O.clientX-l,z=O.clientY-u;c=M*M+z*z>d}s.mouse("drag",O)}function I(O){Ar(O.view).on("mousemove.drag mouseup.drag",null),Ek(O.view,c),Ml(O),s.mouse("end",O)}function P(O,M){if(n.call(this,O,M)){var z=O.changedTouches,N=e.call(this,O,M),C=z.length,D,L;for(D=0;D<C;++D)(L=A(this,N,O,M,z[D].identifier,z[D]))&&(Km(O),L("start",O,z[D]))}}function b(O){var M=O.changedTouches,z=M.length,N,C;for(N=0;N<z;++N)(C=s[M[N].identifier])&&(Ml(O),C("drag",O,M[N]))}function T(O){var M=O.changedTouches,z=M.length,N,C;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),N=0;N<z;++N)(C=s[M[N].identifier])&&(Km(O),C("end",O,M[N]))}function A(O,M,z,N,C,D){var L=o.copy(),V=Pi(D||z,M),U,R,B;if((B=r.call(O,new Ay("beforestart",{sourceEvent:z,target:g,identifier:C,active:a,x:V[0],y:V[1],dx:0,dy:0,dispatch:L}),N))!=null)return U=B.x-V[0]||0,R=B.y-V[1]||0,function ae(ie,_e,ce){var q=V,K;switch(ie){case"start":s[C]=ae,K=a++;break;case"end":delete s[C],--a;case"drag":V=Pi(ce||_e,M),K=a;break}L.call(ie,O,new Ay(ie,{sourceEvent:_e,subject:B,target:g,identifier:C,active:K,x:V[0]+U,y:V[1]+R,dx:V[0]-q[0],dy:V[1]-q[1],dispatch:L}),N)}}return g.filter=function(O){return arguments.length?(n=typeof O=="function"?O:of(!!O),g):n},g.container=function(O){return arguments.length?(e=typeof O=="function"?O:of(O),g):e},g.subject=function(O){return arguments.length?(r=typeof O=="function"?O:of(O),g):r},g.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:of(!!O),g):i},g.on=function(){var O=o.on.apply(o,arguments);return O===o?g:O},g.clickDistance=function(O){return arguments.length?(d=(O=+O)*O,g):Math.sqrt(d)},g}function H0(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function Tk(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function wh(){}var Xc=.7,Dd=1/Xc,Ll="\\s*([+-]?\\d+)\\s*",Jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YF=/^#([0-9a-f]{3,8})$/,XF=new RegExp(`^rgb\\(${Ll},${Ll},${Ll}\\)$`),JF=new RegExp(`^rgb\\(${Ui},${Ui},${Ui}\\)$`),ZF=new RegExp(`^rgba\\(${Ll},${Ll},${Ll},${Jc}\\)$`),e9=new RegExp(`^rgba\\(${Ui},${Ui},${Ui},${Jc}\\)$`),t9=new RegExp(`^hsl\\(${Jc},${Ui},${Ui}\\)$`),n9=new RegExp(`^hsla\\(${Jc},${Ui},${Ui},${Jc}\\)$`),S1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H0(wh,Zc,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:k1,formatHex:k1,formatHex8:r9,formatHsl:i9,formatRgb:C1,toString:C1});function k1(){return this.rgb().formatHex()}function r9(){return this.rgb().formatHex8()}function i9(){return Ik(this).formatHsl()}function C1(){return this.rgb().formatRgb()}function Zc(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=YF.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?A1(e):r===3?new Yn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?af(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?af(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XF.exec(n))?new Yn(e[1],e[2],e[3],1):(e=JF.exec(n))?new Yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ZF.exec(n))?af(e[1],e[2],e[3],e[4]):(e=e9.exec(n))?af(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=t9.exec(n))?R1(e[1],e[2]/100,e[3]/100,1):(e=n9.exec(n))?R1(e[1],e[2]/100,e[3]/100,e[4]):S1.hasOwnProperty(n)?A1(S1[n]):n==="transparent"?new Yn(NaN,NaN,NaN,0):null}function A1(n){return new Yn(n>>16&255,n>>8&255,n&255,1)}function af(n,e,r,i){return i<=0&&(n=e=r=NaN),new Yn(n,e,r,i)}function s9(n){return n instanceof wh||(n=Zc(n)),n?(n=n.rgb(),new Yn(n.r,n.g,n.b,n.opacity)):new Yn}function Ny(n,e,r,i){return arguments.length===1?s9(n):new Yn(n,e,r,i??1)}function Yn(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}H0(Yn,Ny,Tk(wh,{brighter(n){return n=n==null?Dd:Math.pow(Dd,n),new Yn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Xc:Math.pow(Xc,n),new Yn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Yn(wa(this.r),wa(this.g),wa(this.b),Md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N1,formatHex:N1,formatHex8:o9,formatRgb:P1,toString:P1}));function N1(){return`#${pa(this.r)}${pa(this.g)}${pa(this.b)}`}function o9(){return`#${pa(this.r)}${pa(this.g)}${pa(this.b)}${pa((isNaN(this.opacity)?1:this.opacity)*255)}`}function P1(){const n=Md(this.opacity);return`${n===1?"rgb(":"rgba("}${wa(this.r)}, ${wa(this.g)}, ${wa(this.b)}${n===1?")":`, ${n})`}`}function Md(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function wa(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function pa(n){return n=wa(n),(n<16?"0":"")+n.toString(16)}function R1(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new ri(n,e,r,i)}function Ik(n){if(n instanceof ri)return new ri(n.h,n.s,n.l,n.opacity);if(n instanceof wh||(n=Zc(n)),!n)return new ri;if(n instanceof ri)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,u=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new ri(a,l,u,n.opacity)}function a9(n,e,r,i){return arguments.length===1?Ik(n):new ri(n,e,r,i??1)}function ri(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}H0(ri,a9,Tk(wh,{brighter(n){return n=n==null?Dd:Math.pow(Dd,n),new ri(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Xc:Math.pow(Xc,n),new ri(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new Yn(Wm(n>=240?n-240:n+120,s,i),Wm(n,s,i),Wm(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new ri(O1(this.h),lf(this.s),lf(this.l),Md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Md(this.opacity);return`${n===1?"hsl(":"hsla("}${O1(this.h)}, ${lf(this.s)*100}%, ${lf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function O1(n){return n=(n||0)%360,n<0?n+360:n}function lf(n){return Math.max(0,Math.min(1,n||0))}function Wm(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const Sk=n=>()=>n;function l9(n,e){return function(r){return n+r*e}}function u9(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function c9(n){return(n=+n)==1?kk:function(e,r){return r-e?u9(e,r,n):Sk(isNaN(e)?r:e)}}function kk(n,e){var r=e-n;return r?l9(n,r):Sk(isNaN(n)?e:n)}const j1=function n(e){var r=c9(e);function i(s,o){var a=r((s=Ny(s)).r,(o=Ny(o)).r),l=r(s.g,o.g),u=r(s.b,o.b),c=kk(s.opacity,o.opacity);return function(f){return s.r=a(f),s.g=l(f),s.b=u(f),s.opacity=c(f),s+""}}return i.gamma=n,i}(1);function Js(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var Py=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gm=new RegExp(Py.source,"g");function h9(n){return function(){return n}}function f9(n){return function(e){return n(e)+""}}function d9(n,e){var r=Py.lastIndex=Gm.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(n=n+"",e=e+"";(i=Py.exec(n))&&(s=Gm.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:Js(i,s)})),r=Gm.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?f9(u[0].x):h9(e):(e=u.length,function(c){for(var f=0,d;f<e;++f)l[(d=u[f]).i]=d.x(c);return l.join("")})}var D1=180/Math.PI,Ry={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ck(n,e,r,i,s,o){var a,l,u;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(u=n*r+e*i)&&(r-=n*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),n*i<e*r&&(n=-n,e=-e,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*D1,skewX:Math.atan(u)*D1,scaleX:a,scaleY:l}}var uf;function p9(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Ry:Ck(e.a,e.b,e.c,e.d,e.e,e.f)}function m9(n){return n==null||(uf||(uf=document.createElementNS("http://www.w3.org/2000/svg","g")),uf.setAttribute("transform",n),!(n=uf.transform.baseVal.consolidate()))?Ry:(n=n.matrix,Ck(n.a,n.b,n.c,n.d,n.e,n.f))}function Ak(n,e,r,i){function s(c){return c.length?c.pop()+" ":""}function o(c,f,d,g,_,x){if(c!==d||f!==g){var I=_.push("translate(",null,e,null,r);x.push({i:I-4,x:Js(c,d)},{i:I-2,x:Js(f,g)})}else(d||g)&&_.push("translate("+d+e+g+r)}function a(c,f,d,g){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),g.push({i:d.push(s(d)+"rotate(",null,i)-2,x:Js(c,f)})):f&&d.push(s(d)+"rotate("+f+i)}function l(c,f,d,g){c!==f?g.push({i:d.push(s(d)+"skewX(",null,i)-2,x:Js(c,f)}):f&&d.push(s(d)+"skewX("+f+i)}function u(c,f,d,g,_,x){if(c!==d||f!==g){var I=_.push(s(_)+"scale(",null,",",null,")");x.push({i:I-4,x:Js(c,d)},{i:I-2,x:Js(f,g)})}else(d!==1||g!==1)&&_.push(s(_)+"scale("+d+","+g+")")}return function(c,f){var d=[],g=[];return c=n(c),f=n(f),o(c.translateX,c.translateY,f.translateX,f.translateY,d,g),a(c.rotate,f.rotate,d,g),l(c.skewX,f.skewX,d,g),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,g),c=f=null,function(_){for(var x=-1,I=g.length,P;++x<I;)d[(P=g[x]).i]=P.x(_);return d.join("")}}}var g9=Ak(p9,"px, ","px)","deg)"),y9=Ak(m9,", ",")",")"),v9=1e-12;function M1(n){return((n=Math.exp(n))+1/n)/2}function _9(n){return((n=Math.exp(n))-1/n)/2}function w9(n){return((n=Math.exp(2*n))-1)/(n+1)}const x9=function n(e,r,i){function s(o,a){var l=o[0],u=o[1],c=o[2],f=a[0],d=a[1],g=a[2],_=f-l,x=d-u,I=_*_+x*x,P,b;if(I<v9)b=Math.log(g/c)/e,P=function(N){return[l+N*_,u+N*x,c*Math.exp(e*N*b)]};else{var T=Math.sqrt(I),A=(g*g-c*c+i*I)/(2*c*r*T),O=(g*g-c*c-i*I)/(2*g*r*T),M=Math.log(Math.sqrt(A*A+1)-A),z=Math.log(Math.sqrt(O*O+1)-O);b=(z-M)/e,P=function(N){var C=N*b,D=M1(M),L=c/(r*T)*(D*w9(e*C+M)-_9(M));return[l+L*_,u+L*x,c*D/M1(e*C+M)]}}return P.duration=b*1e3*e/Math.SQRT2,P}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return n(a,l,u)},s}(Math.SQRT2,2,4);var eu=0,ec=0,Vu=0,Nk=1e3,Ld,tc,Vd=0,Oa=0,Lp=0,eh=typeof performance=="object"&&performance.now?performance:Date,Pk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function K0(){return Oa||(Pk(b9),Oa=eh.now()+Lp)}function b9(){Oa=0}function Fd(){this._call=this._time=this._next=null}Fd.prototype=W0.prototype={constructor:Fd,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?K0():+r)+(e==null?0:+e),!this._next&&tc!==this&&(tc?tc._next=this:Ld=this,tc=this),this._call=n,this._time=r,Oy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oy())}};function W0(n,e,r){var i=new Fd;return i.restart(n,e,r),i}function E9(){K0(),++eu;for(var n=Ld,e;n;)(e=Oa-n._time)>=0&&n._call.call(void 0,e),n=n._next;--eu}function L1(){Oa=(Vd=eh.now())+Lp,eu=ec=0;try{E9()}finally{eu=0,I9(),Oa=0}}function T9(){var n=eh.now(),e=n-Vd;e>Nk&&(Lp-=e,Vd=n)}function I9(){for(var n,e=Ld,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Ld=r);tc=n,Oy(i)}function Oy(n){if(!eu){ec&&(ec=clearTimeout(ec));var e=n-Oa;e>24?(n<1/0&&(ec=setTimeout(L1,n-eh.now()-Lp)),Vu&&(Vu=clearInterval(Vu))):(Vu||(Vd=eh.now(),Vu=setInterval(T9,Nk)),eu=1,Pk(L1))}}function V1(n,e,r){var i=new Fd;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var S9=_h("start","end","cancel","interrupt"),k9=[],Rk=0,F1=1,jy=2,Lf=3,U1=4,Dy=5,Vf=6;function Vp(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;C9(n,r,{name:e,index:i,group:s,on:S9,tween:k9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Rk})}function G0(n,e){var r=di(n,e);if(r.state>Rk)throw new Error("too late; already scheduled");return r}function Ki(n,e){var r=di(n,e);if(r.state>Lf)throw new Error("too late; already running");return r}function di(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function C9(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=W0(o,0,r.time);function o(c){r.state=F1,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var f,d,g,_;if(r.state!==F1)return u();for(f in i)if(_=i[f],_.name===r.name){if(_.state===Lf)return V1(a);_.state===U1?(_.state=Vf,_.timer.stop(),_.on.call("interrupt",n,n.__data__,_.index,_.group),delete i[f]):+f<e&&(_.state=Vf,_.timer.stop(),_.on.call("cancel",n,n.__data__,_.index,_.group),delete i[f])}if(V1(function(){r.state===Lf&&(r.state=U1,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=jy,r.on.call("start",n,n.__data__,r.index,r.group),r.state===jy){for(r.state=Lf,s=new Array(g=r.tween.length),f=0,d=-1;f<g;++f)(_=r.tween[f].value.call(n,n.__data__,r.index,r.group))&&(s[++d]=_);s.length=d+1}}function l(c){for(var f=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=Dy,1),d=-1,g=s.length;++d<g;)s[d].call(n,f);r.state===Dy&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=Vf,r.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function Ff(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>jy&&i.state<Dy,i.state=Vf,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function A9(n){return this.each(function(){Ff(this,n)})}function N9(n,e){var r,i;return function(){var s=Ki(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function P9(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Ki(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function R9(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=di(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?N9:P9)(r,n,e))}function Q0(n,e,r){var i=n._id;return n.each(function(){var s=Ki(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return di(s,i).value[e]}}function Ok(n,e){var r;return(typeof e=="number"?Js:e instanceof Zc?j1:(r=Zc(e))?(e=r,j1):d9)(n,e)}function O9(n){return function(){this.removeAttribute(n)}}function j9(n){return function(){this.removeAttributeNS(n.space,n.local)}}function D9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function M9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function L9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function V9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function F9(n,e){var r=Mp(n),i=r==="transform"?y9:Ok;return this.attrTween(n,typeof e=="function"?(r.local?V9:L9)(r,i,Q0(this,"attr."+n,e)):e==null?(r.local?j9:O9)(r):(r.local?M9:D9)(r,i,e))}function U9(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function z9(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function $9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&z9(n,o)),r}return s._value=e,s}function B9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&U9(n,o)),r}return s._value=e,s}function q9(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Mp(n);return this.tween(r,(i.local?$9:B9)(i,e))}function H9(n,e){return function(){G0(this,n).delay=+e.apply(this,arguments)}}function K9(n,e){return e=+e,function(){G0(this,n).delay=e}}function W9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?H9:K9)(e,n)):di(this.node(),e).delay}function G9(n,e){return function(){Ki(this,n).duration=+e.apply(this,arguments)}}function Q9(n,e){return e=+e,function(){Ki(this,n).duration=e}}function Y9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?G9:Q9)(e,n)):di(this.node(),e).duration}function X9(n,e){if(typeof e!="function")throw new Error;return function(){Ki(this,n).ease=e}}function J9(n){var e=this._id;return arguments.length?this.each(X9(e,n)):di(this.node(),e).ease}function Z9(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ki(this,n).ease=r}}function e8(n){if(typeof n!="function")throw new Error;return this.each(Z9(this._id,n))}function t8(n){typeof n!="function"&&(n=fk(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new Ns(i,this._parents,this._name,this._id)}function n8(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],f=u.length,d=a[l]=new Array(f),g,_=0;_<f;++_)(g=u[_]||c[_])&&(d[_]=g);for(;l<i;++l)a[l]=e[l];return new Ns(a,this._parents,this._name,this._id)}function r8(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function i8(n,e,r){var i,s,o=r8(e)?G0:Ki;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function s8(n,e){var r=this._id;return arguments.length<2?di(this.node(),r).on.on(n):this.each(i8(r,n,e))}function o8(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function a8(){return this.on("end.remove",o8(this._id))}function l8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=B0(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],u=l.length,c=o[a]=new Array(u),f,d,g=0;g<u;++g)(f=l[g])&&(d=n.call(f,f.__data__,g,l))&&("__data__"in f&&(d.__data__=f.__data__),c[g]=d,Vp(c[g],e,r,g,c,di(f,r)));return new Ns(o,this._parents,e,r)}function u8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=hk(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var u=i[l],c=u.length,f,d=0;d<c;++d)if(f=u[d]){for(var g=n.call(f,f.__data__,d,u),_,x=di(f,r),I=0,P=g.length;I<P;++I)(_=g[I])&&Vp(_,e,r,I,g,x);o.push(g),a.push(f)}return new Ns(o,a,e,r)}var c8=vh.prototype.constructor;function h8(){return new c8(this._groups,this._parents)}function f8(n,e){var r,i,s;return function(){var o=Zl(this,n),a=(this.style.removeProperty(n),Zl(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function jk(n){return function(){this.style.removeProperty(n)}}function d8(n,e,r){var i,s=r+"",o;return function(){var a=Zl(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function p8(n,e,r){var i,s,o;return function(){var a=Zl(this,n),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(n),Zl(this,n))),a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l))}}function m8(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var u=Ki(this,n),c=u.on,f=u.value[o]==null?l||(l=jk(e)):void 0;(c!==r||s!==f)&&(i=(r=c).copy()).on(a,s=f),u.on=i}}function g8(n,e,r){var i=(n+="")=="transform"?g9:Ok;return e==null?this.styleTween(n,f8(n,i)).on("end.style."+n,jk(n)):typeof e=="function"?this.styleTween(n,p8(n,i,Q0(this,"style."+n,e))).each(m8(this._id,n)):this.styleTween(n,d8(n,i,e),r).on("end.style."+n,null)}function y8(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function v8(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&y8(n,a,r)),i}return o._value=e,o}function _8(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,v8(n,e,r??""))}function w8(n){return function(){this.textContent=n}}function x8(n){return function(){var e=n(this);this.textContent=e??""}}function b8(n){return this.tween("text",typeof n=="function"?x8(Q0(this,"text",n)):w8(n==null?"":n+""))}function E8(n){return function(e){this.textContent=n.call(this,e)}}function T8(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&E8(s)),e}return i._value=n,i}function I8(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,T8(n))}function S8(){for(var n=this._name,e=this._id,r=Dk(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var f=di(u,e);Vp(u,n,r,c,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ns(i,this._parents,n,r)}function k8(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};r.each(function(){var c=Ki(this,i),f=c.on;f!==n&&(e=(n=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&o()})}var C8=0;function Ns(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function Dk(){return++C8}var ss=vh.prototype;Ns.prototype={constructor:Ns,select:l8,selectAll:u8,selectChild:ss.selectChild,selectChildren:ss.selectChildren,filter:t8,merge:n8,selection:h8,transition:S8,call:ss.call,nodes:ss.nodes,node:ss.node,size:ss.size,empty:ss.empty,each:ss.each,on:s8,attr:F9,attrTween:q9,style:g8,styleTween:_8,text:b8,textTween:I8,remove:a8,tween:R9,delay:W9,duration:Y9,ease:J9,easeVarying:e8,end:k8,[Symbol.iterator]:ss[Symbol.iterator]};function A8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var N8={time:null,delay:0,duration:250,ease:A8};function P8(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function R8(n){var e,r;n instanceof Ns?(e=n._id,n=n._name):(e=Dk(),(r=N8).time=K0(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&Vp(u,n,e,c,a,r||P8(u,e));return new Ns(i,this._parents,n,e)}vh.prototype.interrupt=A9;vh.prototype.transition=R8;const cf=n=>()=>n;function O8(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ys(n,e,r){this.k=n,this.x=e,this.y=r}ys.prototype={constructor:ys,scale:function(n){return n===1?this:new ys(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ys(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Y0=new ys(1,0,0);Ai.prototype=ys.prototype;function Ai(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Y0;return n.__zoom}function Qm(n){n.stopImmediatePropagation()}function Fu(n){n.preventDefault(),n.stopImmediatePropagation()}function j8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function D8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function z1(){return this.__zoom||Y0}function M8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function L8(){return navigator.maxTouchPoints||"ontouchstart"in this}function V8(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function F8(){var n=j8,e=D8,r=V8,i=M8,s=L8,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=x9,c=_h("start","zoom","end"),f,d,g,_=500,x=150,I=0,P=10;function b(B){B.property("__zoom",z1).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",L).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(B,ae,ie,_e){var ce=B.selection?B.selection():B;ce.property("__zoom",z1),B!==ce?M(B,ae,ie,_e):ce.interrupt().each(function(){z(this,arguments).event(_e).start().zoom(null,typeof ae=="function"?ae.apply(this,arguments):ae).end()})},b.scaleBy=function(B,ae,ie,_e){b.scaleTo(B,function(){var ce=this.__zoom.k,q=typeof ae=="function"?ae.apply(this,arguments):ae;return ce*q},ie,_e)},b.scaleTo=function(B,ae,ie,_e){b.transform(B,function(){var ce=e.apply(this,arguments),q=this.__zoom,K=ie==null?O(ce):typeof ie=="function"?ie.apply(this,arguments):ie,ne=q.invert(K),de=typeof ae=="function"?ae.apply(this,arguments):ae;return r(A(T(q,de),K,ne),ce,a)},ie,_e)},b.translateBy=function(B,ae,ie,_e){b.transform(B,function(){return r(this.__zoom.translate(typeof ae=="function"?ae.apply(this,arguments):ae,typeof ie=="function"?ie.apply(this,arguments):ie),e.apply(this,arguments),a)},null,_e)},b.translateTo=function(B,ae,ie,_e,ce){b.transform(B,function(){var q=e.apply(this,arguments),K=this.__zoom,ne=_e==null?O(q):typeof _e=="function"?_e.apply(this,arguments):_e;return r(Y0.translate(ne[0],ne[1]).scale(K.k).translate(typeof ae=="function"?-ae.apply(this,arguments):-ae,typeof ie=="function"?-ie.apply(this,arguments):-ie),q,a)},_e,ce)};function T(B,ae){return ae=Math.max(o[0],Math.min(o[1],ae)),ae===B.k?B:new ys(ae,B.x,B.y)}function A(B,ae,ie){var _e=ae[0]-ie[0]*B.k,ce=ae[1]-ie[1]*B.k;return _e===B.x&&ce===B.y?B:new ys(B.k,_e,ce)}function O(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function M(B,ae,ie,_e){B.on("start.zoom",function(){z(this,arguments).event(_e).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(_e).end()}).tween("zoom",function(){var ce=this,q=arguments,K=z(ce,q).event(_e),ne=e.apply(ce,q),de=ie==null?O(ne):typeof ie=="function"?ie.apply(ce,q):ie,he=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),me=ce.__zoom,Me=typeof ae=="function"?ae.apply(ce,q):ae,Re=u(me.invert(de).concat(he/me.k),Me.invert(de).concat(he/Me.k));return function(Ue){if(Ue===1)Ue=Me;else{var Qe=Re(Ue),Pe=he/Qe[2];Ue=new ys(Pe,de[0]-Qe[0]*Pe,de[1]-Qe[1]*Pe)}K.zoom(null,Ue)}})}function z(B,ae,ie){return!ie&&B.__zooming||new N(B,ae)}function N(B,ae){this.that=B,this.args=ae,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,ae),this.taps=0}N.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,ae){return this.mouse&&B!=="mouse"&&(this.mouse[1]=ae.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=ae.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=ae.invert(this.touch1[0])),this.that.__zoom=ae,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var ae=Ar(this.that).datum();c.call(B,this.that,new O8(B,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),ae)}};function C(B,...ae){if(!n.apply(this,arguments))return;var ie=z(this,ae).event(B),_e=this.__zoom,ce=Math.max(o[0],Math.min(o[1],_e.k*Math.pow(2,i.apply(this,arguments)))),q=Pi(B);if(ie.wheel)(ie.mouse[0][0]!==q[0]||ie.mouse[0][1]!==q[1])&&(ie.mouse[1]=_e.invert(ie.mouse[0]=q)),clearTimeout(ie.wheel);else{if(_e.k===ce)return;ie.mouse=[q,_e.invert(q)],Ff(this),ie.start()}Fu(B),ie.wheel=setTimeout(K,x),ie.zoom("mouse",r(A(T(_e,ce),ie.mouse[0],ie.mouse[1]),ie.extent,a));function K(){ie.wheel=null,ie.end()}}function D(B,...ae){if(g||!n.apply(this,arguments))return;var ie=B.currentTarget,_e=z(this,ae,!0).event(B),ce=Ar(B.view).on("mousemove.zoom",de,!0).on("mouseup.zoom",he,!0),q=Pi(B,ie),K=B.clientX,ne=B.clientY;bk(B.view),Qm(B),_e.mouse=[q,this.__zoom.invert(q)],Ff(this),_e.start();function de(me){if(Fu(me),!_e.moved){var Me=me.clientX-K,Re=me.clientY-ne;_e.moved=Me*Me+Re*Re>I}_e.event(me).zoom("mouse",r(A(_e.that.__zoom,_e.mouse[0]=Pi(me,ie),_e.mouse[1]),_e.extent,a))}function he(me){ce.on("mousemove.zoom mouseup.zoom",null),Ek(me.view,_e.moved),Fu(me),_e.event(me).end()}}function L(B,...ae){if(n.apply(this,arguments)){var ie=this.__zoom,_e=Pi(B.changedTouches?B.changedTouches[0]:B,this),ce=ie.invert(_e),q=ie.k*(B.shiftKey?.5:2),K=r(A(T(ie,q),_e,ce),e.apply(this,ae),a);Fu(B),l>0?Ar(this).transition().duration(l).call(M,K,_e,B):Ar(this).call(b.transform,K,_e,B)}}function V(B,...ae){if(n.apply(this,arguments)){var ie=B.touches,_e=ie.length,ce=z(this,ae,B.changedTouches.length===_e).event(B),q,K,ne,de;for(Qm(B),K=0;K<_e;++K)ne=ie[K],de=Pi(ne,this),de=[de,this.__zoom.invert(de),ne.identifier],ce.touch0?!ce.touch1&&ce.touch0[2]!==de[2]&&(ce.touch1=de,ce.taps=0):(ce.touch0=de,q=!0,ce.taps=1+!!f);f&&(f=clearTimeout(f)),q&&(ce.taps<2&&(d=de[0],f=setTimeout(function(){f=null},_)),Ff(this),ce.start())}}function U(B,...ae){if(this.__zooming){var ie=z(this,ae).event(B),_e=B.changedTouches,ce=_e.length,q,K,ne,de;for(Fu(B),q=0;q<ce;++q)K=_e[q],ne=Pi(K,this),ie.touch0&&ie.touch0[2]===K.identifier?ie.touch0[0]=ne:ie.touch1&&ie.touch1[2]===K.identifier&&(ie.touch1[0]=ne);if(K=ie.that.__zoom,ie.touch1){var he=ie.touch0[0],me=ie.touch0[1],Me=ie.touch1[0],Re=ie.touch1[1],Ue=(Ue=Me[0]-he[0])*Ue+(Ue=Me[1]-he[1])*Ue,Qe=(Qe=Re[0]-me[0])*Qe+(Qe=Re[1]-me[1])*Qe;K=T(K,Math.sqrt(Ue/Qe)),ne=[(he[0]+Me[0])/2,(he[1]+Me[1])/2],de=[(me[0]+Re[0])/2,(me[1]+Re[1])/2]}else if(ie.touch0)ne=ie.touch0[0],de=ie.touch0[1];else return;ie.zoom("touch",r(A(K,ne,de),ie.extent,a))}}function R(B,...ae){if(this.__zooming){var ie=z(this,ae).event(B),_e=B.changedTouches,ce=_e.length,q,K;for(Qm(B),g&&clearTimeout(g),g=setTimeout(function(){g=null},_),q=0;q<ce;++q)K=_e[q],ie.touch0&&ie.touch0[2]===K.identifier?delete ie.touch0:ie.touch1&&ie.touch1[2]===K.identifier&&delete ie.touch1;if(ie.touch1&&!ie.touch0&&(ie.touch0=ie.touch1,delete ie.touch1),ie.touch0)ie.touch0[1]=this.__zoom.invert(ie.touch0[0]);else if(ie.end(),ie.taps===2&&(K=Pi(K,this),Math.hypot(d[0]-K[0],d[1]-K[1])<P)){var ne=Ar(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return b.wheelDelta=function(B){return arguments.length?(i=typeof B=="function"?B:cf(+B),b):i},b.filter=function(B){return arguments.length?(n=typeof B=="function"?B:cf(!!B),b):n},b.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:cf(!!B),b):s},b.extent=function(B){return arguments.length?(e=typeof B=="function"?B:cf([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),b):e},b.scaleExtent=function(B){return arguments.length?(o[0]=+B[0],o[1]=+B[1],b):[o[0],o[1]]},b.translateExtent=function(B){return arguments.length?(a[0][0]=+B[0][0],a[1][0]=+B[1][0],a[0][1]=+B[0][1],a[1][1]=+B[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(B){return arguments.length?(r=B,b):r},b.duration=function(B){return arguments.length?(l=+B,b):l},b.interpolate=function(B){return arguments.length?(u=B,b):u},b.on=function(){var B=c.on.apply(c,arguments);return B===c?b:B},b.clickDistance=function(B){return arguments.length?(I=(B=+B)*B,b):Math.sqrt(I)},b.tapDistance=function(B){return arguments.length?(P=+B,b):P},b}class $1 extends Map{constructor(e,r=$8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(B1(this,e))}has(e){return super.has(B1(this,e))}set(e,r){return super.set(U8(this,e),r)}delete(e){return super.delete(z8(this,e))}}function B1({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function U8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function z8({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function $8(n){return n!==null&&typeof n=="object"?n.valueOf():n}function q1(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function H1(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function B8(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var q8=typeof global=="object"&&global&&global.Object===Object&&global,H8=typeof self=="object"&&self&&self.Object===Object&&self,Mk=q8||H8||Function("return this")(),Ud=Mk.Symbol,Lk=Object.prototype,K8=Lk.hasOwnProperty,W8=Lk.toString,Uu=Ud?Ud.toStringTag:void 0;function G8(n){var e=K8.call(n,Uu),r=n[Uu];try{n[Uu]=void 0;var i=!0}catch{}var s=W8.call(n);return i&&(e?n[Uu]=r:delete n[Uu]),s}var Q8=Object.prototype,Y8=Q8.toString;function X8(n){return Y8.call(n)}var J8="[object Null]",Z8="[object Undefined]",K1=Ud?Ud.toStringTag:void 0;function eU(n){return n==null?n===void 0?Z8:J8:K1&&K1 in Object(n)?G8(n):X8(n)}function tU(n){return n!=null&&typeof n=="object"}var nU="[object Symbol]";function rU(n){return typeof n=="symbol"||tU(n)&&eU(n)==nU}var iU=/\s/;function sU(n){for(var e=n.length;e--&&iU.test(n.charAt(e)););return e}var oU=/^\s+/;function aU(n){return n&&n.slice(0,sU(n)+1).replace(oU,"")}function zd(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var W1=NaN,lU=/^[-+]0x[0-9a-f]+$/i,uU=/^0b[01]+$/i,cU=/^0o[0-7]+$/i,hU=parseInt;function G1(n){if(typeof n=="number")return n;if(rU(n))return W1;if(zd(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=zd(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=aU(n);var r=uU.test(n);return r||cU.test(n)?hU(n.slice(2),r?2:8):lU.test(n)?W1:+n}var Ym=function(){return Mk.Date.now()},fU="Expected a function",dU=Math.max,pU=Math.min;function Vk(n,e,r){var i,s,o,a,l,u,c=0,f=!1,d=!1,g=!0;if(typeof n!="function")throw new TypeError(fU);e=G1(e)||0,zd(r)&&(f=!!r.leading,d="maxWait"in r,o=d?dU(G1(r.maxWait)||0,e):o,g="trailing"in r?!!r.trailing:g);function _(z){var N=i,C=s;return i=s=void 0,c=z,a=n.apply(C,N),a}function x(z){return c=z,l=setTimeout(b,e),f?_(z):a}function I(z){var N=z-u,C=z-c,D=e-N;return d?pU(D,o-C):D}function P(z){var N=z-u,C=z-c;return u===void 0||N>=e||N<0||d&&C>=o}function b(){var z=Ym();if(P(z))return T(z);l=setTimeout(b,I(z))}function T(z){return l=void 0,g&&i?_(z):(i=s=void 0,a)}function A(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function O(){return l===void 0?a:T(Ym())}function M(){var z=Ym(),N=P(z);if(i=arguments,s=this,u=z,N){if(l===void 0)return x(u);if(d)return clearTimeout(l),l=setTimeout(b,e),_(u)}return l===void 0&&(l=setTimeout(b,e)),a}return M.cancel=A,M.flush=O,M}var mU="Expected a function";function gU(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(mU);return zd(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),Vk(n,e,{leading:i,maxWait:e,trailing:s})}var xa=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-xa.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?xa.Bounce.In(n*2)*.5:xa.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),nc=function(){return performance.now()},Fk=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=nc()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),My={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=My.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},Uk=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),Ly=new Fk,Q1=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=xa.Linear.None,this._interpolationFunction=My.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Uk.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Ly,Ly.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=nc()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],u=Array.isArray(l),c=u?"array":typeof l,f=!u&&Array.isArray(i[a]);if(!(c==="undefined"||c==="function")){if(f){var d=i[a];if(d.length===0)continue;for(var g=[l],_=0,x=d.length;_<x;_+=1){var I=this._handleRelativeValue(l,d[_]);if(isNaN(I)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}g.push(I)}f&&(i[a]=g)}if((c==="object"||u)&&l&&!f){r[a]=u?[]:{};var P=l;for(var b in P)r[a][b]=P[b];s[a]=u?[]:{};var d=i[a];if(!this._isDynamic){var T={};for(var b in d)T[b]=d[b];i[a]=d=T}this._setupProperties(P,r[a],d,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),u||(r[a]*=1),f?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=nc()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=nc()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=xa.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=My.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=nc()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(i._duration===0||a>u)return 1;var I=Math.trunc(a/l),P=a-I*l,b=Math.min(P/i._duration,1);return b===0&&a===i._duration?1:b},f=c(),d=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||a>=this._duration)if(this._repeat>0){var g=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=g);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*g,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var _=0,x=this._chainedTweens.length;_<x;_++)this._chainedTweens[_].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],u=Array.isArray(e[o]),c=Array.isArray(l),f=!u&&c;f?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();Uk.nextId;var Hi=Ly;Hi.getAll.bind(Hi);Hi.removeAll.bind(Hi);Hi.add.bind(Hi);Hi.remove.bind(Hi);Hi.update.bind(Hi);function Y1(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yU(n){if(Array.isArray(n))return n}function vU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _U(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function wU(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function xU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bU(n,e){return yU(n)||wU(n,e)||EU(n,e)||xU()}function EU(n,e){if(n){if(typeof n=="string")return Y1(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y1(n,e):void 0}}var TU=_U(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,u=l===void 0?function(c,f){}:l;vU(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=u});function X0(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,u=l===void 0?{}:l,c=n.init,f=c===void 0?function(){}:c,d=n.update,g=d===void 0?function(){}:d,_=Object.keys(s).map(function(x){return new TU(x,s[x])});return function x(){for(var I=arguments.length,P=new Array(I),b=0;b<I;b++)P[b]=arguments[b];var T=!!(this instanceof x&&this.constructor),A=T?P.shift():void 0,O=P[0],M=O===void 0?{}:O,z=Object.assign({},r instanceof Function?r(M):r,{initialised:!1}),N={};function C(V){return D(V,M),L(),C}var D=function(U,R){f.call(C,U,z,R),z.initialised=!0},L=Vk(function(){z.initialised&&(g.call(C,z,N),N={})},1);return _.forEach(function(V){C[V.name]=U(V);function U(R){var B=R.name,ae=R.triggerUpdate,ie=ae===void 0?!1:ae,_e=R.onChange,ce=_e===void 0?function(ne,de){}:_e,q=R.defaultVal,K=q===void 0?null:q;return function(ne){var de=z[B];if(!arguments.length)return de;var he=ne===void 0?K:ne;return z[B]=he,ce.call(C,he,z,de),!N.hasOwnProperty(B)&&(N[B]=de),ie&&L(),C}}}),Object.keys(a).forEach(function(V){C[V]=function(){for(var U,R=arguments.length,B=new Array(R),ae=0;ae<R;ae++)B[ae]=arguments[ae];return(U=a[V]).call.apply(U,[C,z].concat(B))}}),Object.entries(u).forEach(function(V){var U=bU(V,2),R=U[0],B=U[1];return C[R]=C[B]}),C.resetProps=function(){return _.forEach(function(V){C[V.name](V.defaultVal)}),C},C.resetProps(),z._rerender=L,T&&A&&C(A),C}}var ft=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function $d(n){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(n)}var IU=/^\s+/,SU=/\s+$/;function Fe(n,e){if(n=n||"",e=e||{},n instanceof Fe)return n;if(!(this instanceof Fe))return new Fe(n,e);var r=kU(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Fe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=zk(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=J1(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=J1(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=X1(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=X1(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return Z1(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return PU(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(At(this._r,255)*100)+"%",g:Math.round(At(this._g,255)*100)+"%",b:Math.round(At(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(At(this._r,255)*100)+"%, "+Math.round(At(this._g,255)*100)+"%, "+Math.round(At(this._b,255)*100)+"%)":"rgba("+Math.round(At(this._r,255)*100)+"%, "+Math.round(At(this._g,255)*100)+"%, "+Math.round(At(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:BU[Z1(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+eb(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=Fe(e);i="#"+eb(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Fe(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(DU,arguments)},brighten:function(){return this._applyModification(MU,arguments)},darken:function(){return this._applyModification(LU,arguments)},desaturate:function(){return this._applyModification(RU,arguments)},saturate:function(){return this._applyModification(OU,arguments)},greyscale:function(){return this._applyModification(jU,arguments)},spin:function(){return this._applyModification(VU,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(zU,arguments)},complement:function(){return this._applyCombination(FU,arguments)},monochromatic:function(){return this._applyCombination($U,arguments)},splitcomplement:function(){return this._applyCombination(UU,arguments)},triad:function(){return this._applyCombination(tb,[3])},tetrad:function(){return this._applyCombination(tb,[4])}};Fe.fromRatio=function(n,e){if($d(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=rc(n[i]));n=r}return Fe(n,e)};function kU(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=WU(n)),$d(n)=="object"&&(os(n.r)&&os(n.g)&&os(n.b)?(e=CU(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):os(n.h)&&os(n.s)&&os(n.v)?(i=rc(n.s),s=rc(n.v),e=NU(n.h,i,s),a=!0,l="hsv"):os(n.h)&&os(n.s)&&os(n.l)&&(i=rc(n.s),o=rc(n.l),e=AU(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=zk(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function CU(n,e,r){return{r:At(n,255)*255,g:At(e,255)*255,b:At(r,255)*255}}function X1(n,e,r){n=At(n,255),e=At(e,255),r=At(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,l}}function AU(n,e,r){var i,s,o;n=At(n,360),e=At(e,100),r=At(r,100);function a(c,f,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?c+(f-c)*6*d:d<1/2?f:d<2/3?c+(f-c)*(2/3-d)*6:c}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;i=a(u,l,n+1/3),s=a(u,l,n),o=a(u,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function J1(n,e,r){n=At(n,255),e=At(e,255),r=At(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,u=i-s;if(a=i===0?0:u/i,i==s)o=0;else{switch(i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,v:l}}function NU(n,e,r){n=At(n,360)*6,e=At(e,100),r=At(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),u=i%6,c=[r,a,o,o,l,r][u],f=[l,r,r,a,o,o][u],d=[o,o,l,r,r,a][u];return{r:c*255,g:f*255,b:d*255}}function Z1(n,e,r,i){var s=[si(Math.round(n).toString(16)),si(Math.round(e).toString(16)),si(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function PU(n,e,r,i,s){var o=[si(Math.round(n).toString(16)),si(Math.round(e).toString(16)),si(Math.round(r).toString(16)),si($k(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function eb(n,e,r,i){var s=[si($k(i)),si(Math.round(n).toString(16)),si(Math.round(e).toString(16)),si(Math.round(r).toString(16))];return s.join("")}Fe.equals=function(n,e){return!n||!e?!1:Fe(n).toRgbString()==Fe(e).toRgbString()};Fe.random=function(){return Fe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function RU(n,e){e=e===0?0:e||10;var r=Fe(n).toHsl();return r.s-=e/100,r.s=Fp(r.s),Fe(r)}function OU(n,e){e=e===0?0:e||10;var r=Fe(n).toHsl();return r.s+=e/100,r.s=Fp(r.s),Fe(r)}function jU(n){return Fe(n).desaturate(100)}function DU(n,e){e=e===0?0:e||10;var r=Fe(n).toHsl();return r.l+=e/100,r.l=Fp(r.l),Fe(r)}function MU(n,e){e=e===0?0:e||10;var r=Fe(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Fe(r)}function LU(n,e){e=e===0?0:e||10;var r=Fe(n).toHsl();return r.l-=e/100,r.l=Fp(r.l),Fe(r)}function VU(n,e){var r=Fe(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Fe(r)}function FU(n){var e=Fe(n).toHsl();return e.h=(e.h+180)%360,Fe(e)}function tb(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Fe(n).toHsl(),i=[Fe(n)],s=360/e,o=1;o<e;o++)i.push(Fe({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function UU(n){var e=Fe(n).toHsl(),r=e.h;return[Fe(n),Fe({h:(r+72)%360,s:e.s,l:e.l}),Fe({h:(r+216)%360,s:e.s,l:e.l})]}function zU(n,e,r){e=e||6,r=r||30;var i=Fe(n).toHsl(),s=360/r,o=[Fe(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(Fe(i));return o}function $U(n,e){e=e||6;for(var r=Fe(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(Fe({h:i,s,v:o})),o=(o+l)%1;return a}Fe.mix=function(n,e,r){r=r===0?0:r||50;var i=Fe(n).toRgb(),s=Fe(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return Fe(a)};Fe.readability=function(n,e){var r=Fe(n),i=Fe(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Fe.isReadable=function(n,e,r){var i=Fe.readability(n,e),s,o;switch(o=!1,s=GU(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};Fe.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,u;r=r||{},a=r.includeFallbackColors,l=r.level,u=r.size;for(var c=0;c<e.length;c++)o=Fe.readability(n,e[c]),o>s&&(s=o,i=Fe(e[c]));return Fe.isReadable(n,i,{level:l,size:u})||!a?i:(r.includeFallbackColors=!1,Fe.mostReadable(n,["#fff","#000"],r))};var Vy=Fe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},BU=Fe.hexNames=qU(Vy);function qU(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function zk(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function At(n,e){HU(n)&&(n="100%");var r=KU(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Fp(n){return Math.min(1,Math.max(0,n))}function lr(n){return parseInt(n,16)}function HU(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function KU(n){return typeof n=="string"&&n.indexOf("%")!=-1}function si(n){return n.length==1?"0"+n:""+n}function rc(n){return n<=1&&(n=n*100+"%"),n}function $k(n){return Math.round(parseFloat(n)*255).toString(16)}function nb(n){return lr(n)/255}var Jr=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function os(n){return!!Jr.CSS_UNIT.exec(n)}function WU(n){n=n.replace(IU,"").replace(SU,"").toLowerCase();var e=!1;if(Vy[n])n=Vy[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Jr.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=Jr.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Jr.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=Jr.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Jr.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=Jr.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Jr.hex8.exec(n))?{r:lr(r[1]),g:lr(r[2]),b:lr(r[3]),a:nb(r[4]),format:e?"name":"hex8"}:(r=Jr.hex6.exec(n))?{r:lr(r[1]),g:lr(r[2]),b:lr(r[3]),format:e?"name":"hex"}:(r=Jr.hex4.exec(n))?{r:lr(r[1]+""+r[1]),g:lr(r[2]+""+r[2]),b:lr(r[3]+""+r[3]),a:nb(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Jr.hex3.exec(n))?{r:lr(r[1]+""+r[1]),g:lr(r[2]+""+r[2]),b:lr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function GU(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function Fy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function QU(n){if(Array.isArray(n))return Fy(n)}function Bk(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function YU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function XU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Tr(n,e){return n.get(Bk(n,e))}function rb(n,e,r){YU(n,e),e.set(n,r)}function ib(n,e,r){return n.set(Bk(n,e),r),r}function JU(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,iz(i.key),i)}}function ZU(n,e,r){return e&&JU(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ez(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nz(n){return QU(n)||ez(n)||sz(n)||tz()}function rz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function iz(n){var e=rz(n,"string");return typeof e=="symbol"?e:e+""}function sz(n,e){if(n){if(typeof n=="string")return Fy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fy(n,e):void 0}}var oz=123,az=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},qk=function(e,r,i){return(e<<16)+(r<<8)+i},lz=function(e){var r=Fe(e).toRgb(),i=r.r,s=r.g,o=r.b;return qk(i,s,o)},sb=function(e,r){return e*oz%Math.pow(2,r)},na=new WeakMap,as=new WeakMap,uz=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;XU(this,n),rb(this,na,void 0),rb(this,as,void 0),ib(as,this,e),this.reset()}return ZU(n,[{key:"reset",value:function(){ib(na,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Tr(na,this).length>=Math.pow(2,24-Tr(as,this)))return null;var i=Tr(na,this).length,s=sb(i,Tr(as,this)),o=az(i+(s<<24-Tr(as,this)));return Tr(na,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?lz(r):qk.apply(void 0,nz(r));if(!i)return null;var s=i&Math.pow(2,24-Tr(as,this))-1,o=i>>24-Tr(as,this)&Math.pow(2,Tr(as,this))-1;return sb(s,Tr(as,this))!==o||s>=Tr(na,this).length?null:Tr(na,this)[s]}}])}(),xh,Pt,Hk,Kk,aa,ob,Wk,Gk,Qk,J0,Uy,zy,th={},Yk=[],cz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Up=Array.isArray;function Oi(n,e){for(var r in e)n[r]=e[r];return n}function Z0(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function hz(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?xh.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return _c(n,a,i,s,null)}function _c(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Hk,__i:-1,__u:0};return s==null&&Pt.vnode!=null&&Pt.vnode(o),o}function zp(n){return n.children}function Uf(n,e){this.props=n,this.context=e}function tu(n,e){if(e==null)return n.__?tu(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?tu(n):null}function Xk(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Xk(n)}}function ab(n){(!n.__d&&(n.__d=!0)&&aa.push(n)&&!Bd.__r++||ob!=Pt.debounceRendering)&&((ob=Pt.debounceRendering)||Wk)(Bd)}function Bd(){for(var n,e,r,i,s,o,a,l=1;aa.length;)aa.length>l&&aa.sort(Gk),n=aa.shift(),l=aa.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=Oi({},i)).__v=i.__v+1,Pt.vnode&&Pt.vnode(r),e_(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??tu(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,eC(o,r,a),i.__e=i.__=null,r.__e!=s&&Xk(r)));Bd.__r=0}function Jk(n,e,r,i,s,o,a,l,u,c,f){var d,g,_,x,I,P,b,T=i&&i.__k||Yk,A=e.length;for(u=fz(r,e,T,u,A),d=0;d<A;d++)(_=r.__k[d])!=null&&(g=_.__i==-1?th:T[_.__i]||th,_.__i=d,P=e_(n,_,g,s,o,a,l,u,c,f),x=_.__e,_.ref&&g.ref!=_.ref&&(g.ref&&t_(g.ref,null,_),f.push(_.ref,_.__c||x,_)),I==null&&x!=null&&(I=x),(b=!!(4&_.__u))||g.__k===_.__k?u=Zk(_,u,n,b):typeof _.type=="function"&&P!==void 0?u=P:x&&(u=x.nextSibling),_.__u&=-7);return r.__e=I,u}function fz(n,e,r,i,s){var o,a,l,u,c,f=r.length,d=f,g=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=_c(null,a,null,null,null):Up(a)?a=n.__k[o]=_c(zp,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=_c(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,u=o+g,a.__=n,a.__b=n.__b+1,l=null,(c=a.__i=dz(a,r,u,d))!=-1&&(d--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>f?g--:s<f&&g++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?g--:c==u+1?g++:(c>u?g--:g++,a.__u|=4))):n.__k[o]=null;if(d)for(o=0;o<f;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=tu(l)),nC(l,l));return i}function Zk(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=Zk(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=tu(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function dz(n,e,r,i){var s,o,a,l=n.key,u=n.type,c=e[r],f=c!=null&&(2&c.__u)==0;if(c===null&&l==null||f&&l==c.key&&u==c.type)return r;if(i>(f?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((c=e[a=s>=0?s--:o++])!=null&&!(2&c.__u)&&l==c.key&&u==c.type)return a}return-1}function lb(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||cz.test(e)?r:r+"px"}function hf(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||lb(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||lb(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Qk,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=J0,n.addEventListener(e,o?zy:Uy,o)):n.removeEventListener(e,o?zy:Uy,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function ub(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=J0++;else if(e.t<r.u)return;return r(Pt.event?Pt.event(e):e)}}}function e_(n,e,r,i,s,o,a,l,u,c){var f,d,g,_,x,I,P,b,T,A,O,M,z,N,C,D,L,V=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(f=Pt.__b)&&f(e);e:if(typeof V=="function")try{if(b=e.props,T="prototype"in V&&V.prototype.render,A=(f=V.contextType)&&i[f.__c],O=f?A?A.props.value:f.__:i,r.__c?P=(d=e.__c=r.__c).__=d.__E:(T?e.__c=d=new V(b,O):(e.__c=d=new Uf(b,O),d.constructor=V,d.render=mz),A&&A.sub(d),d.state||(d.state={}),d.__n=i,g=d.__d=!0,d.__h=[],d._sb=[]),T&&d.__s==null&&(d.__s=d.state),T&&V.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Oi({},d.__s)),Oi(d.__s,V.getDerivedStateFromProps(b,d.__s))),_=d.props,x=d.state,d.__v=e,g)T&&V.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),T&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(T&&V.getDerivedStateFromProps==null&&b!==_&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,O),e.__v==r.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,O)===!1){for(e.__v!=r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(U){U&&(U.__=e)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,O),T&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(_,x,I)})}if(d.context=O,d.props=b,d.__P=n,d.__e=!1,z=Pt.__r,N=0,T){for(d.state=d.__s,d.__d=!1,z&&z(e),f=d.render(d.props,d.state,d.context),C=0;C<d._sb.length;C++)d.__h.push(d._sb[C]);d._sb=[]}else do d.__d=!1,z&&z(e),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++N<25);d.state=d.__s,d.getChildContext!=null&&(i=Oi(Oi({},i),d.getChildContext())),T&&!g&&d.getSnapshotBeforeUpdate!=null&&(I=d.getSnapshotBeforeUpdate(_,x)),D=f,f!=null&&f.type===zp&&f.key==null&&(D=tC(f.props.children)),l=Jk(n,Up(D)?D:[D],e,r,i,s,o,a,l,u,c),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),P&&(d.__E=d.__=null)}catch(U){if(e.__v=null,u||o!=null)if(U.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(L=o.length;L--;)Z0(o[L]);$y(e)}else e.__e=r.__e,e.__k=r.__k,U.then||$y(e);Pt.__e(U,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=pz(r.__e,e,r,i,s,o,a,u,c);return(f=Pt.diffed)&&f(e),128&e.__u?void 0:l}function $y(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach($y)}function eC(n,e,r){for(var i=0;i<r.length;i++)t_(r[i],r[++i],r[++i]);Pt.__c&&Pt.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){Pt.__e(o,s.__v)}})}function tC(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Up(n)?n.map(tC):Oi({},n)}function pz(n,e,r,i,s,o,a,l,u){var c,f,d,g,_,x,I,P=r.props||th,b=e.props,T=e.type;if(T=="svg"?s="http://www.w3.org/2000/svg":T=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((_=o[c])&&"setAttribute"in _==!!T&&(T?_.localName==T:_.nodeType==3)){n=_,o[c]=null;break}}if(n==null){if(T==null)return document.createTextNode(b);n=document.createElementNS(s,T,b.is&&b),l&&(Pt.__m&&Pt.__m(e,o),l=!1),o=null}if(T==null)P===b||l&&n.data==b||(n.data=b);else{if(o=o&&xh.call(n.childNodes),!l&&o!=null)for(P={},c=0;c<n.attributes.length;c++)P[(_=n.attributes[c]).name]=_.value;for(c in P)if(_=P[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=_;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;hf(n,c,null,_,s)}}for(c in b)_=b[c],c=="children"?g=_:c=="dangerouslySetInnerHTML"?f=_:c=="value"?x=_:c=="checked"?I=_:l&&typeof _!="function"||P[c]===_||hf(n,c,_,P[c],s);if(f)l||d&&(f.__html==d.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),e.__k=[];else if(d&&(n.innerHTML=""),Jk(e.type=="template"?n.content:n,Up(g)?g:[g],e,r,i,T=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&tu(r,0),l,u),o!=null)for(c=o.length;c--;)Z0(o[c]);l||(c="value",T=="progress"&&x==null?n.removeAttribute("value"):x!=null&&(x!==n[c]||T=="progress"&&!x||T=="option"&&x!=P[c])&&hf(n,c,x,P[c],s),c="checked",I!=null&&I!=n[c]&&hf(n,c,I,P[c],s))}return n}function t_(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){Pt.__e(s,r)}}function nC(n,e,r){var i,s;if(Pt.unmount&&Pt.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||t_(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Pt.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&nC(i[s],e,r||typeof n.type!="function");r||Z0(n.__e),n.__c=n.__=n.__e=void 0}function mz(n,e,r){return this.constructor(n,r)}function gz(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),Pt.__&&Pt.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],e_(e,n=e.__k=hz(zp,null,[n]),s||th,th,e.namespaceURI,s?null:e.firstChild?xh.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),eC(o,n,a)}function rC(n,e,r){var i,s,o,a,l=Oi({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?xh.call(arguments,2):r),_c(n.type,l,i||n.key,s||n.ref,null)}xh=Yk.slice,Pt={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},Hk=0,Kk=function(n){return n!=null&&n.constructor===void 0},Uf.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Oi({},this.state),typeof n=="function"&&(n=n(Oi({},r),this.props)),n&&Oi(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),ab(this))},Uf.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ab(this))},Uf.prototype.render=zp,aa=[],Wk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Gk=function(n,e){return n.__v.__b-e.__v.__b},Bd.__r=0,Qk=/(PointerCapture)$|Capture$/i,J0=0,Uy=ub(!1),zy=ub(!0);function cb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yz(n){if(Array.isArray(n))return n}function vz(n,e,r){return(e=Tz(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function _z(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function wz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function xz(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hb(Object(r),!0).forEach(function(i){vz(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):hb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function bz(n,e){return yz(n)||_z(n,e)||Iz(n,e)||wz()}function Ez(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Tz(n){var e=Ez(n,"string");return typeof e=="symbol"?e:e+""}function qd(n){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(n)}function Iz(n,e){if(n){if(typeof n=="string")return cb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cb(n,e):void 0}}var By=function(e){if(qd(e)!=="object")return e;var r=rC(e);if(r.props){var i;r.props=xz({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(By):By(r.props.children))}return r},Sz=function(e){return Kk(rC(e))},kz=function(e,r){delete r.__k,gz(By(e),r)};function Cz(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var Az=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Cz(Az);var Nz=X0({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&qd(e)==="object"&&!!e.node&&typeof e.node=="function",l=Ar(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(c){var f=bz(c,2),d=f[0],g=f[1];return r.tooltipEl.style(d,g)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(c){r.mouseInside=!0;var f=Pi(c),d=l.node(),g=d.offsetWidth,_=d.offsetHeight,x=[r.offsetX===null||r.offsetX===void 0?"-".concat(f[0]/g*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?_>130&&_-f[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",f[0]+"px").style("top",f[1]+"px").style("transform","translate(".concat(x.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):Sz(e.content)?(e.tooltipEl.text(""),kz(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function Pz(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,u,c=0,f=0,d=0;for(a=0;a<l;++a)u=i[a],c+=u.x||0,f+=u.y||0,d+=u.z||0;for(c=(c/l-n)*s,f=(f/l-e)*s,d=(d/l-r)*s,a=0;a<l;++a)u=i[a],c&&(u.x-=c),f&&(u.y-=f),d&&(u.z-=d)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function Rz(n){const e=+this._x.call(null,n);return iC(this.cover(e),e,n)}function iC(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,u,c,f,d,g;if(!s)return n._root=o,n;for(;s.length;)if((f=e>=(u=(a+l)/2))?a=u:l=u,i=s,!(s=s[d=+f]))return i[d]=o,n;if(c=+n._x.call(null,s.data),e===c)return o.next=s,i?i[d]=o:n._root=o,n;do i=i?i[d]=new Array(2):n._root=new Array(2),(f=e>=(u=(a+l)/2))?a=u:l=u;while((d=+f)==(g=+(c>=u)));return i[g]=s,i[d]=o,n}function Oz(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)iC(this,r[o],n[o]);return this}function jz(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function Dz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Mz(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function xs(n,e,r){this.node=n,this.x0=e,this.x1=r}function Lz(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],u=this._root,c,f;for(u&&l.push(new xs(u,i,a)),e==null?e=1/0:(i=n-e,a=n+e);c=l.pop();)if(!(!(u=c.node)||(s=c.x0)>a||(o=c.x1)<i))if(u.length){var d=(s+o)/2;l.push(new xs(u[1],d,o),new xs(u[0],s,d)),(f=+(n>=d))&&(c=l[l.length-1],l[l.length-1]=l[l.length-1-f],l[l.length-1-f]=c)}else{var g=Math.abs(n-+this._x.call(null,u.data));g<e&&(e=g,i=n-g,a=n+g,r=u.data)}return r}function Vz(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,u,c,f,d,g;if(!r)return this;if(r.length)for(;;){if((f=u>=(c=(a+l)/2))?a=c:l=c,e=r,!(r=r[d=+f]))return this;if(!r.length)break;e[d+1&1]&&(i=e,g=d)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[d]=o:delete e[d],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=o,this)}function Fz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Uz(){return this._root}function zz(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function $z(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new xs(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new xs(s,l,a)),(s=i[0])&&e.push(new xs(s,o,l))}return this}function Bz(n){var e=[],r=[],i;for(this._root&&e.push(new xs(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,u=(a+l)/2;(o=s[0])&&e.push(new xs(o,a,u)),(o=s[1])&&e.push(new xs(o,u,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function qz(n){return n[0]}function Hz(n){return arguments.length?(this._x=n,this):this._x}function sC(n,e){var r=new n_(e??qz,NaN,NaN);return n==null?r:r.addAll(n)}function n_(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function fb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var er=sC.prototype=n_.prototype;er.copy=function(){var n=new n_(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=fb(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=fb(i));return n};er.add=Rz;er.addAll=Oz;er.cover=jz;er.data=Dz;er.extent=Mz;er.find=Lz;er.remove=Vz;er.removeAll=Fz;er.root=Uz;er.size=zz;er.visit=$z;er.visitAfter=Bz;er.x=Hz;function Kz(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return oC(this.cover(e,r),e,r,n)}function oC(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._x1,f=n._y1,d,g,_,x,I,P,b,T;if(!o)return n._root=a,n;for(;o.length;)if((I=e>=(d=(l+c)/2))?l=d:c=d,(P=r>=(g=(u+f)/2))?u=g:f=g,s=o,!(o=o[b=P<<1|I]))return s[b]=a,n;if(_=+n._x.call(null,o.data),x=+n._y.call(null,o.data),e===_&&r===x)return a.next=o,s?s[b]=a:n._root=a,n;do s=s?s[b]=new Array(4):n._root=new Array(4),(I=e>=(d=(l+c)/2))?l=d:c=d,(P=r>=(g=(u+f)/2))?u=g:f=g;while((b=P<<1|I)===(T=(x>=g)<<1|_>=d));return s[T]=o,s[b]=a,n}function Wz(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),u=1/0,c=1/0,f=-1/0,d=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<u&&(u=s),s>f&&(f=s),o<c&&(c=o),o>d&&(d=o));if(u>f||c>d)return this;for(this.cover(u,c).cover(f,d),r=0;r<i;++r)oC(this,a[r],l[r],n[r]);return this}function Gz(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,u,c;r>n||n>=s||i>e||e>=o;)switch(c=(e<i)<<1|n<r,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function Qz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Yz(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Vn(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function Xz(n,e,r){var i,s=this._x0,o=this._y0,a,l,u,c,f=this._x1,d=this._y1,g=[],_=this._root,x,I;for(_&&g.push(new Vn(_,s,o,f,d)),r==null?r=1/0:(s=n-r,o=e-r,f=n+r,d=e+r,r*=r);x=g.pop();)if(!(!(_=x.node)||(a=x.x0)>f||(l=x.y0)>d||(u=x.x1)<s||(c=x.y1)<o))if(_.length){var P=(a+u)/2,b=(l+c)/2;g.push(new Vn(_[3],P,b,u,c),new Vn(_[2],a,b,P,c),new Vn(_[1],P,l,u,b),new Vn(_[0],a,l,P,b)),(I=(e>=b)<<1|n>=P)&&(x=g[g.length-1],g[g.length-1]=g[g.length-1-I],g[g.length-1-I]=x)}else{var T=n-+this._x.call(null,_.data),A=e-+this._y.call(null,_.data),O=T*T+A*A;if(O<r){var M=Math.sqrt(r=O);s=n-M,o=e-M,f=n+M,d=e+M,i=_.data}}return i}function Jz(n){if(isNaN(f=+this._x.call(null,n))||isNaN(d=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,c=this._y1,f,d,g,_,x,I,P,b;if(!r)return this;if(r.length)for(;;){if((x=f>=(g=(a+u)/2))?a=g:u=g,(I=d>=(_=(l+c)/2))?l=_:c=_,e=r,!(r=r[P=I<<1|x]))return this;if(!r.length)break;(e[P+1&3]||e[P+2&3]||e[P+3&3])&&(i=e,b=P)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[P]=o:delete e[P],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[b]=r:this._root=r),this):(this._root=o,this)}function Zz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function e$(){return this._root}function t$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function n$(n){var e=[],r,i=this._root,s,o,a,l,u;for(i&&e.push(new Vn(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,u=r.y1)&&i.length){var c=(o+l)/2,f=(a+u)/2;(s=i[3])&&e.push(new Vn(s,c,f,l,u)),(s=i[2])&&e.push(new Vn(s,o,f,c,u)),(s=i[1])&&e.push(new Vn(s,c,a,l,f)),(s=i[0])&&e.push(new Vn(s,o,a,c,f))}return this}function r$(n){var e=[],r=[],i;for(this._root&&e.push(new Vn(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,c=i.y1,f=(a+u)/2,d=(l+c)/2;(o=s[0])&&e.push(new Vn(o,a,l,f,d)),(o=s[1])&&e.push(new Vn(o,f,l,u,d)),(o=s[2])&&e.push(new Vn(o,a,d,f,c)),(o=s[3])&&e.push(new Vn(o,f,d,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function i$(n){return n[0]}function s$(n){return arguments.length?(this._x=n,this):this._x}function o$(n){return n[1]}function a$(n){return arguments.length?(this._y=n,this):this._y}function aC(n,e,r){var i=new r_(e??i$,r??o$,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function r_(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function db(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Bn=aC.prototype=r_.prototype;Bn.copy=function(){var n=new r_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=db(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=db(i));return n};Bn.add=Kz;Bn.addAll=Wz;Bn.cover=Gz;Bn.data=Qz;Bn.extent=Yz;Bn.find=Xz;Bn.remove=Jz;Bn.removeAll=Zz;Bn.root=e$;Bn.size=t$;Bn.visit=n$;Bn.visitAfter=r$;Bn.x=s$;Bn.y=a$;function l$(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return lC(this.cover(e,r,i),e,r,i,n)}function lC(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},u=n._x0,c=n._y0,f=n._z0,d=n._x1,g=n._y1,_=n._z1,x,I,P,b,T,A,O,M,z,N,C;if(!a)return n._root=l,n;for(;a.length;)if((O=e>=(x=(u+d)/2))?u=x:d=x,(M=r>=(I=(c+g)/2))?c=I:g=I,(z=i>=(P=(f+_)/2))?f=P:_=P,o=a,!(a=a[N=z<<2|M<<1|O]))return o[N]=l,n;if(b=+n._x.call(null,a.data),T=+n._y.call(null,a.data),A=+n._z.call(null,a.data),e===b&&r===T&&i===A)return l.next=a,o?o[N]=l:n._root=l,n;do o=o?o[N]=new Array(8):n._root=new Array(8),(O=e>=(x=(u+d)/2))?u=x:d=x,(M=r>=(I=(c+g)/2))?c=I:g=I,(z=i>=(P=(f+_)/2))?f=P:_=P;while((N=z<<2|M<<1|O)===(C=(A>=P)<<2|(T>=I)<<1|b>=x));return o[C]=a,o[N]=l,n}function u$(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,f=-1/0;for(let d=0,g,_,x,I;d<e;++d)isNaN(_=+this._x.call(null,g=n[d]))||isNaN(x=+this._y.call(null,g))||isNaN(I=+this._z.call(null,g))||(r[d]=_,i[d]=x,s[d]=I,_<o&&(o=_),_>u&&(u=_),x<a&&(a=x),x>c&&(c=x),I<l&&(l=I),I>f&&(f=I));if(o>u||a>c||l>f)return this;this.cover(o,a,l).cover(u,c,f);for(let d=0;d<e;++d)lC(this,r[d],i[d],s[d],n[d]);return this}function c$(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,u=(o=Math.floor(r))+1;else{for(var c=a-i||1,f=this._root,d,g;i>n||n>=a||s>e||e>=l||o>r||r>=u;)switch(g=(r<o)<<2|(e<s)<<1|n<i,d=new Array(8),d[g]=f,f=d,c*=2,g){case 0:a=i+c,l=s+c,u=o+c;break;case 1:i=a-c,l=s+c,u=o+c;break;case 2:a=i+c,s=l-c,u=o+c;break;case 3:i=a-c,s=l-c,u=o+c;break;case 4:a=i+c,l=s+c,o=u-c;break;case 5:i=a-c,l=s+c,o=u-c;break;case 6:a=i+c,s=l-c,o=u-c;break;case 7:i=a-c,s=l-c,o=u-c;break}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this}function h$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function f$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function wt(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function d$(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,u,c,f,d,g,_,x=this._x1,I=this._y1,P=this._z1,b=[],T=this._root,A,O;for(T&&b.push(new wt(T,o,a,l,x,I,P)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,x=n+i,I=e+i,P=r+i,i*=i);A=b.pop();)if(!(!(T=A.node)||(u=A.x0)>x||(c=A.y0)>I||(f=A.z0)>P||(d=A.x1)<o||(g=A.y1)<a||(_=A.z1)<l))if(T.length){var M=(u+d)/2,z=(c+g)/2,N=(f+_)/2;b.push(new wt(T[7],M,z,N,d,g,_),new wt(T[6],u,z,N,M,g,_),new wt(T[5],M,c,N,d,z,_),new wt(T[4],u,c,N,M,z,_),new wt(T[3],M,z,f,d,g,N),new wt(T[2],u,z,f,M,g,N),new wt(T[1],M,c,f,d,z,N),new wt(T[0],u,c,f,M,z,N)),(O=(r>=N)<<2|(e>=z)<<1|n>=M)&&(A=b[b.length-1],b[b.length-1]=b[b.length-1-O],b[b.length-1-O]=A)}else{var C=n-+this._x.call(null,T.data),D=e-+this._y.call(null,T.data),L=r-+this._z.call(null,T.data),V=C*C+D*D+L*L;if(V<i){var U=Math.sqrt(i=V);o=n-U,a=e-U,l=r-U,x=n+U,I=e+U,P=r+U,s=T.data}}return s}const p$=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function m$(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,u=n+i,c=e+i,f=r+i;return this.visit((d,g,_,x,I,P,b)=>{if(!d.length)do{const T=d.data;p$(n,e,r,this._x(T),this._y(T),this._z(T))<=i&&s.push(T)}while(d=d.next);return g>u||_>c||x>f||I<o||P<a||b<l}),s}function g$(n){if(isNaN(g=+this._x.call(null,n))||isNaN(_=+this._y.call(null,n))||isNaN(x=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._z0,c=this._x1,f=this._y1,d=this._z1,g,_,x,I,P,b,T,A,O,M,z;if(!r)return this;if(r.length)for(;;){if((T=g>=(I=(a+c)/2))?a=I:c=I,(A=_>=(P=(l+f)/2))?l=P:f=P,(O=x>=(b=(u+d)/2))?u=b:d=b,e=r,!(r=r[M=O<<2|A<<1|T]))return this;if(!r.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(i=e,z=M)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[M]=o:delete e[M],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[z]=r:this._root=r),this):(this._root=o,this)}function y$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function v$(){return this._root}function _$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function w$(n){var e=[],r,i=this._root,s,o,a,l,u,c,f;for(i&&e.push(new wt(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,f=r.z1)&&i.length){var d=(o+u)/2,g=(a+c)/2,_=(l+f)/2;(s=i[7])&&e.push(new wt(s,d,g,_,u,c,f)),(s=i[6])&&e.push(new wt(s,o,g,_,d,c,f)),(s=i[5])&&e.push(new wt(s,d,a,_,u,g,f)),(s=i[4])&&e.push(new wt(s,o,a,_,d,g,f)),(s=i[3])&&e.push(new wt(s,d,g,l,u,c,_)),(s=i[2])&&e.push(new wt(s,o,g,l,d,c,_)),(s=i[1])&&e.push(new wt(s,d,a,l,u,g,_)),(s=i[0])&&e.push(new wt(s,o,a,l,d,g,_))}return this}function x$(n){var e=[],r=[],i;for(this._root&&e.push(new wt(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.z0,c=i.x1,f=i.y1,d=i.z1,g=(a+c)/2,_=(l+f)/2,x=(u+d)/2;(o=s[0])&&e.push(new wt(o,a,l,u,g,_,x)),(o=s[1])&&e.push(new wt(o,g,l,u,c,_,x)),(o=s[2])&&e.push(new wt(o,a,_,u,g,f,x)),(o=s[3])&&e.push(new wt(o,g,_,u,c,f,x)),(o=s[4])&&e.push(new wt(o,a,l,x,g,_,d)),(o=s[5])&&e.push(new wt(o,g,l,x,c,_,d)),(o=s[6])&&e.push(new wt(o,a,_,x,g,f,d)),(o=s[7])&&e.push(new wt(o,g,_,x,c,f,d))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function b$(n){return n[0]}function E$(n){return arguments.length?(this._x=n,this):this._x}function T$(n){return n[1]}function I$(n){return arguments.length?(this._y=n,this):this._y}function S$(n){return n[2]}function k$(n){return arguments.length?(this._z=n,this):this._z}function uC(n,e,r,i){var s=new i_(e??b$,r??T$,i??S$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function i_(n,e,r,i,s,o,a,l,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function pb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var wn=uC.prototype=i_.prototype;wn.copy=function(){var n=new i_(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=pb(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=pb(i));return n};wn.add=l$;wn.addAll=u$;wn.cover=c$;wn.data=h$;wn.extent=f$;wn.find=d$;wn.findAllWithinRadius=m$;wn.remove=g$;wn.removeAll=y$;wn.root=v$;wn.size=_$;wn.visit=w$;wn.visitAfter=x$;wn.x=E$;wn.y=I$;wn.z=k$;function vs(n){return function(){return n}}function hs(n){return(n()-.5)*1e-6}function C$(n){return n.index}function mb(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function A$(n){var e=C$,r=g,i,s=vs(30),o,a,l,u,c,f,d=1;n==null&&(n=[]);function g(b){return 1/Math.min(u[b.source.index],u[b.target.index])}function _(b){for(var T=0,A=n.length;T<d;++T)for(var O=0,M,z,N,C=0,D=0,L=0,V,U;O<A;++O)M=n[O],z=M.source,N=M.target,C=N.x+N.vx-z.x-z.vx||hs(f),l>1&&(D=N.y+N.vy-z.y-z.vy||hs(f)),l>2&&(L=N.z+N.vz-z.z-z.vz||hs(f)),V=Math.sqrt(C*C+D*D+L*L),V=(V-o[O])/V*b*i[O],C*=V,D*=V,L*=V,N.vx-=C*(U=c[O]),l>1&&(N.vy-=D*U),l>2&&(N.vz-=L*U),z.vx+=C*(U=1-U),l>1&&(z.vy+=D*U),l>2&&(z.vz+=L*U)}function x(){if(a){var b,T=a.length,A=n.length,O=new Map(a.map((z,N)=>[e(z,N,a),z])),M;for(b=0,u=new Array(T);b<A;++b)M=n[b],M.index=b,typeof M.source!="object"&&(M.source=mb(O,M.source)),typeof M.target!="object"&&(M.target=mb(O,M.target)),u[M.source.index]=(u[M.source.index]||0)+1,u[M.target.index]=(u[M.target.index]||0)+1;for(b=0,c=new Array(A);b<A;++b)M=n[b],c[b]=u[M.source.index]/(u[M.source.index]+u[M.target.index]);i=new Array(A),I(),o=new Array(A),P()}}function I(){if(a)for(var b=0,T=n.length;b<T;++b)i[b]=+r(n[b],b,n)}function P(){if(a)for(var b=0,T=n.length;b<T;++b)o[b]=+s(n[b],b,n)}return _.initialize=function(b,...T){a=b,f=T.find(A=>typeof A=="function")||Math.random,l=T.find(A=>[1,2,3].includes(A))||2,x()},_.links=function(b){return arguments.length?(n=b,x(),_):n},_.id=function(b){return arguments.length?(e=b,_):e},_.iterations=function(b){return arguments.length?(d=+b,_):d},_.strength=function(b){return arguments.length?(r=typeof b=="function"?b:vs(+b),I(),_):r},_.distance=function(b){return arguments.length?(s=typeof b=="function"?b:vs(+b),P(),_):s},_}const N$=1664525,P$=1013904223,gb=4294967296;function R$(){let n=1;return()=>(n=(N$*n+P$)%gb)/gb}var yb=3;function Xm(n){return n.x}function vb(n){return n.y}function O$(n){return n.z}var j$=10,D$=Math.PI*(3-Math.sqrt(5)),M$=Math.PI*20/(9+Math.sqrt(221));function L$(n,e){e=e||2;var r=Math.min(yb,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,u=.6,c=new Map,f=W0(_),d=_h("tick","end"),g=R$();n==null&&(n=[]);function _(){x(),d.call("tick",i),s<o&&(f.stop(),d.call("end",i))}function x(b){var T,A=n.length,O;b===void 0&&(b=1);for(var M=0;M<b;++M)for(s+=(l-s)*a,c.forEach(function(z){z(s)}),T=0;T<A;++T)O=n[T],O.fx==null?O.x+=O.vx*=u:(O.x=O.fx,O.vx=0),r>1&&(O.fy==null?O.y+=O.vy*=u:(O.y=O.fy,O.vy=0)),r>2&&(O.fz==null?O.z+=O.vz*=u:(O.z=O.fz,O.vz=0));return i}function I(){for(var b=0,T=n.length,A;b<T;++b){if(A=n[b],A.index=b,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),A.fz!=null&&(A.z=A.fz),isNaN(A.x)||r>1&&isNaN(A.y)||r>2&&isNaN(A.z)){var O=j$*(r>2?Math.cbrt(.5+b):r>1?Math.sqrt(.5+b):b),M=b*D$,z=b*M$;r===1?A.x=O:r===2?(A.x=O*Math.cos(M),A.y=O*Math.sin(M)):(A.x=O*Math.sin(M)*Math.cos(z),A.y=O*Math.cos(M),A.z=O*Math.sin(M)*Math.sin(z))}(isNaN(A.vx)||r>1&&isNaN(A.vy)||r>2&&isNaN(A.vz))&&(A.vx=0,r>1&&(A.vy=0),r>2&&(A.vz=0))}}function P(b){return b.initialize&&b.initialize(n,g,r),b}return I(),i={tick:x,restart:function(){return f.restart(_),i},stop:function(){return f.stop(),i},numDimensions:function(b){return arguments.length?(r=Math.min(yb,Math.max(1,Math.round(b))),c.forEach(P),i):r},nodes:function(b){return arguments.length?(n=b,I(),c.forEach(P),i):n},alpha:function(b){return arguments.length?(s=+b,i):s},alphaMin:function(b){return arguments.length?(o=+b,i):o},alphaDecay:function(b){return arguments.length?(a=+b,i):+a},alphaTarget:function(b){return arguments.length?(l=+b,i):l},velocityDecay:function(b){return arguments.length?(u=1-b,i):1-u},randomSource:function(b){return arguments.length?(g=b,c.forEach(P),i):g},force:function(b,T){return arguments.length>1?(T==null?c.delete(b):c.set(b,P(T)),i):c.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),T=b.shift()||0,A=(r>1?b.shift():null)||0,O=(r>2?b.shift():null)||0,M=b.shift()||1/0,z=0,N=n.length,C,D,L,V,U,R;for(M*=M,z=0;z<N;++z)U=n[z],C=T-U.x,D=A-(U.y||0),L=O-(U.z||0),V=C*C+D*D+L*L,V<M&&(R=U,M=V);return R},on:function(b,T){return arguments.length>1?(d.on(b,T),i):d.on(b)}}}function V$(){var n,e,r,i,s,o=vs(-30),a,l=1,u=1/0,c=.81;function f(x){var I,P=n.length,b=(e===1?sC(n,Xm):e===2?aC(n,Xm,vb):e===3?uC(n,Xm,vb,O$):null).visitAfter(g);for(s=x,I=0;I<P;++I)r=n[I],b.visit(_)}function d(){if(n){var x,I=n.length,P;for(a=new Array(I),x=0;x<I;++x)P=n[x],a[P.index]=+o(P,x,n)}}function g(x){var I=0,P,b,T=0,A,O,M,z,N=x.length;if(N){for(A=O=M=z=0;z<N;++z)(P=x[z])&&(b=Math.abs(P.value))&&(I+=P.value,T+=b,A+=b*(P.x||0),O+=b*(P.y||0),M+=b*(P.z||0));I*=Math.sqrt(4/N),x.x=A/T,e>1&&(x.y=O/T),e>2&&(x.z=M/T)}else{P=x,P.x=P.data.x,e>1&&(P.y=P.data.y),e>2&&(P.z=P.data.z);do I+=a[P.data.index];while(P=P.next)}x.value=I}function _(x,I,P,b,T){if(!x.value)return!0;var A=[P,b,T][e-1],O=x.x-r.x,M=e>1?x.y-r.y:0,z=e>2?x.z-r.z:0,N=A-I,C=O*O+M*M+z*z;if(N*N/c<C)return C<u&&(O===0&&(O=hs(i),C+=O*O),e>1&&M===0&&(M=hs(i),C+=M*M),e>2&&z===0&&(z=hs(i),C+=z*z),C<l&&(C=Math.sqrt(l*C)),r.vx+=O*x.value*s/C,e>1&&(r.vy+=M*x.value*s/C),e>2&&(r.vz+=z*x.value*s/C)),!0;if(x.length||C>=u)return;(x.data!==r||x.next)&&(O===0&&(O=hs(i),C+=O*O),e>1&&M===0&&(M=hs(i),C+=M*M),e>2&&z===0&&(z=hs(i),C+=z*z),C<l&&(C=Math.sqrt(l*C)));do x.data!==r&&(N=a[x.data.index]*s/C,r.vx+=O*N,e>1&&(r.vy+=M*N),e>2&&(r.vz+=z*N));while(x=x.next)}return f.initialize=function(x,...I){n=x,i=I.find(P=>typeof P=="function")||Math.random,e=I.find(P=>[1,2,3].includes(P))||2,d()},f.strength=function(x){return arguments.length?(o=typeof x=="function"?x:vs(+x),d(),f):o},f.distanceMin=function(x){return arguments.length?(l=x*x,f):Math.sqrt(l)},f.distanceMax=function(x){return arguments.length?(u=x*x,f):Math.sqrt(u)},f.theta=function(x){return arguments.length?(c=x*x,f):Math.sqrt(c)},f}function F$(n,e,r,i){var s,o,a=vs(.1),l,u;typeof n!="function"&&(n=vs(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function c(d){for(var g=0,_=s.length;g<_;++g){var x=s[g],I=x.x-e||1e-6,P=(x.y||0)-r||1e-6,b=(x.z||0)-i||1e-6,T=Math.sqrt(I*I+P*P+b*b),A=(u[g]-T)*l[g]*d/T;x.vx+=I*A,o>1&&(x.vy+=P*A),o>2&&(x.vz+=b*A)}}function f(){if(s){var d,g=s.length;for(l=new Array(g),u=new Array(g),d=0;d<g;++d)u[d]=+n(s[d],d,s),l[d]=isNaN(u[d])?0:+a(s[d],d,s)}}return c.initialize=function(d,...g){s=d,o=g.find(_=>[1,2,3].includes(_))||2,f()},c.strength=function(d){return arguments.length?(a=typeof d=="function"?d:vs(+d),f(),c):a},c.radius=function(d){return arguments.length?(n=typeof d=="function"?d:vs(+d),f(),c):n},c.x=function(d){return arguments.length?(e=+d,c):e},c.y=function(d){return arguments.length?(r=+d,c):r},c.z=function(d){return arguments.length?(i=+d,c):i},c}const{abs:zu,cos:ls,sin:il,acos:U$,atan2:$u,sqrt:Gs,pow:Ir}=Math;function Bu(n){return n<0?-Ir(-n,1/3):Ir(n,1/3)}const cC=Math.PI,ff=2*cC,Qs=cC/2,z$=1e-6,Jm=Number.MAX_SAFE_INTEGER||9007199254740991,Zm=Number.MIN_SAFE_INTEGER||-9007199254740991,$$={x:0,y:0,z:0},be={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Gs(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,u=n*n,c,f,d,g=0;i===2?(o=[o[0],o[1],o[2],$$],c=l,f=s*n*2,d=u):i===3&&(c=l*s,f=l*n*3,d=s*u*3,g=n*u);const _={x:c*o[0].x+f*o[1].x+d*o[2].x+g*o[3].x,y:c*o[0].y+f*o[1].y+d*o[2].y+g*o[3].y,t:n};return r&&(_.z=c*o[0].z+f*o[1].z+d*o[2].z+g*o[3].z),_}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],u=o[1],c=o[2],f=o[3],d;if(l*=s,u*=n,a.length===2)return d=l+u,{x:(l*a[0].x+u*a[1].x)/d,y:(l*a[0].y+u*a[1].y)/d,z:i?(l*a[0].z+u*a[1].z)/d:!1,t:n};if(l*=s,u*=2*s,c*=n*n,a.length===3)return d=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/d,y:(l*a[0].y+u*a[1].y+c*a[2].y)/d,z:i?(l*a[0].z+u*a[1].z+c*a[2].z)/d:!1,t:n};if(l*=s,u*=1.5*s,c*=3*s,f*=n*n*n,a.length===4)return d=l+u+c+f,{x:(l*a[0].x+u*a[1].x+c*a[2].x+f*a[3].x)/d,y:(l*a[0].y+u*a[1].y+c*a[2].y+f*a[3].y)/d,z:i?(l*a[0].z+u*a[1].z+c*a[2].z+f*a[3].z)/d:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,u;l<o;l++)u={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(u.z=o*(i[l+1].z-i[l].z)),a.push(u);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||be.approximately(n,e)||be.approximately(n,r)},approximately:function(n,e,r){return zu(n-e)<=(r||z$)},length:function(n){const r=be.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*be.Tvalues[s]+.5,i+=be.Cvalues[s]*be.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,u=l/o;return i+a*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(be.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,u=i*o+s*a;return $u(l,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return Gs(r*r+i*i)},closest:function(n,e){let r=Ir(2,63),i,s;return n.forEach(function(o,a){s=be.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Ir(n,e)+Ir(1-n,e),i=r-1;return zu(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Ir(1-n,e),i=Ir(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const u=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),c=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),f=(n-r)*(o-l)-(e-i)*(s-a);return f==0?!1:{x:u/f,y:c/f}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,u=r.x,c=r.y,f=i.x,d=i.y;return be.lli8(s,o,a,l,u,c,f,d)},lli:function(n,e){return be.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new Tt(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=Jm,r=Jm,i=Zm,s=Zm;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!be.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(u){u.virtual||l.forEach(function(c){if(c.virtual)return;const f=u.intersects(c,s);f.length>0&&(f.c1=u,f.c2=c,f.s1=n,f.s2=r,o.push(f))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=be.makeline(e.points[i-1],n.points[0]),a=be.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:be.findbbox([o,n,e,a])};return l.intersections=function(u){return be.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=Jm,s=Zm,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-$u(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*ls(s)-(a.y-i)*il(s),y:(a.x-r)*il(s)+(a.y-i)*ls(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=be.align(n,e),s=function(N){return 0<=N&&N<=1};if(r===2){const N=i[0].y,C=i[1].y,D=i[2].y,L=N-2*C+D;if(L!==0){const V=-Gs(C*C-N*D),U=-N+C,R=-(V+U)/L,B=-(-V+U)/L;return[R,B].filter(s)}else if(C!==D&&L===0)return[(2*C-D)/(2*C-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,u=i[3].y;let c=-o+3*a-3*l+u,f=3*o-6*a+3*l,d=-3*o+3*a,g=o;if(be.approximately(c,0)){if(be.approximately(f,0))return be.approximately(d,0)?[]:[-g/d].filter(s);const N=Gs(d*d-4*f*g),C=2*f;return[(N-d)/C,(-d-N)/C].filter(s)}f/=c,d/=c,g/=c;const _=(3*d-f*f)/3,x=_/3,I=(2*f*f*f-9*f*d+27*g)/27,P=I/2,b=P*P+x*x*x;let T,A,O,M,z;if(b<0){const N=-_/3,C=N*N*N,D=Gs(C),L=-I/(2*D),V=L<-1?-1:L>1?1:L,U=U$(V),R=Bu(D),B=2*R;return O=B*ls(U/3)-f/3,M=B*ls((U+ff)/3)-f/3,z=B*ls((U+2*ff)/3)-f/3,[O,M,z].filter(s)}else{if(b===0)return T=P<0?Bu(-P):-Bu(P),O=2*T-f/3,M=-T-f/3,[O,M].filter(s);{const N=Gs(b);return T=Bu(-P+N),A=Bu(P+N),[T-A-f/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-Gs(r*r-e*i),a=-e+r,l=-(o+a)/s,u=-(-o+a)/s;return[l,u]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,u,c=0,f=0;const d=be.compute(n,e),g=be.compute(n,r),_=d.x*d.x+d.y*d.y;if(i?(o=Gs(Ir(d.y*g.z-g.y*d.z,2)+Ir(d.z*g.x-g.z*d.x,2)+Ir(d.x*g.y-g.x*d.y,2)),a=Ir(_+d.z*d.z,3/2)):(o=d.x*g.y-d.y*g.x,a=Ir(_,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,f=a/o,!s){const x=be.curvature(n-.001,e,r,i,!0).k,I=be.curvature(n+.001,e,r,i,!0).k;u=(I-c+(c-x))/2,l=(zu(I-c)+zu(c-x))/2}return{k:c,r:f,dk:u,adk:l}},inflections:function(n){if(n.length<4)return[];const e=be.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),u=18*(s-r);if(be.approximately(a,0)){if(!be.approximately(l,0)){let g=-u/l;if(0<=g&&g<=1)return[g]}return[]}const c=2*a;if(be.approximately(c,0))return[];const f=l*l-4*a*u;if(f<0)return[];const d=Math.sqrt(f);return[(d-l)/c,-(l+d)/c].filter(function(g){return 0<=g&&g<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,u;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,u=(n[o].size+e[o].size)/2,zu(a-l)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),u=e.split(.5),c=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];c=c.filter(function(d){return be.bboxoverlap(d.left.bbox(),d.right.bbox())});let f=[];return c.length===0||(c.forEach(function(d){f=f.concat(be.pairiteration(d.left,d.right,a))}),f=f.filter(function(d,g){return f.indexOf(d)===g})),f},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*ls(Qs)-s*il(Qs),u=i*il(Qs)+s*ls(Qs),c=o*ls(Qs)-a*il(Qs),f=o*il(Qs)+a*ls(Qs),d=(n.x+e.x)/2,g=(n.y+e.y)/2,_=(e.x+r.x)/2,x=(e.y+r.y)/2,I=d+l,P=g+u,b=_+c,T=x+f,A=be.lli8(d,g,I,P,_,x,b,T),O=be.dist(A,n);let M=$u(n.y-A.y,n.x-A.x),z=$u(e.y-A.y,e.x-A.x),N=$u(r.y-A.y,r.x-A.x),C;return M<N?((M>z||z>N)&&(M+=ff),M>N&&(C=N,N=M,M=C)):N<z&&z<M?(C=N,N=M,M=C):N+=ff,A.s=M,A.e=N,A.r=O,A},numberSort:function(n,e){return n-e}};class wc{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return be.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)be.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new wc(r)}}const{abs:qu,min:_b,max:wb,cos:B$,sin:q$,acos:H$,sqrt:Hu}=Math,K$=Math.PI;class Tt{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const _=[];r.forEach(function(x){["x","y","z"].forEach(function(I){typeof x[I]<"u"&&_.push(x[I])})}),r=_}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let _=0,x=a?3:2;_<o;_+=x){var u={x:r[_],y:r[_+1]};a&&(u.z=r[_+2]),l.push(u)}const c=this.order=l.length-1,f=this.dims=["x","y"];a&&f.push("z"),this.dimlen=f.length;const d=be.align(l,{p1:l[0],p2:l[c]}),g=be.dist(l[0],l[c]);this._linear=d.reduce((_,x)=>_+qu(x.y),0)<g/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new Tt(r,r,i);if(s===1)return new Tt(e,r,r);const o=Tt.getABC(2,e,r,i,s);return new Tt(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=Tt.getABC(3,e,r,i,s);typeof o>"u"&&(o=be.dist(r,a.C));const l=o*(1-s)/s,u=be.dist(e,i),c=(i.x-e.x)/u,f=(i.y-e.y)/u,d=o*c,g=o*f,_=l*c,x=l*f,I={x:r.x-d,y:r.y-g},P={x:r.x+_,y:r.y+x},b=a.A,T={x:b.x+(I.x-b.x)/(1-s),y:b.y+(I.y-b.y)/(1-s)},A={x:b.x+(P.x-b.x)/s,y:b.y+(P.y-b.y)/s},O={x:e.x+(T.x-e.x)/s,y:e.y+(T.y-e.y)/s},M={x:i.x+(A.x-i.x)/(1-s),y:i.y+(A.y-i.y)/(1-s)};return new Tt(e,O,M,i)}static getUtils(){return be}getUtils(){return Tt.getUtils()}static get PolyBezier(){return wc}valueOf(){return this.toString()}toString(){return be.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=be.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=be.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return be.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=be.projectionratio(o,e),l=1-a,u={x:a*r.x+l*s.x,y:a*r.y+l*s.y},c=be.abcratio(o,e);return{A:{x:i.x+(i.x-u.x)/c,y:i.y+(i.y-u.y)/c},B:i,C:u,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return Tt.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],be.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=be.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,u=.1/i;let c=s.mdist,f=a,d=f,g;c+=1;for(let _;f<l+u;f+=u)g=this.compute(f),_=be.dist(e,g),_<c&&(c=_,d=f);return d=d<0?0:d>1?1:d,g=this.compute(d),g.t=d,g.d=c,g}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?be.computeWithRatios(e,this.points,this.ratios,this._3d):be.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new Tt(r)}derivative(e){return be.compute(e,this.dpoints[0],this._3d)}dderivative(e){return be.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Tt(be.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return be.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return be.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Hu(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Hu(r.x*r.x+r.y*r.y+r.z*r.z),o=Hu(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Hu(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const u=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,u=r.length-1;a<u;a++)l=be.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new Tt([i[0],i[3],i[5]]):new Tt([i[0],i[4],i[7],i[9]]),right:this.order===2?new Tt([i[5],i[4],i[2]]):new Tt([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=be.map(0,0,1,this._t1,this._t2),s.left._t2=be.map(e,0,1,this._t1,this._t2),s.right._t1=be.map(e,0,1,this._t1,this._t2),s.right._t2=be.map(1,0,1,this._t1,this._t2),r?(r=be.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=be.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(be.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(be.numberSort))}).bind(this)),e.values=r.sort(be.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=be.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return be.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new Tt(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=be.angle(this.points[0],this.points[3],this.points[1]),o=be.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),qu(H$(i))<K$/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=c.split(r,i),!o.simple()){if(i-=s,qu(r-i)<s)return[];o=c.split(r,i),o._t1=be.map(r,0,1,c._t1,c._t2),o._t2=be.map(i,0,1,c._t1,c._t2),l.push(o),r=i;break}r<1&&(o=c.split(r,1),o._t1=be.map(r,0,1,c._t1,c._t2),o._t2=c._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new Tt(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],c=[],f=be.lli4(u[0],u[0].c,u[1],u[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const g=c[d*r]=be.copy(o[d*r]);g.x+=(d?l:a)*u[d].n.x,g.y+=(d?l:a)*u[d].n.y}),i?([0,1].forEach(function(d){if(!(r===2&&d)){var g=o[d+1],_={x:g.x-f.x,y:g.y-f.y},x=i?i((d+1)/r):e;i&&!s&&(x=-x);var I=Hu(_.x*_.x+_.y*_.y);_.x/=I,_.y/=I,c[d+1]={x:g.x+x*_.x,y:g.y+x*_.y}}}),new Tt(c)):([0,1].forEach(d=>{if(r===2&&d)return;const g=c[d*r],_=this.derivative(d),x={x:g.x+_.x,y:g.y+_.y};c[d+1]=be.lli4(g,x,f,o[d+1])}),new Tt(c))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const M=this.normal(0),z=this.points[0],N=this.points[this.points.length-1];let C,D,L;i===void 0&&(i=e,s=r),C={x:z.x+M.x*e,y:z.y+M.y*e},L={x:N.x+M.x*i,y:N.y+M.y*i},D={x:(C.x+L.x)/2,y:(C.y+L.y)/2};const V=[C,D,L];C={x:z.x-M.x*r,y:z.y-M.y*r},L={x:N.x-M.x*s,y:N.y-M.y*s},D={x:(C.x+L.x)/2,y:(C.y+L.y)/2};const U=[L,D,C],R=be.makeline(U[2],V[0]),B=be.makeline(V[2],U[0]),ae=[R,new Tt(V),B,new Tt(U)];return new wc(ae)}const o=this.reduce(),a=o.length,l=[];let u=[],c,f=0,d=this.length();const g=typeof i<"u"&&typeof s<"u";function _(M,z,N,C,D){return function(L){const V=C/N,U=(C+D)/N,R=z-M;return be.map(L,0,1,M+V*R,M+U*R)}}o.forEach(function(M){const z=M.length();g?(l.push(M.scale(_(e,i,d,f,z))),u.push(M.scale(_(-r,-s,d,f,z)))):(l.push(M.scale(e)),u.push(M.scale(-r))),f+=z}),u=u.map(function(M){return c=M.points,c[3]?M.points=[c[3],c[2],c[1],c[0]]:M.points=[c[2],c[1],c[0]],M}).reverse();const x=l[0].points[0],I=l[a-1].points[l[a-1].points.length-1],P=u[a-1].points[u[a-1].points.length-1],b=u[0].points[0],T=be.makeline(P,x),A=be.makeline(I,b),O=[T].concat(l).concat([A]).concat(u);return new wc(O)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const u=be.makeshape(s[a],s[l-a],i);u.startcap.virtual=a>1,u.endcap.virtual=a<l/2-1,o.push(u)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Tt&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=_b(e.p1.x,e.p2.x),i=_b(e.p1.y,e.p2.y),s=wb(e.p1.x,e.p2.x),o=wb(e.p1.y,e.p2.y);return be.roots(this.points,e).filter(a=>{var l=this.get(a);return be.between(l.x,r,s)&&be.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,u;o<i;o++)l=r.slice(o,o+1),u=r.slice(o+2),a=this.curveintersects(l,u,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=be.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),u=be.dist(e,r),c=be.dist(e,a),f=be.dist(e,l);return qu(c-u)+qu(f-u)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,u,c,f,d=!1,g=!1,_,x=s,I=1;do if(g=d,f=c,x=(i+s)/2,l=this.get(x),u=this.get(s),c=be.getccenter(a,l,u),c.interval={start:i,end:s},d=this._error(c,a,i,s)<=e,_=g&&!d,_||(I=s),d){if(s>=1){if(c.interval.end=I=1,f=c,s>1){let b={x:c.x+c.r*B$(c.e),y:c.y+c.r*q$(c.e)};c.e+=be.angle({x:c.x,y:c.y},b,this.get(1))}break}s=s+(s-i)/2}else s=x;while(!_&&o++<100);if(o>=100)break;f=f||c,r.push(f),i=I}while(s<1);return r}}function qy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function W$(n){if(Array.isArray(n))return n}function G$(n){if(Array.isArray(n))return qy(n)}function Q$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Y$(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function X$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(n,e){if(n==null)return{};var r,i,s=e7(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function e7(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function t7(n,e){return W$(n)||Y$(n,e)||hC(n,e)||X$()}function n7(n){return G$(n)||Q$(n)||hC(n)||J$()}function r7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function i7(n){var e=r7(n,"string");return typeof e=="symbol"?e:e+""}function hC(n,e){if(n){if(typeof n=="string")return qy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qy(n,e):void 0}}var s7=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,u){var c=l,f=u;return s.forEach(function(d,g){var _=d.keyAccessor,x=d.isProp,I;if(x){var P=f,b=P[_],T=Z$(P,[_].map(i7));I=b,f=T}else I=_(f,g);g+1<s.length?(c.hasOwnProperty(I)||(c[I]={}),c=c[I]):r?(c.hasOwnProperty(I)||(c[I]=[]),c[I].push(f)):c[I]=f}),l},{});r instanceof Function&&function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===s.length?Object.keys(u).forEach(function(f){return u[f]=r(u[f])}):Object.values(u).forEach(function(f){return l(f,c+1)})}(o);var a=o;return i&&(a=[],function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===s.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(f){var d=t7(f,2),g=d[0],_=d[1];return l(_,[].concat(n7(c),[g]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function o7(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const xb=Symbol("implicit");function fC(){var n=new $1,e=[],r=[],i=xb;function s(o){let a=n.get(o);if(a===void 0){if(i!==xb)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new $1;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return fC(e,r).unknown(i)},o7.apply(s,arguments),s}function a7(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const l7=a7("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function u7(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var c7=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;u7(c7);function Hy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function h7(n){if(Array.isArray(n))return n}function f7(n){if(Array.isArray(n))return Hy(n)}function bb(n,e,r){if(dC())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function nh(n,e,r){return(e=v7(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function dC(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dC=function(){return!!n})()}function d7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function p7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function m7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function sl(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Eb(Object(r),!0).forEach(function(i){nh(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Eb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function xc(n,e){return h7(n)||p7(n,e)||pC(n,e)||m7()}function Nr(n){return f7(n)||d7(n)||pC(n)||g7()}function y7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v7(n){var e=y7(n,"string");return typeof e=="symbol"?e:e+""}function Ky(n){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(n)}function pC(n,e){if(n){if(typeof n=="string")return Hy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hy(n,e):void 0}}var _7=fC(l7);function Tb(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=_7(e(i))})}function w7(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,u=l===void 0?function(_){throw"Invalid DAG structure! Found cycle in node path: ".concat(_.join(" -> "),".")}:l,c={};r.forEach(function(_){return c[e(_)]={data:_,out:[],depth:-1,skip:!a(_)}}),i.forEach(function(_){var x=_.source,I=_.target,P=O(x),b=O(I);if(!c.hasOwnProperty(P))throw"Missing source node with id: ".concat(P);if(!c.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var T=c[P],A=c[b];T.out.push(A);function O(M){return Ky(M)==="object"?e(M):M}});var f=[];g(Object.values(c));var d=Object.assign.apply(Object,[{}].concat(Nr(Object.entries(c).filter(function(_){var x=xc(_,2),I=x[1];return!I.skip}).map(function(_){var x=xc(_,2),I=x[0],P=x[1];return nh({},I,P.depth)}))));return d;function g(_){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,P=function(){var O=_[b];if(x.indexOf(O)!==-1){var M=[].concat(Nr(x.slice(x.indexOf(O))),[O]).map(function(z){return e(z.data)});return f.some(function(z){return z.length===M.length&&z.every(function(N,C){return N===M[C]})})||(f.push(M),u(M)),1}I>O.depth&&(O.depth=I,g(O.out,[].concat(Nr(x),[O]),I+(O.skip?0:1)))},b=0,T=_.length;b<T;b++)P()}}var x7=2,Cn=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Ib=function(e,r){if(!r.isShadow){var i=ft(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=Nr(Array(o)).map(function(){return{}}):delete s.__photons})}},Hd=X0({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Ib(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Cn},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Cn},nodeColor:{default:"color",triggerUpdate:!1,onChange:Cn},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Cn},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Cn},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Cn},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Cn},linkColor:{default:"color",triggerUpdate:!1,onChange:Cn},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Cn},linkWidth:{default:1,triggerUpdate:!1,onChange:Cn},linkCurvature:{default:0,triggerUpdate:!1,onChange:Cn},linkCanvasObject:{triggerUpdate:!1,onChange:Cn},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Cn},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Cn},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Cn},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Cn},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Ib},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=ft(e.nodeVisibility),u=ft(e.nodeVal),c=ft(e.nodeColor),f=ft(e.nodeCanvasObjectMode),d=e.ctx,g=e.isShadow/e.globalScale,_=e.graphData.nodes.filter(l);d.save(),_.forEach(function(x){var I=f(x);if(e.nodeCanvasObject&&(I==="before"||I==="replace")&&(e.nodeCanvasObject(x,d,e.globalScale),I==="replace")){d.restore();return}var P=Math.sqrt(Math.max(0,u(x)||1))*e.nodeRelSize+g;d.beginPath(),d.arc(x.x,x.y,P,0,2*Math.PI,!1),d.fillStyle=c(x)||"rgba(31, 120, 180, 0.92)",d.fill(),e.nodeCanvasObject&&I==="after"&&e.nodeCanvasObject(x,e.ctx,e.globalScale)}),d.restore()}function s(){var l=ft(e.linkVisibility),u=ft(e.linkColor),c=ft(e.linkWidth),f=ft(e.linkLineDash),d=ft(e.linkCurvature),g=ft(e.linkCanvasObjectMode),_=e.ctx,x=e.isShadow*2,I=e.graphData.links.filter(l);I.forEach(z);var P=[],b=[],T=I;if(e.linkCanvasObject){var A=[],O=[];I.forEach(function(N){return({before:P,after:b,replace:A}[g(N)]||O).push(N)}),T=[].concat(Nr(P),b,O),P=P.concat(A)}_.save(),P.forEach(function(N){return e.linkCanvasObject(N,_,e.globalScale)}),_.restore();var M=s7(T,[u,c,f]);_.save(),Object.entries(M).forEach(function(N){var C=xc(N,2),D=C[0],L=C[1],V=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(L).forEach(function(U){var R=xc(U,2),B=R[0],ae=R[1],ie=(B||1)/e.globalScale+x;Object.entries(ae).forEach(function(_e){var ce=xc(_e,2);ce[0];var q=ce[1],K=f(q[0]);_.beginPath(),q.forEach(function(ne){var de=ne.source,he=ne.target;if(!(!de||!he||!de.hasOwnProperty("x")||!he.hasOwnProperty("x"))){_.moveTo(de.x,de.y);var me=ne.__controlPoints;me?_[me.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(_,Nr(me).concat([he.x,he.y])):_.lineTo(he.x,he.y)}}),_.strokeStyle=V,_.lineWidth=ie,_.setLineDash(K||[]),_.stroke()})})}),_.restore(),_.save(),b.forEach(function(N){return e.linkCanvasObject(N,_,e.globalScale)}),_.restore();function z(N){var C=d(N);if(!C){N.__controlPoints=null;return}var D=N.source,L=N.target;if(!(!D||!L||!D.hasOwnProperty("x")||!L.hasOwnProperty("x"))){var V=Math.sqrt(Math.pow(L.x-D.x,2)+Math.pow(L.y-D.y,2));if(V>0){var U=Math.atan2(L.y-D.y,L.x-D.x),R=V*C,B={x:(D.x+L.x)/2+R*Math.cos(U-Math.PI/2),y:(D.y+L.y)/2+R*Math.sin(U-Math.PI/2)};N.__controlPoints=[B.x,B.y]}else{var ae=C*70;N.__controlPoints=[L.x,L.y-ae,L.x+ae,L.y]}}}}function o(){var l=1.6,u=.2,c=ft(e.linkDirectionalArrowLength),f=ft(e.linkDirectionalArrowRelPos),d=ft(e.linkVisibility),g=ft(e.linkDirectionalArrowColor||e.linkColor),_=ft(e.nodeVal),x=e.ctx;x.save(),e.graphData.links.filter(d).forEach(function(I){var P=c(I);if(!(!P||P<0)){var b=I.source,T=I.target;if(!(!b||!T||!b.hasOwnProperty("x")||!T.hasOwnProperty("x"))){var A=Math.sqrt(Math.max(0,_(b)||1))*e.nodeRelSize,O=Math.sqrt(Math.max(0,_(T)||1))*e.nodeRelSize,M=Math.min(1,Math.max(0,f(I))),z=g(I)||"rgba(0,0,0,0.28)",N=P/l/2,C=I.__controlPoints&&bb(Tt,[b.x,b.y].concat(Nr(I.__controlPoints),[T.x,T.y])),D=C?function(ie){return C.get(ie)}:function(ie){return{x:b.x+(T.x-b.x)*ie||0,y:b.y+(T.y-b.y)*ie||0}},L=C?C.length():Math.sqrt(Math.pow(T.x-b.x,2)+Math.pow(T.y-b.y,2)),V=A+P+(L-A-O-P)*M,U=D(V/L),R=D((V-P)/L),B=D((V-P*(1-u))/L),ae=Math.atan2(U.y-R.y,U.x-R.x)-Math.PI/2;x.beginPath(),x.moveTo(U.x,U.y),x.lineTo(R.x+N*Math.cos(ae),R.y+N*Math.sin(ae)),x.lineTo(B.x,B.y),x.lineTo(R.x-N*Math.cos(ae),R.y-N*Math.sin(ae)),x.fillStyle=z,x.fill()}}}),x.restore()}function a(){var l=ft(e.linkDirectionalParticles),u=ft(e.linkDirectionalParticleSpeed),c=ft(e.linkDirectionalParticleOffset),f=ft(e.linkDirectionalParticleWidth),d=ft(e.linkVisibility),g=ft(e.linkDirectionalParticleColor||e.linkColor),_=e.ctx;_.save(),e.graphData.links.filter(d).forEach(function(x){var I=l(x);if(!(!x.hasOwnProperty("__photons")||!x.__photons.length)){var P=x.source,b=x.target;if(!(!P||!b||!P.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var T=u(x),A=Math.abs(c(x)),O=x.__photons||[],M=Math.max(0,f(x)/2)/Math.sqrt(e.globalScale),z=g(x)||"rgba(0,0,0,0.28)";_.fillStyle=z;var N=x.__controlPoints?bb(Tt,[P.x,P.y].concat(Nr(x.__controlPoints),[b.x,b.y])):null,C=0,D=!1;O.forEach(function(L){var V=!!L.__singleHop;if(L.hasOwnProperty("__progressRatio")||(L.__progressRatio=V?0:(C+A)/I),!V&&C++,L.__progressRatio+=T,L.__progressRatio>=1)if(!V)L.__progressRatio=L.__progressRatio%1;else{D=!0;return}var U=L.__progressRatio,R=N?N.get(U):{x:P.x+(b.x-P.x)*U||0,y:P.y+(b.y-P.y)*U||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(R.x,R.y,x,_,e.globalScale):(_.beginPath(),_.arc(R.x,R.y,M,0,2*Math.PI,!1),_.fill())}),D&&(x.__photons=x.__photons.filter(function(L){return!L.__singleHop||L.__progressRatio<=1}))}}}),_.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:L$().force("link",A$()).force("charge",V$()).force("center",Pz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Tb(e.graphData.nodes,ft(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Tb(e.graphData.links,ft(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(g){g.source=g[e.linkSource],g.target=g[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(g){return g[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&w7(e.graphData,function(g){return g[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,Nr(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*x7*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(g){return delete g[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),c=function(_){return(s[_[e.nodeId]]-o/2)*a*(u?-1:1)},f=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(g){return g[f]=c(g)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?F$(function(g){var _=s[g[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-_:_)*a}).strength(function(g){return e.dagNodeFilter(g)?1:0}):null);for(var d=0;d<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);d++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function mC(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,u){r.forEach(function(c){return u[c][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var f=[];return r.forEach(function(d){var g=a[d],_=g[o].apply(g,u);_!==g&&f.push(_)}),f.length?f[0]:this}}}}var b7=800,E7=4,T7=5,gC=mC("forceGraph",Hd),I7=mC(["forceGraph","shadowGraph"],Hd),S7=Object.assign.apply(Object,Nr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return nh({},n,gC.linkProp(n))})).concat(Nr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return nh({},n,I7.linkProp(n))})))),k7=Object.assign.apply(Object,Nr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return nh({},n,gC.linkMethod(n))})));function eg(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Ai(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function yC(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function Sb(n,e,r){n.save(),yC(n),n.clearRect(0,0,e,r),n.restore()}var C7=X0({props:sl({width:{default:window.innerWidth,onChange:function(e,r){return eg(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return eg(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},S7),aliases:{stopAnimation:"pauseAnimation"},methods:sl({graph2ScreenCoords:function(e,r,i){var s=Ai(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Ai(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new Q1(a()).to(o,s).easing(xa.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var u=Ai(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var c=u.x,f=u.y;e.zoom.translateTo(e.zoom.__baseElem,c===void 0?a().x:c,f===void 0?a().y:f),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new Q1({k:s()}).to({k:r},i).easing(xa.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Ai(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(c,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=ft(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[H1(o,function(a){return a.x-a.r}),q1(o,function(a){return a.x+a.r})],y:[H1(o,function(a){return a.y-a.r}),q1(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},k7),stateInit:function(){return{lastSetZoom:1,zoom:F8(),forceGraph:new Hd,shadowGraph:new Hd().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new uz,tweenGroup:new Fk}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var d=null,g=window.devicePixelRatio,_=l.x>0&&l.y>0?a.getImageData(l.x*g,l.y*g,1,1):null;return _&&(d=r.colorTracker.lookup(_.data)),d};Ar(r.canvas).call(QF().subject(function(){if(!r.enableNodeDrag)return null;var f=u();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var d=f.subject;d.__initialDragPos={x:d.x,y:d.y,fx:d.fx,fy:d.fy},f.active||(d.fx=d.x,d.fy=d.y),r.canvas.classList.add("grabbable")}).on("drag",function(f){var d=f.subject,g=d.__initialDragPos,_=f,x=Ai(r.canvas).k,I={x:g.x+(_.x-g.x)/x-d.x,y:g.y+(_.y-g.y)/x-d.y};["x","y"].forEach(function(P){return d["f".concat(P)]=d[P]=g[P]+(_[P]-g[P])/x}),!(!d.__dragged&&T7>=Math.sqrt(B8(["x","y"].map(function(P){return Math.pow(f[P]-g[P],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,d.__dragged=!0,r.onNodeDrag(d,I))}).on("end",function(f){var d=f.subject,g=d.__initialDragPos,_={x:d.x-g.x,y:d.y-g.y};g.fx===void 0&&(d.fx=void 0),g.fy===void 0&&(d.fy=void 0),delete d.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,d.__dragged&&(delete d.__dragged,r.onNodeDragEnd(d,_))})),r.zoom(r.zoom.__baseElem=Ar(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(f){return!f.button&&r.enableZoomPanInteraction&&(f.type!=="wheel"||ft(r.enableZoomInteraction)(f))&&(f.type==="wheel"||ft(r.enablePanInteraction)(f))}).on("zoom",function(f){var d=f.transform;[o,a].forEach(function(g){yC(g),g.translate(d.x,d.y),g.scale(d.k,d.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(sl(sl({},d),i.centerAt())),r.needsRedraw=!0}).on("end",function(f){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(sl(sl({},f.transform),i.centerAt()))}),eg(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Ai(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=E7/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Nz(s),["pointermove","pointerdown"].forEach(function(f){return s.addEventListener(f,function(d){f==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=d),!r.isPointerDragging&&d.type==="pointermove"&&r.onBackgroundClick&&(d.pressure>0||r.isPointerPressed)&&(d.pointerType==="mouse"||d.movementX===void 0||[d.movementX,d.movementY].some(function(x){return Math.abs(x)>1}))&&(r.isPointerDragging=!0);var g=_(s);l.x=d.pageX-g.left,l.y=d.pageY-g.top;function _(x){var I=x.getBoundingClientRect(),P=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:I.top+b,left:I.left+P}}},{passive:!0})}),s.addEventListener("pointerup",function(f){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var d=[f,r.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"Click")];g&&g.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,d);if(f.button===2)if(r.hoverObj){var _=r["on".concat(r.hoverObj.type,"RightClick")];_&&_.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,d)})}},{passive:!0}),s.addEventListener("contextmenu",function(f){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(f.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var c=gU(function(){Sb(a,r.width,r.height),r.shadowGraph.linkWidth(function(d){return ft(r.linkWidth)(d)+r.linkHoverPrecision});var f=Ai(r.canvas);r.shadowGraph.globalScale(f.k).tickFrame()},b7);r.flushShadowCanvas=c.flush,(this._animationCycle=function f(){var d=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(A){return A.__photons&&A.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var g=r.isPointerDragging?null:u();if(g!==r.hoverObj){var _=r.hoverObj,x=_?_.type:null,I=g?g.type:null;if(x&&x!==I){var P=r["on".concat(x,"Hover")];P&&P(null,_.d)}if(I){var b=r["on".concat(I,"Hover")];b&&b(g.d,x===I?_.d:null)}r.tooltip.content(g&&ft(r["".concat(g.type.toLowerCase(),"Label")])(g.d)||null),r.canvas.classList[(g&&r["on".concat(I,"Click")]||!g&&r.onBackgroundClick)&&ft(r.showPointerCursor)(g==null?void 0:g.d)?"add":"remove"]("clickable"),r.hoverObj=g}d&&c()}if(d){Sb(o,r.width,r.height);var T=Ai(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,T),r.forceGraph.globalScale(T).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,T)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(e){}}),vC={exports:{}},A7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N7=A7,P7=N7;function _C(){}function wC(){}wC.resetWarningCache=_C;var R7=function(){function n(i,s,o,a,l,u){if(u!==P7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wC,resetWarningCache:_C};return r.PropTypes=r,r};vC.exports=R7();var O7=vC.exports;const X=Kd(O7),$p={width:X.number,height:X.number,graphData:X.shape({nodes:X.arrayOf(X.object).isRequired,links:X.arrayOf(X.object).isRequired}),backgroundColor:X.string,nodeRelSize:X.number,nodeId:X.string,nodeLabel:X.oneOfType([X.string,X.func]),nodeVal:X.oneOfType([X.number,X.string,X.func]),nodeVisibility:X.oneOfType([X.bool,X.string,X.func]),nodeColor:X.oneOfType([X.string,X.func]),nodeAutoColorBy:X.oneOfType([X.string,X.func]),onNodeHover:X.func,onNodeClick:X.func,linkSource:X.string,linkTarget:X.string,linkLabel:X.oneOfType([X.string,X.func]),linkVisibility:X.oneOfType([X.bool,X.string,X.func]),linkColor:X.oneOfType([X.string,X.func]),linkAutoColorBy:X.oneOfType([X.string,X.func]),linkWidth:X.oneOfType([X.number,X.string,X.func]),linkCurvature:X.oneOfType([X.number,X.string,X.func]),linkDirectionalArrowLength:X.oneOfType([X.number,X.string,X.func]),linkDirectionalArrowColor:X.oneOfType([X.string,X.func]),linkDirectionalArrowRelPos:X.oneOfType([X.number,X.string,X.func]),linkDirectionalParticles:X.oneOfType([X.number,X.string,X.func]),linkDirectionalParticleSpeed:X.oneOfType([X.number,X.string,X.func]),linkDirectionalParticleOffset:X.oneOfType([X.number,X.string,X.func]),linkDirectionalParticleWidth:X.oneOfType([X.number,X.string,X.func]),linkDirectionalParticleColor:X.oneOfType([X.string,X.func]),onLinkHover:X.func,onLinkClick:X.func,dagMode:X.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:X.number,dagNodeFilter:X.func,onDagError:X.func,d3AlphaMin:X.number,d3AlphaDecay:X.number,d3VelocityDecay:X.number,warmupTicks:X.number,cooldownTicks:X.number,cooldownTime:X.number,onEngineTick:X.func,onEngineStop:X.func,getGraphBbox:X.func},xC={zoomToFit:X.func,onNodeRightClick:X.func,onNodeDrag:X.func,onNodeDragEnd:X.func,onLinkRightClick:X.func,linkHoverPrecision:X.number,onBackgroundClick:X.func,onBackgroundRightClick:X.func,showPointerCursor:X.oneOfType([X.bool,X.func]),enablePointerInteraction:X.bool,enableNodeDrag:X.bool},s_={showNavInfo:X.bool,nodeOpacity:X.number,nodeResolution:X.number,nodeThreeObject:X.oneOfType([X.object,X.string,X.func]),nodeThreeObjectExtend:X.oneOfType([X.bool,X.string,X.func]),nodePositionUpdate:X.func,linkOpacity:X.number,linkResolution:X.number,linkCurveRotation:X.oneOfType([X.number,X.string,X.func]),linkMaterial:X.oneOfType([X.object,X.string,X.func]),linkThreeObject:X.oneOfType([X.object,X.string,X.func]),linkThreeObjectExtend:X.oneOfType([X.bool,X.string,X.func]),linkPositionUpdate:X.func,linkDirectionalArrowResolution:X.number,linkDirectionalParticleResolution:X.number,linkDirectionalParticleThreeObject:X.oneOfType([X.object,X.string,X.func]),forceEngine:X.oneOf(["d3","ngraph"]),ngraphPhysics:X.object,numDimensions:X.oneOf([1,2,3])},j7=Object.assign({},$p,xC,{linkLineDash:X.oneOfType([X.arrayOf(X.number),X.string,X.func]),nodeCanvasObjectMode:X.oneOfType([X.string,X.func]),nodeCanvasObject:X.func,nodePointerAreaPaint:X.func,linkCanvasObjectMode:X.oneOfType([X.string,X.func]),linkCanvasObject:X.func,linkPointerAreaPaint:X.func,linkDirectionalParticleCanvasObject:X.func,autoPauseRedraw:X.bool,minZoom:X.number,maxZoom:X.number,enableZoomInteraction:X.oneOfType([X.bool,X.func]),enablePanInteraction:X.oneOfType([X.bool,X.func]),onZoom:X.func,onZoomEnd:X.func,onRenderFramePre:X.func,onRenderFramePost:X.func});Object.assign({},$p,xC,s_,{enableNavigationControls:X.bool,controlType:X.oneOf(["trackball","orbit","fly"]),rendererConfig:X.object,extraRenderers:X.arrayOf(X.shape({render:X.func.isRequired}))});Object.assign({},$p,s_,{nodeDesc:X.oneOfType([X.string,X.func]),linkDesc:X.oneOfType([X.string,X.func])});Object.assign({},$p,s_,{markerAttrs:X.object,yOffset:X.number,glScale:X.number});const o_=aV(C7,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});o_.displayName="ForceGraph2D";o_.propTypes=j7;const D7=()=>{const{contacts:n}=Lo(),e=jo(),r=fe.useRef(),[i,s]=fe.useState({width:window.innerWidth,height:window.innerHeight});fe.useEffect(()=>{const a=()=>{s({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const o=fe.useMemo(()=>{if(!n)return{nodes:[],links:[]};const a=n.map(u=>({id:u.id,name:u.name,val:u.importance||50,tags:u.tags||[],color:u.importance>80?"#fbbf24":"#10b981"})),l=[];for(let u=0;u<n.length;u++)for(let c=u+1;c<n.length;c++){const f=n[u],d=n[c],g=(f.tags||[]).filter(_=>(d.tags||[]).includes(_));g.length>0&&l.push({source:f.id,target:d.id,value:g.length,label:g.join(", ")})}return{nodes:a,links:l}},[n]);return y.jsxs("div",{className:"w-full h-full bg-[#0a0a0c] relative overflow-hidden",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 px-6 pt-12 pb-8 bg-gradient-to-b from-[#0a0a0c] to-transparent pointer-events-none",children:[y.jsx("h1",{className:"text-2xl font-black text-white pointer-events-auto",children:""}),y.jsx("p",{className:"text-white/40 text-xs font-bold tracking-[0.2em] uppercase mt-1 pointer-events-auto",children:"Social Network Analysis"})]}),y.jsx("div",{className:"w-full h-full pt-20",children:y.jsx(o_,{ref:r,graphData:o,width:i.width>480?480:i.width,height:i.height-160,backgroundColor:"#0a0a0c",nodeLabel:"name",nodeRelSize:6,nodeAutoColorBy:"group",linkColor:()=>"rgba(255, 255, 255, 0.1)",linkWidth:a=>a.value,onNodeClick:a=>e(`/profile/${a.id}`),nodeCanvasObject:(a,l,u)=>{const c=a.name,f=12/u;l.font=`${f}px Inter, sans-serif`,l.measureText(c).width,l.fillStyle=a.color,l.beginPath(),l.arc(a.x,a.y,5,0,2*Math.PI,!1),l.fill(),l.textAlign="center",l.textBaseline="middle",l.fillStyle="white",l.shadowColor="black",l.shadowBlur=4,l.fillText(c,a.x,a.y+10),l.shadowBlur=0}})}),y.jsx("div",{className:"absolute bottom-24 left-6 right-6 p-4 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md",children:y.jsxs("div",{className:"flex items-center justify-between text-[10px] font-bold text-white/40 uppercase tracking-widest",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-amber-400"}),y.jsx("span",{children:" ()"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-emerald-500"}),y.jsx("span",{children:""})]})]})}),y.jsx("button",{onClick:()=>r.current.zoomToFit(400),className:"absolute bottom-40 right-6 size-12 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary/20 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined",children:"zoom_in_map"})})]})},M7=()=>{const n=jo(),e=Bv(),{unsavedChanges:r,setUnsavedChanges:i}=Lo(),s=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"graph",icon:"hub",label:"",path:"/graph"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}],o=a=>{e.pathname!==a&&(r?window.confirm("")&&(i(!1),n(a),navigator.vibrate&&navigator.vibrate(5)):(n(a),navigator.vibrate&&navigator.vibrate(5)))};return y.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-4 pb-6 pointer-events-none",children:y.jsx("div",{className:"glass-panel rounded-[28px] h-20 flex items-center justify-around px-2 pointer-events-auto",children:s.map(a=>{const l=e.pathname===a.path;return y.jsxs("button",{onClick:()=>o(a.path),className:`flex flex-col items-center justify-center gap-1.5 transition-all duration-500 relative group w-16 ${l?"text-primary":"text-white/20 hover:text-white/40"}`,children:[y.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${l?"scale-110 -translate-y-1":"scale-100"}`,children:[l&&y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150"}),y.jsx("span",{className:`material-symbols-outlined text-[26px] relative z-10 ${l?"font-black":""}`,children:a.icon})]}),y.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.15em] transition-all duration-500 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.label}),l&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary-color-rgb),0.8)]"})]},a.id)})})})},L7=({children:n})=>y.jsxs("div",{className:"bg-nexus min-h-screen text-white font-sans selection:bg-primary/30 overflow-x-hidden",children:[y.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative",children:y.jsx("div",{className:"flex-1 px-4 pt-6 pb-32",children:n})}),y.jsx(M7,{})]});function V7(){return y.jsx(D6,{children:y.jsx(QP,{basename:"/nexus-mind",children:y.jsxs(Nw,{children:[y.jsx(ki,{path:"/p/:uid",element:y.jsx($6,{})}),y.jsx(ki,{path:"/*",element:y.jsx(L7,{children:y.jsxs(Nw,{children:[y.jsx(ki,{path:"/",element:y.jsx(M6,{})}),y.jsx(ki,{path:"/search",element:y.jsx(L6,{})}),y.jsx(ki,{path:"/profile/:id",element:y.jsx(V6,{})}),y.jsx(ki,{path:"/stealth",element:y.jsx(F6,{})}),y.jsx(ki,{path:"/settings",element:y.jsx(z6,{})}),y.jsx(ki,{path:"/vault",element:y.jsx(U6,{})}),y.jsx(ki,{path:"/graph",element:y.jsx(D7,{})})]})})})]})})})}tg.createRoot(document.getElementById("root")).render(y.jsx(gt.StrictMode,{children:y.jsx(V7,{})}));
