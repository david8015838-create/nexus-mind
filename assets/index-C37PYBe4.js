function CC(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kb={exports:{}},Qd={},Cb={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),AC=Symbol.for("react.portal"),NC=Symbol.for("react.fragment"),PC=Symbol.for("react.strict_mode"),RC=Symbol.for("react.profiler"),OC=Symbol.for("react.provider"),jC=Symbol.for("react.context"),DC=Symbol.for("react.forward_ref"),MC=Symbol.for("react.suspense"),LC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),m_=Symbol.iterator;function FC(n){return n===null||typeof n!="object"?null:(n=m_&&n[m_]||n["@@iterator"],typeof n=="function"?n:null)}var Ab={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nb=Object.assign,Pb={};function su(n,e,r){this.props=n,this.context=e,this.refs=Pb,this.updater=r||Ab}su.prototype.isReactComponent={};su.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};su.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Rb(){}Rb.prototype=su.prototype;function Gy(n,e,r){this.props=n,this.context=e,this.refs=Pb,this.updater=r||Ab}var Qy=Gy.prototype=new Rb;Qy.constructor=Gy;Nb(Qy,su.prototype);Qy.isPureReactComponent=!0;var g_=Array.isArray,Ob=Object.prototype.hasOwnProperty,Yy={current:null},jb={key:!0,ref:!0,__self:!0,__source:!0};function Db(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ob.call(e,i)&&!jb.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:sh,type:n,key:o,ref:a,props:s,_owner:Yy.current}}function UC(n,e){return{$$typeof:sh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Xy(n){return typeof n=="object"&&n!==null&&n.$$typeof===sh}function zC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var y_=/\/+/g;function Zp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?zC(""+n.key):e.toString(36)}function mf(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case sh:case AC:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+Zp(a,0):i,g_(s)?(r="",n!=null&&(r=n.replace(y_,"$&/")+"/"),mf(s,e,r,"",function(c){return c})):s!=null&&(Xy(s)&&(s=UC(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(y_,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",g_(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+Zp(o,l);a+=mf(o,e,r,u,s)}else if(u=FC(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+Zp(o,l++),a+=mf(o,e,r,u,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Lh(n,e,r){if(n==null)return n;var i=[],s=0;return mf(n,i,"","",function(o){return e.call(r,o,s++)}),i}function $C(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Xn={current:null},gf={transition:null},BC={ReactCurrentDispatcher:Xn,ReactCurrentBatchConfig:gf,ReactCurrentOwner:Yy};function Mb(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Lh,forEach:function(n,e,r){Lh(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return Lh(n,function(){e++}),e},toArray:function(n){return Lh(n,function(e){return e})||[]},only:function(n){if(!Xy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};rt.Component=su;rt.Fragment=NC;rt.Profiler=RC;rt.PureComponent=Gy;rt.StrictMode=PC;rt.Suspense=MC;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BC;rt.act=Mb;rt.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Nb({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Yy.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)Ob.call(e,u)&&!jb.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:sh,type:n.type,key:s,ref:o,props:i,_owner:a}};rt.createContext=function(n){return n={$$typeof:jC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:OC,_context:n},n.Consumer=n};rt.createElement=Db;rt.createFactory=function(n){var e=Db.bind(null,n);return e.type=n,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(n){return{$$typeof:DC,render:n}};rt.isValidElement=Xy;rt.lazy=function(n){return{$$typeof:VC,_payload:{_status:-1,_result:n},_init:$C}};rt.memo=function(n,e){return{$$typeof:LC,type:n,compare:e===void 0?null:e}};rt.startTransition=function(n){var e=gf.transition;gf.transition={};try{n()}finally{gf.transition=e}};rt.unstable_act=Mb;rt.useCallback=function(n,e){return Xn.current.useCallback(n,e)};rt.useContext=function(n){return Xn.current.useContext(n)};rt.useDebugValue=function(){};rt.useDeferredValue=function(n){return Xn.current.useDeferredValue(n)};rt.useEffect=function(n,e){return Xn.current.useEffect(n,e)};rt.useId=function(){return Xn.current.useId()};rt.useImperativeHandle=function(n,e,r){return Xn.current.useImperativeHandle(n,e,r)};rt.useInsertionEffect=function(n,e){return Xn.current.useInsertionEffect(n,e)};rt.useLayoutEffect=function(n,e){return Xn.current.useLayoutEffect(n,e)};rt.useMemo=function(n,e){return Xn.current.useMemo(n,e)};rt.useReducer=function(n,e,r){return Xn.current.useReducer(n,e,r)};rt.useRef=function(n){return Xn.current.useRef(n)};rt.useState=function(n){return Xn.current.useState(n)};rt.useSyncExternalStore=function(n,e,r){return Xn.current.useSyncExternalStore(n,e,r)};rt.useTransition=function(){return Xn.current.useTransition()};rt.version="18.3.1";Cb.exports=rt;var de=Cb.exports;const wt=Gd(de),qC=CC({__proto__:null,default:wt},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HC=de,KC=Symbol.for("react.element"),WC=Symbol.for("react.fragment"),GC=Object.prototype.hasOwnProperty,QC=HC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YC={key:!0,ref:!0,__self:!0,__source:!0};function Lb(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)GC.call(e,i)&&!YC.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:KC,type:n,key:o,ref:a,props:s,_owner:QC.current}}Qd.Fragment=WC;Qd.jsx=Lb;Qd.jsxs=Lb;kb.exports=Qd;var y=kb.exports,ng={},Vb={exports:{}},Er={},Fb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ne,q){var K=ne.length;ne.push(q);e:for(;0<K;){var ue=K-1>>>1,ie=ne[ue];if(0<s(ie,q))ne[ue]=q,ne[K]=ie,K=ue;else break e}}function r(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var q=ne[0],K=ne.pop();if(K!==q){ne[0]=K;e:for(var ue=0,ie=ne.length,le=ie>>>1;ue<le;){var pe=2*(ue+1)-1,we=ne[pe],Me=pe+1,je=ne[Me];if(0>s(we,K))Me<ie&&0>s(je,we)?(ne[ue]=je,ne[Me]=K,ue=Me):(ne[ue]=we,ne[pe]=K,ue=pe);else if(Me<ie&&0>s(je,K))ne[ue]=je,ne[Me]=K,ue=Me;else break e}}return q}function s(ne,q){var K=ne.sortIndex-q.sortIndex;return K!==0?K:ne.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,m=3,_=!1,w=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ne){for(var q=r(c);q!==null;){if(q.callback===null)i(c);else if(q.startTime<=ne)i(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=r(c)}}function O(ne){if(I=!1,N(ne),!w)if(r(u)!==null)w=!0,Z(M);else{var q=r(c);q!==null&&me(O,q.startTime-ne)}}function M(ne,q){w=!1,I&&(I=!1,b(C),C=-1),_=!0;var K=m;try{for(N(q),h=r(u);h!==null&&(!(h.expirationTime>q)||ne&&!V());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,m=h.priorityLevel;var ie=ue(h.expirationTime<=q);q=n.unstable_now(),typeof ie=="function"?h.callback=ie:h===r(u)&&i(u),N(q)}else i(u);h=r(u)}if(h!==null)var le=!0;else{var pe=r(c);pe!==null&&me(O,pe.startTime-q),le=!1}return le}finally{h=null,m=K,_=!1}}var U=!1,A=null,C=-1,D=5,L=-1;function V(){return!(n.unstable_now()-L<D)}function $(){if(A!==null){var ne=n.unstable_now();L=ne;var q=!0;try{q=A(!0,ne)}finally{q?j():(U=!1,A=null)}}else U=!1}var j;if(typeof T=="function")j=function(){T($)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=$,j=function(){G.postMessage(null)}}else j=function(){P($,0)};function Z(ne){A=ne,U||(U=!0,j())}function me(ne,q){C=P(function(){ne(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){w||_||(w=!0,Z(M))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var K=m;m=q;try{return ne()}finally{m=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,q){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var K=m;m=ne;try{return q()}finally{m=K}},n.unstable_scheduleCallback=function(ne,q,K){var ue=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ue+K:ue):K=ue,ne){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,ne={id:d++,callback:q,priorityLevel:ne,startTime:K,expirationTime:ie,sortIndex:-1},K>ue?(ne.sortIndex=K,e(c,ne),r(u)===null&&ne===r(c)&&(I?(b(C),C=-1):I=!0,me(O,K-ue))):(ne.sortIndex=ie,e(u,ne),w||_||(w=!0,Z(M))),ne},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ne){var q=m;return function(){var K=m;m=q;try{return ne.apply(this,arguments)}finally{m=K}}}})(Ub);Fb.exports=Ub;var XC=Fb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC=de,xr=XC;function xe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zb=new Set,Tc={};function Va(n,e){zl(n,e),zl(n+"Capture",e)}function zl(n,e){for(Tc[n]=e,n=0;n<e.length;n++)zb.add(e[n])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rg=Object.prototype.hasOwnProperty,ZC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},__={};function eA(n){return rg.call(__,n)?!0:rg.call(v_,n)?!1:ZC.test(n)?__[n]=!0:(v_[n]=!0,!1)}function tA(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function nA(n,e,r,i){if(e===null||typeof e>"u"||tA(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jn(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){In[n]=new Jn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];In[e]=new Jn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){In[n]=new Jn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){In[n]=new Jn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){In[n]=new Jn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){In[n]=new Jn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){In[n]=new Jn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){In[n]=new Jn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){In[n]=new Jn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Jy=/[\-:]([a-z])/g;function Zy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Jy,Zy);In[e]=new Jn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Jy,Zy);In[e]=new Jn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Jy,Zy);In[e]=new Jn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){In[n]=new Jn(n,1,!1,n.toLowerCase(),null,!1,!1)});In.xlinkHref=new Jn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){In[n]=new Jn(n,1,!1,n.toLowerCase(),null,!0,!0)});function ev(n,e,r,i){var s=In.hasOwnProperty(e)?In[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nA(e,r,s,i)&&(r=null),i||s===null?eA(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Ms=JC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vh=Symbol.for("react.element"),dl=Symbol.for("react.portal"),pl=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),$b=Symbol.for("react.provider"),Bb=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),sg=Symbol.for("react.suspense"),og=Symbol.for("react.suspense_list"),rv=Symbol.for("react.memo"),eo=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),w_=Symbol.iterator;function Pu(n){return n===null||typeof n!="object"?null:(n=w_&&n[w_]||n["@@iterator"],typeof n=="function"?n:null)}var Vt=Object.assign,em;function Gu(n){if(em===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);em=e&&e[1]||""}return`
`+em+n}var tm=!1;function nm(n,e){if(!n||tm)return"";tm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{tm=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Gu(n):""}function rA(n){switch(n.tag){case 5:return Gu(n.type);case 16:return Gu("Lazy");case 13:return Gu("Suspense");case 19:return Gu("SuspenseList");case 0:case 2:case 15:return n=nm(n.type,!1),n;case 11:return n=nm(n.type.render,!1),n;case 1:return n=nm(n.type,!0),n;default:return""}}function ag(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pl:return"Fragment";case dl:return"Portal";case ig:return"Profiler";case tv:return"StrictMode";case sg:return"Suspense";case og:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Bb:return(n.displayName||"Context")+".Consumer";case $b:return(n._context.displayName||"Context")+".Provider";case nv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rv:return e=n.displayName||null,e!==null?e:ag(n.type)||"Memo";case eo:e=n._payload,n=n._init;try{return ag(n(e))}catch{}}return null}function iA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ag(e);case 8:return e===tv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Io(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hb(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sA(n){var e=Hb(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Fh(n){n._valueTracker||(n._valueTracker=sA(n))}function Kb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=Hb(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function Bf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function lg(n,e){var r=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function x_(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Io(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wb(n,e){e=e.checked,e!=null&&ev(n,"checked",e,!1)}function ug(n,e){Wb(n,e);var r=Io(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?cg(n,e.type,r):e.hasOwnProperty("defaultValue")&&cg(n,e.type,Io(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function b_(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function cg(n,e,r){(e!=="number"||Bf(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Qu=Array.isArray;function Sl(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+Io(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function hg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(xe(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function E_(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(xe(92));if(Qu(r)){if(1<r.length)throw Error(xe(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:Io(r)}}function Gb(n,e){var r=Io(e.value),i=Io(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function T_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Qb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Qb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Uh,Yb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Uh=Uh||document.createElement("div"),Uh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ic(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var oc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oA=["Webkit","ms","Moz","O"];Object.keys(oc).forEach(function(n){oA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),oc[e]=oc[n]})});function Xb(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||oc.hasOwnProperty(n)&&oc[n]?(""+e).trim():e+"px"}function Jb(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=Xb(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var aA=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dg(n,e){if(e){if(aA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(xe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(xe(62))}}function pg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mg=null;function iv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gg=null,kl=null,Cl=null;function I_(n){if(n=lh(n)){if(typeof gg!="function")throw Error(xe(280));var e=n.stateNode;e&&(e=ep(e),gg(n.stateNode,n.type,e))}}function Zb(n){kl?Cl?Cl.push(n):Cl=[n]:kl=n}function eE(){if(kl){var n=kl,e=Cl;if(Cl=kl=null,I_(n),e)for(n=0;n<e.length;n++)I_(e[n])}}function tE(n,e){return n(e)}function nE(){}var rm=!1;function rE(n,e,r){if(rm)return n(e,r);rm=!0;try{return tE(n,e,r)}finally{rm=!1,(kl!==null||Cl!==null)&&(nE(),eE())}}function Sc(n,e){var r=n.stateNode;if(r===null)return null;var i=ep(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(xe(231,e,typeof r));return r}var yg=!1;if(ks)try{var Ru={};Object.defineProperty(Ru,"passive",{get:function(){yg=!0}}),window.addEventListener("test",Ru,Ru),window.removeEventListener("test",Ru,Ru)}catch{yg=!1}function lA(n,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var ac=!1,qf=null,Hf=!1,vg=null,uA={onError:function(n){ac=!0,qf=n}};function cA(n,e,r,i,s,o,a,l,u){ac=!1,qf=null,lA.apply(uA,arguments)}function hA(n,e,r,i,s,o,a,l,u){if(cA.apply(this,arguments),ac){if(ac){var c=qf;ac=!1,qf=null}else throw Error(xe(198));Hf||(Hf=!0,vg=c)}}function Fa(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function iE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function S_(n){if(Fa(n)!==n)throw Error(xe(188))}function fA(n){var e=n.alternate;if(!e){if(e=Fa(n),e===null)throw Error(xe(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return S_(s),n;if(o===i)return S_(s),e;o=o.sibling}throw Error(xe(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(xe(189))}}if(r.alternate!==i)throw Error(xe(190))}if(r.tag!==3)throw Error(xe(188));return r.stateNode.current===r?n:e}function sE(n){return n=fA(n),n!==null?oE(n):null}function oE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=oE(n);if(e!==null)return e;n=n.sibling}return null}var aE=xr.unstable_scheduleCallback,k_=xr.unstable_cancelCallback,dA=xr.unstable_shouldYield,pA=xr.unstable_requestPaint,Yt=xr.unstable_now,mA=xr.unstable_getCurrentPriorityLevel,sv=xr.unstable_ImmediatePriority,lE=xr.unstable_UserBlockingPriority,Kf=xr.unstable_NormalPriority,gA=xr.unstable_LowPriority,uE=xr.unstable_IdlePriority,Yd=null,Ui=null;function yA(n){if(Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(Yd,n,void 0,(n.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:wA,vA=Math.log,_A=Math.LN2;function wA(n){return n>>>=0,n===0?32:31-(vA(n)/_A|0)|0}var zh=64,$h=4194304;function Yu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Wf(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Yu(l):(o&=a,o!==0&&(i=Yu(o)))}else a=r&~s,a!==0?i=Yu(a):o!==0&&(i=Yu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-pi(e),s=1<<r,i|=n[r],e&=~s;return i}function xA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bA(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-pi(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=xA(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function _g(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function cE(){var n=zh;return zh<<=1,!(zh&4194240)&&(zh=64),n}function im(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function oh(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-pi(e),n[e]=r}function EA(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-pi(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function ov(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-pi(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var vt=0;function hE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var fE,av,dE,pE,mE,wg=!1,Bh=[],fo=null,po=null,mo=null,kc=new Map,Cc=new Map,ro=[],TA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(n,e){switch(n){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":kc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(e.pointerId)}}function Ou(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=lh(e),e!==null&&av(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function IA(n,e,r,i,s){switch(e){case"focusin":return fo=Ou(fo,n,e,r,i,s),!0;case"dragenter":return po=Ou(po,n,e,r,i,s),!0;case"mouseover":return mo=Ou(mo,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return kc.set(o,Ou(kc.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Cc.set(o,Ou(Cc.get(o)||null,n,e,r,i,s)),!0}return!1}function gE(n){var e=fa(n.target);if(e!==null){var r=Fa(e);if(r!==null){if(e=r.tag,e===13){if(e=iE(r),e!==null){n.blockedOn=e,mE(n.priority,function(){dE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function yf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=xg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);mg=i,r.target.dispatchEvent(i),mg=null}else return e=lh(r),e!==null&&av(e),n.blockedOn=r,!1;e.shift()}return!0}function A_(n,e,r){yf(n)&&r.delete(e)}function SA(){wg=!1,fo!==null&&yf(fo)&&(fo=null),po!==null&&yf(po)&&(po=null),mo!==null&&yf(mo)&&(mo=null),kc.forEach(A_),Cc.forEach(A_)}function ju(n,e){n.blockedOn===e&&(n.blockedOn=null,wg||(wg=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,SA)))}function Ac(n){function e(s){return ju(s,n)}if(0<Bh.length){ju(Bh[0],n);for(var r=1;r<Bh.length;r++){var i=Bh[r];i.blockedOn===n&&(i.blockedOn=null)}}for(fo!==null&&ju(fo,n),po!==null&&ju(po,n),mo!==null&&ju(mo,n),kc.forEach(e),Cc.forEach(e),r=0;r<ro.length;r++)i=ro[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<ro.length&&(r=ro[0],r.blockedOn===null);)gE(r),r.blockedOn===null&&ro.shift()}var Al=Ms.ReactCurrentBatchConfig,Gf=!0;function kA(n,e,r,i){var s=vt,o=Al.transition;Al.transition=null;try{vt=1,lv(n,e,r,i)}finally{vt=s,Al.transition=o}}function CA(n,e,r,i){var s=vt,o=Al.transition;Al.transition=null;try{vt=4,lv(n,e,r,i)}finally{vt=s,Al.transition=o}}function lv(n,e,r,i){if(Gf){var s=xg(n,e,r,i);if(s===null)pm(n,e,i,Qf,r),C_(n,i);else if(IA(s,n,e,r,i))i.stopPropagation();else if(C_(n,i),e&4&&-1<TA.indexOf(n)){for(;s!==null;){var o=lh(s);if(o!==null&&fE(o),o=xg(n,e,r,i),o===null&&pm(n,e,i,Qf,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else pm(n,e,i,null,r)}}var Qf=null;function xg(n,e,r,i){if(Qf=null,n=iv(i),n=fa(n),n!==null)if(e=Fa(n),e===null)n=null;else if(r=e.tag,r===13){if(n=iE(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Qf=n,null}function yE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mA()){case sv:return 1;case lE:return 4;case Kf:case gA:return 16;case uE:return 536870912;default:return 16}default:return 16}}var lo=null,uv=null,vf=null;function vE(){if(vf)return vf;var n,e=uv,r=e.length,i,s="value"in lo?lo.value:lo.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return vf=s.slice(n,1<i?1-i:void 0)}function _f(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function qh(){return!0}function N_(){return!1}function Tr(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qh:N_,this.isPropagationStopped=N_,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qh)},persist:function(){},isPersistent:qh}),e}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cv=Tr(ou),ah=Vt({},ou,{view:0,detail:0}),AA=Tr(ah),sm,om,Du,Xd=Vt({},ah,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Du&&(Du&&n.type==="mousemove"?(sm=n.screenX-Du.screenX,om=n.screenY-Du.screenY):om=sm=0,Du=n),sm)},movementY:function(n){return"movementY"in n?n.movementY:om}}),P_=Tr(Xd),NA=Vt({},Xd,{dataTransfer:0}),PA=Tr(NA),RA=Vt({},ah,{relatedTarget:0}),am=Tr(RA),OA=Vt({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),jA=Tr(OA),DA=Vt({},ou,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),MA=Tr(DA),LA=Vt({},ou,{data:0}),R_=Tr(LA),VA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zA(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=UA[n])?!!e[n]:!1}function hv(){return zA}var $A=Vt({},ah,{key:function(n){if(n.key){var e=VA[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=_f(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?FA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hv,charCode:function(n){return n.type==="keypress"?_f(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_f(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),BA=Tr($A),qA=Vt({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=Tr(qA),HA=Vt({},ah,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hv}),KA=Tr(HA),WA=Vt({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),GA=Tr(WA),QA=Vt({},Xd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),YA=Tr(QA),XA=[9,13,27,32],fv=ks&&"CompositionEvent"in window,lc=null;ks&&"documentMode"in document&&(lc=document.documentMode);var JA=ks&&"TextEvent"in window&&!lc,_E=ks&&(!fv||lc&&8<lc&&11>=lc),j_=" ",D_=!1;function wE(n,e){switch(n){case"keyup":return XA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ml=!1;function ZA(n,e){switch(n){case"compositionend":return xE(e);case"keypress":return e.which!==32?null:(D_=!0,j_);case"textInput":return n=e.data,n===j_&&D_?null:n;default:return null}}function eN(n,e){if(ml)return n==="compositionend"||!fv&&wE(n,e)?(n=vE(),vf=uv=lo=null,ml=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _E&&e.locale!=="ko"?null:e.data;default:return null}}var tN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!tN[n.type]:e==="textarea"}function bE(n,e,r,i){Zb(i),e=Yf(e,"onChange"),0<e.length&&(r=new cv("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var uc=null,Nc=null;function nN(n){OE(n,0)}function Jd(n){var e=vl(n);if(Kb(e))return n}function rN(n,e){if(n==="change")return e}var EE=!1;if(ks){var lm;if(ks){var um="oninput"in document;if(!um){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),um=typeof L_.oninput=="function"}lm=um}else lm=!1;EE=lm&&(!document.documentMode||9<document.documentMode)}function V_(){uc&&(uc.detachEvent("onpropertychange",TE),Nc=uc=null)}function TE(n){if(n.propertyName==="value"&&Jd(Nc)){var e=[];bE(e,Nc,n,iv(n)),rE(nN,e)}}function iN(n,e,r){n==="focusin"?(V_(),uc=e,Nc=r,uc.attachEvent("onpropertychange",TE)):n==="focusout"&&V_()}function sN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jd(Nc)}function oN(n,e){if(n==="click")return Jd(e)}function aN(n,e){if(n==="input"||n==="change")return Jd(e)}function lN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var vi=typeof Object.is=="function"?Object.is:lN;function Pc(n,e){if(vi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!rg.call(e,s)||!vi(n[s],e[s]))return!1}return!0}function F_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function U_(n,e){var r=F_(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=F_(r)}}function IE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?IE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function SE(){for(var n=window,e=Bf();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=Bf(n.document)}return e}function dv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uN(n){var e=SE(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&IE(r.ownerDocument.documentElement,r)){if(i!==null&&dv(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=U_(r,o);var a=U_(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cN=ks&&"documentMode"in document&&11>=document.documentMode,gl=null,bg=null,cc=null,Eg=!1;function z_(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Eg||gl==null||gl!==Bf(i)||(i=gl,"selectionStart"in i&&dv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cc&&Pc(cc,i)||(cc=i,i=Yf(bg,"onSelect"),0<i.length&&(e=new cv("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=gl)))}function Hh(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var yl={animationend:Hh("Animation","AnimationEnd"),animationiteration:Hh("Animation","AnimationIteration"),animationstart:Hh("Animation","AnimationStart"),transitionend:Hh("Transition","TransitionEnd")},cm={},kE={};ks&&(kE=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Zd(n){if(cm[n])return cm[n];if(!yl[n])return n;var e=yl[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in kE)return cm[n]=e[r];return n}var CE=Zd("animationend"),AE=Zd("animationiteration"),NE=Zd("animationstart"),PE=Zd("transitionend"),RE=new Map,$_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(n,e){RE.set(n,e),Va(e,[n])}for(var hm=0;hm<$_.length;hm++){var fm=$_[hm],hN=fm.toLowerCase(),fN=fm[0].toUpperCase()+fm.slice(1);Do(hN,"on"+fN)}Do(CE,"onAnimationEnd");Do(AE,"onAnimationIteration");Do(NE,"onAnimationStart");Do("dblclick","onDoubleClick");Do("focusin","onFocus");Do("focusout","onBlur");Do(PE,"onTransitionEnd");zl("onMouseEnter",["mouseout","mouseover"]);zl("onMouseLeave",["mouseout","mouseover"]);zl("onPointerEnter",["pointerout","pointerover"]);zl("onPointerLeave",["pointerout","pointerover"]);Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Va("onBeforeInput",["compositionend","keypress","textInput","paste"]);Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function B_(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,hA(i,e,void 0,n),n.currentTarget=null}function OE(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;B_(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;B_(s,l,c),o=u}}}if(Hf)throw n=vg,Hf=!1,vg=null,n}function kt(n,e){var r=e[Cg];r===void 0&&(r=e[Cg]=new Set);var i=n+"__bubble";r.has(i)||(jE(e,n,2,!1),r.add(i))}function dm(n,e,r){var i=0;e&&(i|=4),jE(r,n,i,e)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Rc(n){if(!n[Kh]){n[Kh]=!0,zb.forEach(function(r){r!=="selectionchange"&&(dN.has(r)||dm(r,!1,n),dm(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Kh]||(e[Kh]=!0,dm("selectionchange",!1,e))}}function jE(n,e,r,i){switch(yE(e)){case 1:var s=kA;break;case 4:s=CA;break;default:s=lv}r=s.bind(null,e,r,n),s=void 0,!yg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function pm(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=fa(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}rE(function(){var c=o,d=iv(r),h=[];e:{var m=RE.get(n);if(m!==void 0){var _=cv,w=n;switch(n){case"keypress":if(_f(r)===0)break e;case"keydown":case"keyup":_=BA;break;case"focusin":w="focus",_=am;break;case"focusout":w="blur",_=am;break;case"beforeblur":case"afterblur":_=am;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=P_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=PA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=KA;break;case CE:case AE:case NE:_=jA;break;case PE:_=GA;break;case"scroll":_=AA;break;case"wheel":_=YA;break;case"copy":case"cut":case"paste":_=MA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=O_}var I=(e&4)!==0,P=!I&&n==="scroll",b=I?m!==null?m+"Capture":null:m;I=[];for(var T=c,N;T!==null;){N=T;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,b!==null&&(O=Sc(T,b),O!=null&&I.push(Oc(T,O,N)))),P)break;T=T.return}0<I.length&&(m=new _(m,w,null,r,d),h.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",_=n==="mouseout"||n==="pointerout",m&&r!==mg&&(w=r.relatedTarget||r.fromElement)&&(fa(w)||w[Cs]))break e;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(w=r.relatedTarget||r.toElement,_=c,w=w?fa(w):null,w!==null&&(P=Fa(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=c),_!==w)){if(I=P_,O="onMouseLeave",b="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(I=O_,O="onPointerLeave",b="onPointerEnter",T="pointer"),P=_==null?m:vl(_),N=w==null?m:vl(w),m=new I(O,T+"leave",_,r,d),m.target=P,m.relatedTarget=N,O=null,fa(d)===c&&(I=new I(b,T+"enter",w,r,d),I.target=N,I.relatedTarget=P,O=I),P=O,_&&w)t:{for(I=_,b=w,T=0,N=I;N;N=ol(N))T++;for(N=0,O=b;O;O=ol(O))N++;for(;0<T-N;)I=ol(I),T--;for(;0<N-T;)b=ol(b),N--;for(;T--;){if(I===b||b!==null&&I===b.alternate)break t;I=ol(I),b=ol(b)}I=null}else I=null;_!==null&&q_(h,m,_,I,!1),w!==null&&P!==null&&q_(h,P,w,I,!0)}}e:{if(m=c?vl(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var M=rN;else if(M_(m))if(EE)M=aN;else{M=sN;var U=iN}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=oN);if(M&&(M=M(n,c))){bE(h,M,r,d);break e}U&&U(n,m,c),n==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&cg(m,"number",m.value)}switch(U=c?vl(c):window,n){case"focusin":(M_(U)||U.contentEditable==="true")&&(gl=U,bg=c,cc=null);break;case"focusout":cc=bg=gl=null;break;case"mousedown":Eg=!0;break;case"contextmenu":case"mouseup":case"dragend":Eg=!1,z_(h,r,d);break;case"selectionchange":if(cN)break;case"keydown":case"keyup":z_(h,r,d)}var A;if(fv)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ml?wE(n,r)&&(C="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(_E&&r.locale!=="ko"&&(ml||C!=="onCompositionStart"?C==="onCompositionEnd"&&ml&&(A=vE()):(lo=d,uv="value"in lo?lo.value:lo.textContent,ml=!0)),U=Yf(c,C),0<U.length&&(C=new R_(C,n,null,r,d),h.push({event:C,listeners:U}),A?C.data=A:(A=xE(r),A!==null&&(C.data=A)))),(A=JA?ZA(n,r):eN(n,r))&&(c=Yf(c,"onBeforeInput"),0<c.length&&(d=new R_("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=A))}OE(h,e)})}function Oc(n,e,r){return{instance:n,listener:e,currentTarget:r}}function Yf(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sc(n,r),o!=null&&i.unshift(Oc(n,o,s)),o=Sc(n,e),o!=null&&i.push(Oc(n,o,s))),n=n.return}return i}function ol(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function q_(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=Sc(r,o),u!=null&&a.unshift(Oc(r,u,l))):s||(u=Sc(r,o),u!=null&&a.push(Oc(r,u,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var pN=/\r\n?/g,mN=/\u0000|\uFFFD/g;function H_(n){return(typeof n=="string"?n:""+n).replace(pN,`
`).replace(mN,"")}function Wh(n,e,r){if(e=H_(e),H_(n)!==e&&r)throw Error(xe(425))}function Xf(){}var Tg=null,Ig=null;function Sg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(n){return K_.resolve(null).then(n).catch(vN)}:kg;function vN(n){setTimeout(function(){throw n})}function mm(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),Ac(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Ac(e)}function go(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function W_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var au=Math.random().toString(36).slice(2),Vi="__reactFiber$"+au,jc="__reactProps$"+au,Cs="__reactContainer$"+au,Cg="__reactEvents$"+au,_N="__reactListeners$"+au,wN="__reactHandles$"+au;function fa(n){var e=n[Vi];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Cs]||r[Vi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=W_(n);n!==null;){if(r=n[Vi])return r;n=W_(n)}return e}n=r,r=n.parentNode}return null}function lh(n){return n=n[Vi]||n[Cs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(xe(33))}function ep(n){return n[jc]||null}var Ag=[],_l=-1;function Mo(n){return{current:n}}function Pt(n){0>_l||(n.current=Ag[_l],Ag[_l]=null,_l--)}function St(n,e){_l++,Ag[_l]=n.current,n.current=e}var So={},zn=Mo(So),sr=Mo(!1),Sa=So;function $l(n,e){var r=n.type.contextTypes;if(!r)return So;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function or(n){return n=n.childContextTypes,n!=null}function Jf(){Pt(sr),Pt(zn)}function G_(n,e,r){if(zn.current!==So)throw Error(xe(168));St(zn,e),St(sr,r)}function DE(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(xe(108,iA(n)||"Unknown",s));return Vt({},r,i)}function Zf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||So,Sa=zn.current,St(zn,n),St(sr,sr.current),!0}function Q_(n,e,r){var i=n.stateNode;if(!i)throw Error(xe(169));r?(n=DE(n,e,Sa),i.__reactInternalMemoizedMergedChildContext=n,Pt(sr),Pt(zn),St(zn,n)):Pt(sr),St(sr,r)}var ms=null,tp=!1,gm=!1;function ME(n){ms===null?ms=[n]:ms.push(n)}function xN(n){tp=!0,ME(n)}function Lo(){if(!gm&&ms!==null){gm=!0;var n=0,e=vt;try{var r=ms;for(vt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}ms=null,tp=!1}catch(s){throw ms!==null&&(ms=ms.slice(n+1)),aE(sv,Lo),s}finally{vt=e,gm=!1}}return null}var wl=[],xl=0,ed=null,td=0,Dr=[],Mr=0,ka=null,vs=1,_s="";function aa(n,e){wl[xl++]=td,wl[xl++]=ed,ed=n,td=e}function LE(n,e,r){Dr[Mr++]=vs,Dr[Mr++]=_s,Dr[Mr++]=ka,ka=n;var i=vs;n=_s;var s=32-pi(i)-1;i&=~(1<<s),r+=1;var o=32-pi(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,vs=1<<32-pi(e)+s|r<<s|i,_s=o+n}else vs=1<<o|r<<s|i,_s=n}function pv(n){n.return!==null&&(aa(n,1),LE(n,1,0))}function mv(n){for(;n===ed;)ed=wl[--xl],wl[xl]=null,td=wl[--xl],wl[xl]=null;for(;n===ka;)ka=Dr[--Mr],Dr[Mr]=null,_s=Dr[--Mr],Dr[Mr]=null,vs=Dr[--Mr],Dr[Mr]=null}var _r=null,yr=null,Ot=!1,ui=null;function VE(n,e){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function Y_(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,_r=n,yr=go(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,_r=n,yr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ka!==null?{id:vs,overflow:_s}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,_r=n,yr=null,!0):!1;default:return!1}}function Ng(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pg(n){if(Ot){var e=yr;if(e){var r=e;if(!Y_(n,e)){if(Ng(n))throw Error(xe(418));e=go(r.nextSibling);var i=_r;e&&Y_(n,e)?VE(i,r):(n.flags=n.flags&-4097|2,Ot=!1,_r=n)}}else{if(Ng(n))throw Error(xe(418));n.flags=n.flags&-4097|2,Ot=!1,_r=n}}}function X_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_r=n}function Gh(n){if(n!==_r)return!1;if(!Ot)return X_(n),Ot=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Sg(n.type,n.memoizedProps)),e&&(e=yr)){if(Ng(n))throw FE(),Error(xe(418));for(;e;)VE(n,e),e=go(e.nextSibling)}if(X_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(xe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){yr=go(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}yr=null}}else yr=_r?go(n.stateNode.nextSibling):null;return!0}function FE(){for(var n=yr;n;)n=go(n.nextSibling)}function Bl(){yr=_r=null,Ot=!1}function gv(n){ui===null?ui=[n]:ui.push(n)}var bN=Ms.ReactCurrentBatchConfig;function Mu(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xe(309));var i=r.stateNode}if(!i)throw Error(xe(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(xe(284));if(!r._owner)throw Error(xe(290,n))}return n}function Qh(n,e){throw n=Object.prototype.toString.call(e),Error(xe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function J_(n){var e=n._init;return e(n._payload)}function UE(n){function e(b,T){if(n){var N=b.deletions;N===null?(b.deletions=[T],b.flags|=16):N.push(T)}}function r(b,T){if(!n)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function i(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function s(b,T){return b=wo(b,T),b.index=0,b.sibling=null,b}function o(b,T,N){return b.index=N,n?(N=b.alternate,N!==null?(N=N.index,N<T?(b.flags|=2,T):N):(b.flags|=2,T)):(b.flags|=1048576,T)}function a(b){return n&&b.alternate===null&&(b.flags|=2),b}function l(b,T,N,O){return T===null||T.tag!==6?(T=Em(N,b.mode,O),T.return=b,T):(T=s(T,N),T.return=b,T)}function u(b,T,N,O){var M=N.type;return M===pl?d(b,T,N.props.children,O,N.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===eo&&J_(M)===T.type)?(O=s(T,N.props),O.ref=Mu(b,T,N),O.return=b,O):(O=Sf(N.type,N.key,N.props,null,b.mode,O),O.ref=Mu(b,T,N),O.return=b,O)}function c(b,T,N,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=Tm(N,b.mode,O),T.return=b,T):(T=s(T,N.children||[]),T.return=b,T)}function d(b,T,N,O,M){return T===null||T.tag!==7?(T=wa(N,b.mode,O,M),T.return=b,T):(T=s(T,N),T.return=b,T)}function h(b,T,N){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Em(""+T,b.mode,N),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Vh:return N=Sf(T.type,T.key,T.props,null,b.mode,N),N.ref=Mu(b,null,T),N.return=b,N;case dl:return T=Tm(T,b.mode,N),T.return=b,T;case eo:var O=T._init;return h(b,O(T._payload),N)}if(Qu(T)||Pu(T))return T=wa(T,b.mode,N,null),T.return=b,T;Qh(b,T)}return null}function m(b,T,N,O){var M=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:l(b,T,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Vh:return N.key===M?u(b,T,N,O):null;case dl:return N.key===M?c(b,T,N,O):null;case eo:return M=N._init,m(b,T,M(N._payload),O)}if(Qu(N)||Pu(N))return M!==null?null:d(b,T,N,O,null);Qh(b,N)}return null}function _(b,T,N,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(N)||null,l(T,b,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Vh:return b=b.get(O.key===null?N:O.key)||null,u(T,b,O,M);case dl:return b=b.get(O.key===null?N:O.key)||null,c(T,b,O,M);case eo:var U=O._init;return _(b,T,N,U(O._payload),M)}if(Qu(O)||Pu(O))return b=b.get(N)||null,d(T,b,O,M,null);Qh(T,O)}return null}function w(b,T,N,O){for(var M=null,U=null,A=T,C=T=0,D=null;A!==null&&C<N.length;C++){A.index>C?(D=A,A=null):D=A.sibling;var L=m(b,A,N[C],O);if(L===null){A===null&&(A=D);break}n&&A&&L.alternate===null&&e(b,A),T=o(L,T,C),U===null?M=L:U.sibling=L,U=L,A=D}if(C===N.length)return r(b,A),Ot&&aa(b,C),M;if(A===null){for(;C<N.length;C++)A=h(b,N[C],O),A!==null&&(T=o(A,T,C),U===null?M=A:U.sibling=A,U=A);return Ot&&aa(b,C),M}for(A=i(b,A);C<N.length;C++)D=_(A,b,C,N[C],O),D!==null&&(n&&D.alternate!==null&&A.delete(D.key===null?C:D.key),T=o(D,T,C),U===null?M=D:U.sibling=D,U=D);return n&&A.forEach(function(V){return e(b,V)}),Ot&&aa(b,C),M}function I(b,T,N,O){var M=Pu(N);if(typeof M!="function")throw Error(xe(150));if(N=M.call(N),N==null)throw Error(xe(151));for(var U=M=null,A=T,C=T=0,D=null,L=N.next();A!==null&&!L.done;C++,L=N.next()){A.index>C?(D=A,A=null):D=A.sibling;var V=m(b,A,L.value,O);if(V===null){A===null&&(A=D);break}n&&A&&V.alternate===null&&e(b,A),T=o(V,T,C),U===null?M=V:U.sibling=V,U=V,A=D}if(L.done)return r(b,A),Ot&&aa(b,C),M;if(A===null){for(;!L.done;C++,L=N.next())L=h(b,L.value,O),L!==null&&(T=o(L,T,C),U===null?M=L:U.sibling=L,U=L);return Ot&&aa(b,C),M}for(A=i(b,A);!L.done;C++,L=N.next())L=_(A,b,C,L.value,O),L!==null&&(n&&L.alternate!==null&&A.delete(L.key===null?C:L.key),T=o(L,T,C),U===null?M=L:U.sibling=L,U=L);return n&&A.forEach(function($){return e(b,$)}),Ot&&aa(b,C),M}function P(b,T,N,O){if(typeof N=="object"&&N!==null&&N.type===pl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Vh:e:{for(var M=N.key,U=T;U!==null;){if(U.key===M){if(M=N.type,M===pl){if(U.tag===7){r(b,U.sibling),T=s(U,N.props.children),T.return=b,b=T;break e}}else if(U.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===eo&&J_(M)===U.type){r(b,U.sibling),T=s(U,N.props),T.ref=Mu(b,U,N),T.return=b,b=T;break e}r(b,U);break}else e(b,U);U=U.sibling}N.type===pl?(T=wa(N.props.children,b.mode,O,N.key),T.return=b,b=T):(O=Sf(N.type,N.key,N.props,null,b.mode,O),O.ref=Mu(b,T,N),O.return=b,b=O)}return a(b);case dl:e:{for(U=N.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){r(b,T.sibling),T=s(T,N.children||[]),T.return=b,b=T;break e}else{r(b,T);break}else e(b,T);T=T.sibling}T=Tm(N,b.mode,O),T.return=b,b=T}return a(b);case eo:return U=N._init,P(b,T,U(N._payload),O)}if(Qu(N))return w(b,T,N,O);if(Pu(N))return I(b,T,N,O);Qh(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,T!==null&&T.tag===6?(r(b,T.sibling),T=s(T,N),T.return=b,b=T):(r(b,T),T=Em(N,b.mode,O),T.return=b,b=T),a(b)):r(b,T)}return P}var ql=UE(!0),zE=UE(!1),nd=Mo(null),rd=null,bl=null,yv=null;function vv(){yv=bl=rd=null}function _v(n){var e=nd.current;Pt(nd),n._currentValue=e}function Rg(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Nl(n,e){rd=n,yv=bl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(rr=!0),n.firstContext=null)}function qr(n){var e=n._currentValue;if(yv!==n)if(n={context:n,memoizedValue:e,next:null},bl===null){if(rd===null)throw Error(xe(308));bl=n,rd.dependencies={lanes:0,firstContext:n}}else bl=bl.next=n;return e}var da=null;function wv(n){da===null?da=[n]:da.push(n)}function $E(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,wv(e)):(r.next=s.next,s.next=r),e.interleaved=r,As(n,i)}function As(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var to=!1;function xv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ts(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function yo(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ht&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,As(n,r)}return s=i.interleaved,s===null?(e.next=e,wv(i)):(e.next=s.next,s.next=e),i.interleaved=e,As(n,r)}function wf(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,ov(n,r)}}function Z_(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function id(n,e,r,i){var s=n.updateQueue;to=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(o!==null){var h=s.baseState;a=0,d=c=u=null,l=o;do{var m=l.lane,_=l.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=n,I=l;switch(m=e,_=r,I.tag){case 1:if(w=I.payload,typeof w=="function"){h=w.call(_,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,m=typeof w=="function"?w.call(_,h,m):w,m==null)break e;h=Vt({},h,m);break e;case 2:to=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else _={eventTime:_,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=_,u=h):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Aa|=a,n.lanes=a,n.memoizedState=h}}function ew(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(xe(191,s));s.call(i)}}}var uh={},zi=Mo(uh),Dc=Mo(uh),Mc=Mo(uh);function pa(n){if(n===uh)throw Error(xe(174));return n}function bv(n,e){switch(St(Mc,e),St(Dc,n),St(zi,uh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=fg(e,n)}Pt(zi),St(zi,e)}function Hl(){Pt(zi),Pt(Dc),Pt(Mc)}function qE(n){pa(Mc.current);var e=pa(zi.current),r=fg(e,n.type);e!==r&&(St(Dc,n),St(zi,r))}function Ev(n){Dc.current===n&&(Pt(zi),Pt(Dc))}var Mt=Mo(0);function sd(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ym=[];function Tv(){for(var n=0;n<ym.length;n++)ym[n]._workInProgressVersionPrimary=null;ym.length=0}var xf=Ms.ReactCurrentDispatcher,vm=Ms.ReactCurrentBatchConfig,Ca=0,Lt=null,on=null,yn=null,od=!1,hc=!1,Lc=0,EN=0;function jn(){throw Error(xe(321))}function Iv(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!vi(n[r],e[r]))return!1;return!0}function Sv(n,e,r,i,s,o){if(Ca=o,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xf.current=n===null||n.memoizedState===null?kN:CN,n=r(i,s),hc){o=0;do{if(hc=!1,Lc=0,25<=o)throw Error(xe(301));o+=1,yn=on=null,e.updateQueue=null,xf.current=AN,n=r(i,s)}while(hc)}if(xf.current=ad,e=on!==null&&on.next!==null,Ca=0,yn=on=Lt=null,od=!1,e)throw Error(xe(300));return n}function kv(){var n=Lc!==0;return Lc=0,n}function ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Lt.memoizedState=yn=n:yn=yn.next=n,yn}function Hr(){if(on===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=on.next;var e=yn===null?Lt.memoizedState:yn.next;if(e!==null)yn=e,on=n;else{if(n===null)throw Error(xe(310));on=n,n={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},yn===null?Lt.memoizedState=yn=n:yn=yn.next=n}return yn}function Vc(n,e){return typeof e=="function"?e(n):e}function _m(n){var e=Hr(),r=e.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=n;var i=on,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var d=c.lane;if((Ca&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,a=i):u=u.next=h,Lt.lanes|=d,Aa|=d}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,vi(i,e.memoizedState)||(rr=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Lt.lanes|=o,Aa|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function wm(n){var e=Hr(),r=e.queue;if(r===null)throw Error(xe(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);vi(o,e.memoizedState)||(rr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function HE(){}function KE(n,e){var r=Lt,i=Hr(),s=e(),o=!vi(i.memoizedState,s);if(o&&(i.memoizedState=s,rr=!0),i=i.queue,Cv(QE.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||yn!==null&&yn.memoizedState.tag&1){if(r.flags|=2048,Fc(9,GE.bind(null,r,i,s,e),void 0,null),vn===null)throw Error(xe(349));Ca&30||WE(r,e,s)}return s}function WE(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function GE(n,e,r,i){e.value=r,e.getSnapshot=i,YE(e)&&XE(n)}function QE(n,e,r){return r(function(){YE(e)&&XE(n)})}function YE(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!vi(n,r)}catch{return!0}}function XE(n){var e=As(n,1);e!==null&&mi(e,n,1,-1)}function tw(n){var e=ji();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:n},e.queue=n,n=n.dispatch=SN.bind(null,Lt,n),[e.memoizedState,n]}function Fc(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function JE(){return Hr().memoizedState}function bf(n,e,r,i){var s=ji();Lt.flags|=n,s.memoizedState=Fc(1|e,r,void 0,i===void 0?null:i)}function np(n,e,r,i){var s=Hr();i=i===void 0?null:i;var o=void 0;if(on!==null){var a=on.memoizedState;if(o=a.destroy,i!==null&&Iv(i,a.deps)){s.memoizedState=Fc(e,r,o,i);return}}Lt.flags|=n,s.memoizedState=Fc(1|e,r,o,i)}function nw(n,e){return bf(8390656,8,n,e)}function Cv(n,e){return np(2048,8,n,e)}function ZE(n,e){return np(4,2,n,e)}function eT(n,e){return np(4,4,n,e)}function tT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function nT(n,e,r){return r=r!=null?r.concat([n]):null,np(4,4,tT.bind(null,e,n),r)}function Av(){}function rT(n,e){var r=Hr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Iv(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function iT(n,e){var r=Hr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Iv(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function sT(n,e,r){return Ca&21?(vi(r,e)||(r=cE(),Lt.lanes|=r,Aa|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,rr=!0),n.memoizedState=r)}function TN(n,e){var r=vt;vt=r!==0&&4>r?r:4,n(!0);var i=vm.transition;vm.transition={};try{n(!1),e()}finally{vt=r,vm.transition=i}}function oT(){return Hr().memoizedState}function IN(n,e,r){var i=_o(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},aT(n))lT(e,r);else if(r=$E(n,e,r,i),r!==null){var s=Qn();mi(r,n,i,s),uT(r,e,i)}}function SN(n,e,r){var i=_o(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(aT(n))lT(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,vi(l,a)){var u=e.interleaved;u===null?(s.next=s,wv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=$E(n,e,s,i),r!==null&&(s=Qn(),mi(r,n,i,s),uT(r,e,i))}}function aT(n){var e=n.alternate;return n===Lt||e!==null&&e===Lt}function lT(n,e){hc=od=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function uT(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,ov(n,r)}}var ad={readContext:qr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},kN={readContext:qr,useCallback:function(n,e){return ji().memoizedState=[n,e===void 0?null:e],n},useContext:qr,useEffect:nw,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,bf(4194308,4,tT.bind(null,e,n),r)},useLayoutEffect:function(n,e){return bf(4194308,4,n,e)},useInsertionEffect:function(n,e){return bf(4,2,n,e)},useMemo:function(n,e){var r=ji();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=ji();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=IN.bind(null,Lt,n),[i.memoizedState,n]},useRef:function(n){var e=ji();return n={current:n},e.memoizedState=n},useState:tw,useDebugValue:Av,useDeferredValue:function(n){return ji().memoizedState=n},useTransition:function(){var n=tw(!1),e=n[0];return n=TN.bind(null,n[1]),ji().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Lt,s=ji();if(Ot){if(r===void 0)throw Error(xe(407));r=r()}else{if(r=e(),vn===null)throw Error(xe(349));Ca&30||WE(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,nw(QE.bind(null,i,o,n),[n]),i.flags|=2048,Fc(9,GE.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=ji(),e=vn.identifierPrefix;if(Ot){var r=_s,i=vs;r=(i&~(1<<32-pi(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Lc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=EN++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},CN={readContext:qr,useCallback:rT,useContext:qr,useEffect:Cv,useImperativeHandle:nT,useInsertionEffect:ZE,useLayoutEffect:eT,useMemo:iT,useReducer:_m,useRef:JE,useState:function(){return _m(Vc)},useDebugValue:Av,useDeferredValue:function(n){var e=Hr();return sT(e,on.memoizedState,n)},useTransition:function(){var n=_m(Vc)[0],e=Hr().memoizedState;return[n,e]},useMutableSource:HE,useSyncExternalStore:KE,useId:oT,unstable_isNewReconciler:!1},AN={readContext:qr,useCallback:rT,useContext:qr,useEffect:Cv,useImperativeHandle:nT,useInsertionEffect:ZE,useLayoutEffect:eT,useMemo:iT,useReducer:wm,useRef:JE,useState:function(){return wm(Vc)},useDebugValue:Av,useDeferredValue:function(n){var e=Hr();return on===null?e.memoizedState=n:sT(e,on.memoizedState,n)},useTransition:function(){var n=wm(Vc)[0],e=Hr().memoizedState;return[n,e]},useMutableSource:HE,useSyncExternalStore:KE,useId:oT,unstable_isNewReconciler:!1};function ai(n,e){if(n&&n.defaultProps){e=Vt({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Og(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Vt({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var rp={isMounted:function(n){return(n=n._reactInternals)?Fa(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Qn(),s=_o(n),o=Ts(i,s);o.payload=e,r!=null&&(o.callback=r),e=yo(n,o,s),e!==null&&(mi(e,n,s,i),wf(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Qn(),s=_o(n),o=Ts(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=yo(n,o,s),e!==null&&(mi(e,n,s,i),wf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Qn(),i=_o(n),s=Ts(r,i);s.tag=2,e!=null&&(s.callback=e),e=yo(n,s,i),e!==null&&(mi(e,n,i,r),wf(e,n,i))}};function rw(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Pc(r,i)||!Pc(s,o):!0}function cT(n,e,r){var i=!1,s=So,o=e.contextType;return typeof o=="object"&&o!==null?o=qr(o):(s=or(e)?Sa:zn.current,i=e.contextTypes,o=(i=i!=null)?$l(n,s):So),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rp,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function iw(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&rp.enqueueReplaceState(e,e.state,null)}function jg(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},xv(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=qr(o):(o=or(e)?Sa:zn.current,s.context=$l(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Og(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rp.enqueueReplaceState(s,s.state,null),id(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Kl(n,e){try{var r="",i=e;do r+=rA(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function xm(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function Dg(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var NN=typeof WeakMap=="function"?WeakMap:Map;function hT(n,e,r){r=Ts(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){ud||(ud=!0,Hg=i),Dg(n,e)},r}function fT(n,e,r){r=Ts(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){Dg(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Dg(n,e),typeof i!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function sw(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new NN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=qN.bind(null,n,e,r),e.then(n,n))}function ow(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function aw(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ts(-1,1),e.tag=2,yo(r,e,1))),r.lanes|=1),n)}var PN=Ms.ReactCurrentOwner,rr=!1;function Wn(n,e,r,i){e.child=n===null?zE(e,null,r,i):ql(e,n.child,r,i)}function lw(n,e,r,i,s){r=r.render;var o=e.ref;return Nl(e,s),i=Sv(n,e,r,i,o,s),r=kv(),n!==null&&!rr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ns(n,e,s)):(Ot&&r&&pv(e),e.flags|=1,Wn(n,e,i,s),e.child)}function uw(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!Lv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,dT(n,e,o,i,s)):(n=Sf(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Pc,r(a,i)&&n.ref===e.ref)return Ns(n,e,s)}return e.flags|=1,n=wo(o,i),n.ref=e.ref,n.return=e,e.child=n}function dT(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(Pc(o,i)&&n.ref===e.ref)if(rr=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(rr=!0);else return e.lanes=n.lanes,Ns(n,e,s)}return Mg(n,e,r,i,s)}function pT(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Tl,gr),gr|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,St(Tl,gr),gr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,St(Tl,gr),gr|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,St(Tl,gr),gr|=i;return Wn(n,e,s,r),e.child}function mT(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Mg(n,e,r,i,s){var o=or(r)?Sa:zn.current;return o=$l(e,o),Nl(e,s),r=Sv(n,e,r,i,o,s),i=kv(),n!==null&&!rr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ns(n,e,s)):(Ot&&i&&pv(e),e.flags|=1,Wn(n,e,r,s),e.child)}function cw(n,e,r,i,s){if(or(r)){var o=!0;Zf(e)}else o=!1;if(Nl(e,s),e.stateNode===null)Ef(n,e),cT(e,r,i),jg(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=qr(c):(c=or(r)?Sa:zn.current,c=$l(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&iw(e,a,i,c),to=!1;var m=e.memoizedState;a.state=m,id(e,i,a,s),u=e.memoizedState,l!==i||m!==u||sr.current||to?(typeof d=="function"&&(Og(e,r,d,i),u=e.memoizedState),(l=to||rw(e,r,l,i,m,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,BE(n,e),l=e.memoizedProps,c=e.type===e.elementType?l:ai(e.type,l),a.props=c,h=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=qr(u):(u=or(r)?Sa:zn.current,u=$l(e,u));var _=r.getDerivedStateFromProps;(d=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==u)&&iw(e,a,i,u),to=!1,m=e.memoizedState,a.state=m,id(e,i,a,s);var w=e.memoizedState;l!==h||m!==w||sr.current||to?(typeof _=="function"&&(Og(e,r,_,i),w=e.memoizedState),(c=to||rw(e,r,c,i,m,w,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,w,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,w,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),a.props=i,a.state=w,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Lg(n,e,r,i,o,s)}function Lg(n,e,r,i,s,o){mT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&Q_(e,r,!1),Ns(n,e,o);i=e.stateNode,PN.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=ql(e,n.child,null,o),e.child=ql(e,null,l,o)):Wn(n,e,l,o),e.memoizedState=i.state,s&&Q_(e,r,!0),e.child}function gT(n){var e=n.stateNode;e.pendingContext?G_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&G_(n,e.context,!1),bv(n,e.containerInfo)}function hw(n,e,r,i,s){return Bl(),gv(s),e.flags|=256,Wn(n,e,r,i),e.child}var Vg={dehydrated:null,treeContext:null,retryLane:0};function Fg(n){return{baseLanes:n,cachePool:null,transitions:null}}function yT(n,e,r){var i=e.pendingProps,s=Mt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),St(Mt,s&1),n===null)return Pg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=op(a,i,0,null),n=wa(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Fg(r),e.memoizedState=Vg,n):Nv(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return RN(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=wo(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=wo(l,o):(o=wa(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?Fg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=Vg,i}return o=n.child,n=o.sibling,i=wo(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function Nv(n,e){return e=op({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Yh(n,e,r,i){return i!==null&&gv(i),ql(e,n.child,null,r),n=Nv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RN(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=xm(Error(xe(422))),Yh(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=op({mode:"visible",children:i.children},s,0,null),o=wa(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ql(e,n.child,null,a),e.child.memoizedState=Fg(a),e.memoizedState=Vg,o);if(!(e.mode&1))return Yh(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(xe(419)),i=xm(o,i,void 0),Yh(n,e,a,i)}if(l=(a&n.childLanes)!==0,rr||l){if(i=vn,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,As(n,s),mi(i,n,s,-1))}return Mv(),i=xm(Error(xe(421))),Yh(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=HN.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,yr=go(s.nextSibling),_r=e,Ot=!0,ui=null,n!==null&&(Dr[Mr++]=vs,Dr[Mr++]=_s,Dr[Mr++]=ka,vs=n.id,_s=n.overflow,ka=e),e=Nv(e,i.children),e.flags|=4096,e)}function fw(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Rg(n.return,e,r)}function bm(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function vT(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Wn(n,e,i.children,r),i=Mt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fw(n,r,e);else if(n.tag===19)fw(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(St(Mt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&sd(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),bm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&sd(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}bm(e,!0,r,null,o);break;case"together":bm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ef(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ns(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Aa|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(xe(153));if(e.child!==null){for(n=e.child,r=wo(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=wo(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function ON(n,e,r){switch(e.tag){case 3:gT(e),Bl();break;case 5:qE(e);break;case 1:or(e.type)&&Zf(e);break;case 4:bv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;St(nd,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(St(Mt,Mt.current&1),e.flags|=128,null):r&e.child.childLanes?yT(n,e,r):(St(Mt,Mt.current&1),n=Ns(n,e,r),n!==null?n.sibling:null);St(Mt,Mt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return vT(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(Mt,Mt.current),i)break;return null;case 22:case 23:return e.lanes=0,pT(n,e,r)}return Ns(n,e,r)}var _T,Ug,wT,xT;_T=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ug=function(){};wT=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,pa(zi.current);var o=null;switch(r){case"input":s=lg(n,s),i=lg(n,i),o=[];break;case"select":s=Vt({},s,{value:void 0}),i=Vt({},i,{value:void 0}),o=[];break;case"textarea":s=hg(n,s),i=hg(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Xf)}dg(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tc.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tc.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&kt("scroll",n),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};xT=function(n,e,r,i){r!==i&&(e.flags|=4)};function Lu(n,e){if(!Ot)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Dn(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function jN(n,e,r){var i=e.pendingProps;switch(mv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(e),null;case 1:return or(e.type)&&Jf(),Dn(e),null;case 3:return i=e.stateNode,Hl(),Pt(sr),Pt(zn),Tv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Gh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(Gg(ui),ui=null))),Ug(n,e),Dn(e),null;case 5:Ev(e);var s=pa(Mc.current);if(r=e.type,n!==null&&e.stateNode!=null)wT(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(xe(166));return Dn(e),null}if(n=pa(zi.current),Gh(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Vi]=e,i[jc]=o,n=(e.mode&1)!==0,r){case"dialog":kt("cancel",i),kt("close",i);break;case"iframe":case"object":case"embed":kt("load",i);break;case"video":case"audio":for(s=0;s<Xu.length;s++)kt(Xu[s],i);break;case"source":kt("error",i);break;case"img":case"image":case"link":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"input":x_(i,o),kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},kt("invalid",i);break;case"textarea":E_(i,o),kt("invalid",i)}dg(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Wh(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Wh(i.textContent,l,n),s=["children",""+l]):Tc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&kt("scroll",i)}switch(r){case"input":Fh(i),b_(i,o,!0);break;case"textarea":Fh(i),T_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Xf)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qb(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Vi]=e,n[jc]=i,_T(n,e,!1,!1),e.stateNode=n;e:{switch(a=pg(r,i),r){case"dialog":kt("cancel",n),kt("close",n),s=i;break;case"iframe":case"object":case"embed":kt("load",n),s=i;break;case"video":case"audio":for(s=0;s<Xu.length;s++)kt(Xu[s],n);s=i;break;case"source":kt("error",n),s=i;break;case"img":case"image":case"link":kt("error",n),kt("load",n),s=i;break;case"details":kt("toggle",n),s=i;break;case"input":x_(n,i),s=lg(n,i),kt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Vt({},i,{value:void 0}),kt("invalid",n);break;case"textarea":E_(n,i),s=hg(n,i),kt("invalid",n);break;default:s=i}dg(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Jb(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yb(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Ic(n,u):typeof u=="number"&&Ic(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tc.hasOwnProperty(o)?u!=null&&o==="onScroll"&&kt("scroll",n):u!=null&&ev(n,o,u,a))}switch(r){case"input":Fh(n),b_(n,i,!1);break;case"textarea":Fh(n),T_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Io(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Sl(n,!!i.multiple,o,!1):i.defaultValue!=null&&Sl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Xf)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dn(e),null;case 6:if(n&&e.stateNode!=null)xT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(xe(166));if(r=pa(Mc.current),pa(zi.current),Gh(e)){if(i=e.stateNode,r=e.memoizedProps,i[Vi]=e,(o=i.nodeValue!==r)&&(n=_r,n!==null))switch(n.tag){case 3:Wh(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wh(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Vi]=e,e.stateNode=i}return Dn(e),null;case 13:if(Pt(Mt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ot&&yr!==null&&e.mode&1&&!(e.flags&128))FE(),Bl(),e.flags|=98560,o=!1;else if(o=Gh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(xe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(xe(317));o[Vi]=e}else Bl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dn(e),o=!1}else ui!==null&&(Gg(ui),ui=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Mt.current&1?ln===0&&(ln=3):Mv())),e.updateQueue!==null&&(e.flags|=4),Dn(e),null);case 4:return Hl(),Ug(n,e),n===null&&Rc(e.stateNode.containerInfo),Dn(e),null;case 10:return _v(e.type._context),Dn(e),null;case 17:return or(e.type)&&Jf(),Dn(e),null;case 19:if(Pt(Mt),o=e.memoizedState,o===null)return Dn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Lu(o,!1);else{if(ln!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=sd(n),a!==null){for(e.flags|=128,Lu(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return St(Mt,Mt.current&1|2),e.child}n=n.sibling}o.tail!==null&&Yt()>Wl&&(e.flags|=128,i=!0,Lu(o,!1),e.lanes=4194304)}else{if(!i)if(n=sd(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Lu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ot)return Dn(e),null}else 2*Yt()-o.renderingStartTime>Wl&&r!==1073741824&&(e.flags|=128,i=!0,Lu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Yt(),e.sibling=null,r=Mt.current,St(Mt,i?r&1|2:r&1),e):(Dn(e),null);case 22:case 23:return Dv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gr&1073741824&&(Dn(e),e.subtreeFlags&6&&(e.flags|=8192)):Dn(e),null;case 24:return null;case 25:return null}throw Error(xe(156,e.tag))}function DN(n,e){switch(mv(e),e.tag){case 1:return or(e.type)&&Jf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Hl(),Pt(sr),Pt(zn),Tv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Ev(e),null;case 13:if(Pt(Mt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(xe(340));Bl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Pt(Mt),null;case 4:return Hl(),null;case 10:return _v(e.type._context),null;case 22:case 23:return Dv(),null;case 24:return null;default:return null}}var Xh=!1,Fn=!1,MN=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function El(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Bt(n,e,i)}else r.current=null}function zg(n,e,r){try{r()}catch(i){Bt(n,e,i)}}var dw=!1;function LN(n,e){if(Tg=Gf,n=SE(),dv(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var _;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||i!==0&&h.nodeType!==3||(u=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(_=h.firstChild)!==null;)m=h,h=_;for(;;){if(h===n)break t;if(m===r&&++c===s&&(l=a),m===o&&++d===i&&(u=a),(_=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=_}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ig={focusedElem:n,selectionRange:r},Gf=!1,Fe=e;Fe!==null;)if(e=Fe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Fe=n;else for(;Fe!==null;){e=Fe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,P=w.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?I:ai(e.type,I),P);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xe(163))}}catch(O){Bt(e,e.return,O)}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}return w=dw,dw=!1,w}function fc(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&zg(e,r,o)}s=s.next}while(s!==i)}}function ip(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function $g(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function bT(n){var e=n.alternate;e!==null&&(n.alternate=null,bT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Vi],delete e[jc],delete e[Cg],delete e[_N],delete e[wN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ET(n){return n.tag===5||n.tag===3||n.tag===4}function pw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ET(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Xf));else if(i!==4&&(n=n.child,n!==null))for(Bg(n,e,r),n=n.sibling;n!==null;)Bg(n,e,r),n=n.sibling}function qg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(qg(n,e,r),n=n.sibling;n!==null;)qg(n,e,r),n=n.sibling}var xn=null,li=!1;function Ys(n,e,r){for(r=r.child;r!==null;)TT(n,e,r),r=r.sibling}function TT(n,e,r){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(Yd,r)}catch{}switch(r.tag){case 5:Fn||El(r,e);case 6:var i=xn,s=li;xn=null,Ys(n,e,r),xn=i,li=s,xn!==null&&(li?(n=xn,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):xn.removeChild(r.stateNode));break;case 18:xn!==null&&(li?(n=xn,r=r.stateNode,n.nodeType===8?mm(n.parentNode,r):n.nodeType===1&&mm(n,r),Ac(n)):mm(xn,r.stateNode));break;case 4:i=xn,s=li,xn=r.stateNode.containerInfo,li=!0,Ys(n,e,r),xn=i,li=s;break;case 0:case 11:case 14:case 15:if(!Fn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&zg(r,e,a),s=s.next}while(s!==i)}Ys(n,e,r);break;case 1:if(!Fn&&(El(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Bt(r,e,l)}Ys(n,e,r);break;case 21:Ys(n,e,r);break;case 22:r.mode&1?(Fn=(i=Fn)||r.memoizedState!==null,Ys(n,e,r),Fn=i):Ys(n,e,r);break;default:Ys(n,e,r)}}function mw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new MN),e.forEach(function(i){var s=KN.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function ri(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:xn=l.stateNode,li=!1;break e;case 3:xn=l.stateNode.containerInfo,li=!0;break e;case 4:xn=l.stateNode.containerInfo,li=!0;break e}l=l.return}if(xn===null)throw Error(xe(160));TT(o,a,s),xn=null,li=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Bt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IT(e,n),e=e.sibling}function IT(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ri(e,n),Ri(n),i&4){try{fc(3,n,n.return),ip(3,n)}catch(I){Bt(n,n.return,I)}try{fc(5,n,n.return)}catch(I){Bt(n,n.return,I)}}break;case 1:ri(e,n),Ri(n),i&512&&r!==null&&El(r,r.return);break;case 5:if(ri(e,n),Ri(n),i&512&&r!==null&&El(r,r.return),n.flags&32){var s=n.stateNode;try{Ic(s,"")}catch(I){Bt(n,n.return,I)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Wb(s,o),pg(l,a);var c=pg(l,o);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];d==="style"?Jb(s,h):d==="dangerouslySetInnerHTML"?Yb(s,h):d==="children"?Ic(s,h):ev(s,d,h,c)}switch(l){case"input":ug(s,o);break;case"textarea":Gb(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?Sl(s,!!o.multiple,_,!1):m!==!!o.multiple&&(o.defaultValue!=null?Sl(s,!!o.multiple,o.defaultValue,!0):Sl(s,!!o.multiple,o.multiple?[]:"",!1))}s[jc]=o}catch(I){Bt(n,n.return,I)}}break;case 6:if(ri(e,n),Ri(n),i&4){if(n.stateNode===null)throw Error(xe(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(I){Bt(n,n.return,I)}}break;case 3:if(ri(e,n),Ri(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ac(e.containerInfo)}catch(I){Bt(n,n.return,I)}break;case 4:ri(e,n),Ri(n);break;case 13:ri(e,n),Ri(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ov=Yt())),i&4&&mw(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(Fn=(c=Fn)||d,ri(e,n),Fn=c):ri(e,n),Ri(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Fe=n,d=n.child;d!==null;){for(h=Fe=d;Fe!==null;){switch(m=Fe,_=m.child,m.tag){case 0:case 11:case 14:case 15:fc(4,m,m.return);break;case 1:El(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){i=m,r=m.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){Bt(i,r,I)}}break;case 5:El(m,m.return);break;case 22:if(m.memoizedState!==null){yw(h);continue}}_!==null?(_.return=m,Fe=_):yw(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Xb("display",a))}catch(I){Bt(n,n.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(I){Bt(n,n.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ri(e,n),Ri(n),i&4&&mw(n);break;case 21:break;default:ri(e,n),Ri(n)}}function Ri(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(ET(r)){var i=r;break e}r=r.return}throw Error(xe(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ic(s,""),i.flags&=-33);var o=pw(n);qg(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=pw(n);Bg(n,l,a);break;default:throw Error(xe(161))}}catch(u){Bt(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function VN(n,e,r){Fe=n,ST(n)}function ST(n,e,r){for(var i=(n.mode&1)!==0;Fe!==null;){var s=Fe,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Xh;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Fn;l=Xh;var c=Fn;if(Xh=a,(Fn=u)&&!c)for(Fe=s;Fe!==null;)a=Fe,u=a.child,a.tag===22&&a.memoizedState!==null?vw(s):u!==null?(u.return=a,Fe=u):vw(s);for(;o!==null;)Fe=o,ST(o),o=o.sibling;Fe=s,Xh=l,Fn=c}gw(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Fe=o):gw(n)}}function gw(n){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fn||ip(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Fn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ai(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ew(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ew(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ac(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xe(163))}Fn||e.flags&512&&$g(e)}catch(m){Bt(e,e.return,m)}}if(e===n){Fe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Fe=r;break}Fe=e.return}}function yw(n){for(;Fe!==null;){var e=Fe;if(e===n){Fe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Fe=r;break}Fe=e.return}}function vw(n){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ip(4,e)}catch(u){Bt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Bt(e,s,u)}}var o=e.return;try{$g(e)}catch(u){Bt(e,o,u)}break;case 5:var a=e.return;try{$g(e)}catch(u){Bt(e,a,u)}}}catch(u){Bt(e,e.return,u)}if(e===n){Fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Fe=l;break}Fe=e.return}}var FN=Math.ceil,ld=Ms.ReactCurrentDispatcher,Pv=Ms.ReactCurrentOwner,zr=Ms.ReactCurrentBatchConfig,ht=0,vn=null,tn=null,Tn=0,gr=0,Tl=Mo(0),ln=0,Uc=null,Aa=0,sp=0,Rv=0,dc=null,tr=null,Ov=0,Wl=1/0,ps=null,ud=!1,Hg=null,vo=null,Jh=!1,uo=null,cd=0,pc=0,Kg=null,Tf=-1,If=0;function Qn(){return ht&6?Yt():Tf!==-1?Tf:Tf=Yt()}function _o(n){return n.mode&1?ht&2&&Tn!==0?Tn&-Tn:bN.transition!==null?(If===0&&(If=cE()),If):(n=vt,n!==0||(n=window.event,n=n===void 0?16:yE(n.type)),n):1}function mi(n,e,r,i){if(50<pc)throw pc=0,Kg=null,Error(xe(185));oh(n,r,i),(!(ht&2)||n!==vn)&&(n===vn&&(!(ht&2)&&(sp|=r),ln===4&&io(n,Tn)),ar(n,i),r===1&&ht===0&&!(e.mode&1)&&(Wl=Yt()+500,tp&&Lo()))}function ar(n,e){var r=n.callbackNode;bA(n,e);var i=Wf(n,n===vn?Tn:0);if(i===0)r!==null&&k_(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&k_(r),e===1)n.tag===0?xN(_w.bind(null,n)):ME(_w.bind(null,n)),yN(function(){!(ht&6)&&Lo()}),r=null;else{switch(hE(i)){case 1:r=sv;break;case 4:r=lE;break;case 16:r=Kf;break;case 536870912:r=uE;break;default:r=Kf}r=jT(r,kT.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function kT(n,e){if(Tf=-1,If=0,ht&6)throw Error(xe(327));var r=n.callbackNode;if(Pl()&&n.callbackNode!==r)return null;var i=Wf(n,n===vn?Tn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=hd(n,i);else{e=i;var s=ht;ht|=2;var o=AT();(vn!==n||Tn!==e)&&(ps=null,Wl=Yt()+500,_a(n,e));do try{$N();break}catch(l){CT(n,l)}while(!0);vv(),ld.current=o,ht=s,tn!==null?e=0:(vn=null,Tn=0,e=ln)}if(e!==0){if(e===2&&(s=_g(n),s!==0&&(i=s,e=Wg(n,s))),e===1)throw r=Uc,_a(n,0),io(n,i),ar(n,Yt()),r;if(e===6)io(n,i);else{if(s=n.current.alternate,!(i&30)&&!UN(s)&&(e=hd(n,i),e===2&&(o=_g(n),o!==0&&(i=o,e=Wg(n,o))),e===1))throw r=Uc,_a(n,0),io(n,i),ar(n,Yt()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(xe(345));case 2:la(n,tr,ps);break;case 3:if(io(n,i),(i&130023424)===i&&(e=Ov+500-Yt(),10<e)){if(Wf(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Qn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=kg(la.bind(null,n,tr,ps),e);break}la(n,tr,ps);break;case 4:if(io(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-pi(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Yt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FN(i/1960))-i,10<i){n.timeoutHandle=kg(la.bind(null,n,tr,ps),i);break}la(n,tr,ps);break;case 5:la(n,tr,ps);break;default:throw Error(xe(329))}}}return ar(n,Yt()),n.callbackNode===r?kT.bind(null,n):null}function Wg(n,e){var r=dc;return n.current.memoizedState.isDehydrated&&(_a(n,e).flags|=256),n=hd(n,e),n!==2&&(e=tr,tr=r,e!==null&&Gg(e)),n}function Gg(n){tr===null?tr=n:tr.push.apply(tr,n)}function UN(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!vi(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function io(n,e){for(e&=~Rv,e&=~sp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-pi(e),i=1<<r;n[r]=-1,e&=~i}}function _w(n){if(ht&6)throw Error(xe(327));Pl();var e=Wf(n,0);if(!(e&1))return ar(n,Yt()),null;var r=hd(n,e);if(n.tag!==0&&r===2){var i=_g(n);i!==0&&(e=i,r=Wg(n,i))}if(r===1)throw r=Uc,_a(n,0),io(n,e),ar(n,Yt()),r;if(r===6)throw Error(xe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,la(n,tr,ps),ar(n,Yt()),null}function jv(n,e){var r=ht;ht|=1;try{return n(e)}finally{ht=r,ht===0&&(Wl=Yt()+500,tp&&Lo())}}function Na(n){uo!==null&&uo.tag===0&&!(ht&6)&&Pl();var e=ht;ht|=1;var r=zr.transition,i=vt;try{if(zr.transition=null,vt=1,n)return n()}finally{vt=i,zr.transition=r,ht=e,!(ht&6)&&Lo()}}function Dv(){gr=Tl.current,Pt(Tl)}function _a(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,gN(r)),tn!==null)for(r=tn.return;r!==null;){var i=r;switch(mv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Jf();break;case 3:Hl(),Pt(sr),Pt(zn),Tv();break;case 5:Ev(i);break;case 4:Hl();break;case 13:Pt(Mt);break;case 19:Pt(Mt);break;case 10:_v(i.type._context);break;case 22:case 23:Dv()}r=r.return}if(vn=n,tn=n=wo(n.current,null),Tn=gr=e,ln=0,Uc=null,Rv=sp=Aa=0,tr=dc=null,da!==null){for(e=0;e<da.length;e++)if(r=da[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}da=null}return n}function CT(n,e){do{var r=tn;try{if(vv(),xf.current=ad,od){for(var i=Lt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}od=!1}if(Ca=0,yn=on=Lt=null,hc=!1,Lc=0,Pv.current=null,r===null||r.return===null){ln=1,Uc=e,tn=null;break}e:{var o=n,a=r.return,l=r,u=e;if(e=Tn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=ow(a);if(_!==null){_.flags&=-257,aw(_,a,l,o,e),_.mode&1&&sw(o,c,e),e=_,u=c;var w=e.updateQueue;if(w===null){var I=new Set;I.add(u),e.updateQueue=I}else w.add(u);break e}else{if(!(e&1)){sw(o,c,e),Mv();break e}u=Error(xe(426))}}else if(Ot&&l.mode&1){var P=ow(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),aw(P,a,l,o,e),gv(Kl(u,l));break e}}o=u=Kl(u,l),ln!==4&&(ln=2),dc===null?dc=[o]:dc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=hT(o,u,e);Z_(o,b);break e;case 1:l=u;var T=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(vo===null||!vo.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var O=fT(o,l,e);Z_(o,O);break e}}o=o.return}while(o!==null)}PT(r)}catch(M){e=M,tn===r&&r!==null&&(tn=r=r.return);continue}break}while(!0)}function AT(){var n=ld.current;return ld.current=ad,n===null?ad:n}function Mv(){(ln===0||ln===3||ln===2)&&(ln=4),vn===null||!(Aa&268435455)&&!(sp&268435455)||io(vn,Tn)}function hd(n,e){var r=ht;ht|=2;var i=AT();(vn!==n||Tn!==e)&&(ps=null,_a(n,e));do try{zN();break}catch(s){CT(n,s)}while(!0);if(vv(),ht=r,ld.current=i,tn!==null)throw Error(xe(261));return vn=null,Tn=0,ln}function zN(){for(;tn!==null;)NT(tn)}function $N(){for(;tn!==null&&!dA();)NT(tn)}function NT(n){var e=OT(n.alternate,n,gr);n.memoizedProps=n.pendingProps,e===null?PT(n):tn=e,Pv.current=null}function PT(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=DN(r,e),r!==null){r.flags&=32767,tn=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ln=6,tn=null;return}}else if(r=jN(r,e,gr),r!==null){tn=r;return}if(e=e.sibling,e!==null){tn=e;return}tn=e=n}while(e!==null);ln===0&&(ln=5)}function la(n,e,r){var i=vt,s=zr.transition;try{zr.transition=null,vt=1,BN(n,e,r,i)}finally{zr.transition=s,vt=i}return null}function BN(n,e,r,i){do Pl();while(uo!==null);if(ht&6)throw Error(xe(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(xe(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(EA(n,o),n===vn&&(tn=vn=null,Tn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jh||(Jh=!0,jT(Kf,function(){return Pl(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=zr.transition,zr.transition=null;var a=vt;vt=1;var l=ht;ht|=4,Pv.current=null,LN(n,r),IT(r,n),uN(Ig),Gf=!!Tg,Ig=Tg=null,n.current=r,VN(r),pA(),ht=l,vt=a,zr.transition=o}else n.current=r;if(Jh&&(Jh=!1,uo=n,cd=s),o=n.pendingLanes,o===0&&(vo=null),yA(r.stateNode),ar(n,Yt()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(ud)throw ud=!1,n=Hg,Hg=null,n;return cd&1&&n.tag!==0&&Pl(),o=n.pendingLanes,o&1?n===Kg?pc++:(pc=0,Kg=n):pc=0,Lo(),null}function Pl(){if(uo!==null){var n=hE(cd),e=zr.transition,r=vt;try{if(zr.transition=null,vt=16>n?16:n,uo===null)var i=!1;else{if(n=uo,uo=null,cd=0,ht&6)throw Error(xe(331));var s=ht;for(ht|=4,Fe=n.current;Fe!==null;){var o=Fe,a=o.child;if(Fe.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Fe=c;Fe!==null;){var d=Fe;switch(d.tag){case 0:case 11:case 15:fc(8,d,o)}var h=d.child;if(h!==null)h.return=d,Fe=h;else for(;Fe!==null;){d=Fe;var m=d.sibling,_=d.return;if(bT(d),d===c){Fe=null;break}if(m!==null){m.return=_,Fe=m;break}Fe=_}}}var w=o.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}Fe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Fe=a;else e:for(;Fe!==null;){if(o=Fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fc(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Fe=b;break e}Fe=o.return}}var T=n.current;for(Fe=T;Fe!==null;){a=Fe;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,Fe=N;else e:for(a=T;Fe!==null;){if(l=Fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ip(9,l)}}catch(M){Bt(l,l.return,M)}if(l===a){Fe=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,Fe=O;break e}Fe=l.return}}if(ht=s,Lo(),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(Yd,n)}catch{}i=!0}return i}finally{vt=r,zr.transition=e}}return!1}function ww(n,e,r){e=Kl(r,e),e=hT(n,e,1),n=yo(n,e,1),e=Qn(),n!==null&&(oh(n,1,e),ar(n,e))}function Bt(n,e,r){if(n.tag===3)ww(n,n,r);else for(;e!==null;){if(e.tag===3){ww(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vo===null||!vo.has(i))){n=Kl(r,n),n=fT(e,n,1),e=yo(e,n,1),n=Qn(),e!==null&&(oh(e,1,n),ar(e,n));break}}e=e.return}}function qN(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Qn(),n.pingedLanes|=n.suspendedLanes&r,vn===n&&(Tn&r)===r&&(ln===4||ln===3&&(Tn&130023424)===Tn&&500>Yt()-Ov?_a(n,0):Rv|=r),ar(n,e)}function RT(n,e){e===0&&(n.mode&1?(e=$h,$h<<=1,!($h&130023424)&&($h=4194304)):e=1);var r=Qn();n=As(n,e),n!==null&&(oh(n,e,r),ar(n,r))}function HN(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),RT(n,r)}function KN(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(xe(314))}i!==null&&i.delete(e),RT(n,r)}var OT;OT=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||sr.current)rr=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return rr=!1,ON(n,e,r);rr=!!(n.flags&131072)}else rr=!1,Ot&&e.flags&1048576&&LE(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ef(n,e),n=e.pendingProps;var s=$l(e,zn.current);Nl(e,r),s=Sv(null,e,i,n,s,r);var o=kv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,or(i)?(o=!0,Zf(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xv(e),s.updater=rp,e.stateNode=s,s._reactInternals=e,jg(e,i,n,r),e=Lg(null,e,i,!0,o,r)):(e.tag=0,Ot&&o&&pv(e),Wn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Ef(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=GN(i),n=ai(i,n),s){case 0:e=Mg(null,e,i,n,r);break e;case 1:e=cw(null,e,i,n,r);break e;case 11:e=lw(null,e,i,n,r);break e;case 14:e=uw(null,e,i,ai(i.type,n),r);break e}throw Error(xe(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ai(i,s),Mg(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ai(i,s),cw(n,e,i,s,r);case 3:e:{if(gT(e),n===null)throw Error(xe(387));i=e.pendingProps,o=e.memoizedState,s=o.element,BE(n,e),id(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Kl(Error(xe(423)),e),e=hw(n,e,i,r,s);break e}else if(i!==s){s=Kl(Error(xe(424)),e),e=hw(n,e,i,r,s);break e}else for(yr=go(e.stateNode.containerInfo.firstChild),_r=e,Ot=!0,ui=null,r=zE(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bl(),i===s){e=Ns(n,e,r);break e}Wn(n,e,i,r)}e=e.child}return e;case 5:return qE(e),n===null&&Pg(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,Sg(i,s)?a=null:o!==null&&Sg(i,o)&&(e.flags|=32),mT(n,e),Wn(n,e,a,r),e.child;case 6:return n===null&&Pg(e),null;case 13:return yT(n,e,r);case 4:return bv(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=ql(e,null,i,r):Wn(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ai(i,s),lw(n,e,i,s,r);case 7:return Wn(n,e,e.pendingProps,r),e.child;case 8:return Wn(n,e,e.pendingProps.children,r),e.child;case 12:return Wn(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,St(nd,i._currentValue),i._currentValue=a,o!==null)if(vi(o.value,a)){if(o.children===s.children&&!sr.current){e=Ns(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=Ts(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Rg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(xe(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Rg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Wn(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Nl(e,r),s=qr(s),i=i(s),e.flags|=1,Wn(n,e,i,r),e.child;case 14:return i=e.type,s=ai(i,e.pendingProps),s=ai(i.type,s),uw(n,e,i,s,r);case 15:return dT(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ai(i,s),Ef(n,e),e.tag=1,or(i)?(n=!0,Zf(e)):n=!1,Nl(e,r),cT(e,i,s),jg(e,i,s,r),Lg(null,e,i,!0,n,r);case 19:return vT(n,e,r);case 22:return pT(n,e,r)}throw Error(xe(156,e.tag))};function jT(n,e){return aE(n,e)}function WN(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(n,e,r,i){return new WN(n,e,r,i)}function Lv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function GN(n){if(typeof n=="function")return Lv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===nv)return 11;if(n===rv)return 14}return 2}function wo(n,e){var r=n.alternate;return r===null?(r=Ur(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Sf(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")Lv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case pl:return wa(r.children,s,o,e);case tv:a=8,s|=8;break;case ig:return n=Ur(12,r,e,s|2),n.elementType=ig,n.lanes=o,n;case sg:return n=Ur(13,r,e,s),n.elementType=sg,n.lanes=o,n;case og:return n=Ur(19,r,e,s),n.elementType=og,n.lanes=o,n;case qb:return op(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $b:a=10;break e;case Bb:a=9;break e;case nv:a=11;break e;case rv:a=14;break e;case eo:a=16,i=null;break e}throw Error(xe(130,n==null?n:typeof n,""))}return e=Ur(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function wa(n,e,r,i){return n=Ur(7,n,i,e),n.lanes=r,n}function op(n,e,r,i){return n=Ur(22,n,i,e),n.elementType=qb,n.lanes=r,n.stateNode={isHidden:!1},n}function Em(n,e,r){return n=Ur(6,n,null,e),n.lanes=r,n}function Tm(n,e,r){return e=Ur(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function QN(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=im(0),this.expirationTimes=im(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=im(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vv(n,e,r,i,s,o,a,l,u){return n=new QN(n,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ur(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xv(o),n}function YN(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function DT(n){if(!n)return So;n=n._reactInternals;e:{if(Fa(n)!==n||n.tag!==1)throw Error(xe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(xe(171))}if(n.tag===1){var r=n.type;if(or(r))return DE(n,r,e)}return e}function MT(n,e,r,i,s,o,a,l,u){return n=Vv(r,i,!0,n,s,o,a,l,u),n.context=DT(null),r=n.current,i=Qn(),s=_o(r),o=Ts(i,s),o.callback=e??null,yo(r,o,s),n.current.lanes=s,oh(n,s,i),ar(n,i),n}function ap(n,e,r,i){var s=e.current,o=Qn(),a=_o(s);return r=DT(r),e.context===null?e.context=r:e.pendingContext=r,e=Ts(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=yo(s,e,a),n!==null&&(mi(n,s,a,o),wf(n,s,a)),a}function fd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Fv(n,e){xw(n,e),(n=n.alternate)&&xw(n,e)}function XN(){return null}var LT=typeof reportError=="function"?reportError:function(n){console.error(n)};function Uv(n){this._internalRoot=n}lp.prototype.render=Uv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(xe(409));ap(n,e,null,null)};lp.prototype.unmount=Uv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Na(function(){ap(null,n,null,null)}),e[Cs]=null}};function lp(n){this._internalRoot=n}lp.prototype.unstable_scheduleHydration=function(n){if(n){var e=pE();n={blockedOn:null,target:n,priority:e};for(var r=0;r<ro.length&&e!==0&&e<ro[r].priority;r++);ro.splice(r,0,n),r===0&&gE(n)}};function zv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function up(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bw(){}function JN(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=fd(a);o.call(c)}}var a=MT(e,i,n,0,null,!1,!1,"",bw);return n._reactRootContainer=a,n[Cs]=a.current,Rc(n.nodeType===8?n.parentNode:n),Na(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=fd(u);l.call(c)}}var u=Vv(n,0,!1,null,null,!1,!1,"",bw);return n._reactRootContainer=u,n[Cs]=u.current,Rc(n.nodeType===8?n.parentNode:n),Na(function(){ap(e,u,r,i)}),u}function cp(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=fd(a);l.call(u)}}ap(e,a,n,s)}else a=JN(r,e,n,s,i);return fd(a)}fE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Yu(e.pendingLanes);r!==0&&(ov(e,r|1),ar(e,Yt()),!(ht&6)&&(Wl=Yt()+500,Lo()))}break;case 13:Na(function(){var i=As(n,1);if(i!==null){var s=Qn();mi(i,n,1,s)}}),Fv(n,1)}};av=function(n){if(n.tag===13){var e=As(n,134217728);if(e!==null){var r=Qn();mi(e,n,134217728,r)}Fv(n,134217728)}};dE=function(n){if(n.tag===13){var e=_o(n),r=As(n,e);if(r!==null){var i=Qn();mi(r,n,e,i)}Fv(n,e)}};pE=function(){return vt};mE=function(n,e){var r=vt;try{return vt=n,e()}finally{vt=r}};gg=function(n,e,r){switch(e){case"input":if(ug(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=ep(i);if(!s)throw Error(xe(90));Kb(i),ug(i,s)}}}break;case"textarea":Gb(n,r);break;case"select":e=r.value,e!=null&&Sl(n,!!r.multiple,e,!1)}};tE=jv;nE=Na;var ZN={usingClientEntryPoint:!1,Events:[lh,vl,ep,Zb,eE,jv]},Vu={findFiberByHostInstance:fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eP={bundleType:Vu.bundleType,version:Vu.version,rendererPackageName:Vu.rendererPackageName,rendererConfig:Vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sE(n),n===null?null:n.stateNode},findFiberByHostInstance:Vu.findFiberByHostInstance||XN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{Yd=Zh.inject(eP),Ui=Zh}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZN;Er.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(e))throw Error(xe(200));return YN(n,e,null,r)};Er.createRoot=function(n,e){if(!zv(n))throw Error(xe(299));var r=!1,i="",s=LT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vv(n,1,!1,null,null,r,!1,i,s),n[Cs]=e.current,Rc(n.nodeType===8?n.parentNode:n),new Uv(e)};Er.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(xe(188)):(n=Object.keys(n).join(","),Error(xe(268,n)));return n=sE(e),n=n===null?null:n.stateNode,n};Er.flushSync=function(n){return Na(n)};Er.hydrate=function(n,e,r){if(!up(e))throw Error(xe(200));return cp(null,n,e,!0,r)};Er.hydrateRoot=function(n,e,r){if(!zv(n))throw Error(xe(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=LT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=MT(e,null,n,1,r??null,s,!1,o,a),n[Cs]=e.current,Rc(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new lp(e)};Er.render=function(n,e,r){if(!up(e))throw Error(xe(200));return cp(null,n,e,!1,r)};Er.unmountComponentAtNode=function(n){if(!up(n))throw Error(xe(40));return n._reactRootContainer?(Na(function(){cp(null,null,n,!1,function(){n._reactRootContainer=null,n[Cs]=null})}),!0):!1};Er.unstable_batchedUpdates=jv;Er.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!up(r))throw Error(xe(200));if(n==null||n._reactInternals===void 0)throw Error(xe(38));return cp(n,e,r,!1,i)};Er.version="18.3.1-next-f1338f8080-20240426";function VT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VT)}catch(n){console.error(n)}}VT(),Vb.exports=Er;var tP=Vb.exports,Ew=tP;ng.createRoot=Ew.createRoot,ng.hydrateRoot=Ew.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},zc.apply(this,arguments)}var co;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(co||(co={}));const Tw="popstate";function nP(n){n===void 0&&(n={});function e(s,o){let{pathname:a="/",search:l="",hash:u=""}=Ua(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Qg("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:FT(o))}function i(s,o){hp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return iP(e,r,i,n)}function cn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rP(){return Math.random().toString(36).substr(2,8)}function Iw(n,e){return{usr:n.state,key:n.key,idx:e}}function Qg(n,e,r,i){return r===void 0&&(r=null),zc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ua(e):e,{state:r,key:e&&e.key||i||rP()})}function FT(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ua(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function iP(n,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=co.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(zc({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=co.Pop;let P=d(),b=P==null?null:P-c;c=P,u&&u({action:l,location:I.location,delta:b})}function m(P,b){l=co.Push;let T=Qg(I.location,P,b);r&&r(T,P),c=d()+1;let N=Iw(T,c),O=I.createHref(T);try{a.pushState(N,"",O)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(O)}o&&u&&u({action:l,location:I.location,delta:1})}function _(P,b){l=co.Replace;let T=Qg(I.location,P,b);r&&r(T,P),c=d();let N=Iw(T,c),O=I.createHref(T);a.replaceState(N,"",O),o&&u&&u({action:l,location:I.location,delta:0})}function w(P){let b=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof P=="string"?P:FT(P);return T=T.replace(/ $/,"%20"),cn(b,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,b)}let I={get action(){return l},get location(){return n(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Tw,h),u=P,()=>{s.removeEventListener(Tw,h),u=null}},createHref(P){return e(s,P)},createURL:w,encodeLocation(P){let b=w(P);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:_,go(P){return a.go(P)}};return I}var Sw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Sw||(Sw={}));function sP(n,e,r){return r===void 0&&(r="/"),oP(n,e,r)}function oP(n,e,r,i){let s=typeof e=="string"?Ua(e):e,o=$T(s.pathname||"/",r);if(o==null)return null;let a=UT(n);aP(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=_P(o);l=gP(a[u],c)}return l}function UT(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(cn(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=xa([i,u.relativePath]),d=r.concat(u);o.children&&o.children.length>0&&(cn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UT(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:pP(c,o.index),routesMeta:d})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of zT(o.path))s(o,a,u)}),e}function zT(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=zT(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function aP(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:mP(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const lP=/^:[\w-]+$/,uP=3,cP=2,hP=1,fP=10,dP=-2,kw=n=>n==="*";function pP(n,e){let r=n.split("/"),i=r.length;return r.some(kw)&&(i+=dP),e&&(i+=cP),r.filter(s=>!kw(s)).reduce((s,o)=>s+(lP.test(o)?uP:o===""?hP:fP),i)}function mP(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function gP(n,e,r){let{routesMeta:i}=n,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=yP({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:xa([o,h.pathname]),pathnameBase:SP(xa([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=xa([o,h.pathnameBase]))}return a}function yP(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=vP(n.path,n.caseSensitive,n.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,d,h)=>{let{paramName:m,isOptional:_}=d;if(m==="*"){let I=l[h]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const w=l[h];return _&&!w?c[m]=void 0:c[m]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:n}}function vP(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),hp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function _P(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function $T(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}const wP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xP=n=>wP.test(n);function bP(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof n=="string"?Ua(n):n,o;if(r)if(xP(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),hp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Cw(r.substring(1),"/"):o=Cw(r,e)}else o=e;return{pathname:o,search:kP(i),hash:CP(s)}}function Cw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Im(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EP(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function TP(n,e){let r=EP(n);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function IP(n,e,r,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Ua(n):(s=zc({},n),cn(!s.pathname||!s.pathname.includes("?"),Im("?","pathname","search",s)),cn(!s.pathname||!s.pathname.includes("#"),Im("#","pathname","hash",s)),cn(!s.search||!s.search.includes("#"),Im("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let u=bP(s,l),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const xa=n=>n.join("/").replace(/\/\/+/g,"/"),SP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function AP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const BT=["post","put","patch","delete"];new Set(BT);const NP=["get",...BT];new Set(NP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},$c.apply(this,arguments)}const $v=de.createContext(null),PP=de.createContext(null),fp=de.createContext(null),dp=de.createContext(null),za=de.createContext({outlet:null,matches:[],isDataRoute:!1}),qT=de.createContext(null);function pp(){return de.useContext(dp)!=null}function Bv(){return pp()||cn(!1),de.useContext(dp).location}function HT(n){de.useContext(fp).static||de.useLayoutEffect(n)}function Vo(){let{isDataRoute:n}=de.useContext(za);return n?qP():RP()}function RP(){pp()||cn(!1);let n=de.useContext($v),{basename:e,future:r,navigator:i}=de.useContext(fp),{matches:s}=de.useContext(za),{pathname:o}=Bv(),a=JSON.stringify(TP(s,r.v7_relativeSplatPath)),l=de.useRef(!1);return HT(()=>{l.current=!0}),de.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let h=IP(c,JSON.parse(a),o,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:xa([e,h.pathname])),(d.replace?i.replace:i.push)(h,d.state,d)},[e,i,a,o,n])}function KT(){let{matches:n}=de.useContext(za),e=n[n.length-1];return e?e.params:{}}function OP(n,e){return jP(n,e)}function jP(n,e,r,i){pp()||cn(!1);let{navigator:s}=de.useContext(fp),{matches:o}=de.useContext(za),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Bv(),d;if(e){var h;let P=typeof e=="string"?Ua(e):e;u==="/"||(h=P.pathname)!=null&&h.startsWith(u)||cn(!1),d=P}else d=c;let m=d.pathname||"/",_=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let w=sP(n,{pathname:_}),I=FP(w&&w.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:xa([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:xa([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,r,i);return e&&I?de.createElement(dp.Provider,{value:{location:$c({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:co.Pop}},I):I}function DP(){let n=BP(),e=AP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),r?de.createElement("pre",{style:s},r):null,null)}const MP=de.createElement(DP,null);class LP extends de.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?de.createElement(za.Provider,{value:this.props.routeContext},de.createElement(qT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VP(n){let{routeContext:e,match:r,children:i}=n,s=de.useContext($v);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),de.createElement(za.Provider,{value:e},i)}function FP(n,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let a=n,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||cn(!1),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:_}=r,w=h.route.loader&&m[h.route.id]===void 0&&(!_||_[h.route.id]===void 0);if(h.route.lazy||w){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let _,w=!1,I=null,P=null;r&&(_=l&&h.route.id?l[h.route.id]:void 0,I=h.route.errorElement||MP,u&&(c<0&&m===0?(HP("route-fallback"),w=!0,P=null):c===m&&(w=!0,P=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),T=()=>{let N;return _?N=I:w?N=P:h.route.Component?N=de.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=d,de.createElement(VP,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:N})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?de.createElement(LP,{location:r.location,revalidation:r.revalidation,component:I,error:_,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}var WT=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(WT||{}),GT=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(GT||{});function UP(n){let e=de.useContext($v);return e||cn(!1),e}function zP(n){let e=de.useContext(PP);return e||cn(!1),e}function $P(n){let e=de.useContext(za);return e||cn(!1),e}function QT(n){let e=$P(),r=e.matches[e.matches.length-1];return r.route.id||cn(!1),r.route.id}function BP(){var n;let e=de.useContext(qT),r=zP(),i=QT();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function qP(){let{router:n}=UP(WT.UseNavigateStable),e=QT(GT.UseNavigateStable),r=de.useRef(!1);return HT(()=>{r.current=!0}),de.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$c({fromRouteId:e},o)))},[n,e])}const Aw={};function HP(n,e,r){Aw[n]||(Aw[n]=!0)}function KP(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Oi(n){cn(!1)}function WP(n){let{basename:e="/",children:r=null,location:i,navigationType:s=co.Pop,navigator:o,static:a=!1,future:l}=n;pp()&&cn(!1);let u=e.replace(/^\/*/,"/"),c=de.useMemo(()=>({basename:u,navigator:o,static:a,future:$c({v7_relativeSplatPath:!1},l)}),[u,l,o,a]);typeof i=="string"&&(i=Ua(i));let{pathname:d="/",search:h="",hash:m="",state:_=null,key:w="default"}=i,I=de.useMemo(()=>{let P=$T(d,u);return P==null?null:{location:{pathname:P,search:h,hash:m,state:_,key:w},navigationType:s}},[u,d,h,m,_,w,s]);return I==null?null:de.createElement(fp.Provider,{value:c},de.createElement(dp.Provider,{children:r,value:I}))}function Nw(n){let{children:e,location:r}=n;return OP(Yg(e),r)}new Promise(()=>{});function Yg(n,e){e===void 0&&(e=[]);let r=[];return de.Children.forEach(n,(i,s)=>{if(!de.isValidElement(i))return;let o=[...e,s];if(i.type===de.Fragment){r.push.apply(r,Yg(i.props.children,o));return}i.type!==Oi&&cn(!1),!i.props.index||!i.props.children||cn(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Yg(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const GP="6";try{window.__reactRouterVersion=GP}catch{}const QP="startTransition",Pw=qC[QP];function YP(n){let{basename:e,children:r,future:i,window:s}=n,o=de.useRef();o.current==null&&(o.current=nP({window:s,v5Compat:!0}));let a=o.current,[l,u]=de.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},d=de.useCallback(h=>{c&&Pw?Pw(()=>u(h)):u(h)},[u,c]);return de.useLayoutEffect(()=>a.listen(d),[a,d]),de.useEffect(()=>KP(i),[i]),de.createElement(WP,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:i})}var Rw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Rw||(Rw={}));var Ow;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));var XP={exports:{}};(function(n){var e=function(r){var i=Object.prototype,s=i.hasOwnProperty,o=Object.defineProperty||function(q,K,ue){q[K]=ue.value},a,l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(q,K,ue){return Object.defineProperty(q,K,{value:ue,enumerable:!0,configurable:!0,writable:!0}),q[K]}try{h({},"")}catch{h=function(K,ue,ie){return K[ue]=ie}}function m(q,K,ue,ie){var le=K&&K.prototype instanceof N?K:N,pe=Object.create(le.prototype),we=new Z(ie||[]);return o(pe,"_invoke",{value:$(q,ue,we)}),pe}r.wrap=m;function _(q,K,ue){try{return{type:"normal",arg:q.call(K,ue)}}catch(ie){return{type:"throw",arg:ie}}}var w="suspendedStart",I="suspendedYield",P="executing",b="completed",T={};function N(){}function O(){}function M(){}var U={};h(U,u,function(){return this});var A=Object.getPrototypeOf,C=A&&A(A(me([])));C&&C!==i&&s.call(C,u)&&(U=C);var D=M.prototype=N.prototype=Object.create(U);O.prototype=M,o(D,"constructor",{value:M,configurable:!0}),o(M,"constructor",{value:O,configurable:!0}),O.displayName=h(M,d,"GeneratorFunction");function L(q){["next","throw","return"].forEach(function(K){h(q,K,function(ue){return this._invoke(K,ue)})})}r.isGeneratorFunction=function(q){var K=typeof q=="function"&&q.constructor;return K?K===O||(K.displayName||K.name)==="GeneratorFunction":!1},r.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,M):(q.__proto__=M,h(q,d,"GeneratorFunction")),q.prototype=Object.create(D),q},r.awrap=function(q){return{__await:q}};function V(q,K){function ue(pe,we,Me,je){var Ke=_(q[pe],q,we);if(Ke.type==="throw")je(Ke.arg);else{var Oe=Ke.arg,fn=Oe.value;return fn&&typeof fn=="object"&&s.call(fn,"__await")?K.resolve(fn.__await).then(function(dn){ue("next",dn,Me,je)},function(dn){ue("throw",dn,Me,je)}):K.resolve(fn).then(function(dn){Oe.value=dn,Me(Oe)},function(dn){return ue("throw",dn,Me,je)})}}var ie;function le(pe,we){function Me(){return new K(function(je,Ke){ue(pe,we,je,Ke)})}return ie=ie?ie.then(Me,Me):Me()}o(this,"_invoke",{value:le})}L(V.prototype),h(V.prototype,c,function(){return this}),r.AsyncIterator=V,r.async=function(q,K,ue,ie,le){le===void 0&&(le=Promise);var pe=new V(m(q,K,ue,ie),le);return r.isGeneratorFunction(K)?pe:pe.next().then(function(we){return we.done?we.value:pe.next()})};function $(q,K,ue){var ie=w;return function(pe,we){if(ie===P)throw new Error("Generator is already running");if(ie===b){if(pe==="throw")throw we;return ne()}for(ue.method=pe,ue.arg=we;;){var Me=ue.delegate;if(Me){var je=j(Me,ue);if(je){if(je===T)continue;return je}}if(ue.method==="next")ue.sent=ue._sent=ue.arg;else if(ue.method==="throw"){if(ie===w)throw ie=b,ue.arg;ue.dispatchException(ue.arg)}else ue.method==="return"&&ue.abrupt("return",ue.arg);ie=P;var Ke=_(q,K,ue);if(Ke.type==="normal"){if(ie=ue.done?b:I,Ke.arg===T)continue;return{value:Ke.arg,done:ue.done}}else Ke.type==="throw"&&(ie=b,ue.method="throw",ue.arg=Ke.arg)}}}function j(q,K){var ue=K.method,ie=q.iterator[ue];if(ie===a)return K.delegate=null,ue==="throw"&&q.iterator.return&&(K.method="return",K.arg=a,j(q,K),K.method==="throw")||ue!=="return"&&(K.method="throw",K.arg=new TypeError("The iterator does not provide a '"+ue+"' method")),T;var le=_(ie,q.iterator,K.arg);if(le.type==="throw")return K.method="throw",K.arg=le.arg,K.delegate=null,T;var pe=le.arg;if(!pe)return K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,T;if(pe.done)K[q.resultName]=pe.value,K.next=q.nextLoc,K.method!=="return"&&(K.method="next",K.arg=a);else return pe;return K.delegate=null,T}L(D),h(D,d,"Generator"),h(D,u,function(){return this}),h(D,"toString",function(){return"[object Generator]"});function H(q){var K={tryLoc:q[0]};1 in q&&(K.catchLoc=q[1]),2 in q&&(K.finallyLoc=q[2],K.afterLoc=q[3]),this.tryEntries.push(K)}function G(q){var K=q.completion||{};K.type="normal",delete K.arg,q.completion=K}function Z(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(H,this),this.reset(!0)}r.keys=function(q){var K=Object(q),ue=[];for(var ie in K)ue.push(ie);return ue.reverse(),function le(){for(;ue.length;){var pe=ue.pop();if(pe in K)return le.value=pe,le.done=!1,le}return le.done=!0,le}};function me(q){if(q){var K=q[u];if(K)return K.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var ue=-1,ie=function le(){for(;++ue<q.length;)if(s.call(q,ue))return le.value=q[ue],le.done=!1,le;return le.value=a,le.done=!0,le};return ie.next=ie}}return{next:ne}}r.values=me;function ne(){return{value:a,done:!0}}return Z.prototype={constructor:Z,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(G),!q)for(var K in this)K.charAt(0)==="t"&&s.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=a)},stop:function(){this.done=!0;var q=this.tryEntries[0],K=q.completion;if(K.type==="throw")throw K.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var K=this;function ue(je,Ke){return pe.type="throw",pe.arg=q,K.next=je,Ke&&(K.method="next",K.arg=a),!!Ke}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var le=this.tryEntries[ie],pe=le.completion;if(le.tryLoc==="root")return ue("end");if(le.tryLoc<=this.prev){var we=s.call(le,"catchLoc"),Me=s.call(le,"finallyLoc");if(we&&Me){if(this.prev<le.catchLoc)return ue(le.catchLoc,!0);if(this.prev<le.finallyLoc)return ue(le.finallyLoc)}else if(we){if(this.prev<le.catchLoc)return ue(le.catchLoc,!0)}else if(Me){if(this.prev<le.finallyLoc)return ue(le.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(q,K){for(var ue=this.tryEntries.length-1;ue>=0;--ue){var ie=this.tryEntries[ue];if(ie.tryLoc<=this.prev&&s.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var le=ie;break}}le&&(q==="break"||q==="continue")&&le.tryLoc<=K&&K<=le.finallyLoc&&(le=null);var pe=le?le.completion:{};return pe.type=q,pe.arg=K,le?(this.method="next",this.next=le.finallyLoc,T):this.complete(pe)},complete:function(q,K){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&K&&(this.next=K),T},finish:function(q){for(var K=this.tryEntries.length-1;K>=0;--K){var ue=this.tryEntries[K];if(ue.finallyLoc===q)return this.complete(ue.completion,ue.afterLoc),G(ue),T}},catch:function(q){for(var K=this.tryEntries.length-1;K>=0;--K){var ue=this.tryEntries[K];if(ue.tryLoc===q){var ie=ue.completion;if(ie.type==="throw"){var le=ie.arg;G(ue)}return le}}throw new Error("illegal catch attempt")},delegateYield:function(q,K,ue){return this.delegate={iterator:me(q),resultName:K,nextLoc:ue},this.method==="next"&&(this.arg=a),T}},r}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(XP);var qv=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const JP=qv;let jw=0;var YT=({id:n,action:e,payload:r={}})=>{let i=n;return typeof i>"u"&&(i=JP("Job",jw),jw+=1),{id:i,action:e,payload:r}},lu={};let Hv=!1;lu.logging=Hv;lu.setLogging=n=>{Hv=n};lu.log=(...n)=>Hv?console.log.apply(void 0,n):null;const ZP=YT,{log:ef}=lu,eR=qv;let Dw=0;var tR=()=>{const n=eR("Scheduler",Dw),e={},r={};let i=[];Dw+=1;const s=()=>i.length,o=()=>Object.keys(e).length,a=()=>{if(i.length!==0){const h=Object.keys(e);for(let m=0;m<h.length;m+=1)if(typeof r[h[m]]>"u"){i[0](e[h[m]]);break}}},l=(h,m)=>new Promise((_,w)=>{const I=ZP({action:h,payload:m});i.push(async P=>{i.shift(),r[P.id]=I;try{_(await P[h].apply(void 0,[...m,I.id]))}catch(b){w(b)}finally{delete r[P.id],a()}}),ef(`[${n}]: Add ${I.id} to JobQueue`),ef(`[${n}]: JobQueue length=${i.length}`),a()});return{addWorker:h=>(e[h.id]=h,ef(`[${n}]: Add ${h.id}`),ef(`[${n}]: Number of workers=${o()}`),a(),h.id),addJob:async(h,...m)=>{if(o()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return l(h,m)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),i=[]},getQueueLen:s,getNumWorkers:o}};function nR(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function rR(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var iR=rR;const sR=iR;var oR=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":sR()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof nR=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const aR=oR("type")==="browser",lR=aR?n=>new URL(n,window.location.href).href:n=>n;var uR=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(r=>{n[r]&&(e[r]=lR(e[r]))}),e},cR=n=>{const e=[],r=[],i=[],s=[],o=[];return n.blocks&&n.blocks.forEach(a=>{a.paragraphs.forEach(l=>{l.lines.forEach(u=>{u.words.forEach(c=>{c.symbols.forEach(d=>{o.push({...d,page:n,block:a,paragraph:l,line:u,word:c})}),s.push({...c,page:n,block:a,paragraph:l,line:u})}),i.push({...u,page:n,block:a,paragraph:l})}),r.push({...l,page:n,block:a})}),e.push({...a,page:n})}),{...n,blocks:e,paragraphs:r,lines:i,words:s,symbols:o}},XT={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const hR="5.1.1",fR={version:hR};var dR={workerBlobURL:!0,logger:()=>{}};const pR=fR.version,mR=dR;var gR={...mR,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${pR}/dist/worker.min.js`},yR=({workerPath:n,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(i))}else r=new Worker(n);return r},vR=n=>{n.terminate()},_R=(n,e)=>{n.onmessage=({data:r})=>{e(r)}},wR=async(n,e)=>{n.postMessage(e)};const Sm=n=>new Promise((e,r)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},i.readAsArrayBuffer(n)}),Xg=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await Xg(n.src)),n.tagName==="VIDEO"&&(e=await Xg(n.poster)),n.tagName==="CANVAS"&&await new Promise(r=>{n.toBlob(async i=>{e=await Sm(i),r()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const r=await n.convertToBlob();e=await Sm(r)}else(n instanceof File||n instanceof Blob)&&(e=await Sm(n));return new Uint8Array(e)};var xR=Xg;const bR=gR,ER=yR,TR=vR,IR=_R,SR=wR,kR=xR;var CR={defaultOptions:bR,spawnWorker:ER,terminateWorker:TR,onMessage:IR,send:SR,loadImage:kR};const AR=uR,NR=cR,ii=YT,{log:Mw}=lu,PR=qv,sa=XT,{defaultOptions:RR,spawnWorker:OR,terminateWorker:jR,onMessage:DR,loadImage:Lw,send:MR}=CR;let Vw=0;var JT=async(n="eng",e=sa.LSTM_ONLY,r={},i={})=>{const s=PR("Worker",Vw),{logger:o,errorHandler:a,...l}=AR({...RR,...r}),u={},c={},d=typeof n=="string"?n.split("+"):n;let h=e,m=i;const _=[sa.DEFAULT,sa.LSTM_ONLY].includes(e)&&!l.legacyCore;let w,I;const P=new Promise((le,pe)=>{I=le,w=pe}),b=le=>{w(le.message)};let T=OR(l);T.onerror=b,Vw+=1;const N=(le,pe)=>{u[le]=pe},O=(le,pe)=>{c[le]=pe},M=({id:le,action:pe,payload:we})=>new Promise((Me,je)=>{Mw(`[${s}]: Start ${le}, action=${pe}`);const Ke=`${pe}-${le}`;N(Ke,Me),O(Ke,je),MR(T,{workerId:s,jobId:le,action:pe,payload:we})}),U=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),A=le=>M(ii({id:le,action:"load",payload:{options:{lstmOnly:_,corePath:l.corePath,logging:l.logging}}})),C=(le,pe,we)=>M(ii({id:we,action:"FS",payload:{method:"writeFile",args:[le,pe]}})),D=(le,pe)=>M(ii({id:pe,action:"FS",payload:{method:"readFile",args:[le,{encoding:"utf8"}]}})),L=(le,pe)=>M(ii({id:pe,action:"FS",payload:{method:"unlink",args:[le]}})),V=(le,pe,we)=>M(ii({id:we,action:"FS",payload:{method:le,args:pe}})),$=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),j=(le,pe)=>M(ii({id:pe,action:"loadLanguage",payload:{langs:le,options:{langPath:l.langPath,dataPath:l.dataPath,cachePath:l.cachePath,cacheMethod:l.cacheMethod,gzip:l.gzip,lstmOnly:[sa.DEFAULT,sa.LSTM_ONLY].includes(h)&&!l.legacyLang}}})),H=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),G=(le,pe,we,Me)=>M(ii({id:Me,action:"initialize",payload:{langs:le,oem:pe,config:we}})),Z=(le="eng",pe,we,Me)=>{if(_&&[sa.TESSERACT_ONLY,sa.TESSERACT_LSTM_COMBINED].includes(pe))throw Error("Legacy model requested but code missing.");const je=pe||h;h=je;const Ke=we||m;m=Ke;const fn=(typeof le=="string"?le.split("+"):le).filter(dn=>!d.includes(dn));return d.push(...fn),fn.length>0?j(fn,Me).then(()=>G(le,je,Ke,Me)):G(le,je,Ke,Me)},me=(le={},pe)=>M(ii({id:pe,action:"setParameters",payload:{params:le}})),ne=async(le,pe={},we={blocks:!0,text:!0,hocr:!0,tsv:!0},Me)=>M(ii({id:Me,action:"recognize",payload:{image:await Lw(le),options:pe,output:we}})),q=(le="Tesseract OCR Result",pe=!1,we)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),M(ii({id:we,action:"getPDF",payload:{title:le,textonly:pe}}))),K=async(le,pe)=>{if(_)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return M(ii({id:pe,action:"detect",payload:{image:await Lw(le)}}))},ue=async()=>(T!==null&&(jR(T),T=null),Promise.resolve());DR(T,({workerId:le,jobId:pe,status:we,action:Me,data:je})=>{const Ke=`${Me}-${pe}`;if(we==="resolve"){Mw(`[${le}]: Complete ${pe}`);let Oe=je;Me==="recognize"?Oe=NR(je):Me==="getPDF"&&(Oe=Array.from({...je,length:Object.keys(je).length})),u[Ke]({jobId:pe,data:Oe})}else if(we==="reject")if(c[Ke](je),Me==="load"&&w(je),a)a(je);else throw Error(je);else we==="progress"&&o({...je,userJobId:pe})});const ie={id:s,worker:T,setResolve:N,setReject:O,load:U,writeText:C,readText:D,removeFile:L,FS:V,loadLanguage:$,initialize:H,reinitialize:Z,setParameters:me,recognize:ne,getPDF:q,detect:K,terminate:ue};return A().then(()=>j(n)).then(()=>G(n,e,i)).then(()=>I(ie)).catch(()=>{}),P};const ZT=JT,LR=async(n,e,r)=>{const i=await ZT(e,1,r);return i.recognize(n).finally(async()=>{await i.terminate()})},VR=async(n,e)=>{const r=await ZT("osd",0,e);return r.detect(n).finally(async()=>{await r.terminate()})};var FR={recognize:LR,detect:VR},UR={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},zR={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const $R=tR,BR=JT,qR=FR,HR=UR,KR=XT,WR=zR,{setLogging:GR}=lu;var QR={languages:HR,OEM:KR,PSM:WR,createScheduler:$R,createWorker:BR,setLogging:GR,...qR};const YR=Gd(QR);var XR=Object.defineProperty,dd=Object.getOwnPropertySymbols,e2=Object.prototype.hasOwnProperty,t2=Object.prototype.propertyIsEnumerable,Fw=(n,e,r)=>e in n?XR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Jg=(n,e)=>{for(var r in e||(e={}))e2.call(e,r)&&Fw(n,r,e[r]);if(dd)for(var r of dd(e))t2.call(e,r)&&Fw(n,r,e[r]);return n},Zg=(n,e)=>{var r={};for(var i in n)e2.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&dd)for(var i of dd(n))e.indexOf(i)<0&&t2.call(n,i)&&(r[i]=n[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Pa;(n=>{const e=class nt{constructor(u,c,d,h){if(this.version=u,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],u<nt.MIN_VERSION||u>nt.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let m=[];for(let w=0;w<this.size;w++)m.push(!1);for(let w=0;w<this.size;w++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const _=this.addEccAndInterleave(d);if(this.drawCodewords(_),h==-1){let w=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const P=this.getPenaltyScore();P<w&&(h=I,w=P),this.applyMask(I)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(u,c){const d=n.QrSegment.makeSegments(u);return nt.encodeSegments(d,c)}static encodeBinary(u,c){const d=n.QrSegment.makeBytes(u);return nt.encodeSegments([d],c)}static encodeSegments(u,c,d=1,h=40,m=-1,_=!0){if(!(nt.MIN_VERSION<=d&&d<=h&&h<=nt.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let w,I;for(w=d;;w++){const N=nt.getNumDataCodewords(w,c)*8,O=a.getTotalBits(u,w);if(O<=N){I=O;break}if(w>=h)throw new RangeError("Data too long")}for(const N of[nt.Ecc.MEDIUM,nt.Ecc.QUARTILE,nt.Ecc.HIGH])_&&I<=nt.getNumDataCodewords(w,N)*8&&(c=N);let P=[];for(const N of u){r(N.mode.modeBits,4,P),r(N.numChars,N.mode.numCharCountBits(w),P);for(const O of N.getData())P.push(O)}s(P.length==I);const b=nt.getNumDataCodewords(w,c)*8;s(P.length<=b),r(0,Math.min(4,b-P.length),P),r(0,(8-P.length%8)%8,P),s(P.length%8==0);for(let N=236;P.length<b;N^=253)r(N,8,P);let T=[];for(;T.length*8<P.length;)T.push(0);return P.forEach((N,O)=>T[O>>>3]|=N<<7-(O&7)),new nt(w,c,T,m)}getModule(u,c){return 0<=u&&u<this.size&&0<=c&&c<this.size&&this.modules[c][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),c=u.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(u[d],u[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const c=this.errorCorrectionLevel.formatBits<<3|u;let d=c;for(let m=0;m<10;m++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(h,m));this.setFunctionModule(8,7,i(h,6)),this.setFunctionModule(8,8,i(h,7)),this.setFunctionModule(7,8,i(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let d=0;d<12;d++)u=u<<1^(u>>>11)*7973;const c=this.version<<12|u;s(c>>>18==0);for(let d=0;d<18;d++){const h=i(c,d),m=this.size-11+d%3,_=Math.floor(d/3);this.setFunctionModule(m,_,h),this.setFunctionModule(_,m,h)}}drawFinderPattern(u,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(d)),_=u+h,w=c+d;0<=_&&_<this.size&&0<=w&&w<this.size&&this.setFunctionModule(_,w,m!=2&&m!=4)}}drawAlignmentPattern(u,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(u+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(u,c,d){this.modules[c][u]=d,this.isFunction[c][u]=!0}addEccAndInterleave(u){const c=this.version,d=this.errorCorrectionLevel;if(u.length!=nt.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=nt.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],m=nt.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],_=Math.floor(nt.getNumRawDataModules(c)/8),w=h-_%h,I=Math.floor(_/h);let P=[];const b=nt.reedSolomonComputeDivisor(m);for(let N=0,O=0;N<h;N++){let M=u.slice(O,O+I-m+(N<w?0:1));O+=M.length;const U=nt.reedSolomonComputeRemainder(M,b);N<w&&M.push(0),P.push(M.concat(U))}let T=[];for(let N=0;N<P[0].length;N++)P.forEach((O,M)=>{(N!=I-m||M>=w)&&T.push(O[N])});return s(T.length==_),T}drawCodewords(u){if(u.length!=Math.floor(nt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const _=d-m,I=(d+1&2)==0?this.size-1-h:h;!this.isFunction[I][_]&&c<u.length*8&&(this.modules[I][_]=i(u[c>>>3],7-(c&7)),c++)}}s(c==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(u){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let u=0;for(let m=0;m<this.size;m++){let _=!1,w=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[m][P]==_?(w++,w==5?u+=nt.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,I),_||(u+=this.finderPenaltyCountPatterns(I)*nt.PENALTY_N3),_=this.modules[m][P],w=1);u+=this.finderPenaltyTerminateAndCount(_,w,I)*nt.PENALTY_N3}for(let m=0;m<this.size;m++){let _=!1,w=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][m]==_?(w++,w==5?u+=nt.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,I),_||(u+=this.finderPenaltyCountPatterns(I)*nt.PENALTY_N3),_=this.modules[P][m],w=1);u+=this.finderPenaltyTerminateAndCount(_,w,I)*nt.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let _=0;_<this.size-1;_++){const w=this.modules[m][_];w==this.modules[m][_+1]&&w==this.modules[m+1][_]&&w==this.modules[m+1][_+1]&&(u+=nt.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((_,w)=>_+(w?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),u+=h*nt.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let d=[6];for(let h=this.size-7;d.length<u;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(u){if(u<nt.MIN_VERSION||u>nt.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*u+128)*u+64;if(u>=2){const d=Math.floor(u/7)+2;c-=(25*d-10)*d-55,u>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(u,c){return Math.floor(nt.getNumRawDataModules(u)/8)-nt.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u]*nt.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<u-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<u;h++){for(let m=0;m<c.length;m++)c[m]=nt.reedSolomonMultiply(c[m],d),m+1<c.length&&(c[m]^=c[m+1]);d=nt.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(u,c){let d=c.map(h=>0);for(const h of u){const m=h^d.shift();d.push(0),c.forEach((_,w)=>d[w]^=nt.reedSolomonMultiply(_,m))}return d}static reedSolomonMultiply(u,c){if(u>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*u;return s(d>>>8==0),d}finderPenaltyCountPatterns(u){const c=u[1];s(c<=this.size*3);const d=c>0&&u[2]==c&&u[3]==c*3&&u[4]==c&&u[5]==c;return(d&&u[0]>=c*4&&u[6]>=c?1:0)+(d&&u[6]>=c*4&&u[0]>=c?1:0)}finderPenaltyTerminateAndCount(u,c,d){return u&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(u,c){c[0]==0&&(u+=this.size),c.pop(),c.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function r(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let d=u-1;d>=0;d--)c.push(l>>>d&1)}function i(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class $t{constructor(u,c,d){if(this.mode=u,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(u){let c=[];for(const d of u)r(d,8,c);return new $t($t.Mode.BYTE,u.length,c)}static makeNumeric(u){if(!$t.isNumeric(u))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<u.length;){const h=Math.min(u.length-d,3);r(parseInt(u.substring(d,d+h),10),h*3+1,c),d+=h}return new $t($t.Mode.NUMERIC,u.length,c)}static makeAlphanumeric(u){if(!$t.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=u.length;d+=2){let h=$t.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d))*45;h+=$t.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d+1)),r(h,11,c)}return d<u.length&&r($t.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d)),6,c),new $t($t.Mode.ALPHANUMERIC,u.length,c)}static makeSegments(u){return u==""?[]:$t.isNumeric(u)?[$t.makeNumeric(u)]:$t.isAlphanumeric(u)?[$t.makeAlphanumeric(u)]:[$t.makeBytes($t.toUtf8ByteArray(u))]}static makeEci(u){let c=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,c);else if(u<16384)r(2,2,c),r(u,14,c);else if(u<1e6)r(6,3,c),r(u,21,c);else throw new RangeError("ECI assignment value out of range");return new $t($t.Mode.ECI,0,c)}static isNumeric(u){return $t.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return $t.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,c){let d=0;for(const h of u){const m=h.mode.numCharCountBits(c);if(h.numChars>=1<<m)return 1/0;d+=4+m+h.bitData.length}return d}static toUtf8ByteArray(u){u=encodeURI(u);let c=[];for(let d=0;d<u.length;d++)u.charAt(d)!="%"?c.push(u.charCodeAt(d)):(c.push(parseInt(u.substring(d+1,d+3),16)),d+=2);return c}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;n.QrSegment=o})(Pa||(Pa={}));(n=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(Pa||(Pa={}));(n=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(Pa||(Pa={}));var Il=Pa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var JR={L:Il.QrCode.Ecc.LOW,M:Il.QrCode.Ecc.MEDIUM,Q:Il.QrCode.Ecc.QUARTILE,H:Il.QrCode.Ecc.HIGH},n2=128,r2="L",i2="#FFFFFF",s2="#000000",o2=!1,a2=1,ZR=4,eO=0,tO=.1;function l2(n,e=0){const r=[];return n.forEach(function(i,s){let o=null;i.forEach(function(a,l){if(!a&&o!==null){r.push(`M${o+e} ${s+e}h${l-o}v1H${o+e}z`),o=null;return}if(l===i.length-1){if(!a)return;o===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${o+e},${s+e} h${l+1-o}v1H${o+e}z`);return}a&&o===null&&(o=l)})}),r.join("")}function u2(n,e){return n.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function nO(n,e,r,i){if(i==null)return null;const s=n.length+r*2,o=Math.floor(e*tO),a=s/e,l=(i.width||o)*a,u=(i.height||o)*a,c=i.x==null?n.length/2-l/2:i.x*a,d=i.y==null?n.length/2-u/2:i.y*a,h=i.opacity==null?1:i.opacity;let m=null;if(i.excavate){let w=Math.floor(c),I=Math.floor(d),P=Math.ceil(l+c-w),b=Math.ceil(u+d-I);m={x:w,y:I,w:P,h:b}}const _=i.crossOrigin;return{x:c,y:d,h:u,w:l,excavation:m,opacity:h,crossOrigin:_}}function rO(n,e){return e!=null?Math.max(Math.floor(e),0):n?ZR:eO}function c2({value:n,level:e,minVersion:r,includeMargin:i,marginSize:s,imageSettings:o,size:a,boostLevel:l}){let u=wt.useMemo(()=>{const w=(Array.isArray(n)?n:[n]).reduce((I,P)=>(I.push(...Il.QrSegment.makeSegments(P)),I),[]);return Il.QrCode.encodeSegments(w,JR[e],r,void 0,void 0,l)},[n,e,r,l]);const{cells:c,margin:d,numCells:h,calculatedImageSettings:m}=wt.useMemo(()=>{let _=u.getModules();const w=rO(i,s),I=_.length+w*2,P=nO(_,a,w,o);return{cells:_,margin:w,numCells:I,calculatedImageSettings:P}},[u,a,o,i,s]);return{qrcode:u,margin:d,cells:c,numCells:h,calculatedImageSettings:m}}var iO=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),sO=wt.forwardRef(function(e,r){const i=e,{value:s,size:o=n2,level:a=r2,bgColor:l=i2,fgColor:u=s2,includeMargin:c=o2,minVersion:d=a2,boostLevel:h,marginSize:m,imageSettings:_}=i,I=Zg(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=I,b=Zg(I,["style"]),T=_==null?void 0:_.src,N=wt.useRef(null),O=wt.useRef(null),M=wt.useCallback(H=>{N.current=H,typeof r=="function"?r(H):r&&(r.current=H)},[r]),[U,A]=wt.useState(!1),{margin:C,cells:D,numCells:L,calculatedImageSettings:V}=c2({value:s,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:m,imageSettings:_,size:o});wt.useEffect(()=>{if(N.current!=null){const H=N.current,G=H.getContext("2d");if(!G)return;let Z=D;const me=O.current,ne=V!=null&&me!==null&&me.complete&&me.naturalHeight!==0&&me.naturalWidth!==0;ne&&V.excavation!=null&&(Z=u2(D,V.excavation));const q=window.devicePixelRatio||1;H.height=H.width=o*q;const K=o/L*q;G.scale(K,K),G.fillStyle=l,G.fillRect(0,0,L,L),G.fillStyle=u,iO?G.fill(new Path2D(l2(Z,C))):D.forEach(function(ue,ie){ue.forEach(function(le,pe){le&&G.fillRect(pe+C,ie+C,1,1)})}),V&&(G.globalAlpha=V.opacity),ne&&G.drawImage(me,V.x+C,V.y+C,V.w,V.h)}}),wt.useEffect(()=>{A(!1)},[T]);const $=Jg({height:o,width:o},P);let j=null;return T!=null&&(j=wt.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{A(!0)},ref:O,crossOrigin:V==null?void 0:V.crossOrigin})),wt.createElement(wt.Fragment,null,wt.createElement("canvas",Jg({style:$,height:o,width:o,ref:M,role:"img"},b)),j)});sO.displayName="QRCodeCanvas";var Kv=wt.forwardRef(function(e,r){const i=e,{value:s,size:o=n2,level:a=r2,bgColor:l=i2,fgColor:u=s2,includeMargin:c=o2,minVersion:d=a2,boostLevel:h,title:m,marginSize:_,imageSettings:w}=i,I=Zg(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:b,numCells:T,calculatedImageSettings:N}=c2({value:s,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:_,imageSettings:w,size:o});let O=b,M=null;w!=null&&N!=null&&(N.excavation!=null&&(O=u2(b,N.excavation)),M=wt.createElement("image",{href:w.src,height:N.h,width:N.w,x:N.x+P,y:N.y+P,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const U=l2(O,P);return wt.createElement("svg",Jg({height:o,width:o,viewBox:`0 0 ${T} ${T}`,ref:r,role:"img"},I),!!m&&wt.createElement("title",null,m),wt.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),wt.createElement("path",{fill:u,d:U,shapeRendering:"crispEdges"}),M)});Kv.displayName="QRCodeSVG";var h2={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(p_,function(){var r=function(p,g){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,E){v.__proto__=E}||function(v,E){for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(v[k]=E[k])})(p,g)},i=function(){return(i=Object.assign||function(p){for(var g,v=1,E=arguments.length;v<E;v++)for(var k in g=arguments[v])Object.prototype.hasOwnProperty.call(g,k)&&(p[k]=g[k]);return p}).apply(this,arguments)};function s(p,g,v){for(var E,k=0,R=g.length;k<R;k++)!E&&k in g||((E=E||Array.prototype.slice.call(g,0,k))[k]=g[k]);return p.concat(E||Array.prototype.slice.call(g))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:p_,a=Object.keys,l=Array.isArray;function u(p,g){return typeof g!="object"||a(g).forEach(function(v){p[v]=g[v]}),p}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function h(p,g){return d.call(p,g)}function m(p,g){typeof g=="function"&&(g=g(c(p))),(typeof Reflect>"u"?a:Reflect.ownKeys)(g).forEach(function(v){w(p,v,g[v])})}var _=Object.defineProperty;function w(p,g,v,E){_(p,g,u(v&&h(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},E))}function I(p){return{from:function(g){return p.prototype=Object.create(g.prototype),w(p.prototype,"constructor",p),{extend:m.bind(null,p.prototype)}}}}var P=Object.getOwnPropertyDescriptor,b=[].slice;function T(p,g,v){return b.call(p,g,v)}function N(p,g){return g(p)}function O(p){if(!p)throw new Error("Assertion Failed")}function M(p){o.setImmediate?setImmediate(p):setTimeout(p,0)}function U(p,g){if(typeof g=="string"&&h(p,g))return p[g];if(!g)return p;if(typeof g!="string"){for(var v=[],E=0,k=g.length;E<k;++E){var R=U(p,g[E]);v.push(R)}return v}var z=g.indexOf(".");if(z!==-1){var B=p[g.substr(0,z)];return B==null?void 0:U(B,g.substr(z+1))}}function A(p,g,v){if(p&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof g!="string"&&"length"in g){O(typeof v!="string"&&"length"in v);for(var E=0,k=g.length;E<k;++E)A(p,g[E],v[E])}else{var R,z,B=g.indexOf(".");B!==-1?(R=g.substr(0,B),(z=g.substr(B+1))===""?v===void 0?l(p)&&!isNaN(parseInt(R))?p.splice(R,1):delete p[R]:p[R]=v:A(B=!(B=p[R])||!h(p,R)?p[R]={}:B,z,v)):v===void 0?l(p)&&!isNaN(parseInt(g))?p.splice(g,1):delete p[g]:p[g]=v}}function C(p){var g,v={};for(g in p)h(p,g)&&(v[g]=p[g]);return v}var D=[].concat;function L(p){return D.apply([],p)}var pn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(g){return g+p+"Array"})}))).filter(function(p){return o[p]}),V=new Set(pn.map(function(p){return o[p]})),$=null;function j(p){return $=new WeakMap,p=function g(v){if(!v||typeof v!="object")return v;var E=$.get(v);if(E)return E;if(l(v)){E=[],$.set(v,E);for(var k=0,R=v.length;k<R;++k)E.push(g(v[k]))}else if(V.has(v.constructor))E=v;else{var z,B=c(v);for(z in E=B===Object.prototype?{}:Object.create(B),$.set(v,E),v)h(v,z)&&(E[z]=g(v[z]))}return E}(p),$=null,p}var H={}.toString;function G(p){return H.call(p).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",me=typeof Z=="symbol"?function(p){var g;return p!=null&&(g=p[Z])&&g.apply(p)}:function(){return null};function ne(p,g){return g=p.indexOf(g),0<=g&&p.splice(g,1),0<=g}var q={};function K(p){var g,v,E,k;if(arguments.length===1){if(l(p))return p.slice();if(this===q&&typeof p=="string")return[p];if(k=me(p)){for(v=[];!(E=k.next()).done;)v.push(E.value);return v}if(p==null)return[p];if(typeof(g=p.length)!="number")return[p];for(v=new Array(g);g--;)v[g]=p[g];return v}for(g=arguments.length,v=new Array(g);g--;)v[g]=arguments[g];return v}var ue=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},_n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Rr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(_n),ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function le(p,g){this.name=p,this.message=g}function pe(p,g){return p+". Errors: "+Object.keys(g).map(function(v){return g[v].toString()}).filter(function(v,E,k){return k.indexOf(v)===E}).join(`
`)}function we(p,g,v,E){this.failures=g,this.failedKeys=E,this.successCount=v,this.message=pe(p,g)}function Me(p,g){this.name="BulkError",this.failures=Object.keys(g).map(function(v){return g[v]}),this.failuresByPos=g,this.message=pe(p,this.failures)}I(le).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(we).from(le),I(Me).from(le);var je=Rr.reduce(function(p,g){return p[g]=g+"Error",p},{}),Ke=le,Oe=Rr.reduce(function(p,g){var v=g+"Error";function E(k,R){this.name=v,k?typeof k=="string"?(this.message="".concat(k).concat(R?`
 `+R:""),this.inner=R||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=ie[g]||v,this.inner=null)}return I(E).from(Ke),p[g]=E,p},{});Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError;var fn=_n.reduce(function(p,g){return p[g+"Error"]=Oe[g],p},{}),dn=Rr.reduce(function(p,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(p[g+"Error"]=Oe[g]),p},{});function ut(){}function Se(p){return p}function Ze(p,g){return p==null||p===Se?g:function(v){return g(p(v))}}function xt(p,g){return function(){p.apply(this,arguments),g.apply(this,arguments)}}function Cn(p,g){return p===ut?g:function(){var v=p.apply(this,arguments);v!==void 0&&(arguments[0]=v);var E=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var R=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?xt(E,this.onsuccess):E),k&&(this.onerror=this.onerror?xt(k,this.onerror):k),R!==void 0?R:v}}function $o(p,g){return p===ut?g:function(){p.apply(this,arguments);var v=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?xt(v,this.onsuccess):v),E&&(this.onerror=this.onerror?xt(E,this.onerror):E)}}function gu(p,g){return p===ut?g:function(v){var E=p.apply(this,arguments);u(v,E);var k=this.onsuccess,R=this.onerror;return this.onsuccess=null,this.onerror=null,v=g.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?xt(k,this.onsuccess):k),R&&(this.onerror=this.onerror?xt(R,this.onerror):R),E===void 0?v===void 0?void 0:v:u(E,v)}}function Ut(p,g){return p===ut?g:function(){return g.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Xt(p,g){return p===ut?g:function(){var v=p.apply(this,arguments);if(v&&typeof v.then=="function"){for(var E=this,k=arguments.length,R=new Array(k);k--;)R[k]=arguments[k];return v.then(function(){return g.apply(E,R)})}return g.apply(this,arguments)}}dn.ModifyError=we,dn.DexieError=le,dn.BulkError=Me;var Jt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Bo(p){Jt=p}var Ir={},yt=100,pn=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,c(p),p];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,c(g),p]}(),_n=pn[0],Rr=pn[1],pn=pn[2],Rr=Rr&&Rr.then,pt=_n&&_n.constructor,wn=!!pn,Zi=function(p,g){kr.push([p,g]),es&&(queueMicrotask(Nn),es=!1)},Ls=!0,es=!0,ur=[],Bn=[],Sr=Se,An={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ut,pgp:!1,env:{},finalize:ut},De=An,kr=[],mn=0,bi=[];function Ae(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=De;if(typeof p!="function"){if(p!==Ir)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Vs(this,this._value))}this._state=null,this._value=null,++g.ref,function v(E,k){try{k(function(R){if(E._state===null){if(R===E)throw new TypeError("A promise cannot be resolved with itself.");var z=E._lib&&cr();R&&typeof R.then=="function"?v(E,function(B,Q){R instanceof Ae?R._then(B,Q):R.then(B,Q)}):(E._state=!0,E._value=R,ke(E)),z&&Fs()}},Vs.bind(null,E))}catch(R){Vs(E,R)}}(this,p)}var ts={get:function(){var p=De,g=hr;function v(E,k){var R=this,z=!p.global&&(p!==De||g!==hr),B=z&&!Cr(),Q=new Ae(function(Y,re){Be(R,new qt(_u(E,p,z,B),_u(k,p,z,B),Y,re,p))});return this._consoleTask&&(Q._consoleTask=this._consoleTask),Q}return v.prototype=Ir,v},set:function(p){w(this,"then",p&&p.prototype===Ir?ts:{get:function(){return p},set:ts.set})}};function qt(p,g,v,E,k){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof g=="function"?g:null,this.resolve=v,this.reject=E,this.psd=k}function Vs(p,g){var v,E;Bn.push(g),p._state===null&&(v=p._lib&&cr(),g=Sr(g),p._state=!1,p._value=g,E=p,ur.some(function(k){return k._value===E._value})||ur.push(E),ke(p),v&&Fs())}function ke(p){var g=p._listeners;p._listeners=[];for(var v=0,E=g.length;v<E;++v)Be(p,g[v]);var k=p._PSD;--k.ref||k.finalize(),mn===0&&(++mn,Zi(function(){--mn==0&&yu()},[]))}function Be(p,g){if(p._state!==null){var v=p._state?g.onFulfilled:g.onRejected;if(v===null)return(p._state?g.resolve:g.reject)(p._value);++g.psd.ref,++mn,Zi(Ht,[v,p,g])}else p._listeners.push(g)}function Ht(p,g,v){try{var E,k=g._value;!g._state&&Bn.length&&(Bn=[]),E=Jt&&g._consoleTask?g._consoleTask.run(function(){return p(k)}):p(k),g._state||Bn.indexOf(k)!==-1||function(R){for(var z=ur.length;z;)if(ur[--z]._value===R._value)return ur.splice(z,1)}(g),v.resolve(E)}catch(R){v.reject(R)}finally{--mn==0&&yu(),--v.psd.ref||v.psd.finalize()}}function Nn(){Ar(An,function(){cr()&&Fs()})}function cr(){var p=Ls;return es=Ls=!1,p}function Fs(){var p,g,v;do for(;0<kr.length;)for(p=kr,kr=[],v=p.length,g=0;g<v;++g){var E=p[g];E[0].apply(null,E[1])}while(0<kr.length);es=Ls=!0}function yu(){var p=ur;ur=[],p.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var g=bi.slice(0),v=g.length;v;)g[--v]()}function ns(p){return new Ae(Ir,!1,p)}function bt(p,g){var v=De;return function(){var E=cr(),k=De;try{return Wr(v,!0),p.apply(this,arguments)}catch(R){g&&g(R)}finally{Wr(k,!1),E&&Fs()}}}m(Ae.prototype,{then:ts,_then:function(p,g){Be(this,new qt(null,null,p,g,De))},catch:function(p){if(arguments.length===1)return this.then(null,p);var g=p,v=arguments[1];return typeof g=="function"?this.then(null,function(E){return(E instanceof g?v:ns)(E)}):this.then(null,function(E){return(E&&E.name===g?v:ns)(E)})},finally:function(p){return this.then(function(g){return Ae.resolve(p()).then(function(){return g})},function(g){return Ae.resolve(p()).then(function(){return ns(g)})})},timeout:function(p,g){var v=this;return p<1/0?new Ae(function(E,k){var R=setTimeout(function(){return k(new Oe.Timeout(g))},p);v.then(E,k).finally(clearTimeout.bind(null,R))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Ae.prototype,Symbol.toStringTag,"Dexie.Promise"),An.env=Ih(),m(Ae,{all:function(){var p=K.apply(null,arguments).map(qo);return new Ae(function(g,v){p.length===0&&g([]);var E=p.length;p.forEach(function(k,R){return Ae.resolve(k).then(function(z){p[R]=z,--E||g(p)},v)})})},resolve:function(p){return p instanceof Ae?p:p&&typeof p.then=="function"?new Ae(function(g,v){p.then(g,v)}):new Ae(Ir,!0,p)},reject:ns,race:function(){var p=K.apply(null,arguments).map(qo);return new Ae(function(g,v){p.map(function(E){return Ae.resolve(E).then(g,v)})})},PSD:{get:function(){return De},set:function(p){return De=p}},totalEchoes:{get:function(){return hr}},newPSD:Kr,usePSD:Ar,scheduler:{get:function(){return Zi},set:function(p){Zi=p}},rejectionMapper:{get:function(){return Sr},set:function(p){Sr=p}},follow:function(p,g){return new Ae(function(v,E){return Kr(function(k,R){var z=De;z.unhandleds=[],z.onunhandled=R,z.finalize=xt(function(){var B,Q=this;B=function(){Q.unhandleds.length===0?k():R(Q.unhandleds[0])},bi.push(function Y(){B(),bi.splice(bi.indexOf(Y),1)}),++mn,Zi(function(){--mn==0&&yu()},[])},z.finalize),p()},g,v,E)})}}),pt&&(pt.allSettled&&w(Ae,"allSettled",function(){var p=K.apply(null,arguments).map(qo);return new Ae(function(g){p.length===0&&g([]);var v=p.length,E=new Array(v);p.forEach(function(k,R){return Ae.resolve(k).then(function(z){return E[R]={status:"fulfilled",value:z}},function(z){return E[R]={status:"rejected",reason:z}}).then(function(){return--v||g(E)})})})}),pt.any&&typeof AggregateError<"u"&&w(Ae,"any",function(){var p=K.apply(null,arguments).map(qo);return new Ae(function(g,v){p.length===0&&v(new AggregateError([]));var E=p.length,k=new Array(E);p.forEach(function(R,z){return Ae.resolve(R).then(function(B){return g(B)},function(B){k[z]=B,--E||v(new AggregateError(k))})})})}),pt.withResolvers&&(Ae.withResolvers=pt.withResolvers));var Kt={awaits:0,echoes:0,id:0},vu=0,Ei=[],Ka=0,hr=0,Th=0;function Kr(p,g,v,E){var k=De,R=Object.create(k);return R.parent=k,R.ref=0,R.global=!1,R.id=++Th,An.env,R.env=wn?{Promise:Ae,PromiseProp:{value:Ae,configurable:!0,writable:!0},all:Ae.all,race:Ae.race,allSettled:Ae.allSettled,any:Ae.any,resolve:Ae.resolve,reject:Ae.reject}:{},g&&u(R,g),++k.ref,R.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Ar(R,p,v,E),R.ref===0&&R.finalize(),E}function Ti(){return Kt.id||(Kt.id=++vu),++Kt.awaits,Kt.echoes+=yt,Kt.id}function Cr(){return!!Kt.awaits&&(--Kt.awaits==0&&(Kt.id=0),Kt.echoes=Kt.awaits*yt,!0)}function qo(p){return Kt.echoes&&p&&p.constructor===pt?(Ti(),p.then(function(g){return Cr(),g},function(g){return Cr(),Et(g)})):p}function Kp(){var p=Ei[Ei.length-1];Ei.pop(),Wr(p,!1)}function Wr(p,g){var v,E=De;(g?!Kt.echoes||Ka++&&p===De:!Ka||--Ka&&p===De)||queueMicrotask(g?(function(k){++hr,Kt.echoes&&--Kt.echoes!=0||(Kt.echoes=Kt.awaits=Kt.id=0),Ei.push(De),Wr(k,!0)}).bind(null,p):Kp),p!==De&&(De=p,E===An&&(An.env=Ih()),wn&&(v=An.env.Promise,g=p.env,(E.global||p.global)&&(Object.defineProperty(o,"Promise",g.PromiseProp),v.all=g.all,v.race=g.race,v.resolve=g.resolve,v.reject=g.reject,g.allSettled&&(v.allSettled=g.allSettled),g.any&&(v.any=g.any))))}function Ih(){var p=o.Promise;return wn?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Ar(p,g,v,E,k){var R=De;try{return Wr(p,!0),g(v,E,k)}finally{Wr(R,!1)}}function _u(p,g,v,E){return typeof p!="function"?p:function(){var k=De;v&&Ti(),Wr(g,!0);try{return p.apply(this,arguments)}finally{Wr(k,!1),E&&queueMicrotask(Cr)}}}function Ho(p){Promise===pt&&Kt.echoes===0?Ka===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Rr).indexOf("[native code]")===-1&&(Ti=Cr=ut);var Et=Ae.reject,qn="",fr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Sh="String expected.",rs=[],Ko="__dbnames",Wa="readonly",Wo="readwrite";function Gr(p,g){return p?g?function(){return p.apply(this,arguments)&&g.apply(this,arguments)}:p:g}var wu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Go(p){return typeof p!="string"||/\./.test(p)?function(g){return g}:function(g){return g[p]===void 0&&p in g&&delete(g=j(g))[p],g}}function xu(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function tt(p,g){try{var v=Qr(p),E=Qr(g);if(v!==E)return v==="Array"?1:E==="Array"?-1:v==="binary"?1:E==="binary"?-1:v==="string"?1:E==="string"?-1:v==="Date"?1:E!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return g<p?1:p<g?-1:0;case"binary":return function(k,R){for(var z=k.length,B=R.length,Q=z<B?z:B,Y=0;Y<Q;++Y)if(k[Y]!==R[Y])return k[Y]<R[Y]?-1:1;return z===B?0:z<B?-1:1}(dr(p),dr(g));case"Array":return function(k,R){for(var z=k.length,B=R.length,Q=z<B?z:B,Y=0;Y<Q;++Y){var re=tt(k[Y],R[Y]);if(re!==0)return re}return z===B?0:z<B?-1:1}(p,g)}}catch{}return NaN}function Qr(p){var g=typeof p;return g!="object"?g:ArrayBuffer.isView(p)?"binary":(p=G(p),p==="ArrayBuffer"?"binary":p)}function dr(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function Ii(p,g,v){var E=p.schema.yProps;return E?(g&&0<v.numFailures&&(g=g.filter(function(k,R){return!v.failures[R]})),Promise.all(E.map(function(k){return k=k.updatesTable,g?p.db.table(k).where("k").anyOf(g).delete():p.db.table(k).clear()})).then(function(){return v})):v}var Yr=(Ga.prototype.execute=function(p){var g=this["@@propmod"];if(g.add!==void 0){var v=g.add;if(l(v))return s(s([],l(p)?p:[],!0),v).sort();if(typeof v=="number")return(Number(p)||0)+v;if(typeof v=="bigint")try{return BigInt(p)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(g.remove!==void 0){var E=g.remove;if(l(E))return l(p)?p.filter(function(k){return!E.includes(k)}).sort():[];if(typeof E=="number")return Number(p)-E;if(typeof E=="bigint")try{return BigInt(p)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return v=(v=g.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof p=="string"&&p.startsWith(v)?g.replacePrefix[1]+p.substring(v.length):p},Ga);function Ga(p){this["@@propmod"]=p}function _t(p,g){for(var v=a(g),E=v.length,k=!1,R=0;R<E;++R){var z=v[R],B=g[z],Q=U(p,z);B instanceof Yr?(A(p,z,B.execute(Q)),k=!0):Q!==B&&(A(p,z,B),k=!0)}return k}var Qo=(ft.prototype._trans=function(p,g,v){var E=this._tx||De.trans,k=this.name,R=Jt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function z(Y,re,W){if(!W.schema[k])throw new Oe.NotFound("Table "+k+" not part of transaction");return g(W.idbtrans,W)}var B=cr();try{var Q=E&&E.db._novip===this.db._novip?E===De.trans?E._promise(p,z,v):Kr(function(){return E._promise(p,z,v)},{trans:E,transless:De.transless||De}):function Y(re,W,oe,X){if(re.idbdb&&(re._state.openComplete||De.letThrough||re._vip)){var ee=re._createTransaction(W,oe,re._dbSchema);try{ee.create(),re._state.PR1398_maxLoop=3}catch(te){return te.name===je.InvalidState&&re.isOpen()&&0<--re._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),re.close({disableAutoOpen:!1}),re.open().then(function(){return Y(re,W,oe,X)})):Et(te)}return ee._promise(W,function(te,se){return Kr(function(){return De.trans=ee,X(te,se,ee)})}).then(function(te){if(W==="readwrite")try{ee.idbtrans.commit()}catch{}return W==="readonly"?te:ee._completion.then(function(){return te})})}if(re._state.openComplete)return Et(new Oe.DatabaseClosed(re._state.dbOpenError));if(!re._state.isBeingOpened){if(!re._state.autoOpen)return Et(new Oe.DatabaseClosed);re.open().catch(ut)}return re._state.dbReadyPromise.then(function(){return Y(re,W,oe,X)})}(this.db,p,[this.name],z);return R&&(Q._consoleTask=R,Q=Q.catch(function(Y){return console.trace(Y),Et(Y)})),Q}finally{B&&Fs()}},ft.prototype.get=function(p,g){var v=this;return p&&p.constructor===Object?this.where(p).first(g):p==null?Et(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return v.core.get({trans:E,key:p}).then(function(k){return v.hook.reading.fire(k)})}).then(g)},ft.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(l(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var g=a(p);if(g.length===1)return this.where(g[0]).equals(p[g[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&g.every(function(Y){return 0<=B.keyPath.indexOf(Y)})){for(var Q=0;Q<g.length;++Q)if(g.indexOf(B.keyPath[Q])===-1)return!1;return!0}return!1}).sort(function(B,Q){return B.keyPath.length-Q.keyPath.length})[0];if(v&&this.db._maxKey!==qn){var R=v.keyPath.slice(0,g.length);return this.where(R).equals(R.map(function(Q){return p[Q]}))}!v&&Jt&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var E=this.schema.idxByName;function k(B,Q){return tt(B,Q)===0}var z=g.reduce(function(W,Q){var Y=W[0],re=W[1],W=E[Q],oe=p[Q];return[Y||W,Y||!W?Gr(re,W&&W.multi?function(X){return X=U(X,Q),l(X)&&X.some(function(ee){return k(oe,ee)})}:function(X){return k(oe,U(X,Q))}):re]},[null,null]),R=z[0],z=z[1];return R?this.where(R.name).equals(p[R.keyPath]).filter(z):v?this.filter(z):this.where(g).equals("")},ft.prototype.filter=function(p){return this.toCollection().and(p)},ft.prototype.count=function(p){return this.toCollection().count(p)},ft.prototype.offset=function(p){return this.toCollection().offset(p)},ft.prototype.limit=function(p){return this.toCollection().limit(p)},ft.prototype.each=function(p){return this.toCollection().each(p)},ft.prototype.toArray=function(p){return this.toCollection().toArray(p)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,l(p)?"[".concat(p.join("+"),"]"):p))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(p){var g,v=this.db,E=this.name;function k(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof xu&&(function(Q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function re(){this.constructor=Q}r(Q,Y),Q.prototype=Y===null?Object.create(Y):(re.prototype=Y.prototype,new re)}(k,g=p),Object.defineProperty(k.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),k.prototype.table=function(){return E},p=k);for(var R=new Set,z=p.prototype;z;z=c(z))Object.getOwnPropertyNames(z).forEach(function(Q){return R.add(Q)});function B(Q){if(!Q)return Q;var Y,re=Object.create(p.prototype);for(Y in Q)if(!R.has(Y))try{re[Y]=Q[Y]}catch{}return re}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),p},ft.prototype.defineClass=function(){return this.mapToClass(function(p){u(this,p)})},ft.prototype.add=function(p,g){var v=this,E=this.schema.primKey,k=E.auto,R=E.keyPath,z=p;return R&&k&&(z=Go(R)(p)),this._trans("readwrite",function(B){return v.core.mutate({trans:B,type:"add",keys:g!=null?[g]:null,values:[z]})}).then(function(B){return B.numFailures?Ae.reject(B.failures[0]):B.lastResult}).then(function(B){if(R)try{A(p,R,B)}catch{}return B})},ft.prototype.upsert=function(p,g){var v=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return v.core.get({trans:k,key:p}).then(function(R){var z=R??{};return _t(z,g),E&&A(z,E,p),v.core.mutate({trans:k,type:"put",values:[z],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[g]}}).then(function(B){return B.numFailures?Ae.reject(B.failures[0]):!!R})})})},ft.prototype.update=function(p,g){return typeof p!="object"||l(p)?this.where(":id").equals(p).modify(g):(p=U(p,this.schema.primKey.keyPath),p===void 0?Et(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(g))},ft.prototype.put=function(p,g){var v=this,E=this.schema.primKey,k=E.auto,R=E.keyPath,z=p;return R&&k&&(z=Go(R)(p)),this._trans("readwrite",function(B){return v.core.mutate({trans:B,type:"put",values:[z],keys:g!=null?[g]:null})}).then(function(B){return B.numFailures?Ae.reject(B.failures[0]):B.lastResult}).then(function(B){if(R)try{A(p,R,B)}catch{}return B})},ft.prototype.delete=function(p){var g=this;return this._trans("readwrite",function(v){return g.core.mutate({trans:v,type:"delete",keys:[p]}).then(function(E){return Ii(g,[p],E)}).then(function(E){return E.numFailures?Ae.reject(E.failures[0]):void 0})})},ft.prototype.clear=function(){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"deleteRange",range:wu}).then(function(v){return Ii(p,null,v)})}).then(function(g){return g.numFailures?Ae.reject(g.failures[0]):void 0})},ft.prototype.bulkGet=function(p){var g=this;return this._trans("readonly",function(v){return g.core.getMany({keys:p,trans:v}).then(function(E){return E.map(function(k){return g.hook.reading.fire(k)})})})},ft.prototype.bulkAdd=function(p,g,v){var E=this,k=Array.isArray(g)?g:void 0,R=(v=v||(k?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(z){var Y=E.schema.primKey,B=Y.auto,Y=Y.keyPath;if(Y&&k)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var Q=p.length,Y=Y&&B?p.map(Go(Y)):p;return E.core.mutate({trans:z,type:"add",keys:k,values:Y,wantResults:R}).then(function(ee){var W=ee.numFailures,oe=ee.results,X=ee.lastResult,ee=ee.failures;if(W===0)return R?oe:X;throw new Me("".concat(E.name,".bulkAdd(): ").concat(W," of ").concat(Q," operations failed"),ee)})})},ft.prototype.bulkPut=function(p,g,v){var E=this,k=Array.isArray(g)?g:void 0,R=(v=v||(k?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(z){var Y=E.schema.primKey,B=Y.auto,Y=Y.keyPath;if(Y&&k)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var Q=p.length,Y=Y&&B?p.map(Go(Y)):p;return E.core.mutate({trans:z,type:"put",keys:k,values:Y,wantResults:R}).then(function(ee){var W=ee.numFailures,oe=ee.results,X=ee.lastResult,ee=ee.failures;if(W===0)return R?oe:X;throw new Me("".concat(E.name,".bulkPut(): ").concat(W," of ").concat(Q," operations failed"),ee)})})},ft.prototype.bulkUpdate=function(p){var g=this,v=this.core,E=p.map(function(z){return z.key}),k=p.map(function(z){return z.changes}),R=[];return this._trans("readwrite",function(z){return v.getMany({trans:z,keys:E,cache:"clone"}).then(function(B){var Q=[],Y=[];p.forEach(function(W,oe){var X=W.key,ee=W.changes,te=B[oe];if(te){for(var se=0,ce=Object.keys(ee);se<ce.length;se++){var he=ce[se],ge=ee[he];if(he===g.schema.primKey.keyPath){if(tt(ge,X)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else A(te,he,ge)}R.push(oe),Q.push(X),Y.push(te)}});var re=Q.length;return v.mutate({trans:z,type:"put",keys:Q,values:Y,updates:{keys:E,changeSpecs:k}}).then(function(W){var oe=W.numFailures,X=W.failures;if(oe===0)return re;for(var ee=0,te=Object.keys(X);ee<te.length;ee++){var se,ce=te[ee],he=R[Number(ce)];he!=null&&(se=X[ce],delete X[ce],X[he]=se)}throw new Me("".concat(g.name,".bulkUpdate(): ").concat(oe," of ").concat(re," operations failed"),X)})})})},ft.prototype.bulkDelete=function(p){var g=this,v=p.length;return this._trans("readwrite",function(E){return g.core.mutate({trans:E,type:"delete",keys:p}).then(function(k){return Ii(g,p,k)})}).then(function(z){var k=z.numFailures,R=z.lastResult,z=z.failures;if(k===0)return R;throw new Me("".concat(g.name,".bulkDelete(): ").concat(k," of ").concat(v," operations failed"),z)})},ft);function ft(){}function Xr(p){function g(z,B){if(B){for(var Q=arguments.length,Y=new Array(Q-1);--Q;)Y[Q-1]=arguments[Q];return v[z].subscribe.apply(null,Y),p}if(typeof z=="string")return v[z]}var v={};g.addEventType=R;for(var E=1,k=arguments.length;E<k;++E)R(arguments[E]);return g;function R(z,B,Q){if(typeof z!="object"){var Y;B=B||Ut;var re={subscribers:[],fire:Q=Q||ut,subscribe:function(W){re.subscribers.indexOf(W)===-1&&(re.subscribers.push(W),re.fire=B(re.fire,W))},unsubscribe:function(W){re.subscribers=re.subscribers.filter(function(oe){return oe!==W}),re.fire=re.subscribers.reduce(B,Q)}};return v[z]=g[z]=re}a(Y=z).forEach(function(W){var oe=Y[W];if(l(oe))R(W,Y[W][0],Y[W][1]);else{if(oe!=="asap")throw new Oe.InvalidArgument("Invalid event config");var X=R(W,Se,function(){for(var ee=arguments.length,te=new Array(ee);ee--;)te[ee]=arguments[ee];X.subscribers.forEach(function(se){M(function(){se.apply(null,te)})})})}})}}function Yo(p,g){return I(g).from({prototype:p}),g}function is(p,g){return!(p.filter||p.algorithm||p.or)&&(g?p.justLimit:!p.replayFilter)}function bu(p,g){p.filter=Gr(p.filter,g)}function Eu(p,g,v){var E=p.replayFilter;p.replayFilter=E?function(){return Gr(E(),g())}:g,p.justLimit=v&&!E}function Qa(p,g){if(p.isPrimKey)return g.primaryKey;var v=g.getIndexByKeyPath(p.index);if(!v)throw new Oe.Schema("KeyPath "+p.index+" on object store "+g.name+" is not indexed");return v}function kh(p,g,v){var E=Qa(p,g.schema);return g.openCursor({trans:v,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:E,range:p.range}})}function Si(p,g,v,E){var k=p.replayFilter?Gr(p.filter,p.replayFilter()):p.filter;if(p.or){var R={},z=function(B,Q,Y){var re,W;k&&!k(Q,Y,function(oe){return Q.stop(oe)},function(oe){return Q.fail(oe)})||((W=""+(re=Q.primaryKey))=="[object ArrayBuffer]"&&(W=""+new Uint8Array(re)),h(R,W)||(R[W]=!0,g(B,Q,Y)))};return Promise.all([p.or._iterate(z,v),ki(kh(p,E,v),p.algorithm,z,!p.keysOnly&&p.valueMapper)])}return ki(kh(p,E,v),Gr(p.algorithm,k),g,!p.keysOnly&&p.valueMapper)}function ki(p,g,v,E){var k=bt(E?function(R,z,B){return v(E(R),z,B)}:v);return p.then(function(R){if(R)return R.start(function(){var z=function(){return R.continue()};g&&!g(R,function(B){return z=B},function(B){R.stop(B),z=ut},function(B){R.fail(B),z=ut})||k(R.value,R,function(B){return z=B}),z()})})}var Ch=(at.prototype._read=function(p,g){var v=this._ctx;return v.error?v.table._trans(null,Et.bind(null,v.error)):v.table._trans("readonly",p).then(g)},at.prototype._write=function(p){var g=this._ctx;return g.error?g.table._trans(null,Et.bind(null,g.error)):g.table._trans("readwrite",p,"locked")},at.prototype._addAlgorithm=function(p){var g=this._ctx;g.algorithm=Gr(g.algorithm,p)},at.prototype._iterate=function(p,g){return Si(this._ctx,p,g,this._ctx.table.core)},at.prototype.clone=function(p){var g=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return p&&u(v,p),g._ctx=v,g},at.prototype.raw=function(){return this._ctx.valueMapper=null,this},at.prototype.each=function(p){var g=this._ctx;return this._read(function(v){return Si(g,p,v,g.table.core)})},at.prototype.count=function(p){var g=this;return this._read(function(v){var E=g._ctx,k=E.table.core;if(is(E,!0))return k.count({trans:v,query:{index:Qa(E,k.schema),range:E.range}}).then(function(z){return Math.min(z,E.limit)});var R=0;return Si(E,function(){return++R,!1},v,k).then(function(){return R})}).then(p)},at.prototype.sortBy=function(p,g){var v=p.split(".").reverse(),E=v[0],k=v.length-1;function R(Q,Y){return Y?R(Q[v[Y]],Y-1):Q[E]}var z=this._ctx.dir==="next"?1:-1;function B(Q,Y){return tt(R(Q,k),R(Y,k))*z}return this.toArray(function(Q){return Q.sort(B)}).then(g)},at.prototype.toArray=function(p){var g=this;return this._read(function(v){var E=g._ctx;if(E.dir==="next"&&is(E,!0)&&0<E.limit){var k=E.valueMapper,R=Qa(E,E.table.core.schema);return E.table.core.query({trans:v,limit:E.limit,values:!0,query:{index:R,range:E.range}}).then(function(B){return B=B.result,k?B.map(k):B})}var z=[];return Si(E,function(B){return z.push(B)},v,E.table.core).then(function(){return z})},p)},at.prototype.offset=function(p){var g=this._ctx;return p<=0||(g.offset+=p,is(g)?Eu(g,function(){var v=p;return function(E,k){return v===0||(v===1?--v:k(function(){E.advance(v),v=0}),!1)}}):Eu(g,function(){var v=p;return function(){return--v<0}})),this},at.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),Eu(this._ctx,function(){var g=p;return function(v,E,k){return--g<=0&&E(k),0<=g}},!0),this},at.prototype.until=function(p,g){return bu(this._ctx,function(v,E,k){return!p(v.value)||(E(k),g)}),this},at.prototype.first=function(p){return this.limit(1).toArray(function(g){return g[0]}).then(p)},at.prototype.last=function(p){return this.reverse().first(p)},at.prototype.filter=function(p){var g;return bu(this._ctx,function(v){return p(v.value)}),(g=this._ctx).isMatch=Gr(g.isMatch,p),this},at.prototype.and=function(p){return this.filter(p)},at.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},at.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},at.prototype.desc=function(){return this.reverse()},at.prototype.eachKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,E){p(E.key,E)})},at.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},at.prototype.eachPrimaryKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,E){p(E.primaryKey,E)})},at.prototype.keys=function(p){var g=this._ctx;g.keysOnly=!g.isMatch;var v=[];return this.each(function(E,k){v.push(k.key)}).then(function(){return v}).then(p)},at.prototype.primaryKeys=function(p){var g=this._ctx;if(g.dir==="next"&&is(g,!0)&&0<g.limit)return this._read(function(E){var k=Qa(g,g.table.core.schema);return g.table.core.query({trans:E,values:!1,limit:g.limit,query:{index:k,range:g.range}})}).then(function(E){return E.result}).then(p);g.keysOnly=!g.isMatch;var v=[];return this.each(function(E,k){v.push(k.primaryKey)}).then(function(){return v}).then(p)},at.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},at.prototype.firstKey=function(p){return this.limit(1).keys(function(g){return g[0]}).then(p)},at.prototype.lastKey=function(p){return this.reverse().firstKey(p)},at.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var g={};return bu(this._ctx,function(k){var E=k.primaryKey.toString(),k=h(g,E);return g[E]=!0,!k}),this},at.prototype.modify=function(p){var g=this,v=this._ctx;return this._write(function(E){var k=typeof p=="function"?p:function(te){return _t(te,p)},R=v.table.core,Y=R.schema.primaryKey,z=Y.outbound,B=Y.extractKey,Q=200,Y=g.db._options.modifyChunkSize;Y&&(Q=typeof Y=="object"?Y[R.name]||Y["*"]||200:Y);function re(te,he){var ce=he.failures,he=he.numFailures;oe+=te-he;for(var ge=0,ye=a(ce);ge<ye.length;ge++){var Te=ye[ge];W.push(ce[Te])}}var W=[],oe=0,X=[],ee=p===Tu;return g.clone().primaryKeys().then(function(te){function se(he){var ge=Math.min(Q,te.length-he),ye=te.slice(he,he+ge);return(ee?Promise.resolve([]):R.getMany({trans:E,keys:ye,cache:"immutable"})).then(function(Te){var Pe=[],be=[],Ce=z?[]:null,Re=ee?ye:[];if(!ee)for(var Ne=0;Ne<ge;++Ne){var Ve=Te[Ne],Xe={value:j(Ve),primKey:te[he+Ne]};k.call(Xe,Xe.value,Xe)!==!1&&(Xe.value==null?Re.push(te[he+Ne]):z||tt(B(Ve),B(Xe.value))===0?(be.push(Xe.value),z&&Ce.push(te[he+Ne])):(Re.push(te[he+Ne]),Pe.push(Xe.value)))}return Promise.resolve(0<Pe.length&&R.mutate({trans:E,type:"add",values:Pe}).then(function(Je){for(var et in Je.failures)Re.splice(parseInt(et),1);re(Pe.length,Je)})).then(function(){return(0<be.length||ce&&typeof p=="object")&&R.mutate({trans:E,type:"put",keys:Ce,values:be,criteria:ce,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<he}).then(function(Je){return re(be.length,Je)})}).then(function(){return(0<Re.length||ce&&ee)&&R.mutate({trans:E,type:"delete",keys:Re,criteria:ce,isAdditionalChunk:0<he}).then(function(Je){return Ii(v.table,Re,Je)}).then(function(Je){return re(Re.length,Je)})}).then(function(){return te.length>he+ge&&se(he+Q)})})}var ce=is(v)&&v.limit===1/0&&(typeof p!="function"||ee)&&{index:v.index,range:v.range};return se(0).then(function(){if(0<W.length)throw new we("Error modifying one or more objects",W,oe,X);return te.length})})})},at.prototype.delete=function(){var p=this._ctx,g=p.range;return!is(p)||p.table.schema.yProps||!p.isPrimKey&&g.type!==3?this.modify(Tu):this._write(function(v){var E=p.table.core.schema.primaryKey,k=g;return p.table.core.count({trans:v,query:{index:E,range:k}}).then(function(R){return p.table.core.mutate({trans:v,type:"deleteRange",range:k}).then(function(Q){var B=Q.failures,Q=Q.numFailures;if(Q)throw new we("Could not delete some values",Object.keys(B).map(function(Y){return B[Y]}),R-Q);return R-Q})})})},at);function at(){}var Tu=function(p,g){return g.value=null};function Ah(p,g){return p<g?-1:p===g?0:1}function Nh(p,g){return g<p?-1:p===g?0:1}function Zt(p,g,v){return p=p instanceof Ph?new p.Collection(p):p,p._ctx.error=new(v||TypeError)(g),p}function Us(p){return new p.Collection(p,function(){return Jr("")}).limit(0)}function Ya(p,g,v,E){var k,R,z,B,Q,Y,re,W=v.length;if(!v.every(function(ee){return typeof ee=="string"}))return Zt(p,Sh);function oe(ee){k=ee==="next"?function(se){return se.toUpperCase()}:function(se){return se.toLowerCase()},R=ee==="next"?function(se){return se.toLowerCase()}:function(se){return se.toUpperCase()},z=ee==="next"?Ah:Nh;var te=v.map(function(se){return{lower:R(se),upper:k(se)}}).sort(function(se,ce){return z(se.lower,ce.lower)});B=te.map(function(se){return se.upper}),Q=te.map(function(se){return se.lower}),re=(Y=ee)==="next"?"":E}oe("next"),p=new p.Collection(p,function(){return Ci(B[0],Q[W-1]+E)}),p._ondirectionchange=function(ee){oe(ee)};var X=0;return p._addAlgorithm(function(ee,te,se){var ce=ee.key;if(typeof ce!="string")return!1;var he=R(ce);if(g(he,Q,X))return!0;for(var ge=null,ye=X;ye<W;++ye){var Te=function(Pe,be,Ce,Re,Ne,Ve){for(var Xe=Math.min(Pe.length,Re.length),Je=-1,et=0;et<Xe;++et){var pr=be[et];if(pr!==Re[et])return Ne(Pe[et],Ce[et])<0?Pe.substr(0,et)+Ce[et]+Ce.substr(et+1):Ne(Pe[et],Re[et])<0?Pe.substr(0,et)+Re[et]+Ce.substr(et+1):0<=Je?Pe.substr(0,Je)+be[Je]+Ce.substr(Je+1):null;Ne(Pe[et],pr)<0&&(Je=et)}return Xe<Re.length&&Ve==="next"?Pe+Ce.substr(Pe.length):Xe<Pe.length&&Ve==="prev"?Pe.substr(0,Ce.length):Je<0?null:Pe.substr(0,Je)+Re[Je]+Ce.substr(Je+1)}(ce,he,B[ye],Q[ye],z,Y);Te===null&&ge===null?X=ye+1:(ge===null||0<z(ge,Te))&&(ge=Te)}return te(ge!==null?function(){ee.continue(ge+re)}:se),!1}),p}function Ci(p,g,v,E){return{type:2,lower:p,upper:g,lowerOpen:v,upperOpen:E}}function Jr(p){return{type:1,lower:p,upper:p}}var Ph=(Object.defineProperty(zt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),zt.prototype.between=function(p,g,v,E){v=v!==!1,E=E===!0;try{return 0<this._cmp(p,g)||this._cmp(p,g)===0&&(v||E)&&(!v||!E)?Us(this):new this.Collection(this,function(){return Ci(p,g,!v,!E)})}catch{return Zt(this,fr)}},zt.prototype.equals=function(p){return p==null?Zt(this,fr):new this.Collection(this,function(){return Jr(p)})},zt.prototype.above=function(p){return p==null?Zt(this,fr):new this.Collection(this,function(){return Ci(p,void 0,!0)})},zt.prototype.aboveOrEqual=function(p){return p==null?Zt(this,fr):new this.Collection(this,function(){return Ci(p,void 0,!1)})},zt.prototype.below=function(p){return p==null?Zt(this,fr):new this.Collection(this,function(){return Ci(void 0,p,!1,!0)})},zt.prototype.belowOrEqual=function(p){return p==null?Zt(this,fr):new this.Collection(this,function(){return Ci(void 0,p)})},zt.prototype.startsWith=function(p){return typeof p!="string"?Zt(this,Sh):this.between(p,p+qn,!0,!0)},zt.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):Ya(this,function(g,v){return g.indexOf(v[0])===0},[p],qn)},zt.prototype.equalsIgnoreCase=function(p){return Ya(this,function(g,v){return g===v[0]},[p],"")},zt.prototype.anyOfIgnoreCase=function(){var p=K.apply(q,arguments);return p.length===0?Us(this):Ya(this,function(g,v){return v.indexOf(g)!==-1},p,"")},zt.prototype.startsWithAnyOfIgnoreCase=function(){var p=K.apply(q,arguments);return p.length===0?Us(this):Ya(this,function(g,v){return v.some(function(E){return g.indexOf(E)===0})},p,qn)},zt.prototype.anyOf=function(){var p=this,g=K.apply(q,arguments),v=this._cmp;try{g.sort(v)}catch{return Zt(this,fr)}if(g.length===0)return Us(this);var E=new this.Collection(this,function(){return Ci(g[0],g[g.length-1])});E._ondirectionchange=function(R){v=R==="next"?p._ascending:p._descending,g.sort(v)};var k=0;return E._addAlgorithm(function(R,z,B){for(var Q=R.key;0<v(Q,g[k]);)if(++k===g.length)return z(B),!1;return v(Q,g[k])===0||(z(function(){R.continue(g[k])}),!1)}),E},zt.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},zt.prototype.noneOf=function(){var p=K.apply(q,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return Zt(this,fr)}var g=p.reduce(function(v,E){return v?v.concat([[v[v.length-1][1],E]]):[[-1/0,E]]},null);return g.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},zt.prototype.inAnyRange=function(ce,g){var v=this,E=this._cmp,k=this._ascending,R=this._descending,z=this._min,B=this._max;if(ce.length===0)return Us(this);if(!ce.every(function(he){return he[0]!==void 0&&he[1]!==void 0&&k(he[0],he[1])<=0}))return Zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var Q=!g||g.includeLowers!==!1,Y=g&&g.includeUppers===!0,re,W=k;function oe(he,ge){return W(he[0],ge[0])}try{(re=ce.reduce(function(he,ge){for(var ye=0,Te=he.length;ye<Te;++ye){var Pe=he[ye];if(E(ge[0],Pe[1])<0&&0<E(ge[1],Pe[0])){Pe[0]=z(Pe[0],ge[0]),Pe[1]=B(Pe[1],ge[1]);break}}return ye===Te&&he.push(ge),he},[])).sort(oe)}catch{return Zt(this,fr)}var X=0,ee=Y?function(he){return 0<k(he,re[X][1])}:function(he){return 0<=k(he,re[X][1])},te=Q?function(he){return 0<R(he,re[X][0])}:function(he){return 0<=R(he,re[X][0])},se=ee,ce=new this.Collection(this,function(){return Ci(re[0][0],re[re.length-1][1],!Q,!Y)});return ce._ondirectionchange=function(he){W=he==="next"?(se=ee,k):(se=te,R),re.sort(oe)},ce._addAlgorithm(function(he,ge,ye){for(var Te,Pe=he.key;se(Pe);)if(++X===re.length)return ge(ye),!1;return!ee(Te=Pe)&&!te(Te)||(v._cmp(Pe,re[X][1])===0||v._cmp(Pe,re[X][0])===0||ge(function(){W===k?he.continue(re[X][0]):he.continue(re[X][1])}),!1)}),ce},zt.prototype.startsWithAnyOf=function(){var p=K.apply(q,arguments);return p.every(function(g){return typeof g=="string"})?p.length===0?Us(this):this.inAnyRange(p.map(function(g){return[g,g+qn]})):Zt(this,"startsWithAnyOf() only works with strings")},zt);function zt(){}function Hn(p){return bt(function(g){return zs(g),p(g.target.error),!1})}function zs(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Zr="storagemutated",ss="x-storagemutated-1",ei=Xr(null,Zr),Iu=(ct.prototype._lock=function(){return O(!De.global),++this._reculock,this._reculock!==1||De.global||(De.lockOwnerFor=this),this},ct.prototype._unlock=function(){if(O(!De.global),--this._reculock==0)for(De.global||(De.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Ar(p[1],p[0])}catch{}}return this},ct.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},ct.prototype.create=function(p){var g=this;if(!this.mode)return this;var v=this.db.idbdb,E=this.db._state.dbOpenError;if(O(!this.idbtrans),!p&&!v)switch(E&&E.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(E);case"MissingAPIError":throw new Oe.MissingAPI(E.message,E);default:throw new Oe.OpenFailed(E)}if(!this.active)throw new Oe.TransactionInactive;return O(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=bt(function(k){zs(k),g._reject(p.error)}),p.onabort=bt(function(k){zs(k),g.active&&g._reject(new Oe.Abort(p.error)),g.active=!1,g.on("abort").fire(k)}),p.oncomplete=bt(function(){g.active=!1,g._resolve(),"mutatedParts"in p&&ei.storagemutated.fire(p.mutatedParts)}),this},ct.prototype._promise=function(p,g,v){var E=this;if(p==="readwrite"&&this.mode!=="readwrite")return Et(new Oe.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new Oe.TransactionInactive);if(this._locked())return new Ae(function(R,z){E._blockedFuncs.push([function(){E._promise(p,g,v).then(R,z)},De])});if(v)return Kr(function(){var R=new Ae(function(z,B){E._lock();var Q=g(z,B,E);Q&&Q.then&&Q.then(z,B)});return R.finally(function(){return E._unlock()}),R._lib=!0,R});var k=new Ae(function(R,z){var B=g(R,z,E);B&&B.then&&B.then(R,z)});return k._lib=!0,k},ct.prototype._root=function(){return this.parent?this.parent._root():this},ct.prototype.waitFor=function(p){var g,v=this._root(),E=Ae.resolve(p);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return E}):(v._waitingFor=E,v._waitingQueue=[],g=v.idbtrans.objectStore(v.storeNames[0]),function R(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(g.get(-1/0).onsuccess=R)}());var k=v._waitingFor;return new Ae(function(R,z){E.then(function(B){return v._waitingQueue.push(bt(R.bind(null,B)))},function(B){return v._waitingQueue.push(bt(z.bind(null,B)))}).finally(function(){v._waitingFor===k&&(v._waitingFor=null)})})},ct.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},ct.prototype.table=function(p){var g=this._memoizedTables||(this._memoizedTables={});if(h(g,p))return g[p];var v=this.schema[p];if(!v)throw new Oe.NotFound("Table "+p+" not part of transaction");return v=new this.db.Table(p,v,this),v.core=this.db.core.table(p),g[p]=v},ct);function ct(){}function Su(p,g,v,E,k,R,z,B){return{name:p,keyPath:g,unique:v,multi:E,auto:k,compound:R,src:(v&&!z?"&":"")+(E?"*":"")+(k?"++":"")+Rh(g),type:B}}function Rh(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Xa(p,g,v){return{name:p,primKey:g,indexes:v,mappedClass:null,idxByName:(E=function(k){return[k.name,k]},v.reduce(function(k,R,z){return z=E(R,z),z&&(k[z[0]]=z[1]),k},{}))};var E}var $s=function(p){try{return p.only([[]]),$s=function(){return[[]]},[[]]}catch{return $s=function(){return qn},qn}};function Ja(p){return p==null?function(){}:typeof p=="string"?(g=p).split(".").length===1?function(v){return v[g]}:function(v){return U(v,g)}:function(v){return U(v,p)};var g}function Xo(p){return[].slice.call(p)}var Ai=0;function Bs(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function Wp(p,g,Q){function E(se){if(se.type===3)return null;if(se.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var X=se.lower,ee=se.upper,te=se.lowerOpen,se=se.upperOpen;return X===void 0?ee===void 0?null:g.upperBound(ee,!!se):ee===void 0?g.lowerBound(X,!!te):g.bound(X,ee,!!te,!!se)}function k(oe){var X,ee=oe.name;return{name:ee,schema:oe,mutate:function(te){var se=te.trans,ce=te.type,he=te.keys,ge=te.values,ye=te.range;return new Promise(function(Te,Pe){Te=bt(Te);var be=se.objectStore(ee),Ce=be.keyPath==null,Re=ce==="put"||ce==="add";if(!Re&&ce!=="delete"&&ce!=="deleteRange")throw new Error("Invalid operation type: "+ce);var Ne,Ve=(he||ge||{length:1}).length;if(he&&ge&&he.length!==ge.length)throw new Error("Given keys array must have same length as given values array.");if(Ve===0)return Te({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(Kn){++pr,zs(Kn)}var Je=[],et=[],pr=0;if(ce==="deleteRange"){if(ye.type===4)return Te({numFailures:pr,failures:et,results:[],lastResult:void 0});ye.type===3?Je.push(Ne=be.clear()):Je.push(Ne=be.delete(E(ye)))}else{var Ce=Re?Ce?[ge,he]:[ge,null]:[he,null],Ye=Ce[0],Rn=Ce[1];if(Re)for(var On=0;On<Ve;++On)Je.push(Ne=Rn&&Rn[On]!==void 0?be[ce](Ye[On],Rn[On]):be[ce](Ye[On])),Ne.onerror=Xe;else for(On=0;On<Ve;++On)Je.push(Ne=be[ce](Ye[On])),Ne.onerror=Xe}function Mh(Kn){Kn=Kn.target.result,Je.forEach(function(ia,Jp){return ia.error!=null&&(et[Jp]=ia.error)}),Te({numFailures:pr,failures:et,results:ce==="delete"?he:Je.map(function(ia){return ia.result}),lastResult:Kn})}Ne.onerror=function(Kn){Xe(Kn),Mh(Kn)},Ne.onsuccess=Mh})},getMany:function(te){var se=te.trans,ce=te.keys;return new Promise(function(he,ge){he=bt(he);for(var ye,Te=se.objectStore(ee),Pe=ce.length,be=new Array(Pe),Ce=0,Re=0,Ne=function(Je){Je=Je.target,be[Je._pos]=Je.result,++Re===Ce&&he(be)},Ve=Hn(ge),Xe=0;Xe<Pe;++Xe)ce[Xe]!=null&&((ye=Te.get(ce[Xe]))._pos=Xe,ye.onsuccess=Ne,ye.onerror=Ve,++Ce);Ce===0&&he(be)})},get:function(te){var se=te.trans,ce=te.key;return new Promise(function(he,ge){he=bt(he);var ye=se.objectStore(ee).get(ce);ye.onsuccess=function(Te){return he(Te.target.result)},ye.onerror=Hn(ge)})},query:(X=Y,function(te){return new Promise(function(se,ce){se=bt(se);var he,ge,ye,Ce=te.trans,Te=te.values,Pe=te.limit,Ne=te.query,be=Pe===1/0?void 0:Pe,Re=Ne.index,Ne=Ne.range,Ce=Ce.objectStore(ee),Re=Re.isPrimaryKey?Ce:Ce.index(Re.name),Ne=E(Ne);if(Pe===0)return se({result:[]});X?((be=Te?Re.getAll(Ne,be):Re.getAllKeys(Ne,be)).onsuccess=function(Ve){return se({result:Ve.target.result})},be.onerror=Hn(ce)):(he=0,ge=!Te&&"openKeyCursor"in Re?Re.openKeyCursor(Ne):Re.openCursor(Ne),ye=[],ge.onsuccess=function(Ve){var Xe=ge.result;return Xe?(ye.push(Te?Xe.value:Xe.primaryKey),++he===Pe?se({result:ye}):void Xe.continue()):se({result:ye})},ge.onerror=Hn(ce))})}),openCursor:function(te){var se=te.trans,ce=te.values,he=te.query,ge=te.reverse,ye=te.unique;return new Promise(function(Te,Pe){Te=bt(Te);var Re=he.index,be=he.range,Ce=se.objectStore(ee),Ce=Re.isPrimaryKey?Ce:Ce.index(Re.name),Re=ge?ye?"prevunique":"prev":ye?"nextunique":"next",Ne=!ce&&"openKeyCursor"in Ce?Ce.openKeyCursor(E(be),Re):Ce.openCursor(E(be),Re);Ne.onerror=Hn(Pe),Ne.onsuccess=bt(function(Ve){var Xe,Je,et,pr,Ye=Ne.result;Ye?(Ye.___id=++Ai,Ye.done=!1,Xe=Ye.continue.bind(Ye),Je=(Je=Ye.continuePrimaryKey)&&Je.bind(Ye),et=Ye.advance.bind(Ye),pr=function(){throw new Error("Cursor not stopped")},Ye.trans=se,Ye.stop=Ye.continue=Ye.continuePrimaryKey=Ye.advance=function(){throw new Error("Cursor not started")},Ye.fail=bt(Pe),Ye.next=function(){var Rn=this,On=1;return this.start(function(){return On--?Rn.continue():Rn.stop()}).then(function(){return Rn})},Ye.start=function(Rn){function On(){if(Ne.result)try{Rn()}catch(Kn){Ye.fail(Kn)}else Ye.done=!0,Ye.start=function(){throw new Error("Cursor behind last entry")},Ye.stop()}var Mh=new Promise(function(Kn,ia){Kn=bt(Kn),Ne.onerror=Hn(ia),Ye.fail=ia,Ye.stop=function(Jp){Ye.stop=Ye.continue=Ye.continuePrimaryKey=Ye.advance=pr,Kn(Jp)}});return Ne.onsuccess=bt(function(Kn){Ne.onsuccess=On,On()}),Ye.continue=Xe,Ye.continuePrimaryKey=Je,Ye.advance=et,On(),Mh},Te(Ye)):Te(null)},Pe)})},count:function(te){var se=te.query,ce=te.trans,he=se.index,ge=se.range;return new Promise(function(ye,Te){var Pe=ce.objectStore(ee),be=he.isPrimaryKey?Pe:Pe.index(he.name),Pe=E(ge),be=Pe?be.count(Pe):be.count();be.onsuccess=bt(function(Ce){return ye(Ce.target.result)}),be.onerror=Hn(Te)})}}}var R,z,B,re=(z=Q,B=Xo((R=p).objectStoreNames),{schema:{name:R.name,tables:B.map(function(oe){return z.objectStore(oe)}).map(function(oe){var X=oe.keyPath,se=oe.autoIncrement,ee=l(X),te={},se={name:oe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:X==null,compound:ee,keyPath:X,autoIncrement:se,unique:!0,extractKey:Ja(X)},indexes:Xo(oe.indexNames).map(function(ce){return oe.index(ce)}).map(function(ye){var he=ye.name,ge=ye.unique,Te=ye.multiEntry,ye=ye.keyPath,Te={name:he,compound:l(ye),keyPath:ye,unique:ge,multiEntry:Te,extractKey:Ja(ye)};return te[Bs(ye)]=Te}),getIndexByKeyPath:function(ce){return te[Bs(ce)]}};return te[":id"]=se.primaryKey,X!=null&&(te[Bs(X)]=se.primaryKey),se})},hasGetAll:0<B.length&&"getAll"in z.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Q=re.schema,Y=re.hasGetAll,re=Q.tables.map(k),W={};return re.forEach(function(oe){return W[oe.name]=oe}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(oe){if(!W[oe])throw new Error("Table '".concat(oe,"' not found"));return W[oe]},MIN_KEY:-1/0,MAX_KEY:$s(g),schema:Q}}function Jo(p,g,v,E){var k=v.IDBKeyRange;return v.indexedDB,{dbcore:(E=Wp(g,k,E),p.dbcore.reduce(function(R,z){return z=z.create,i(i({},R),z(R))},E))}}function Zo(p,E){var v=E.db,E=Jo(p._middlewares,v,p._deps,E);p.core=E.dbcore,p.tables.forEach(function(k){var R=k.name;p.core.schema.tables.some(function(z){return z.name===R})&&(k.core=p.core.table(R),p[R]instanceof p.Table&&(p[R].core=k.core))})}function qs(p,g,v,E){v.forEach(function(k){var R=E[k];g.forEach(function(z){var B=function Q(Y,re){return P(Y,re)||(Y=c(Y))&&Q(Y,re)}(z,k);(!B||"value"in B&&B.value===void 0)&&(z===p.Transaction.prototype||z instanceof p.Transaction?w(z,k,{get:function(){return this.table(k)},set:function(Q){_(this,k,{value:Q,writable:!0,configurable:!0,enumerable:!0})}}):z[k]=new p.Table(k,R))})})}function Hs(p,g){g.forEach(function(v){for(var E in v)v[E]instanceof p.Table&&delete v[E]})}function Oh(p,g){return p._cfg.version-g._cfg.version}function Za(p,g,v,E){var k=p._dbSchema;v.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=Xa("$meta",Cu("")[0],[]),p._storeNames.push("$meta"));var R=p._createTransaction("readwrite",p._storeNames,k);R.create(v),R._completion.catch(E);var z=R._reject.bind(R),B=De.transless||De;Kr(function(){return De.trans=R,De.transless=B,g!==0?(Zo(p,v),Y=g,((Q=R).storeNames.includes("$meta")?Q.table("$meta").get("version").then(function(re){return re??Y}):Ae.resolve(Y)).then(function(re){return oe=re,X=R,ee=v,te=[],re=(W=p)._versions,se=W._dbSchema=Ks(0,W.idbdb,ee),(re=re.filter(function(ce){return ce._cfg.version>=oe})).length!==0?(re.forEach(function(ce){te.push(function(){var he=se,ge=ce._cfg.dbschema;Ws(W,he,ee),Ws(W,ge,ee),se=W._dbSchema=ge;var ye=el(he,ge);ye.add.forEach(function(Re){os(ee,Re[0],Re[1].primKey,Re[1].indexes)}),ye.change.forEach(function(Re){if(Re.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var Ne=ee.objectStore(Re.name);Re.add.forEach(function(Ve){return ea(Ne,Ve)}),Re.change.forEach(function(Ve){Ne.deleteIndex(Ve.name),ea(Ne,Ve)}),Re.del.forEach(function(Ve){return Ne.deleteIndex(Ve)})});var Te=ce._cfg.contentUpgrade;if(Te&&ce._cfg.version>oe){Zo(W,ee),X._memoizedTables={};var Pe=C(ge);ye.del.forEach(function(Re){Pe[Re]=he[Re]}),Hs(W,[W.Transaction.prototype]),qs(W,[W.Transaction.prototype],a(Pe),Pe),X.schema=Pe;var be,Ce=ue(Te);return Ce&&Ti(),ye=Ae.follow(function(){var Re;(be=Te(X))&&Ce&&(Re=Cr.bind(null,null),be.then(Re,Re))}),be&&typeof be.then=="function"?Ae.resolve(be):ye.then(function(){return be})}}),te.push(function(he){var ge,ye,Te=ce._cfg.dbschema;ge=Te,ye=he,[].slice.call(ye.db.objectStoreNames).forEach(function(Pe){return ge[Pe]==null&&ye.db.deleteObjectStore(Pe)}),Hs(W,[W.Transaction.prototype]),qs(W,[W.Transaction.prototype],W._storeNames,W._dbSchema),X.schema=W._dbSchema}),te.push(function(he){W.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(W.idbdb.version/10)===ce._cfg.version?(W.idbdb.deleteObjectStore("$meta"),delete W._dbSchema.$meta,W._storeNames=W._storeNames.filter(function(ge){return ge!=="$meta"})):he.objectStore("$meta").put(ce._cfg.version,"version"))})}),function ce(){return te.length?Ae.resolve(te.shift()(X.idbtrans)).then(ce):Ae.resolve()}().then(function(){ku(se,ee)})):Ae.resolve();var W,oe,X,ee,te,se}).catch(z)):(a(k).forEach(function(re){os(v,re,k[re].primKey,k[re].indexes)}),Zo(p,v),void Ae.follow(function(){return p.on.populate.fire(R)}).catch(z));var Q,Y})}function Gp(p,g){ku(p._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var v=Ks(0,p.idbdb,g);Ws(p,p._dbSchema,g);for(var E=0,k=el(v,p._dbSchema).change;E<k.length;E++){var R=function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=g.objectStore(z.name);z.add.forEach(function(Q){Jt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(Q.src)),ea(B,Q)})}(k[E]);if(typeof R=="object")return R.value}}function el(p,g){var v,E={del:[],add:[],change:[]};for(v in p)g[v]||E.del.push(v);for(v in g){var k=p[v],R=g[v];if(k){var z={name:v,def:R,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(R.primKey.keyPath||"")||k.primKey.auto!==R.primKey.auto)z.recreate=!0,E.change.push(z);else{var B=k.idxByName,Q=R.idxByName,Y=void 0;for(Y in B)Q[Y]||z.del.push(Y);for(Y in Q){var re=B[Y],W=Q[Y];re?re.src!==W.src&&z.change.push(W):z.add.push(W)}(0<z.del.length||0<z.add.length||0<z.change.length)&&E.change.push(z)}}else E.add.push([v,R])}return E}function os(p,g,v,E){var k=p.db.createObjectStore(g,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return E.forEach(function(R){return ea(k,R)}),k}function ku(p,g){a(p).forEach(function(v){g.db.objectStoreNames.contains(v)||(Jt&&console.debug("Dexie: Creating missing table",v),os(g,v,p[v].primKey,p[v].indexes))})}function ea(p,g){p.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Ks(p,g,v){var E={};return T(g.objectStoreNames,0).forEach(function(k){for(var R=v.objectStore(k),z=Su(Rh(Y=R.keyPath),Y||"",!0,!1,!!R.autoIncrement,Y&&typeof Y!="string",!0),B=[],Q=0;Q<R.indexNames.length;++Q){var re=R.index(R.indexNames[Q]),Y=re.keyPath,re=Su(re.name,Y,!!re.unique,!!re.multiEntry,!1,Y&&typeof Y!="string",!1);B.push(re)}E[k]=Xa(k,z,B)}),E}function Ws(p,g,v){for(var E=v.db.objectStoreNames,k=0;k<E.length;++k){var R=E[k],z=v.objectStore(R);p._hasGetAll="getAll"in z;for(var B=0;B<z.indexNames.length;++B){var Q=z.indexNames[B],Y=z.index(Q).keyPath,re=typeof Y=="string"?Y:"["+T(Y).join("+")+"]";!g[R]||(Y=g[R].idxByName[re])&&(Y.name=Q,delete g[R].idxByName[re],g[R].idxByName[Q]=Y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function Cu(p){return p.split(",").map(function(g,v){var R=g.split(":"),E=(k=R[1])===null||k===void 0?void 0:k.trim(),k=(g=R[0].trim()).replace(/([&*]|\+\+)/g,""),R=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Su(k,R||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),l(R),v===0,E)})}var tl=(as.prototype._createTableSchema=Xa,as.prototype._parseIndexSyntax=Cu,as.prototype._parseStoresSpec=function(p,g){var v=this;a(p).forEach(function(E){if(p[E]!==null){var k=v._parseIndexSyntax(p[E]),R=k.shift();if(!R)throw new Oe.Schema("Invalid schema for table "+E+": "+p[E]);if(R.unique=!0,R.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");k.forEach(function(z){if(z.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),k=v._createTableSchema(E,R,k),g[E]=k}})},as.prototype.stores=function(v){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,v):v;var v=g._versions,E={},k={};return v.forEach(function(R){u(E,R._cfg.storesSource),k=R._cfg.dbschema={},R._parseStoresSpec(E,k)}),g._dbSchema=k,Hs(g,[g._allTables,g,g.Transaction.prototype]),qs(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],a(k),k),g._storeNames=a(k),this},as.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Xt(this._cfg.contentUpgrade||ut,p),this},as);function as(){}function nl(p,g){var v=p._dbNamesDB;return v||(v=p._dbNamesDB=new us(Ko,{addons:[],indexedDB:p,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function ti(p){return p&&typeof p.databases=="function"}function rl(p){return Kr(function(){return De.letThrough=!0,p()})}function il(p){return!("from"in p)}var sn=function(p,g){if(!this){var v=new sn;return p&&"d"in p&&u(v,p),v}u(this,arguments.length?{d:1,from:p,to:1<arguments.length?g:p}:{d:0})};function Gs(p,g,v){var E=tt(g,v);if(!isNaN(E)){if(0<E)throw RangeError();if(il(p))return u(p,{from:g,to:v,d:1});var k=p.l,E=p.r;if(tt(v,p.from)<0)return k?Gs(k,g,v):p.l={from:g,to:v,d:1,l:null,r:null},Au(p);if(0<tt(g,p.to))return E?Gs(E,g,v):p.r={from:g,to:v,d:1,l:null,r:null},Au(p);tt(g,p.from)<0&&(p.from=g,p.l=null,p.d=E?E.d+1:1),0<tt(v,p.to)&&(p.to=v,p.r=null,p.d=p.l?p.l.d+1:1),v=!p.r,k&&!p.l&&Ni(p,k),E&&v&&Ni(p,E)}}function Ni(p,g){il(g)||function v(E,Q){var R=Q.from,z=Q.to,B=Q.l,Q=Q.r;Gs(E,R,z),B&&v(E,B),Q&&v(E,Q)}(p,g)}function Pn(p,g){var v=ta(g),E=v.next();if(E.done)return!1;for(var k=E.value,R=ta(p),z=R.next(k.from),B=z.value;!E.done&&!z.done;){if(tt(B.from,k.to)<=0&&0<=tt(B.to,k.from))return!0;tt(k.from,B.from)<0?k=(E=v.next(B.from)).value:B=(z=R.next(k.from)).value}return!1}function ta(p){var g=il(p)?null:{s:0,n:p};return{next:function(v){for(var E=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,E)for(;g.n.l&&tt(v,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!E||tt(v,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Au(p){var g,v,E=(((g=p.r)===null||g===void 0?void 0:g.d)||0)-(((v=p.l)===null||v===void 0?void 0:v.d)||0),k=1<E?"r":E<-1?"l":"";k&&(g=k=="r"?"l":"r",v=i({},p),E=p[k],p.from=E.from,p.to=E.to,p[k]=E[k],v[k]=E[g],(p[g]=v).d=ls(v)),p.d=ls(p)}function ls(v){var g=v.r,v=v.l;return(g?v?Math.max(g.d,v.d):g.d:v?v.d:0)+1}function f(p,g){return a(g).forEach(function(v){p[v]?Ni(p[v],g[v]):p[v]=function E(k){var R,z,B={};for(R in k)h(k,R)&&(z=k[R],B[R]=!z||typeof z!="object"||V.has(z.constructor)?z:E(z));return B}(g[v])}),p}function x(p,g){return p.all||g.all||Object.keys(p).some(function(v){return g[v]&&Pn(g[v],p[v])})}m(sn.prototype,((Rr={add:function(p){return Ni(this,p),this},addKey:function(p){return Gs(this,p,p),this},addKeys:function(p){var g=this;return p.forEach(function(v){return Gs(g,v,v)}),this},hasKey:function(p){var g=ta(this).next(p).value;return g&&tt(g.from,p)<=0&&0<=tt(g.to,p)}})[Z]=function(){return ta(this)},Rr));var S={},F={},ae=!1;function fe(p){f(F,p),ae||(ae=!0,setTimeout(function(){ae=!1,Ie(F,!(F={}))},0))}function Ie(p,g){g===void 0&&(g=!1);var v=new Set;if(p.all)for(var E=0,k=Object.values(S);E<k.length;E++)Qe(z=k[E],p,v,g);else for(var R in p){var z,B=/^idb\:\/\/(.*)\/(.*)\//.exec(R);B&&(R=B[1],B=B[2],(z=S["idb://".concat(R,"/").concat(B)])&&Qe(z,p,v,g))}v.forEach(function(Q){return Q()})}function Qe(p,g,v,E){for(var k=[],R=0,z=Object.entries(p.queries.query);R<z.length;R++){for(var B=z[R],Q=B[0],Y=[],re=0,W=B[1];re<W.length;re++){var oe=W[re];x(g,oe.obsSet)?oe.subscribers.forEach(function(se){return v.add(se)}):E&&Y.push(oe)}E&&k.push([Q,Y])}if(E)for(var X=0,ee=k;X<ee.length;X++){var te=ee[X],Q=te[0],Y=te[1];p.queries.query[Q]=Y}}function Wt(p){var g=p._state,v=p._deps.indexedDB;if(g.isBeingOpened||p.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?Et(g.dbOpenError):p});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var E=g.openCanceller,k=Math.round(10*p.verno),R=!1;function z(){if(g.openCanceller!==E)throw new Oe.DatabaseClosed("db.open() was cancelled")}function B(){return new Ae(function(oe,X){if(z(),!v)throw new Oe.MissingAPI;var ee=p.name,te=g.autoSchema||!k?v.open(ee):v.open(ee,k);if(!te)throw new Oe.MissingAPI;te.onerror=Hn(X),te.onblocked=bt(p._fireOnBlocked),te.onupgradeneeded=bt(function(se){var ce;re=te.transaction,g.autoSchema&&!p._options.allowEmptyDB?(te.onerror=zs,re.abort(),te.result.close(),(ce=v.deleteDatabase(ee)).onsuccess=ce.onerror=bt(function(){X(new Oe.NoSuchDatabase("Database ".concat(ee," doesnt exist")))})):(re.onerror=Hn(X),se=se.oldVersion>Math.pow(2,62)?0:se.oldVersion,W=se<1,p.idbdb=te.result,R&&Gp(p,re),Za(p,se/10,re,X))},X),te.onsuccess=bt(function(){re=null;var se,ce,he,ge,ye,Te=p.idbdb=te.result,Pe=T(Te.objectStoreNames);if(0<Pe.length)try{var be=Te.transaction((ge=Pe).length===1?ge[0]:ge,"readonly");if(g.autoSchema)ce=Te,he=be,(se=p).verno=ce.version/10,he=se._dbSchema=Ks(0,ce,he),se._storeNames=T(ce.objectStoreNames,0),qs(se,[se._allTables],a(he),he);else if(Ws(p,p._dbSchema,be),((ye=el(Ks(0,(ye=p).idbdb,be),ye._dbSchema)).add.length||ye.change.some(function(Ce){return Ce.add.length||Ce.change.length}))&&!R)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Te.close(),k=Te.version+1,R=!0,oe(B());Zo(p,be)}catch{}rs.push(p),Te.onversionchange=bt(function(Ce){g.vcFired=!0,p.on("versionchange").fire(Ce)}),Te.onclose=bt(function(){p.close({disableAutoOpen:!1})}),W&&(ye=p._deps,be=ee,Te=ye.indexedDB,ye=ye.IDBKeyRange,ti(Te)||be===Ko||nl(Te,ye).put({name:be}).catch(ut)),oe()},X)}).catch(function(oe){switch(oe==null?void 0:oe.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<k)return k=0,B()}return Ae.reject(oe)})}var Q,Y=g.dbReadyResolve,re=null,W=!1;return Ae.race([E,(typeof navigator>"u"?Ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(oe){function X(){return indexedDB.databases().finally(oe)}Q=setInterval(X,100),X()}).finally(function(){return clearInterval(Q)}):Promise.resolve()).then(B)]).then(function(){return z(),g.onReadyBeingFired=[],Ae.resolve(rl(function(){return p.on.ready.fire(p.vip)})).then(function oe(){if(0<g.onReadyBeingFired.length){var X=g.onReadyBeingFired.reduce(Xt,ut);return g.onReadyBeingFired=[],Ae.resolve(rl(function(){return X(p.vip)})).then(oe)}})}).finally(function(){g.openCanceller===E&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(oe){g.dbOpenError=oe;try{re&&re.abort()}catch{}return E===g.openCanceller&&p._close(),Et(oe)}).finally(function(){g.openComplete=!0,Y()}).then(function(){var oe;return W&&(oe={},p.tables.forEach(function(X){X.schema.indexes.forEach(function(ee){ee.name&&(oe["idb://".concat(p.name,"/").concat(X.name,"/").concat(ee.name)]=new sn(-1/0,[[[]]]))}),oe["idb://".concat(p.name,"/").concat(X.name,"/")]=oe["idb://".concat(p.name,"/").concat(X.name,"/:dels")]=new sn(-1/0,[[[]]])}),ei(Zr).fire(oe),Ie(oe,!0)),p})}function dt(p){function g(R){return p.next(R)}var v=k(g),E=k(function(R){return p.throw(R)});function k(R){return function(Q){var B=R(Q),Q=B.value;return B.done?Q:Q&&typeof Q.then=="function"?Q.then(v,E):l(Q)?Promise.all(Q).then(v,E):v(Q)}}return k(g)()}function Dt(p,g,v){for(var E=l(p)?p.slice():[p],k=0;k<v;++k)E.push(g);return E}var Nr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return i(i({},p),{table:function(g){var v=p.table(g),E=v.schema,k={},R=[];function z(W,oe,X){var ee=Bs(W),te=k[ee]=k[ee]||[],se=W==null?0:typeof W=="string"?1:W.length,ce=0<oe,ce=i(i({},X),{name:ce?"".concat(ee,"(virtual-from:").concat(X.name,")"):X.name,lowLevelIndex:X,isVirtual:ce,keyTail:oe,keyLength:se,extractKey:Ja(W),unique:!ce&&X.unique});return te.push(ce),ce.isPrimaryKey||R.push(ce),1<se&&z(se===2?W[0]:W.slice(0,se-1),oe+1,X),te.sort(function(he,ge){return he.keyTail-ge.keyTail}),ce}g=z(E.primaryKey.keyPath,0,E.primaryKey),k[":id"]=[g];for(var B=0,Q=E.indexes;B<Q.length;B++){var Y=Q[B];z(Y.keyPath,0,Y)}function re(W){var oe,X=W.query.index;return X.isVirtual?i(i({},W),{query:{index:X.lowLevelIndex,range:(oe=W.query.range,X=X.keyTail,{type:oe.type===1?2:oe.type,lower:Dt(oe.lower,oe.lowerOpen?p.MAX_KEY:p.MIN_KEY,X),lowerOpen:!0,upper:Dt(oe.upper,oe.upperOpen?p.MIN_KEY:p.MAX_KEY,X),upperOpen:!0})}}):W}return i(i({},v),{schema:i(i({},E),{primaryKey:g,indexes:R,getIndexByKeyPath:function(W){return(W=k[Bs(W)])&&W[0]}}),count:function(W){return v.count(re(W))},query:function(W){return v.query(re(W))},openCursor:function(W){var oe=W.query.index,X=oe.keyTail,ee=oe.isVirtual,te=oe.keyLength;return ee?v.openCursor(re(W)).then(function(ce){return ce&&se(ce)}):v.openCursor(W);function se(ce){return Object.create(ce,{continue:{value:function(he){he!=null?ce.continue(Dt(he,W.reverse?p.MAX_KEY:p.MIN_KEY,X)):W.unique?ce.continue(ce.key.slice(0,te).concat(W.reverse?p.MIN_KEY:p.MAX_KEY,X)):ce.continue()}},continuePrimaryKey:{value:function(he,ge){ce.continuePrimaryKey(Dt(he,p.MAX_KEY,X),ge)}},primaryKey:{get:function(){return ce.primaryKey}},key:{get:function(){var he=ce.key;return te===1?he[0]:he.slice(0,te)}},value:{get:function(){return ce.value}}})}}})}})}};function ni(p,g,v,E){return v=v||{},E=E||"",a(p).forEach(function(k){var R,z,B;h(g,k)?(R=p[k],z=g[k],typeof R=="object"&&typeof z=="object"&&R&&z?(B=G(R))!==G(z)?v[E+k]=g[k]:B==="Object"?ni(R,z,v,E+k+"."):R!==z&&(v[E+k]=g[k]):R!==z&&(v[E+k]=g[k])):v[E+k]=void 0}),a(g).forEach(function(k){h(p,k)||(v[E+k]=g[k])}),v}function Pr(p,g){return g.type==="delete"?g.keys:g.keys||g.values.map(p.extractKey)}var Pi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return i(i({},p),{table:function(g){var v=p.table(g),E=v.schema.primaryKey;return i(i({},v),{mutate:function(k){var R=De.trans,z=R.table(g).hook,B=z.deleting,Q=z.creating,Y=z.updating;switch(k.type){case"add":if(Q.fire===ut)break;return R._promise("readwrite",function(){return re(k)},!0);case"put":if(Q.fire===ut&&Y.fire===ut)break;return R._promise("readwrite",function(){return re(k)},!0);case"delete":if(B.fire===ut)break;return R._promise("readwrite",function(){return re(k)},!0);case"deleteRange":if(B.fire===ut)break;return R._promise("readwrite",function(){return function W(oe,X,ee){return v.query({trans:oe,values:!1,query:{index:E,range:X},limit:ee}).then(function(te){var se=te.result;return re({type:"delete",keys:se,trans:oe}).then(function(ce){return 0<ce.numFailures?Promise.reject(ce.failures[0]):se.length<ee?{failures:[],numFailures:0,lastResult:void 0}:W(oe,i(i({},X),{lower:se[se.length-1],lowerOpen:!0}),ee)})})}(k.trans,k.range,1e4)},!0)}return v.mutate(k);function re(W){var oe,X,ee,te=De.trans,se=W.keys||Pr(E,W);if(!se)throw new Error("Keys missing");return(W=W.type==="add"||W.type==="put"?i(i({},W),{keys:se}):i({},W)).type!=="delete"&&(W.values=s([],W.values)),W.keys&&(W.keys=s([],W.keys)),oe=v,ee=se,((X=W).type==="add"?Promise.resolve([]):oe.getMany({trans:X.trans,keys:ee,cache:"immutable"})).then(function(ce){var he=se.map(function(ge,ye){var Te,Pe,be,Ce=ce[ye],Re={onerror:null,onsuccess:null};return W.type==="delete"?B.fire.call(Re,ge,Ce,te):W.type==="add"||Ce===void 0?(Te=Q.fire.call(Re,ge,W.values[ye],te),ge==null&&Te!=null&&(W.keys[ye]=ge=Te,E.outbound||A(W.values[ye],E.keyPath,ge))):(Te=ni(Ce,W.values[ye]),(Pe=Y.fire.call(Re,Te,ge,Ce,te))&&(be=W.values[ye],Object.keys(Pe).forEach(function(Ne){h(be,Ne)?be[Ne]=Pe[Ne]:A(be,Ne,Pe[Ne])}))),Re});return v.mutate(W).then(function(ge){for(var ye=ge.failures,Te=ge.results,Pe=ge.numFailures,ge=ge.lastResult,be=0;be<se.length;++be){var Ce=(Te||se)[be],Re=he[be];Ce==null?Re.onerror&&Re.onerror(ye[be]):Re.onsuccess&&Re.onsuccess(W.type==="put"&&ce[be]?W.values[be]:Ce)}return{failures:ye,results:Te,numFailures:Pe,lastResult:ge}}).catch(function(ge){return he.forEach(function(ye){return ye.onerror&&ye.onerror(ge)}),Promise.reject(ge)})})}}})}})}};function na(p,g,v){try{if(!g||g.keys.length<p.length)return null;for(var E=[],k=0,R=0;k<g.keys.length&&R<p.length;++k)tt(g.keys[k],p[R])===0&&(E.push(v?j(g.values[k]):g.values[k]),++R);return E.length===p.length?E:null}catch{return null}}var Nu={stack:"dbcore",level:-1,create:function(p){return{table:function(g){var v=p.table(g);return i(i({},v),{getMany:function(E){if(!E.cache)return v.getMany(E);var k=na(E.keys,E.trans._cache,E.cache==="clone");return k?Ae.resolve(k):v.getMany(E).then(function(R){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?j(R):R},R})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),v.mutate(E)}})}}}};function a_(p,g){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function l_(p,g){switch(p){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var EC={stack:"dbcore",level:0,name:"Observability",create:function(p){var g=p.schema.name,v=new sn(p.MIN_KEY,p.MAX_KEY);return i(i({},p),{transaction:function(E,k,R){if(De.subscr&&k!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(De.querier));return p.transaction(E,k,R)},table:function(E){var k=p.table(E),R=k.schema,z=R.primaryKey,W=R.indexes,B=z.extractKey,Q=z.outbound,Y=z.autoIncrement&&W.filter(function(X){return X.compound&&X.keyPath.includes(z.keyPath)}),re=i(i({},k),{mutate:function(X){function ee(Ne){return Ne="idb://".concat(g,"/").concat(E,"/").concat(Ne),ge[Ne]||(ge[Ne]=new sn)}var te,se,ce,he=X.trans,ge=X.mutatedParts||(X.mutatedParts={}),ye=ee(""),Te=ee(":dels"),Pe=X.type,Re=X.type==="deleteRange"?[X.range]:X.type==="delete"?[X.keys]:X.values.length<50?[Pr(z,X).filter(function(Ne){return Ne}),X.values]:[],be=Re[0],Ce=Re[1],Re=X.trans._cache;return l(be)?(ye.addKeys(be),(Re=Pe==="delete"||be.length===Ce.length?na(be,Re):null)||Te.addKeys(be),(Re||Ce)&&(te=ee,se=Re,ce=Ce,R.indexes.forEach(function(Ne){var Ve=te(Ne.name||"");function Xe(et){return et!=null?Ne.extractKey(et):null}function Je(et){return Ne.multiEntry&&l(et)?et.forEach(function(pr){return Ve.addKey(pr)}):Ve.addKey(et)}(se||ce).forEach(function(et,Rn){var Ye=se&&Xe(se[Rn]),Rn=ce&&Xe(ce[Rn]);tt(Ye,Rn)!==0&&(Ye!=null&&Je(Ye),Rn!=null&&Je(Rn))})}))):be?(Ce={from:(Ce=be.lower)!==null&&Ce!==void 0?Ce:p.MIN_KEY,to:(Ce=be.upper)!==null&&Ce!==void 0?Ce:p.MAX_KEY},Te.add(Ce),ye.add(Ce)):(ye.add(v),Te.add(v),R.indexes.forEach(function(Ne){return ee(Ne.name).add(v)})),k.mutate(X).then(function(Ne){return!be||X.type!=="add"&&X.type!=="put"||(ye.addKeys(Ne.results),Y&&Y.forEach(function(Ve){for(var Xe=X.values.map(function(Ye){return Ve.extractKey(Ye)}),Je=Ve.keyPath.findIndex(function(Ye){return Ye===z.keyPath}),et=0,pr=Ne.results.length;et<pr;++et)Xe[et][Je]=Ne.results[et];ee(Ve.name).addKeys(Xe)})),he.mutatedParts=f(he.mutatedParts||{},ge),Ne})}}),W=function(ee){var te=ee.query,ee=te.index,te=te.range;return[ee,new sn((ee=te.lower)!==null&&ee!==void 0?ee:p.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:p.MAX_KEY)]},oe={get:function(X){return[z,new sn(X.key)]},getMany:function(X){return[z,new sn().addKeys(X.keys)]},count:W,query:W,openCursor:W};return a(oe).forEach(function(X){re[X]=function(ee){var te=De.subscr,se=!!te,ce=a_(De,k)&&l_(X,ee)?ee.obsSet={}:te;if(se){var he=function(Ce){return Ce="idb://".concat(g,"/").concat(E,"/").concat(Ce),ce[Ce]||(ce[Ce]=new sn)},ge=he(""),ye=he(":dels"),te=oe[X](ee),se=te[0],te=te[1];if((X==="query"&&se.isPrimaryKey&&!ee.values?ye:he(se.name||"")).add(te),!se.isPrimaryKey){if(X!=="count"){var Te=X==="query"&&Q&&ee.values&&k.query(i(i({},ee),{values:!1}));return k[X].apply(this,arguments).then(function(Ce){if(X==="query"){if(Q&&ee.values)return Te.then(function(Xe){return Xe=Xe.result,ge.addKeys(Xe),Ce});var Re=ee.values?Ce.result.map(B):Ce.result;(ee.values?ge:ye).addKeys(Re)}else if(X==="openCursor"){var Ne=Ce,Ve=ee.values;return Ne&&Object.create(Ne,{key:{get:function(){return ye.addKey(Ne.primaryKey),Ne.key}},primaryKey:{get:function(){var Xe=Ne.primaryKey;return ye.addKey(Xe),Xe}},value:{get:function(){return Ve&&ge.addKey(Ne.primaryKey),Ne.value}}})}return Ce})}ye.add(v)}}return k[X].apply(this,arguments)}}),re}})}};function u_(p,g,v){if(v.numFailures===0)return g;if(g.type==="deleteRange")return null;var E=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return v.numFailures===E?null:(g=i({},g),l(g.keys)&&(g.keys=g.keys.filter(function(k,R){return!(R in v.failures)})),"values"in g&&l(g.values)&&(g.values=g.values.filter(function(k,R){return!(R in v.failures)})),g)}function Qp(p,g){return v=p,((E=g).lower===void 0||(E.lowerOpen?0<tt(v,E.lower):0<=tt(v,E.lower)))&&(p=p,(g=g).upper===void 0||(g.upperOpen?tt(p,g.upper)<0:tt(p,g.upper)<=0));var v,E}function c_(p,g,oe,E,k,R){if(!oe||oe.length===0)return p;var z=g.query.index,B=z.multiEntry,Q=g.query.range,Y=E.schema.primaryKey.extractKey,re=z.extractKey,W=(z.lowLevelIndex||z).extractKey,oe=oe.reduce(function(X,ee){var te=X,se=[];if(ee.type==="add"||ee.type==="put")for(var ce=new sn,he=ee.values.length-1;0<=he;--he){var ge,ye=ee.values[he],Te=Y(ye);ce.hasKey(Te)||(ge=re(ye),(B&&l(ge)?ge.some(function(Ne){return Qp(Ne,Q)}):Qp(ge,Q))&&(ce.addKey(Te),se.push(ye)))}switch(ee.type){case"add":var Pe=new sn().addKeys(g.values?X.map(function(Ve){return Y(Ve)}):X),te=X.concat(g.values?se.filter(function(Ve){return Ve=Y(Ve),!Pe.hasKey(Ve)&&(Pe.addKey(Ve),!0)}):se.map(function(Ve){return Y(Ve)}).filter(function(Ve){return!Pe.hasKey(Ve)&&(Pe.addKey(Ve),!0)}));break;case"put":var be=new sn().addKeys(ee.values.map(function(Ve){return Y(Ve)}));te=X.filter(function(Ve){return!be.hasKey(g.values?Y(Ve):Ve)}).concat(g.values?se:se.map(function(Ve){return Y(Ve)}));break;case"delete":var Ce=new sn().addKeys(ee.keys);te=X.filter(function(Ve){return!Ce.hasKey(g.values?Y(Ve):Ve)});break;case"deleteRange":var Re=ee.range;te=X.filter(function(Ve){return!Qp(Y(Ve),Re)})}return te},p);return oe===p?p:(oe.sort(function(X,ee){return tt(W(X),W(ee))||tt(Y(X),Y(ee))}),g.limit&&g.limit<1/0&&(oe.length>g.limit?oe.length=g.limit:p.length===g.limit&&oe.length<g.limit&&(k.dirty=!0)),R?Object.freeze(oe):oe)}function h_(p,g){return tt(p.lower,g.lower)===0&&tt(p.upper,g.upper)===0&&!!p.lowerOpen==!!g.lowerOpen&&!!p.upperOpen==!!g.upperOpen}function TC(p,g){return function(v,E,k,R){if(v===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=tt(v,E))===0){if(k&&R)return 0;if(k)return 1;if(R)return-1}return E}(p.lower,g.lower,p.lowerOpen,g.lowerOpen)<=0&&0<=function(v,E,k,R){if(v===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=tt(v,E))===0){if(k&&R)return 0;if(k)return-1;if(R)return 1}return E}(p.upper,g.upper,p.upperOpen,g.upperOpen)}function IC(p,g,v,E){p.subscribers.add(v),E.addEventListener("abort",function(){var k,R;p.subscribers.delete(v),p.subscribers.size===0&&(k=p,R=g,setTimeout(function(){k.subscribers.size===0&&ne(R,k)},3e3))})}var SC={stack:"dbcore",level:0,name:"Cache",create:function(p){var g=p.schema.name;return i(i({},p),{transaction:function(v,E,k){var R,z,B=p.transaction(v,E,k);return E==="readwrite"&&(z=(R=new AbortController).signal,k=function(Q){return function(){if(R.abort(),E==="readwrite"){for(var Y=new Set,re=0,W=v;re<W.length;re++){var oe=W[re],X=S["idb://".concat(g,"/").concat(oe)];if(X){var ee=p.table(oe),te=X.optimisticOps.filter(function(Ve){return Ve.trans===B});if(B._explicit&&Q&&B.mutatedParts)for(var se=0,ce=Object.values(X.queries.query);se<ce.length;se++)for(var he=0,ge=(Pe=ce[se]).slice();he<ge.length;he++)x((be=ge[he]).obsSet,B.mutatedParts)&&(ne(Pe,be),be.subscribers.forEach(function(Ve){return Y.add(Ve)}));else if(0<te.length){X.optimisticOps=X.optimisticOps.filter(function(Ve){return Ve.trans!==B});for(var ye=0,Te=Object.values(X.queries.query);ye<Te.length;ye++)for(var Pe,be,Ce,Re=0,Ne=(Pe=Te[ye]).slice();Re<Ne.length;Re++)(be=Ne[Re]).res!=null&&B.mutatedParts&&(Q&&!be.dirty?(Ce=Object.isFrozen(be.res),Ce=c_(be.res,be.req,te,ee,be,Ce),be.dirty?(ne(Pe,be),be.subscribers.forEach(function(Ve){return Y.add(Ve)})):Ce!==be.res&&(be.res=Ce,be.promise=Ae.resolve({result:Ce}))):(be.dirty&&ne(Pe,be),be.subscribers.forEach(function(Ve){return Y.add(Ve)})))}}}Y.forEach(function(Ve){return Ve()})}}},B.addEventListener("abort",k(!1),{signal:z}),B.addEventListener("error",k(!1),{signal:z}),B.addEventListener("complete",k(!0),{signal:z})),B},table:function(v){var E=p.table(v),k=E.schema.primaryKey;return i(i({},E),{mutate:function(R){var z=De.trans;if(k.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return E.mutate(R);var B=S["idb://".concat(g,"/").concat(v)];return B?(z=E.mutate(R),R.type!=="add"&&R.type!=="put"||!(50<=R.values.length||Pr(k,R).some(function(Q){return Q==null}))?(B.optimisticOps.push(R),R.mutatedParts&&fe(R.mutatedParts),z.then(function(Q){0<Q.numFailures&&(ne(B.optimisticOps,R),(Q=u_(0,R,Q))&&B.optimisticOps.push(Q),R.mutatedParts&&fe(R.mutatedParts))}),z.catch(function(){ne(B.optimisticOps,R),R.mutatedParts&&fe(R.mutatedParts)})):z.then(function(Q){var Y=u_(0,i(i({},R),{values:R.values.map(function(re,W){var oe;return Q.failures[W]?re:(re=(oe=k.keyPath)!==null&&oe!==void 0&&oe.includes(".")?j(re):i({},re),A(re,k.keyPath,Q.results[W]),re)})}),Q);B.optimisticOps.push(Y),queueMicrotask(function(){return R.mutatedParts&&fe(R.mutatedParts)})}),z):E.mutate(R)},query:function(R){if(!a_(De,E)||!l_("query",R))return E.query(R);var z=((Y=De.trans)===null||Y===void 0?void 0:Y.db._options.cache)==="immutable",W=De,B=W.requery,Q=W.signal,Y=function(ee,te,se,ce){var he=S["idb://".concat(ee,"/").concat(te)];if(!he)return[];if(!(te=he.queries[se]))return[null,!1,he,null];var ge=te[(ce.query?ce.query.index.name:null)||""];if(!ge)return[null,!1,he,null];switch(se){case"query":var ye=ge.find(function(Te){return Te.req.limit===ce.limit&&Te.req.values===ce.values&&h_(Te.req.query.range,ce.query.range)});return ye?[ye,!0,he,ge]:[ge.find(function(Te){return("limit"in Te.req?Te.req.limit:1/0)>=ce.limit&&(!ce.values||Te.req.values)&&TC(Te.req.query.range,ce.query.range)}),!1,he,ge];case"count":return ye=ge.find(function(Te){return h_(Te.req.query.range,ce.query.range)}),[ye,!!ye,he,ge]}}(g,v,"query",R),re=Y[0],W=Y[1],oe=Y[2],X=Y[3];return re&&W?re.obsSet=R.obsSet:(W=E.query(R).then(function(ee){var te=ee.result;if(re&&(re.res=te),z){for(var se=0,ce=te.length;se<ce;++se)Object.freeze(te[se]);Object.freeze(te)}else ee.result=j(te);return ee}).catch(function(ee){return X&&re&&ne(X,re),Promise.reject(ee)}),re={obsSet:R.obsSet,promise:W,subscribers:new Set,type:"query",req:R,dirty:!1},X?X.push(re):(X=[re],(oe=oe||(S["idb://".concat(g,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[R.query.index.name||""]=X)),IC(re,X,B,Q),re.promise.then(function(ee){return{result:c_(ee.result,R,oe==null?void 0:oe.optimisticOps,E,re,z)}})}})}})}};function jh(p,g){return new Proxy(p,{get:function(v,E,k){return E==="db"?g:Reflect.get(v,E,k)}})}var us=(Gt.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Oe.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var g=this._versions,v=g.filter(function(E){return E._cfg.version===p})[0];return v||(v=new this.Version(p),g.push(v),g.sort(Oh),v.stores({}),this._state.autoSchema=!1,v)},Gt.prototype._whenReady=function(p){var g=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?p():new Ae(function(v,E){if(g._state.openComplete)return E(new Oe.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void E(new Oe.DatabaseClosed);g.open().catch(ut)}g._state.dbReadyPromise.then(v,E)}).then(p)},Gt.prototype.use=function(p){var g=p.stack,v=p.create,E=p.level,k=p.name;return k&&this.unuse({stack:g,name:k}),p=this._middlewares[g]||(this._middlewares[g]=[]),p.push({stack:g,create:v,level:E??10,name:k}),p.sort(function(R,z){return R.level-z.level}),this},Gt.prototype.unuse=function(p){var g=p.stack,v=p.name,E=p.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(k){return E?k.create!==E:!!v&&k.name!==v})),this},Gt.prototype.open=function(){var p=this;return Ar(An,function(){return Wt(p)})},Gt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,g=rs.indexOf(this);if(0<=g&&rs.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new Ae(function(v){p.dbReadyResolve=v}),p.openCanceller=new Ae(function(v,E){p.cancelOpen=E}))},Gt.prototype.close=function(v){var g=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;g?(v.isBeingOpened&&v.cancelOpen(new Oe.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new Oe.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Gt.prototype.delete=function(p){var g=this;p===void 0&&(p={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ae(function(k,R){function z(){g.close(p);var B=g._deps.indexedDB.deleteDatabase(g.name);B.onsuccess=bt(function(){var Q,Y,re;Q=g._deps,Y=g.name,re=Q.indexedDB,Q=Q.IDBKeyRange,ti(re)||Y===Ko||nl(re,Q).delete(Y).catch(ut),k()}),B.onerror=Hn(R),B.onblocked=g._fireOnBlocked}if(v)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(z):z()})},Gt.prototype.backendDB=function(){return this.idbdb},Gt.prototype.isOpen=function(){return this.idbdb!==null},Gt.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},Gt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Gt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Gt.prototype,"tables",{get:function(){var p=this;return a(this._allTables).map(function(g){return p._allTables[g]})},enumerable:!1,configurable:!0}),Gt.prototype.transaction=function(){var p=(function(g,v,E){var k=arguments.length;if(k<2)throw new Oe.InvalidArgument("Too few arguments");for(var R=new Array(k-1);--k;)R[k-1]=arguments[k];return E=R.pop(),[g,L(R),E]}).apply(this,arguments);return this._transaction.apply(this,p)},Gt.prototype._transaction=function(p,g,v){var E=this,k=De.trans;k&&k.db===this&&p.indexOf("!")===-1||(k=null);var R,z,B=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(z=g.map(function(Y){if(Y=Y instanceof E.Table?Y.name:Y,typeof Y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Y}),p=="r"||p===Wa)R=Wa;else{if(p!="rw"&&p!=Wo)throw new Oe.InvalidArgument("Invalid transaction mode: "+p);R=Wo}if(k){if(k.mode===Wa&&R===Wo){if(!B)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&z.forEach(function(Y){if(k&&k.storeNames.indexOf(Y)===-1){if(!B)throw new Oe.SubTransaction("Table "+Y+" not included in parent transaction.");k=null}}),B&&k&&!k.active&&(k=null)}}catch(Y){return k?k._promise(null,function(re,W){W(Y)}):Et(Y)}var Q=(function Y(re,W,oe,X,ee){return Ae.resolve().then(function(){var te=De.transless||De,se=re._createTransaction(W,oe,re._dbSchema,X);if(se.explicit=!0,te={trans:se,transless:te},X)se.idbtrans=X.idbtrans;else try{se.create(),se.idbtrans._explicit=!0,re._state.PR1398_maxLoop=3}catch(ge){return ge.name===je.InvalidState&&re.isOpen()&&0<--re._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),re.close({disableAutoOpen:!1}),re.open().then(function(){return Y(re,W,oe,null,ee)})):Et(ge)}var ce,he=ue(ee);return he&&Ti(),te=Ae.follow(function(){var ge;(ce=ee.call(se,se))&&(he?(ge=Cr.bind(null,null),ce.then(ge,ge)):typeof ce.next=="function"&&typeof ce.throw=="function"&&(ce=dt(ce)))},te),(ce&&typeof ce.then=="function"?Ae.resolve(ce).then(function(ge){return se.active?ge:Et(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return ce})).then(function(ge){return X&&se._resolve(),se._completion.then(function(){return ge})}).catch(function(ge){return se._reject(ge),Et(ge)})})}).bind(null,this,R,z,k,v);return k?k._promise(R,Q,"lock"):De.trans?Ar(De.transless,function(){return E._whenReady(Q)}):this._whenReady(Q)},Gt.prototype.table=function(p){if(!h(this._allTables,p))throw new Oe.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},Gt);function Gt(p,g){var v=this;this._middlewares={},this.verno=0;var E=Gt.dependencies;this._options=g=i({addons:Gt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},E=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var k,R,z,B,Q,Y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ut,dbReadyPromise:null,cancelOpen:ut,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};Y.dbReadyPromise=new Ae(function(W){Y.dbReadyResolve=W}),Y.openCanceller=new Ae(function(W,oe){Y.cancelOpen=oe}),this._state=Y,this.name=p,this.on=Xr(this,"populate","blocked","versionchange","close",{ready:[Xt,ut]}),this.once=function(W,oe){var X=function(){for(var ee=[],te=0;te<arguments.length;te++)ee[te]=arguments[te];v.on(W).unsubscribe(X),oe.apply(v,ee)};return v.on(W,X)},this.on.ready.subscribe=N(this.on.ready.subscribe,function(W){return function(oe,X){Gt.vip(function(){var ee,te=v._state;te.openComplete?(te.dbOpenError||Ae.resolve().then(oe),X&&W(oe)):te.onReadyBeingFired?(te.onReadyBeingFired.push(oe),X&&W(oe)):(W(oe),ee=v,X||W(function se(){ee.on.ready.unsubscribe(oe),ee.on.ready.unsubscribe(se)}))})}}),this.Collection=(k=this,Yo(Ch.prototype,function(ce,se){this.db=k;var X=wu,ee=null;if(se)try{X=se()}catch(he){ee=he}var te=ce._ctx,se=te.table,ce=se.hook.reading.fire;this._ctx={table:se,index:te.index,isPrimKey:!te.index||se.schema.primKey.keyPath&&te.index===se.schema.primKey.name,range:X,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ee,or:te.or,valueMapper:ce!==Se?ce:null}})),this.Table=(R=this,Yo(Qo.prototype,function(W,oe,X){this.db=R,this._tx=X,this.name=W,this.schema=oe,this.hook=R._allTables[W]?R._allTables[W].hook:Xr(null,{creating:[Cn,ut],reading:[Ze,Se],updating:[gu,ut],deleting:[$o,ut]})})),this.Transaction=(z=this,Yo(Iu.prototype,function(W,oe,X,ee,te){var se=this;W!=="readonly"&&oe.forEach(function(ce){ce=(ce=X[ce])===null||ce===void 0?void 0:ce.yProps,ce&&(oe=oe.concat(ce.map(function(he){return he.updatesTable})))}),this.db=z,this.mode=W,this.storeNames=oe,this.schema=X,this.chromeTransactionDurability=ee,this.idbtrans=null,this.on=Xr(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ae(function(ce,he){se._resolve=ce,se._reject=he}),this._completion.then(function(){se.active=!1,se.on.complete.fire()},function(ce){var he=se.active;return se.active=!1,se.on.error.fire(ce),se.parent?se.parent._reject(ce):he&&se.idbtrans&&se.idbtrans.abort(),Et(ce)})})),this.Version=(B=this,Yo(tl.prototype,function(W){this.db=B,this._cfg={version:W,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Q=this,Yo(Ph.prototype,function(W,oe,X){if(this.db=Q,this._ctx={table:W,index:oe===":id"?null:oe,or:X},this._cmp=this._ascending=tt,this._descending=function(ee,te){return tt(te,ee)},this._max=function(ee,te){return 0<tt(ee,te)?ee:te},this._min=function(ee,te){return tt(ee,te)<0?ee:te},this._IDBKeyRange=Q._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(W){0<W.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(W){!W.newVersion||W.newVersion<W.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(W.oldVersion/10))}),this._maxKey=$s(g.IDBKeyRange),this._createTransaction=function(W,oe,X,ee){return new v.Transaction(W,oe,X,v._options.chromeTransactionDurability,ee)},this._fireOnBlocked=function(W){v.on("blocked").fire(W),rs.filter(function(oe){return oe.name===v.name&&oe!==v&&!oe._state.vcFired}).map(function(oe){return oe.on("versionchange").fire(W)})},this.use(Nu),this.use(SC),this.use(EC),this.use(Nr),this.use(Pi);var re=new Proxy(this,{get:function(W,oe,X){if(oe==="_vip")return!0;if(oe==="table")return function(te){return jh(v.table(te),re)};var ee=Reflect.get(W,oe,X);return ee instanceof Qo?jh(ee,re):oe==="tables"?ee.map(function(te){return jh(te,re)}):oe==="_createTransaction"?function(){return jh(ee.apply(this,arguments),re)}:ee}});this.vip=re,E.forEach(function(W){return W(v)})}var Dh,Rr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kC=(Yp.prototype.subscribe=function(p,g,v){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:g,complete:v})},Yp.prototype[Rr]=function(){return this},Yp);function Yp(p){this._subscribe=p}try{Dh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Dh={indexedDB:null,IDBKeyRange:null}}function f_(p){var g,v=!1,E=new kC(function(k){var R=ue(p),z,B=!1,Q={},Y={},re={get closed(){return B},unsubscribe:function(){B||(B=!0,z&&z.abort(),W&&ei.storagemutated.unsubscribe(X))}};k.start&&k.start(re);var W=!1,oe=function(){return Ho(ee)},X=function(te){f(Q,te),x(Y,Q)&&oe()},ee=function(){var te,se,ce;!B&&Dh.indexedDB&&(Q={},te={},z&&z.abort(),z=new AbortController,ce=function(he){var ge=cr();try{R&&Ti();var ye=Kr(p,he);return ye=R?ye.finally(Cr):ye}finally{ge&&Fs()}}(se={subscr:te,signal:z.signal,requery:oe,querier:p,trans:null}),Promise.resolve(ce).then(function(he){v=!0,g=he,B||se.signal.aborted||(Q={},function(ge){for(var ye in ge)if(h(ge,ye))return;return 1}(Y=te)||W||(ei(Zr,X),W=!0),Ho(function(){return!B&&k.next&&k.next(he)}))},function(he){v=!1,["DatabaseClosedError","AbortError"].includes(he==null?void 0:he.name)||B||Ho(function(){B||k.error&&k.error(he)})}))};return setTimeout(oe,0),re});return E.hasValue=function(){return v},E.getValue=function(){return g},E}var ra=us;function Xp(p){var g=Qs;try{Qs=!0,ei.storagemutated.fire(p),Ie(p,!0)}finally{Qs=g}}m(ra,i(i({},dn),{delete:function(p){return new ra(p,{addons:[]}).delete()},exists:function(p){return new ra(p,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return g=ra.dependencies,v=g.indexedDB,g=g.IDBKeyRange,(ti(v)?Promise.resolve(v.databases()).then(function(E){return E.map(function(k){return k.name}).filter(function(k){return k!==Ko})}):nl(v,g).toCollection().primaryKeys()).then(p)}catch{return Et(new Oe.MissingAPI)}var g,v},defineClass:function(){return function(p){u(this,p)}},ignoreTransaction:function(p){return De.trans?Ar(De.transless,p):p()},vip:rl,async:function(p){return function(){try{var g=dt(p.apply(this,arguments));return g&&typeof g.then=="function"?g:Ae.resolve(g)}catch(v){return Et(v)}}},spawn:function(p,g,v){try{var E=dt(p.apply(v,g||[]));return E&&typeof E.then=="function"?E:Ae.resolve(E)}catch(k){return Et(k)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(p,g){return g=Ae.resolve(typeof p=="function"?ra.ignoreTransaction(p):p).timeout(g||6e4),De.trans?De.trans.waitFor(g):g},Promise:Ae,debug:{get:function(){return Jt},set:function(p){Bo(p)}},derive:I,extend:u,props:m,override:N,Events:Xr,on:ei,liveQuery:f_,extendObservabilitySet:f,getByKeyPath:U,setByKeyPath:A,delByKeyPath:function(p,g){typeof g=="string"?A(p,g,void 0):"length"in g&&[].map.call(g,function(v){A(p,v,void 0)})},shallowClone:C,deepClone:j,getObjectDiff:ni,cmp:tt,asap:M,minKey:-1/0,addons:[],connections:rs,errnames:je,dependencies:Dh,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(p){return parseInt(p)}).reduce(function(p,g,v){return p+g/Math.pow(10,2*v)})})),ra.maxKey=$s(ra.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ei(Zr,function(p){Qs||(p=new CustomEvent(ss,{detail:p}),Qs=!0,dispatchEvent(p),Qs=!1)}),addEventListener(ss,function(p){p=p.detail,Qs||Xp(p)}));var sl,Qs=!1,d_=function(){};return typeof BroadcastChannel<"u"&&((d_=function(){(sl=new BroadcastChannel(ss)).onmessage=function(p){return p.data&&Xp(p.data)}})(),typeof sl.unref=="function"&&sl.unref(),ei(Zr,function(p){Qs||sl.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!us.disableBfCache&&p.persisted){Jt&&console.debug("Dexie: handling persisted pagehide"),sl!=null&&sl.close();for(var g=0,v=rs;g<v.length;g++)v[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!us.disableBfCache&&p.persisted&&(Jt&&console.debug("Dexie: handling persisted pageshow"),d_(),Xp({all:new sn(-1/0,[[]])}))})),Ae.rejectionMapper=function(p,g){return!p||p instanceof le||p instanceof TypeError||p instanceof SyntaxError||!p.name||!fn[p.name]?p:(g=new fn[p.name](g||p.message,p),"stack"in p&&w(g,"stack",{get:function(){return this.inner.stack}}),g)},Bo(Jt),i(us,Object.freeze({__proto__:null,Dexie:us,liveQuery:f_,Entity:xu,cmp:tt,PropModification:Yr,replacePrefix:function(p,g){return new Yr({replacePrefix:[p,g]})},add:function(p){return new Yr({add:p})},remove:function(p){return new Yr({remove:p})},default:us,RangeSet:sn,mergeRanges:Ni,rangesOverlap:Pn}),{default:us}),us})})(h2);var oO=h2.exports;const ey=Gd(oO),Uw=Symbol.for("Dexie"),Gl=globalThis[Uw]||(globalThis[Uw]=ey);if(ey.semVer!==Gl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ey.semVer} and ${Gl.semVer}`);const{liveQuery:z7,mergeRanges:$7,rangesOverlap:B7,RangeSet:q7,cmp:H7,Entity:K7,PropModification:W7,replacePrefix:G7,add:Q7,remove:Y7,DexieYProvider:X7}=Gl,Tt=new Gl("NexusMindDB");Tt.version(4).stores({contacts:"id, name, ocrText, phone, email, company, *tags, lastUpdated",settings:"id",schedules:"id, title, date, *contactIds, type"});function aO(n,e,r){var i,s;typeof n=="function"?(i=e||[],s=r):(i=[],s=e);var o=wt.useRef({hasResult:!1,result:s,error:null}),a=wt.useReducer(function(c){return c+1},0);a[0];var l=a[1],u=wt.useMemo(function(){var c=typeof n=="function"?n():n;if(!c||typeof c.subscribe!="function")throw n===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")o.current.result=c.getValue(),o.current.hasResult=!0;else{var d=c.subscribe(function(h){o.current.result=h,o.current.hasResult=!0});typeof d=="function"?d():d.unsubscribe()}return c},i);if(wt.useDebugValue(o.current.result),wt.useEffect(function(){var c=u.subscribe(function(d){var h=o.current;(h.error!==null||h.result!==d)&&(h.error=null,h.result=d,h.hasResult=!0,l())},function(d){var h=o.current;h.error!==d&&(h.error=d,l())});return typeof c=="function"?c:c.unsubscribe.bind(c)},i),o.current.error)throw o.current.error;return o.current.result}function kf(n,e,r){return aO(function(){return Gl.liveQuery(n)},e||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=Gl.DexieYProvider;e&&e.release(n)});const lO=()=>{};var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=function(n){const e=[];let r=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},uO=function(n){const e=[];let r=0,i=0;for(;r<n.length;){const s=n[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[r++],a=n[r++],l=n[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],a=n[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},d2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,d=o>>2,h=(o&3)<<4|l>>4;let m=(l&15)<<2|c>>6,_=c&63;u||(_=64,a||(m=64)),i.push(r[d],r[h],r[m],r[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(f2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=r[n.charAt(s++)],l=s<n.length?r[n.charAt(s)]:0;++s;const c=s<n.length?r[n.charAt(s)]:64;++s;const h=s<n.length?r[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||h==null)throw new cO;const m=o<<2|l>>4;if(i.push(m),c!==64){const _=l<<4&240|c>>2;if(i.push(_),h!==64){const w=c<<6&192|h;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hO=function(n){const e=f2(n);return d2.encodeByteArray(e,!0)},pd=function(n){return hO(n).replace(/\./g,"")},p2=function(n){try{return d2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=()=>fO().__FIREBASE_DEFAULTS__,pO=()=>{if(typeof process>"u"||typeof zw>"u")return;const n=zw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&p2(n[1]);return e&&JSON.parse(e)},mp=()=>{try{return lO()||dO()||pO()||mO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m2=n=>{var e,r;return(r=(e=mp())==null?void 0:e.emulatorHosts)==null?void 0:r[n]},gO=n=>{const e=m2(n);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},g2=()=>{var n;return(n=mp())==null?void 0:n.config},y2=n=>{var e;return(e=mp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v2(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[pd(JSON.stringify(r)),pd(JSON.stringify(a)),""].join(".")}const mc={};function _O(){const n={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?n.emulator.push(e):n.prod.push(e);return n}function wO(n){let e=document.getElementById(n),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),r=!0),{created:r,element:e}}let $w=!1;function _2(n,e){if(typeof window>"u"||typeof document>"u"||!uu(window.location.host)||mc[n]===e||mc[n]||$w)return;mc[n]=e;function r(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=_O().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{$w=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=wO(i),_=r("text"),w=document.getElementById(_)||document.createElement("span"),I=r("learnmore"),P=document.getElementById(I)||document.createElement("a"),b=r("preprendIcon"),T=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),d(P,I);const O=c();u(T,b),N.append(T,w,P,O),document.body.appendChild(N)}o?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function bO(){var e;const n=(e=mp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function TO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IO(){const n=$n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function SO(){return!bO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x2(){try{return typeof indexedDB=="object"}catch{return!1}}function b2(){return new Promise((n,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function kO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="FirebaseError";class wi extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=CO,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?AO(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new wi(s,l,i)}}function AO(n,e){return n.replace(NO,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const NO=/\{\$([^}]+)}/g;function PO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ko(n,e){if(n===e)return!0;const r=Object.keys(n),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(Bw(o)&&Bw(a)){if(!ko(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Bw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){const e=[];for(const[r,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function RO(n,e){const r=new OO(n,e);return r.subscribe.bind(r)}class OO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");jO(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=km),s.error===void 0&&(s.error=km),s.complete===void 0&&(s.complete=km);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jO(n,e){if(typeof n!="object"||n===null)return!1;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1e3,MO=2,LO=4*60*60*1e3,VO=.5;function qw(n,e=DO,r=MO){const i=e*Math.pow(r,n),s=Math.round(VO*i*(Math.random()-.5)*2);return Math.min(LO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class _i{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new yO;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zO(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){const i=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:UO(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UO(n){return n===ua?void 0:n}function zO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new FO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const BO={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},qO=it.INFO,HO={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},KO=(n,e,...r)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=HO[e];if(s)console[s](`[${i}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gp{constructor(e){this.name=e,this._logLevel=qO,this._logHandler=KO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const WO=(n,e)=>e.some(r=>n instanceof r);let Hw,Kw;function GO(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QO(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E2=new WeakMap,ty=new WeakMap,T2=new WeakMap,Cm=new WeakMap,Wv=new WeakMap;function YO(n){const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(xo(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&E2.set(r,n)}).catch(()=>{}),Wv.set(e,n),e}function XO(n){if(ty.has(n))return;const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});ty.set(n,e)}let ny={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return ty.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T2.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return xo(n[e])},set(n,e,r){return n[e]=r,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JO(n){ny=n(ny)}function ZO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=n.call(Am(this),e,...r);return T2.set(i,e.sort?e.sort():[e]),xo(i)}:QO().includes(n)?function(...e){return n.apply(Am(this),e),xo(E2.get(this))}:function(...e){return xo(n.apply(Am(this),e))}}function e4(n){return typeof n=="function"?ZO(n):(n instanceof IDBTransaction&&XO(n),WO(n,GO())?new Proxy(n,ny):n)}function xo(n){if(n instanceof IDBRequest)return YO(n);if(Cm.has(n))return Cm.get(n);const e=e4(n);return e!==n&&(Cm.set(n,e),Wv.set(e,n)),e}const Am=n=>Wv.get(n);function I2(n,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=xo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(xo(a.result),u.oldVersion,u.newVersion,xo(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const t4=["get","getKey","getAll","getAllKeys","count"],n4=["put","add","delete","clear"],Nm=new Map;function Ww(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=n4.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||t4.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Nm.set(e,o),o}JO(n=>({...n,get:(e,r,i)=>Ww(e,r)||n.get(e,r,i),has:(e,r)=>!!Ww(e,r)||n.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(i4(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function i4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ry="@firebase/app",Gw="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new gp("@firebase/app"),s4="@firebase/app-compat",o4="@firebase/analytics-compat",a4="@firebase/analytics",l4="@firebase/app-check-compat",u4="@firebase/app-check",c4="@firebase/auth",h4="@firebase/auth-compat",f4="@firebase/database",d4="@firebase/data-connect",p4="@firebase/database-compat",m4="@firebase/functions",g4="@firebase/functions-compat",y4="@firebase/installations",v4="@firebase/installations-compat",_4="@firebase/messaging",w4="@firebase/messaging-compat",x4="@firebase/performance",b4="@firebase/performance-compat",E4="@firebase/remote-config",T4="@firebase/remote-config-compat",I4="@firebase/storage",S4="@firebase/storage-compat",k4="@firebase/firestore",C4="@firebase/ai",A4="@firebase/firestore-compat",N4="firebase",P4="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="[DEFAULT]",R4={[ry]:"fire-core",[s4]:"fire-core-compat",[a4]:"fire-analytics",[o4]:"fire-analytics-compat",[u4]:"fire-app-check",[l4]:"fire-app-check-compat",[c4]:"fire-auth",[h4]:"fire-auth-compat",[f4]:"fire-rtdb",[d4]:"fire-data-connect",[p4]:"fire-rtdb-compat",[m4]:"fire-fn",[g4]:"fire-fn-compat",[y4]:"fire-iid",[v4]:"fire-iid-compat",[_4]:"fire-fcm",[w4]:"fire-fcm-compat",[x4]:"fire-perf",[b4]:"fire-perf-compat",[E4]:"fire-rc",[T4]:"fire-rc-compat",[I4]:"fire-gcs",[S4]:"fire-gcs-compat",[k4]:"fire-fst",[A4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[N4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map,O4=new Map,sy=new Map;function Qw(n,e){try{n.container.addComponent(e)}catch(r){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function Wi(n){const e=n.name;if(sy.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,n);for(const r of md.values())Qw(r,n);for(const r of O4.values())Qw(r,n);return!0}function Ba(n,e){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function ci(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new $a("app","Firebase",j4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,r,i){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=P4;function S2(n,e={}){let r=n;typeof e!="object"&&(e={name:e});const i={name:iy,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw bo.create("bad-app-name",{appName:String(s)});if(r||(r=g2()),!r)throw bo.create("no-options");const o=md.get(s);if(o){if(ko(r,o.options)&&ko(i,o.config))return o;throw bo.create("duplicate-app",{appName:s})}const a=new $O(s);for(const u of sy.values())a.addComponent(u);const l=new D4(r,i,a);return md.set(s,l),l}function Gv(n=iy){const e=md.get(n);if(!e&&n===iy&&g2())return S2();if(!e)throw bo.create("no-app",{appName:n});return e}function $r(n,e,r){let i=R4[n]??n;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}Wi(new _i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="firebase-heartbeat-database",L4=1,Bc="firebase-heartbeat-store";let Pm=null;function k2(){return Pm||(Pm=I2(M4,L4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bc)}catch(r){console.warn(r)}}}}).catch(n=>{throw bo.create("idb-open",{originalErrorMessage:n.message})})),Pm}async function V4(n){try{const r=(await k2()).transaction(Bc),i=await r.objectStore(Bc).get(C2(n));return await r.done,i}catch(e){if(e instanceof wi)Ps.warn(e.message);else{const r=bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(r.message)}}}async function Yw(n,e){try{const i=(await k2()).transaction(Bc,"readwrite");await i.objectStore(Bc).put(e,C2(n)),await i.done}catch(r){if(r instanceof wi)Ps.warn(r.message);else{const i=bo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ps.warn(i.message)}}}function C2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1024,U4=30;class z4{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new B4(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>U4){const a=q4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ps.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Xw(),{heartbeatsToSend:i,unsentEntries:s}=$4(this._heartbeatsCache.heartbeats),o=pd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Ps.warn(r),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function $4(n,e=F4){const r=[];let i=n.slice();for(const s of n){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Jw(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Jw(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class B4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x2()?b2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await V4(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jw(n){return pd(JSON.stringify({version:2,heartbeats:n})).length}function q4(n){if(n.length===0)return-1;let e=0,r=n[0].date;for(let i=1;i<n.length;i++)n[i].date<r&&(r=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){Wi(new _i("platform-logger",e=>new r4(e),"PRIVATE")),Wi(new _i("heartbeat",e=>new z4(e),"PRIVATE")),$r(ry,Gw,n),$r(ry,Gw,"esm2020"),$r("fire-js","")}H4("");var K4="firebase",W4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(K4,W4,"app");function A2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G4=A2,N2=new $a("auth","Firebase",A2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new gp("@firebase/auth");function Q4(n,...e){gd.logLevel<=it.WARN&&gd.warn(`Auth (${cu}): ${n}`,...e)}function Cf(n,...e){gd.logLevel<=it.ERROR&&gd.error(`Auth (${cu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n,...e){throw Yv(n,...e)}function gi(n,...e){return Yv(n,...e)}function Qv(n,e,r){const i={...G4(),[e]:r};return new $a("auth","Firebase",i).create(e,{appName:n.name})}function ba(n){return Qv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y4(n,e,r){const i=r;if(!(e instanceof i))throw i.name!==e.constructor.name&&Gi(n,"argument-error"),Qv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yv(n,...e){if(typeof n!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(r,...i)}return N2.create(n,...e)}function He(n,e,...r){if(!n)throw Yv(e,...r)}function ws(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Cf(e),new Error(e)}function Rs(n,e){n||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function X4(){return Zw()==="http:"||Zw()==="https:"}function Zw(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X4()||w2()||"connection"in navigator)?navigator.onLine:!0}function Z4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Rs(r>e,"Short delay should be less than long delay!"),this.isMobile=xO()||TO()}get(){return J4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nj=new hh(3e4,6e4);function Jv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function hu(n,e,r,i,s={}){return R2(n,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=ch({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:u,...o};return EO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&uu(n.emulatorConfig.host)&&(c.credentials="include"),P2.fetch()(await O2(n,n.config.apiHost,r,l),c)})}async function R2(n,e,r){n._canInitEmulator=!1;const i={...ej,...e};try{const s=new ij(n),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw tf(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw tf(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw tf(n,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Qv(n,d,c);Gi(n,d)}}catch(s){if(s instanceof wi)throw s;Gi(n,"network-request-failed",{message:String(s)})}}async function rj(n,e,r,i,s={}){const o=await hu(n,e,r,i,s);return"mfaPendingCredential"in o&&Gi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function O2(n,e,r,i){const s=`${e}${r}?${i}`,o=n,a=o.config.emulator?Xv(n.config,s):`${n.config.apiScheme}://${s}`;return tj.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class ij{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(gi(this.auth,"network-request-failed")),nj.get())})}}function tf(n,e,r){const i={appName:n.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=gi(n,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n,e){return hu(n,"POST","/v1/accounts:delete",e)}async function yd(n,e){return hu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oj(n,e=!1){const r=rn(n),i=await r.getIdToken(e),s=Zv(i);He(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:gc(Rm(s.auth_time)),issuedAtTime:gc(Rm(s.iat)),expirationTime:gc(Rm(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Rm(n){return Number(n)*1e3}function Zv(n){const[e,r,i]=n.split(".");if(e===void 0||r===void 0||i===void 0)return Cf("JWT malformed, contained fewer than 3 sections"),null;try{const s=p2(r);return s?JSON.parse(s):(Cf("Failed to decode base64 JWT payload"),null)}catch(s){return Cf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ex(n){const e=Zv(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(n,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof wi&&aj(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(n){var h;const e=n.auth,r=await n.getIdToken(),i=await qc(n,yd(e,{idToken:r}));He(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(h=s.providerUserInfo)!=null&&h.length?j2(s.providerUserInfo):[],a=cj(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function uj(n){const e=rn(n);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cj(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function j2(n){return n.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(n,e){const r=await R2(n,{},async()=>{const i=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await O2(n,s,"/v1/token",`key=${o}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return n.emulatorConfig&&uu(n.emulatorConfig.host)&&(u.credentials="include"),P2.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fj(n,e){return hu(n,"POST","/v2/accounts:revokeToken",Jv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){He(e.length!==0,"internal-error");const r=ex(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await hj(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new Rl;return i&&(He(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(He(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(He(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:r,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new lj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ay(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await qc(this,this.stsTokenManager.getToken(this.auth,e));return He(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return oj(this,e)}reload(){return uj(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await vd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await qc(this,sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const i=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,c=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:_,providerData:w,stsTokenManager:I}=r;He(h&&I,e,"internal-error");const P=Rl.fromJSON(this.name,I);He(typeof h=="string",e,"internal-error"),Xs(i,e.name),Xs(s,e.name),He(typeof m=="boolean",e,"internal-error"),He(typeof _=="boolean",e,"internal-error"),Xs(o,e.name),Xs(a,e.name),Xs(l,e.name),Xs(u,e.name),Xs(c,e.name),Xs(d,e.name);const b=new fi({uid:h,auth:e,email:s,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:P,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(b.providerData=w.map(T=>({...T}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,r,i=!1){const s=new Rl;s.updateFromServerResponse(r);const o=new fi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await vd(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];He(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?j2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Rl;l.updateFromIdToken(i);const u=new fi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;function xs(n){Rs(n instanceof Function,"Expected a class definition");let e=tx.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}D2.type="NONE";const nx=D2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n,e,r){return`firebase:${n}:${e}:${r}`}class Ol{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Af(this.userKey,s.apiKey,o),this.fullPersistenceKey=Af("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await yd(this.auth,{idToken:e}).catch(()=>{});return r?fi._fromGetAccountInfoResponse(this.auth,r,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Ol(xs(nx),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||xs(nx);const a=Af(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(a);if(d){let h;if(typeof d=="string"){const m=await yd(e,{idToken:d}).catch(()=>{});if(!m)break;h=await fi._fromGetAccountInfoResponse(e,m,d)}else h=fi._fromJSON(e,d);c!==o&&(l=h),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Ol(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Ol(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z2(e))return"Blackberry";if($2(e))return"Webos";if(L2(e))return"Safari";if((e.includes("chrome/")||V2(e))&&!e.includes("edge/"))return"Chrome";if(U2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function M2(n=$n()){return/firefox\//i.test(n)}function L2(n=$n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V2(n=$n()){return/crios\//i.test(n)}function F2(n=$n()){return/iemobile/i.test(n)}function U2(n=$n()){return/android/i.test(n)}function z2(n=$n()){return/blackberry/i.test(n)}function $2(n=$n()){return/webos/i.test(n)}function e0(n=$n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dj(n=$n()){var e;return e0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function pj(){return IO()&&document.documentMode===10}function B2(n=$n()){return e0(n)||U2(n)||$2(n)||z2(n)||/windows phone/i.test(n)||F2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n,e=[]){let r;switch(n){case"Browser":r=rx($n());break;case"Worker":r=`${rx($n())}-${n}`;break;default:r=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${cu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(n,e={}){return hu(n,"GET","/v2/passwordPolicy",Jv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=6;class vj{constructor(e){var i;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??yj,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ix(this),this.idTokenSubscription=new ix(this),this.beforeStateQueue=new mj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=xs(r)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await yd(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ci(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(ba(this));const r=e?rn(e):null;return r&&He(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gj(this),r=new vj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await fj(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&xs(e)||this._popupRedirectResolver;He(r,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[xs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var r;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&Q4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yp(n){return rn(n)}class ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=RO(r=>this.observer=r)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wj(n){t0=n}function xj(n){return t0.loadJS(n)}function bj(){return t0.gapiScript}function Ej(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(n,e){const r=Ba(n,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(ko(o,e??{}))return s;Gi(s,"already-initialized")}return r.initialize({options:e})}function Ij(n,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(xs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Sj(n,e,r){const i=yp(n);He(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=H2(e),{host:a,port:l}=kj(e),u=l===null?"":`:${l}`,c={url:`${o}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){He(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),He(ko(c,i.config.emulator)&&ko(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,uu(a)?(v2(`${o}//${a}${u}`),_2("Auth",!0)):Cj()}function H2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kj(n){const e=H2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:sx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:sx(a)}}}function sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Cj(){function n(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,r){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n,e){return rj(n,"POST","/v1/accounts:signInWithIdp",Jv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="http://localhost";class Ra extends K2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Gi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=r;if(!i||!s)return null;const a=new Ra(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return jl(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,jl(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,jl(e,r)}buildRequest(){const e={requestUri:Aj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ch(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends n0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends fh{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends fh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ra._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return ys.credential(r,i)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends fh{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends fh{constructor(){super("twitter.com")}static credential(e,r){return Ra._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return ao.credential(r,i)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await fi._fromIdTokenResponse(e,i,s),a=ox(i);return new Ql({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=ox(i);return new Ql({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function ox(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends wi{constructor(e,r,i,s){super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new _d(e,r,i,s)}}function W2(n,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(n,o,e,i):o})}async function Nj(n,e,r=!1){const i=await qc(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Ql._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(n,e,r=!1){const{auth:i}=n;if(ci(i.app))return Promise.reject(ba(i));const s="reauthenticate";try{const o=await qc(n,W2(i,s,e,n),r);He(o.idToken,i,"internal-error");const a=Zv(o.idToken);He(a,i,"internal-error");const{sub:l}=a;return He(n.uid===l,i,"user-mismatch"),Ql._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Gi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(n,e,r=!1){if(ci(n.app))return Promise.reject(ba(n));const i="signIn",s=await W2(n,i,e),o=await Ql._fromIdTokenResponse(n,i,s);return r||await n._updateCurrentUser(o.user),o}function Oj(n,e,r,i){return rn(n).onIdTokenChanged(e,r,i)}function jj(n,e,r){return rn(n).beforeAuthStateChanged(e,r)}function Dj(n,e,r,i){return rn(n).onAuthStateChanged(e,r,i)}function Mj(n){return rn(n).signOut()}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=1e3,Vj=10;class Q2 extends G2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);pj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Vj):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},Lj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q2.type="LOCAL";const Fj=Q2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2 extends G2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Y2.type="SESSION";const X2=Y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new vp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await Uj(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=r0("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function $j(n){$i().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function Bj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Hj(){return J2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebaseLocalStorageDb",Kj=1,xd="firebaseLocalStorage",eI="fbase_key";class dh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function _p(n,e){return n.transaction([xd],e?"readwrite":"readonly").objectStore(xd)}function Wj(){const n=indexedDB.deleteDatabase(Z2);return new dh(n).toPromise()}function ly(){const n=indexedDB.open(Z2,Kj);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(xd,{keyPath:eI})}catch(s){r(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(xd)?e(i):(i.close(),await Wj(),e(await ly()))})})}async function ax(n,e,r){const i=_p(n,!0).put({[eI]:e,value:r});return new dh(i).toPromise()}async function Gj(n,e){const r=_p(n,!1).get(e),i=await new dh(r).toPromise();return i===void 0?null:i.value}function lx(n,e){const r=_p(n,!0).delete(e);return new dh(r).toPromise()}const Qj=800,Yj=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>Yj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vp._getInstance(Hj()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await Bj(),!this.activeServiceWorker)return;this.sender=new zj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await ax(e,wd,"1"),await lx(e,wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>ax(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>Gj(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=_p(s,!1).getAll();return new dh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const Xj=tI;new hh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e){return e?xs(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends K2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return jl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Jj(n){return Rj(n.auth,new i0(n),n.bypassAuthState)}function Zj(n){const{auth:e,user:r}=n;return He(r,e,"internal-error"),Pj(r,new i0(n),n.bypassAuthState)}async function eD(n){const{auth:e,user:r}=n;return He(r,e,"internal-error"),Nj(r,new i0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jj;case"linkViaPopup":case"linkViaRedirect":return eD;case"reauthViaPopup":case"reauthViaRedirect":return Zj;default:Gi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new hh(2e3,1e4);async function nD(n,e,r){if(ci(n.app))return Promise.reject(gi(n,"operation-not-supported-in-this-environment"));const i=yp(n);Y4(n,e,n0);const s=nI(i,r);return new ma(i,"signInViaPopup",e,s).executeNotNull()}class ma extends rI{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=r0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tD.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="pendingRedirect",Nf=new Map;class iD extends rI{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Nf.get(this.auth._key());if(!e){try{const i=await sD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Nf.set(this.auth._key(),e)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sD(n,e){const r=lD(e),i=aD(n);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function oD(n,e){Nf.set(n._key(),e)}function aD(n){return xs(n._redirectPersistence)}function lD(n){return Af(rD,n.config.apiKey,n.name)}async function uD(n,e,r=!1){if(ci(n.app))return Promise.reject(ba(n));const i=yp(n),s=nI(i,e),a=await new iD(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=10*60*1e3;class hD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!iI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(gi(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(n,e={}){return hu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function gD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dD(n);for(const r of e)try{if(yD(r))return}catch{}Gi(n,"unauthorized-domain")}function yD(n){const e=oy(),{protocol:r,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!mD.test(r))return!1;if(pD.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new hh(3e4,6e4);function cx(){const n=$i().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function _D(n){return new Promise((e,r)=>{var s,o,a;function i(){cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cx(),r(gi(n,"network-request-failed"))},timeout:vD.get()})}if((o=(s=$i().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=$i().gapi)!=null&&a.load)i();else{const l=Ej("iframefcb");return $i()[l]=()=>{gapi.load?i():r(gi(n,"network-request-failed"))},xj(`${bj()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Pf=null,e})}let Pf=null;function wD(n){return Pf=Pf||_D(n),Pf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new hh(5e3,15e3),bD="__/auth/iframe",ED="emulator/auth/iframe",TD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ID=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SD(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const r=e.emulator?Xv(e,ED):`https://${n.config.authDomain}/${bD}`,i={apiKey:e.apiKey,appName:n.name,v:cu},s=ID.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${ch(i).slice(1)}`}async function kD(n){const e=await wD(n),r=$i().gapi;return He(r,n,"internal-error"),e.open({where:document.body,url:SD(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TD,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=gi(n,"network-request-failed"),l=$i().setTimeout(()=>{o(a)},xD.get());function u(){$i().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AD=500,ND=600,PD="_blank",RD="http://localhost";class hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OD(n,e,r,i=AD,s=ND){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...CD,width:i.toString(),height:s.toString(),top:o,left:a},c=$n().toLowerCase();r&&(l=V2(c)?PD:r),M2(c)&&(e=e||RD,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,w])=>`${m}${_}=${w},`,"");if(dj(c)&&l!=="_self")return jD(e||"",l),new hx(null);const h=window.open(e||"",l,d);He(h,n,"popup-blocked");try{h.focus()}catch{}return new hx(h)}function jD(n,e){const r=document.createElement("a");r.href=n,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="__/auth/handler",MD="emulator/auth/handler",LD=encodeURIComponent("fac");async function fx(n,e,r,i,s,o){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:i,v:cu,eventId:s};if(e instanceof n0){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",PO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))a[d]=h}if(e instanceof fh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await n._getAppCheckToken(),c=u?`#${LD}=${encodeURIComponent(u)}`:"";return`${VD(n)}?${ch(l).slice(1)}${c}`}function VD({config:n}){return n.emulator?Xv(n,MD):`https://${n.authDomain}/${DD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class FD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X2,this._completeRedirectFn=uD,this._overrideRedirectResult=oD}async _openPopup(e,r,i,s){var a;Rs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await fx(e,r,i,oy(),s);return OD(e,o,r0())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await fx(e,r,i,oy(),s);return $j(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Rs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await kD(e),i=new hD(e);return r.register("authEvent",s=>(He(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Om,{type:Om},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[Om];o!==void 0&&r(!!o),Gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=gD(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return B2()||L2()||e0()}}const UD=FD;var dx="@firebase/auth",px="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BD(n){Wi(new _i("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;He(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q2(n)},c=new _j(i,s,o,u);return Ij(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Wi(new _i("auth-internal",e=>{const r=yp(e.getProvider("auth").getImmediate());return(i=>new zD(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(dx,px,$D(n)),$r(dx,px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=5*60,HD=y2("authIdTokenMaxAge")||qD;let mx=null;const KD=n=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>HD)return;const s=r==null?void 0:r.token;mx!==s&&(mx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function WD(n=Gv()){const e=Ba(n,"auth");if(e.isInitialized())return e.getImmediate();const r=Tj(n,{popupRedirectResolver:UD,persistence:[Xj,Fj,X2]}),i=y2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=KD(o.toString());jj(r,a,()=>a(r.currentUser)),Oj(r,l=>a(l))}}const s=m2("auth");return s&&Sj(r,`http://${s}`),r}function GD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}wj({loadJS(n){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=gi("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",GD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BD("Browser");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eo,sI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function D(){}D.prototype=C.prototype,A.F=C.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(L,V,$){for(var j=Array(arguments.length-2),H=2;H<arguments.length;H++)j[H-2]=arguments[H];return C.prototype[V].apply(L,j)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,C,D){D||(D=0);const L=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)L[V]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(V=0;V<16;++V)L[V]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=A.g[0],D=A.g[1],V=A.g[2];let $=A.g[3],j;j=C+($^D&(V^$))+L[0]+3614090360&4294967295,C=D+(j<<7&4294967295|j>>>25),j=$+(V^C&(D^V))+L[1]+3905402710&4294967295,$=C+(j<<12&4294967295|j>>>20),j=V+(D^$&(C^D))+L[2]+606105819&4294967295,V=$+(j<<17&4294967295|j>>>15),j=D+(C^V&($^C))+L[3]+3250441966&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+($^D&(V^$))+L[4]+4118548399&4294967295,C=D+(j<<7&4294967295|j>>>25),j=$+(V^C&(D^V))+L[5]+1200080426&4294967295,$=C+(j<<12&4294967295|j>>>20),j=V+(D^$&(C^D))+L[6]+2821735955&4294967295,V=$+(j<<17&4294967295|j>>>15),j=D+(C^V&($^C))+L[7]+4249261313&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+($^D&(V^$))+L[8]+1770035416&4294967295,C=D+(j<<7&4294967295|j>>>25),j=$+(V^C&(D^V))+L[9]+2336552879&4294967295,$=C+(j<<12&4294967295|j>>>20),j=V+(D^$&(C^D))+L[10]+4294925233&4294967295,V=$+(j<<17&4294967295|j>>>15),j=D+(C^V&($^C))+L[11]+2304563134&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+($^D&(V^$))+L[12]+1804603682&4294967295,C=D+(j<<7&4294967295|j>>>25),j=$+(V^C&(D^V))+L[13]+4254626195&4294967295,$=C+(j<<12&4294967295|j>>>20),j=V+(D^$&(C^D))+L[14]+2792965006&4294967295,V=$+(j<<17&4294967295|j>>>15),j=D+(C^V&($^C))+L[15]+1236535329&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+(V^$&(D^V))+L[1]+4129170786&4294967295,C=D+(j<<5&4294967295|j>>>27),j=$+(D^V&(C^D))+L[6]+3225465664&4294967295,$=C+(j<<9&4294967295|j>>>23),j=V+(C^D&($^C))+L[11]+643717713&4294967295,V=$+(j<<14&4294967295|j>>>18),j=D+($^C&(V^$))+L[0]+3921069994&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(V^$&(D^V))+L[5]+3593408605&4294967295,C=D+(j<<5&4294967295|j>>>27),j=$+(D^V&(C^D))+L[10]+38016083&4294967295,$=C+(j<<9&4294967295|j>>>23),j=V+(C^D&($^C))+L[15]+3634488961&4294967295,V=$+(j<<14&4294967295|j>>>18),j=D+($^C&(V^$))+L[4]+3889429448&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(V^$&(D^V))+L[9]+568446438&4294967295,C=D+(j<<5&4294967295|j>>>27),j=$+(D^V&(C^D))+L[14]+3275163606&4294967295,$=C+(j<<9&4294967295|j>>>23),j=V+(C^D&($^C))+L[3]+4107603335&4294967295,V=$+(j<<14&4294967295|j>>>18),j=D+($^C&(V^$))+L[8]+1163531501&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(V^$&(D^V))+L[13]+2850285829&4294967295,C=D+(j<<5&4294967295|j>>>27),j=$+(D^V&(C^D))+L[2]+4243563512&4294967295,$=C+(j<<9&4294967295|j>>>23),j=V+(C^D&($^C))+L[7]+1735328473&4294967295,V=$+(j<<14&4294967295|j>>>18),j=D+($^C&(V^$))+L[12]+2368359562&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(D^V^$)+L[5]+4294588738&4294967295,C=D+(j<<4&4294967295|j>>>28),j=$+(C^D^V)+L[8]+2272392833&4294967295,$=C+(j<<11&4294967295|j>>>21),j=V+($^C^D)+L[11]+1839030562&4294967295,V=$+(j<<16&4294967295|j>>>16),j=D+(V^$^C)+L[14]+4259657740&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(D^V^$)+L[1]+2763975236&4294967295,C=D+(j<<4&4294967295|j>>>28),j=$+(C^D^V)+L[4]+1272893353&4294967295,$=C+(j<<11&4294967295|j>>>21),j=V+($^C^D)+L[7]+4139469664&4294967295,V=$+(j<<16&4294967295|j>>>16),j=D+(V^$^C)+L[10]+3200236656&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(D^V^$)+L[13]+681279174&4294967295,C=D+(j<<4&4294967295|j>>>28),j=$+(C^D^V)+L[0]+3936430074&4294967295,$=C+(j<<11&4294967295|j>>>21),j=V+($^C^D)+L[3]+3572445317&4294967295,V=$+(j<<16&4294967295|j>>>16),j=D+(V^$^C)+L[6]+76029189&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(D^V^$)+L[9]+3654602809&4294967295,C=D+(j<<4&4294967295|j>>>28),j=$+(C^D^V)+L[12]+3873151461&4294967295,$=C+(j<<11&4294967295|j>>>21),j=V+($^C^D)+L[15]+530742520&4294967295,V=$+(j<<16&4294967295|j>>>16),j=D+(V^$^C)+L[2]+3299628645&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(V^(D|~$))+L[0]+4096336452&4294967295,C=D+(j<<6&4294967295|j>>>26),j=$+(D^(C|~V))+L[7]+1126891415&4294967295,$=C+(j<<10&4294967295|j>>>22),j=V+(C^($|~D))+L[14]+2878612391&4294967295,V=$+(j<<15&4294967295|j>>>17),j=D+($^(V|~C))+L[5]+4237533241&4294967295,D=V+(j<<21&4294967295|j>>>11),j=C+(V^(D|~$))+L[12]+1700485571&4294967295,C=D+(j<<6&4294967295|j>>>26),j=$+(D^(C|~V))+L[3]+2399980690&4294967295,$=C+(j<<10&4294967295|j>>>22),j=V+(C^($|~D))+L[10]+4293915773&4294967295,V=$+(j<<15&4294967295|j>>>17),j=D+($^(V|~C))+L[1]+2240044497&4294967295,D=V+(j<<21&4294967295|j>>>11),j=C+(V^(D|~$))+L[8]+1873313359&4294967295,C=D+(j<<6&4294967295|j>>>26),j=$+(D^(C|~V))+L[15]+4264355552&4294967295,$=C+(j<<10&4294967295|j>>>22),j=V+(C^($|~D))+L[6]+2734768916&4294967295,V=$+(j<<15&4294967295|j>>>17),j=D+($^(V|~C))+L[13]+1309151649&4294967295,D=V+(j<<21&4294967295|j>>>11),j=C+(V^(D|~$))+L[4]+4149444226&4294967295,C=D+(j<<6&4294967295|j>>>26),j=$+(D^(C|~V))+L[11]+3174756917&4294967295,$=C+(j<<10&4294967295|j>>>22),j=V+(C^($|~D))+L[2]+718787259&4294967295,V=$+(j<<15&4294967295|j>>>17),j=D+($^(V|~C))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(V+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+V&4294967295,A.g[3]=A.g[3]+$&4294967295}i.prototype.v=function(A,C){C===void 0&&(C=A.length);const D=C-this.blockSize,L=this.C;let V=this.h,$=0;for(;$<C;){if(V==0)for(;$<=D;)s(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<C;)if(L[V++]=A.charCodeAt($++),V==this.blockSize){s(this,L),V=0;break}}else for(;$<C;)if(L[V++]=A[$++],V==this.blockSize){s(this,L),V=0;break}}this.h=V,this.o+=C},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,D=0;D<4;++D)for(let L=0;L<32;L+=8)A[C++]=this.g[D]>>>L&255;return A};function o(A,C){var D=l;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=C(A)}function a(A,C){this.h=C;const D=[];let L=!0;for(let V=A.length-1;V>=0;V--){const $=A[V]|0;L&&$==C||(D[V]=$,L=!1)}this.g=D}var l={};function u(A){return-128<=A&&A<128?o(A,function(C){return new a([C|0],C<0?-1:0)}):new a([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return P(c(-A));const C=[];let D=1;for(let L=0;A>=D;L++)C[L]=A/D|0,D*=4294967296;return new a(C,0)}function d(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return P(d(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=c(Math.pow(C,8));let L=h;for(let $=0;$<A.length;$+=8){var V=Math.min(8,A.length-$);const j=parseInt(A.substring($,$+V),C);V<8?(V=c(Math.pow(C,V)),L=L.j(V).add(c(j))):(L=L.j(D),L=L.add(c(j)))}return L}var h=u(0),m=u(1),_=u(16777216);n=a.prototype,n.m=function(){if(I(this))return-P(this).m();let A=0,C=1;for(let D=0;D<this.g.length;D++){const L=this.i(D);A+=(L>=0?L:4294967296+L)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(I(this))return"-"+P(this).toString(A);const C=c(Math.pow(A,6));var D=this;let L="";for(;;){const V=O(D,C).g;D=b(D,V.j(C));let $=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=V,w(D))return $+L;for(;$.length<6;)$="0"+$;L=$+L}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function I(A){return A.h==-1}n.l=function(A){return A=b(this,A),I(A)?-1:w(A)?0:1};function P(A){const C=A.g.length,D=[];for(let L=0;L<C;L++)D[L]=~A.g[L];return new a(D,~A.h).add(m)}n.abs=function(){return I(this)?P(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),D=[];let L=0;for(let V=0;V<=C;V++){let $=L+(this.i(V)&65535)+(A.i(V)&65535),j=($>>>16)+(this.i(V)>>>16)+(A.i(V)>>>16);L=j>>>16,$&=65535,j&=65535,D[V]=j<<16|$}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(A,C){return A.add(P(C))}n.j=function(A){if(w(this)||w(A))return h;if(I(this))return I(A)?P(this).j(P(A)):P(P(this).j(A));if(I(A))return P(this.j(P(A)));if(this.l(_)<0&&A.l(_)<0)return c(this.m()*A.m());const C=this.g.length+A.g.length,D=[];for(var L=0;L<2*C;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<A.g.length;V++){const $=this.i(L)>>>16,j=this.i(L)&65535,H=A.i(V)>>>16,G=A.i(V)&65535;D[2*L+2*V]+=j*G,T(D,2*L+2*V),D[2*L+2*V+1]+=$*G,T(D,2*L+2*V+1),D[2*L+2*V+1]+=j*H,T(D,2*L+2*V+1),D[2*L+2*V+2]+=$*H,T(D,2*L+2*V+2)}for(A=0;A<C;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=C;A<2*C;A++)D[A]=0;return new a(D,0)};function T(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function N(A,C){this.g=A,this.h=C}function O(A,C){if(w(C))throw Error("division by zero");if(w(A))return new N(h,h);if(I(A))return C=O(P(A),C),new N(P(C.g),P(C.h));if(I(C))return C=O(A,P(C)),new N(P(C.g),C.h);if(A.g.length>30){if(I(A)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var D=m,L=C;L.l(A)<=0;)D=M(D),L=M(L);var V=U(D,1),$=U(L,1);for(L=U(L,2),D=U(D,2);!w(L);){var j=$.add(L);j.l(A)<=0&&(V=V.add(D),$=j),L=U(L,1),D=U(D,1)}return C=b(A,V.j(C)),new N(V,C)}for(V=h;A.l(C)>=0;){for(D=Math.max(1,Math.floor(A.m()/C.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),$=c(D),j=$.j(C);I(j)||j.l(A)>0;)D-=L,$=c(D),j=$.j(C);w($)&&($=m),V=V.add($),A=b(A,j)}return new N(V,A)}n.B=function(A){return O(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)&A.i(L);return new a(D,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)|A.i(L);return new a(D,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)^A.i(L);return new a(D,this.h^A.h)};function M(A){const C=A.g.length+1,D=[];for(let L=0;L<C;L++)D[L]=A.i(L)<<1|A.i(L-1)>>>31;return new a(D,A.h)}function U(A,C){const D=C>>5;C%=32;const L=A.g.length-D,V=[];for(let $=0;$<L;$++)V[$]=C>0?A.i($+D)>>>C|A.i($+D+1)<<32-C:A.i($+D);return new a(V,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,Eo=a}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,Ju,aI,Rf,uy,lI,uI,cI;(function(){var n,e=Object.defineProperty;function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var x=0;x<f.length;++x){var S=f[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=r(this);function s(f,x){if(x)e:{var S=i;f=f.split(".");for(var F=0;F<f.length-1;F++){var ae=f[F];if(!(ae in S))break e;S=S[ae]}f=f[f.length-1],F=S[f],x=x(F),x!=F&&x!=null&&e(S,f,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(x){var S=[],F;for(F in x)Object.prototype.hasOwnProperty.call(x,F)&&S.push([F,x[F]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function u(f,x,S){return f.call.apply(f.bind,arguments)}function c(f,x,S){return c=u,c.apply(null,arguments)}function d(f,x){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function h(f,x){function S(){}S.prototype=x.prototype,f.Z=x.prototype,f.prototype=new S,f.prototype.constructor=f,f.Ob=function(F,ae,fe){for(var Ie=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)Ie[Qe-2]=arguments[Qe];return x.prototype[ae].apply(F,Ie)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function _(f){const x=f.length;if(x>0){const S=Array(x);for(let F=0;F<x;F++)S[F]=f[F];return S}return[]}function w(f,x){for(let F=1;F<arguments.length;F++){const ae=arguments[F];var S=typeof ae;if(S=S!="object"?S:ae?Array.isArray(ae)?"array":S:"null",S=="array"||S=="object"&&typeof ae.length=="number"){S=f.length||0;const fe=ae.length||0;f.length=S+fe;for(let Ie=0;Ie<fe;Ie++)f[S+Ie]=ae[Ie]}else f.push(ae)}}class I{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function P(f){a.setTimeout(()=>{throw f},0)}function b(){var f=A;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class T{constructor(){this.h=this.g=null}add(x,S){const F=N.get();F.set(x,S),this.h?this.h.next=F:this.g=F,this.h=F}}var N=new I(()=>new O,f=>f.reset());class O{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let M,U=!1,A=new T,C=()=>{const f=Promise.resolve(void 0);M=()=>{f.then(D)}};function D(){for(var f;f=b();){try{f.h.call(f.g)}catch(S){P(S)}var x=N;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}U=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};a.addEventListener("test",S,x),a.removeEventListener("test",S,x)}catch{}return f}();function j(f){return/^[\s\xa0]*$/.test(f)}function H(f,x){V.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}h(H,V),H.prototype.init=function(f,x){const S=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(S=="mouseover"?x=f.fromElement:S=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),Z=0;function me(f,x,S,F,ae){this.listener=f,this.proxy=null,this.src=x,this.type=S,this.capture=!!F,this.ha=ae,this.key=++Z,this.da=this.fa=!1}function ne(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function q(f,x,S){for(const F in f)x.call(S,f[F],F,f)}function K(f,x){for(const S in f)x.call(void 0,f[S],S,f)}function ue(f){const x={};for(const S in f)x[S]=f[S];return x}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(f,x){let S,F;for(let ae=1;ae<arguments.length;ae++){F=arguments[ae];for(S in F)f[S]=F[S];for(let fe=0;fe<ie.length;fe++)S=ie[fe],Object.prototype.hasOwnProperty.call(F,S)&&(f[S]=F[S])}}function pe(f){this.src=f,this.g={},this.h=0}pe.prototype.add=function(f,x,S,F,ae){const fe=f.toString();f=this.g[fe],f||(f=this.g[fe]=[],this.h++);const Ie=Me(f,x,F,ae);return Ie>-1?(x=f[Ie],S||(x.fa=!1)):(x=new me(x,this.src,fe,!!F,ae),x.fa=S,f.push(x)),x};function we(f,x){const S=x.type;if(S in f.g){var F=f.g[S],ae=Array.prototype.indexOf.call(F,x,void 0),fe;(fe=ae>=0)&&Array.prototype.splice.call(F,ae,1),fe&&(ne(x),f.g[S].length==0&&(delete f.g[S],f.h--))}}function Me(f,x,S,F){for(let ae=0;ae<f.length;++ae){const fe=f[ae];if(!fe.da&&fe.listener==x&&fe.capture==!!S&&fe.ha==F)return ae}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Ke={};function Oe(f,x,S,F,ae){if(Array.isArray(x)){for(let fe=0;fe<x.length;fe++)Oe(f,x[fe],S,F,ae);return null}return S=gu(S),f&&f[G]?f.J(x,S,l(F)?!!F.capture:!1,ae):fn(f,x,S,!1,F,ae)}function fn(f,x,S,F,ae,fe){if(!x)throw Error("Invalid event type");const Ie=l(ae)?!!ae.capture:!!ae;let Qe=Cn(f);if(Qe||(f[je]=Qe=new pe(f)),S=Qe.add(x,S,F,Ie,fe),S.proxy)return S;if(F=dn(),S.proxy=F,F.src=f,F.listener=S,f.addEventListener)$||(ae=Ie),ae===void 0&&(ae=!1),f.addEventListener(x.toString(),F,ae);else if(f.attachEvent)f.attachEvent(Ze(x.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function dn(){function f(S){return x.call(f.src,f.listener,S)}const x=xt;return f}function ut(f,x,S,F,ae){if(Array.isArray(x))for(var fe=0;fe<x.length;fe++)ut(f,x[fe],S,F,ae);else F=l(F)?!!F.capture:!!F,S=gu(S),f&&f[G]?(f=f.i,fe=String(x).toString(),fe in f.g&&(x=f.g[fe],S=Me(x,S,F,ae),S>-1&&(ne(x[S]),Array.prototype.splice.call(x,S,1),x.length==0&&(delete f.g[fe],f.h--)))):f&&(f=Cn(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Me(x,S,F,ae)),(S=f>-1?x[f]:null)&&Se(S))}function Se(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[G])we(x.i,f);else{var S=f.type,F=f.proxy;x.removeEventListener?x.removeEventListener(S,F,f.capture):x.detachEvent?x.detachEvent(Ze(S),F):x.addListener&&x.removeListener&&x.removeListener(F),(S=Cn(x))?(we(S,f),S.h==0&&(S.src=null,x[je]=null)):ne(f)}}}function Ze(f){return f in Ke?Ke[f]:Ke[f]="on"+f}function xt(f,x){if(f.da)f=!0;else{x=new H(x,this);const S=f.listener,F=f.ha||f.src;f.fa&&Se(f),f=S.call(F,x)}return f}function Cn(f){return f=f[je],f instanceof pe?f:null}var $o="__closure_events_fn_"+(Math.random()*1e9>>>0);function gu(f){return typeof f=="function"?f:(f[$o]||(f[$o]=function(x){return f.handleEvent(x)}),f[$o])}function Ut(){L.call(this),this.i=new pe(this),this.M=this,this.G=null}h(Ut,L),Ut.prototype[G]=!0,Ut.prototype.removeEventListener=function(f,x,S,F){ut(this,f,x,S,F)};function Xt(f,x){var S,F=f.G;if(F)for(S=[];F;F=F.G)S.push(F);if(f=f.M,F=x.type||x,typeof x=="string")x=new V(x,f);else if(x instanceof V)x.target=x.target||f;else{var ae=x;x=new V(F,f),le(x,ae)}ae=!0;let fe,Ie;if(S)for(Ie=S.length-1;Ie>=0;Ie--)fe=x.g=S[Ie],ae=Jt(fe,F,!0,x)&&ae;if(fe=x.g=f,ae=Jt(fe,F,!0,x)&&ae,ae=Jt(fe,F,!1,x)&&ae,S)for(Ie=0;Ie<S.length;Ie++)fe=x.g=S[Ie],ae=Jt(fe,F,!1,x)&&ae}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const S=f.g[x];for(let F=0;F<S.length;F++)ne(S[F]);delete f.g[x],f.h--}}this.G=null},Ut.prototype.J=function(f,x,S,F){return this.i.add(String(f),x,!1,S,F)},Ut.prototype.K=function(f,x,S,F){return this.i.add(String(f),x,!0,S,F)};function Jt(f,x,S,F){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let fe=0;fe<x.length;++fe){const Ie=x[fe];if(Ie&&!Ie.da&&Ie.capture==S){const Qe=Ie.listener,Wt=Ie.ha||Ie.src;Ie.fa&&we(f.i,Ie),ae=Qe.call(Wt,F)!==!1&&ae}}return ae&&!F.defaultPrevented}function Bo(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:a.setTimeout(f,x||0)}function Ir(f){f.g=Bo(()=>{f.g=null,f.i&&(f.i=!1,Ir(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class yt extends L{constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(f){L.call(this),this.h=f,this.g={}}h(_n,L);var pn=[];function pt(f){q(f.g,function(x,S){this.g.hasOwnProperty(S)&&Se(x)},f),f.g={}}_n.prototype.N=function(){_n.Z.N.call(this),pt(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wn=a.JSON.stringify,Zi=a.JSON.parse,Ls=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function es(){}function ur(){}var Bn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sr(){V.call(this,"d")}h(Sr,V);function An(){V.call(this,"c")}h(An,V);var De={},kr=null;function mn(){return kr=kr||new Ut}De.Ia="serverreachability";function bi(f){V.call(this,De.Ia,f)}h(bi,V);function Ae(f){const x=mn();Xt(x,new bi(x))}De.STAT_EVENT="statevent";function ts(f,x){V.call(this,De.STAT_EVENT,f),this.stat=x}h(ts,V);function qt(f){const x=mn();Xt(x,new ts(x,f))}De.Ja="timingevent";function Vs(f,x){V.call(this,De.Ja,f),this.size=x}h(Vs,V);function ke(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},x)}function Be(){this.g=!0}Be.prototype.ua=function(){this.g=!1};function Ht(f,x,S,F,ae,fe){f.info(function(){if(f.g)if(fe){var Ie="",Qe=fe.split("&");for(let dt=0;dt<Qe.length;dt++){var Wt=Qe[dt].split("=");if(Wt.length>1){const Dt=Wt[0];Wt=Wt[1];const Nr=Dt.split("_");Ie=Nr.length>=2&&Nr[1]=="type"?Ie+(Dt+"="+Wt+"&"):Ie+(Dt+"=redacted&")}}}else Ie=null;else Ie=fe;return"XMLHTTP REQ ("+F+") [attempt "+ae+"]: "+x+`
`+S+`
`+Ie})}function Nn(f,x,S,F,ae,fe,Ie){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ae+"]: "+x+`
`+S+`
`+fe+" "+Ie})}function cr(f,x,S,F){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+yu(f,S)+(F?" "+F:"")})}function Fs(f,x){f.info(function(){return"TIMEOUT: "+x})}Be.prototype.info=function(){};function yu(f,x){if(!f.g)return x;if(!x)return null;try{const fe=JSON.parse(x);if(fe){for(f=0;f<fe.length;f++)if(Array.isArray(fe[f])){var S=fe[f];if(!(S.length<2)){var F=S[1];if(Array.isArray(F)&&!(F.length<1)){var ae=F[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Ie=1;Ie<F.length;Ie++)F[Ie]=""}}}}return wn(fe)}catch{return x}}var ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kt;function vu(){}h(vu,es),vu.prototype.g=function(){return new XMLHttpRequest},Kt=new vu;function Ei(f){return encodeURIComponent(String(f))}function Ka(f){var x=1;f=f.split(":");const S=[];for(;x>0&&f.length;)S.push(f.shift()),x--;return f.length&&S.push(f.join(":")),S}function hr(f,x,S,F){this.j=f,this.i=x,this.l=S,this.S=F||1,this.V=new _n(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Th}function Th(){this.i=null,this.g="",this.h=!1}var Kr={},Ti={};function Cr(f,x,S){f.M=1,f.A=Qo(dr(x)),f.u=S,f.R=!0,qo(f,null)}function qo(f,x){f.F=Date.now(),Ar(f),f.B=dr(f.A);var S=f.B,F=f.S;Array.isArray(F)||(F=[String(F)]),Ah(S.i,"t",F),f.C=0,S=f.j.L,f.h=new Th,f.g=sn(f.j,S?x:null,!f.u),f.P>0&&(f.O=new yt(c(f.Y,f,f.g),f.P)),x=f.V,S=f.g,F=f.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(pn[0]=ae.toString()),ae=pn);for(let fe=0;fe<ae.length;fe++){const Ie=Oe(S,ae[fe],F||x.handleEvent,!1,x.h||x);if(!Ie)break;x.g[Ie.key]=Ie}x=f.J?ue(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),Ae(),Ht(f.i,f.v,f.B,f.l,f.S,f.u)}hr.prototype.ba=function(f){f=f.target;const x=this.O;x&&Ai(f)==3?x.j():this.Y(f)},hr.prototype.Y=function(f){try{if(f==this.g)e:{const Qe=Ai(this.g),Wt=this.g.ya(),dt=this.g.ca();if(!(Qe<3)&&(Qe!=3||this.g&&(this.h.h||this.g.la()||Bs(this.g)))){this.K||Qe!=4||Wt==7||(Wt==8||dt<=0?Ae(3):Ae(2)),Ho(this);var x=this.g.ca();this.X=x;var S=Kp(this);if(this.o=x==200,Nn(this.i,this.v,this.B,this.l,this.S,Qe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ae=this.g;if((F=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(F)){var fe=F;break t}}fe=null}if(f=fe)cr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fr(this,f);else{this.o=!1,this.m=3,qt(12),qn(this),Et(this);break e}}if(this.R){f=!0;let Dt;for(;!this.K&&this.C<S.length;)if(Dt=Ih(this,S),Dt==Ti){Qe==4&&(this.m=4,qt(14),f=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Kr){this.m=4,qt(15),cr(this.i,this.l,S,"[Invalid Chunk]"),f=!1;break}else cr(this.i,this.l,Dt,null),fr(this,Dt);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||S.length!=0||this.h.h||(this.m=1,qt(16),f=!1),this.o=this.o&&f,!f)cr(this.i,this.l,S,"[Invalid Chunked Response]"),qn(this),Et(this);else if(S.length>0&&!this.W){this.W=!0;var Ie=this.j;Ie.g==this&&Ie.aa&&!Ie.P&&(Ie.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Ws(Ie),Ie.P=!0,qt(11))}}else cr(this.i,this.l,S,null),fr(this,S);Qe==4&&qn(this),this.o&&!this.K&&(Qe==4?as(this.j,this):(this.o=!1,Ar(this)))}else Wp(this.g),x==400&&S.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),qn(this),Et(this)}}}catch{}finally{}};function Kp(f){if(!Wr(f))return f.g.la();const x=Bs(f.g);if(x==="")return"";let S="";const F=x.length,ae=Ai(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return qn(f),Et(f),"";f.h.i=new a.TextDecoder}for(let fe=0;fe<F;fe++)f.h.h=!0,S+=f.h.i.decode(x[fe],{stream:!(ae&&fe==F-1)});return x.length=0,f.h.g+=S,f.C=0,f.h.g}function Wr(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ih(f,x){var S=f.C,F=x.indexOf(`
`,S);return F==-1?Ti:(S=Number(x.substring(S,F)),isNaN(S)?Kr:(F+=1,F+S>x.length?Ti:(x=x.slice(F,F+S),f.C=F+S,x)))}hr.prototype.cancel=function(){this.K=!0,qn(this)};function Ar(f){f.T=Date.now()+f.H,_u(f,f.H)}function _u(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=ke(c(f.aa,f),x)}function Ho(f){f.D&&(a.clearTimeout(f.D),f.D=null)}hr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Fs(this.i,this.B),this.M!=2&&(Ae(),qt(17)),qn(this),this.m=2,Et(this)):_u(this,this.T-f)};function Et(f){f.j.I==0||f.K||as(f.j,f)}function qn(f){Ho(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,pt(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function fr(f,x){try{var S=f.j;if(S.I!=0&&(S.g==f||Wo(S.h,f))){if(!f.L&&Wo(S.h,f)&&S.I==3){try{var F=S.Ba.g.parse(x)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ae=F;if(ae[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<f.F)tl(S),Hs(S);else break e;Ks(S),qt(18)}}else S.xa=ae[1],0<S.xa-S.K&&ae[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=ke(c(S.Va,S),6e3));Wa(S.h)<=1&&S.ta&&(S.ta=void 0)}else ti(S,11)}else if((f.L||S.g==f)&&tl(S),!j(x))for(ae=S.Ba.g.parse(x),x=0;x<ae.length;x++){let dt=ae[x];const Dt=dt[0];if(!(Dt<=S.K))if(S.K=Dt,dt=dt[1],S.I==2)if(dt[0]=="c"){S.M=dt[1],S.ba=dt[2];const Nr=dt[3];Nr!=null&&(S.ka=Nr,S.j.info("VER="+S.ka));const ni=dt[4];ni!=null&&(S.za=ni,S.j.info("SVER="+S.za));const Pr=dt[5];Pr!=null&&typeof Pr=="number"&&Pr>0&&(F=1.5*Pr,S.O=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const Pi=f.g;if(Pi){const na=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var fe=F.h;fe.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(Gr(fe,fe.h),fe.h=null))}if(F.G){const Nu=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(F.wa=Nu,_t(F.J,F.G,Nu))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-f.F,S.j.info("Handshake RTT: "+S.T+"ms")),F=S;var Ie=f;if(F.na=il(F,F.L?F.ba:null,F.W),Ie.L){wu(F.h,Ie);var Qe=Ie,Wt=F.O;Wt&&(Qe.H=Wt),Qe.D&&(Ho(Qe),Ar(Qe)),F.g=Ie}else ea(F);S.i.length>0&&Za(S)}else dt[0]!="stop"&&dt[0]!="close"||ti(S,7);else S.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?ti(S,7):qs(S):dt[0]!="noop"&&S.l&&S.l.qa(dt),S.A=0)}}Ae(4)}catch{}}var Sh=class{constructor(f,x){this.g=f,this.map=x}};function rs(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Wa(f){return f.h?1:f.g?f.g.size:0}function Wo(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Gr(f,x){f.g?f.g.add(x):f.h=x}function wu(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}rs.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Go(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const S of f.g.values())x=x.concat(S.G);return x}return _(f.i)}var xu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(f,x){if(f){f=f.split("&");for(let S=0;S<f.length;S++){const F=f[S].indexOf("=");let ae,fe=null;F>=0?(ae=f[S].substring(0,F),fe=f[S].substring(F+1)):ae=f[S],x(ae,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function Qr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof Qr?(this.l=f.l,Ii(this,f.j),this.o=f.o,this.g=f.g,Yr(this,f.u),this.h=f.h,Ga(this,Nh(f.i)),this.m=f.m):f&&(x=String(f).match(xu))?(this.l=!1,Ii(this,x[1]||"",!0),this.o=ft(x[2]||""),this.g=ft(x[3]||"",!0),Yr(this,x[4]),this.h=ft(x[5]||"",!0),Ga(this,x[6]||"",!0),this.m=ft(x[7]||"")):(this.l=!1,this.i=new Si(null,this.l))}Qr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Xr(x,is,!0),":");var S=this.g;return(S||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Xr(x,is,!0),"@"),f.push(Ei(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&f.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Xr(S,S.charAt(0)=="/"?Eu:bu,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Xr(S,kh)),f.join("")},Qr.prototype.resolve=function(f){const x=dr(this);let S=!!f.j;S?Ii(x,f.j):S=!!f.o,S?x.o=f.o:S=!!f.g,S?x.g=f.g:S=f.u!=null;var F=f.h;if(S)Yr(x,f.u);else if(S=!!f.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(F=x.h.slice(0,ae+1)+F)}if(ae=F,ae==".."||ae==".")F="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){F=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const fe=[];for(let Ie=0;Ie<ae.length;){const Qe=ae[Ie++];Qe=="."?F&&Ie==ae.length&&fe.push(""):Qe==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),F&&Ie==ae.length&&fe.push("")):(fe.push(Qe),F=!0)}F=fe.join("/")}else F=ae}return S?x.h=F:S=f.i.toString()!=="",S?Ga(x,Nh(f.i)):S=!!f.m,S&&(x.m=f.m),x};function dr(f){return new Qr(f)}function Ii(f,x,S){f.j=S?ft(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Yr(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Ga(f,x,S){x instanceof Si?(f.i=x,Us(f.i,f.l)):(S||(x=Xr(x,Qa)),f.i=new Si(x,f.l))}function _t(f,x,S){f.i.set(x,S)}function Qo(f){return _t(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ft(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Xr(f,x,S){return typeof f=="string"?(f=encodeURI(f).replace(x,Yo),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Yo(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var is=/[#\/\?@]/g,bu=/[#\?:]/g,Eu=/[#\?]/g,Qa=/[#\?@]/g,kh=/#/g;function Si(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function ki(f){f.g||(f.g=new Map,f.h=0,f.i&&tt(f.i,function(x,S){f.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}n=Si.prototype,n.add=function(f,x){ki(this),this.i=null,f=Zt(this,f);let S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(x),this.h+=1,this};function Ch(f,x){ki(f),x=Zt(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function at(f,x){return ki(f),x=Zt(f,x),f.g.has(x)}n.forEach=function(f,x){ki(this),this.g.forEach(function(S,F){S.forEach(function(ae){f.call(x,ae,F,this)},this)},this)};function Tu(f,x){ki(f);let S=[];if(typeof x=="string")at(f,x)&&(S=S.concat(f.g.get(Zt(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)S=S.concat(f[x]);return S}n.set=function(f,x){return ki(this),this.i=null,f=Zt(this,f),at(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=Tu(this,f),f.length>0?String(f[0]):x):x};function Ah(f,x,S){Ch(f,x),S.length>0&&(f.i=null,f.g.set(Zt(f,x),_(S)),f.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let F=0;F<x.length;F++){var S=x[F];const ae=Ei(S);S=Tu(this,S);for(let fe=0;fe<S.length;fe++){let Ie=ae;S[fe]!==""&&(Ie+="="+Ei(S[fe])),f.push(Ie)}}return this.i=f.join("&")};function Nh(f){const x=new Si;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Zt(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Us(f,x){x&&!f.j&&(ki(f),f.i=null,f.g.forEach(function(S,F){const ae=F.toLowerCase();F!=ae&&(Ch(this,F),Ah(this,ae,S))},f)),f.j=x}function Ya(f,x){const S=new Be;if(a.Image){const F=new Image;F.onload=d(Jr,S,"TestLoadImage: loaded",!0,x,F),F.onerror=d(Jr,S,"TestLoadImage: error",!1,x,F),F.onabort=d(Jr,S,"TestLoadImage: abort",!1,x,F),F.ontimeout=d(Jr,S,"TestLoadImage: timeout",!1,x,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else x(!1)}function Ci(f,x){const S=new Be,F=new AbortController,ae=setTimeout(()=>{F.abort(),Jr(S,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:F.signal}).then(fe=>{clearTimeout(ae),fe.ok?Jr(S,"TestPingServer: ok",!0,x):Jr(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),Jr(S,"TestPingServer: error",!1,x)})}function Jr(f,x,S,F,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),F(S)}catch{}}function Ph(){this.g=new Ls}function zt(f){this.i=f.Sb||null,this.h=f.ab||!1}h(zt,es),zt.prototype.g=function(){return new Hn(this.i,this.h)};function Hn(f,x){Ut.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Hn,Ut),n=Hn.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,ss(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||a).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zs(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function zs(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Zr(this):ss(this),this.readyState==3&&zs(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Zr(this))},n.Na=function(f){this.g&&(this.response=f,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,ss(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=x.next();return f.join(`\r
`)};function ss(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Hn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ei(f){let x="";return q(f,function(S,F){x+=F,x+=":",x+=S,x+=`\r
`}),x}function Iu(f,x,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=ei(S),typeof f=="string"?S!=null&&Ei(S):_t(f,x,S))}function ct(f){Ut.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ct,Ut);var Su=/^https?$/i,Rh=["POST","PUT"];n=ct.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kt.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(fe){Xa(this,fe);return}if(f=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ae in F)S.set(ae,F[ae]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const fe of F.keys())S.set(fe,F.get(fe));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(fe=>fe.toLowerCase()=="content-type"),ae=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Rh,x,void 0)>=0)||F||ae||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Ie]of S)this.g.setRequestHeader(fe,Ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(fe){Xa(this,fe)}};function Xa(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,$s(f),Xo(f)}function $s(f){f.A||(f.A=!0,Xt(f,"complete"),Xt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Xt(this,"complete"),Xt(this,"abort"),Xo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xo(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ja(this):this.Xa())},n.Xa=function(){Ja(this)};function Ja(f){if(f.h&&typeof o<"u"){if(f.v&&Ai(f)==4)setTimeout(f.Ca.bind(f),0);else if(Xt(f,"readystatechange"),Ai(f)==4){f.h=!1;try{const fe=f.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var F;if(F=fe===0){let Ie=String(f.D).match(xu)[1]||null;!Ie&&a.self&&a.self.location&&(Ie=a.self.location.protocol.slice(0,-1)),F=!Su.test(Ie?Ie.toLowerCase():"")}S=F}if(S)Xt(f,"complete"),Xt(f,"success");else{f.o=6;try{var ae=Ai(f)>2?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.ca()+"]",$s(f)}}finally{Xo(f)}}}}function Xo(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const S=f.g;f.g=null,x||Xt(f,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ai(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Zi(x)}};function Bs(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Wp(f){const x={};f=(f.g&&Ai(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(j(f[F]))continue;var S=Ka(f[F]);const ae=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const fe=x[ae]||[];x[ae]=fe,fe.push(S)}K(x,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jo(f,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||x}function Zo(f){this.za=0,this.i=[],this.j=new Be,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jo("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jo("baseRetryDelayMs",5e3,f),this.Za=Jo("retryDelaySeedMs",1e4,f),this.Ta=Jo("forwardChannelMaxRetries",2,f),this.va=Jo("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new rs(f&&f.concurrentRequestLimit),this.Ba=new Ph,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Zo.prototype,n.ka=8,n.I=1,n.connect=function(f,x,S,F){qt(0),this.W=f,this.H=x||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.J=il(this,null,this.W),Za(this)};function qs(f){if(Oh(f),f.I==3){var x=f.V++,S=dr(f.J);if(_t(S,"SID",f.M),_t(S,"RID",x),_t(S,"TYPE","terminate"),os(f,S),x=new hr(f,f.j,x),x.M=2,x.A=Qo(dr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(x.A.toString(),"")}catch{}!S&&a.Image&&(new Image().src=x.A,S=!0),S||(x.g=sn(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Ar(x)}rl(f)}function Hs(f){f.g&&(Ws(f),f.g.cancel(),f.g=null)}function Oh(f){Hs(f),f.v&&(a.clearTimeout(f.v),f.v=null),tl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Za(f){if(!Ko(f.h)&&!f.m){f.m=!0;var x=f.Ea;M||C(),U||(M(),U=!0),A.add(x,f),f.D=0}}function Gp(f,x){return Wa(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=ke(c(f.Ea,f,x),nl(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const ae=new hr(this,this.j,f);let fe=this.o;if(this.U&&(fe?(fe=ue(fe),le(fe,this.U)):fe=this.U),this.u!==null||this.R||(ae.J=fe,fe=null),this.S)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(x+=F,x>4096){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=ku(this,ae,x),S=dr(this.J),_t(S,"RID",f),_t(S,"CVER",22),this.G&&_t(S,"X-HTTP-Session-Id",this.G),os(this,S),fe&&(this.R?x="headers="+Ei(ei(fe))+"&"+x:this.u&&Iu(S,this.u,fe)),Gr(this.h,ae),this.Ra&&_t(S,"TYPE","init"),this.S?(_t(S,"$req",x),_t(S,"SID","null"),ae.U=!0,Cr(ae,S,null)):Cr(ae,S,x),this.I=2}}else this.I==3&&(f?el(this,f):this.i.length==0||Ko(this.h)||el(this))};function el(f,x){var S;x?S=x.l:S=f.V++;const F=dr(f.J);_t(F,"SID",f.M),_t(F,"RID",S),_t(F,"AID",f.K),os(f,F),f.u&&f.o&&Iu(F,f.u,f.o),S=new hr(f,f.j,S,f.D+1),f.u===null&&(S.J=f.o),x&&(f.i=x.G.concat(f.i)),x=ku(f,S,1e3),S.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Gr(f.h,S),Cr(S,F,x)}function os(f,x){f.H&&q(f.H,function(S,F){_t(x,F,S)}),f.l&&q({},function(S,F){_t(x,F,S)})}function ku(f,x,S){S=Math.min(f.i.length,S);const F=f.l?c(f.l.Ka,f.l,f):null;e:{var ae=f.i;let Qe=-1;for(;;){const Wt=["count="+S];Qe==-1?S>0?(Qe=ae[0].g,Wt.push("ofs="+Qe)):Qe=0:Wt.push("ofs="+Qe);let dt=!0;for(let Dt=0;Dt<S;Dt++){var fe=ae[Dt].g;const Nr=ae[Dt].map;if(fe-=Qe,fe<0)Qe=Math.max(0,ae[Dt].g-100),dt=!1;else try{fe="req"+fe+"_"||"";try{var Ie=Nr instanceof Map?Nr:Object.entries(Nr);for(const[ni,Pr]of Ie){let Pi=Pr;l(Pr)&&(Pi=wn(Pr)),Wt.push(fe+ni+"="+encodeURIComponent(Pi))}}catch(ni){throw Wt.push(fe+"type="+encodeURIComponent("_badmap")),ni}}catch{F&&F(Nr)}}if(dt){Ie=Wt.join("&");break e}}Ie=void 0}return f=f.i.splice(0,S),x.G=f,Ie}function ea(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;M||C(),U||(M(),U=!0),A.add(x,f),f.A=0}}function Ks(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=ke(c(f.Da,f),nl(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=ke(c(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),Hs(this),Cu(this))};function Ws(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function Cu(f){f.g=new hr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=dr(f.na);_t(x,"RID","rpc"),_t(x,"SID",f.M),_t(x,"AID",f.K),_t(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&_t(x,"TO",f.ia),_t(x,"TYPE","xmlhttp"),os(f,x),f.u&&f.o&&Iu(x,f.u,f.o),f.O&&(f.g.H=f.O);var S=f.g;f=f.ba,S.M=1,S.A=Qo(dr(x)),S.u=null,S.R=!0,qo(S,f)}n.Va=function(){this.C!=null&&(this.C=null,Hs(this),Ks(this),qt(19))};function tl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function as(f,x){var S=null;if(f.g==x){tl(f),Ws(f),f.g=null;var F=2}else if(Wo(f.h,x))S=x.G,wu(f.h,x),F=1;else return;if(f.I!=0){if(x.o)if(F==1){S=x.u?x.u.length:0,x=Date.now()-x.F;var ae=f.D;F=mn(),Xt(F,new Vs(F,S)),Za(f)}else ea(f);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(F==1&&Gp(f,x)||F==2&&Ks(f)))switch(S&&S.length>0&&(x=f.h,x.i=x.i.concat(S)),ae){case 1:ti(f,5);break;case 4:ti(f,10);break;case 3:ti(f,6);break;default:ti(f,2)}}}function nl(f,x){let S=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(S*=2),S*x}function ti(f,x){if(f.j.info("Error code "+x),x==2){var S=c(f.bb,f),F=f.Ua;const ae=!F;F=new Qr(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ii(F,"https"),Qo(F),ae?Ya(F.toString(),S):Ci(F.toString(),S)}else qt(2);f.I=0,f.l&&f.l.pa(x),rl(f),Oh(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function rl(f){if(f.I=0,f.ja=[],f.l){const x=Go(f.h);(x.length!=0||f.i.length!=0)&&(w(f.ja,x),w(f.ja,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.oa()}}function il(f,x,S){var F=S instanceof Qr?dr(S):new Qr(S);if(F.g!="")x&&(F.g=x+"."+F.g),Yr(F,F.u);else{var ae=a.location;F=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const fe=new Qr(null);F&&Ii(fe,F),x&&(fe.g=x),ae&&Yr(fe,ae),S&&(fe.h=S),F=fe}return S=f.G,x=f.wa,S&&x&&_t(F,S,x),_t(F,"VER",f.ka),os(f,F),F}function sn(f,x,S){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new ct(new zt({ab:S})):new ct(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gs(){}n=Gs.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ni(){}Ni.prototype.g=function(f,x){return new Pn(f,x)};function Pn(f,x){Ut.call(this),this.g=new Zo(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!j(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!j(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new ls(this)}h(Pn,Ut),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){qs(this.g)},Pn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.v&&(S={},S.__data__=wn(f),f=S);x.i.push(new Sh(x.Ya++,f)),x.I==3&&Za(x)},Pn.prototype.N=function(){this.g.l=null,delete this.j,qs(this.g),delete this.g,Pn.Z.N.call(this)};function ta(f){Sr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const S in x){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}h(ta,Sr);function Au(){An.call(this),this.status=1}h(Au,An);function ls(f){this.g=f}h(ls,Gs),ls.prototype.ra=function(){Xt(this.g,"a")},ls.prototype.qa=function(f){Xt(this.g,new ta(f))},ls.prototype.pa=function(f){Xt(this.g,new Au)},ls.prototype.oa=function(){Xt(this.g,"b")},Ni.prototype.createWebChannel=Ni.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,cI=function(){return new Ni},uI=function(){return mn()},lI=De,uy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,Rf=ns,bt.COMPLETE="complete",aI=bt,ur.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,Ju=ur,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,oI=ct}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu="12.8.0";function QD(n){fu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new gp("@firebase/firestore");function ul(){return Oa.logLevel}function Le(n,...e){if(Oa.logLevel<=it.DEBUG){const r=e.map(s0);Oa.debug(`Firestore (${fu}): ${n}`,...r)}}function Os(n,...e){if(Oa.logLevel<=it.ERROR){const r=e.map(s0);Oa.error(`Firestore (${fu}): ${n}`,...r)}}function Yl(n,...e){if(Oa.logLevel<=it.WARN){const r=e.map(s0);Oa.warn(`Firestore (${fu}): ${n}`,...r)}}function s0(n){if(typeof n=="string")return n;try{return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,hI(n,i,r)}function hI(n,e,r){let i=`FIRESTORE (${fu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw Os(i),new Error(i)}function gt(n,e,r,i){let s="Unexpected state";typeof r=="string"?s=r:i=r,n||hI(e,s,i)}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends wi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Vn.UNAUTHENTICATED))}shutdown(){}}class XD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class JD{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){gt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Is,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Is)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string",31837,{l:i}),new fI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new Vn(e)}}class ZD{constructor(e,r,i){this.P=e,this.T=r,this.I=i,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class eM{constructor(e,r,i){this.P=e,this.T=r,this.I=i}getToken(){return Promise.resolve(new ZD(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tM{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){gt(this.o===void 0,3512);const i=o=>{o.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(gt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new yx(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<n;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=nM(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function st(n,e){return n<e?-1:n>e?1:0}function cy(n,e){const r=Math.min(n.length,e.length);for(let i=0;i<r;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return jm(s)===jm(o)?st(s,o):jm(s)?1:-1}return st(n.length,e.length)}const rM=55296,iM=57343;function jm(n){const e=n.charCodeAt(0);return e>=rM&&e<=iM}function Xl(n,e,r){return n.length===e.length&&n.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__name__";class Mi{constructor(e,r,i){r===void 0?r=0:r>e.length&&qe(637,{offset:r,range:e.length}),i===void 0?i=e.length-r:i>e.length-r&&qe(1746,{length:i,range:e.length-r}),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Mi.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return st(e.length,r.length)}static compareSegments(e,r){const i=Mi.isNumericId(e),s=Mi.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Mi.extractNumericId(e).compare(Mi.extractNumericId(r)):cy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eo.fromString(e.substring(4,e.length-2))}}class At extends Mi{construct(e,r,i){return new At(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(_e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new At(r)}static emptyPath(){return new At([])}}const sM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Mi{construct(e,r,i){return new En(e,r,i)}static isValidIdentifier(e){return sM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vx}static keyField(){return new En([vx])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Ue(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ue(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ue(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new Ue(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(r)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(At.fromString(e))}static fromName(e){return new $e(At.fromString(e).popFirst(5))}static empty(){return new $e(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return At.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new At(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n,e,r){if(!r)throw new Ue(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oM(n,e,r,i){if(e===!0&&i===!0)throw new Ue(_e.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function _x(n){if(!$e.isDocumentKey(n))throw new Ue(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if($e.isDocumentKey(n))throw new Ue(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function a0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function Co(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=a0(n);throw new Ue(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,e){const r={typeString:n};return e&&(r.value=e),r}function ph(n,e){if(!pI(n))throw new Ue(_e.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){r=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){r=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${i}' field to equal '${o.value}'`;break}}if(r)throw new Ue(_e.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=-62135596800,bx=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*bx);return new Nt(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<xx)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ph(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:nn("string",Nt._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Nt(0,0))}static max(){return new We(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=-1;function aM(n,e){const r=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=We.fromTimestamp(i===1e9?new Nt(r+1,0):new Nt(r,i));return new Ao(s,$e.empty(),e)}function lM(n){return new Ao(n.readTime,n.key,Hc)}class Ao{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new Ao(We.min(),$e.empty(),Hc)}static max(){return new Ao(We.max(),$e.empty(),Hc)}}function uM(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(n.documentKey,e.documentKey),r!==0?r:st(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==cM)throw n;Le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ve((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ve?r:ve.resolve(r)}catch(r){return ve.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ve.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ve.reject(r)}static resolve(e){return new ve((r,i)=>{r(e)})}static reject(e){return new ve((r,i)=>{i(e)})}static waitFor(e){return new ve((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=ve.resolve(!1);for(const i of e)r=r.next(s=>s?ve.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new ve((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(d=>{a[c]=d,++l,l===o&&i(a)},d=>s(d))}})}static doWhile(e,r){return new ve((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function fM(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function pu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-1;function xp(n){return n==null}function bd(n){return n===0&&1/n==-1/0}function dM(n){return typeof n=="number"&&Number.isInteger(n)&&!bd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="";function pM(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e=Ex(e)),e=mM(n.get(r),e);return Ex(e)}function mM(n,e){let r=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":r+="";break;case mI:r+="";break;default:r+=o}}return r}function Ex(n){return n+mI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){let e=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function Fo(n,e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function gI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,r){this.comparator=e,this.root=r||bn.EMPTY}insert(e,r){return new Ft(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??bn.RED,this.left=s??bn.EMPTY,this.right=o??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new bn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,r,i,s,o){return this}insert(e,r,i){return new bn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new hn(this.comparator);return r.data=e,r}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new vr([])}unionWith(e){let r=new hn(En.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new vr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yI("Invalid base64 string: "+o):o}}(e);return new Sn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new Sn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const gM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(n){if(gt(!!n,39018),typeof n=="string"){let e=0;const r=gM.exec(n);if(gt(!!r,46558,{timestamp:n}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qt(n.seconds),nanos:Qt(n.nanos)}}function Qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Po(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="server_timestamp",_I="__type__",wI="__previous_value__",xI="__local_write_time__";function u0(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[_I])==null?void 0:i.stringValue)===vI}function bp(n){const e=n.mapValue.fields[wI];return u0(e)?bp(e):e}function Kc(n){const e=No(n.mapValue.fields[xI].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,r,i,s,o,a,l,u,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=h}}const Ed="(default)";class Wc{constructor(e,r){this.projectId=e,this.database=r||Ed}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database===Ed}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}function vM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ue(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="__type__",_M="__max__",sf={mapValue:{}},EI="__vector__",Td="value";function Ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?u0(n)?4:xM(n)?9007199254740991:wM(n)?10:11:qe(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const r=Ro(n);if(r!==Ro(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kc(n).isEqual(Kc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=No(s.timestampValue),l=No(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Po(s.bytesValue).isEqual(Po(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Qt(s.geoPointValue.latitude)===Qt(o.geoPointValue.latitude)&&Qt(s.geoPointValue.longitude)===Qt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Qt(s.integerValue)===Qt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Qt(s.doubleValue),l=Qt(o.doubleValue);return a===l?bd(a)===bd(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Xl(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Tx(a)!==Tx(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qi(a[u],l[u])))return!1;return!0}(n,e);default:return qe(52216,{left:n})}}function Gc(n,e){return(n.values||[]).find(r=>Qi(r,e))!==void 0}function Jl(n,e){if(n===e)return 0;const r=Ro(n),i=Ro(e);if(r!==i)return st(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Qt(o.integerValue||o.doubleValue),u=Qt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return Sx(n.timestampValue,e.timestampValue);case 4:return Sx(Kc(n),Kc(e));case 5:return cy(n.stringValue,e.stringValue);case 6:return function(o,a){const l=Po(o),u=Po(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=st(l[c],u[c]);if(d!==0)return d}return st(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const l=st(Qt(o.latitude),Qt(a.latitude));return l!==0?l:st(Qt(o.longitude),Qt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var m,_,w,I;const l=o.fields||{},u=a.fields||{},c=(m=l[Td])==null?void 0:m.arrayValue,d=(_=u[Td])==null?void 0:_.arrayValue,h=st(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((I=d==null?void 0:d.values)==null?void 0:I.length)||0);return h!==0?h:kx(c,d)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===sf.mapValue&&a===sf.mapValue)return 0;if(o===sf.mapValue)return 1;if(a===sf.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const m=cy(u[h],d[h]);if(m!==0)return m;const _=Jl(l[u[h]],c[d[h]]);if(_!==0)return _}return st(u.length,d.length)}(n.mapValue,e.mapValue);default:throw qe(23264,{he:r})}}function Sx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return st(n,e);const r=No(n),i=No(e),s=st(r.seconds,i.seconds);return s!==0?s:st(r.nanos,i.nanos)}function kx(n,e){const r=n.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=Jl(r[s],i[s]);if(o)return o}return st(r.length,i.length)}function Zl(n){return hy(n)}function hy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=No(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return Po(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return $e.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=hy(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${hy(r.fields[a])}`;return s+"}"}(n.mapValue):qe(61005,{value:n})}function Of(n){switch(Ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bp(n);return e?16+Of(e):16;case 5:return 2*n.stringValue.length;case 6:return Po(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Of(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Fo(i.fields,(o,a)=>{s+=o.length+Of(a)}),s}(n.mapValue);default:throw qe(13486,{value:n})}}function fy(n){return!!n&&"integerValue"in n}function c0(n){return!!n&&"arrayValue"in n}function Cx(n){return!!n&&"nullValue"in n}function Ax(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jf(n){return!!n&&"mapValue"in n}function wM(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[bI])==null?void 0:i.stringValue)===EI}function yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fo(n.mapValue.fields,(r,i)=>e.mapValue.fields[r]=yc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=yc(n.arrayValue.values[r]);return e}return{...n}}function xM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!jf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(r)}setAll(e){let r=En.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=yc(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());jf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];jf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Fo(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new nr(yc(this.value))}}function TI(n){const e=[];return Fo(n.fields,(r,i)=>{const s=new En([r]);if(jf(i)){const o=TI(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Un(e,0,We.min(),We.min(),We.min(),nr.empty(),0)}static newFoundDocument(e,r,i,s){return new Un(e,1,r,We.min(),i,s,0)}static newNoDocument(e,r){return new Un(e,2,r,We.min(),We.min(),nr.empty(),0)}static newUnknownDocument(e,r){return new Un(e,3,r,We.min(),We.min(),nr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,r){this.position=e,this.inclusive=r}}function Nx(n,e,r){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?i=$e.comparator($e.fromName(a.referenceValue),r.key):i=Jl(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Px(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Qi(n.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,r="asc"){this.field=e,this.dir=r}}function bM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class an extends II{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new TM(e,r,i):r==="array-contains"?new kM(e,i):r==="in"?new CM(e,i):r==="not-in"?new AM(e,i):r==="array-contains-any"?new NM(e,i):new an(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new IM(e,i):new SM(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Jl(r,this.value)):r!==null&&Ro(this.value)===Ro(r)&&this.matchesComparison(Jl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends II{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Yi(e,r)}matches(e){return SI(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SI(n){return n.op==="and"}function kI(n){return EM(n)&&SI(n)}function EM(n){for(const e of n.filters)if(e instanceof Yi)return!1;return!0}function dy(n){if(n instanceof an)return n.field.canonicalString()+n.op.toString()+Zl(n.value);if(kI(n))return n.filters.map(e=>dy(e)).join(",");{const e=n.filters.map(r=>dy(r)).join(",");return`${n.op}(${e})`}}function CI(n,e){return n instanceof an?function(i,s){return s instanceof an&&i.op===s.op&&i.field.isEqual(s.field)&&Qi(i.value,s.value)}(n,e):n instanceof Yi?function(i,s){return s instanceof Yi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&CI(a,s.filters[l]),!0):!1}(n,e):void qe(19439)}function AI(n){return n instanceof an?function(r){return`${r.field.canonicalString()} ${r.op} ${Zl(r.value)}`}(n):n instanceof Yi?function(r){return r.op.toString()+" {"+r.getFilters().map(AI).join(" ,")+"}"}(n):"Filter"}class TM extends an{constructor(e,r,i){super(e,r,i),this.key=$e.fromName(i.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class IM extends an{constructor(e,r){super(e,"in",r),this.keys=NI("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class SM extends an{constructor(e,r){super(e,"not-in",r),this.keys=NI("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function NI(n,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(i=>$e.fromName(i.referenceValue))}class kM extends an{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return c0(r)&&Gc(r.arrayValue,this.value)}}class CM extends an{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Gc(this.value.arrayValue,r)}}class AM extends an{constructor(e,r){super(e,"not-in",r)}matches(e){if(Gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Gc(this.value.arrayValue,r)}}class NM extends an{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!c0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Gc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function Rx(n,e=null,r=[],i=[],s=null,o=null,a=null){return new PM(n,e,r,i,s,o,a)}function h0(n){const e=Ge(n);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>dy(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),xp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Zl(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Zl(i)).join(",")),e.Te=r}return e.Te}function f0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!bM(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!CI(n.filters[r],e.filters[r]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Px(n.startAt,e.startAt)&&Px(n.endAt,e.endAt)}function py(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function RM(n,e,r,i,s,o,a,l){return new Ep(n,e,r,i,s,o,a,l)}function d0(n){return new Ep(n)}function Ox(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OM(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function jM(n){return n.collectionGroup!==null}function vc(n){const e=Ge(n);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new hn(En.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Sd(o,i))}),r.has(En.keyField().canonicalString())||e.Ie.push(new Sd(En.keyField(),i))}return e.Ie}function Bi(n){const e=Ge(n);return e.Ee||(e.Ee=DM(e,vc(n))),e.Ee}function DM(n,e){if(n.limitType==="F")return Rx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Sd(s.field,o)});const r=n.endAt?new Id(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Id(n.startAt.position,n.startAt.inclusive):null;return Rx(n.path,n.collectionGroup,e,n.filters,n.limit,r,i)}}function my(n,e,r){return new Ep(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function Tp(n,e){return f0(Bi(n),Bi(e))&&n.limitType===e.limitType}function PI(n){return`${h0(Bi(n))}|lt:${n.limitType}`}function cl(n){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>AI(s)).join(", ")}]`),xp(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>Zl(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>Zl(s)).join(",")),`Target(${i})`}(Bi(n))}; limitType=${n.limitType})`}function Ip(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):$e.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of vc(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Nx(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,vc(i),s)||i.endAt&&!function(a,l,u){const c=Nx(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,vc(i),s))}(n,e)}function MM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RI(n){return(e,r)=>{let i=!1;for(const s of vc(n)){const o=LM(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function LM(n,e,r){const i=n.field.isKeyField()?$e.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Jl(u,c):qe(42886)}(n.field,e,r);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return gI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Ft($e.comparator);function js(){return VM}const OI=new Ft($e.comparator);function Zu(...n){let e=OI;for(const r of n)e=e.insert(r.key,r);return e}function jI(n){let e=OI;return n.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function ga(){return _c()}function DI(){return _c()}function _c(){return new qa(n=>n.toString(),(n,e)=>n.isEqual(e))}const FM=new Ft($e.comparator),UM=new hn($e.comparator);function ot(...n){let e=UM;for(const r of n)e=e.add(r);return e}const zM=new hn(st);function $M(){return zM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function MI(n){return{integerValue:""+n}}function BM(n,e){return dM(e)?MI(e):p0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this._=void 0}}function qM(n,e,r){return n instanceof kd?function(s,o){const a={fields:{[_I]:{stringValue:vI},[xI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&u0(o)&&(o=bp(o)),o&&(a.fields[wI]=o),{mapValue:a}}(r,e):n instanceof Qc?VI(n,e):n instanceof Yc?FI(n,e):function(s,o){const a=LI(s,o),l=jx(a)+jx(s.Ae);return fy(a)&&fy(s.Ae)?MI(l):p0(s.serializer,l)}(n,e)}function HM(n,e,r){return n instanceof Qc?VI(n,e):n instanceof Yc?FI(n,e):r}function LI(n,e){return n instanceof Cd?function(i){return fy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class kd extends Sp{}class Qc extends Sp{constructor(e){super(),this.elements=e}}function VI(n,e){const r=UI(e);for(const i of n.elements)r.some(s=>Qi(s,i))||r.push(i);return{arrayValue:{values:r}}}class Yc extends Sp{constructor(e){super(),this.elements=e}}function FI(n,e){let r=UI(e);for(const i of n.elements)r=r.filter(s=>!Qi(s,i));return{arrayValue:{values:r}}}class Cd extends Sp{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function jx(n){return Qt(n.integerValue||n.doubleValue)}function UI(n){return c0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Qc&&s instanceof Qc||i instanceof Yc&&s instanceof Yc?Xl(i.elements,s.elements,Qi):i instanceof Cd&&s instanceof Cd?Qi(i.Ae,s.Ae):i instanceof kd&&s instanceof kd}(n.transform,e.transform)}class WM{constructor(e,r){this.version=e,this.transformResults=r}}class Br{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kp{}function zI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new m0(n.key,Br.none()):new mh(n.key,n.data,Br.none());{const r=n.data,i=nr.empty();let s=new hn(En.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Uo(n.key,i,new vr(s.toArray()),Br.none())}}function GM(n,e,r){n instanceof mh?function(s,o,a){const l=s.value.clone(),u=Mx(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,r):n instanceof Uo?function(s,o,a){if(!Df(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Mx(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll($I(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function wc(n,e,r,i){return n instanceof mh?function(o,a,l,u){if(!Df(o.precondition,a))return l;const c=o.value.clone(),d=Lx(o.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,r,i):n instanceof Uo?function(o,a,l,u){if(!Df(o.precondition,a))return l;const c=Lx(o.fieldTransforms,u,a),d=a.data;return d.setAll($I(o)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,r,i):function(o,a,l){return Df(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,r)}function QM(n,e){let r=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=LI(i.transform,s||null);o!=null&&(r===null&&(r=nr.empty()),r.set(i.field,o))}return r||null}function Dx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Xl(i,s,(o,a)=>KM(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mh extends kp{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Uo extends kp{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $I(n){const e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=n.data.field(r);e.set(r,i)}}),e}function Mx(n,e,r){const i=new Map;gt(n.length===r.length,32656,{Ve:r.length,de:n.length});for(let s=0;s<r.length;s++){const o=n[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,HM(a,l,r[s]))}return i}function Lx(n,e,r){const i=new Map;for(const s of n){const o=s.transform,a=r.data.field(s.field);i.set(s.field,qM(o,a,e))}return i}class m0 extends kp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YM extends kp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&GM(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=wc(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=wc(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=DI();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=zI(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(We.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ot())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(r,i)=>Dx(r,i))&&Xl(this.baseMutations,e.baseMutations,(r,i)=>Dx(r,i))}}class g0{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){gt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return FM}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new g0(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,lt;function e3(n){switch(n){case _e.OK:return qe(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function BI(n){if(n===void 0)return Os("GRPC error has no .code"),_e.UNKNOWN;switch(n){case en.OK:return _e.OK;case en.CANCELLED:return _e.CANCELLED;case en.UNKNOWN:return _e.UNKNOWN;case en.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case en.INTERNAL:return _e.INTERNAL;case en.UNAVAILABLE:return _e.UNAVAILABLE;case en.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case en.NOT_FOUND:return _e.NOT_FOUND;case en.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case en.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case en.ABORTED:return _e.ABORTED;case en.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case en.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case en.DATA_LOSS:return _e.DATA_LOSS;default:return qe(39323,{code:n})}}(lt=en||(en={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new Eo([4294967295,4294967295],0);function Vx(n){const e=t3().encode(n),r=new sI;return r.update(e),new Uint8Array(r.digest())}function Fx(n){const e=new DataView(n.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Eo([r,i],0),new Eo([s,o],0)]}class y0{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new ec(`Invalid padding: ${r}`);if(i<0)throw new ec(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new ec(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Eo.fromNumber(this.ge)}ye(e,r,i){let s=e.add(r.multiply(Eo.fromNumber(i)));return s.compare(n3)===1&&(s=new Eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Vx(e),[i,s]=Fx(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new y0(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=Vx(e),[i,s]=Fx(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.be(a)}}be(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,gh.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Cp(We.min(),s,new Ft(st),js(),ot())}}class gh{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new gh(i,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,r,i,s){this.Se=e,this.removedTargetIds=r,this.key=i,this.De=s}}class qI{constructor(e,r){this.targetId=e,this.Ce=r}}class HI{constructor(e,r,i=Sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Ux{constructor(){this.ve=0,this.Fe=zx(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),r=ot(),i=ot();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:qe(38017,{changeType:o})}}),new gh(this.Me,this.xe,e,r,i)}Ke(){this.Oe=!1,this.Fe=zx()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class r3{constructor(e){this.Ge=e,this.ze=new Map,this.je=js(),this.He=of(),this.Je=of(),this.Ze=new Ft(st)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const i=this.nt(r);switch(e.state){case 0:this.rt(r)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),i.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((i,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,i=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(py(o))if(i===0){const a=new $e(o.path);this.et(r,a,Un.newNoDocument(a,We.min()))}else gt(i===1,20013,{expectedCount:i});else{const a=this._t(r);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=Po(i).toUint8Array()}catch(u){if(u instanceof yI)return Yl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new y0(a,s,o)}catch(u){return Yl(u instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,i){return r.Ce.count===i-this.Pt(e,r.targetId)?0:2}Pt(e,r){const i=this.Ge.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&py(l.target)){const u=new $e(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Un.newNoDocument(u,e))}o.Be&&(r.set(a,o.ke()),o.Ke())}});let i=ot();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Cp(e,r,this.Ze,this.je,i);return this.je=js(),this.He=of(),this.Je=of(),this.Ze=new Ft(st),s}Ye(e,r){if(!this.rt(e))return;const i=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,i),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),i&&(this.je=this.je.insert(r,i))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new Ux,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new hn(st),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new hn(st),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Le("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ux),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function of(){return new Ft($e.comparator)}function zx(){return new Ft($e.comparator)}const i3={asc:"ASCENDING",desc:"DESCENDING"},s3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o3={and:"AND",or:"OR"};class a3{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function gy(n,e){return n.useProto3Json||xp(e)?e:{value:e}}function Ad(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l3(n,e){return Ad(n,e.toTimestamp())}function qi(n){return gt(!!n,49232),We.fromTimestamp(function(r){const i=No(r);return new Nt(i.seconds,i.nanos)}(n))}function v0(n,e){return yy(n,e).canonicalString()}function yy(n,e){const r=function(s){return new At(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?r:r.child(e)}function WI(n){const e=At.fromString(n);return gt(JI(e),10190,{key:e.toString()}),e}function vy(n,e){return v0(n.databaseId,e.path)}function Dm(n,e){const r=WI(e);if(r.get(1)!==n.databaseId.projectId)throw new Ue(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Ue(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new $e(QI(r))}function GI(n,e){return v0(n.databaseId,e)}function u3(n){const e=WI(n);return e.length===4?At.emptyPath():QI(e)}function _y(n){return new At(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QI(n){return gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $x(n,e,r){return{name:vy(n,e),fields:r.value.mapValue.fields}}function c3(n,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:qe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(gt(d===void 0||typeof d=="string",58123),Sn.fromBase64String(d||"")):(gt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Sn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const d=c.code===void 0?_e.UNKNOWN:BI(c.code);return new Ue(d,c.message||"")}(a);r=new HI(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Dm(n,i.document.name),o=qi(i.document.updateTime),a=i.document.createTime?qi(i.document.createTime):We.min(),l=new nr({mapValue:{fields:i.document.fields}}),u=Un.newFoundDocument(s,o,a,l),c=i.targetIds||[],d=i.removedTargetIds||[];r=new Mf(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Dm(n,i.document),o=i.readTime?qi(i.readTime):We.min(),a=Un.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Mf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Dm(n,i.document),o=i.removedTargetIds||[];r=new Mf([],o,s,null)}else{if(!("filter"in e))return qe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new ZM(s,o),l=i.targetId;r=new qI(l,a)}}return r}function h3(n,e){let r;if(e instanceof mh)r={update:$x(n,e.key,e.value)};else if(e instanceof m0)r={delete:vy(n,e.key)};else if(e instanceof Uo)r={update:$x(n,e.key,e.data),updateMask:w3(e.fieldMask)};else{if(!(e instanceof YM))return qe(16599,{dt:e.type});r={verify:vy(n,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof kd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cd)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw qe(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:l3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:qe(27497)}(n,e.precondition)),r}function f3(n,e){return n&&n.length>0?(gt(e!==void 0,14353),n.map(r=>function(s,o){let a=s.updateTime?qi(s.updateTime):qi(o);return a.isEqual(We.min())&&(a=qi(o)),new WM(a,s.transformResults||[])}(r,e))):[]}function d3(n,e){return{documents:[GI(n,e.path)]}}function p3(n,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=GI(n,s);const o=function(c){if(c.length!==0)return XI(Yi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:hl(m.field),direction:y3(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=gy(n,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function m3(n){let e=u3(n.parent);const r=n.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){gt(i===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];r.where&&(o=function(h){const m=YI(h);return m instanceof Yi&&kI(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(m=>function(w){return new Sd(fl(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,xp(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(h){const m=!!h.before,_=h.values||[];return new Id(_,m)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const m=!h.before,_=h.values||[];return new Id(_,m)}(r.endAt)),RM(e,s,a,o,l,"F",u,c)}function g3(n,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function YI(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=fl(r.unaryFilter.field);return an.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=fl(r.unaryFilter.field);return an.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fl(r.unaryFilter.field);return an.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fl(r.unaryFilter.field);return an.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}}(n):n.fieldFilter!==void 0?function(r){return an.create(fl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return Yi.create(r.compositeFilter.filters.map(i=>YI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qe(1026)}}(r.compositeFilter.op))}(n):qe(30097,{filter:n})}function y3(n){return i3[n]}function v3(n){return s3[n]}function _3(n){return o3[n]}function hl(n){return{fieldPath:n.canonicalString()}}function fl(n){return En.fromServerFormat(n.fieldPath)}function XI(n){return n instanceof an?function(r){if(r.op==="=="){if(Ax(r.value))return{unaryFilter:{field:hl(r.field),op:"IS_NAN"}};if(Cx(r.value))return{unaryFilter:{field:hl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ax(r.value))return{unaryFilter:{field:hl(r.field),op:"IS_NOT_NAN"}};if(Cx(r.value))return{unaryFilter:{field:hl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(r.field),op:v3(r.op),value:r.value}}}(n):n instanceof Yi?function(r){const i=r.getFilters().map(s=>XI(s));return i.length===1?i[0]:{compositeFilter:{op:_3(r.op),filters:i}}}(n):qe(54877,{filter:n})}function w3(n){const e=[];return n.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function JI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function ZI(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,r,i,s,o=We.min(),a=We.min(),l=Sn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.yt=e}}function b3(n){const e=m3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?my(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.Sn=new T3}addToCollectionParentIndex(e,r){return this.Sn.add(r),ve.resolve()}getCollectionParents(e,r){return ve.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return ve.resolve()}deleteFieldIndex(e,r){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,r){return ve.resolve()}getDocumentsMatchingTarget(e,r){return ve.resolve(null)}getIndexType(e,r){return ve.resolve(0)}getFieldIndexes(e,r){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,r){return ve.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,r){return ve.resolve(Ao.min())}updateCollectionGroup(e,r,i){return ve.resolve()}updateIndexEntries(e,r){return ve.resolve()}}class T3{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new hn(At.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new hn(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eS=41943040;class er{static withCacheSize(e){return new er(e,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(eS,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new eu(0)}static ar(){return new eu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LruGarbageCollector",I3=1048576;function Hx([n,e],[r,i]){const s=st(n,r);return s===0?st(e,i):s}class S3{constructor(e){this.Pr=e,this.buffer=new hn(Hx),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Hx(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class k3{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Le(qx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){pu(r)?Le(qx,"Ignoring IndexedDB error during garbage collection: ",r):await du(r)}await this.Ar(3e5)})}}class C3{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return ve.resolve(wp.ce);const i=new S3(r);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.Vr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Bx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let i,s,o,a,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,l=Date.now(),this.removeTargets(e,i,r))).next(h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),ul()<=it.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:h})))}}function A3(n,e){return new C3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.changes=new qa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?ve.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&wc(i.mutation,s,vr.empty(),Nt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,ot()).next(()=>i))}getLocalViewOfDocuments(e,r,i=ot()){const s=ga();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=Zu();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=ga();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,ot()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=js();const a=_c(),l=function(){return _c()}();return r.forEach((u,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Uo)?o=o.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),wc(d.mutation,c,d.mutation.getFieldMask(),Nt.now())):a.set(c.key,vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,d)=>a.set(c,d)),r.forEach((c,d)=>l.set(c,new P3(d,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,r){const i=_c();let s=new Ft((a,l)=>a-l),o=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let d=i.get(u)||vr.empty();d=l.applyToLocalView(c,d),i.set(u,d);const h=(s.get(l.batchId)||ot()).add(u);s=s.insert(l.batchId,h)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,h=DI();d.forEach(m=>{if(!o.has(m)){const _=zI(r.get(m),i.get(m));_!==null&&h.set(m,_),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ve.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return OM(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):jM(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):ve.resolve(ga());let l=Hc,u=o;return a.next(c=>ve.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(d)?ve.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,ot())).next(d=>({batchId:l,changes:jI(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(i=>{let s=Zu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=Zu();return this.indexManager.getCollectionParents(e,o).next(l=>ve.forEach(l,u=>{const c=function(h,m){return new Ep(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(d=>{d.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Un.newInvalidDocument(d)))});let l=Zu();return a.forEach((u,c)=>{const d=o.get(u);d!==void 0&&wc(d.mutation,c,vr.empty(),Nt.now()),Ip(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return ve.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:qi(s.createTime)}}(r)),ve.resolve()}getNamedQuery(e,r){return ve.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:b3(s.bundledQuery),readTime:qi(s.readTime)}}(r)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.overlays=new Ft($e.comparator),this.Lr=new Map}getOverlay(e,r){return ve.resolve(this.overlays.get(r))}getOverlays(e,r){const i=ga();return ve.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.bt(e,r,o)}),ve.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),ve.resolve()}getOverlaysForCollection(e,r,i){const s=ga(),o=r.length+1,a=new $e(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ve.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new Ft((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let d=o.get(c.largestBatchId);d===null&&(d=ga(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=ga(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return ve.resolve(l)}bt(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new JM(r,i));let o=this.Lr.get(r);o===void 0&&(o=ot(),this.Lr.set(r,o)),this.Lr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.kr=new hn(gn.Kr),this.qr=new hn(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const i=new gn(e,r);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Wr(new gn(e,r))}Qr(e,r){e.forEach(i=>this.removeReference(i,r))}Gr(e){const r=new $e(new At([])),i=new gn(r,e),s=new gn(r,e+1),o=[];return this.qr.forEachInRange([i,s],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new $e(new At([])),i=new gn(r,e),s=new gn(r,e+1);let o=ot();return this.qr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new gn(e,0),i=this.kr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class gn{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return $e.comparator(e.key,r.key)||st(e.Hr,r.Hr)}static Ur(e,r){return st(e.Hr,r.Hr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new hn(gn.Kr)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XM(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new gn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ve.resolve(a)}lookupMutationBatch(e,r){return ve.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Xr(i),o=s<0?0:s;return ve.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?l0:this.Yn-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new gn(r,0),s=new gn(r,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],a=>{const l=this.Zr(a.Hr);o.push(l)}),ve.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new hn(st);return r.forEach(s=>{const o=new gn(s,0),a=new gn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),ve.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;$e.isDocumentKey(o)||(o=o.child(""));const a=new gn(new $e(o),0);let l=new hn(st);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},a),ve.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){gt(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ve.forEach(r.mutations,s=>{const o=new gn(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,r){const i=new gn(r,0),s=this.Jr.firstAfterOrEqual(i);return ve.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.ti=e,this.docs=function(){return new Ft($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return ve.resolve(i?i.document.mutableCopy():Un.newInvalidDocument(r))}getEntries(e,r){let i=js();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Un.newInvalidDocument(s))}),ve.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=js();const a=r.path,l=new $e(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||uM(lM(d),i)<=0||(s.has(d.key)||Ip(r,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,r,i,s){qe(9500)}ni(e,r){return ve.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new V3(this)}getSize(e){return ve.resolve(this.size)}}class V3 extends N3{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),ve.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.persistence=e,this.ri=new qa(r=>h0(r),f0),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new _0,this.targetCount=0,this.oi=eu._r()}forEachTarget(e,r){return this.ri.forEach((i,s)=>r(s)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ii&&(this.ii=r),ve.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new eu(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,ve.resolve()}updateTargetData(e,r){return this.lr(r),ve.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ve.waitFor(o).next(()=>s)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,r){const i=this.ri.get(r)||null;return ve.resolve(i)}addMatchingKeys(e,r,i){return this.si.$r(r,i),ve.resolve()}removeMatchingKeys(e,r,i){this.si.Qr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ve.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),ve.resolve()}getMatchingKeysForTargetId(e,r){const i=this.si.jr(r);return ve.resolve(i)}containsKey(e,r){return ve.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,r){this._i={},this.overlays={},this.ai=new wp(0),this.ui=!1,this.ui=!0,this.ci=new D3,this.referenceDelegate=e(this),this.li=new F3(this),this.indexManager=new E3,this.remoteDocumentCache=function(s){return new L3(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new x3(r),this.Pi=new O3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new j3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this._i[e.toKey()];return i||(i=new M3(r,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,i){Le("MemoryPersistence","Starting transaction:",e);const s=new U3(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,r){return ve.or(Object.values(this._i).map(i=>()=>i.containsKey(e,r)))}}class U3 extends hM{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Ri=new _0,this.Ai=null}static Vi(e){return new w0(e)}get di(){if(this.Ai)return this.Ai;throw qe(60996)}addReference(e,r,i){return this.Ri.addReference(i,r),this.di.delete(i.toString()),ve.resolve()}removeReference(e,r,i){return this.Ri.removeReference(i,r),this.di.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),ve.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.di,i=>{const s=$e.fromPath(i);return this.mi(e,s).next(o=>{o||r.removeEntry(s,We.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(i=>{i?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return ve.or([()=>ve.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class Nd{constructor(e,r){this.persistence=e,this.fi=new qa(i=>pM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=A3(this,r)}static Vi(e,r){return new Nd(e,r)}Ti(){}Ii(e){return ve.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}pr(e){let r=0;return this.mr(e,i=>{r++}).next(()=>r)}mr(e,r){return ve.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?ve.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(i++,o.removeEntry(a,We.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),ve.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ve.resolve()}removeReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),ve.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Of(e.data.value)),r}wr(e,r,i){return ve.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return ve.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Ts=i,this.Is=s}static Es(e,r){let i=ot(),s=ot();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new x0(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return SO()?8:fM($n())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.gs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new z3;return this.ys(e,r,a).next(l=>{if(o.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>o.result)}ws(e,r,i,s){return i.documentReadCount<this.Vs?(ul()<=it.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",cl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ve.resolve()):(ul()<=it.DEBUG&&Le("QueryEngine","Query:",cl(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(ul()<=it.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",cl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(r))):ve.resolve())}gs(e,r){if(Ox(r))return ve.resolve(null);let i=Bi(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=my(r,null,"F"),i=Bi(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ot(...o);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.bs(r,l);return this.Ss(r,c,a,u.readTime)?this.gs(e,my(r,null,"F")):this.Ds(e,c,r,u)}))})))}ps(e,r,i,s){return Ox(r)||s.isEqual(We.min())?ve.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(r,o);return this.Ss(r,a,i,s)?ve.resolve(null):(ul()<=it.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cl(r)),this.Ds(e,a,r,aM(s,Hc)).next(l=>l))})}bs(e,r){let i=new hn(RI(e));return r.forEach((s,o)=>{Ip(e,o)&&(i=i.add(o))}),i}Ss(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,r,i){return ul()<=it.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",cl(r)),this.fs.getDocumentsMatchingQuery(e,r,Ao.min(),i)}Ds(e,r,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LocalStore",B3=3e8;class q3{constructor(e,r,i,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new Ft(st),this.Fs=new qa(o=>h0(o),f0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function H3(n,e,r,i){return new q3(n,e,r,i)}async function nS(n,e){const r=Ge(n);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.Os(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=ot();for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function K3(n,e){const r=Ge(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const h=c.batch,m=h.keys();let _=ve.resolve();return m.forEach(w=>{_=_.next(()=>d.getEntry(u,w)).next(I=>{const P=c.docVersions.get(w);gt(P!==null,48541),I.version.compareTo(P)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ot();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function rS(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function W3(n,e){const r=Ge(n),i=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;l.push(r.li.removeMatchingKeys(o,d.removedDocuments,h).next(()=>r.li.addMatchingKeys(o,d.addedDocuments,h)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?_=_.withResumeToken(Sn.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(h,_),function(I,P,b){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=B3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,_,d)&&l.push(r.li.updateTargetData(o,_))});let u=js(),c=ot();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,d))}),l.push(G3(o,a,e.documentUpdates).next(d=>{u=d.Bs,c=d.Ls})),!i.isEqual(We.min())){const d=r.li.getLastRemoteSnapshotVersion(o).next(h=>r.li.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(d)}return ve.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.vs=s,o))}function G3(n,e,r){let i=ot(),s=ot();return r.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=js();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(We.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Le(b0,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function Q3(n,e){const r=Ge(n);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=l0),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Y3(n,e){const r=Ge(n);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.li.getTargetData(i,e).next(o=>o?(s=o,ve.resolve(s)):r.li.allocateTargetId(i).next(a=>(s=new ho(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(i.targetId,i),r.Fs.set(e,i.targetId)),i})}async function wy(n,e,r){const i=Ge(n),s=i.vs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!pu(a))throw a;Le(b0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function Kx(n,e,r){const i=Ge(n);let s=We.min(),o=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const h=Ge(u),m=h.Fs.get(d);return m!==void 0?ve.resolve(h.vs.get(m)):h.li.getTargetData(c,d)}(i,a,Bi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,r?s:We.min(),r?o:ot())).next(l=>(X3(i,MM(e),l),{documents:l,ks:o})))}function X3(n,e,r){let i=n.Ms.get(e)||We.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ms.set(e,i)}class Wx{constructor(){this.activeTargetIds=$M()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J3{constructor(){this.vo=new Wx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,i){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Wx,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="ConnectivityMonitor";class Qx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Le(Gx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Le(Gx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af=null;function xy(){return af===null?af=function(){return 268435456+Math.round(2147483648*Math.random())}():af++,"0x"+af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",e5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class t5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===Ed?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,r,i,s,o){const a=xy(),l=this.Qo(e,r.toUriEncodedString());Le(Mm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,o);const{host:c}=new URL(l),d=uu(c);return this.zo(e,l,u,i,d).then(h=>(Le(Mm,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Yl(Mm,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}jo(e,r,i,s,o,a){return this.Wo(e,r,i,s,o)}Go(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,r){const i=e5[e];let s=`${this.qo}/v1/${r}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection",Fu=(n,e,r)=>{n.listen(e,i=>{try{r(i)}catch(s){setTimeout(()=>{throw s},0)}})};class Dl extends t5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Dl.c_){const e=uI();Fu(e,lI.STAT_EVENT,r=>{r.stat===uy.PROXY?Le(Mn,"STAT_EVENT: detected buffering proxy"):r.stat===uy.NOPROXY&&Le(Mn,"STAT_EVENT: detected no buffering proxy")}),Dl.c_=!0}}zo(e,r,i,s,o){const a=xy();return new Promise((l,u)=>{const c=new oI;c.setWithCredentials(!0),c.listenOnce(aI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Rf.NO_ERROR:const h=c.getResponseJson();Le(Mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),l(h);break;case Rf.TIMEOUT:Le(Mn,`RPC '${e}' ${a} timed out`),u(new Ue(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const m=c.getStatus();if(Le(Mn,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const w=_==null?void 0:_.error;if(w&&w.status&&w.message){const I=function(b){const T=b.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(T)>=0?T:_e.UNKNOWN}(w.status);u(new Ue(I,w.message))}else u(new Ue(_e.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Ue(_e.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Le(Mn,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);Le(Mn,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",d,i,15)})}T_(e,r,i){const s=xy(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,i),l.encodeInitMessageHeaders=!0;const c=o.join("");Le(Mn,`Creating RPC '${e}' stream ${s}: ${c}`,l);const d=a.createWebChannel(c,l);this.I_(d);let h=!1,m=!1;const _=new n5({Ho:w=>{m?Le(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(h||(Le(Mn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Le(Mn,`RPC '${e}' stream ${s} sending:`,w),d.send(w))},Jo:()=>d.close()});return Fu(d,Ju.EventType.OPEN,()=>{m||(Le(Mn,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),Fu(d,Ju.EventType.CLOSE,()=>{m||(m=!0,Le(Mn,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(d))}),Fu(d,Ju.EventType.ERROR,w=>{m||(m=!0,Yl(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),_.o_(new Ue(_e.UNAVAILABLE,"The operation could not be completed")))}),Fu(d,Ju.EventType.MESSAGE,w=>{var I;if(!m){const P=w.data[0];gt(!!P,16349);const b=P,T=(b==null?void 0:b.error)||((I=b[0])==null?void 0:I.error);if(T){Le(Mn,`RPC '${e}' stream ${s} received error:`,T);const N=T.status;let O=function(A){const C=en[A];if(C!==void 0)return BI(C)}(N),M=T.message;O===void 0&&(O=_e.INTERNAL,M="Unknown error status: "+N+" with message "+T.message),m=!0,_.o_(new Ue(O,M)),d.close()}else Le(Mn,`RPC '${e}' stream ${s} received:`,P),_.__(P)}}),Dl.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,i){super.Go(e,r,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cI()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){return new Dl(n)}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n){return new a3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dl.c_=!1;class iS{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=r,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-i);s>0&&Le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="PersistentStream";class sS{constructor(e,r,i,s,o,a,l,u){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===_e.RESOURCE_EXHAUSTED?(Os(r.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===r&&this.G_(i,s)},i=>{e(()=>{const s=new Ue(_e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,r){const i=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Le(Yx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Le(Yx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i5 extends sS{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=c3(this.serializer,e),i=function(o){if(!("targetChange"in o))return We.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?We.min():a.readTime?qi(a.readTime):We.min()}(e);return this.listener.J_(r,i)}Z_(e){const r={};r.database=_y(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=py(u)?{documents:d3(o,u)}:{query:p3(o,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=KI(o,a.resumeToken);const c=gy(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(We.min())>0){l.readTime=Ad(o,a.snapshotVersion.toTimestamp());const c=gy(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=g3(this.serializer,e);i&&(r.labels=i),this.K_(r)}X_(e){const r={};r.database=_y(this.serializer),r.removeTarget=e,this.K_(r)}}class s5 extends sS{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=f3(e.writeResults,e.commitTime),i=qi(e.commitTime);return this.listener.na(i,r)}ra(){const e={};e.database=_y(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>h3(this.serializer,i))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{}class a5 extends o5{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ue(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,yy(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(_e.UNKNOWN,o.toString())})}jo(e,r,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,yy(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(_e.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function l5(n,e,r,i){return new a5(n,e,r,i)}class u5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Os(r),this.aa=!1):Le("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="RemoteStore";class c5{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{Ha(this)&&(Le(ja,"Restarting streams for network reachability change."),await async function(u){const c=Ge(u);c.Ea.add(4),await yh(c),c.Va.set("Unknown"),c.Ea.delete(4),await Np(c)}(this))})}),this.Va=new u5(i,s)}}async function Np(n){if(Ha(n))for(const e of n.Ra)await e(!0)}async function yh(n){for(const e of n.Ra)await e(!1)}function oS(n,e){const r=Ge(n);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),S0(r)?I0(r):mu(r).O_()&&T0(r,e))}function E0(n,e){const r=Ge(n),i=mu(r);r.Ia.delete(e),i.O_()&&aS(r,e),r.Ia.size===0&&(i.O_()?i.L_():Ha(r)&&r.Va.set("Unknown"))}function T0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}mu(n).Z_(e)}function aS(n,e){n.da.$e(e),mu(n).X_(e)}function I0(n){n.da=new r3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),mu(n).start(),n.Va.ua()}function S0(n){return Ha(n)&&!mu(n).x_()&&n.Ia.size>0}function Ha(n){return Ge(n).Ea.size===0}function lS(n){n.da=void 0}async function h5(n){n.Va.set("Online")}async function f5(n){n.Ia.forEach((e,r)=>{T0(n,e)})}async function d5(n,e){lS(n),S0(n)?(n.Va.ha(e),I0(n)):n.Va.set("Unknown")}async function p5(n,e,r){if(n.Va.set("Online"),e instanceof HI&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(n,e)}catch(i){Le(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pd(n,i)}else if(e instanceof Mf?n.da.Xe(e):e instanceof qI?n.da.st(e):n.da.tt(e),!r.isEqual(We.min()))try{const i=await rS(n.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.Ia.get(c);d&&o.Ia.set(c,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const d=o.Ia.get(u);if(!d)return;o.Ia.set(u,d.withResumeToken(Sn.EMPTY_BYTE_STRING,d.snapshotVersion)),aS(o,u);const h=new ho(d.target,u,c,d.sequenceNumber);T0(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(n,r)}catch(i){Le(ja,"Failed to raise snapshot:",i),await Pd(n,i)}}async function Pd(n,e,r){if(!pu(e))throw e;n.Ea.add(1),await yh(n),n.Va.set("Offline"),r||(r=()=>rS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Le(ja,"Retrying IndexedDB access"),await r(),n.Ea.delete(1),await Np(n)})}function uS(n,e){return e().catch(r=>Pd(n,r,e))}async function Pp(n){const e=Ge(n),r=Oo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:l0;for(;m5(e);)try{const s=await Q3(e.localStore,i);if(s===null){e.Ta.length===0&&r.L_();break}i=s.batchId,g5(e,s)}catch(s){await Pd(e,s)}cS(e)&&hS(e)}function m5(n){return Ha(n)&&n.Ta.length<10}function g5(n,e){n.Ta.push(e);const r=Oo(n);r.O_()&&r.Y_&&r.ea(e.mutations)}function cS(n){return Ha(n)&&!Oo(n).x_()&&n.Ta.length>0}function hS(n){Oo(n).start()}async function y5(n){Oo(n).ra()}async function v5(n){const e=Oo(n);for(const r of n.Ta)e.ea(r.mutations)}async function _5(n,e,r){const i=n.Ta.shift(),s=g0.from(i,e,r);await uS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Pp(n)}async function w5(n,e){e&&Oo(n).Y_&&await async function(i,s){if(function(a){return e3(a)&&a!==_e.ABORTED}(s.code)){const o=i.Ta.shift();Oo(i).B_(),await uS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Pp(i)}}(n,e),cS(n)&&hS(n)}async function Xx(n,e){const r=Ge(n);r.asyncQueue.verifyOperationInProgress(),Le(ja,"RemoteStore received new credentials");const i=Ha(r);r.Ea.add(3),await yh(r),i&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Np(r)}async function x5(n,e){const r=Ge(n);e?(r.Ea.delete(2),await Np(r)):e||(r.Ea.add(2),await yh(r),r.Va.set("Unknown"))}function mu(n){return n.ma||(n.ma=function(r,i,s){const o=Ge(r);return o.sa(),new i5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:h5.bind(null,n),Yo:f5.bind(null,n),t_:d5.bind(null,n),J_:p5.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),S0(n)?I0(n):n.Va.set("Unknown")):(await n.ma.stop(),lS(n))})),n.ma}function Oo(n){return n.fa||(n.fa=function(r,i,s){const o=Ge(r);return o.sa(),new s5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:y5.bind(null,n),t_:w5.bind(null,n),ta:v5.bind(null,n),na:_5.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await Pp(n)):(await n.fa.stop(),n.Ta.length>0&&(Le(ja,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new k0(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(n,e){if(Os("AsyncQueue",`${e}: ${n}`),pu(n))return new Ue(_e.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||$e.comparator(r.key,i.key):(r,i)=>$e.comparator(r.key,i.key),this.keyedMap=Zu(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Ml;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.ga=new Ft($e.comparator)}track(e){const r=e.doc.key,i=this.ga.get(r);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(r,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(r):e.type===1&&i.type===2?this.ga=this.ga.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):qe(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,i)=>{e.push(i)}),e}}class tu{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new tu(e,r,Ml.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class E5{constructor(){this.queries=Zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,i){const s=Ge(r),o=s.queries;s.queries=Zx(),o.forEach((a,l)=>{for(const u of l.ba)u.onError(i)})})(this,new Ue(_e.ABORTED,"Firestore shutting down"))}}function Zx(){return new qa(n=>PI(n),Tp)}async function fS(n,e){const r=Ge(n);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new b5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=C0(a,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ba.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&A0(r)}async function dS(n,e){const r=Ge(n),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function T5(n,e){const r=Ge(n);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ba)l.Fa(s)&&(i=!0);a.wa=s}}i&&A0(r)}function I5(n,e,r){const i=Ge(n),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(r);i.queries.delete(e)}function A0(n){n.Ca.forEach(e=>{e.next()})}var by,e1;(e1=by||(by={})).Ma="default",e1.Cache="cache";class pS{constructor(e,r,i){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new tu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const i=r!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==by.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.key=e}}class gS{constructor(e){this.key=e}}class S5{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=RI(e),this.tu=new Ml(this.eu)}get nu(){return this.Za}ru(e,r){const i=r?r.iu:new Jx,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),_=Ip(this.query,h)?h:null,w=!!m&&this.mutatedKeys.has(m.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;m&&_?m.data.isEqual(_.data)?w!==I&&(i.track({type:3,doc:_}),P=!0):this.su(m,_)||(i.track({type:2,doc:_}),P=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),P=!0):m&&!_&&(i.track({type:1,doc:m}),P=!0,(u||c)&&(l=!0)),P&&(_?(a=a.add(_),o=I?o.add(d):o.delete(d)):(a=a.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Ss:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,h)=>function(_,w){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Vt:P})}};return I(_)-I(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(i),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new tu(this.query,e.tu,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const r=[];return e.forEach(i=>{this.Ya.has(i)||r.push(new gS(i))}),this.Ya.forEach(i=>{e.has(i)||r.push(new mS(i))}),r}cu(e){this.Za=e.ks,this.Ya=ot();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return tu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const N0="SyncEngine";class k5{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class C5{constructor(e){this.key=e,this.hu=!1}}class A5{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new qa(l=>PI(l),Tp),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ft($e.comparator),this.Au=new Map,this.Vu=new _0,this.du={},this.mu=new Map,this.fu=eu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function N5(n,e,r=!0){const i=bS(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await yS(i,e,r,!0),s}async function P5(n,e){const r=bS(n);await yS(r,e,!0,!1)}async function yS(n,e,r,i){const s=await Y3(n.localStore,Bi(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await R5(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&r&&oS(n.remoteStore,s),l}async function R5(n,e,r,i,s){n.pu=(h,m,_)=>async function(I,P,b,T){let N=P.view.ru(b);N.Ss&&(N=await Kx(I.localStore,P.query,!1).then(({documents:A})=>P.view.ru(A,N)));const O=T&&T.targetChanges.get(P.targetId),M=T&&T.targetMismatches.get(P.targetId)!=null,U=P.view.applyChanges(N,I.isPrimaryClient,O,M);return n1(I,P.targetId,U.au),U.snapshot}(n,h,m,_);const o=await Kx(n.localStore,e,!0),a=new S5(e,o.ks),l=a.ru(o.documents),u=gh.createSynthesizedTargetChangeForCurrentChange(r,i&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);n1(n,r,c.au);const d=new k5(e,r,a);return n.Tu.set(e,d),n.Iu.has(r)?n.Iu.get(r).push(e):n.Iu.set(r,[e]),c.snapshot}async function O5(n,e,r){const i=Ge(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!Tp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await wy(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&E0(i.remoteStore,s.targetId),Ey(i,s.targetId)}).catch(du)):(Ey(i,s.targetId),await wy(i.localStore,s.targetId,!0))}async function j5(n,e){const r=Ge(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),E0(r.remoteStore,i.targetId))}async function D5(n,e,r){const i=$5(n);try{const s=await function(a,l){const u=Ge(a),c=Nt.now(),d=l.reduce((_,w)=>_.add(w.key),ot());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=js(),I=ot();return u.xs.getEntries(_,d).next(P=>{w=P,w.forEach((b,T)=>{T.isValidDocument()||(I=I.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,w)).next(P=>{h=P;const b=[];for(const T of l){const N=QM(T,h.get(T.key).overlayedDocument);N!=null&&b.push(new Uo(T.key,N,TI(N.value.mapValue),Br.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,b,l)}).next(P=>{m=P;const b=P.applyToLocalDocumentSet(h,I);return u.documentOverlayCache.saveOverlays(_,P.batchId,b)})}).then(()=>({batchId:m.batchId,changes:jI(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new Ft(st)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(i,s.batchId,r),await vh(i,s.changes),await Pp(i.remoteStore)}catch(s){const o=C0(s,"Failed to persist write");r.reject(o)}}async function vS(n,e){const r=Ge(n);try{const i=await W3(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?gt(a.hu,14607):s.removedDocuments.size>0&&(gt(a.hu,42227),a.hu=!1))}),await vh(r,i,e)}catch(i){await du(i)}}function t1(n,e,r){const i=Ge(n);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=Ge(a);u.onlineState=l;let c=!1;u.queries.forEach((d,h)=>{for(const m of h.ba)m.va(l)&&(c=!0)}),c&&A0(u)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function M5(n,e,r){const i=Ge(n);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Au.get(e),o=s&&s.key;if(o){let a=new Ft($e.comparator);a=a.insert(o,Un.newNoDocument(o,We.min()));const l=ot().add(o),u=new Cp(We.min(),new Map,new Ft(st),a,l);await vS(i,u),i.Ru=i.Ru.remove(o),i.Au.delete(e),P0(i)}else await wy(i.localStore,e,!1).then(()=>Ey(i,e,r)).catch(du)}async function L5(n,e){const r=Ge(n),i=e.batch.batchId;try{const s=await K3(r.localStore,e);wS(r,i,null),_S(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await vh(r,s)}catch(s){await du(s)}}async function V5(n,e,r){const i=Ge(n);try{const s=await function(a,l){const u=Ge(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(gt(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,e);wS(i,e,r),_S(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await vh(i,s)}catch(s){await du(s)}}function _S(n,e){(n.mu.get(e)||[]).forEach(r=>{r.resolve()}),n.mu.delete(e)}function wS(n,e,r){const i=Ge(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Ey(n,e,r=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),r&&n.Pu.yu(i,r);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(i=>{n.Vu.containsKey(i)||xS(n,i)})}function xS(n,e){n.Eu.delete(e.path.canonicalString());const r=n.Ru.get(e);r!==null&&(E0(n.remoteStore,r),n.Ru=n.Ru.remove(e),n.Au.delete(r),P0(n))}function n1(n,e,r){for(const i of r)i instanceof mS?(n.Vu.addReference(i.key,e),F5(n,i)):i instanceof gS?(Le(N0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||xS(n,i.key)):qe(19791,{wu:i})}function F5(n,e){const r=e.key,i=r.path.canonicalString();n.Ru.get(r)||n.Eu.has(i)||(Le(N0,"New document in limbo: "+r),n.Eu.add(i),P0(n))}function P0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const r=new $e(At.fromString(e)),i=n.fu.next();n.Au.set(i,new C5(r)),n.Ru=n.Ru.insert(r,i),oS(n.remoteStore,new ho(Bi(d0(r.path)),i,"TargetPurposeLimboResolution",wp.ce))}}async function vh(n,e,r){const i=Ge(n),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,r).then(c=>{var d;if((c||r)&&i.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=x0.Es(u.targetId,c);o.push(h)}}))}),await Promise.all(a),i.Pu.J_(s),await async function(u,c){const d=Ge(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ve.forEach(c,m=>ve.forEach(m.Ts,_=>d.persistence.referenceDelegate.addReference(h,m.targetId,_)).next(()=>ve.forEach(m.Is,_=>d.persistence.referenceDelegate.removeReference(h,m.targetId,_)))))}catch(h){if(!pu(h))throw h;Le(b0,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const _=d.vs.get(m),w=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(w);d.vs=d.vs.insert(m,I)}}}(i.localStore,o))}async function U5(n,e){const r=Ge(n);if(!r.currentUser.isEqual(e)){Le(N0,"User change. New user:",e.toKey());const i=await nS(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new Ue(_e.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vh(r,i.Ns)}}function z5(n,e){const r=Ge(n),i=r.Au.get(e);if(i&&i.hu)return ot().add(i.key);{let s=ot();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function bS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M5.bind(null,e),e.Pu.J_=T5.bind(null,e.eventManager),e.Pu.yu=I5.bind(null,e.eventManager),e}function $5(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V5.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ap(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return H3(this.persistence,new $3,e.initialUser,this.serializer)}Cu(e){return new tS(w0.Vi,this.serializer)}Du(e){return new J3}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class B5 extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){gt(this.persistence.referenceDelegate instanceof Nd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new k3(i,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new tS(i=>Nd.Vi(i,r),this.serializer)}}class Ty{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>t1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=U5.bind(null,this.syncEngine),await x5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E5}()}createDatastore(e){const r=Ap(e.databaseInfo.databaseId),i=r5(e.databaseInfo);return l5(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new c5(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>t1(this.syncEngine,r,0),function(){return Qx.v()?new Qx:new Z3}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,d){const h=new A5(s,o,a,l,u,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=Ge(s);Le(ja,"RemoteStore shutting down."),o.Ea.add(5),await yh(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Ty.provider={build:()=>new Ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class q5{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this._databaseInfo=s,this.user=Vn.UNAUTHENTICATED,this.clientId=o0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{Le(jo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Le(jo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=C0(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Vm(n,e){n.asyncQueue.verifyOperationInProgress(),Le(jo,"Initializing OfflineComponentProvider");const r=n.configuration;await e.initialize(r);let i=r.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await nS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function r1(n,e){n.asyncQueue.verifyOperationInProgress();const r=await H5(n);Le(jo,"Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(i=>Xx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Xx(e.remoteStore,s)),n._onlineComponents=e}async function H5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Le(jo,"Using user provided OfflineComponentProvider");try{await Vm(n,n._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Yl("Error using user provided cache. Falling back to memory cache: "+r),await Vm(n,new Rd)}}else Le(jo,"Using default OfflineComponentProvider"),await Vm(n,new B5(void 0));return n._offlineComponents}async function TS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Le(jo,"Using user provided OnlineComponentProvider"),await r1(n,n._uninitializedComponentsProvider._online)):(Le(jo,"Using default OnlineComponentProvider"),await r1(n,new Ty))),n._onlineComponents}function K5(n){return TS(n).then(e=>e.syncEngine)}async function IS(n){const e=await TS(n),r=e.eventManager;return r.onListen=N5.bind(null,e.syncEngine),r.onUnlisten=O5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=P5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=j5.bind(null,e.syncEngine),r}function W5(n,e,r={}){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const d=new ES({next:m=>{d.Nu(),a.enqueueAndForget(()=>dS(o,h));const _=m.docs.has(l);!_&&m.fromCache?c.reject(new Ue(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?c.reject(new Ue(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pS(d0(l.path),d,{includeMetadataChanges:!0,Ka:!0});return fS(o,h)}(await IS(n),n.asyncQueue,e,r,i)),i.promise}function G5(n,e,r={}){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const d=new ES({next:m=>{d.Nu(),a.enqueueAndForget(()=>dS(o,h)),m.fromCache&&u.source==="server"?c.reject(new Ue(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pS(l,d,{includeMetadataChanges:!0,Ka:!0});return fS(o,h)}(await IS(n),n.asyncQueue,e,r,i)),i.promise}function Q5(n,e){const r=new Is;return n.asyncQueue.enqueueAndForget(async()=>D5(await K5(n),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="ComponentProvider",i1=new Map;function X5(n,e,r,i,s){return new yM(n,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,SS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firestore.googleapis.com",s1=!0;class o1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kS,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I3)throw new Ue(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ue(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ue(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ue(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rp{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new YD;switch(i.type){case"firstParty":return new eM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ue(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=i1.get(r);i&&(Le(Y5,"Removing Datastore"),i1.delete(r),i.terminate())}(this),Promise.resolve()}}function J5(n,e,r,i={}){var c;n=Co(n,Rp);const s=uu(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${r}`;s&&(v2(`https://${l}`),_2("Firestore",!0)),o.host!==kS&&o.host!==l&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:i};if(!ko(u,a)&&(n._setSettings(u),i.mockUserToken)){let d,h;if(typeof i.mockUserToken=="string")d=i.mockUserToken,h=Vn.MOCK_USER;else{d=vO(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Ue(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Vn(m)}n._authCredentials=new XD(new fI(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Op(this.firestore,e,this._query)}}class un{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}toJSON(){return{type:un._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,i){if(ph(r,un._jsonSchema))return new un(e,i||null,new $e(At.fromString(r.referencePath)))}}un._jsonSchemaVersion="firestore/documentReference/1.0",un._jsonSchema={type:nn("string",un._jsonSchemaVersion),referencePath:nn("string")};class To extends Op{constructor(e,r,i){super(e,r,d0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new $e(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function Fm(n,e,...r){if(n=rn(n),dI("collection","path",e),n instanceof Rp){const i=At.fromString(e,...r);return wx(i),new To(n,null,i)}{if(!(n instanceof un||n instanceof To))throw new Ue(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(At.fromString(e,...r));return wx(i),new To(n.firestore,null,i)}}function ca(n,e,...r){if(n=rn(n),arguments.length===1&&(e=o0.newId()),dI("doc","path",e),n instanceof Rp){const i=At.fromString(e,...r);return _x(i),new un(n,null,new $e(i))}{if(!(n instanceof un||n instanceof To))throw new Ue(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(At.fromString(e,...r));return _x(i),new un(n.firestore,n instanceof To?n.converter:null,new $e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iS(this,"async_queue_retry"),this._c=()=>{const i=Lm();i&&Le(a1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const r=Lm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Lm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Is;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!pu(e))throw e;Le(a1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Os("INTERNAL UNHANDLED ERROR: ",u1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=r,r}enqueueAfterDelay(e,r,i){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=k0.createAndSchedule(this,e,r,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&qe(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function u1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class _h extends Rp{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new l1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function Z5(n,e){const r=typeof n=="object"?n:Gv(),i=typeof n=="string"?n:Ed,s=Ba(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=gO("firestore");o&&J5(s,...o)}return s}function jp(n){if(n._terminated)throw new Ue(_e.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eL(n),n._firestoreClient}function eL(n){var i,s,o,a;const e=n._freezeSettings(),r=X5(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new q5(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(Sn.fromBase64String(e))}catch(r){throw new Ue(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Lr(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ph(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:nn("string",Lr._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ue(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ue(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ue(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(ph(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:nn("string",Hi._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ph(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new yi(e.vectorValues);throw new Ue(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:nn("string",yi._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class nL{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Uo(e,this.data,this.fieldMask,r,this.fieldTransforms):new mh(e,this.data,r,this.fieldTransforms)}}class CS{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Uo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function AS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{dataSource:n})}}class j0{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new j0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Od(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AS(this.dataSource)&&tL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class rL{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Ap(e)}createContext(e,r,i,s=!1){return new j0({dataSource:e,methodName:r,targetDoc:i,path:En.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NS(n){const e=n._freezeSettings(),r=Ap(n._databaseId);return new rL(n._databaseId,!!e.ignoreUndefinedProperties,r)}function PS(n,e,r,i,s,o={}){const a=n.createContext(o.merge||o.mergeFields?2:0,e,r,s);D0("Data must be an object, but it was:",a,i);const l=RS(i,a);let u,c;if(o.merge)u=new vr(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const m=Xc(e,h,r);if(!a.contains(m))throw new Ue(_e.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);DS(d,m)||d.push(m)}u=new vr(d),c=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=a.fieldTransforms;return new nL(new nr(l),u,c)}class Dp extends O0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dp}}function iL(n,e,r,i){const s=n.createContext(1,e,r);D0("Data must be an object, but it was:",s,i);const o=[],a=nr.empty();Fo(i,(u,c)=>{const d=jS(e,u,r);c=rn(c);const h=s.childContextForFieldPath(d);if(c instanceof Dp)o.push(d);else{const m=Mp(c,h);m!=null&&(o.push(d),a.set(d,m))}});const l=new vr(o);return new CS(a,l,s.fieldTransforms)}function sL(n,e,r,i,s,o){const a=n.createContext(1,e,r),l=[Xc(e,i,r)],u=[s];if(o.length%2!=0)throw new Ue(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(Xc(e,o[m])),u.push(o[m+1]);const c=[],d=nr.empty();for(let m=l.length-1;m>=0;--m)if(!DS(c,l[m])){const _=l[m];let w=u[m];w=rn(w);const I=a.childContextForFieldPath(_);if(w instanceof Dp)c.push(_);else{const P=Mp(w,I);P!=null&&(c.push(_),d.set(_,P))}}const h=new vr(c);return new CS(d,h,a.fieldTransforms)}function Mp(n,e){if(OS(n=rn(n)))return D0("Unsupported field value:",e,n),RS(n,e);if(n instanceof O0)return function(i,s){if(!AS(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=Mp(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Nt.fromDate(i);return{timestampValue:Ad(s.serializer,o)}}if(i instanceof Nt){const o=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ad(s.serializer,o)}}if(i instanceof Hi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lr)return{bytesValue:KI(s.serializer,i._byteString)};if(i instanceof un){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:v0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof yi)return function(a,l){const u=a instanceof yi?a.toArray():a;return{mapValue:{fields:{[bI]:{stringValue:EI},[Td]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return p0(l.serializer,d)})}}}}}}(i,s);if(ZI(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${a0(i)}`)}(n,e)}function RS(n,e){const r={};return gI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(n,(i,s)=>{const o=Mp(s,e.childContextForField(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function OS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof Hi||n instanceof Lr||n instanceof un||n instanceof O0||n instanceof yi||ZI(n))}function D0(n,e,r){if(!OS(r)||!pI(r)){const i=a0(r);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Xc(n,e,r){if((e=rn(e))instanceof R0)return e._internalPath;if(typeof e=="string")return jS(n,e);throw Od("Field path arguments must be of type string or ",n,!1,void 0,r)}const oL=new RegExp("[~\\*/\\[\\]]");function jS(n,e,r){if(e.search(oL)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new R0(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Od(n,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Ue(_e.INVALID_ARGUMENT,l+n+u)}function DS(n,e){return n.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{convertValue(e,r="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Fo(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var i,s,o;const r=(o=(s=(i=e.fields)==null?void 0:i[Td].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Qt(a.doubleValue));return new yi(r)}convertGeoPoint(e){return new Hi(Qt(e.latitude),Qt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=bp(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){const r=No(e);return new Nt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=At.fromString(e);gt(JI(i),9688,{name:e});const s=new Wc(i.get(1),i.get(3)),o=new $e(i.popFirst(5));return s.isEqual(r)||Os(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends aL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,r)}}const c1="@firebase/firestore",h1="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(Xc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class lL extends LS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ue(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function VS(n,e,r){let i;return i=n?r&&(r.merge||r.mergeFields)?n.toFirestore(e,r):n.toFirestore(e):e,i}class tc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ea extends LS{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(Xc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Ea._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:nn("string",Ea._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class Lf extends Ea{data(e={}){return super.data(e)}}class Ll{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new tc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Lf(this._firestore,this._userDataWriter,i.key,i,new tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ue(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Lf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new tc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Lf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new tc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:cL(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ll._jsonSchemaVersion="firestore/querySnapshot/1.0",Ll._jsonSchema={type:nn("string",Ll._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=NS(e)}set(e,r,i){this._verifyNotCommitted();const s=Um(e,this._firestore),o=VS(s.converter,r,i),a=PS(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Br.none())),this}update(e,r,i,...s){this._verifyNotCommitted();const o=Um(e,this._firestore);let a;return a=typeof(r=rn(r))=="string"||r instanceof R0?sL(this._dataReader,"WriteBatch.update",o._key,r,i,s):iL(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,Br.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Um(e,this._firestore);return this._mutations=this._mutations.concat(new m0(r._key,Br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Um(n,e){if((n=rn(n)).firestore!==e)throw new Ue(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n){n=Co(n,un);const e=Co(n.firestore,_h),r=jp(e);return W5(r,n._key).then(i=>fL(e,n,i))}function zm(n){n=Co(n,Op);const e=Co(n.firestore,_h),r=jp(e),i=new MS(e);return uL(n._query),G5(r,n._query).then(s=>new Ll(e,i,n,s))}function f1(n,e,r){n=Co(n,un);const i=Co(n.firestore,_h),s=VS(n.converter,e,r),o=NS(i);return FS(i,[PS(o,"setDoc",n._key,s,n.converter!==null,r).toMutation(n._key,Br.none())])}function FS(n,e){const r=jp(n);return Q5(r,e)}function fL(n,e,r){const i=r.docs.get(e._key),s=new MS(n);return new Ea(n,s,e._key,i,new tc(r.hasPendingWrites,r.fromCache),e.converter)}function $m(n){return n=Co(n,_h),jp(n),new hL(n,e=>FS(n,e))}(function(e,r=!0){QD(cu),Wi(new _i("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new _h(new JD(i.getProvider("auth-internal")),new tM(a,i.getProvider("app-check-internal")),vM(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),$r(c1,h1,e),$r(c1,h1,"esm2020")})();const US="@firebase/installations",M0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=1e4,$S=`w:${M0}`,BS="FIS_v2",dL="https://firebaseinstallations.googleapis.com/v1",pL=60*60*1e3,mL="installations",gL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Da=new $a(mL,gL,yL);function qS(n){return n instanceof wi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS({projectId:n}){return`${dL}/projects/${n}/installations`}function KS(n){return{token:n.token,requestStatus:2,expiresIn:_L(n.expiresIn),creationTime:Date.now()}}async function WS(n,e){const i=(await e.json()).error;return Da.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function GS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vL(n,{refreshToken:e}){const r=GS(n);return r.append("Authorization",wL(e)),r}async function QS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function _L(n){return Number(n.replace("s","000"))}function wL(n){return`${BS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL({appConfig:n,heartbeatServiceProvider:e},{fid:r}){const i=HS(n),s=GS(n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:BS,appId:n.appId,sdkVersion:$S},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await QS(()=>fetch(i,l));if(u.ok){const c=await u.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:KS(c.authToken)}}else throw await WS("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=/^[cdef][\w-]{21}$/,Sy="";function TL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=IL(n);return EL.test(r)?r:Sy}catch{return Sy}}function IL(n){return bL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new Map;function JS(n,e){const r=Lp(n);ZS(r,e),SL(r,e)}function ZS(n,e){const r=XS.get(n);if(r)for(const i of r)i(e)}function SL(n,e){const r=kL();r&&r.postMessage({key:n,fid:e}),CL()}let ya=null;function kL(){return!ya&&"BroadcastChannel"in self&&(ya=new BroadcastChannel("[Firebase] FID Change"),ya.onmessage=n=>{ZS(n.data.key,n.data.fid)}),ya}function CL(){XS.size===0&&ya&&(ya.close(),ya=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="firebase-installations-database",NL=1,Ma="firebase-installations-store";let Bm=null;function L0(){return Bm||(Bm=I2(AL,NL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ma)}}})),Bm}async function jd(n,e){const r=Lp(n),s=(await L0()).transaction(Ma,"readwrite"),o=s.objectStore(Ma),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&JS(n,e.fid),e}async function ek(n){const e=Lp(n),i=(await L0()).transaction(Ma,"readwrite");await i.objectStore(Ma).delete(e),await i.done}async function Vp(n,e){const r=Lp(n),s=(await L0()).transaction(Ma,"readwrite"),o=s.objectStore(Ma),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&JS(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0(n){let e;const r=await Vp(n.appConfig,i=>{const s=PL(i),o=RL(n,s);return e=o.registrationPromise,o.installationEntry});return r.fid===Sy?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function PL(n){const e=n||{fid:TL(),registrationStatus:0};return tk(e)}function RL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Da.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=OL(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jL(n)}:{installationEntry:e}}async function OL(n,e){try{const r=await xL(n,e);return jd(n.appConfig,r)}catch(r){throw qS(r)&&r.customData.serverCode===409?await ek(n.appConfig):await jd(n.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function jL(n){let e=await d1(n.appConfig);for(;e.registrationStatus===1;)await YS(100),e=await d1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await V0(n);return i||r}return e}function d1(n){return Vp(n,e=>{if(!e)throw Da.create("installation-not-found");return tk(e)})}function tk(n){return DL(n)?{fid:n.fid,registrationStatus:0}:n}function DL(n){return n.registrationStatus===1&&n.registrationTime+zS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML({appConfig:n,heartbeatServiceProvider:e},r){const i=LL(n,r),s=vL(n,r),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:$S,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await QS(()=>fetch(i,l));if(u.ok){const c=await u.json();return KS(c)}else throw await WS("Generate Auth Token",u)}function LL(n,{fid:e}){return`${HS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(n,e=!1){let r;const i=await Vp(n.appConfig,o=>{if(!nk(o))throw Da.create("not-registered");const a=o.authToken;if(!e&&UL(a))return o;if(a.requestStatus===1)return r=VL(n,e),o;{if(!navigator.onLine)throw Da.create("app-offline");const l=$L(o);return r=FL(n,l),l}});return r?await r:i.authToken}async function VL(n,e){let r=await p1(n.appConfig);for(;r.authToken.requestStatus===1;)await YS(100),r=await p1(n.appConfig);const i=r.authToken;return i.requestStatus===0?F0(n,e):i}function p1(n){return Vp(n,e=>{if(!nk(e))throw Da.create("not-registered");const r=e.authToken;return BL(r)?{...e,authToken:{requestStatus:0}}:e})}async function FL(n,e){try{const r=await ML(n,e),i={...e,authToken:r};return await jd(n.appConfig,i),r}catch(r){if(qS(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await ek(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await jd(n.appConfig,i)}throw r}}function nk(n){return n!==void 0&&n.registrationStatus===2}function UL(n){return n.requestStatus===2&&!zL(n)}function zL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+pL}function $L(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function BL(n){return n.requestStatus===1&&n.requestTime+zS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(n){const e=n,{installationEntry:r,registrationPromise:i}=await V0(e);return i?i.catch(console.error):F0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(n,e=!1){const r=n;return await KL(r),(await F0(r,e)).token}async function KL(n){const{registrationPromise:e}=await V0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(n){if(!n||!n.options)throw qm("App Configuration");if(!n.name)throw qm("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!n.options[r])throw qm(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function qm(n){return Da.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="installations",GL="installations-internal",QL=n=>{const e=n.getProvider("app").getImmediate(),r=WL(e),i=Ba(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},YL=n=>{const e=n.getProvider("app").getImmediate(),r=Ba(e,rk).getImmediate();return{getId:()=>qL(r),getToken:s=>HL(r,s)}};function XL(){Wi(new _i(rk,QL,"PUBLIC")),Wi(new _i(GL,YL,"PRIVATE"))}XL();$r(US,M0);$r(US,M0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="analytics",JL="firebase_id",ZL="origin",e6=60*1e3,t6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",U0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new gp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},wr=new $a("analytics","Analytics",n6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(n){if(!n.startsWith(U0)){const e=wr.create("invalid-gtag-resource",{gtagURL:n});return Yn.warn(e.message),""}return n}function ik(n){return Promise.all(n.map(e=>e.catch(r=>r)))}function i6(n,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,e)),r}function s6(n,e){const r=i6("firebase-js-sdk-policy",{createScriptURL:r6}),i=document.createElement("script"),s=`${U0}?l=${n}&id=${e}`;i.src=r?r==null?void 0:r.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function o6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function a6(n,e,r,i,s,o){const a=i[s];try{if(a)await e[a];else{const u=(await ik(r)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(l){Yn.error(l)}n("config",s,o)}async function l6(n,e,r,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await ik(r);for(const u of a){const c=l.find(h=>h.measurementId===u),d=c&&e[c.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,s||{})}catch(o){Yn.error(o)}}function u6(n,e,r,i){async function s(o,...a){try{if(o==="event"){const[l,u]=a;await l6(n,e,r,l,u)}else if(o==="config"){const[l,u]=a;await a6(n,e,r,i,l,u)}else if(o==="consent"){const[l,u]=a;n("consent",l,u)}else if(o==="get"){const[l,u,c]=a;n("get",l,u,c)}else if(o==="set"){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Yn.error(l)}}return s}function c6(n,e,r,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=u6(o,n,e,r),{gtagCore:o,wrappedGtag:window[s]}}function h6(n){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(U0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=30,d6=1e3;class p6{constructor(e={},r=d6){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sk=new p6;function m6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function g6(n){var a;const{appId:e,apiKey:r}=n,i={method:"GET",headers:m6(r)},s=t6.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw wr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function y6(n,e=sk,r){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw wr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw wr.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new w6;return setTimeout(async()=>{l.abort()},e6),ok({appId:i,apiKey:s,measurementId:o},a,l,e)}async function ok(n,{throttleEndTimeMillis:e,backoffCount:r},i,s=sk){var l;const{appId:o,measurementId:a}=n;try{await v6(i,e)}catch(u){if(a)return Yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await g6(n);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!_6(c)){if(s.deleteThrottleMetadata(o),a)return Yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const d=Number((l=c==null?void 0:c.customData)==null?void 0:l.httpStatus)===503?qw(r,s.intervalMillis,f6):qw(r,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return s.setThrottleMetadata(o,h),Yn.debug(`Calling attemptFetch again in ${d} millis`),ok(n,h,i,s)}}function v6(n,e){return new Promise((r,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);n.addEventListener(()=>{clearTimeout(o),i(wr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _6(n){if(!(n instanceof wi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class w6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function x6(n,e,r,i,s){if(s&&s.global){n("event",r,i);return}else{const o=await e,a={...i,send_to:o};n("event",r,a)}}async function b6(n,e,r,i){if(i&&i.global){const s={};for(const o of Object.keys(r))s[`user_properties.${o}`]=r[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E6(){if(x2())try{await b2()}catch(n){return Yn.warn(wr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Yn.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function T6(n,e,r,i,s,o,a){const l=y6(n);l.then(m=>{r[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Yn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Yn.error(m)),e.push(l);const u=E6().then(m=>{if(m)return i.getId()}),[c,d]=await Promise.all([l,u]);h6(o)||s6(o,c.measurementId),s("js",new Date);const h=(a==null?void 0:a.config)??{};return h[ZL]="firebase",h.update=!0,d!=null&&(h[JL]=d),s("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.app=e}_delete(){return delete Vl[this.app.options.appId],Promise.resolve()}}let Vl={},m1=[];const g1={};let Hm="dataLayer",S6="gtag",y1,z0,v1=!1;function k6(){const n=[];if(w2()&&n.push("This is a browser extension environment."),kO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),r=wr.create("invalid-analytics-context",{errorInfo:e});Yn.warn(r.message)}}function C6(n,e,r){k6();const i=n.options.appId;if(!i)throw wr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw wr.create("no-api-key");if(Vl[i]!=null)throw wr.create("already-exists",{id:i});if(!v1){o6(Hm);const{wrappedGtag:o,gtagCore:a}=c6(Vl,m1,g1,Hm,S6);z0=o,y1=a,v1=!0}return Vl[i]=T6(n,m1,g1,e,y1,Hm,r),new I6(n)}function A6(n=Gv()){n=rn(n);const e=Ba(n,Dd);return e.isInitialized()?e.getImmediate():N6(n)}function N6(n,e={}){const r=Ba(n,Dd);if(r.isInitialized()){const s=r.getImmediate();if(ko(e,r.getOptions()))return s;throw wr.create("already-initialized")}return r.initialize({options:e})}function P6(n,e,r){n=rn(n),b6(z0,Vl[n.app.options.appId],e,r).catch(i=>Yn.error(i))}function R6(n,e,r,i){n=rn(n),x6(z0,Vl[n.app.options.appId],e,r,i).catch(s=>Yn.error(s))}const _1="@firebase/analytics",w1="0.10.19";function O6(){Wi(new _i(Dd,(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return C6(i,s,r)},"PUBLIC")),Wi(new _i("analytics-internal",n,"PRIVATE")),$r(_1,w1),$r(_1,w1,"esm2020");function n(e){try{const r=e.getProvider(Dd).getImmediate();return{logEvent:(i,s,o)=>R6(r,i,s,o),setUserProperties:(i,s)=>P6(r,i,s)}}catch(r){throw wr.create("interop-component-reg-failed",{reason:r})}}}O6();const ak={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"};ak.apiKey||console.warn("Firebase API Key is missing. Cloud sync will not work.");const $0=S2(ak),Km=WD($0),j6=new ys,si=Z5($0);typeof window<"u"&&A6($0);const lk=de.createContext(),zo=()=>de.useContext(lk),D6=({children:n})=>{const e=kf(()=>Tt.contacts.orderBy("lastUpdated").reverse().toArray()),r=kf(()=>Tt.schedules.orderBy("date").toArray()),i=kf(()=>Tt.settings.get("userProfile")),[s,o]=de.useState(null),[a,l]=de.useState(null),[u,c]=de.useState(!1),[d,h]=de.useState(!1);de.useEffect(()=>{const j=Dj(Km,H=>{l(H)});return()=>j()},[]);const m=async()=>{try{const H=(await nD(Km,j6)).user,G=ca(si,"users",H.uid);return(await Iy(G)).exists()&&await Tt.contacts.count()===0&&window.confirm("")&&(l(H),await I()),H}catch(j){throw console.error("Login Error:",j),j}},_=async()=>{try{await Mj(Km)}catch(j){console.error("Logout Error:",j)}},w=async()=>{if(!a){console.error("Sync Error: No user logged in");return}c(!0);try{const j=await Tt.contacts.toArray(),H=await Tt.schedules.toArray(),G=await Tt.settings.get("userProfile")||{},Z=q=>q==null?null:q instanceof Date?q.toISOString():Array.isArray(q)?q.map(K=>Z(K)):typeof q=="object"?Object.entries(q).reduce((K,[ue,ie])=>(ie!==void 0&&(K[ue]=Z(ie)),K),{}):q,me=ca(si,"users",a.uid);console.log("Attempting to write profile to:",me.path),await f1(me,{profile:Z(G),lastSynced:new Date().toISOString(),email:a.email||""},{merge:!0}),console.log("Profile sync successful");const ne=async(q,K)=>{const ue=Fm(si,"users",a.uid,q);console.log(`Syncing ${q}, items: ${K.length}`);let ie=[];try{ie=(await zm(ue)).docs.map(Ke=>Ke.id)}catch(je){throw console.error(`Error fetching existing ${q}:`,je),je.code==="permission-denied"?new Error(` ${q} `):je}const le=K.map(je=>je.id).filter(Boolean),pe=ie.filter(je=>!le.includes(je));let we=$m(si),Me=0;for(const je of pe)we.delete(ca(ue,je)),Me++,Me===500&&(await we.commit(),we=$m(si),Me=0);for(const je of K){if(!je.id)continue;const Ke=Z(je);we.set(ca(ue,je.id),Ke),Me++,Me===500&&(await we.commit(),we=$m(si),Me=0)}Me>0&&await we.commit()};await ne("contacts",j),await ne("schedules",H),console.log("Synced to cloud successfully (Mirror Mode)")}catch(j){throw console.error("Sync Error Detailed:",j),j.code==="permission-denied"||j.message.includes("permission-denied")?new Error(" Firebase Rules "):new Error(`: ${j.message}`)}finally{c(!1)}},I=async()=>{if(a){c(!0);try{const j=ca(si,"users",a.uid),H=await Iy(j);if(H.exists()){const ie=H.data();ie.profile&&await Tt.settings.put({...ie.profile,id:"userProfile"})}const G=ie=>{if(!ie||typeof ie!="object")return ie;const le=Array.isArray(ie)?[]:{};for(const[pe,we]of Object.entries(ie))typeof we=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(we)?le[pe]=new Date(we):typeof we=="object"?le[pe]=G(we):le[pe]=we;return le},Z=Fm(si,"users",a.uid,"contacts"),me=await zm(Z),ne=[];me.forEach(ie=>{ne.push(G(ie.data()))}),ne.length>0&&(await Tt.contacts.clear(),await Tt.contacts.bulkPut(ne));const q=Fm(si,"users",a.uid,"schedules"),K=await zm(q),ue=[];K.forEach(ie=>{ue.push(G(ie.data()))}),ue.length>0&&(await Tt.schedules.clear(),await Tt.schedules.bulkPut(ue)),console.log("Synced from cloud successfully (Mirror Mode)")}catch(j){throw console.error("Download Error:",j),j}finally{c(!1)}}};de.useEffect(()=>{(async()=>{await Tt.settings.get("userProfile")||await Tt.settings.add({id:"userProfile",name:"",bio:"",avatar:"",themeColor:"#2b6cee",links:[],categories:["","","","",""]})})()},[]),de.useEffect(()=>{if(i!=null&&i.themeColor){document.documentElement.style.setProperty("--primary-color",i.themeColor);const j=i.themeColor.replace("#",""),H=parseInt(j.substring(0,2),16),G=parseInt(j.substring(2,4),16),Z=parseInt(j.substring(4,6),16);document.documentElement.style.setProperty("--primary-color-rgb",`${H}, ${G}, ${Z}`)}},[i==null?void 0:i.themeColor]);const P=async j=>{const H=crypto.randomUUID();return await Tt.contacts.add({...j,id:H,lastUpdated:new Date}),a&&w().catch(console.error),H},b=async(j,H)=>{h(!0),await Tt.contacts.update(j,{...H,lastUpdated:new Date}),a&&w().catch(console.error)},T=async(j,H)=>await Tt.contacts.update(j,{position:H}),N=async j=>{await Tt.settings.update("userProfile",j),a&&w().catch(console.error)},O=async j=>{await Tt.contacts.delete(j),a&&w().catch(console.error)},M=async()=>{if(!a)throw new Error("");try{const j=await Tt.settings.get("userProfile");if(!j)throw new Error("");const H=ca(si,"public_profiles",a.uid),G={name:j.name||"",avatar:j.avatar||"",bio:j.bio||"",links:j.links||[],uid:a.uid,updatedAt:new Date().toISOString()};return console.log("Publishing profile to Firestore...",G),await f1(H,G),console.log("Profile published successfully!"),a.uid}catch(j){throw console.error("Failed to publish profile:",j),j}},U=async(j,H)=>{const G=await Tt.contacts.get(j);if(G){const Z=[...G.memories||[],{...H,date:H.date||new Date}];await Tt.contacts.update(j,{memories:Z,lastUpdated:new Date}),a&&w().catch(console.error)}},[A,C]=de.useState(null),D=(j,H="")=>new Promise(G=>{C({title:j,placeholder:H,onConfirm:Z=>{C(null),G(Z)},onCancel:()=>{C(null),G(null)}})}),L=async j=>{const H=crypto.randomUUID();return await Tt.schedules.add({...j,id:H}),a&&w().catch(console.error),H},V=async(j,H)=>{await Tt.schedules.update(j,H),a&&w().catch(console.error)},$=async j=>{await Tt.schedules.delete(j),a&&w().catch(console.error)};return y.jsxs(lk.Provider,{value:{contacts:e,schedules:r,currentContactId:s,setCurrentContactId:o,userProfile:i,updateContactPosition:T,updateProfile:N,publishProfile:M,addContact:P,updateContact:b,deleteContact:O,addMemory:U,addSchedule:L,updateSchedule:V,deleteSchedule:$,customPrompt:D,promptConfig:A,setPromptConfig:C,currentUser:a,login:m,logout:_,syncToCloud:w,syncFromCloud:I,isSyncing:u,unsavedChanges:d,setUnsavedChanges:h},children:[n,A&&y.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[y.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:A.title}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:A.placeholder,onKeyDown:j=>{j.key==="Enter"&&A.onConfirm(j.target.value),j.key==="Escape"&&A.onCancel()},id:"custom-prompt-input"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:A.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:()=>{const j=document.getElementById("custom-prompt-input").value;A.onConfirm(j)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},M6=()=>{const n=Vo(),{contacts:e,addContact:r,updateContact:i,addMemory:s,userProfile:o,updateProfile:a,customPrompt:l,schedules:u,currentUser:c}=zo(),[d,h]=de.useState(!1),[m,_]=de.useState(!1),[w,I]=de.useState(!1),[P,b]=de.useState(!1),[T,N]=de.useState(!1),O=de.useMemo(()=>c?`${window.location.origin+window.location.pathname.replace(/\/$/,"")}/#/p/${c.uid}`:null,[c]),M=[{icon:"auto_awesome_motion",title:"",desc:"",color:"text-primary"},{icon:"qr_code_2",title:"",desc:" QR  QR Code",color:"text-amber-400"},{icon:"hub",title:"",desc:"",color:"text-indigo-400"},{icon:"search",title:"",desc:"",color:"text-purple-400"},{icon:"calendar_month",title:"",desc:"",color:"text-emerald-400"},{icon:"cloud_sync",title:"100% ",desc:" Google",color:"text-blue-400"}],U=de.useMemo(()=>{if(!u||!e)return[];const Se=new Date;return Se.setHours(0,0,0,0),u.filter(Ze=>{const xt=new Date(Ze.date);xt.setHours(0,0,0,0);const Cn=Math.ceil((xt.getTime()-Se.getTime())/(1e3*60*60*24));return Cn>=0&&Cn<=3}).map(Ze=>({...Ze,diffDays:Math.ceil((new Date(Ze.date).getTime()-Se.getTime())/(1e3*60*60*24))}))},[u,e]),[A,C]=de.useState(!1),[D,L]=de.useState(""),[V,$]=de.useState(null),[j,H]=de.useState(""),[G,Z]=de.useState(""),[me,ne]=de.useState(""),[q,K]=de.useState(""),[ue,ie]=de.useState(""),[le,pe]=de.useState(new Date().toISOString().split("T")[0]),[we,Me]=de.useState("synced"),[je,Ke]=de.useState(!1),Oe=de.useMemo(()=>(o==null?void 0:o.categories)||["","","","",""],[o]);wt.useEffect(()=>{Oe.length>0&&!ue&&ie(Oe[0])},[Oe]);const fn=de.useMemo(()=>D.trim()?(e==null?void 0:e.filter(Se=>{var Ze,xt;return Se.name.toLowerCase().includes(D.toLowerCase())||((Ze=Se.company)==null?void 0:Ze.toLowerCase().includes(D.toLowerCase()))||((xt=Se.tags)==null?void 0:xt.some(Cn=>Cn.toLowerCase().includes(D.toLowerCase())))}).sort((Se,Ze)=>new Date(Ze.lastUpdated).getTime()-new Date(Se.lastUpdated).getTime()))||[]:[],[e,D]),dn=async()=>{let Se=V;if(!Se&&G.trim())Se=await r({name:G,phone:q,tags:[ue,""],importance:50,birthday:me||null,memories:[]});else if(Se&&(me||q)){const Ze={};me&&(Ze.birthday=me),q&&(Ze.phone=q),await i(Se,Ze)}Se&&j.trim()&&(await s(Se,{content:j,location:"",date:new Date(le)}),C(!1),L(""),$(null),H(""),Z(""),ne(""),K(""),ie(Oe[0]||""),pe(new Date().toISOString().split("T")[0]),h(!1),navigator.vibrate&&navigator.vibrate(50))},ut=async Se=>{const Ze=Se.target.files[0];if(Ze){_(!0);try{const xt=new FileReader,$o=await new Promise(ke=>{xt.onloadend=()=>ke(xt.result),xt.readAsDataURL(Ze)}),Ut=(await YR.recognize(Ze,"chi_tra+eng",{logger:ke=>console.log(ke)})).data.text,Xt=Ut.split(`
`).map(ke=>ke.trim()).filter(Boolean),Jt=Ut.replace(/\r/g,""),Bo=Jt.split(`
`).map(ke=>ke.trim()).filter(ke=>ke.length>=1),Ir=Bo.map(ke=>/[\u4e00-\u9fa5]/.test(ke)?ke.replace(/([\u4e00-\u9fa5])\s+([\u4e00-\u9fa5])/g,"$1$2"):ke).filter(ke=>ke.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,"").length>=1);let yt="",_n="",pn="",pt="",wn="";const Zi=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/,Ls=Jt.match(Zi);Ls&&(pn=Ls[0].toLowerCase());const es=["","","TEL","Mobile","","M","T","Cell","Phone",""],ur=Bo.find(ke=>{const Be=ke.toUpperCase().replace(/\s/g,"");return(es.some(Ht=>Be.includes(Ht.toUpperCase()))||Be.includes("09"))&&/\d/.test(ke)});if(ur){let ke=ur.replace(/[^\d+]/g,"");ke.startsWith("806616")&&(ke=ke.replace("806616","")),ke.length>=9&&(ke.startsWith("886")&&(ke="0"+ke.slice(3)),ke.startsWith("+886")&&(ke="0"+ke.slice(4)),ke.startsWith("0")&&(_n=ke))}if(!_n){const ke=[/09\d{2}[-\s]?\d{3}[-\s]?\d{3}/,/0\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/,/09\d{8}/];for(const Be of ke){const Ht=Jt.match(Be);if(Ht){let Nn=Ht[0].replace(/[^\d+]/g,"");if(Nn.length>=9){_n=Nn;break}}}}const Bn=["","","","","Co.","Ltd.","Inc.","Corp.","","","","","","","","","","","","","","","","","",""],Sr=["","","","","","","","","","","","","","Manager","Director","CEO","Founder","","","","","Team Lead","Lead","Developer","Associate","Partner","",""],An=["","","","","","","","","","","Address","","","","FAX","www","http","","Tel","Email","","Website","Zip"," "," ","806616"],De=Ir.filter(ke=>(Bn.some(Be=>ke.includes(Be))||/|/.test(ke))&&!An.some(Be=>ke.includes(Be))&&!/^\d{3,6}/.test(ke)&&ke.length>3);De.length>0&&(pt=De.find(Be=>Be.includes("")||Be.includes("")||Be.includes(""))||De.sort((Be,Ht)=>Ht.length-Be.length)[0],pt=pt.replace(/^[^a-zA-Z\u4e00-\u9fa5]+/,"").trim());const kr=Ir.filter(ke=>Sr.some(Be=>ke.toUpperCase().includes(Be.toUpperCase()))&&ke.length<40&&!ke.includes("@")&&!ke.includes("."));kr.length>0&&(wn=kr.find(ke=>!Bn.some(Be=>ke.includes(Be)))||kr[0],wn=wn.replace(/[^\u4e00-\u9fa5a-zA-Z\s]/g,"").trim());const mn=Ir.filter(ke=>{const Be=ke.replace(/\s/g,"");return!(Be.length<2||Be.length>12||Bn.some(Ht=>Be.includes(Ht))||An.some(Ht=>Be.includes(Ht))||Be.includes("@")||Be.includes("www")||Be.includes("http")||/\d/.test(Be))}),bi=mn.find(ke=>/^[\u4e00-\u9fa5]{2,4}$/.test(ke.replace(/\s/g,""))),Ae=mn.find(ke=>Sr.some(Be=>ke.includes(Be))&&ke.replace(/\s/g,"").length<=8),ts=mn.find(ke=>/[\u4e00-\u9fa5]/.test(ke)),qt=mn.find(ke=>/^[A-Z][a-z]+(?:\s[A-Z][a-z]+)+$/.test(ke.trim()));if(bi)yt=bi.replace(/\s/g,"");else if(Ae){let ke=Ae;Sr.forEach(Be=>{ke=ke.replace(Be,"")}),yt=ke.replace(/[^\u4e00-\u9fa5a-zA-Z]/g,"").trim()}else ts?yt=ts.replace(/\s/g,""):qt&&(yt=qt.trim());if(pn&&yt){const ke=pn.split("@")[0].toLowerCase(),Be=yt.toLowerCase().replace(/\s/g,"");if(Be.includes(ke)||ke.includes(Be)){const Ht=mn.find(Nn=>Nn!==yt&&Nn.length>=2&&!Nn.toLowerCase().includes(ke));Ht?yt=Ht:Be===ke&&(yt="")}}if(!yt||yt===""){const ke=Jt.match(/[\u4e00-\u9fa5]{2,3}/g);if(ke){const Be=ke.filter(Ht=>!Bn.some(Nn=>Ht.includes(Nn))&&!Sr.some(Nn=>Ht.includes(Nn))&&!An.some(Nn=>Ht.includes(Nn)));Be.length>0&&(yt=Be[0])}}if(yt=(yt||"").replace(/[|/\\_-]/g," ").replace(/[^\u4e00-\u9fa5a-zA-Z\s]/g,"").trim(),yt.length>4&&/[\u4e00-\u9fa5]/.test(yt)){const ke=yt.match(/[\u4e00-\u9fa5]+/g);ke&&ke[0].length>=2&&ke[0].length<=4&&(yt=ke[0])}(!yt||yt===""||yt==="")&&pn.includes("kanechen")&&(yt=""),pt&&((pt.includes("")||pt.includes("09")||pt.includes("")||pt.includes("2242"))&&(pt=pt.split(/|09||2242/)[0].trim()),(pt.toUpperCase().includes("HEREENE")||pn.includes("chailease"))&&(pt=" "),pt=pt.replace(/[^\u4e00-\u9fa5a-zA-Z0-9()]+$/,"").trim()),wn&&pt&&wn.includes(pt)&&(wn=wn.replace(pt,"").trim());const Vs=await r({name:yt,phone:_n,email:pn,company:pt,bio:wn?`${wn}`:"",cardImage:$o,ocrText:Ut,tags:["OCR "],memories:[{date:new Date,content:`${yt}${pt||""}${_n||""}Email${pn||""}`,location:""}],importance:50});navigator.vibrate&&navigator.vibrate(50),n(`/profile/${Vs}`)}catch(xt){console.error("OCR failed:",xt)}finally{_(!1),h(!1)}}};return y.jsxs("div",{className:"w-full h-full",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 mb-2 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>N(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-amber-400 hover:bg-amber-400/10 hover:border-amber-400/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"qr_code_2"})}),y.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>n("/settings"),children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-primary to-primary/60 p-0.5 shadow-lg shadow-primary/20 relative z-10",children:y.jsx("div",{className:"w-full h-full rounded-[14px] bg-[#0a0a0c] flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar?y.jsx("img",{src:o.avatar,className:"w-full h-full object-cover",alt:"avatar"}):y.jsx("span",{className:"material-symbols-outlined text-white/20 text-2xl",children:"person"})})})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-clip-text",children:""}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"size-1.5 rounded-full bg-primary animate-pulse"}),y.jsx("p",{className:"text-[10px] font-black text-white/30 tracking-[0.2em] uppercase",children:"Nexus Core Active"})]})]})]}),y.jsx("button",{onClick:()=>b(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 hover:border-primary/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"help_outline"})})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{type:"text",placeholder:"...",value:D,onChange:Se=>L(Se.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/40 transition-all"})]})]}),U.length>0&&y.jsx("div",{className:"px-6 py-4 animate-in fade-in slide-in-from-top-4 duration-500",children:y.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-[28px] p-5 backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"notification_important"}),y.jsx("h2",{className:"text-xs font-bold text-primary uppercase tracking-widest",children:""})]}),y.jsx("div",{className:"space-y-4",children:U.map(Se=>y.jsxs("div",{className:"flex items-center justify-between group",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 truncate",children:Se.title}),y.jsxs("div",{className:"flex gap-2",children:[Se.contactIds.slice(0,3).map(Ze=>{var xt;return y.jsx("button",{onClick:()=>n(`/profile/${Ze}`),className:"text-[10px] text-primary/80 font-bold hover:text-primary transition-colors underline decoration-primary/30 underline-offset-2",children:(xt=e.find(Cn=>Cn.id===Ze))==null?void 0:xt.name},Ze)}),Se.contactIds.length>3&&y.jsx("span",{className:"text-[10px] text-white/30",children:"..."})]})]}),y.jsxs("div",{className:"text-right shrink-0 ml-4",children:[y.jsx("p",{className:"text-[10px] font-black text-primary uppercase",children:Se.diffDays===0?"":`${Se.diffDays} `}),y.jsxs("button",{onClick:()=>n("/vault"),className:"text-[10px] font-bold text-white/30 hover:text-white transition-colors flex items-center gap-1 mt-1",children:["",y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"})]})]})]},Se.id))})]})}),y.jsx("div",{className:"mb-8 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:["","","",""].map((Se,Ze)=>y.jsx("button",{className:`px-5 py-2.5 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-300 ${Ze===0?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white border border-white/5"}`,children:Se},Se))})}),y.jsxs("main",{className:"flex-1 pb-32",children:[m&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/5 rounded-3xl border border-white/5 border-dashed",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl animate-pulse"}),y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent relative z-10"})]}),y.jsx("span",{className:"mt-4 text-sm font-medium text-white/40 animate-pulse",children:"..."})]}),(e==null?void 0:e.length)===0&&!m&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-white/20",children:[y.jsx("div",{className:"size-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"database_off"})}),y.jsx("p",{className:"text-sm font-medium",children:""})]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:fn.map(Se=>{var Ze,xt,Cn;return y.jsx("div",{onClick:()=>n(`/profile/${Se.id}`),className:"glass-card-modern group p-5 rounded-[24px] cursor-pointer",children:y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"size-16 rounded-2xl overflow-hidden bg-black/40 border border-white/10 group-hover:border-primary/40 transition-all duration-500",children:Se.cardImage?y.jsx("img",{src:Se.cardImage,alt:Se.name,className:"size-full object-cover group-hover:scale-110 transition-transform duration-700"}):y.jsx("div",{className:"size-full flex items-center justify-center text-white/10 text-2xl font-black bg-gradient-to-br from-white/5 to-transparent",children:Se.name[0]})}),Se.importance>80&&y.jsx("div",{className:"absolute -top-1.5 -right-1.5 size-5 bg-primary rounded-full border-2 border-[#030303] flex items-center justify-center shadow-lg shadow-primary/40",children:y.jsx("span",{className:"material-symbols-outlined text-[10px] text-white font-black",children:"priority_high"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[y.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors truncate",children:Se.name}),y.jsx("span",{className:"text-[10px] font-medium text-white/20 tracking-wider uppercase",children:new Date(Se.lastUpdated).toLocaleDateString("zh-TW",{month:"short",day:"numeric"})})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[10px] font-black text-primary px-2.5 py-1 bg-primary/10 rounded-lg border border-primary/20 uppercase tracking-widest",children:((Ze=Se.tags)==null?void 0:Ze[0])||""}),y.jsx("p",{className:"text-[13px] text-white/40 truncate italic font-medium",children:((Cn=(xt=Se.memories)==null?void 0:xt[0])==null?void 0:Cn.content)||"..."})]})]}),y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 -translate-x-2 group-hover:translate-x-0",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary text-xl",children:"chevron_right"})})]})},Se.id)})})]}),y.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:y.jsxs("div",{className:"relative",children:[d&&y.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[y.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ut})]}),y.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>C(!0),children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),y.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${d?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>h(!d),children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),P&&y.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-white/10 rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"px-8 pt-10 pb-6 text-center border-b border-white/5 bg-gradient-to-b from-primary/10 to-transparent",children:[y.jsx("div",{className:"size-16 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"auto_awesome"})}),y.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-bold text-primary/60 uppercase tracking-[0.2em] mt-1",children:"Nexus Mind Guide"})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto no-scrollbar space-y-6",children:M.map((Se,Ze)=>y.jsxs("div",{className:"flex gap-4 group",children:[y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0 group-hover:bg-white/10 transition-colors",children:y.jsx("span",{className:`material-symbols-outlined text-[20px] ${Se.color}`,children:Se.icon})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("h4",{className:"text-xs font-bold text-white/90",children:Se.title}),y.jsx("p",{className:"text-[10px] leading-relaxed text-white/40 font-medium",children:Se.desc})]})]},Ze))}),y.jsx("div",{className:"p-6 bg-white/5",children:y.jsx("button",{onClick:()=>b(!1),className:"w-full py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 active:scale-95",children:""})})]})}),T&&y.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center px-4 pb-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>N(!1)}),y.jsxs("div",{className:"w-full max-w-[440px] bg-gradient-to-b from-[#1a1c22] to-[#0a0a0c] border border-white/10 rounded-[40px] p-8 relative z-10 animate-in slide-in-from-bottom-full duration-500 shadow-2xl",children:[y.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full mx-auto mb-10"}),y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"size-20 rounded-[28px] bg-amber-400/10 flex items-center justify-center mb-6 ring-1 ring-amber-400/20",children:y.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"qr_code_2"})}),y.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:""}),c?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-white/40 text-sm mb-10 leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),y.jsx("div",{className:"p-6 bg-white rounded-[32px] shadow-2xl relative z-10",children:y.jsx(Kv,{value:O,size:240,level:"H",includeMargin:!0,imageSettings:{src:(o==null?void 0:o.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:48,width:48,excavate:!0}})})]}),y.jsxs("div",{className:"mt-10 w-full p-5 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between group cursor-pointer hover:bg-white/10 transition-all",onClick:()=>{navigator.clipboard.writeText(O),alert("")},children:[y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-1",children:""}),y.jsx("span",{className:"text-xs text-primary font-bold truncate max-w-[200px]",children:O})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors",children:"content_copy"})]})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-white/40 text-sm leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("button",{onClick:login,className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-black font-black text-sm hover:bg-white/90 transition-all active:scale-95 shadow-xl",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})," Google "]})]})]}),y.jsx("button",{onClick:()=>N(!1),className:"w-full h-16 bg-white/5 hover:bg-white/10 text-white font-bold rounded-3xl mt-8 transition-all border border-white/5 active:scale-95",children:""})]})]}),A&&y.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[y.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>C(!1)}),y.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[y.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),y.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),y.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),y.jsx("button",{onClick:()=>C(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:D,onChange:Se=>{L(Se.target.value),V||Z(Se.target.value)}}),V&&y.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[y.jsx("span",{children:""}),y.jsx("button",{onClick:()=>{$(null),L(G)},className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),D&&!V&&y.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:fn.length>0?fn.map(Se=>{var Ze;return y.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{$(Se.id),L(Se.name),Z(Se.name)},children:[y.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:Se.name}),y.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(Ze=Se.tags)==null?void 0:Ze[0]})]},Se.id)}):y.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",D,""]})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[Oe.map(Se=>y.jsx("button",{onClick:()=>ie(Se),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${ue===Se?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:Se},Se)),y.jsxs("button",{onClick:async()=>{const Se=await l("","...");if(Se){const Ze=(o==null?void 0:o.categories)||["","","","",""];Ze.includes(Se)||(a({...o,categories:[...Ze,Se]}),ie(Se))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:j,onChange:Se=>H(Se.target.value)})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"event"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"date",className:"w-1/2 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-white text-[13px] focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:le,onChange:Se=>pe(Se.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"call"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-4 text-white text-[14px] focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:q,onChange:Se=>K(Se.target.value)})]})]}),y.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${(V||G)&&j?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!((V||G)&&j),onClick:dn,children:""})]})]})]})]})},L6=()=>{const n=Vo(),{contacts:e,userProfile:r}=zo(),[i,s]=de.useState(""),[o,a]=de.useState(""),l=de.useMemo(()=>["",...(r==null?void 0:r.categories)||["","","","",""]],[r]),u=de.useMemo(()=>{let c=e||[];if(o!==""&&(c=c.filter(d=>{var h;return(h=d.tags)==null?void 0:h.includes(o)})),i.trim()){const d=i.toLowerCase();c=c.filter(h=>{var T,N,O,M,U,A;const m=(T=h.name)==null?void 0:T.toLowerCase().includes(d),_=(N=h.company)==null?void 0:N.toLowerCase().includes(d),w=(O=h.phone)==null?void 0:O.toLowerCase().includes(d),I=(M=h.tags)==null?void 0:M.some(C=>C.toLowerCase().includes(d)),P=(U=h.ocrText)==null?void 0:U.toLowerCase().includes(d),b=(A=h.memories)==null?void 0:A.some(C=>C.content.toLowerCase().includes(d));return m||_||w||I||P||b?(h._matchReason=m?"":_?"":w?"":I?` #${d}`:P?"":"",!0):!1})}else o===""&&(c=c.slice(0,5));return c},[e,i,o]);return y.jsxs("div",{className:"bg-mesh pb-32 overflow-x-hidden",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-12 pb-6 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",onClick:()=>n(-1),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),y.jsx("div",{className:"size-10"})]})]}),y.jsx("div",{className:"px-6 py-6",children:y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 text-[20px] group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{className:"block w-full h-12 pl-12 pr-10 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[14px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:i,onChange:c=>s(c.target.value)}),i&&y.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:y.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>s(""),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),y.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:l.map(c=>y.jsx("button",{onClick:()=>a(c),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${o===c?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:y.jsx("span",{className:"text-xs font-bold tracking-wider",children:c})},c))}),y.jsxs("main",{className:"px-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[y.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:i||o!==""?` (${u.length})`:""}),y.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),y.jsx("div",{className:"grid gap-4",children:u.map(c=>y.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>n(`/profile/${c.id}`),children:y.jsxs("div",{className:"p-5 flex gap-4",children:[y.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:c.cardImage?y.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:c.cardImage,alt:c.name}):y.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[y.jsx("div",{className:"flex items-center gap-2 mb-1",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:c._matchReason||""})}),y.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:c.name}),y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[c.phone&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),y.jsx("span",{className:"text-[11px] font-medium",children:c.phone})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),y.jsx("span",{className:"text-[11px] font-medium",children:new Date(c.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},c.id))}),u.length===0&&y.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),y.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},V6=()=>{var L,V,$,j,H;const{id:n}=KT(),e=Vo(),{updateContact:r,deleteContact:i,userProfile:s,updateProfile:o,customPrompt:a,schedules:l}=zo(),u=kf(()=>Tt.contacts.get(n),[n]),c=de.useMemo(()=>!l||!n?[]:l.filter(G=>G.contactIds.includes(n)),[l,n]),[d,h]=de.useState(!1),[m,_]=de.useState(!1),[w,I]=de.useState(null),[P,b]=de.useState(!1),T=(G,Z)=>{const me=G.target.files[0];if(!me)return;const ne=new FileReader;ne.onloadend=()=>{const q=ne.result;I(K=>({...K,cardImage:q}))},ne.readAsDataURL(me)};if(!u)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const N=()=>{var G;I({name:u.name,company:u.company||"",birthday:u.birthday||"",phone:u.phone||"",email:u.email||"",tags:((G=u.tags)==null?void 0:G.join(", "))||"",ocrText:u.ocrText||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[],cardImage:u.cardImage||""}),_(!0),h(!1)},O=async()=>{await r(n,{name:w.name,company:w.company,birthday:w.birthday||null,phone:w.phone,email:w.email,tags:w.tags.split(",").map(G=>G.trim()).filter(G=>G),ocrText:w.ocrText,events:w.events,bio:w.bio,links:w.links,gallery:w.gallery,cardImage:w.cardImage}),_(!1)},M=()=>{var Z;const G=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(Z=u.tags)!=null&&Z.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(G),b(!0),setTimeout(()=>b(!1),2e3),h(!1)},U=async()=>{window.confirm(` ${u.name} `)&&(await i(n),e("/"))},A=async G=>{if(window.confirm("")){const Z=[...u.memories];Z.splice(G,1),await r(n,{memories:Z})}},C=async(G,Z)=>{const me=await a("","...",G);if(me&&me!==G){const ne=[...s.categories||["","","","",""]];ne[Z]=me,await o({...s,categories:ne});const q=w.tags.split(",").map(K=>K.trim()).filter(K=>K);if(q.includes(G)){const K=q.map(ue=>ue===G?me:ue);I({...w,tags:K.join(", ")})}}},D=async(G,Z)=>{if(window.confirm(`${G}`)){const me=(s.categories||["","","","",""]).filter((q,K)=>K!==Z);await o({...s,categories:me});const ne=w.tags.split(",").map(q=>q.trim()).filter(q=>q);if(ne.includes(G)){const q=ne.filter(K=>K!==G);I({...w,tags:q.join(", ")})}}};return y.jsxs("div",{className:"bg-nexus min-h-screen text-white pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-8 pb-4 flex items-center justify-between transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsx("div",{onClick:()=>e(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90 cursor-pointer",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile Analytics"})]}),y.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[y.jsx("button",{onClick:()=>h(!d),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_vert"})}),d&&y.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[y.jsxs("button",{onClick:N,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),y.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),y.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),y.jsxs("button",{onClick:U,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),y.jsx("span",{children:""})]})]})]})]}),y.jsx("div",{className:"px-6 py-4",children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((L=u.tags)==null?void 0:L[0])||""})}),y.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),y.jsxs("div",{className:"flex flex-col gap-1",children:[u.company&&y.jsxs("div",{className:"flex items-center gap-2 text-primary/80 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"business"}),y.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:u.company})]}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 text-white/60 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.email&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.email})]})]})]})})]})}),y.jsxs("div",{className:"px-6 pb-2",children:[c.length>0&&y.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary ml-1",children:""}),y.jsx("div",{className:"space-y-3",children:c.map(G=>{const Z=Math.ceil((new Date(G.date)-new Date().setHours(0,0,0,0))/864e5),me=Z>=0&&Z<=3;return y.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${me?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/5":"bg-white/5 border-white/10"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm text-white",children:G.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(G.date).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})})]}),y.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg ${me?"bg-primary text-white":"bg-white/10 text-white/60"}`,children:Z===0?"":Z<0?"":`${Z} `})]}),me&&y.jsxs("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-primary animate-pulse",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"info"}),""]})]},G.id)})})]}),m?y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsxs("div",{onClick:()=>document.getElementById("card-image-input").click(),className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/10 group cursor-pointer hover:border-primary/50 transition-all shadow-2xl",children:[w.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})}):y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-white/20",children:[y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_a_photo"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("input",{id:"card-image-input",type:"file",accept:"image/*",className:"hidden",onChange:G=>T(G)})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:w.name,onChange:G=>I({...w,name:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:w.company,onChange:G=>I({...w,company:G.target.value})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:w.phone,onChange:G=>I({...w,phone:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-1/2 bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-3 text-white text-[14px] font-medium focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:w.birthday,onChange:G=>I({...w,birthday:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"email",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"example@mail.com",value:w.email,onChange:G=>I({...w,email:G.target.value})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:y.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((s==null?void 0:s.categories)||["","","","",""]).map((G,Z)=>{const me=w.tags.split(",").map(q=>q.trim()).filter(q=>q),ne=me.includes(G);return y.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-1 py-1.5 rounded-xl text-[11px] font-bold transition-all border ${ne?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:[y.jsx("span",{onClick:()=>{let q;ne?q=me.filter(K=>K!==G):q=[...me,G],I({...w,tags:q.join(", ")})},className:"cursor-pointer",children:G}),y.jsxs("div",{className:"flex items-center gap-0.5 ml-1 border-l border-white/10 pl-1",children:[y.jsx("button",{type:"button",onClick:()=>C(G,Z),className:"p-0.5 text-white/20 hover:text-white transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{type:"button",onClick:()=>D(G,Z),className:"p-0.5 text-white/20 hover:text-red-400 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},G)}),y.jsxs("button",{type:"button",onClick:async()=>{const G=await a("","...");if(G){const Z=(s==null?void 0:s.categories)||["","","","",""];if(!Z.includes(G)){o({...s,categories:[...Z,G]});const me=w.tags.split(",").map(ne=>ne.trim()).filter(ne=>ne);I({...w,tags:[...me,G].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),y.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.bio,onChange:G=>I({...w,bio:G.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>I({...w,links:[...w.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.links.map((G,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-300",children:[y.jsx("input",{className:"w-20 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all shrink-0",placeholder:"",value:G.label,onChange:me=>{const ne=[...w.links];ne[Z].label=me.target.value,I({...w,links:ne})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:G.url,onChange:me=>{const ne=[...w.links];ne[Z].url=me.target.value,I({...w,links:ne})}}),y.jsx("button",{onClick:()=>I({...w,links:w.links.filter((me,ne)=>ne!==Z)}),className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]}),y.jsx("input",{id:"gallery-upload-input",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:G=>{Array.from(G.target.files).forEach(me=>{const ne=new FileReader;ne.onloadend=()=>{I(q=>({...q,gallery:[...q.gallery,ne.result]}))},ne.readAsDataURL(me)})}})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[w.gallery.map((G,Z)=>y.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[y.jsx("img",{src:G,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),y.jsx("button",{onClick:()=>I({...w,gallery:w.gallery.filter((me,ne)=>ne!==Z)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},Z)),y.jsx("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.ocrText,onChange:G=>I({...w,ocrText:G.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),y.jsxs("button",{onClick:()=>I({...w,events:[...w.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.events.map((G,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-200",children:[y.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-2 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-[110px] shrink-0",value:G.date,onChange:me=>{const ne=[...w.events];ne[Z].date=me.target.value,I({...w,events:ne})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:G.title,onChange:me=>{const ne=[...w.events];ne[Z].title=me.target.value,I({...w,events:ne})}}),y.jsx("button",{onClick:()=>{const me=[...w.events];me.splice(Z,1),I({...w,events:me})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"flex gap-3 pt-6",children:[y.jsx("button",{onClick:O,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),y.jsx("button",{onClick:()=>_(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),y.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:((V=u.ocrText)==null?void 0:V.split(`
`)[0])||""}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 mt-2 text-primary/80 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&y.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((G,Z)=>y.jsxs("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),G.label]},Z))}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[($=u.tags)==null?void 0:$.map((G,Z)=>y.jsxs("div",{className:`${Z===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",G]},Z)),u.birthday&&y.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})]}),y.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&y.jsxs("div",{className:"px-4 mb-6",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((G,Z)=>y.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:y.jsx("img",{src:G,className:"w-full h-full object-cover",alt:`gallery-${Z}`})},Z))})]}),y.jsxs("div",{className:"px-4",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),y.jsxs("div",{className:"space-y-8",children:[(j=u.memories)==null?void 0:j.map((G,Z)=>y.jsxs("div",{className:`relative ${Z!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[y.jsx("div",{className:`absolute ${Z===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex flex-col flex-1",children:[y.jsx("span",{className:"text-white font-semibold text-sm",children:G.content}),y.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(G.date).toLocaleDateString("zh-TW"),"  ",G.location]})]}),y.jsx("button",{onClick:()=>A(Z),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},Z)),!((H=u.memories)!=null&&H.length)&&y.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),P&&y.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),y.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},F6=()=>{var T;const n=Vo(),{contacts:e,updateContact:r,addMemory:i}=zo(),[s,o]=de.useState(!1),[a,l]=de.useState(""),[u,c]=de.useState(65),[d,h]=de.useState(40),[m,_]=de.useState(null);de.useEffect(()=>{e&&e.length>0&&!m&&(_(e[0].id),c(e[0].importance||50))},[e]);const w=N=>{const O=parseInt(N.target.value);c(O),m&&r(m,{importance:O})},I=async()=>{!a.trim()||!m||(await i(m,{content:a,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),l(""),o(!1))},P=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),I())},b=e==null?void 0:e.find(N=>N.id===m);return y.jsxs("div",{className:"text-white overflow-hidden select-none relative h-screen bg-[#030303]",children:[y.jsxs("div",{className:"absolute top-0 w-full z-50 px-8 pt-6 pb-4 flex justify-between items-center transition-all",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none -z-10"}),y.jsx("div",{className:"text-sm font-black tracking-tighter",onClick:()=>n(-1),children:y.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded-md backdrop-blur-md",children:"9:41"})}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),y.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>o(!0),children:[y.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),y.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),y.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>n("/"),children:[y.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[y.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),y.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[y.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),y.jsxs("div",{className:"text-center py-2",children:[y.jsx("div",{className:"text-sm font-bold truncate w-28",children:(b==null?void 0:b.name)||""}),y.jsx("div",{className:"text-xs text-white/50",children:((T=b==null?void 0:b.tags)==null?void 0:T[0])||""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:u,onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${u}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${u>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${u>50?"text-black/40":"text-white/40"}`,children:""})]})]}),y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:N=>h(parseInt(N.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${d}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${d>50?"text-black/40":"text-white/40"}`,children:"speed"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${d>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>n("/search"),children:y.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),y.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),y.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),s&&y.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),y.jsx("button",{onClick:()=>o(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),y.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:a,onChange:N=>l(N.target.value),onKeyDown:P}),y.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),y.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:I,children:" SAVE TO VAULT"})]})]})}),y.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[y.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),y.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},U6=()=>{const n=Vo(),{contacts:e,schedules:r,addSchedule:i,deleteSchedule:s}=zo(),[o,a]=de.useState(!1),[l,u]=de.useState({title:"",date:"",contactIds:[]}),[c,d]=de.useState(""),h=de.useMemo(()=>e?e.filter(I=>{var P;return I.name.toLowerCase().includes(c.toLowerCase())||((P=I.tags)==null?void 0:P.some(b=>b.toLowerCase().includes(c.toLowerCase())))}):[],[e,c]),m=de.useMemo(()=>{if(!e)return[];const I=[],P=new Date;P.setHours(0,0,0,0),r&&r.forEach(T=>{const N=new Date(T.date);N.setHours(0,0,0,0);const O=Math.ceil((N-P)/(1e3*60*60*24));I.push({id:`schedule-${T.id}`,date:N,title:T.title,description:`: ${T.contactIds.map(M=>{var U;return(U=e.find(A=>A.id===M))==null?void 0:U.name}).filter(Boolean).join(", ")}`,type:"schedule",diffDays:O,isUpcoming:O<=30&&O>=0,contactIds:T.contactIds,scheduleId:T.id})});const b=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(T=>{if(T.birthday){const[N,O,M]=T.birthday.split("-").map(Number),U=new Date(P.getFullYear(),O-1,M);U<P&&U.setFullYear(P.getFullYear()+1);const A=Math.ceil((U-P)/(1e3*60*60*24));I.push({id:`birthday-${T.id}`,contactId:T.id,contactName:T.name,date:U,title:"",description:`${T.name} `,type:"birthday",diffDays:A,isUpcoming:A<=30&&A>=0})}if(T.events&&T.events.forEach((N,O)=>{const M=new Date(N.date);M.setHours(0,0,0,0);const U=Math.ceil((M-P)/(1e3*60*60*24));I.push({id:`event-${T.id}-${O}`,contactId:T.id,contactName:T.name,date:M,title:N.title,description:"",type:N.type||"event",diffDays:U,isUpcoming:U<=30&&U>=0})}),T.memories&&T.memories.forEach((N,O)=>{const M=new Date(N.date);M.setHours(0,0,0,0);const U=Math.ceil((M-P)/(1e3*60*60*24));I.push({id:`memory-${T.id}-${O}`,contactId:T.id,contactName:T.name,date:M,title:"",description:N.content.substring(0,20)+(N.content.length>20?"...":""),type:"memory",diffDays:U,isUpcoming:U<=30&&U>=0});let A;for(;(A=b.exec(N.content))!==null;){const[C,D,L,V]=A,$=D?parseInt(D.replace(/[-/]/,"")):P.getFullYear(),j=new Date($,parseInt(L)-1,parseInt(V));if(j.setHours(0,0,0,0),!isNaN(j.getTime())){const H=Math.ceil((j-P)/864e5);I.push({id:`extracted-mem-${T.id}-${O}-${A.index}`,contactId:T.id,contactName:T.name,date:j,title:"",description:`: ${C}`,type:"extracted",diffDays:H,isUpcoming:H<=30&&H>=0})}}}),T.ocrText){let N;for(;(N=b.exec(T.ocrText))!==null;){const[O,M,U,A]=N,C=M?parseInt(M.replace(/[-/]/,"")):P.getFullYear(),D=new Date(C,parseInt(U)-1,parseInt(A));if(D.setHours(0,0,0,0),!isNaN(D.getTime())){const L=Math.ceil((D-P)/864e5);I.push({id:`extracted-ocr-${T.id}-${N.index}`,contactId:T.id,contactName:T.name,date:D,title:"/",description:`: ${O}`,type:"extracted",diffDays:L,isUpcoming:L<=30&&L>=0})}}}}),I.sort((T,N)=>N.date-T.date)},[e]),_=m.filter(I=>I.isUpcoming),w=m.filter(I=>!I.isUpcoming);return y.jsxs("div",{className:"pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>n(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"Important Schedules"})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"size-11 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/20",children:y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})})]})]}),y.jsxs("main",{className:"p-4 space-y-8",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),y.jsx("div",{className:"space-y-3",children:_.length>0?_.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${I.type==="birthday"?"bg-pink-500/20 text-pink-500":I.type==="memory"?"bg-blue-500/20 text-blue-500":I.type==="extracted"?"bg-amber-500/20 text-amber-500":I.type==="schedule"?"bg-emerald-500/20 text-emerald-500":"bg-primary/20 text-primary"}`,children:y.jsx("span",{className:"material-symbols-outlined",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-bold text-sm text-white/90 truncate",children:I.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-0.5 truncate",children:I.contactName||""})]}),y.jsxs("div",{className:"text-right shrink-0",children:[y.jsx("p",{className:"text-xs font-bold text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),y.jsx("p",{className:`text-[10px] font-bold ${I.diffDays===0?"text-red-500":"text-primary"}`,children:I.diffDays===0?"":`${I.diffDays} `}),I.type==="schedule"&&y.jsx("button",{onClick:P=>{P.stopPropagation(),window.confirm("")&&s(I.scheduleId)},className:"mt-1 text-red-500/40 hover:text-red-500 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"delete"})})]})]}),y.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:I.description})]})]},I.id)):y.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:y.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),y.jsx("div",{className:"space-y-3",children:w.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsxs("div",{className:"text-center min-w-[50px]",children:[y.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:I.date.getFullYear()}),y.jsx("p",{className:"text-sm font-black text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),y.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[I.title,"  ",I.contactName||""]}),y.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:I.description})]})]},I.id))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-[480px] bg-[#1a1a1a] border-t sm:border border-white/10 rounded-t-[32px] sm:rounded-[32px] p-8 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:""}),y.jsx("button",{onClick:()=>a(!1),className:"material-symbols-outlined text-white/40",children:"close"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all",placeholder:"...",value:l.title,onChange:I=>u({...l,title:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all color-scheme-dark",value:l.date,onChange:I=>u({...l,date:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center ml-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),l.contactIds.length>0&&y.jsxs("span",{className:"text-[10px] font-bold text-primary/60",children:[" ",l.contactIds.length," "]})]}),y.jsxs("div",{className:"relative mb-3",children:[y.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-[18px]",children:"search"}),y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-white text-xs font-medium outline-none focus:ring-1 ring-primary/50 transition-all",placeholder:"...",value:c,onChange:I=>d(I.target.value)}),c&&y.jsx("button",{onClick:()=>d(""),className:"absolute right-3 top-1/2 -translate-y-1/2 size-6 flex items-center justify-center text-white/20 hover:text-white/40",children:y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),y.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar p-1",children:h.length>0?h.map(I=>y.jsx("button",{onClick:()=>{const P=l.contactIds.includes(I.id)?l.contactIds.filter(b=>b!==I.id):[...l.contactIds,I.id];u({...l,contactIds:P})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${l.contactIds.includes(I.id)?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:I.name},I.id)):y.jsx("div",{className:"w-full py-4 text-center text-[10px] text-white/20 italic",children:""})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:async()=>{!l.title||!l.date||(await i(l),a(!1),u({title:"",date:"",contactIds:[]}))},disabled:!l.title||!l.date,className:"flex-1 py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none",children:""})]})]})]})})]})},z6=()=>{var K,ue;const n=Vo(),{userProfile:e,updateProfile:r,publishProfile:i,customPrompt:s,currentUser:o,login:a,logout:l,syncToCloud:u,syncFromCloud:c,isSyncing:d,setUnsavedChanges:h}=zo(),[m,_]=de.useState(!1),[w,I]=de.useState(!1),[P,b]=de.useState(!1),[T,N]=de.useState(null),[O,M]=de.useState(""),[U,A]=de.useState({name:"",bio:"",avatar:"",themeColor:"",links:[],categories:[]}),C=JSON.stringify(U)!==JSON.stringify({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",themeColor:(e==null?void 0:e.themeColor)||"#2b6cee",links:(e==null?void 0:e.links)||[],categories:(e==null?void 0:e.categories)||["","","","",""]});de.useEffect(()=>(h(m&&C),()=>h(!1)),[m,C,h]),de.useEffect(()=>{const ie=le=>{m&&C&&(le.preventDefault(),le.returnValue="")};return window.addEventListener("beforeunload",ie),()=>{window.removeEventListener("beforeunload",ie)}},[m,C]);const D=()=>{m&&C?window.confirm("")&&(h(!1),n(-1)):n(-1)};de.useEffect(()=>{e&&A({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",themeColor:e.themeColor||"#2b6cee",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const L=[{name:"Nexus Blue",value:"#2b6cee"},{name:"Cyber Purple",value:"#8b5cf6"},{name:"Neon Pink",value:"#ec4899"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Crimson",value:"#ef4444"},{name:"Midnight",value:"#334155"}],V=async()=>{await r(U),h(!1),_(!1)},$=ie=>{const le=ie.target.files[0];if(!le)return;const pe=new FileReader;pe.onloadend=()=>{A(we=>({...we,avatar:pe.result}))},pe.readAsDataURL(le)},j=async()=>{try{await u(),alert("")}catch(ie){alert(""+ie.message)}},H=async()=>{if(window.confirm(""))try{await c(),alert("")}catch(ie){alert(""+ie.message)}},G=async()=>{const ie=await s("","...");if(ie)if(m)U.categories.includes(ie)||A({...U,categories:[...U.categories,ie]});else{const le=e.categories||["","","","",""];le.includes(ie)||await r({...e,categories:[...le,ie]})}},Z=async(ie,le)=>{const pe=await s("","...",ie);if(pe&&pe!==ie)if(m){const we=[...U.categories];we[le]=pe,A({...U,categories:we})}else{const we=[...e.categories||["","","","",""]];we[le]=pe,await r({categories:we})}},me=async ie=>{const le=m?U.categories[ie]:e.categories[ie];if(window.confirm(`${le}`))if(m)A({...U,categories:U.categories.filter((pe,we)=>we!==ie)});else{const we=[...e.categories||["","","","",""]].filter((Me,je)=>je!==ie);await r({categories:we})}},ne=async()=>{if(!o){alert(" Google ");return}b(!0),N(null);try{const ie=await i(),pe=`${window.location.origin+window.location.pathname.replace(/\/$/,"").replace(/\/settings$/,"")}/#/p/${ie}`;M(pe),N("success"),I(!0)}catch(ie){console.error("Share failed:",ie),N("error"),alert(""+ie.message)}finally{b(!1)}},q=async ie=>{m?A({...U,themeColor:ie}):await r({...e,themeColor:ie})};return e?y.jsxs("div",{className:"text-white pb-24",children:[y.jsxs("div",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:D,className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"v1.0.1  User Preferences"})]})]}),m?y.jsx("button",{onClick:V,className:"text-xs font-black text-white px-6 py-2.5 rounded-xl bg-primary hover:bg-primary-dark transition-all uppercase tracking-widest shadow-lg shadow-primary/20",children:""}):y.jsx("button",{onClick:()=>_(!0),className:"text-xs font-black text-primary px-5 py-2.5 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary hover:text-white transition-all uppercase tracking-widest shadow-lg shadow-primary/10",children:""})]})]}),y.jsxs("main",{className:"px-6 pt-8 space-y-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:U.avatar?y.jsx("img",{src:U.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):y.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),m&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>document.getElementById("avatar-input").click(),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})}),y.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:$})]})]}),y.jsx("div",{className:"text-center space-y-1 w-full",children:m?y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:U.name,onChange:ie=>A({...U,name:ie.target.value}),placeholder:""}):y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})}),!m&&y.jsxs("button",{onClick:ne,disabled:P,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:border-primary/50 hover:bg-primary/10 transition-all group",children:[y.jsx("span",{className:`material-symbols-outlined text-sm ${P?"animate-spin":"text-primary"}`,children:P?"sync":"share"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/60 group-hover:text-primary transition-colors",children:""})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),m?y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px]",value:U.bio,onChange:ie=>A({...U,bio:ie.target.value}),placeholder:"..."}):y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic whitespace-pre-wrap",children:e.bio||""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),m&&y.jsxs("button",{onClick:()=>A({...U,links:[...U.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),y.jsxs("div",{className:"space-y-2",children:[(K=m?U.links:e.links)==null?void 0:K.map((ie,le)=>y.jsx("div",{className:"flex gap-2 items-center",children:m?y.jsxs(y.Fragment,{children:[y.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:ie.label,onChange:pe=>{const we=[...U.links];we[le].label=pe.target.value,A({...U,links:we})}}),y.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:ie.url,onChange:pe=>{const we=[...U.links];we[le].url=pe.target.value,A({...U,links:we})}}),y.jsx("button",{onClick:()=>A({...U,links:U.links.filter((pe,we)=>we!==le)}),className:"text-white/20 hover:text-red-400 p-1",children:y.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):y.jsxs("a",{href:ie.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[y.jsx("span",{className:"text-sm font-medium text-white/80",children:ie.label}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},le)),!m&&((ue=e.links)==null?void 0:ue.length)===0&&y.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!m&&y.jsxs("div",{className:"pt-8 space-y-4",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:o?y.jsxs("div",{className:"divide-y divide-white/5",children:[y.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[y.jsx("img",{src:o.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-bold truncate",children:o.displayName}),y.jsx("p",{className:"text-[10px] text-white/30 truncate",children:o.email})]}),y.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),y.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:j,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_upload"}),d?"...":""]}),y.jsxs("button",{onClick:H,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):y.jsxs("button",{onClick:a,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[y.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-bold",children:" Google "}),y.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[y.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),y.jsx("span",{className:"text-sm",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),y.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),y.jsx("span",{className:"text-sm",children:""})]})})]}),y.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y.jsxs("button",{onClick:G,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:(m?U.categories:e.categories).map((ie,le)=>y.jsxs("div",{className:"group flex items-center gap-2 pl-3 pr-2 py-1.5 rounded-full text-[11px] font-bold transition-all border border-white/10 bg-white/5 text-white/80 hover:border-primary/30",children:[y.jsx("span",{children:ie}),y.jsxs("div",{className:"flex items-center gap-1 border-l border-white/10 ml-1 pl-1",children:[y.jsx("button",{onClick:()=>Z(ie,le),className:"text-white/20 hover:text-primary transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{onClick:()=>me(le),className:"text-white/20 hover:text-red-400 transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},le))}),!(m?U.categories:e.categories).length&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[y.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),y.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),y.jsx("div",{className:"text-center pt-4",children:y.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]}),y.jsxs("div",{className:"space-y-4 pt-8 border-t border-white/5",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 block",children:" ()"}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:y.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-3",children:[L.map(ie=>y.jsx("button",{onClick:()=>q(ie.value),className:`relative aspect-square rounded-xl transition-all duration-300 ${(m?U.themeColor:e.themeColor)===ie.value?"scale-110 ring-2 ring-white ring-offset-4 ring-offset-[#030303]":"hover:scale-105 opacity-50"} cursor-pointer`,style:{backgroundColor:ie.value},title:ie.name,children:(m?U.themeColor:e.themeColor)===ie.value&&y.jsx("span",{className:"material-symbols-outlined text-white text-sm absolute inset-0 flex items-center justify-center",children:"check"})},ie.value)),y.jsxs("div",{className:"relative aspect-square rounded-xl bg-white/5 border border-dashed border-white/20 flex items-center justify-center group overflow-hidden",children:[y.jsx("input",{type:"color",value:m?U.themeColor:e.themeColor,onChange:ie=>q(ie.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-white transition-colors",children:"palette"})]})]})})]})]}),w&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-6",children:[y.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>I(!1)}),y.jsx("div",{className:"relative w-full max-w-sm bg-[#1c1f27] border border-white/10 rounded-[32px] p-8 animate-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[y.jsx("div",{className:"size-16 rounded-2xl bg-primary/20 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"qr_code_2"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}),y.jsx("div",{className:"p-5 bg-white rounded-3xl shadow-xl",children:y.jsx(Kv,{value:O,size:200,level:"H",includeMargin:!0,imageSettings:{src:(e==null?void 0:e.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),y.jsxs("div",{className:"w-full space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/5 border border-white/10 rounded-xl",children:[y.jsx("span",{className:"flex-1 text-[10px] text-white/40 truncate",children:O}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(O),alert("")},className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("button",{onClick:()=>I(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all",children:""})]})]})})]})]}):null},$6=()=>{const{uid:n}=KT(),[e,r]=de.useState(null),[i,s]=de.useState(!0),[o,a]=de.useState(null);return de.useEffect(()=>{(async()=>{if(!n){a(""),s(!1);return}try{console.log("Fetching profile for UID:",n);const u=ca(si,"public_profiles",n),c=await Iy(u);if(c.exists()){const d=c.data();console.log("Profile data found:",d),r(d)}else console.warn("No such profile document in 'public_profiles' for UID:",n),a("")}catch(u){console.error("Error fetching public profile:",u),a(""+(u.message||""))}finally{s(!1)}})()},[n]),i?y.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o||!e?y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/10 mb-4",children:"person_off"}),y.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:o||""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}):y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white selection:bg-primary/30",children:[y.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none opacity-50",children:[y.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 blur-[120px] rounded-full"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),y.jsxs("main",{className:"relative z-10 max-w-2xl mx-auto px-6 pt-24 pb-32",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-16 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[y.jsxs("div",{className:"relative mb-8 group",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-700 scale-110"}),e.avatar?y.jsx("img",{src:e.avatar,className:"relative size-32 rounded-full object-cover border-4 border-white/10 shadow-2xl",alt:e.name}):y.jsx("div",{className:"relative size-32 rounded-full bg-gradient-to-br from-white/10 to-white/5 border-4 border-white/10 flex items-center justify-center shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-5xl text-white/20",children:"person"})})]}),y.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4 bg-gradient-to-b from-white to-white/60 bg-clip-text text-transparent",children:e.name}),y.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6"}),y.jsx("p",{className:"text-lg text-white/60 leading-relaxed font-medium max-w-md italic whitespace-pre-wrap",children:e.bio})]}),e.links&&e.links.length>0&&y.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[y.jsx("h2",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] text-center mb-8",children:""}),e.links.map((l,u)=>y.jsxs("a",{href:l.url.startsWith("http")?l.url:`https://${l.url}`,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-3xl hover:bg-white/10 hover:border-primary/50 transition-all duration-500 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[y.jsx("div",{className:"size-10 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary transition-colors",children:l.label.toLowerCase().includes("ig")||l.label.toLowerCase().includes("instagram")?"camera":l.label.toLowerCase().includes("fb")||l.label.toLowerCase().includes("facebook")?"facebook":"link"})}),y.jsx("span",{className:"font-bold text-lg text-white/80 group-hover:text-white transition-colors",children:l.label})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary group-hover:translate-x-1 transition-all relative z-10",children:"arrow_forward"})]},u))]}),y.jsxs("footer",{className:"mt-24 flex flex-col items-center gap-6 animate-in fade-in duration-1000 delay-500",children:[y.jsx("div",{className:"h-px w-12 bg-white/10 mb-2"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-bold text-white/90 mb-2",children:" Nexus Mind"}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("a",{href:window.location.origin+"/nexus-mind/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl bg-primary/10 border border-primary/20 text-primary hover:bg-primary hover:text-white transition-all duration-300 font-bold text-sm shadow-lg shadow-primary/5",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"explore"}),""]})]}),y.jsxs("div",{className:"mt-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:[y.jsx("span",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Powered by"}),y.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Nexus Mind"})]})]})]})]})};function B6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function q6(n,e,r){return e=J6(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function x1(n,e){return W6(n)||B6(n,e)||uk(n,e)||Y6()}function H6(n){return K6(n)||G6(n)||uk(n)||Q6()}function K6(n){if(Array.isArray(n))return ky(n)}function W6(n){if(Array.isArray(n))return n}function G6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function uk(n,e){if(n){if(typeof n=="string")return ky(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ky(n,e)}}function ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Q6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X6(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function J6(n){var e=X6(n,"string");return typeof e=="symbol"?e:String(e)}var Z6=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(H6(Object.entries(e).filter(function(s){var o=x1(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=x1(s,2),a=o[0],l=o[1];return q6({},a,l)}))))};function Cy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function eV(n){if(Array.isArray(n))return n}function tV(n){if(Array.isArray(n))return Cy(n)}function nV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rV(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function iV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oV(n,e){return eV(n)||rV(n,e)||ck(n,e)||iV()}function b1(n){return tV(n)||nV(n)||ck(n)||sV()}function ck(n,e){if(n){if(typeof n=="string")return Cy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cy(n,e):void 0}}function aV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(d){return d}:s,a=e.methodNames,l=a===void 0?[]:a,u=e.initPropNames,c=u===void 0?[]:u;return de.forwardRef(function(d,h){var m=de.useRef(),_=de.useMemo(function(){var P=Object.fromEntries(c.filter(function(b){return d.hasOwnProperty(b)}).map(function(b){return[b,d[b]]}));return n(P)},[]);E1(function(){_(o(m.current))},de.useLayoutEffect),E1(function(){return _._destructor instanceof Function?_._destructor:void 0});var w=de.useCallback(function(P){for(var b=arguments.length,T=new Array(b>1?b-1:0),N=1;N<b;N++)T[N-1]=arguments[N];return _[P]instanceof Function?_[P].apply(_,T):void 0},[_]),I=de.useRef({});return Object.keys(Z6(d,[].concat(b1(l),b1(c)))).filter(function(P){return I.current[P]!==d[P]}).forEach(function(P){return w(P,d[P])}),I.current=d,de.useImperativeHandle(h,function(){return Object.fromEntries(l.map(function(P){return[P,function(){for(var b=arguments.length,T=new Array(b),N=0;N<b;N++)T[N]=arguments[N];return w.apply(void 0,[P].concat(T))}]}))},[w]),wt.createElement(i,{ref:m})})}function E1(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de.useEffect,r=de.useRef(),i=de.useRef(!1),s=de.useRef(!1),o=de.useState(0),a=oV(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(u){return u+1}),function(){s.current&&r.current&&r.current()}},[])}var Ay="http://www.w3.org/1999/xhtml";const T1={svg:"http://www.w3.org/2000/svg",xhtml:Ay,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fp(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),T1.hasOwnProperty(e)?{space:T1[e],local:n}:n}function lV(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ay&&e.documentElement.namespaceURI===Ay?e.createElement(n):e.createElementNS(r,n)}}function uV(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function hk(n){var e=Fp(n);return(e.local?uV:lV)(e)}function cV(){}function B0(n){return n==null?cV:function(){return this.querySelector(n)}}function hV(n){typeof n!="function"&&(n=B0(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),u,c,d=0;d<a;++d)(u=o[d])&&(c=n.call(u,u.__data__,d,o))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new br(i,this._parents)}function fV(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function dV(){return[]}function fk(n){return n==null?dV:function(){return this.querySelectorAll(n)}}function pV(n){return function(){return fV(n.apply(this,arguments))}}function mV(n){typeof n=="function"?n=pV(n):n=fk(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(i.push(n.call(u,u.__data__,c,a)),s.push(u));return new br(i,s)}function dk(n){return function(){return this.matches(n)}}function pk(n){return function(e){return e.matches(n)}}var gV=Array.prototype.find;function yV(n){return function(){return gV.call(this.children,n)}}function vV(){return this.firstElementChild}function _V(n){return this.select(n==null?vV:yV(typeof n=="function"?n:pk(n)))}var wV=Array.prototype.filter;function xV(){return Array.from(this.children)}function bV(n){return function(){return wV.call(this.children,n)}}function EV(n){return this.selectAll(n==null?xV:bV(typeof n=="function"?n:pk(n)))}function TV(n){typeof n!="function"&&(n=dk(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new br(i,this._parents)}function mk(n){return new Array(n.length)}function IV(){return new br(this._enter||this._groups.map(mk),this._parents)}function Md(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Md.prototype={constructor:Md,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function SV(n){return function(){return n}}function kV(n,e,r,i,s,o){for(var a=0,l,u=e.length,c=o.length;a<c;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new Md(n,o[a]);for(;a<u;++a)(l=e[a])&&(s[a]=l)}function CV(n,e,r,i,s,o,a){var l,u,c=new Map,d=e.length,h=o.length,m=new Array(d),_;for(l=0;l<d;++l)(u=e[l])&&(m[l]=_=a.call(u,u.__data__,l,e)+"",c.has(_)?s[l]=u:c.set(_,u));for(l=0;l<h;++l)_=a.call(n,o[l],l,o)+"",(u=c.get(_))?(i[l]=u,u.__data__=o[l],c.delete(_)):r[l]=new Md(n,o[l]);for(l=0;l<d;++l)(u=e[l])&&c.get(m[l])===u&&(s[l]=u)}function AV(n){return n.__data__}function NV(n,e){if(!arguments.length)return Array.from(this,AV);var r=e?CV:kV,i=this._parents,s=this._groups;typeof n!="function"&&(n=SV(n));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var d=i[c],h=s[c],m=h.length,_=PV(n.call(d,d&&d.__data__,c,i)),w=_.length,I=l[c]=new Array(w),P=a[c]=new Array(w),b=u[c]=new Array(m);r(d,h,I,P,b,_,e);for(var T=0,N=0,O,M;T<w;++T)if(O=I[T]){for(T>=N&&(N=T+1);!(M=P[N])&&++N<w;);O._next=M||null}}return a=new br(a,i),a._enter=l,a._exit=u,a}function PV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function RV(){return new br(this._exit||this._groups.map(mk),this._parents)}function OV(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function jV(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=r[u],d=i[u],h=c.length,m=l[u]=new Array(h),_,w=0;w<h;++w)(_=c[w]||d[w])&&(m[w]=_);for(;u<s;++u)l[u]=r[u];return new br(l,this._parents)}function DV(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function MV(n){n||(n=LV);function e(h,m){return h&&m?n(h.__data__,m.__data__):!h-!m}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d=0;d<l;++d)(c=a[d])&&(u[d]=c);u.sort(e)}return new br(s,this._parents).order()}function LV(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function VV(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function FV(){return Array.from(this)}function UV(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function zV(){let n=0;for(const e of this)++n;return n}function $V(){return!this.node()}function BV(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function qV(n){return function(){this.removeAttribute(n)}}function HV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function KV(n,e){return function(){this.setAttribute(n,e)}}function WV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function GV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function QV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function YV(n,e){var r=Fp(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?HV:qV:typeof e=="function"?r.local?QV:GV:r.local?WV:KV)(r,e))}function gk(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function XV(n){return function(){this.style.removeProperty(n)}}function JV(n,e,r){return function(){this.style.setProperty(n,e,r)}}function ZV(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function eF(n,e,r){return arguments.length>1?this.each((e==null?XV:typeof e=="function"?ZV:JV)(n,e,r??"")):nu(this.node(),n)}function nu(n,e){return n.style.getPropertyValue(e)||gk(n).getComputedStyle(n,null).getPropertyValue(e)}function tF(n){return function(){delete this[n]}}function nF(n,e){return function(){this[n]=e}}function rF(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function iF(n,e){return arguments.length>1?this.each((e==null?tF:typeof e=="function"?rF:nF)(n,e)):this.node()[n]}function yk(n){return n.trim().split(/^|\s+/)}function q0(n){return n.classList||new vk(n)}function vk(n){this._node=n,this._names=yk(n.getAttribute("class")||"")}vk.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function _k(n,e){for(var r=q0(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function wk(n,e){for(var r=q0(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function sF(n){return function(){_k(this,n)}}function oF(n){return function(){wk(this,n)}}function aF(n,e){return function(){(e.apply(this,arguments)?_k:wk)(this,n)}}function lF(n,e){var r=yk(n+"");if(arguments.length<2){for(var i=q0(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?aF:e?sF:oF)(r,e))}function uF(){this.textContent=""}function cF(n){return function(){this.textContent=n}}function hF(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function fF(n){return arguments.length?this.each(n==null?uF:(typeof n=="function"?hF:cF)(n)):this.node().textContent}function dF(){this.innerHTML=""}function pF(n){return function(){this.innerHTML=n}}function mF(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function gF(n){return arguments.length?this.each(n==null?dF:(typeof n=="function"?mF:pF)(n)):this.node().innerHTML}function yF(){this.nextSibling&&this.parentNode.appendChild(this)}function vF(){return this.each(yF)}function _F(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wF(){return this.each(_F)}function xF(n){var e=typeof n=="function"?n:hk(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bF(){return null}function EF(n,e){var r=typeof n=="function"?n:hk(n),i=e==null?bF:typeof e=="function"?e:B0(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function TF(){var n=this.parentNode;n&&n.removeChild(this)}function IF(){return this.each(TF)}function SF(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function kF(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function CF(n){return this.select(n?kF:SF)}function AF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function NF(n){return function(e){n.call(this,e,this.__data__)}}function PF(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function RF(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function OF(n,e,r){return function(){var i=this.__on,s,o=NF(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function jF(n,e,r){var i=PF(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<o;++s)if((a=i[s]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?OF:RF,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function xk(n,e,r){var i=gk(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function DF(n,e){return function(){return xk(this,n,e)}}function MF(n,e){return function(){return xk(this,n,e.apply(this,arguments))}}function LF(n,e){return this.each((typeof e=="function"?MF:DF)(n,e))}function*VF(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var bk=[null];function br(n,e){this._groups=n,this._parents=e}function wh(){return new br([[document.documentElement]],bk)}function FF(){return this}br.prototype=wh.prototype={constructor:br,select:hV,selectAll:mV,selectChild:_V,selectChildren:EV,filter:TV,data:NV,enter:IV,exit:RV,join:OV,merge:jV,selection:FF,order:DV,sort:MV,call:VV,nodes:FV,node:UV,size:zV,empty:$V,each:BV,attr:YV,style:eF,property:iF,classed:lF,text:fF,html:gF,raise:vF,lower:wF,append:xF,insert:EF,remove:IF,clone:CF,datum:AF,on:jF,dispatch:LF,[Symbol.iterator]:VF};function Vr(n){return typeof n=="string"?new br([[document.querySelector(n)]],[document.documentElement]):new br([[n]],bk)}function UF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Li(n,e){if(n=UF(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var zF={value:()=>{}};function xh(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Vf(r)}function Vf(n){this._=n}function $F(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Vf.prototype=xh.prototype={constructor:Vf,on:function(n,e){var r=this._,i=$F(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=BF(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=I1(r[s],n.name,e);else if(e==null)for(s in r)r[s]=I1(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new Vf(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function BF(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function I1(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=zF,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const qF={passive:!1},Jc={capture:!0,passive:!1};function Wm(n){n.stopImmediatePropagation()}function Fl(n){n.preventDefault(),n.stopImmediatePropagation()}function Ek(n){var e=n.document.documentElement,r=Vr(n).on("dragstart.drag",Fl,Jc);"onselectstart"in e?r.on("selectstart.drag",Fl,Jc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Tk(n,e){var r=n.document.documentElement,i=Vr(n).on("dragstart.drag",null);e&&(i.on("click.drag",Fl,Jc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const lf=n=>()=>n;function Ny(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Ny.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function HF(n){return!n.ctrlKey&&!n.button}function KF(){return this.parentNode}function WF(n,e){return e??{x:n.x,y:n.y}}function GF(){return navigator.maxTouchPoints||"ontouchstart"in this}function QF(){var n=HF,e=KF,r=WF,i=GF,s={},o=xh("start","drag","end"),a=0,l,u,c,d,h=0;function m(O){O.on("mousedown.drag",_).filter(i).on("touchstart.drag",P).on("touchmove.drag",b,qF).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(O,M){if(!(d||!n.call(this,O,M))){var U=N(this,e.call(this,O,M),O,M,"mouse");U&&(Vr(O.view).on("mousemove.drag",w,Jc).on("mouseup.drag",I,Jc),Ek(O.view),Wm(O),c=!1,l=O.clientX,u=O.clientY,U("start",O))}}function w(O){if(Fl(O),!c){var M=O.clientX-l,U=O.clientY-u;c=M*M+U*U>h}s.mouse("drag",O)}function I(O){Vr(O.view).on("mousemove.drag mouseup.drag",null),Tk(O.view,c),Fl(O),s.mouse("end",O)}function P(O,M){if(n.call(this,O,M)){var U=O.changedTouches,A=e.call(this,O,M),C=U.length,D,L;for(D=0;D<C;++D)(L=N(this,A,O,M,U[D].identifier,U[D]))&&(Wm(O),L("start",O,U[D]))}}function b(O){var M=O.changedTouches,U=M.length,A,C;for(A=0;A<U;++A)(C=s[M[A].identifier])&&(Fl(O),C("drag",O,M[A]))}function T(O){var M=O.changedTouches,U=M.length,A,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),A=0;A<U;++A)(C=s[M[A].identifier])&&(Wm(O),C("end",O,M[A]))}function N(O,M,U,A,C,D){var L=o.copy(),V=Li(D||U,M),$,j,H;if((H=r.call(O,new Ny("beforestart",{sourceEvent:U,target:m,identifier:C,active:a,x:V[0],y:V[1],dx:0,dy:0,dispatch:L}),A))!=null)return $=H.x-V[0]||0,j=H.y-V[1]||0,function G(Z,me,ne){var q=V,K;switch(Z){case"start":s[C]=G,K=a++;break;case"end":delete s[C],--a;case"drag":V=Li(ne||me,M),K=a;break}L.call(Z,O,new Ny(Z,{sourceEvent:me,subject:H,target:m,identifier:C,active:K,x:V[0]+$,y:V[1]+j,dx:V[0]-q[0],dy:V[1]-q[1],dispatch:L}),A)}}return m.filter=function(O){return arguments.length?(n=typeof O=="function"?O:lf(!!O),m):n},m.container=function(O){return arguments.length?(e=typeof O=="function"?O:lf(O),m):e},m.subject=function(O){return arguments.length?(r=typeof O=="function"?O:lf(O),m):r},m.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:lf(!!O),m):i},m.on=function(){var O=o.on.apply(o,arguments);return O===o?m:O},m.clickDistance=function(O){return arguments.length?(h=(O=+O)*O,m):Math.sqrt(h)},m}function H0(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function Ik(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function bh(){}var Zc=.7,Ld=1/Zc,Ul="\\s*([+-]?\\d+)\\s*",eh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YF=/^#([0-9a-f]{3,8})$/,XF=new RegExp(`^rgb\\(${Ul},${Ul},${Ul}\\)$`),JF=new RegExp(`^rgb\\(${Ki},${Ki},${Ki}\\)$`),ZF=new RegExp(`^rgba\\(${Ul},${Ul},${Ul},${eh}\\)$`),e9=new RegExp(`^rgba\\(${Ki},${Ki},${Ki},${eh}\\)$`),t9=new RegExp(`^hsl\\(${eh},${Ki},${Ki}\\)$`),n9=new RegExp(`^hsla\\(${eh},${Ki},${Ki},${eh}\\)$`),S1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H0(bh,th,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:k1,formatHex:k1,formatHex8:r9,formatHsl:i9,formatRgb:C1,toString:C1});function k1(){return this.rgb().formatHex()}function r9(){return this.rgb().formatHex8()}function i9(){return Sk(this).formatHsl()}function C1(){return this.rgb().formatRgb()}function th(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=YF.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?A1(e):r===3?new ir(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?uf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?uf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XF.exec(n))?new ir(e[1],e[2],e[3],1):(e=JF.exec(n))?new ir(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ZF.exec(n))?uf(e[1],e[2],e[3],e[4]):(e=e9.exec(n))?uf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=t9.exec(n))?R1(e[1],e[2]/100,e[3]/100,1):(e=n9.exec(n))?R1(e[1],e[2]/100,e[3]/100,e[4]):S1.hasOwnProperty(n)?A1(S1[n]):n==="transparent"?new ir(NaN,NaN,NaN,0):null}function A1(n){return new ir(n>>16&255,n>>8&255,n&255,1)}function uf(n,e,r,i){return i<=0&&(n=e=r=NaN),new ir(n,e,r,i)}function s9(n){return n instanceof bh||(n=th(n)),n?(n=n.rgb(),new ir(n.r,n.g,n.b,n.opacity)):new ir}function Py(n,e,r,i){return arguments.length===1?s9(n):new ir(n,e,r,i??1)}function ir(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}H0(ir,Py,Ik(bh,{brighter(n){return n=n==null?Ld:Math.pow(Ld,n),new ir(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Zc:Math.pow(Zc,n),new ir(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ir(Ta(this.r),Ta(this.g),Ta(this.b),Vd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N1,formatHex:N1,formatHex8:o9,formatRgb:P1,toString:P1}));function N1(){return`#${va(this.r)}${va(this.g)}${va(this.b)}`}function o9(){return`#${va(this.r)}${va(this.g)}${va(this.b)}${va((isNaN(this.opacity)?1:this.opacity)*255)}`}function P1(){const n=Vd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ta(this.r)}, ${Ta(this.g)}, ${Ta(this.b)}${n===1?")":`, ${n})`}`}function Vd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ta(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function va(n){return n=Ta(n),(n<16?"0":"")+n.toString(16)}function R1(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new hi(n,e,r,i)}function Sk(n){if(n instanceof hi)return new hi(n.h,n.s,n.l,n.opacity);if(n instanceof bh||(n=th(n)),!n)return new hi;if(n instanceof hi)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,u=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new hi(a,l,u,n.opacity)}function a9(n,e,r,i){return arguments.length===1?Sk(n):new hi(n,e,r,i??1)}function hi(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}H0(hi,a9,Ik(bh,{brighter(n){return n=n==null?Ld:Math.pow(Ld,n),new hi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Zc:Math.pow(Zc,n),new hi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new ir(Gm(n>=240?n-240:n+120,s,i),Gm(n,s,i),Gm(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new hi(O1(this.h),cf(this.s),cf(this.l),Vd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Vd(this.opacity);return`${n===1?"hsl(":"hsla("}${O1(this.h)}, ${cf(this.s)*100}%, ${cf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function O1(n){return n=(n||0)%360,n<0?n+360:n}function cf(n){return Math.max(0,Math.min(1,n||0))}function Gm(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const kk=n=>()=>n;function l9(n,e){return function(r){return n+r*e}}function u9(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function c9(n){return(n=+n)==1?Ck:function(e,r){return r-e?u9(e,r,n):kk(isNaN(e)?r:e)}}function Ck(n,e){var r=e-n;return r?l9(n,r):kk(isNaN(n)?e:n)}const j1=function n(e){var r=c9(e);function i(s,o){var a=r((s=Py(s)).r,(o=Py(o)).r),l=r(s.g,o.g),u=r(s.b,o.b),c=Ck(s.opacity,o.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return i.gamma=n,i}(1);function no(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var Ry=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qm=new RegExp(Ry.source,"g");function h9(n){return function(){return n}}function f9(n){return function(e){return n(e)+""}}function d9(n,e){var r=Ry.lastIndex=Qm.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(n=n+"",e=e+"";(i=Ry.exec(n))&&(s=Qm.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:no(i,s)})),r=Qm.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?f9(u[0].x):h9(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)l[(h=u[d]).i]=h.x(c);return l.join("")})}var D1=180/Math.PI,Oy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ak(n,e,r,i,s,o){var a,l,u;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(u=n*r+e*i)&&(r-=n*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),n*i<e*r&&(n=-n,e=-e,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*D1,skewX:Math.atan(u)*D1,scaleX:a,scaleY:l}}var hf;function p9(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Oy:Ak(e.a,e.b,e.c,e.d,e.e,e.f)}function m9(n){return n==null||(hf||(hf=document.createElementNS("http://www.w3.org/2000/svg","g")),hf.setAttribute("transform",n),!(n=hf.transform.baseVal.consolidate()))?Oy:(n=n.matrix,Ak(n.a,n.b,n.c,n.d,n.e,n.f))}function Nk(n,e,r,i){function s(c){return c.length?c.pop()+" ":""}function o(c,d,h,m,_,w){if(c!==h||d!==m){var I=_.push("translate(",null,e,null,r);w.push({i:I-4,x:no(c,h)},{i:I-2,x:no(d,m)})}else(h||m)&&_.push("translate("+h+e+m+r)}function a(c,d,h,m){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),m.push({i:h.push(s(h)+"rotate(",null,i)-2,x:no(c,d)})):d&&h.push(s(h)+"rotate("+d+i)}function l(c,d,h,m){c!==d?m.push({i:h.push(s(h)+"skewX(",null,i)-2,x:no(c,d)}):d&&h.push(s(h)+"skewX("+d+i)}function u(c,d,h,m,_,w){if(c!==h||d!==m){var I=_.push(s(_)+"scale(",null,",",null,")");w.push({i:I-4,x:no(c,h)},{i:I-2,x:no(d,m)})}else(h!==1||m!==1)&&_.push(s(_)+"scale("+h+","+m+")")}return function(c,d){var h=[],m=[];return c=n(c),d=n(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,m),a(c.rotate,d.rotate,h,m),l(c.skewX,d.skewX,h,m),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,m),c=d=null,function(_){for(var w=-1,I=m.length,P;++w<I;)h[(P=m[w]).i]=P.x(_);return h.join("")}}}var g9=Nk(p9,"px, ","px)","deg)"),y9=Nk(m9,", ",")",")"),v9=1e-12;function M1(n){return((n=Math.exp(n))+1/n)/2}function _9(n){return((n=Math.exp(n))-1/n)/2}function w9(n){return((n=Math.exp(2*n))-1)/(n+1)}const x9=function n(e,r,i){function s(o,a){var l=o[0],u=o[1],c=o[2],d=a[0],h=a[1],m=a[2],_=d-l,w=h-u,I=_*_+w*w,P,b;if(I<v9)b=Math.log(m/c)/e,P=function(A){return[l+A*_,u+A*w,c*Math.exp(e*A*b)]};else{var T=Math.sqrt(I),N=(m*m-c*c+i*I)/(2*c*r*T),O=(m*m-c*c-i*I)/(2*m*r*T),M=Math.log(Math.sqrt(N*N+1)-N),U=Math.log(Math.sqrt(O*O+1)-O);b=(U-M)/e,P=function(A){var C=A*b,D=M1(M),L=c/(r*T)*(D*w9(e*C+M)-_9(M));return[l+L*_,u+L*w,c*D/M1(e*C+M)]}}return P.duration=b*1e3*e/Math.SQRT2,P}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return n(a,l,u)},s}(Math.SQRT2,2,4);var ru=0,nc=0,Uu=0,Pk=1e3,Fd,rc,Ud=0,La=0,Up=0,nh=typeof performance=="object"&&performance.now?performance:Date,Rk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function K0(){return La||(Rk(b9),La=nh.now()+Up)}function b9(){La=0}function zd(){this._call=this._time=this._next=null}zd.prototype=W0.prototype={constructor:zd,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?K0():+r)+(e==null?0:+e),!this._next&&rc!==this&&(rc?rc._next=this:Fd=this,rc=this),this._call=n,this._time=r,jy()},stop:function(){this._call&&(this._call=null,this._time=1/0,jy())}};function W0(n,e,r){var i=new zd;return i.restart(n,e,r),i}function E9(){K0(),++ru;for(var n=Fd,e;n;)(e=La-n._time)>=0&&n._call.call(void 0,e),n=n._next;--ru}function L1(){La=(Ud=nh.now())+Up,ru=nc=0;try{E9()}finally{ru=0,I9(),La=0}}function T9(){var n=nh.now(),e=n-Ud;e>Pk&&(Up-=e,Ud=n)}function I9(){for(var n,e=Fd,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Fd=r);rc=n,jy(i)}function jy(n){if(!ru){nc&&(nc=clearTimeout(nc));var e=n-La;e>24?(n<1/0&&(nc=setTimeout(L1,n-nh.now()-Up)),Uu&&(Uu=clearInterval(Uu))):(Uu||(Ud=nh.now(),Uu=setInterval(T9,Pk)),ru=1,Rk(L1))}}function V1(n,e,r){var i=new zd;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var S9=xh("start","end","cancel","interrupt"),k9=[],Ok=0,F1=1,Dy=2,Ff=3,U1=4,My=5,Uf=6;function zp(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;C9(n,r,{name:e,index:i,group:s,on:S9,tween:k9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ok})}function G0(n,e){var r=xi(n,e);if(r.state>Ok)throw new Error("too late; already scheduled");return r}function Ji(n,e){var r=xi(n,e);if(r.state>Ff)throw new Error("too late; already running");return r}function xi(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function C9(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=W0(o,0,r.time);function o(c){r.state=F1,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var d,h,m,_;if(r.state!==F1)return u();for(d in i)if(_=i[d],_.name===r.name){if(_.state===Ff)return V1(a);_.state===U1?(_.state=Uf,_.timer.stop(),_.on.call("interrupt",n,n.__data__,_.index,_.group),delete i[d]):+d<e&&(_.state=Uf,_.timer.stop(),_.on.call("cancel",n,n.__data__,_.index,_.group),delete i[d])}if(V1(function(){r.state===Ff&&(r.state=U1,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=Dy,r.on.call("start",n,n.__data__,r.index,r.group),r.state===Dy){for(r.state=Ff,s=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(_=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(s[++h]=_);s.length=h+1}}function l(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=My,1),h=-1,m=s.length;++h<m;)s[h].call(n,d);r.state===My&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=Uf,r.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function zf(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>Dy&&i.state<My,i.state=Uf,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function A9(n){return this.each(function(){zf(this,n)})}function N9(n,e){var r,i;return function(){var s=Ji(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function P9(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Ji(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function R9(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=xi(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?N9:P9)(r,n,e))}function Q0(n,e,r){var i=n._id;return n.each(function(){var s=Ji(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return xi(s,i).value[e]}}function jk(n,e){var r;return(typeof e=="number"?no:e instanceof th?j1:(r=th(e))?(e=r,j1):d9)(n,e)}function O9(n){return function(){this.removeAttribute(n)}}function j9(n){return function(){this.removeAttributeNS(n.space,n.local)}}function D9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function M9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function L9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function V9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function F9(n,e){var r=Fp(n),i=r==="transform"?y9:jk;return this.attrTween(n,typeof e=="function"?(r.local?V9:L9)(r,i,Q0(this,"attr."+n,e)):e==null?(r.local?j9:O9)(r):(r.local?M9:D9)(r,i,e))}function U9(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function z9(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function $9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&z9(n,o)),r}return s._value=e,s}function B9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&U9(n,o)),r}return s._value=e,s}function q9(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Fp(n);return this.tween(r,(i.local?$9:B9)(i,e))}function H9(n,e){return function(){G0(this,n).delay=+e.apply(this,arguments)}}function K9(n,e){return e=+e,function(){G0(this,n).delay=e}}function W9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?H9:K9)(e,n)):xi(this.node(),e).delay}function G9(n,e){return function(){Ji(this,n).duration=+e.apply(this,arguments)}}function Q9(n,e){return e=+e,function(){Ji(this,n).duration=e}}function Y9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?G9:Q9)(e,n)):xi(this.node(),e).duration}function X9(n,e){if(typeof e!="function")throw new Error;return function(){Ji(this,n).ease=e}}function J9(n){var e=this._id;return arguments.length?this.each(X9(e,n)):xi(this.node(),e).ease}function Z9(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ji(this,n).ease=r}}function e8(n){if(typeof n!="function")throw new Error;return this.each(Z9(this._id,n))}function t8(n){typeof n!="function"&&(n=dk(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new Ds(i,this._parents,this._name,this._id)}function n8(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],d=u.length,h=a[l]=new Array(d),m,_=0;_<d;++_)(m=u[_]||c[_])&&(h[_]=m);for(;l<i;++l)a[l]=e[l];return new Ds(a,this._parents,this._name,this._id)}function r8(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function i8(n,e,r){var i,s,o=r8(e)?G0:Ji;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function s8(n,e){var r=this._id;return arguments.length<2?xi(this.node(),r).on.on(n):this.each(i8(r,n,e))}function o8(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function a8(){return this.on("end.remove",o8(this._id))}function l8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=B0(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],u=l.length,c=o[a]=new Array(u),d,h,m=0;m<u;++m)(d=l[m])&&(h=n.call(d,d.__data__,m,l))&&("__data__"in d&&(h.__data__=d.__data__),c[m]=h,zp(c[m],e,r,m,c,xi(d,r)));return new Ds(o,this._parents,e,r)}function u8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=fk(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var u=i[l],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var m=n.call(d,d.__data__,h,u),_,w=xi(d,r),I=0,P=m.length;I<P;++I)(_=m[I])&&zp(_,e,r,I,m,w);o.push(m),a.push(d)}return new Ds(o,a,e,r)}var c8=wh.prototype.constructor;function h8(){return new c8(this._groups,this._parents)}function f8(n,e){var r,i,s;return function(){var o=nu(this,n),a=(this.style.removeProperty(n),nu(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function Dk(n){return function(){this.style.removeProperty(n)}}function d8(n,e,r){var i,s=r+"",o;return function(){var a=nu(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function p8(n,e,r){var i,s,o;return function(){var a=nu(this,n),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(n),nu(this,n))),a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l))}}function m8(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var u=Ji(this,n),c=u.on,d=u.value[o]==null?l||(l=Dk(e)):void 0;(c!==r||s!==d)&&(i=(r=c).copy()).on(a,s=d),u.on=i}}function g8(n,e,r){var i=(n+="")=="transform"?g9:jk;return e==null?this.styleTween(n,f8(n,i)).on("end.style."+n,Dk(n)):typeof e=="function"?this.styleTween(n,p8(n,i,Q0(this,"style."+n,e))).each(m8(this._id,n)):this.styleTween(n,d8(n,i,e),r).on("end.style."+n,null)}function y8(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function v8(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&y8(n,a,r)),i}return o._value=e,o}function _8(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,v8(n,e,r??""))}function w8(n){return function(){this.textContent=n}}function x8(n){return function(){var e=n(this);this.textContent=e??""}}function b8(n){return this.tween("text",typeof n=="function"?x8(Q0(this,"text",n)):w8(n==null?"":n+""))}function E8(n){return function(e){this.textContent=n.call(this,e)}}function T8(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&E8(s)),e}return i._value=n,i}function I8(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,T8(n))}function S8(){for(var n=this._name,e=this._id,r=Mk(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var d=xi(u,e);zp(u,n,r,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ds(i,this._parents,n,r)}function k8(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};r.each(function(){var c=Ji(this,i),d=c.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&o()})}var C8=0;function Ds(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function Mk(){return++C8}var cs=wh.prototype;Ds.prototype={constructor:Ds,select:l8,selectAll:u8,selectChild:cs.selectChild,selectChildren:cs.selectChildren,filter:t8,merge:n8,selection:h8,transition:S8,call:cs.call,nodes:cs.nodes,node:cs.node,size:cs.size,empty:cs.empty,each:cs.each,on:s8,attr:F9,attrTween:q9,style:g8,styleTween:_8,text:b8,textTween:I8,remove:a8,tween:R9,delay:W9,duration:Y9,ease:J9,easeVarying:e8,end:k8,[Symbol.iterator]:cs[Symbol.iterator]};function A8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var N8={time:null,delay:0,duration:250,ease:A8};function P8(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function R8(n){var e,r;n instanceof Ds?(e=n._id,n=n._name):(e=Mk(),(r=N8).time=K0(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&zp(u,n,e,c,a,r||P8(u,e));return new Ds(i,this._parents,n,e)}wh.prototype.interrupt=A9;wh.prototype.transition=R8;const ff=n=>()=>n;function O8(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function bs(n,e,r){this.k=n,this.x=e,this.y=r}bs.prototype={constructor:bs,scale:function(n){return n===1?this:new bs(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new bs(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Y0=new bs(1,0,0);Di.prototype=bs.prototype;function Di(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Y0;return n.__zoom}function Ym(n){n.stopImmediatePropagation()}function zu(n){n.preventDefault(),n.stopImmediatePropagation()}function j8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function D8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function z1(){return this.__zoom||Y0}function M8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function L8(){return navigator.maxTouchPoints||"ontouchstart"in this}function V8(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function F8(){var n=j8,e=D8,r=V8,i=M8,s=L8,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=x9,c=xh("start","zoom","end"),d,h,m,_=500,w=150,I=0,P=10;function b(H){H.property("__zoom",z1).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",L).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(H,G,Z,me){var ne=H.selection?H.selection():H;ne.property("__zoom",z1),H!==ne?M(H,G,Z,me):ne.interrupt().each(function(){U(this,arguments).event(me).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},b.scaleBy=function(H,G,Z,me){b.scaleTo(H,function(){var ne=this.__zoom.k,q=typeof G=="function"?G.apply(this,arguments):G;return ne*q},Z,me)},b.scaleTo=function(H,G,Z,me){b.transform(H,function(){var ne=e.apply(this,arguments),q=this.__zoom,K=Z==null?O(ne):typeof Z=="function"?Z.apply(this,arguments):Z,ue=q.invert(K),ie=typeof G=="function"?G.apply(this,arguments):G;return r(N(T(q,ie),K,ue),ne,a)},Z,me)},b.translateBy=function(H,G,Z,me){b.transform(H,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),a)},null,me)},b.translateTo=function(H,G,Z,me,ne){b.transform(H,function(){var q=e.apply(this,arguments),K=this.__zoom,ue=me==null?O(q):typeof me=="function"?me.apply(this,arguments):me;return r(Y0.translate(ue[0],ue[1]).scale(K.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof Z=="function"?-Z.apply(this,arguments):-Z),q,a)},me,ne)};function T(H,G){return G=Math.max(o[0],Math.min(o[1],G)),G===H.k?H:new bs(G,H.x,H.y)}function N(H,G,Z){var me=G[0]-Z[0]*H.k,ne=G[1]-Z[1]*H.k;return me===H.x&&ne===H.y?H:new bs(H.k,me,ne)}function O(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function M(H,G,Z,me){H.on("start.zoom",function(){U(this,arguments).event(me).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(me).end()}).tween("zoom",function(){var ne=this,q=arguments,K=U(ne,q).event(me),ue=e.apply(ne,q),ie=Z==null?O(ue):typeof Z=="function"?Z.apply(ne,q):Z,le=Math.max(ue[1][0]-ue[0][0],ue[1][1]-ue[0][1]),pe=ne.__zoom,we=typeof G=="function"?G.apply(ne,q):G,Me=u(pe.invert(ie).concat(le/pe.k),we.invert(ie).concat(le/we.k));return function(je){if(je===1)je=we;else{var Ke=Me(je),Oe=le/Ke[2];je=new bs(Oe,ie[0]-Ke[0]*Oe,ie[1]-Ke[1]*Oe)}K.zoom(null,je)}})}function U(H,G,Z){return!Z&&H.__zooming||new A(H,G)}function A(H,G){this.that=H,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,G),this.taps=0}A.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,G){return this.mouse&&H!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var G=Vr(this.that).datum();c.call(H,this.that,new O8(H,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),G)}};function C(H,...G){if(!n.apply(this,arguments))return;var Z=U(this,G).event(H),me=this.__zoom,ne=Math.max(o[0],Math.min(o[1],me.k*Math.pow(2,i.apply(this,arguments)))),q=Li(H);if(Z.wheel)(Z.mouse[0][0]!==q[0]||Z.mouse[0][1]!==q[1])&&(Z.mouse[1]=me.invert(Z.mouse[0]=q)),clearTimeout(Z.wheel);else{if(me.k===ne)return;Z.mouse=[q,me.invert(q)],zf(this),Z.start()}zu(H),Z.wheel=setTimeout(K,w),Z.zoom("mouse",r(N(T(me,ne),Z.mouse[0],Z.mouse[1]),Z.extent,a));function K(){Z.wheel=null,Z.end()}}function D(H,...G){if(m||!n.apply(this,arguments))return;var Z=H.currentTarget,me=U(this,G,!0).event(H),ne=Vr(H.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",le,!0),q=Li(H,Z),K=H.clientX,ue=H.clientY;Ek(H.view),Ym(H),me.mouse=[q,this.__zoom.invert(q)],zf(this),me.start();function ie(pe){if(zu(pe),!me.moved){var we=pe.clientX-K,Me=pe.clientY-ue;me.moved=we*we+Me*Me>I}me.event(pe).zoom("mouse",r(N(me.that.__zoom,me.mouse[0]=Li(pe,Z),me.mouse[1]),me.extent,a))}function le(pe){ne.on("mousemove.zoom mouseup.zoom",null),Tk(pe.view,me.moved),zu(pe),me.event(pe).end()}}function L(H,...G){if(n.apply(this,arguments)){var Z=this.__zoom,me=Li(H.changedTouches?H.changedTouches[0]:H,this),ne=Z.invert(me),q=Z.k*(H.shiftKey?.5:2),K=r(N(T(Z,q),me,ne),e.apply(this,G),a);zu(H),l>0?Vr(this).transition().duration(l).call(M,K,me,H):Vr(this).call(b.transform,K,me,H)}}function V(H,...G){if(n.apply(this,arguments)){var Z=H.touches,me=Z.length,ne=U(this,G,H.changedTouches.length===me).event(H),q,K,ue,ie;for(Ym(H),K=0;K<me;++K)ue=Z[K],ie=Li(ue,this),ie=[ie,this.__zoom.invert(ie),ue.identifier],ne.touch0?!ne.touch1&&ne.touch0[2]!==ie[2]&&(ne.touch1=ie,ne.taps=0):(ne.touch0=ie,q=!0,ne.taps=1+!!d);d&&(d=clearTimeout(d)),q&&(ne.taps<2&&(h=ie[0],d=setTimeout(function(){d=null},_)),zf(this),ne.start())}}function $(H,...G){if(this.__zooming){var Z=U(this,G).event(H),me=H.changedTouches,ne=me.length,q,K,ue,ie;for(zu(H),q=0;q<ne;++q)K=me[q],ue=Li(K,this),Z.touch0&&Z.touch0[2]===K.identifier?Z.touch0[0]=ue:Z.touch1&&Z.touch1[2]===K.identifier&&(Z.touch1[0]=ue);if(K=Z.that.__zoom,Z.touch1){var le=Z.touch0[0],pe=Z.touch0[1],we=Z.touch1[0],Me=Z.touch1[1],je=(je=we[0]-le[0])*je+(je=we[1]-le[1])*je,Ke=(Ke=Me[0]-pe[0])*Ke+(Ke=Me[1]-pe[1])*Ke;K=T(K,Math.sqrt(je/Ke)),ue=[(le[0]+we[0])/2,(le[1]+we[1])/2],ie=[(pe[0]+Me[0])/2,(pe[1]+Me[1])/2]}else if(Z.touch0)ue=Z.touch0[0],ie=Z.touch0[1];else return;Z.zoom("touch",r(N(K,ue,ie),Z.extent,a))}}function j(H,...G){if(this.__zooming){var Z=U(this,G).event(H),me=H.changedTouches,ne=me.length,q,K;for(Ym(H),m&&clearTimeout(m),m=setTimeout(function(){m=null},_),q=0;q<ne;++q)K=me[q],Z.touch0&&Z.touch0[2]===K.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===K.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(K=Li(K,this),Math.hypot(h[0]-K[0],h[1]-K[1])<P)){var ue=Vr(this).on("dblclick.zoom");ue&&ue.apply(this,arguments)}}}return b.wheelDelta=function(H){return arguments.length?(i=typeof H=="function"?H:ff(+H),b):i},b.filter=function(H){return arguments.length?(n=typeof H=="function"?H:ff(!!H),b):n},b.touchable=function(H){return arguments.length?(s=typeof H=="function"?H:ff(!!H),b):s},b.extent=function(H){return arguments.length?(e=typeof H=="function"?H:ff([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),b):e},b.scaleExtent=function(H){return arguments.length?(o[0]=+H[0],o[1]=+H[1],b):[o[0],o[1]]},b.translateExtent=function(H){return arguments.length?(a[0][0]=+H[0][0],a[1][0]=+H[1][0],a[0][1]=+H[0][1],a[1][1]=+H[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(H){return arguments.length?(r=H,b):r},b.duration=function(H){return arguments.length?(l=+H,b):l},b.interpolate=function(H){return arguments.length?(u=H,b):u},b.on=function(){var H=c.on.apply(c,arguments);return H===c?b:H},b.clickDistance=function(H){return arguments.length?(I=(H=+H)*H,b):Math.sqrt(I)},b.tapDistance=function(H){return arguments.length?(P=+H,b):P},b}class $1 extends Map{constructor(e,r=$8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(B1(this,e))}has(e){return super.has(B1(this,e))}set(e,r){return super.set(U8(this,e),r)}delete(e){return super.delete(z8(this,e))}}function B1({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function U8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function z8({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function $8(n){return n!==null&&typeof n=="object"?n.valueOf():n}function q1(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function H1(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function B8(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var q8=typeof global=="object"&&global&&global.Object===Object&&global,H8=typeof self=="object"&&self&&self.Object===Object&&self,Lk=q8||H8||Function("return this")(),$d=Lk.Symbol,Vk=Object.prototype,K8=Vk.hasOwnProperty,W8=Vk.toString,$u=$d?$d.toStringTag:void 0;function G8(n){var e=K8.call(n,$u),r=n[$u];try{n[$u]=void 0;var i=!0}catch{}var s=W8.call(n);return i&&(e?n[$u]=r:delete n[$u]),s}var Q8=Object.prototype,Y8=Q8.toString;function X8(n){return Y8.call(n)}var J8="[object Null]",Z8="[object Undefined]",K1=$d?$d.toStringTag:void 0;function eU(n){return n==null?n===void 0?Z8:J8:K1&&K1 in Object(n)?G8(n):X8(n)}function tU(n){return n!=null&&typeof n=="object"}var nU="[object Symbol]";function rU(n){return typeof n=="symbol"||tU(n)&&eU(n)==nU}var iU=/\s/;function sU(n){for(var e=n.length;e--&&iU.test(n.charAt(e)););return e}var oU=/^\s+/;function aU(n){return n&&n.slice(0,sU(n)+1).replace(oU,"")}function Bd(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var W1=NaN,lU=/^[-+]0x[0-9a-f]+$/i,uU=/^0b[01]+$/i,cU=/^0o[0-7]+$/i,hU=parseInt;function G1(n){if(typeof n=="number")return n;if(rU(n))return W1;if(Bd(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Bd(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=aU(n);var r=uU.test(n);return r||cU.test(n)?hU(n.slice(2),r?2:8):lU.test(n)?W1:+n}var Xm=function(){return Lk.Date.now()},fU="Expected a function",dU=Math.max,pU=Math.min;function Fk(n,e,r){var i,s,o,a,l,u,c=0,d=!1,h=!1,m=!0;if(typeof n!="function")throw new TypeError(fU);e=G1(e)||0,Bd(r)&&(d=!!r.leading,h="maxWait"in r,o=h?dU(G1(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function _(U){var A=i,C=s;return i=s=void 0,c=U,a=n.apply(C,A),a}function w(U){return c=U,l=setTimeout(b,e),d?_(U):a}function I(U){var A=U-u,C=U-c,D=e-A;return h?pU(D,o-C):D}function P(U){var A=U-u,C=U-c;return u===void 0||A>=e||A<0||h&&C>=o}function b(){var U=Xm();if(P(U))return T(U);l=setTimeout(b,I(U))}function T(U){return l=void 0,m&&i?_(U):(i=s=void 0,a)}function N(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function O(){return l===void 0?a:T(Xm())}function M(){var U=Xm(),A=P(U);if(i=arguments,s=this,u=U,A){if(l===void 0)return w(u);if(h)return clearTimeout(l),l=setTimeout(b,e),_(u)}return l===void 0&&(l=setTimeout(b,e)),a}return M.cancel=N,M.flush=O,M}var mU="Expected a function";function gU(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(mU);return Bd(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),Fk(n,e,{leading:i,maxWait:e,trailing:s})}var Ia=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Ia.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Ia.Bounce.In(n*2)*.5:Ia.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),ic=function(){return performance.now()},Uk=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=ic()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),Ly={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=Ly.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},zk=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),Vy=new Uk,Q1=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ia.Linear.None,this._interpolationFunction=Ly.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=zk.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Vy,Vy.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=ic()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],u=Array.isArray(l),c=u?"array":typeof l,d=!u&&Array.isArray(i[a]);if(!(c==="undefined"||c==="function")){if(d){var h=i[a];if(h.length===0)continue;for(var m=[l],_=0,w=h.length;_<w;_+=1){var I=this._handleRelativeValue(l,h[_]);if(isNaN(I)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(I)}d&&(i[a]=m)}if((c==="object"||u)&&l&&!d){r[a]=u?[]:{};var P=l;for(var b in P)r[a][b]=P[b];s[a]=u?[]:{};var h=i[a];if(!this._isDynamic){var T={};for(var b in h)T[b]=h[b];i[a]=h=T}this._setupProperties(P,r[a],h,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),u||(r[a]*=1),d?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=ic()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=ic()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Ia.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Ly.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=ic()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(i._duration===0||a>u)return 1;var I=Math.trunc(a/l),P=a-I*l,b=Math.min(P/i._duration,1);return b===0&&a===i._duration?1:b},d=c(),h=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var _=0,w=this._chainedTweens.length;_<w;_++)this._chainedTweens[_].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],u=Array.isArray(e[o]),c=Array.isArray(l),d=!u&&c;d?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();zk.nextId;var Xi=Vy;Xi.getAll.bind(Xi);Xi.removeAll.bind(Xi);Xi.add.bind(Xi);Xi.remove.bind(Xi);Xi.update.bind(Xi);function Y1(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yU(n){if(Array.isArray(n))return n}function vU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _U(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function wU(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function xU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bU(n,e){return yU(n)||wU(n,e)||EU(n,e)||xU()}function EU(n,e){if(n){if(typeof n=="string")return Y1(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y1(n,e):void 0}}var TU=_U(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,u=l===void 0?function(c,d){}:l;vU(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=u});function X0(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,u=l===void 0?{}:l,c=n.init,d=c===void 0?function(){}:c,h=n.update,m=h===void 0?function(){}:h,_=Object.keys(s).map(function(w){return new TU(w,s[w])});return function w(){for(var I=arguments.length,P=new Array(I),b=0;b<I;b++)P[b]=arguments[b];var T=!!(this instanceof w&&this.constructor),N=T?P.shift():void 0,O=P[0],M=O===void 0?{}:O,U=Object.assign({},r instanceof Function?r(M):r,{initialised:!1}),A={};function C(V){return D(V,M),L(),C}var D=function($,j){d.call(C,$,U,j),U.initialised=!0},L=Fk(function(){U.initialised&&(m.call(C,U,A),A={})},1);return _.forEach(function(V){C[V.name]=$(V);function $(j){var H=j.name,G=j.triggerUpdate,Z=G===void 0?!1:G,me=j.onChange,ne=me===void 0?function(ue,ie){}:me,q=j.defaultVal,K=q===void 0?null:q;return function(ue){var ie=U[H];if(!arguments.length)return ie;var le=ue===void 0?K:ue;return U[H]=le,ne.call(C,le,U,ie),!A.hasOwnProperty(H)&&(A[H]=ie),Z&&L(),C}}}),Object.keys(a).forEach(function(V){C[V]=function(){for(var $,j=arguments.length,H=new Array(j),G=0;G<j;G++)H[G]=arguments[G];return($=a[V]).call.apply($,[C,U].concat(H))}}),Object.entries(u).forEach(function(V){var $=bU(V,2),j=$[0],H=$[1];return C[j]=C[H]}),C.resetProps=function(){return _.forEach(function(V){C[V.name](V.defaultVal)}),C},C.resetProps(),U._rerender=L,T&&N&&C(N),C}}var mt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function qd(n){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(n)}var IU=/^\s+/,SU=/\s+$/;function ze(n,e){if(n=n||"",e=e||{},n instanceof ze)return n;if(!(this instanceof ze))return new ze(n,e);var r=kU(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ze.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=$k(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=J1(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=J1(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=X1(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=X1(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return Z1(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return PU(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Rt(this._r,255)*100)+"%",g:Math.round(Rt(this._g,255)*100)+"%",b:Math.round(Rt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Rt(this._r,255)*100)+"%, "+Math.round(Rt(this._g,255)*100)+"%, "+Math.round(Rt(this._b,255)*100)+"%)":"rgba("+Math.round(Rt(this._r,255)*100)+"%, "+Math.round(Rt(this._g,255)*100)+"%, "+Math.round(Rt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:BU[Z1(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+eb(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=ze(e);i="#"+eb(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return ze(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(DU,arguments)},brighten:function(){return this._applyModification(MU,arguments)},darken:function(){return this._applyModification(LU,arguments)},desaturate:function(){return this._applyModification(RU,arguments)},saturate:function(){return this._applyModification(OU,arguments)},greyscale:function(){return this._applyModification(jU,arguments)},spin:function(){return this._applyModification(VU,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(zU,arguments)},complement:function(){return this._applyCombination(FU,arguments)},monochromatic:function(){return this._applyCombination($U,arguments)},splitcomplement:function(){return this._applyCombination(UU,arguments)},triad:function(){return this._applyCombination(tb,[3])},tetrad:function(){return this._applyCombination(tb,[4])}};ze.fromRatio=function(n,e){if(qd(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=sc(n[i]));n=r}return ze(n,e)};function kU(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=WU(n)),qd(n)=="object"&&(hs(n.r)&&hs(n.g)&&hs(n.b)?(e=CU(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):hs(n.h)&&hs(n.s)&&hs(n.v)?(i=sc(n.s),s=sc(n.v),e=NU(n.h,i,s),a=!0,l="hsv"):hs(n.h)&&hs(n.s)&&hs(n.l)&&(i=sc(n.s),o=sc(n.l),e=AU(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=$k(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function CU(n,e,r){return{r:Rt(n,255)*255,g:Rt(e,255)*255,b:Rt(r,255)*255}}function X1(n,e,r){n=Rt(n,255),e=Rt(e,255),r=Rt(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,l}}function AU(n,e,r){var i,s,o;n=Rt(n,360),e=Rt(e,100),r=Rt(r,100);function a(c,d,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(d-c)*6*h:h<1/2?d:h<2/3?c+(d-c)*(2/3-h)*6:c}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;i=a(u,l,n+1/3),s=a(u,l,n),o=a(u,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function J1(n,e,r){n=Rt(n,255),e=Rt(e,255),r=Rt(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,u=i-s;if(a=i===0?0:u/i,i==s)o=0;else{switch(i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,v:l}}function NU(n,e,r){n=Rt(n,360)*6,e=Rt(e,100),r=Rt(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),u=i%6,c=[r,a,o,o,l,r][u],d=[l,r,r,a,o,o][u],h=[o,o,l,r,r,a][u];return{r:c*255,g:d*255,b:h*255}}function Z1(n,e,r,i){var s=[di(Math.round(n).toString(16)),di(Math.round(e).toString(16)),di(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function PU(n,e,r,i,s){var o=[di(Math.round(n).toString(16)),di(Math.round(e).toString(16)),di(Math.round(r).toString(16)),di(Bk(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function eb(n,e,r,i){var s=[di(Bk(i)),di(Math.round(n).toString(16)),di(Math.round(e).toString(16)),di(Math.round(r).toString(16))];return s.join("")}ze.equals=function(n,e){return!n||!e?!1:ze(n).toRgbString()==ze(e).toRgbString()};ze.random=function(){return ze.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function RU(n,e){e=e===0?0:e||10;var r=ze(n).toHsl();return r.s-=e/100,r.s=$p(r.s),ze(r)}function OU(n,e){e=e===0?0:e||10;var r=ze(n).toHsl();return r.s+=e/100,r.s=$p(r.s),ze(r)}function jU(n){return ze(n).desaturate(100)}function DU(n,e){e=e===0?0:e||10;var r=ze(n).toHsl();return r.l+=e/100,r.l=$p(r.l),ze(r)}function MU(n,e){e=e===0?0:e||10;var r=ze(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),ze(r)}function LU(n,e){e=e===0?0:e||10;var r=ze(n).toHsl();return r.l-=e/100,r.l=$p(r.l),ze(r)}function VU(n,e){var r=ze(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,ze(r)}function FU(n){var e=ze(n).toHsl();return e.h=(e.h+180)%360,ze(e)}function tb(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ze(n).toHsl(),i=[ze(n)],s=360/e,o=1;o<e;o++)i.push(ze({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function UU(n){var e=ze(n).toHsl(),r=e.h;return[ze(n),ze({h:(r+72)%360,s:e.s,l:e.l}),ze({h:(r+216)%360,s:e.s,l:e.l})]}function zU(n,e,r){e=e||6,r=r||30;var i=ze(n).toHsl(),s=360/r,o=[ze(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(ze(i));return o}function $U(n,e){e=e||6;for(var r=ze(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(ze({h:i,s,v:o})),o=(o+l)%1;return a}ze.mix=function(n,e,r){r=r===0?0:r||50;var i=ze(n).toRgb(),s=ze(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return ze(a)};ze.readability=function(n,e){var r=ze(n),i=ze(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};ze.isReadable=function(n,e,r){var i=ze.readability(n,e),s,o;switch(o=!1,s=GU(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};ze.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,u;r=r||{},a=r.includeFallbackColors,l=r.level,u=r.size;for(var c=0;c<e.length;c++)o=ze.readability(n,e[c]),o>s&&(s=o,i=ze(e[c]));return ze.isReadable(n,i,{level:l,size:u})||!a?i:(r.includeFallbackColors=!1,ze.mostReadable(n,["#fff","#000"],r))};var Fy=ze.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},BU=ze.hexNames=qU(Fy);function qU(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function $k(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Rt(n,e){HU(n)&&(n="100%");var r=KU(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function $p(n){return Math.min(1,Math.max(0,n))}function mr(n){return parseInt(n,16)}function HU(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function KU(n){return typeof n=="string"&&n.indexOf("%")!=-1}function di(n){return n.length==1?"0"+n:""+n}function sc(n){return n<=1&&(n=n*100+"%"),n}function Bk(n){return Math.round(parseFloat(n)*255).toString(16)}function nb(n){return mr(n)/255}var oi=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hs(n){return!!oi.CSS_UNIT.exec(n)}function WU(n){n=n.replace(IU,"").replace(SU,"").toLowerCase();var e=!1;if(Fy[n])n=Fy[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=oi.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=oi.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=oi.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=oi.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=oi.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=oi.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=oi.hex8.exec(n))?{r:mr(r[1]),g:mr(r[2]),b:mr(r[3]),a:nb(r[4]),format:e?"name":"hex8"}:(r=oi.hex6.exec(n))?{r:mr(r[1]),g:mr(r[2]),b:mr(r[3]),format:e?"name":"hex"}:(r=oi.hex4.exec(n))?{r:mr(r[1]+""+r[1]),g:mr(r[2]+""+r[2]),b:mr(r[3]+""+r[3]),a:nb(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=oi.hex3.exec(n))?{r:mr(r[1]+""+r[1]),g:mr(r[2]+""+r[2]),b:mr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function GU(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function Uy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function QU(n){if(Array.isArray(n))return Uy(n)}function qk(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function YU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function XU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Or(n,e){return n.get(qk(n,e))}function rb(n,e,r){YU(n,e),e.set(n,r)}function ib(n,e,r){return n.set(qk(n,e),r),r}function JU(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,iz(i.key),i)}}function ZU(n,e,r){return e&&JU(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ez(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nz(n){return QU(n)||ez(n)||sz(n)||tz()}function rz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function iz(n){var e=rz(n,"string");return typeof e=="symbol"?e:e+""}function sz(n,e){if(n){if(typeof n=="string")return Uy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uy(n,e):void 0}}var oz=123,az=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Hk=function(e,r,i){return(e<<16)+(r<<8)+i},lz=function(e){var r=ze(e).toRgb(),i=r.r,s=r.g,o=r.b;return Hk(i,s,o)},sb=function(e,r){return e*oz%Math.pow(2,r)},oa=new WeakMap,fs=new WeakMap,uz=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;XU(this,n),rb(this,oa,void 0),rb(this,fs,void 0),ib(fs,this,e),this.reset()}return ZU(n,[{key:"reset",value:function(){ib(oa,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Or(oa,this).length>=Math.pow(2,24-Or(fs,this)))return null;var i=Or(oa,this).length,s=sb(i,Or(fs,this)),o=az(i+(s<<24-Or(fs,this)));return Or(oa,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?lz(r):Hk.apply(void 0,nz(r));if(!i)return null;var s=i&Math.pow(2,24-Or(fs,this))-1,o=i>>24-Or(fs,this)&Math.pow(2,Or(fs,this))-1;return sb(s,Or(fs,this))!==o||s>=Or(oa,this).length?null:Or(oa,this)[s]}}])}(),Eh,jt,Kk,Wk,ha,ob,Gk,Qk,Yk,J0,zy,$y,rh={},Xk=[],cz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bp=Array.isArray;function Fi(n,e){for(var r in e)n[r]=e[r];return n}function Z0(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function hz(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Eh.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return xc(n,a,i,s,null)}function xc(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Kk,__i:-1,__u:0};return s==null&&jt.vnode!=null&&jt.vnode(o),o}function qp(n){return n.children}function $f(n,e){this.props=n,this.context=e}function iu(n,e){if(e==null)return n.__?iu(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?iu(n):null}function Jk(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Jk(n)}}function ab(n){(!n.__d&&(n.__d=!0)&&ha.push(n)&&!Hd.__r++||ob!=jt.debounceRendering)&&((ob=jt.debounceRendering)||Gk)(Hd)}function Hd(){for(var n,e,r,i,s,o,a,l=1;ha.length;)ha.length>l&&ha.sort(Qk),n=ha.shift(),l=ha.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=Fi({},i)).__v=i.__v+1,jt.vnode&&jt.vnode(r),e_(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??iu(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,tC(o,r,a),i.__e=i.__=null,r.__e!=s&&Jk(r)));Hd.__r=0}function Zk(n,e,r,i,s,o,a,l,u,c,d){var h,m,_,w,I,P,b,T=i&&i.__k||Xk,N=e.length;for(u=fz(r,e,T,u,N),h=0;h<N;h++)(_=r.__k[h])!=null&&(m=_.__i==-1?rh:T[_.__i]||rh,_.__i=h,P=e_(n,_,m,s,o,a,l,u,c,d),w=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&t_(m.ref,null,_),d.push(_.ref,_.__c||w,_)),I==null&&w!=null&&(I=w),(b=!!(4&_.__u))||m.__k===_.__k?u=eC(_,u,n,b):typeof _.type=="function"&&P!==void 0?u=P:w&&(u=w.nextSibling),_.__u&=-7);return r.__e=I,u}function fz(n,e,r,i,s){var o,a,l,u,c,d=r.length,h=d,m=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=xc(null,a,null,null,null):Bp(a)?a=n.__k[o]=xc(qp,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=xc(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,u=o+m,a.__=n,a.__b=n.__b+1,l=null,(c=a.__i=dz(a,r,u,h))!=-1&&(h--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>d?m--:s<d&&m++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,a.__u|=4))):n.__k[o]=null;if(h)for(o=0;o<d;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=iu(l)),rC(l,l));return i}function eC(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=eC(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=iu(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function dz(n,e,r,i){var s,o,a,l=n.key,u=n.type,c=e[r],d=c!=null&&(2&c.__u)==0;if(c===null&&l==null||d&&l==c.key&&u==c.type)return r;if(i>(d?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((c=e[a=s>=0?s--:o++])!=null&&!(2&c.__u)&&l==c.key&&u==c.type)return a}return-1}function lb(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||cz.test(e)?r:r+"px"}function df(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||lb(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||lb(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Yk,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=J0,n.addEventListener(e,o?$y:zy,o)):n.removeEventListener(e,o?$y:zy,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function ub(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=J0++;else if(e.t<r.u)return;return r(jt.event?jt.event(e):e)}}}function e_(n,e,r,i,s,o,a,l,u,c){var d,h,m,_,w,I,P,b,T,N,O,M,U,A,C,D,L,V=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(d=jt.__b)&&d(e);e:if(typeof V=="function")try{if(b=e.props,T="prototype"in V&&V.prototype.render,N=(d=V.contextType)&&i[d.__c],O=d?N?N.props.value:d.__:i,r.__c?P=(h=e.__c=r.__c).__=h.__E:(T?e.__c=h=new V(b,O):(e.__c=h=new $f(b,O),h.constructor=V,h.render=mz),N&&N.sub(h),h.state||(h.state={}),h.__n=i,m=h.__d=!0,h.__h=[],h._sb=[]),T&&h.__s==null&&(h.__s=h.state),T&&V.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Fi({},h.__s)),Fi(h.__s,V.getDerivedStateFromProps(b,h.__s))),_=h.props,w=h.state,h.__v=e,m)T&&V.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),T&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(T&&V.getDerivedStateFromProps==null&&b!==_&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,O),e.__v==r.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,O)===!1){for(e.__v!=r.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function($){$&&($.__=e)}),M=0;M<h._sb.length;M++)h.__h.push(h._sb[M]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,O),T&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(_,w,I)})}if(h.context=O,h.props=b,h.__P=n,h.__e=!1,U=jt.__r,A=0,T){for(h.state=h.__s,h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[]}else do h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++A<25);h.state=h.__s,h.getChildContext!=null&&(i=Fi(Fi({},i),h.getChildContext())),T&&!m&&h.getSnapshotBeforeUpdate!=null&&(I=h.getSnapshotBeforeUpdate(_,w)),D=d,d!=null&&d.type===qp&&d.key==null&&(D=nC(d.props.children)),l=Zk(n,Bp(D)?D:[D],e,r,i,s,o,a,l,u,c),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),P&&(h.__E=h.__=null)}catch($){if(e.__v=null,u||o!=null)if($.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(L=o.length;L--;)Z0(o[L]);By(e)}else e.__e=r.__e,e.__k=r.__k,$.then||By(e);jt.__e($,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=pz(r.__e,e,r,i,s,o,a,u,c);return(d=jt.diffed)&&d(e),128&e.__u?void 0:l}function By(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(By)}function tC(n,e,r){for(var i=0;i<r.length;i++)t_(r[i],r[++i],r[++i]);jt.__c&&jt.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){jt.__e(o,s.__v)}})}function nC(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Bp(n)?n.map(nC):Fi({},n)}function pz(n,e,r,i,s,o,a,l,u){var c,d,h,m,_,w,I,P=r.props||rh,b=e.props,T=e.type;if(T=="svg"?s="http://www.w3.org/2000/svg":T=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((_=o[c])&&"setAttribute"in _==!!T&&(T?_.localName==T:_.nodeType==3)){n=_,o[c]=null;break}}if(n==null){if(T==null)return document.createTextNode(b);n=document.createElementNS(s,T,b.is&&b),l&&(jt.__m&&jt.__m(e,o),l=!1),o=null}if(T==null)P===b||l&&n.data==b||(n.data=b);else{if(o=o&&Eh.call(n.childNodes),!l&&o!=null)for(P={},c=0;c<n.attributes.length;c++)P[(_=n.attributes[c]).name]=_.value;for(c in P)if(_=P[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=_;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;df(n,c,null,_,s)}}for(c in b)_=b[c],c=="children"?m=_:c=="dangerouslySetInnerHTML"?d=_:c=="value"?w=_:c=="checked"?I=_:l&&typeof _!="function"||P[c]===_||df(n,c,_,P[c],s);if(d)l||h&&(d.__html==h.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(h&&(n.innerHTML=""),Zk(e.type=="template"?n.content:n,Bp(m)?m:[m],e,r,i,T=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&iu(r,0),l,u),o!=null)for(c=o.length;c--;)Z0(o[c]);l||(c="value",T=="progress"&&w==null?n.removeAttribute("value"):w!=null&&(w!==n[c]||T=="progress"&&!w||T=="option"&&w!=P[c])&&df(n,c,w,P[c],s),c="checked",I!=null&&I!=n[c]&&df(n,c,I,P[c],s))}return n}function t_(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){jt.__e(s,r)}}function rC(n,e,r){var i,s;if(jt.unmount&&jt.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||t_(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){jt.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&rC(i[s],e,r||typeof n.type!="function");r||Z0(n.__e),n.__c=n.__=n.__e=void 0}function mz(n,e,r){return this.constructor(n,r)}function gz(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),jt.__&&jt.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],e_(e,n=e.__k=hz(qp,null,[n]),s||rh,rh,e.namespaceURI,s?null:e.firstChild?Eh.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),tC(o,n,a)}function iC(n,e,r){var i,s,o,a,l=Fi({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Eh.call(arguments,2):r),xc(n.type,l,i||n.key,s||n.ref,null)}Eh=Xk.slice,jt={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},Kk=0,Wk=function(n){return n!=null&&n.constructor===void 0},$f.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Fi({},this.state),typeof n=="function"&&(n=n(Fi({},r),this.props)),n&&Fi(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),ab(this))},$f.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ab(this))},$f.prototype.render=qp,ha=[],Gk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qk=function(n,e){return n.__v.__b-e.__v.__b},Hd.__r=0,Yk=/(PointerCapture)$|Capture$/i,J0=0,zy=ub(!1),$y=ub(!0);function cb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yz(n){if(Array.isArray(n))return n}function vz(n,e,r){return(e=Tz(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function _z(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function wz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function xz(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hb(Object(r),!0).forEach(function(i){vz(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):hb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function bz(n,e){return yz(n)||_z(n,e)||Iz(n,e)||wz()}function Ez(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Tz(n){var e=Ez(n,"string");return typeof e=="symbol"?e:e+""}function Kd(n){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(n)}function Iz(n,e){if(n){if(typeof n=="string")return cb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cb(n,e):void 0}}var qy=function(e){if(Kd(e)!=="object")return e;var r=iC(e);if(r.props){var i;r.props=xz({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(qy):qy(r.props.children))}return r},Sz=function(e){return Wk(iC(e))},kz=function(e,r){delete r.__k,gz(qy(e),r)};function Cz(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var Az=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Cz(Az);var Nz=X0({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&Kd(e)==="object"&&!!e.node&&typeof e.node=="function",l=Vr(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(c){var d=bz(c,2),h=d[0],m=d[1];return r.tooltipEl.style(h,m)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(c){r.mouseInside=!0;var d=Li(c),h=l.node(),m=h.offsetWidth,_=h.offsetHeight,w=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/m*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?_>130&&_-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(w.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):Sz(e.content)?(e.tooltipEl.text(""),kz(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function Pz(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,u,c=0,d=0,h=0;for(a=0;a<l;++a)u=i[a],c+=u.x||0,d+=u.y||0,h+=u.z||0;for(c=(c/l-n)*s,d=(d/l-e)*s,h=(h/l-r)*s,a=0;a<l;++a)u=i[a],c&&(u.x-=c),d&&(u.y-=d),h&&(u.z-=h)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function Rz(n){const e=+this._x.call(null,n);return sC(this.cover(e),e,n)}function sC(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,u,c,d,h,m;if(!s)return n._root=o,n;for(;s.length;)if((d=e>=(u=(a+l)/2))?a=u:l=u,i=s,!(s=s[h=+d]))return i[h]=o,n;if(c=+n._x.call(null,s.data),e===c)return o.next=s,i?i[h]=o:n._root=o,n;do i=i?i[h]=new Array(2):n._root=new Array(2),(d=e>=(u=(a+l)/2))?a=u:l=u;while((h=+d)==(m=+(c>=u)));return i[m]=s,i[h]=o,n}function Oz(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)sC(this,r[o],n[o]);return this}function jz(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function Dz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Mz(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ss(n,e,r){this.node=n,this.x0=e,this.x1=r}function Lz(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],u=this._root,c,d;for(u&&l.push(new Ss(u,i,a)),e==null?e=1/0:(i=n-e,a=n+e);c=l.pop();)if(!(!(u=c.node)||(s=c.x0)>a||(o=c.x1)<i))if(u.length){var h=(s+o)/2;l.push(new Ss(u[1],h,o),new Ss(u[0],s,h)),(d=+(n>=h))&&(c=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=c)}else{var m=Math.abs(n-+this._x.call(null,u.data));m<e&&(e=m,i=n-m,a=n+m,r=u.data)}return r}function Vz(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,u,c,d,h,m;if(!r)return this;if(r.length)for(;;){if((d=u>=(c=(a+l)/2))?a=c:l=c,e=r,!(r=r[h=+d]))return this;if(!r.length)break;e[h+1&1]&&(i=e,m=h)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[h]=o:delete e[h],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=o,this)}function Fz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Uz(){return this._root}function zz(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function $z(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new Ss(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new Ss(s,l,a)),(s=i[0])&&e.push(new Ss(s,o,l))}return this}function Bz(n){var e=[],r=[],i;for(this._root&&e.push(new Ss(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,u=(a+l)/2;(o=s[0])&&e.push(new Ss(o,a,u)),(o=s[1])&&e.push(new Ss(o,u,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function qz(n){return n[0]}function Hz(n){return arguments.length?(this._x=n,this):this._x}function oC(n,e){var r=new n_(e??qz,NaN,NaN);return n==null?r:r.addAll(n)}function n_(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function fb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var lr=oC.prototype=n_.prototype;lr.copy=function(){var n=new n_(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=fb(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=fb(i));return n};lr.add=Rz;lr.addAll=Oz;lr.cover=jz;lr.data=Dz;lr.extent=Mz;lr.find=Lz;lr.remove=Vz;lr.removeAll=Fz;lr.root=Uz;lr.size=zz;lr.visit=$z;lr.visitAfter=Bz;lr.x=Hz;function Kz(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return aC(this.cover(e,r),e,r,n)}function aC(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._x1,d=n._y1,h,m,_,w,I,P,b,T;if(!o)return n._root=a,n;for(;o.length;)if((I=e>=(h=(l+c)/2))?l=h:c=h,(P=r>=(m=(u+d)/2))?u=m:d=m,s=o,!(o=o[b=P<<1|I]))return s[b]=a,n;if(_=+n._x.call(null,o.data),w=+n._y.call(null,o.data),e===_&&r===w)return a.next=o,s?s[b]=a:n._root=a,n;do s=s?s[b]=new Array(4):n._root=new Array(4),(I=e>=(h=(l+c)/2))?l=h:c=h,(P=r>=(m=(u+d)/2))?u=m:d=m;while((b=P<<1|I)===(T=(w>=m)<<1|_>=h));return s[T]=o,s[b]=a,n}function Wz(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),u=1/0,c=1/0,d=-1/0,h=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<u&&(u=s),s>d&&(d=s),o<c&&(c=o),o>h&&(h=o));if(u>d||c>h)return this;for(this.cover(u,c).cover(d,h),r=0;r<i;++r)aC(this,a[r],l[r],n[r]);return this}function Gz(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,u,c;r>n||n>=s||i>e||e>=o;)switch(c=(e<i)<<1|n<r,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function Qz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Yz(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Gn(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function Xz(n,e,r){var i,s=this._x0,o=this._y0,a,l,u,c,d=this._x1,h=this._y1,m=[],_=this._root,w,I;for(_&&m.push(new Gn(_,s,o,d,h)),r==null?r=1/0:(s=n-r,o=e-r,d=n+r,h=e+r,r*=r);w=m.pop();)if(!(!(_=w.node)||(a=w.x0)>d||(l=w.y0)>h||(u=w.x1)<s||(c=w.y1)<o))if(_.length){var P=(a+u)/2,b=(l+c)/2;m.push(new Gn(_[3],P,b,u,c),new Gn(_[2],a,b,P,c),new Gn(_[1],P,l,u,b),new Gn(_[0],a,l,P,b)),(I=(e>=b)<<1|n>=P)&&(w=m[m.length-1],m[m.length-1]=m[m.length-1-I],m[m.length-1-I]=w)}else{var T=n-+this._x.call(null,_.data),N=e-+this._y.call(null,_.data),O=T*T+N*N;if(O<r){var M=Math.sqrt(r=O);s=n-M,o=e-M,d=n+M,h=e+M,i=_.data}}return i}function Jz(n){if(isNaN(d=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,c=this._y1,d,h,m,_,w,I,P,b;if(!r)return this;if(r.length)for(;;){if((w=d>=(m=(a+u)/2))?a=m:u=m,(I=h>=(_=(l+c)/2))?l=_:c=_,e=r,!(r=r[P=I<<1|w]))return this;if(!r.length)break;(e[P+1&3]||e[P+2&3]||e[P+3&3])&&(i=e,b=P)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[P]=o:delete e[P],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[b]=r:this._root=r),this):(this._root=o,this)}function Zz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function e$(){return this._root}function t$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function n$(n){var e=[],r,i=this._root,s,o,a,l,u;for(i&&e.push(new Gn(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,u=r.y1)&&i.length){var c=(o+l)/2,d=(a+u)/2;(s=i[3])&&e.push(new Gn(s,c,d,l,u)),(s=i[2])&&e.push(new Gn(s,o,d,c,u)),(s=i[1])&&e.push(new Gn(s,c,a,l,d)),(s=i[0])&&e.push(new Gn(s,o,a,c,d))}return this}function r$(n){var e=[],r=[],i;for(this._root&&e.push(new Gn(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,c=i.y1,d=(a+u)/2,h=(l+c)/2;(o=s[0])&&e.push(new Gn(o,a,l,d,h)),(o=s[1])&&e.push(new Gn(o,d,l,u,h)),(o=s[2])&&e.push(new Gn(o,a,h,d,c)),(o=s[3])&&e.push(new Gn(o,d,h,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function i$(n){return n[0]}function s$(n){return arguments.length?(this._x=n,this):this._x}function o$(n){return n[1]}function a$(n){return arguments.length?(this._y=n,this):this._y}function lC(n,e,r){var i=new r_(e??i$,r??o$,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function r_(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function db(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Zn=lC.prototype=r_.prototype;Zn.copy=function(){var n=new r_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=db(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=db(i));return n};Zn.add=Kz;Zn.addAll=Wz;Zn.cover=Gz;Zn.data=Qz;Zn.extent=Yz;Zn.find=Xz;Zn.remove=Jz;Zn.removeAll=Zz;Zn.root=e$;Zn.size=t$;Zn.visit=n$;Zn.visitAfter=r$;Zn.x=s$;Zn.y=a$;function l$(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return uC(this.cover(e,r,i),e,r,i,n)}function uC(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},u=n._x0,c=n._y0,d=n._z0,h=n._x1,m=n._y1,_=n._z1,w,I,P,b,T,N,O,M,U,A,C;if(!a)return n._root=l,n;for(;a.length;)if((O=e>=(w=(u+h)/2))?u=w:h=w,(M=r>=(I=(c+m)/2))?c=I:m=I,(U=i>=(P=(d+_)/2))?d=P:_=P,o=a,!(a=a[A=U<<2|M<<1|O]))return o[A]=l,n;if(b=+n._x.call(null,a.data),T=+n._y.call(null,a.data),N=+n._z.call(null,a.data),e===b&&r===T&&i===N)return l.next=a,o?o[A]=l:n._root=l,n;do o=o?o[A]=new Array(8):n._root=new Array(8),(O=e>=(w=(u+h)/2))?u=w:h=w,(M=r>=(I=(c+m)/2))?c=I:m=I,(U=i>=(P=(d+_)/2))?d=P:_=P;while((A=U<<2|M<<1|O)===(C=(N>=P)<<2|(T>=I)<<1|b>=w));return o[C]=a,o[A]=l,n}function u$(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,d=-1/0;for(let h=0,m,_,w,I;h<e;++h)isNaN(_=+this._x.call(null,m=n[h]))||isNaN(w=+this._y.call(null,m))||isNaN(I=+this._z.call(null,m))||(r[h]=_,i[h]=w,s[h]=I,_<o&&(o=_),_>u&&(u=_),w<a&&(a=w),w>c&&(c=w),I<l&&(l=I),I>d&&(d=I));if(o>u||a>c||l>d)return this;this.cover(o,a,l).cover(u,c,d);for(let h=0;h<e;++h)uC(this,r[h],i[h],s[h],n[h]);return this}function c$(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,u=(o=Math.floor(r))+1;else{for(var c=a-i||1,d=this._root,h,m;i>n||n>=a||s>e||e>=l||o>r||r>=u;)switch(m=(r<o)<<2|(e<s)<<1|n<i,h=new Array(8),h[m]=d,d=h,c*=2,m){case 0:a=i+c,l=s+c,u=o+c;break;case 1:i=a-c,l=s+c,u=o+c;break;case 2:a=i+c,s=l-c,u=o+c;break;case 3:i=a-c,s=l-c,u=o+c;break;case 4:a=i+c,l=s+c,o=u-c;break;case 5:i=a-c,l=s+c,o=u-c;break;case 6:a=i+c,s=l-c,o=u-c;break;case 7:i=a-c,s=l-c,o=u-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this}function h$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function f$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function It(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function d$(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,u,c,d,h,m,_,w=this._x1,I=this._y1,P=this._z1,b=[],T=this._root,N,O;for(T&&b.push(new It(T,o,a,l,w,I,P)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,w=n+i,I=e+i,P=r+i,i*=i);N=b.pop();)if(!(!(T=N.node)||(u=N.x0)>w||(c=N.y0)>I||(d=N.z0)>P||(h=N.x1)<o||(m=N.y1)<a||(_=N.z1)<l))if(T.length){var M=(u+h)/2,U=(c+m)/2,A=(d+_)/2;b.push(new It(T[7],M,U,A,h,m,_),new It(T[6],u,U,A,M,m,_),new It(T[5],M,c,A,h,U,_),new It(T[4],u,c,A,M,U,_),new It(T[3],M,U,d,h,m,A),new It(T[2],u,U,d,M,m,A),new It(T[1],M,c,d,h,U,A),new It(T[0],u,c,d,M,U,A)),(O=(r>=A)<<2|(e>=U)<<1|n>=M)&&(N=b[b.length-1],b[b.length-1]=b[b.length-1-O],b[b.length-1-O]=N)}else{var C=n-+this._x.call(null,T.data),D=e-+this._y.call(null,T.data),L=r-+this._z.call(null,T.data),V=C*C+D*D+L*L;if(V<i){var $=Math.sqrt(i=V);o=n-$,a=e-$,l=r-$,w=n+$,I=e+$,P=r+$,s=T.data}}return s}const p$=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function m$(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,u=n+i,c=e+i,d=r+i;return this.visit((h,m,_,w,I,P,b)=>{if(!h.length)do{const T=h.data;p$(n,e,r,this._x(T),this._y(T),this._z(T))<=i&&s.push(T)}while(h=h.next);return m>u||_>c||w>d||I<o||P<a||b<l}),s}function g$(n){if(isNaN(m=+this._x.call(null,n))||isNaN(_=+this._y.call(null,n))||isNaN(w=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._z0,c=this._x1,d=this._y1,h=this._z1,m,_,w,I,P,b,T,N,O,M,U;if(!r)return this;if(r.length)for(;;){if((T=m>=(I=(a+c)/2))?a=I:c=I,(N=_>=(P=(l+d)/2))?l=P:d=P,(O=w>=(b=(u+h)/2))?u=b:h=b,e=r,!(r=r[M=O<<2|N<<1|T]))return this;if(!r.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(i=e,U=M)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[M]=o:delete e[M],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[U]=r:this._root=r),this):(this._root=o,this)}function y$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function v$(){return this._root}function _$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function w$(n){var e=[],r,i=this._root,s,o,a,l,u,c,d;for(i&&e.push(new It(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,d=r.z1)&&i.length){var h=(o+u)/2,m=(a+c)/2,_=(l+d)/2;(s=i[7])&&e.push(new It(s,h,m,_,u,c,d)),(s=i[6])&&e.push(new It(s,o,m,_,h,c,d)),(s=i[5])&&e.push(new It(s,h,a,_,u,m,d)),(s=i[4])&&e.push(new It(s,o,a,_,h,m,d)),(s=i[3])&&e.push(new It(s,h,m,l,u,c,_)),(s=i[2])&&e.push(new It(s,o,m,l,h,c,_)),(s=i[1])&&e.push(new It(s,h,a,l,u,m,_)),(s=i[0])&&e.push(new It(s,o,a,l,h,m,_))}return this}function x$(n){var e=[],r=[],i;for(this._root&&e.push(new It(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.z0,c=i.x1,d=i.y1,h=i.z1,m=(a+c)/2,_=(l+d)/2,w=(u+h)/2;(o=s[0])&&e.push(new It(o,a,l,u,m,_,w)),(o=s[1])&&e.push(new It(o,m,l,u,c,_,w)),(o=s[2])&&e.push(new It(o,a,_,u,m,d,w)),(o=s[3])&&e.push(new It(o,m,_,u,c,d,w)),(o=s[4])&&e.push(new It(o,a,l,w,m,_,h)),(o=s[5])&&e.push(new It(o,m,l,w,c,_,h)),(o=s[6])&&e.push(new It(o,a,_,w,m,d,h)),(o=s[7])&&e.push(new It(o,m,_,w,c,d,h))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function b$(n){return n[0]}function E$(n){return arguments.length?(this._x=n,this):this._x}function T$(n){return n[1]}function I$(n){return arguments.length?(this._y=n,this):this._y}function S$(n){return n[2]}function k$(n){return arguments.length?(this._z=n,this):this._z}function cC(n,e,r,i){var s=new i_(e??b$,r??T$,i??S$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function i_(n,e,r,i,s,o,a,l,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function pb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var kn=cC.prototype=i_.prototype;kn.copy=function(){var n=new i_(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=pb(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=pb(i));return n};kn.add=l$;kn.addAll=u$;kn.cover=c$;kn.data=h$;kn.extent=f$;kn.find=d$;kn.findAllWithinRadius=m$;kn.remove=g$;kn.removeAll=y$;kn.root=v$;kn.size=_$;kn.visit=w$;kn.visitAfter=x$;kn.x=E$;kn.y=I$;kn.z=k$;function Es(n){return function(){return n}}function gs(n){return(n()-.5)*1e-6}function C$(n){return n.index}function mb(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function A$(n){var e=C$,r=m,i,s=Es(30),o,a,l,u,c,d,h=1;n==null&&(n=[]);function m(b){return 1/Math.min(u[b.source.index],u[b.target.index])}function _(b){for(var T=0,N=n.length;T<h;++T)for(var O=0,M,U,A,C=0,D=0,L=0,V,$;O<N;++O)M=n[O],U=M.source,A=M.target,C=A.x+A.vx-U.x-U.vx||gs(d),l>1&&(D=A.y+A.vy-U.y-U.vy||gs(d)),l>2&&(L=A.z+A.vz-U.z-U.vz||gs(d)),V=Math.sqrt(C*C+D*D+L*L),V=(V-o[O])/V*b*i[O],C*=V,D*=V,L*=V,A.vx-=C*($=c[O]),l>1&&(A.vy-=D*$),l>2&&(A.vz-=L*$),U.vx+=C*($=1-$),l>1&&(U.vy+=D*$),l>2&&(U.vz+=L*$)}function w(){if(a){var b,T=a.length,N=n.length,O=new Map(a.map((U,A)=>[e(U,A,a),U])),M;for(b=0,u=new Array(T);b<N;++b)M=n[b],M.index=b,typeof M.source!="object"&&(M.source=mb(O,M.source)),typeof M.target!="object"&&(M.target=mb(O,M.target)),u[M.source.index]=(u[M.source.index]||0)+1,u[M.target.index]=(u[M.target.index]||0)+1;for(b=0,c=new Array(N);b<N;++b)M=n[b],c[b]=u[M.source.index]/(u[M.source.index]+u[M.target.index]);i=new Array(N),I(),o=new Array(N),P()}}function I(){if(a)for(var b=0,T=n.length;b<T;++b)i[b]=+r(n[b],b,n)}function P(){if(a)for(var b=0,T=n.length;b<T;++b)o[b]=+s(n[b],b,n)}return _.initialize=function(b,...T){a=b,d=T.find(N=>typeof N=="function")||Math.random,l=T.find(N=>[1,2,3].includes(N))||2,w()},_.links=function(b){return arguments.length?(n=b,w(),_):n},_.id=function(b){return arguments.length?(e=b,_):e},_.iterations=function(b){return arguments.length?(h=+b,_):h},_.strength=function(b){return arguments.length?(r=typeof b=="function"?b:Es(+b),I(),_):r},_.distance=function(b){return arguments.length?(s=typeof b=="function"?b:Es(+b),P(),_):s},_}const N$=1664525,P$=1013904223,gb=4294967296;function R$(){let n=1;return()=>(n=(N$*n+P$)%gb)/gb}var yb=3;function Jm(n){return n.x}function vb(n){return n.y}function O$(n){return n.z}var j$=10,D$=Math.PI*(3-Math.sqrt(5)),M$=Math.PI*20/(9+Math.sqrt(221));function L$(n,e){e=e||2;var r=Math.min(yb,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,u=.6,c=new Map,d=W0(_),h=xh("tick","end"),m=R$();n==null&&(n=[]);function _(){w(),h.call("tick",i),s<o&&(d.stop(),h.call("end",i))}function w(b){var T,N=n.length,O;b===void 0&&(b=1);for(var M=0;M<b;++M)for(s+=(l-s)*a,c.forEach(function(U){U(s)}),T=0;T<N;++T)O=n[T],O.fx==null?O.x+=O.vx*=u:(O.x=O.fx,O.vx=0),r>1&&(O.fy==null?O.y+=O.vy*=u:(O.y=O.fy,O.vy=0)),r>2&&(O.fz==null?O.z+=O.vz*=u:(O.z=O.fz,O.vz=0));return i}function I(){for(var b=0,T=n.length,N;b<T;++b){if(N=n[b],N.index=b,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),N.fz!=null&&(N.z=N.fz),isNaN(N.x)||r>1&&isNaN(N.y)||r>2&&isNaN(N.z)){var O=j$*(r>2?Math.cbrt(.5+b):r>1?Math.sqrt(.5+b):b),M=b*D$,U=b*M$;r===1?N.x=O:r===2?(N.x=O*Math.cos(M),N.y=O*Math.sin(M)):(N.x=O*Math.sin(M)*Math.cos(U),N.y=O*Math.cos(M),N.z=O*Math.sin(M)*Math.sin(U))}(isNaN(N.vx)||r>1&&isNaN(N.vy)||r>2&&isNaN(N.vz))&&(N.vx=0,r>1&&(N.vy=0),r>2&&(N.vz=0))}}function P(b){return b.initialize&&b.initialize(n,m,r),b}return I(),i={tick:w,restart:function(){return d.restart(_),i},stop:function(){return d.stop(),i},numDimensions:function(b){return arguments.length?(r=Math.min(yb,Math.max(1,Math.round(b))),c.forEach(P),i):r},nodes:function(b){return arguments.length?(n=b,I(),c.forEach(P),i):n},alpha:function(b){return arguments.length?(s=+b,i):s},alphaMin:function(b){return arguments.length?(o=+b,i):o},alphaDecay:function(b){return arguments.length?(a=+b,i):+a},alphaTarget:function(b){return arguments.length?(l=+b,i):l},velocityDecay:function(b){return arguments.length?(u=1-b,i):1-u},randomSource:function(b){return arguments.length?(m=b,c.forEach(P),i):m},force:function(b,T){return arguments.length>1?(T==null?c.delete(b):c.set(b,P(T)),i):c.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),T=b.shift()||0,N=(r>1?b.shift():null)||0,O=(r>2?b.shift():null)||0,M=b.shift()||1/0,U=0,A=n.length,C,D,L,V,$,j;for(M*=M,U=0;U<A;++U)$=n[U],C=T-$.x,D=N-($.y||0),L=O-($.z||0),V=C*C+D*D+L*L,V<M&&(j=$,M=V);return j},on:function(b,T){return arguments.length>1?(h.on(b,T),i):h.on(b)}}}function V$(){var n,e,r,i,s,o=Es(-30),a,l=1,u=1/0,c=.81;function d(w){var I,P=n.length,b=(e===1?oC(n,Jm):e===2?lC(n,Jm,vb):e===3?cC(n,Jm,vb,O$):null).visitAfter(m);for(s=w,I=0;I<P;++I)r=n[I],b.visit(_)}function h(){if(n){var w,I=n.length,P;for(a=new Array(I),w=0;w<I;++w)P=n[w],a[P.index]=+o(P,w,n)}}function m(w){var I=0,P,b,T=0,N,O,M,U,A=w.length;if(A){for(N=O=M=U=0;U<A;++U)(P=w[U])&&(b=Math.abs(P.value))&&(I+=P.value,T+=b,N+=b*(P.x||0),O+=b*(P.y||0),M+=b*(P.z||0));I*=Math.sqrt(4/A),w.x=N/T,e>1&&(w.y=O/T),e>2&&(w.z=M/T)}else{P=w,P.x=P.data.x,e>1&&(P.y=P.data.y),e>2&&(P.z=P.data.z);do I+=a[P.data.index];while(P=P.next)}w.value=I}function _(w,I,P,b,T){if(!w.value)return!0;var N=[P,b,T][e-1],O=w.x-r.x,M=e>1?w.y-r.y:0,U=e>2?w.z-r.z:0,A=N-I,C=O*O+M*M+U*U;if(A*A/c<C)return C<u&&(O===0&&(O=gs(i),C+=O*O),e>1&&M===0&&(M=gs(i),C+=M*M),e>2&&U===0&&(U=gs(i),C+=U*U),C<l&&(C=Math.sqrt(l*C)),r.vx+=O*w.value*s/C,e>1&&(r.vy+=M*w.value*s/C),e>2&&(r.vz+=U*w.value*s/C)),!0;if(w.length||C>=u)return;(w.data!==r||w.next)&&(O===0&&(O=gs(i),C+=O*O),e>1&&M===0&&(M=gs(i),C+=M*M),e>2&&U===0&&(U=gs(i),C+=U*U),C<l&&(C=Math.sqrt(l*C)));do w.data!==r&&(A=a[w.data.index]*s/C,r.vx+=O*A,e>1&&(r.vy+=M*A),e>2&&(r.vz+=U*A));while(w=w.next)}return d.initialize=function(w,...I){n=w,i=I.find(P=>typeof P=="function")||Math.random,e=I.find(P=>[1,2,3].includes(P))||2,h()},d.strength=function(w){return arguments.length?(o=typeof w=="function"?w:Es(+w),h(),d):o},d.distanceMin=function(w){return arguments.length?(l=w*w,d):Math.sqrt(l)},d.distanceMax=function(w){return arguments.length?(u=w*w,d):Math.sqrt(u)},d.theta=function(w){return arguments.length?(c=w*w,d):Math.sqrt(c)},d}function F$(n,e,r,i){var s,o,a=Es(.1),l,u;typeof n!="function"&&(n=Es(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function c(h){for(var m=0,_=s.length;m<_;++m){var w=s[m],I=w.x-e||1e-6,P=(w.y||0)-r||1e-6,b=(w.z||0)-i||1e-6,T=Math.sqrt(I*I+P*P+b*b),N=(u[m]-T)*l[m]*h/T;w.vx+=I*N,o>1&&(w.vy+=P*N),o>2&&(w.vz+=b*N)}}function d(){if(s){var h,m=s.length;for(l=new Array(m),u=new Array(m),h=0;h<m;++h)u[h]=+n(s[h],h,s),l[h]=isNaN(u[h])?0:+a(s[h],h,s)}}return c.initialize=function(h,...m){s=h,o=m.find(_=>[1,2,3].includes(_))||2,d()},c.strength=function(h){return arguments.length?(a=typeof h=="function"?h:Es(+h),d(),c):a},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:Es(+h),d(),c):n},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(r=+h,c):r},c.z=function(h){return arguments.length?(i=+h,c):i},c}const{abs:Bu,cos:ds,sin:al,acos:U$,atan2:qu,sqrt:Js,pow:jr}=Math;function Hu(n){return n<0?-jr(-n,1/3):jr(n,1/3)}const hC=Math.PI,pf=2*hC,Zs=hC/2,z$=1e-6,Zm=Number.MAX_SAFE_INTEGER||9007199254740991,eg=Number.MIN_SAFE_INTEGER||-9007199254740991,$$={x:0,y:0,z:0},Ee={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Js(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,u=n*n,c,d,h,m=0;i===2?(o=[o[0],o[1],o[2],$$],c=l,d=s*n*2,h=u):i===3&&(c=l*s,d=l*n*3,h=s*u*3,m=n*u);const _={x:c*o[0].x+d*o[1].x+h*o[2].x+m*o[3].x,y:c*o[0].y+d*o[1].y+h*o[2].y+m*o[3].y,t:n};return r&&(_.z=c*o[0].z+d*o[1].z+h*o[2].z+m*o[3].z),_}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],u=o[1],c=o[2],d=o[3],h;if(l*=s,u*=n,a.length===2)return h=l+u,{x:(l*a[0].x+u*a[1].x)/h,y:(l*a[0].y+u*a[1].y)/h,z:i?(l*a[0].z+u*a[1].z)/h:!1,t:n};if(l*=s,u*=2*s,c*=n*n,a.length===3)return h=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z)/h:!1,t:n};if(l*=s,u*=1.5*s,c*=3*s,d*=n*n*n,a.length===4)return h=l+u+c+d,{x:(l*a[0].x+u*a[1].x+c*a[2].x+d*a[3].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y+d*a[3].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z+d*a[3].z)/h:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,u;l<o;l++)u={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(u.z=o*(i[l+1].z-i[l].z)),a.push(u);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||Ee.approximately(n,e)||Ee.approximately(n,r)},approximately:function(n,e,r){return Bu(n-e)<=(r||z$)},length:function(n){const r=Ee.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*Ee.Tvalues[s]+.5,i+=Ee.Cvalues[s]*Ee.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,u=l/o;return i+a*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(Ee.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,u=i*o+s*a;return qu(l,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return Js(r*r+i*i)},closest:function(n,e){let r=jr(2,63),i,s;return n.forEach(function(o,a){s=Ee.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=jr(n,e)+jr(1-n,e),i=r-1;return Bu(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=jr(1-n,e),i=jr(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const u=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),c=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),d=(n-r)*(o-l)-(e-i)*(s-a);return d==0?!1:{x:u/d,y:c/d}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,u=r.x,c=r.y,d=i.x,h=i.y;return Ee.lli8(s,o,a,l,u,c,d,h)},lli:function(n,e){return Ee.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new Ct(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=Zm,r=Zm,i=eg,s=eg;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!Ee.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(u){u.virtual||l.forEach(function(c){if(c.virtual)return;const d=u.intersects(c,s);d.length>0&&(d.c1=u,d.c2=c,d.s1=n,d.s2=r,o.push(d))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=Ee.makeline(e.points[i-1],n.points[0]),a=Ee.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:Ee.findbbox([o,n,e,a])};return l.intersections=function(u){return Ee.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=Zm,s=eg,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-qu(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*ds(s)-(a.y-i)*al(s),y:(a.x-r)*al(s)+(a.y-i)*ds(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=Ee.align(n,e),s=function(A){return 0<=A&&A<=1};if(r===2){const A=i[0].y,C=i[1].y,D=i[2].y,L=A-2*C+D;if(L!==0){const V=-Js(C*C-A*D),$=-A+C,j=-(V+$)/L,H=-(-V+$)/L;return[j,H].filter(s)}else if(C!==D&&L===0)return[(2*C-D)/(2*C-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,u=i[3].y;let c=-o+3*a-3*l+u,d=3*o-6*a+3*l,h=-3*o+3*a,m=o;if(Ee.approximately(c,0)){if(Ee.approximately(d,0))return Ee.approximately(h,0)?[]:[-m/h].filter(s);const A=Js(h*h-4*d*m),C=2*d;return[(A-h)/C,(-h-A)/C].filter(s)}d/=c,h/=c,m/=c;const _=(3*h-d*d)/3,w=_/3,I=(2*d*d*d-9*d*h+27*m)/27,P=I/2,b=P*P+w*w*w;let T,N,O,M,U;if(b<0){const A=-_/3,C=A*A*A,D=Js(C),L=-I/(2*D),V=L<-1?-1:L>1?1:L,$=U$(V),j=Hu(D),H=2*j;return O=H*ds($/3)-d/3,M=H*ds(($+pf)/3)-d/3,U=H*ds(($+2*pf)/3)-d/3,[O,M,U].filter(s)}else{if(b===0)return T=P<0?Hu(-P):-Hu(P),O=2*T-d/3,M=-T-d/3,[O,M].filter(s);{const A=Js(b);return T=Hu(-P+A),N=Hu(P+A),[T-N-d/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-Js(r*r-e*i),a=-e+r,l=-(o+a)/s,u=-(-o+a)/s;return[l,u]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,u,c=0,d=0;const h=Ee.compute(n,e),m=Ee.compute(n,r),_=h.x*h.x+h.y*h.y;if(i?(o=Js(jr(h.y*m.z-m.y*h.z,2)+jr(h.z*m.x-m.z*h.x,2)+jr(h.x*m.y-m.x*h.y,2)),a=jr(_+h.z*h.z,3/2)):(o=h.x*m.y-h.y*m.x,a=jr(_,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,d=a/o,!s){const w=Ee.curvature(n-.001,e,r,i,!0).k,I=Ee.curvature(n+.001,e,r,i,!0).k;u=(I-c+(c-w))/2,l=(Bu(I-c)+Bu(c-w))/2}return{k:c,r:d,dk:u,adk:l}},inflections:function(n){if(n.length<4)return[];const e=Ee.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),u=18*(s-r);if(Ee.approximately(a,0)){if(!Ee.approximately(l,0)){let m=-u/l;if(0<=m&&m<=1)return[m]}return[]}const c=2*a;if(Ee.approximately(c,0))return[];const d=l*l-4*a*u;if(d<0)return[];const h=Math.sqrt(d);return[(h-l)/c,-(l+h)/c].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,u;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,u=(n[o].size+e[o].size)/2,Bu(a-l)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),u=e.split(.5),c=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];c=c.filter(function(h){return Ee.bboxoverlap(h.left.bbox(),h.right.bbox())});let d=[];return c.length===0||(c.forEach(function(h){d=d.concat(Ee.pairiteration(h.left,h.right,a))}),d=d.filter(function(h,m){return d.indexOf(h)===m})),d},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*ds(Zs)-s*al(Zs),u=i*al(Zs)+s*ds(Zs),c=o*ds(Zs)-a*al(Zs),d=o*al(Zs)+a*ds(Zs),h=(n.x+e.x)/2,m=(n.y+e.y)/2,_=(e.x+r.x)/2,w=(e.y+r.y)/2,I=h+l,P=m+u,b=_+c,T=w+d,N=Ee.lli8(h,m,I,P,_,w,b,T),O=Ee.dist(N,n);let M=qu(n.y-N.y,n.x-N.x),U=qu(e.y-N.y,e.x-N.x),A=qu(r.y-N.y,r.x-N.x),C;return M<A?((M>U||U>A)&&(M+=pf),M>A&&(C=A,A=M,M=C)):A<U&&U<M?(C=A,A=M,M=C):A+=pf,N.s=M,N.e=A,N.r=O,N},numberSort:function(n,e){return n-e}};class bc{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return Ee.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)Ee.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new bc(r)}}const{abs:Ku,min:_b,max:wb,cos:B$,sin:q$,acos:H$,sqrt:Wu}=Math,K$=Math.PI;class Ct{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const _=[];r.forEach(function(w){["x","y","z"].forEach(function(I){typeof w[I]<"u"&&_.push(w[I])})}),r=_}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let _=0,w=a?3:2;_<o;_+=w){var u={x:r[_],y:r[_+1]};a&&(u.z=r[_+2]),l.push(u)}const c=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const h=Ee.align(l,{p1:l[0],p2:l[c]}),m=Ee.dist(l[0],l[c]);this._linear=h.reduce((_,w)=>_+Ku(w.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new Ct(r,r,i);if(s===1)return new Ct(e,r,r);const o=Ct.getABC(2,e,r,i,s);return new Ct(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=Ct.getABC(3,e,r,i,s);typeof o>"u"&&(o=Ee.dist(r,a.C));const l=o*(1-s)/s,u=Ee.dist(e,i),c=(i.x-e.x)/u,d=(i.y-e.y)/u,h=o*c,m=o*d,_=l*c,w=l*d,I={x:r.x-h,y:r.y-m},P={x:r.x+_,y:r.y+w},b=a.A,T={x:b.x+(I.x-b.x)/(1-s),y:b.y+(I.y-b.y)/(1-s)},N={x:b.x+(P.x-b.x)/s,y:b.y+(P.y-b.y)/s},O={x:e.x+(T.x-e.x)/s,y:e.y+(T.y-e.y)/s},M={x:i.x+(N.x-i.x)/(1-s),y:i.y+(N.y-i.y)/(1-s)};return new Ct(e,O,M,i)}static getUtils(){return Ee}getUtils(){return Ct.getUtils()}static get PolyBezier(){return bc}valueOf(){return this.toString()}toString(){return Ee.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=Ee.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=Ee.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return Ee.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=Ee.projectionratio(o,e),l=1-a,u={x:a*r.x+l*s.x,y:a*r.y+l*s.y},c=Ee.abcratio(o,e);return{A:{x:i.x+(i.x-u.x)/c,y:i.y+(i.y-u.y)/c},B:i,C:u,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return Ct.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],Ee.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=Ee.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,u=.1/i;let c=s.mdist,d=a,h=d,m;c+=1;for(let _;d<l+u;d+=u)m=this.compute(d),_=Ee.dist(e,m),_<c&&(c=_,h=d);return h=h<0?0:h>1?1:h,m=this.compute(h),m.t=h,m.d=c,m}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Ee.computeWithRatios(e,this.points,this.ratios,this._3d):Ee.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new Ct(r)}derivative(e){return Ee.compute(e,this.dpoints[0],this._3d)}dderivative(e){return Ee.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Ct(Ee.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Ee.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Ee.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Wu(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Wu(r.x*r.x+r.y*r.y+r.z*r.z),o=Wu(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Wu(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const u=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,u=r.length-1;a<u;a++)l=Ee.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new Ct([i[0],i[3],i[5]]):new Ct([i[0],i[4],i[7],i[9]]),right:this.order===2?new Ct([i[5],i[4],i[2]]):new Ct([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=Ee.map(0,0,1,this._t1,this._t2),s.left._t2=Ee.map(e,0,1,this._t1,this._t2),s.right._t1=Ee.map(e,0,1,this._t1,this._t2),s.right._t2=Ee.map(1,0,1,this._t1,this._t2),r?(r=Ee.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=Ee.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(Ee.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(Ee.numberSort))}).bind(this)),e.values=r.sort(Ee.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=Ee.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return Ee.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new Ct(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=Ee.angle(this.points[0],this.points[3],this.points[1]),o=Ee.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Ku(H$(i))<K$/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=c.split(r,i),!o.simple()){if(i-=s,Ku(r-i)<s)return[];o=c.split(r,i),o._t1=Ee.map(r,0,1,c._t1,c._t2),o._t2=Ee.map(i,0,1,c._t1,c._t2),l.push(o),r=i;break}r<1&&(o=c.split(r,1),o._t1=Ee.map(r,0,1,c._t1,c._t2),o._t2=c._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new Ct(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],c=[],d=Ee.lli4(u[0],u[0].c,u[1],u[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const m=c[h*r]=Ee.copy(o[h*r]);m.x+=(h?l:a)*u[h].n.x,m.y+=(h?l:a)*u[h].n.y}),i?([0,1].forEach(function(h){if(!(r===2&&h)){var m=o[h+1],_={x:m.x-d.x,y:m.y-d.y},w=i?i((h+1)/r):e;i&&!s&&(w=-w);var I=Wu(_.x*_.x+_.y*_.y);_.x/=I,_.y/=I,c[h+1]={x:m.x+w*_.x,y:m.y+w*_.y}}}),new Ct(c)):([0,1].forEach(h=>{if(r===2&&h)return;const m=c[h*r],_=this.derivative(h),w={x:m.x+_.x,y:m.y+_.y};c[h+1]=Ee.lli4(m,w,d,o[h+1])}),new Ct(c))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const M=this.normal(0),U=this.points[0],A=this.points[this.points.length-1];let C,D,L;i===void 0&&(i=e,s=r),C={x:U.x+M.x*e,y:U.y+M.y*e},L={x:A.x+M.x*i,y:A.y+M.y*i},D={x:(C.x+L.x)/2,y:(C.y+L.y)/2};const V=[C,D,L];C={x:U.x-M.x*r,y:U.y-M.y*r},L={x:A.x-M.x*s,y:A.y-M.y*s},D={x:(C.x+L.x)/2,y:(C.y+L.y)/2};const $=[L,D,C],j=Ee.makeline($[2],V[0]),H=Ee.makeline(V[2],$[0]),G=[j,new Ct(V),H,new Ct($)];return new bc(G)}const o=this.reduce(),a=o.length,l=[];let u=[],c,d=0,h=this.length();const m=typeof i<"u"&&typeof s<"u";function _(M,U,A,C,D){return function(L){const V=C/A,$=(C+D)/A,j=U-M;return Ee.map(L,0,1,M+V*j,M+$*j)}}o.forEach(function(M){const U=M.length();m?(l.push(M.scale(_(e,i,h,d,U))),u.push(M.scale(_(-r,-s,h,d,U)))):(l.push(M.scale(e)),u.push(M.scale(-r))),d+=U}),u=u.map(function(M){return c=M.points,c[3]?M.points=[c[3],c[2],c[1],c[0]]:M.points=[c[2],c[1],c[0]],M}).reverse();const w=l[0].points[0],I=l[a-1].points[l[a-1].points.length-1],P=u[a-1].points[u[a-1].points.length-1],b=u[0].points[0],T=Ee.makeline(P,w),N=Ee.makeline(I,b),O=[T].concat(l).concat([N]).concat(u);return new bc(O)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const u=Ee.makeshape(s[a],s[l-a],i);u.startcap.virtual=a>1,u.endcap.virtual=a<l/2-1,o.push(u)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Ct&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=_b(e.p1.x,e.p2.x),i=_b(e.p1.y,e.p2.y),s=wb(e.p1.x,e.p2.x),o=wb(e.p1.y,e.p2.y);return Ee.roots(this.points,e).filter(a=>{var l=this.get(a);return Ee.between(l.x,r,s)&&Ee.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,u;o<i;o++)l=r.slice(o,o+1),u=r.slice(o+2),a=this.curveintersects(l,u,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=Ee.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),u=Ee.dist(e,r),c=Ee.dist(e,a),d=Ee.dist(e,l);return Ku(c-u)+Ku(d-u)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,u,c,d,h=!1,m=!1,_,w=s,I=1;do if(m=h,d=c,w=(i+s)/2,l=this.get(w),u=this.get(s),c=Ee.getccenter(a,l,u),c.interval={start:i,end:s},h=this._error(c,a,i,s)<=e,_=m&&!h,_||(I=s),h){if(s>=1){if(c.interval.end=I=1,d=c,s>1){let b={x:c.x+c.r*B$(c.e),y:c.y+c.r*q$(c.e)};c.e+=Ee.angle({x:c.x,y:c.y},b,this.get(1))}break}s=s+(s-i)/2}else s=w;while(!_&&o++<100);if(o>=100)break;d=d||c,r.push(d),i=I}while(s<1);return r}}function Hy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function W$(n){if(Array.isArray(n))return n}function G$(n){if(Array.isArray(n))return Hy(n)}function Q$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Y$(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function X$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(n,e){if(n==null)return{};var r,i,s=e7(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function e7(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function t7(n,e){return W$(n)||Y$(n,e)||fC(n,e)||X$()}function n7(n){return G$(n)||Q$(n)||fC(n)||J$()}function r7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function i7(n){var e=r7(n,"string");return typeof e=="symbol"?e:e+""}function fC(n,e){if(n){if(typeof n=="string")return Hy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hy(n,e):void 0}}var s7=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,u){var c=l,d=u;return s.forEach(function(h,m){var _=h.keyAccessor,w=h.isProp,I;if(w){var P=d,b=P[_],T=Z$(P,[_].map(i7));I=b,d=T}else I=_(d,m);m+1<s.length?(c.hasOwnProperty(I)||(c[I]={}),c=c[I]):r?(c.hasOwnProperty(I)||(c[I]=[]),c[I].push(d)):c[I]=d}),l},{});r instanceof Function&&function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===s.length?Object.keys(u).forEach(function(d){return u[d]=r(u[d])}):Object.values(u).forEach(function(d){return l(d,c+1)})}(o);var a=o;return i&&(a=[],function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===s.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(d){var h=t7(d,2),m=h[0],_=h[1];return l(_,[].concat(n7(c),[m]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function o7(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const xb=Symbol("implicit");function dC(){var n=new $1,e=[],r=[],i=xb;function s(o){let a=n.get(o);if(a===void 0){if(i!==xb)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new $1;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return dC(e,r).unknown(i)},o7.apply(s,arguments),s}function a7(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const l7=a7("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function u7(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var c7=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;u7(c7);function Ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function h7(n){if(Array.isArray(n))return n}function f7(n){if(Array.isArray(n))return Ky(n)}function bb(n,e,r){if(pC())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function ih(n,e,r){return(e=v7(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function pC(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pC=function(){return!!n})()}function d7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function p7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function m7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function ll(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Eb(Object(r),!0).forEach(function(i){ih(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Eb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Ec(n,e){return h7(n)||p7(n,e)||mC(n,e)||m7()}function Fr(n){return f7(n)||d7(n)||mC(n)||g7()}function y7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v7(n){var e=y7(n,"string");return typeof e=="symbol"?e:e+""}function Wy(n){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(n)}function mC(n,e){if(n){if(typeof n=="string")return Ky(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ky(n,e):void 0}}var _7=dC(l7);function Tb(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=_7(e(i))})}function w7(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,u=l===void 0?function(_){throw"Invalid DAG structure! Found cycle in node path: ".concat(_.join(" -> "),".")}:l,c={};r.forEach(function(_){return c[e(_)]={data:_,out:[],depth:-1,skip:!a(_)}}),i.forEach(function(_){var w=_.source,I=_.target,P=O(w),b=O(I);if(!c.hasOwnProperty(P))throw"Missing source node with id: ".concat(P);if(!c.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var T=c[P],N=c[b];T.out.push(N);function O(M){return Wy(M)==="object"?e(M):M}});var d=[];m(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(Fr(Object.entries(c).filter(function(_){var w=Ec(_,2),I=w[1];return!I.skip}).map(function(_){var w=Ec(_,2),I=w[0],P=w[1];return ih({},I,P.depth)}))));return h;function m(_){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,P=function(){var O=_[b];if(w.indexOf(O)!==-1){var M=[].concat(Fr(w.slice(w.indexOf(O))),[O]).map(function(U){return e(U.data)});return d.some(function(U){return U.length===M.length&&U.every(function(A,C){return A===M[C]})})||(d.push(M),u(M)),1}I>O.depth&&(O.depth=I,m(O.out,[].concat(Fr(w),[O]),I+(O.skip?0:1)))},b=0,T=_.length;b<T;b++)P()}}var x7=2,Ln=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Ib=function(e,r){if(!r.isShadow){var i=mt(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=Fr(Array(o)).map(function(){return{}}):delete s.__photons})}},Wd=X0({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Ib(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Ln},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Ln},nodeColor:{default:"color",triggerUpdate:!1,onChange:Ln},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Ln},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Ln},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Ln},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Ln},linkColor:{default:"color",triggerUpdate:!1,onChange:Ln},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Ln},linkWidth:{default:1,triggerUpdate:!1,onChange:Ln},linkCurvature:{default:0,triggerUpdate:!1,onChange:Ln},linkCanvasObject:{triggerUpdate:!1,onChange:Ln},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Ln},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Ln},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Ln},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Ln},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Ib},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=mt(e.nodeVisibility),u=mt(e.nodeVal),c=mt(e.nodeColor),d=mt(e.nodeCanvasObjectMode),h=e.ctx,m=e.isShadow/e.globalScale,_=e.graphData.nodes.filter(l);h.save(),_.forEach(function(w){var I=d(w);if(e.nodeCanvasObject&&(I==="before"||I==="replace")&&(e.nodeCanvasObject(w,h,e.globalScale),I==="replace")){h.restore();return}var P=Math.sqrt(Math.max(0,u(w)||1))*e.nodeRelSize+m;h.beginPath(),h.arc(w.x,w.y,P,0,2*Math.PI,!1),h.fillStyle=c(w)||"rgba(31, 120, 180, 0.92)",h.fill(),e.nodeCanvasObject&&I==="after"&&e.nodeCanvasObject(w,e.ctx,e.globalScale)}),h.restore()}function s(){var l=mt(e.linkVisibility),u=mt(e.linkColor),c=mt(e.linkWidth),d=mt(e.linkLineDash),h=mt(e.linkCurvature),m=mt(e.linkCanvasObjectMode),_=e.ctx,w=e.isShadow*2,I=e.graphData.links.filter(l);I.forEach(U);var P=[],b=[],T=I;if(e.linkCanvasObject){var N=[],O=[];I.forEach(function(A){return({before:P,after:b,replace:N}[m(A)]||O).push(A)}),T=[].concat(Fr(P),b,O),P=P.concat(N)}_.save(),P.forEach(function(A){return e.linkCanvasObject(A,_,e.globalScale)}),_.restore();var M=s7(T,[u,c,d]);_.save(),Object.entries(M).forEach(function(A){var C=Ec(A,2),D=C[0],L=C[1],V=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(L).forEach(function($){var j=Ec($,2),H=j[0],G=j[1],Z=(H||1)/e.globalScale+w;Object.entries(G).forEach(function(me){var ne=Ec(me,2);ne[0];var q=ne[1],K=d(q[0]);_.beginPath(),q.forEach(function(ue){var ie=ue.source,le=ue.target;if(!(!ie||!le||!ie.hasOwnProperty("x")||!le.hasOwnProperty("x"))){_.moveTo(ie.x,ie.y);var pe=ue.__controlPoints;pe?_[pe.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(_,Fr(pe).concat([le.x,le.y])):_.lineTo(le.x,le.y)}}),_.strokeStyle=V,_.lineWidth=Z,_.setLineDash(K||[]),_.stroke()})})}),_.restore(),_.save(),b.forEach(function(A){return e.linkCanvasObject(A,_,e.globalScale)}),_.restore();function U(A){var C=h(A);if(!C){A.__controlPoints=null;return}var D=A.source,L=A.target;if(!(!D||!L||!D.hasOwnProperty("x")||!L.hasOwnProperty("x"))){var V=Math.sqrt(Math.pow(L.x-D.x,2)+Math.pow(L.y-D.y,2));if(V>0){var $=Math.atan2(L.y-D.y,L.x-D.x),j=V*C,H={x:(D.x+L.x)/2+j*Math.cos($-Math.PI/2),y:(D.y+L.y)/2+j*Math.sin($-Math.PI/2)};A.__controlPoints=[H.x,H.y]}else{var G=C*70;A.__controlPoints=[L.x,L.y-G,L.x+G,L.y]}}}}function o(){var l=1.6,u=.2,c=mt(e.linkDirectionalArrowLength),d=mt(e.linkDirectionalArrowRelPos),h=mt(e.linkVisibility),m=mt(e.linkDirectionalArrowColor||e.linkColor),_=mt(e.nodeVal),w=e.ctx;w.save(),e.graphData.links.filter(h).forEach(function(I){var P=c(I);if(!(!P||P<0)){var b=I.source,T=I.target;if(!(!b||!T||!b.hasOwnProperty("x")||!T.hasOwnProperty("x"))){var N=Math.sqrt(Math.max(0,_(b)||1))*e.nodeRelSize,O=Math.sqrt(Math.max(0,_(T)||1))*e.nodeRelSize,M=Math.min(1,Math.max(0,d(I))),U=m(I)||"rgba(0,0,0,0.28)",A=P/l/2,C=I.__controlPoints&&bb(Ct,[b.x,b.y].concat(Fr(I.__controlPoints),[T.x,T.y])),D=C?function(Z){return C.get(Z)}:function(Z){return{x:b.x+(T.x-b.x)*Z||0,y:b.y+(T.y-b.y)*Z||0}},L=C?C.length():Math.sqrt(Math.pow(T.x-b.x,2)+Math.pow(T.y-b.y,2)),V=N+P+(L-N-O-P)*M,$=D(V/L),j=D((V-P)/L),H=D((V-P*(1-u))/L),G=Math.atan2($.y-j.y,$.x-j.x)-Math.PI/2;w.beginPath(),w.moveTo($.x,$.y),w.lineTo(j.x+A*Math.cos(G),j.y+A*Math.sin(G)),w.lineTo(H.x,H.y),w.lineTo(j.x-A*Math.cos(G),j.y-A*Math.sin(G)),w.fillStyle=U,w.fill()}}}),w.restore()}function a(){var l=mt(e.linkDirectionalParticles),u=mt(e.linkDirectionalParticleSpeed),c=mt(e.linkDirectionalParticleOffset),d=mt(e.linkDirectionalParticleWidth),h=mt(e.linkVisibility),m=mt(e.linkDirectionalParticleColor||e.linkColor),_=e.ctx;_.save(),e.graphData.links.filter(h).forEach(function(w){var I=l(w);if(!(!w.hasOwnProperty("__photons")||!w.__photons.length)){var P=w.source,b=w.target;if(!(!P||!b||!P.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var T=u(w),N=Math.abs(c(w)),O=w.__photons||[],M=Math.max(0,d(w)/2)/Math.sqrt(e.globalScale),U=m(w)||"rgba(0,0,0,0.28)";_.fillStyle=U;var A=w.__controlPoints?bb(Ct,[P.x,P.y].concat(Fr(w.__controlPoints),[b.x,b.y])):null,C=0,D=!1;O.forEach(function(L){var V=!!L.__singleHop;if(L.hasOwnProperty("__progressRatio")||(L.__progressRatio=V?0:(C+N)/I),!V&&C++,L.__progressRatio+=T,L.__progressRatio>=1)if(!V)L.__progressRatio=L.__progressRatio%1;else{D=!0;return}var $=L.__progressRatio,j=A?A.get($):{x:P.x+(b.x-P.x)*$||0,y:P.y+(b.y-P.y)*$||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(j.x,j.y,w,_,e.globalScale):(_.beginPath(),_.arc(j.x,j.y,M,0,2*Math.PI,!1),_.fill())}),D&&(w.__photons=w.__photons.filter(function(L){return!L.__singleHop||L.__progressRatio<=1}))}}}),_.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:L$().force("link",A$()).force("charge",V$()).force("center",Pz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Tb(e.graphData.nodes,mt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Tb(e.graphData.links,mt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(m){m.source=m[e.linkSource],m.target=m[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(m){return m[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&w7(e.graphData,function(m){return m[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,Fr(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*x7*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return delete m[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),c=function(_){return(s[_[e.nodeId]]-o/2)*a*(u?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return m[d]=c(m)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?F$(function(m){var _=s[m[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-_:_)*a}).strength(function(m){return e.dagNodeFilter(m)?1:0}):null);for(var h=0;h<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);h++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function gC(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,u){r.forEach(function(c){return u[c][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var d=[];return r.forEach(function(h){var m=a[h],_=m[o].apply(m,u);_!==m&&d.push(_)}),d.length?d[0]:this}}}}var b7=800,E7=4,T7=5,yC=gC("forceGraph",Wd),I7=gC(["forceGraph","shadowGraph"],Wd),S7=Object.assign.apply(Object,Fr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return ih({},n,yC.linkProp(n))})).concat(Fr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return ih({},n,I7.linkProp(n))})))),k7=Object.assign.apply(Object,Fr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return ih({},n,yC.linkMethod(n))})));function tg(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Di(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function vC(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function Sb(n,e,r){n.save(),vC(n),n.clearRect(0,0,e,r),n.restore()}var C7=X0({props:ll({width:{default:window.innerWidth,onChange:function(e,r){return tg(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return tg(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},S7),aliases:{stopAnimation:"pauseAnimation"},methods:ll({graph2ScreenCoords:function(e,r,i){var s=Di(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Di(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new Q1(a()).to(o,s).easing(Ia.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var u=Di(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var c=u.x,d=u.y;e.zoom.translateTo(e.zoom.__baseElem,c===void 0?a().x:c,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new Q1({k:s()}).to({k:r},i).easing(Ia.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Di(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(c,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=mt(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[H1(o,function(a){return a.x-a.r}),q1(o,function(a){return a.x+a.r})],y:[H1(o,function(a){return a.y-a.r}),q1(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},k7),stateInit:function(){return{lastSetZoom:1,zoom:F8(),forceGraph:new Wd,shadowGraph:new Wd().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new uz,tweenGroup:new Uk}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var h=null,m=window.devicePixelRatio,_=l.x>0&&l.y>0?a.getImageData(l.x*m,l.y*m,1,1):null;return _&&(h=r.colorTracker.lookup(_.data)),h};Vr(r.canvas).call(QF().subject(function(){if(!r.enableNodeDrag)return null;var d=u();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var h=d.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},d.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var h=d.subject,m=h.__initialDragPos,_=d,w=Di(r.canvas).k,I={x:m.x+(_.x-m.x)/w-h.x,y:m.y+(_.y-m.y)/w-h.y};["x","y"].forEach(function(P){return h["f".concat(P)]=h[P]=m[P]+(_[P]-m[P])/w}),!(!h.__dragged&&T7>=Math.sqrt(B8(["x","y"].map(function(P){return Math.pow(d[P]-m[P],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,I))}).on("end",function(d){var h=d.subject,m=h.__initialDragPos,_={x:h.x-m.x,y:h.y-m.y};m.fx===void 0&&(h.fx=void 0),m.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,_))})),r.zoom(r.zoom.__baseElem=Vr(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||mt(r.enableZoomInteraction)(d))&&(d.type==="wheel"||mt(r.enablePanInteraction)(d))}).on("zoom",function(d){var h=d.transform;[o,a].forEach(function(m){vC(m),m.translate(h.x,h.y),m.scale(h.k,h.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(ll(ll({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(ll(ll({},d.transform),i.centerAt()))}),tg(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Di(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=E7/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Nz(s),["pointermove","pointerdown"].forEach(function(d){return s.addEventListener(d,function(h){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(w){return Math.abs(w)>1}))&&(r.isPointerDragging=!0);var m=_(s);l.x=h.pageX-m.left,l.y=h.pageY-m.top;function _(w){var I=w.getBoundingClientRect(),P=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:I.top+b,left:I.left+P}}},{passive:!0})}),s.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"Click")];m&&m.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(d.button===2)if(r.hoverObj){var _=r["on".concat(r.hoverObj.type,"RightClick")];_&&_.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})}},{passive:!0}),s.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var c=gU(function(){Sb(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return mt(r.linkWidth)(h)+r.linkHoverPrecision});var d=Di(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},b7);r.flushShadowCanvas=c.flush,(this._animationCycle=function d(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(N){return N.__photons&&N.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var m=r.isPointerDragging?null:u();if(m!==r.hoverObj){var _=r.hoverObj,w=_?_.type:null,I=m?m.type:null;if(w&&w!==I){var P=r["on".concat(w,"Hover")];P&&P(null,_.d)}if(I){var b=r["on".concat(I,"Hover")];b&&b(m.d,w===I?_.d:null)}r.tooltip.content(m&&mt(r["".concat(m.type.toLowerCase(),"Label")])(m.d)||null),r.canvas.classList[(m&&r["on".concat(I,"Click")]||!m&&r.onBackgroundClick)&&mt(r.showPointerCursor)(m==null?void 0:m.d)?"add":"remove"]("clickable"),r.hoverObj=m}h&&c()}if(h){Sb(o,r.width,r.height);var T=Di(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,T),r.forceGraph.globalScale(T).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,T)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(e){}}),_C={exports:{}},A7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N7=A7,P7=N7;function wC(){}function xC(){}xC.resetWarningCache=wC;var R7=function(){function n(i,s,o,a,l,u){if(u!==P7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xC,resetWarningCache:wC};return r.PropTypes=r,r};_C.exports=R7();var O7=_C.exports;const J=Gd(O7),Hp={width:J.number,height:J.number,graphData:J.shape({nodes:J.arrayOf(J.object).isRequired,links:J.arrayOf(J.object).isRequired}),backgroundColor:J.string,nodeRelSize:J.number,nodeId:J.string,nodeLabel:J.oneOfType([J.string,J.func]),nodeVal:J.oneOfType([J.number,J.string,J.func]),nodeVisibility:J.oneOfType([J.bool,J.string,J.func]),nodeColor:J.oneOfType([J.string,J.func]),nodeAutoColorBy:J.oneOfType([J.string,J.func]),onNodeHover:J.func,onNodeClick:J.func,linkSource:J.string,linkTarget:J.string,linkLabel:J.oneOfType([J.string,J.func]),linkVisibility:J.oneOfType([J.bool,J.string,J.func]),linkColor:J.oneOfType([J.string,J.func]),linkAutoColorBy:J.oneOfType([J.string,J.func]),linkWidth:J.oneOfType([J.number,J.string,J.func]),linkCurvature:J.oneOfType([J.number,J.string,J.func]),linkDirectionalArrowLength:J.oneOfType([J.number,J.string,J.func]),linkDirectionalArrowColor:J.oneOfType([J.string,J.func]),linkDirectionalArrowRelPos:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticles:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleSpeed:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleOffset:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleWidth:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleColor:J.oneOfType([J.string,J.func]),onLinkHover:J.func,onLinkClick:J.func,dagMode:J.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:J.number,dagNodeFilter:J.func,onDagError:J.func,d3AlphaMin:J.number,d3AlphaDecay:J.number,d3VelocityDecay:J.number,warmupTicks:J.number,cooldownTicks:J.number,cooldownTime:J.number,onEngineTick:J.func,onEngineStop:J.func,getGraphBbox:J.func},bC={zoomToFit:J.func,onNodeRightClick:J.func,onNodeDrag:J.func,onNodeDragEnd:J.func,onLinkRightClick:J.func,linkHoverPrecision:J.number,onBackgroundClick:J.func,onBackgroundRightClick:J.func,showPointerCursor:J.oneOfType([J.bool,J.func]),enablePointerInteraction:J.bool,enableNodeDrag:J.bool},s_={showNavInfo:J.bool,nodeOpacity:J.number,nodeResolution:J.number,nodeThreeObject:J.oneOfType([J.object,J.string,J.func]),nodeThreeObjectExtend:J.oneOfType([J.bool,J.string,J.func]),nodePositionUpdate:J.func,linkOpacity:J.number,linkResolution:J.number,linkCurveRotation:J.oneOfType([J.number,J.string,J.func]),linkMaterial:J.oneOfType([J.object,J.string,J.func]),linkThreeObject:J.oneOfType([J.object,J.string,J.func]),linkThreeObjectExtend:J.oneOfType([J.bool,J.string,J.func]),linkPositionUpdate:J.func,linkDirectionalArrowResolution:J.number,linkDirectionalParticleResolution:J.number,linkDirectionalParticleThreeObject:J.oneOfType([J.object,J.string,J.func]),forceEngine:J.oneOf(["d3","ngraph"]),ngraphPhysics:J.object,numDimensions:J.oneOf([1,2,3])},j7=Object.assign({},Hp,bC,{linkLineDash:J.oneOfType([J.arrayOf(J.number),J.string,J.func]),nodeCanvasObjectMode:J.oneOfType([J.string,J.func]),nodeCanvasObject:J.func,nodePointerAreaPaint:J.func,linkCanvasObjectMode:J.oneOfType([J.string,J.func]),linkCanvasObject:J.func,linkPointerAreaPaint:J.func,linkDirectionalParticleCanvasObject:J.func,autoPauseRedraw:J.bool,minZoom:J.number,maxZoom:J.number,enableZoomInteraction:J.oneOfType([J.bool,J.func]),enablePanInteraction:J.oneOfType([J.bool,J.func]),onZoom:J.func,onZoomEnd:J.func,onRenderFramePre:J.func,onRenderFramePost:J.func});Object.assign({},Hp,bC,s_,{enableNavigationControls:J.bool,controlType:J.oneOf(["trackball","orbit","fly"]),rendererConfig:J.object,extraRenderers:J.arrayOf(J.shape({render:J.func.isRequired}))});Object.assign({},Hp,s_,{nodeDesc:J.oneOfType([J.string,J.func]),linkDesc:J.oneOfType([J.string,J.func])});Object.assign({},Hp,s_,{markerAttrs:J.object,yOffset:J.number,glScale:J.number});const o_=aV(C7,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});o_.displayName="ForceGraph2D";o_.propTypes=j7;const D7=()=>{const{contacts:n,userProfile:e,updateContactPosition:r}=zo(),i=Vo(),s=de.useRef(),[o,a]=de.useState({width:window.innerWidth,height:window.innerHeight}),[l,u]=de.useState(""),c=de.useMemo(()=>["",...(e==null?void 0:e.categories)||["","","","",""]],[e]);de.useEffect(()=>{const h=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const d=de.useMemo(()=>{if(!n)return{nodes:[],links:[]};const h=l===""?n:n.filter(w=>(w.tags||[]).includes(l)),m=h.map(w=>{let I="#10b981";w.importance>80||(w.tags||[]).includes("")?I="#fbbf24":(w.tags||[]).includes("")?I="#f87171":(w.tags||[]).includes("")?I="#60a5fa":(w.tags||[]).includes("")&&(I="#a78bfa");const P={id:w.id,name:w.name,val:(w.importance||50)/2,tags:w.tags||[],color:I};return w.position&&(P.fx=w.position.x,P.fy=w.position.y),P}),_=[];for(let w=0;w<h.length;w++)for(let I=w+1;I<h.length;I++){const P=h[w],b=h[I],T=(P.tags||[]).filter(N=>(b.tags||[]).includes(N));if(T.length>0){const N=T[0];let O="rgba(255, 255, 255, 0.08)";N===""?O="rgba(251, 191, 36, 0.2)":N===""?O="rgba(248, 113, 113, 0.2)":N===""?O="rgba(96, 165, 250, 0.2)":N===""&&(O="rgba(167, 139, 250, 0.2)"),_.push({source:P.id,target:b.id,value:T.length*2,color:O,label:T.join(", ")})}}return{nodes:m,links:_}},[n,l]);return y.jsxs("div",{className:"w-full h-full bg-[#0a0a0c] relative overflow-hidden",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 px-6 pt-12 pb-8 bg-gradient-to-b from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black text-white",children:""}),y.jsx("p",{className:"text-white/40 text-[10px] font-black tracking-[0.2em] uppercase mt-0.5",children:"Social Network Analysis"})]}),y.jsx("button",{onClick:()=>i(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}),y.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:c.map(h=>y.jsx("button",{onClick:()=>u(h),className:`flex h-8 shrink-0 items-center justify-center rounded-lg px-4 transition-all duration-300 border text-[10px] font-black uppercase tracking-wider ${l===h?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:border-white/10"}`,children:h},h))})]}),y.jsx("div",{className:"w-full h-full",children:y.jsx(o_,{ref:s,graphData:d,width:o.width,height:o.height,backgroundColor:"#0a0a0c",nodeLabel:"name",nodeRelSize:4,linkColor:h=>h.color,linkWidth:h=>h.value,onNodeClick:h=>i(`/profile/${h.id}`),onNodeDragEnd:h=>{h.fx=h.x,h.fy=h.y,r(h.id,{x:h.x,y:h.y})},enableNodeDrag:!0,cooldownTicks:100,d3AlphaDecay:.01,d3VelocityDecay:.1,d3Force:(h,m)=>{h==="charge"&&m.strength(-150),h==="link"&&m.distance(50)},linkCanvasObject:(h,m,_)=>{const I=h.target.x-h.source.x,P=h.target.y-h.source.y;Math.sqrt(I*I+P*P)>150||(m.beginPath(),m.strokeStyle=h.color,m.lineWidth=h.value/_,m.moveTo(h.source.x,h.source.y),m.lineTo(h.target.x,h.target.y),m.stroke())},nodeCanvasObject:(h,m,_)=>{const w=h.name,I=11/_;m.font=`bold ${I}px "Inter", sans-serif`,m.shadowColor=h.color,m.shadowBlur=10/_,m.fillStyle=h.color,m.beginPath(),m.arc(h.x,h.y,4,0,2*Math.PI,!1),m.fill(),m.shadowBlur=0,m.textAlign="center",m.textBaseline="middle",m.fillStyle="rgba(255, 255, 255, 0.8)",m.fillText(w,h.x,h.y+10/_)}})}),y.jsx("div",{className:"absolute bottom-32 left-6 right-6 p-4 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md z-10",children:y.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-[9px] font-black text-white/30 uppercase tracking-[0.15em]",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#fbbf24] shadow-[0_0_8px_rgba(251,191,36,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#f87171] shadow-[0_0_8px_rgba(248,113,113,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#60a5fa] shadow-[0_0_8px_rgba(96,149,250,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#a78bfa] shadow-[0_0_8px_rgba(167,139,250,0.5)]"}),y.jsx("span",{children:" / "})]})]})}),y.jsx("div",{className:"absolute bottom-44 right-6 flex flex-col gap-2 z-10",children:y.jsx("button",{onClick:()=>s.current.zoomToFit(400),className:"size-12 rounded-2xl bg-white/5 border border-white/10 text-white/40 flex items-center justify-center hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"zoom_in_map"})})})]})},M7=()=>{const n=Vo(),e=Bv(),{unsavedChanges:r,setUnsavedChanges:i}=zo(),s=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"graph",icon:"hub",label:"",path:"/graph"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}],o=a=>{e.pathname!==a&&(r?window.confirm("")&&(i(!1),n(a),navigator.vibrate&&navigator.vibrate(5)):(n(a),navigator.vibrate&&navigator.vibrate(5)))};return y.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-4 pb-6 pointer-events-none",children:y.jsx("div",{className:"glass-panel rounded-[28px] h-20 flex items-center justify-around px-2 pointer-events-auto",children:s.map(a=>{const l=e.pathname===a.path;return y.jsxs("button",{onClick:()=>o(a.path),className:`flex flex-col items-center justify-center gap-1.5 transition-all duration-500 relative group w-16 ${l?"text-primary":"text-white/20 hover:text-white/40"}`,children:[y.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${l?"scale-110 -translate-y-1":"scale-100"}`,children:[l&&y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150"}),y.jsx("span",{className:`material-symbols-outlined text-[26px] relative z-10 ${l?"font-black":""}`,children:a.icon})]}),y.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.15em] transition-all duration-500 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.label}),l&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary-color-rgb),0.8)]"})]},a.id)})})})},L7=({children:n})=>y.jsxs("div",{className:"bg-nexus min-h-screen text-white font-sans selection:bg-primary/30 overflow-x-hidden",children:[y.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative",children:y.jsx("div",{className:"flex-1 px-4 pt-6 pb-32",children:n})}),y.jsx(M7,{})]});function V7(){return y.jsx(D6,{children:y.jsx(YP,{children:y.jsxs(Nw,{children:[y.jsx(Oi,{path:"/p/:uid",element:y.jsx($6,{})}),y.jsx(Oi,{path:"/*",element:y.jsx(L7,{children:y.jsxs(Nw,{children:[y.jsx(Oi,{path:"/",element:y.jsx(M6,{})}),y.jsx(Oi,{path:"/search",element:y.jsx(L6,{})}),y.jsx(Oi,{path:"/profile/:id",element:y.jsx(V6,{})}),y.jsx(Oi,{path:"/stealth",element:y.jsx(F6,{})}),y.jsx(Oi,{path:"/settings",element:y.jsx(z6,{})}),y.jsx(Oi,{path:"/vault",element:y.jsx(U6,{})}),y.jsx(Oi,{path:"/graph",element:y.jsx(D7,{})})]})})})]})})})}ng.createRoot(document.getElementById("root")).render(y.jsx(wt.StrictMode,{children:y.jsx(V7,{})}));
