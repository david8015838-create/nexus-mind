function Vb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function em(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lw={exports:{}},Uh={},uw={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),Lb=Symbol.for("react.portal"),Mb=Symbol.for("react.fragment"),Fb=Symbol.for("react.strict_mode"),Ub=Symbol.for("react.profiler"),Bb=Symbol.for("react.provider"),zb=Symbol.for("react.context"),$b=Symbol.for("react.forward_ref"),Kb=Symbol.for("react.suspense"),qb=Symbol.for("react.memo"),Wb=Symbol.for("react.lazy"),iy=Symbol.iterator;function Hb(t){return t===null||typeof t!="object"?null:(t=iy&&t[iy]||t["@@iterator"],typeof t=="function"?t:null)}var cw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hw=Object.assign,dw={};function Ba(t,e,n){this.props=t,this.context=e,this.refs=dw,this.updater=n||cw}Ba.prototype.isReactComponent={};Ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fw(){}fw.prototype=Ba.prototype;function tm(t,e,n){this.props=t,this.context=e,this.refs=dw,this.updater=n||cw}var nm=tm.prototype=new fw;nm.constructor=tm;hw(nm,Ba.prototype);nm.isPureReactComponent=!0;var sy=Array.isArray,pw=Object.prototype.hasOwnProperty,rm={current:null},mw={key:!0,ref:!0,__self:!0,__source:!0};function gw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)pw.call(e,r)&&!mw.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var h=Array(u),d=0;d<u;d++)h[d]=arguments[d+2];i.children=h}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Tu,type:t,key:s,ref:o,props:i,_owner:rm.current}}function Gb(t,e){return{$$typeof:Tu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function im(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tu}function Qb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var oy=/\/+/g;function Md(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qb(""+t.key):e.toString(36)}function Sc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tu:case Lb:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Md(o,0):r,sy(i)?(n="",t!=null&&(n=t.replace(oy,"$&/")+"/"),Sc(i,e,n,"",function(d){return d})):i!=null&&(im(i)&&(i=Gb(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(oy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",sy(t))for(var u=0;u<t.length;u++){s=t[u];var h=r+Md(s,u);o+=Sc(s,e,n,h,i)}else if(h=Hb(t),typeof h=="function")for(t=h.call(t),u=0;!(s=t.next()).done;)s=s.value,h=r+Md(s,u++),o+=Sc(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nc(t,e,n){if(t==null)return t;var r=[],i=0;return Sc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Yb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _n={current:null},kc={transition:null},Jb={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:kc,ReactCurrentOwner:rm};function yw(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:nc,forEach:function(t,e,n){nc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nc(t,function(){e++}),e},toArray:function(t){return nc(t,function(e){return e})||[]},only:function(t){if(!im(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Ba;$e.Fragment=Mb;$e.Profiler=Ub;$e.PureComponent=tm;$e.StrictMode=Fb;$e.Suspense=Kb;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jb;$e.act=yw;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)pw.call(e,h)&&!mw.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){u=Array(h);for(var d=0;d<h;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Tu,type:t.type,key:i,ref:s,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:zb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bb,_context:t},t.Consumer=t};$e.createElement=gw;$e.createFactory=function(t){var e=gw.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:$b,render:t}};$e.isValidElement=im;$e.lazy=function(t){return{$$typeof:Wb,_payload:{_status:-1,_result:t},_init:Yb}};$e.memo=function(t,e){return{$$typeof:qb,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=kc.transition;kc.transition={};try{t()}finally{kc.transition=e}};$e.unstable_act=yw;$e.useCallback=function(t,e){return _n.current.useCallback(t,e)};$e.useContext=function(t){return _n.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return _n.current.useDeferredValue(t)};$e.useEffect=function(t,e){return _n.current.useEffect(t,e)};$e.useId=function(){return _n.current.useId()};$e.useImperativeHandle=function(t,e,n){return _n.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return _n.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return _n.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return _n.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return _n.current.useReducer(t,e,n)};$e.useRef=function(t){return _n.current.useRef(t)};$e.useState=function(t){return _n.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return _n.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return _n.current.useTransition()};$e.version="18.3.1";uw.exports=$e;var he=uw.exports;const Yi=em(he),Xb=Vb({__proto__:null,default:Yi},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zb=he,eT=Symbol.for("react.element"),tT=Symbol.for("react.fragment"),nT=Object.prototype.hasOwnProperty,rT=Zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iT={key:!0,ref:!0,__self:!0,__source:!0};function vw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nT.call(e,r)&&!iT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eT,type:t,key:s,ref:o,props:i,_owner:rT.current}}Uh.Fragment=tT;Uh.jsx=vw;Uh.jsxs=vw;lw.exports=Uh;var m=lw.exports,Nf={},_w={exports:{}},Un={},ww={exports:{}},xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,Y){var Z=re.length;re.push(Y);e:for(;0<Z;){var ue=Z-1>>>1,Ee=re[ue];if(0<i(Ee,Y))re[ue]=Y,re[Z]=Ee,Z=ue;else break e}}function n(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var Y=re[0],Z=re.pop();if(Z!==Y){re[0]=Z;e:for(var ue=0,Ee=re.length,ae=Ee>>>1;ue<ae;){var me=2*(ue+1)-1,Ne=re[me],Re=me+1,Fe=re[Re];if(0>i(Ne,Z))Re<Ee&&0>i(Fe,Ne)?(re[ue]=Fe,re[Re]=Z,ue=Re):(re[ue]=Ne,re[me]=Z,ue=me);else if(Re<Ee&&0>i(Fe,Z))re[ue]=Fe,re[Re]=Z,ue=Re;else break e}}return Y}function i(re,Y){var Z=re.sortIndex-Y.sortIndex;return Z!==0?Z:re.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var h=[],d=[],y=1,_=null,w=3,P=!1,M=!1,z=!1,G=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(re){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=re)r(d),Y.sortIndex=Y.expirationTime,e(h,Y);else break;Y=n(d)}}function ee(re){if(z=!1,O(re),!M)if(n(h)!==null)M=!0,qt(X);else{var Y=n(d);Y!==null&&hn(ee,Y.startTime-re)}}function X(re,Y){M=!1,z&&(z=!1,D(I),I=-1),P=!0;var Z=w;try{for(O(Y),_=n(h);_!==null&&(!(_.expirationTime>Y)||re&&!N());){var ue=_.callback;if(typeof ue=="function"){_.callback=null,w=_.priorityLevel;var Ee=ue(_.expirationTime<=Y);Y=t.unstable_now(),typeof Ee=="function"?_.callback=Ee:_===n(h)&&r(h),O(Y)}else r(h);_=n(h)}if(_!==null)var ae=!0;else{var me=n(d);me!==null&&hn(ee,me.startTime-Y),ae=!1}return ae}finally{_=null,w=Z,P=!1}}var se=!1,C=null,I=-1,R=5,S=-1;function N(){return!(t.unstable_now()-S<R)}function B(){if(C!==null){var re=t.unstable_now();S=re;var Y=!0;try{Y=C(!0,re)}finally{Y?A():(se=!1,C=null)}}else se=!1}var A;if(typeof b=="function")A=function(){b(B)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,dt=Xe.port2;Xe.port1.onmessage=B,A=function(){dt.postMessage(null)}}else A=function(){G(B,0)};function qt(re){C=re,se||(se=!0,A())}function hn(re,Y){I=G(function(){re(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){M||P||(M=!0,qt(X))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(re){switch(w){case 1:case 2:case 3:var Y=3;break;default:Y=w}var Z=w;w=Y;try{return re()}finally{w=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,Y){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Z=w;w=re;try{return Y()}finally{w=Z}},t.unstable_scheduleCallback=function(re,Y,Z){var ue=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ue+Z:ue):Z=ue,re){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Z+Ee,re={id:y++,callback:Y,priorityLevel:re,startTime:Z,expirationTime:Ee,sortIndex:-1},Z>ue?(re.sortIndex=Z,e(d,re),n(h)===null&&re===n(d)&&(z?(D(I),I=-1):z=!0,hn(ee,Z-ue))):(re.sortIndex=Ee,e(h,re),M||P||(M=!0,qt(X))),re},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(re){var Y=w;return function(){var Z=w;w=Y;try{return re.apply(this,arguments)}finally{w=Z}}}})(xw);ww.exports=xw;var sT=ww.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT=he,Fn=sT;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ew=new Set,Yl={};function So(t,e){Sa(t,e),Sa(t+"Capture",e)}function Sa(t,e){for(Yl[t]=e,t=0;t<e.length;t++)Ew.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rf=Object.prototype.hasOwnProperty,aT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ay={},ly={};function lT(t){return Rf.call(ly,t)?!0:Rf.call(ay,t)?!1:aT.test(t)?ly[t]=!0:(ay[t]=!0,!1)}function uT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cT(t,e,n,r){if(e===null||typeof e>"u"||uT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sm,om);Yt[e]=new wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sm,om);Yt[e]=new wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sm,om);Yt[e]=new wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new wn(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,r){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cT(e,n,i,r)&&(n=null),r||i===null?lT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ni=oT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rc=Symbol.for("react.element"),ta=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Df=Symbol.for("react.profiler"),bw=Symbol.for("react.provider"),Tw=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),jf=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),Iw=Symbol.for("react.offscreen"),uy=Symbol.iterator;function yl(t){return t===null||typeof t!="object"?null:(t=uy&&t[uy]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Fd;function kl(t){if(Fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fd=e&&e[1]||""}return`
`+Fd+t}var Ud=!1;function Bd(t,e){if(!t||Ud)return"";Ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,u=s.length-1;1<=o&&0<=u&&i[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||i[o]!==s[u]){var h=`
`+i[o].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=o&&0<=u);break}}}finally{Ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kl(t):""}function hT(t){switch(t.tag){case 5:return kl(t.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return t=Bd(t.type,!1),t;case 11:return t=Bd(t.type.render,!1),t;case 1:return t=Bd(t.type,!0),t;default:return""}}function Vf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case na:return"Fragment";case ta:return"Portal";case Df:return"Profiler";case lm:return"StrictMode";case Of:return"Suspense";case jf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tw:return(t.displayName||"Context")+".Consumer";case bw:return(t._context.displayName||"Context")+".Provider";case um:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cm:return e=t.displayName||null,e!==null?e:Vf(t.type)||"Memo";case Gi:e=t._payload,t=t._init;try{return Vf(t(e))}catch{}}return null}function dT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vf(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fT(t){var e=Sw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ic(t){t._valueTracker||(t._valueTracker=fT(t))}function kw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lf(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cw(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function Mf(t,e){Cw(t,e);var n=vs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ff(t,e.type,vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ff(t,e,n){(e!=="number"||Gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cl=Array.isArray;function fa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Uf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(Cl(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vs(n)}}function Aw(t,e){var n=vs(e.value),r=vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sc,Nw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sc=sc||document.createElement("div"),sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pT=["Webkit","ms","Moz","O"];Object.keys(jl).forEach(function(t){pT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jl[e]=jl[t]})});function Rw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jl.hasOwnProperty(t)&&jl[t]?(""+e).trim():e+"px"}function Dw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Rw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mT=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zf(t,e){if(e){if(mT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function $f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kf=null;function hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qf=null,pa=null,ma=null;function py(t){if(t=ku(t)){if(typeof qf!="function")throw Error(de(280));var e=t.stateNode;e&&(e=qh(e),qf(t.stateNode,t.type,e))}}function Ow(t){pa?ma?ma.push(t):ma=[t]:pa=t}function jw(){if(pa){var t=pa,e=ma;if(ma=pa=null,py(t),e)for(t=0;t<e.length;t++)py(e[t])}}function Vw(t,e){return t(e)}function Lw(){}var zd=!1;function Mw(t,e,n){if(zd)return t(e,n);zd=!0;try{return Vw(t,e,n)}finally{zd=!1,(pa!==null||ma!==null)&&(Lw(),jw())}}function Xl(t,e){var n=t.stateNode;if(n===null)return null;var r=qh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var Wf=!1;if(bi)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{Wf=!1}function gT(t,e,n,r,i,s,o,u,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(y){this.onError(y)}}var Vl=!1,Qc=null,Yc=!1,Hf=null,yT={onError:function(t){Vl=!0,Qc=t}};function vT(t,e,n,r,i,s,o,u,h){Vl=!1,Qc=null,gT.apply(yT,arguments)}function _T(t,e,n,r,i,s,o,u,h){if(vT.apply(this,arguments),Vl){if(Vl){var d=Qc;Vl=!1,Qc=null}else throw Error(de(198));Yc||(Yc=!0,Hf=d)}}function ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function my(t){if(ko(t)!==t)throw Error(de(188))}function wT(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return my(i),t;if(s===r)return my(i),e;s=s.sibling}throw Error(de(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function Uw(t){return t=wT(t),t!==null?Bw(t):null}function Bw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bw(t);if(e!==null)return e;t=t.sibling}return null}var zw=Fn.unstable_scheduleCallback,gy=Fn.unstable_cancelCallback,xT=Fn.unstable_shouldYield,ET=Fn.unstable_requestPaint,It=Fn.unstable_now,bT=Fn.unstable_getCurrentPriorityLevel,dm=Fn.unstable_ImmediatePriority,$w=Fn.unstable_UserBlockingPriority,Jc=Fn.unstable_NormalPriority,TT=Fn.unstable_LowPriority,Kw=Fn.unstable_IdlePriority,Bh=null,Hr=null;function IT(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(Bh,t,void 0,(t.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:CT,ST=Math.log,kT=Math.LN2;function CT(t){return t>>>=0,t===0?32:31-(ST(t)/kT|0)|0}var oc=64,ac=4194304;function Al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~i;u!==0?r=Al(u):(s&=o,s!==0&&(r=Al(s)))}else o=n&~i,o!==0?r=Al(o):s!==0&&(r=Al(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-br(e),i=1<<n,r|=t[n],e&=~i;return r}function AT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-br(s),u=1<<o,h=i[o];h===-1?(!(u&n)||u&r)&&(i[o]=AT(u,e)):h<=e&&(t.expiredLanes|=u),s&=~u}}function Gf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qw(){var t=oc;return oc<<=1,!(oc&4194240)&&(oc=64),t}function $d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-br(e),t[e]=n}function NT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-br(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-br(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var rt=0;function Ww(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,pm,Gw,Qw,Yw,Qf=!1,lc=[],os=null,as=null,ls=null,Zl=new Map,eu=new Map,Ji=[],RT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yy(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Zl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(e.pointerId)}}function _l(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ku(e),e!==null&&pm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DT(t,e,n,r,i){switch(e){case"focusin":return os=_l(os,t,e,n,r,i),!0;case"dragenter":return as=_l(as,t,e,n,r,i),!0;case"mouseover":return ls=_l(ls,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zl.set(s,_l(Zl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,eu.set(s,_l(eu.get(s)||null,t,e,n,r,i)),!0}return!1}function Jw(t){var e=io(t.target);if(e!==null){var n=ko(e);if(n!==null){if(e=n.tag,e===13){if(e=Fw(n),e!==null){t.blockedOn=e,Yw(t.priority,function(){Gw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kf=r,n.target.dispatchEvent(r),Kf=null}else return e=ku(n),e!==null&&pm(e),t.blockedOn=n,!1;e.shift()}return!0}function vy(t,e,n){Cc(t)&&n.delete(e)}function OT(){Qf=!1,os!==null&&Cc(os)&&(os=null),as!==null&&Cc(as)&&(as=null),ls!==null&&Cc(ls)&&(ls=null),Zl.forEach(vy),eu.forEach(vy)}function wl(t,e){t.blockedOn===e&&(t.blockedOn=null,Qf||(Qf=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,OT)))}function tu(t){function e(i){return wl(i,t)}if(0<lc.length){wl(lc[0],t);for(var n=1;n<lc.length;n++){var r=lc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(os!==null&&wl(os,t),as!==null&&wl(as,t),ls!==null&&wl(ls,t),Zl.forEach(e),eu.forEach(e),n=0;n<Ji.length;n++)r=Ji[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ji.length&&(n=Ji[0],n.blockedOn===null);)Jw(n),n.blockedOn===null&&Ji.shift()}var ga=Ni.ReactCurrentBatchConfig,Zc=!0;function jT(t,e,n,r){var i=rt,s=ga.transition;ga.transition=null;try{rt=1,mm(t,e,n,r)}finally{rt=i,ga.transition=s}}function VT(t,e,n,r){var i=rt,s=ga.transition;ga.transition=null;try{rt=4,mm(t,e,n,r)}finally{rt=i,ga.transition=s}}function mm(t,e,n,r){if(Zc){var i=Yf(t,e,n,r);if(i===null)Zd(t,e,r,eh,n),yy(t,r);else if(DT(i,t,e,n,r))r.stopPropagation();else if(yy(t,r),e&4&&-1<RT.indexOf(t)){for(;i!==null;){var s=ku(i);if(s!==null&&Hw(s),s=Yf(t,e,n,r),s===null&&Zd(t,e,r,eh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Zd(t,e,r,null,n)}}var eh=null;function Yf(t,e,n,r){if(eh=null,t=hm(r),t=io(t),t!==null)if(e=ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eh=t,null}function Xw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bT()){case dm:return 1;case $w:return 4;case Jc:case TT:return 16;case Kw:return 536870912;default:return 16}default:return 16}}var ns=null,gm=null,Ac=null;function Zw(){if(Ac)return Ac;var t,e=gm,n=e.length,r,i="value"in ns?ns.value:ns.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ac=i.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uc(){return!0}function _y(){return!1}function Bn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?uc:_y,this.isPropagationStopped=_y,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uc)},persist:function(){},isPersistent:uc}),e}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ym=Bn(za),Su=yt({},za,{view:0,detail:0}),LT=Bn(Su),Kd,qd,xl,zh=yt({},Su,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xl&&(xl&&t.type==="mousemove"?(Kd=t.screenX-xl.screenX,qd=t.screenY-xl.screenY):qd=Kd=0,xl=t),Kd)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),wy=Bn(zh),MT=yt({},zh,{dataTransfer:0}),FT=Bn(MT),UT=yt({},Su,{relatedTarget:0}),Wd=Bn(UT),BT=yt({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),zT=Bn(BT),$T=yt({},za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KT=Bn($T),qT=yt({},za,{data:0}),xy=Bn(qT),WT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GT[t])?!!e[t]:!1}function vm(){return QT}var YT=yt({},Su,{key:function(t){if(t.key){var e=WT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vm,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JT=Bn(YT),XT=yt({},zh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=Bn(XT),ZT=yt({},Su,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vm}),eI=Bn(ZT),tI=yt({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),nI=Bn(tI),rI=yt({},zh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iI=Bn(rI),sI=[9,13,27,32],_m=bi&&"CompositionEvent"in window,Ll=null;bi&&"documentMode"in document&&(Ll=document.documentMode);var oI=bi&&"TextEvent"in window&&!Ll,e0=bi&&(!_m||Ll&&8<Ll&&11>=Ll),by=" ",Ty=!1;function t0(t,e){switch(t){case"keyup":return sI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ra=!1;function aI(t,e){switch(t){case"compositionend":return n0(e);case"keypress":return e.which!==32?null:(Ty=!0,by);case"textInput":return t=e.data,t===by&&Ty?null:t;default:return null}}function lI(t,e){if(ra)return t==="compositionend"||!_m&&t0(t,e)?(t=Zw(),Ac=gm=ns=null,ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e0&&e.locale!=="ko"?null:e.data;default:return null}}var uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uI[t.type]:e==="textarea"}function r0(t,e,n,r){Ow(r),e=th(e,"onChange"),0<e.length&&(n=new ym("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ml=null,nu=null;function cI(t){p0(t,0)}function $h(t){var e=oa(t);if(kw(e))return t}function hI(t,e){if(t==="change")return e}var i0=!1;if(bi){var Hd;if(bi){var Gd="oninput"in document;if(!Gd){var Sy=document.createElement("div");Sy.setAttribute("oninput","return;"),Gd=typeof Sy.oninput=="function"}Hd=Gd}else Hd=!1;i0=Hd&&(!document.documentMode||9<document.documentMode)}function ky(){Ml&&(Ml.detachEvent("onpropertychange",s0),nu=Ml=null)}function s0(t){if(t.propertyName==="value"&&$h(nu)){var e=[];r0(e,nu,t,hm(t)),Mw(cI,e)}}function dI(t,e,n){t==="focusin"?(ky(),Ml=e,nu=n,Ml.attachEvent("onpropertychange",s0)):t==="focusout"&&ky()}function fI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $h(nu)}function pI(t,e){if(t==="click")return $h(e)}function mI(t,e){if(t==="input"||t==="change")return $h(e)}function gI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:gI;function ru(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rf.call(e,i)||!kr(t[i],e[i]))return!1}return!0}function Cy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Cy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cy(n)}}function o0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?o0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a0(){for(var t=window,e=Gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gc(t.document)}return e}function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yI(t){var e=a0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&o0(n.ownerDocument.documentElement,n)){if(r!==null&&wm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ay(n,s);var o=Ay(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vI=bi&&"documentMode"in document&&11>=document.documentMode,ia=null,Jf=null,Fl=null,Xf=!1;function Py(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xf||ia==null||ia!==Gc(r)||(r=ia,"selectionStart"in r&&wm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fl&&ru(Fl,r)||(Fl=r,r=th(Jf,"onSelect"),0<r.length&&(e=new ym("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ia)))}function cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sa={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionend:cc("Transition","TransitionEnd")},Qd={},l0={};bi&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function Kh(t){if(Qd[t])return Qd[t];if(!sa[t])return t;var e=sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l0)return Qd[t]=e[n];return t}var u0=Kh("animationend"),c0=Kh("animationiteration"),h0=Kh("animationstart"),d0=Kh("transitionend"),f0=new Map,Ny="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){f0.set(t,e),So(e,[t])}for(var Yd=0;Yd<Ny.length;Yd++){var Jd=Ny[Yd],_I=Jd.toLowerCase(),wI=Jd[0].toUpperCase()+Jd.slice(1);Cs(_I,"on"+wI)}Cs(u0,"onAnimationEnd");Cs(c0,"onAnimationIteration");Cs(h0,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(d0,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));So("onBeforeInput",["compositionend","keypress","textInput","paste"]);So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pl));function Ry(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_T(r,e,void 0,t),t.currentTarget=null}function p0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],h=u.instance,d=u.currentTarget;if(u=u.listener,h!==s&&i.isPropagationStopped())break e;Ry(i,u,d),s=h}else for(o=0;o<r.length;o++){if(u=r[o],h=u.instance,d=u.currentTarget,u=u.listener,h!==s&&i.isPropagationStopped())break e;Ry(i,u,d),s=h}}}if(Yc)throw t=Hf,Yc=!1,Hf=null,t}function lt(t,e){var n=e[rp];n===void 0&&(n=e[rp]=new Set);var r=t+"__bubble";n.has(r)||(m0(e,t,2,!1),n.add(r))}function Xd(t,e,n){var r=0;e&&(r|=4),m0(n,t,r,e)}var hc="_reactListening"+Math.random().toString(36).slice(2);function iu(t){if(!t[hc]){t[hc]=!0,Ew.forEach(function(n){n!=="selectionchange"&&(xI.has(n)||Xd(n,!1,t),Xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hc]||(e[hc]=!0,Xd("selectionchange",!1,e))}}function m0(t,e,n,r){switch(Xw(e)){case 1:var i=jT;break;case 4:i=VT;break;default:i=mm}n=i.bind(null,e,n,t),i=void 0,!Wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Zd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;u!==null;){if(o=io(u),o===null)return;if(h=o.tag,h===5||h===6){r=s=o;continue e}u=u.parentNode}}r=r.return}Mw(function(){var d=s,y=hm(n),_=[];e:{var w=f0.get(t);if(w!==void 0){var P=ym,M=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":P=JT;break;case"focusin":M="focus",P=Wd;break;case"focusout":M="blur",P=Wd;break;case"beforeblur":case"afterblur":P=Wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=FT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=eI;break;case u0:case c0:case h0:P=zT;break;case d0:P=nI;break;case"scroll":P=LT;break;case"wheel":P=iI;break;case"copy":case"cut":case"paste":P=KT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Ey}var z=(e&4)!==0,G=!z&&t==="scroll",D=z?w!==null?w+"Capture":null:w;z=[];for(var b=d,O;b!==null;){O=b;var ee=O.stateNode;if(O.tag===5&&ee!==null&&(O=ee,D!==null&&(ee=Xl(b,D),ee!=null&&z.push(su(b,ee,O)))),G)break;b=b.return}0<z.length&&(w=new P(w,M,null,n,y),_.push({event:w,listeners:z}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",w&&n!==Kf&&(M=n.relatedTarget||n.fromElement)&&(io(M)||M[Ti]))break e;if((P||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,P?(M=n.relatedTarget||n.toElement,P=d,M=M?io(M):null,M!==null&&(G=ko(M),M!==G||M.tag!==5&&M.tag!==6)&&(M=null)):(P=null,M=d),P!==M)){if(z=wy,ee="onMouseLeave",D="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(z=Ey,ee="onPointerLeave",D="onPointerEnter",b="pointer"),G=P==null?w:oa(P),O=M==null?w:oa(M),w=new z(ee,b+"leave",P,n,y),w.target=G,w.relatedTarget=O,ee=null,io(y)===d&&(z=new z(D,b+"enter",M,n,y),z.target=O,z.relatedTarget=G,ee=z),G=ee,P&&M)t:{for(z=P,D=M,b=0,O=z;O;O=Yo(O))b++;for(O=0,ee=D;ee;ee=Yo(ee))O++;for(;0<b-O;)z=Yo(z),b--;for(;0<O-b;)D=Yo(D),O--;for(;b--;){if(z===D||D!==null&&z===D.alternate)break t;z=Yo(z),D=Yo(D)}z=null}else z=null;P!==null&&Dy(_,w,P,z,!1),M!==null&&G!==null&&Dy(_,G,M,z,!0)}}e:{if(w=d?oa(d):window,P=w.nodeName&&w.nodeName.toLowerCase(),P==="select"||P==="input"&&w.type==="file")var X=hI;else if(Iy(w))if(i0)X=mI;else{X=fI;var se=dI}else(P=w.nodeName)&&P.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(X=pI);if(X&&(X=X(t,d))){r0(_,X,n,y);break e}se&&se(t,w,d),t==="focusout"&&(se=w._wrapperState)&&se.controlled&&w.type==="number"&&Ff(w,"number",w.value)}switch(se=d?oa(d):window,t){case"focusin":(Iy(se)||se.contentEditable==="true")&&(ia=se,Jf=d,Fl=null);break;case"focusout":Fl=Jf=ia=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,Py(_,n,y);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":Py(_,n,y)}var C;if(_m)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ra?t0(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(e0&&n.locale!=="ko"&&(ra||I!=="onCompositionStart"?I==="onCompositionEnd"&&ra&&(C=Zw()):(ns=y,gm="value"in ns?ns.value:ns.textContent,ra=!0)),se=th(d,I),0<se.length&&(I=new xy(I,t,null,n,y),_.push({event:I,listeners:se}),C?I.data=C:(C=n0(n),C!==null&&(I.data=C)))),(C=oI?aI(t,n):lI(t,n))&&(d=th(d,"onBeforeInput"),0<d.length&&(y=new xy("onBeforeInput","beforeinput",null,n,y),_.push({event:y,listeners:d}),y.data=C))}p0(_,e)})}function su(t,e,n){return{instance:t,listener:e,currentTarget:n}}function th(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xl(t,n),s!=null&&r.unshift(su(t,s,i)),s=Xl(t,e),s!=null&&r.push(su(t,s,i))),t=t.return}return r}function Yo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var u=n,h=u.alternate,d=u.stateNode;if(h!==null&&h===r)break;u.tag===5&&d!==null&&(u=d,i?(h=Xl(n,s),h!=null&&o.unshift(su(n,h,u))):i||(h=Xl(n,s),h!=null&&o.push(su(n,h,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EI=/\r\n?/g,bI=/\u0000|\uFFFD/g;function Oy(t){return(typeof t=="string"?t:""+t).replace(EI,`
`).replace(bI,"")}function dc(t,e,n){if(e=Oy(e),Oy(t)!==e&&n)throw Error(de(425))}function nh(){}var Zf=null,ep=null;function tp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,TI=typeof clearTimeout=="function"?clearTimeout:void 0,jy=typeof Promise=="function"?Promise:void 0,II=typeof queueMicrotask=="function"?queueMicrotask:typeof jy<"u"?function(t){return jy.resolve(null).then(t).catch(SI)}:np;function SI(t){setTimeout(function(){throw t})}function ef(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),tu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);tu(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Wr="__reactFiber$"+$a,ou="__reactProps$"+$a,Ti="__reactContainer$"+$a,rp="__reactEvents$"+$a,kI="__reactListeners$"+$a,CI="__reactHandles$"+$a;function io(t){var e=t[Wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[Wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vy(t);t!==null;){if(n=t[Wr])return n;t=Vy(t)}return e}t=n,n=t.parentNode}return null}function ku(t){return t=t[Wr]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function qh(t){return t[ou]||null}var ip=[],aa=-1;function As(t){return{current:t}}function ht(t){0>aa||(t.current=ip[aa],ip[aa]=null,aa--)}function at(t,e){aa++,ip[aa]=t.current,t.current=e}var _s={},un=As(_s),Sn=As(!1),go=_s;function ka(t,e){var n=t.type.contextTypes;if(!n)return _s;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kn(t){return t=t.childContextTypes,t!=null}function rh(){ht(Sn),ht(un)}function Ly(t,e,n){if(un.current!==_s)throw Error(de(168));at(un,e),at(Sn,n)}function g0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(de(108,dT(t)||"Unknown",i));return yt({},n,r)}function ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_s,go=un.current,at(un,t),at(Sn,Sn.current),!0}function My(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=g0(t,e,go),r.__reactInternalMemoizedMergedChildContext=t,ht(Sn),ht(un),at(un,t)):ht(Sn),at(Sn,n)}var mi=null,Wh=!1,tf=!1;function y0(t){mi===null?mi=[t]:mi.push(t)}function AI(t){Wh=!0,y0(t)}function Ps(){if(!tf&&mi!==null){tf=!0;var t=0,e=rt;try{var n=mi;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mi=null,Wh=!1}catch(i){throw mi!==null&&(mi=mi.slice(t+1)),zw(dm,Ps),i}finally{rt=e,tf=!1}}return null}var la=[],ua=0,sh=null,oh=0,Qn=[],Yn=0,yo=null,yi=1,vi="";function eo(t,e){la[ua++]=oh,la[ua++]=sh,sh=t,oh=e}function v0(t,e,n){Qn[Yn++]=yi,Qn[Yn++]=vi,Qn[Yn++]=yo,yo=t;var r=yi;t=vi;var i=32-br(r)-1;r&=~(1<<i),n+=1;var s=32-br(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yi=1<<32-br(e)+i|n<<i|r,vi=s+t}else yi=1<<s|n<<i|r,vi=t}function xm(t){t.return!==null&&(eo(t,1),v0(t,1,0))}function Em(t){for(;t===sh;)sh=la[--ua],la[ua]=null,oh=la[--ua],la[ua]=null;for(;t===yo;)yo=Qn[--Yn],Qn[Yn]=null,vi=Qn[--Yn],Qn[Yn]=null,yi=Qn[--Yn],Qn[Yn]=null}var Ln=null,jn=null,ft=!1,wr=null;function _0(t,e){var n=Xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,jn=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yo!==null?{id:yi,overflow:vi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,jn=null,!0):!1;default:return!1}}function sp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function op(t){if(ft){var e=jn;if(e){var n=e;if(!Fy(t,e)){if(sp(t))throw Error(de(418));e=us(n.nextSibling);var r=Ln;e&&Fy(t,e)?_0(r,n):(t.flags=t.flags&-4097|2,ft=!1,Ln=t)}}else{if(sp(t))throw Error(de(418));t.flags=t.flags&-4097|2,ft=!1,Ln=t}}}function Uy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function fc(t){if(t!==Ln)return!1;if(!ft)return Uy(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tp(t.type,t.memoizedProps)),e&&(e=jn)){if(sp(t))throw w0(),Error(de(418));for(;e;)_0(t,e),e=us(e.nextSibling)}if(Uy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=Ln?us(t.stateNode.nextSibling):null;return!0}function w0(){for(var t=jn;t;)t=us(t.nextSibling)}function Ca(){jn=Ln=null,ft=!1}function bm(t){wr===null?wr=[t]:wr.push(t)}var PI=Ni.ReactCurrentBatchConfig;function El(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var u=i.refs;o===null?delete u[s]:u[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function pc(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function By(t){var e=t._init;return e(t._payload)}function x0(t){function e(D,b){if(t){var O=D.deletions;O===null?(D.deletions=[b],D.flags|=16):O.push(b)}}function n(D,b){if(!t)return null;for(;b!==null;)e(D,b),b=b.sibling;return null}function r(D,b){for(D=new Map;b!==null;)b.key!==null?D.set(b.key,b):D.set(b.index,b),b=b.sibling;return D}function i(D,b){return D=fs(D,b),D.index=0,D.sibling=null,D}function s(D,b,O){return D.index=O,t?(O=D.alternate,O!==null?(O=O.index,O<b?(D.flags|=2,b):O):(D.flags|=2,b)):(D.flags|=1048576,b)}function o(D){return t&&D.alternate===null&&(D.flags|=2),D}function u(D,b,O,ee){return b===null||b.tag!==6?(b=uf(O,D.mode,ee),b.return=D,b):(b=i(b,O),b.return=D,b)}function h(D,b,O,ee){var X=O.type;return X===na?y(D,b,O.props.children,ee,O.key):b!==null&&(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Gi&&By(X)===b.type)?(ee=i(b,O.props),ee.ref=El(D,b,O),ee.return=D,ee):(ee=Lc(O.type,O.key,O.props,null,D.mode,ee),ee.ref=El(D,b,O),ee.return=D,ee)}function d(D,b,O,ee){return b===null||b.tag!==4||b.stateNode.containerInfo!==O.containerInfo||b.stateNode.implementation!==O.implementation?(b=cf(O,D.mode,ee),b.return=D,b):(b=i(b,O.children||[]),b.return=D,b)}function y(D,b,O,ee,X){return b===null||b.tag!==7?(b=ho(O,D.mode,ee,X),b.return=D,b):(b=i(b,O),b.return=D,b)}function _(D,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return b=uf(""+b,D.mode,O),b.return=D,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rc:return O=Lc(b.type,b.key,b.props,null,D.mode,O),O.ref=El(D,null,b),O.return=D,O;case ta:return b=cf(b,D.mode,O),b.return=D,b;case Gi:var ee=b._init;return _(D,ee(b._payload),O)}if(Cl(b)||yl(b))return b=ho(b,D.mode,O,null),b.return=D,b;pc(D,b)}return null}function w(D,b,O,ee){var X=b!==null?b.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return X!==null?null:u(D,b,""+O,ee);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case rc:return O.key===X?h(D,b,O,ee):null;case ta:return O.key===X?d(D,b,O,ee):null;case Gi:return X=O._init,w(D,b,X(O._payload),ee)}if(Cl(O)||yl(O))return X!==null?null:y(D,b,O,ee,null);pc(D,O)}return null}function P(D,b,O,ee,X){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return D=D.get(O)||null,u(b,D,""+ee,X);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case rc:return D=D.get(ee.key===null?O:ee.key)||null,h(b,D,ee,X);case ta:return D=D.get(ee.key===null?O:ee.key)||null,d(b,D,ee,X);case Gi:var se=ee._init;return P(D,b,O,se(ee._payload),X)}if(Cl(ee)||yl(ee))return D=D.get(O)||null,y(b,D,ee,X,null);pc(b,ee)}return null}function M(D,b,O,ee){for(var X=null,se=null,C=b,I=b=0,R=null;C!==null&&I<O.length;I++){C.index>I?(R=C,C=null):R=C.sibling;var S=w(D,C,O[I],ee);if(S===null){C===null&&(C=R);break}t&&C&&S.alternate===null&&e(D,C),b=s(S,b,I),se===null?X=S:se.sibling=S,se=S,C=R}if(I===O.length)return n(D,C),ft&&eo(D,I),X;if(C===null){for(;I<O.length;I++)C=_(D,O[I],ee),C!==null&&(b=s(C,b,I),se===null?X=C:se.sibling=C,se=C);return ft&&eo(D,I),X}for(C=r(D,C);I<O.length;I++)R=P(C,D,I,O[I],ee),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?I:R.key),b=s(R,b,I),se===null?X=R:se.sibling=R,se=R);return t&&C.forEach(function(N){return e(D,N)}),ft&&eo(D,I),X}function z(D,b,O,ee){var X=yl(O);if(typeof X!="function")throw Error(de(150));if(O=X.call(O),O==null)throw Error(de(151));for(var se=X=null,C=b,I=b=0,R=null,S=O.next();C!==null&&!S.done;I++,S=O.next()){C.index>I?(R=C,C=null):R=C.sibling;var N=w(D,C,S.value,ee);if(N===null){C===null&&(C=R);break}t&&C&&N.alternate===null&&e(D,C),b=s(N,b,I),se===null?X=N:se.sibling=N,se=N,C=R}if(S.done)return n(D,C),ft&&eo(D,I),X;if(C===null){for(;!S.done;I++,S=O.next())S=_(D,S.value,ee),S!==null&&(b=s(S,b,I),se===null?X=S:se.sibling=S,se=S);return ft&&eo(D,I),X}for(C=r(D,C);!S.done;I++,S=O.next())S=P(C,D,I,S.value,ee),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?I:S.key),b=s(S,b,I),se===null?X=S:se.sibling=S,se=S);return t&&C.forEach(function(B){return e(D,B)}),ft&&eo(D,I),X}function G(D,b,O,ee){if(typeof O=="object"&&O!==null&&O.type===na&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case rc:e:{for(var X=O.key,se=b;se!==null;){if(se.key===X){if(X=O.type,X===na){if(se.tag===7){n(D,se.sibling),b=i(se,O.props.children),b.return=D,D=b;break e}}else if(se.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Gi&&By(X)===se.type){n(D,se.sibling),b=i(se,O.props),b.ref=El(D,se,O),b.return=D,D=b;break e}n(D,se);break}else e(D,se);se=se.sibling}O.type===na?(b=ho(O.props.children,D.mode,ee,O.key),b.return=D,D=b):(ee=Lc(O.type,O.key,O.props,null,D.mode,ee),ee.ref=El(D,b,O),ee.return=D,D=ee)}return o(D);case ta:e:{for(se=O.key;b!==null;){if(b.key===se)if(b.tag===4&&b.stateNode.containerInfo===O.containerInfo&&b.stateNode.implementation===O.implementation){n(D,b.sibling),b=i(b,O.children||[]),b.return=D,D=b;break e}else{n(D,b);break}else e(D,b);b=b.sibling}b=cf(O,D.mode,ee),b.return=D,D=b}return o(D);case Gi:return se=O._init,G(D,b,se(O._payload),ee)}if(Cl(O))return M(D,b,O,ee);if(yl(O))return z(D,b,O,ee);pc(D,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,b!==null&&b.tag===6?(n(D,b.sibling),b=i(b,O),b.return=D,D=b):(n(D,b),b=uf(O,D.mode,ee),b.return=D,D=b),o(D)):n(D,b)}return G}var Aa=x0(!0),E0=x0(!1),ah=As(null),lh=null,ca=null,Tm=null;function Im(){Tm=ca=lh=null}function Sm(t){var e=ah.current;ht(ah),t._currentValue=e}function ap(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){lh=t,Tm=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(In=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(Tm!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(lh===null)throw Error(de(308));ca=t,lh.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var so=null;function km(t){so===null?so=[t]:so.push(t)}function b0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,km(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ii(t,r)}function Ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qi=!1;function Cm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ii(t,n)}return i=r.interleaved,i===null?(e.next=e,km(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ii(t,n)}function Nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}function zy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uh(t,e,n,r){var i=t.updateQueue;Qi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var h=u,d=h.next;h.next=null,o===null?s=d:o.next=d,o=h;var y=t.alternate;y!==null&&(y=y.updateQueue,u=y.lastBaseUpdate,u!==o&&(u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=h))}if(s!==null){var _=i.baseState;o=0,y=d=h=null,u=s;do{var w=u.lane,P=u.eventTime;if((r&w)===w){y!==null&&(y=y.next={eventTime:P,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var M=t,z=u;switch(w=e,P=n,z.tag){case 1:if(M=z.payload,typeof M=="function"){_=M.call(P,_,w);break e}_=M;break e;case 3:M.flags=M.flags&-65537|128;case 0:if(M=z.payload,w=typeof M=="function"?M.call(P,_,w):M,w==null)break e;_=yt({},_,w);break e;case 2:Qi=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[u]:w.push(u))}else P={eventTime:P,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},y===null?(d=y=P,h=_):y=y.next=P,o|=w;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;w=u,u=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(y===null&&(h=_),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);_o|=o,t.lanes=o,t.memoizedState=_}}function $y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(de(191,i));i.call(r)}}}var Cu={},Gr=As(Cu),au=As(Cu),lu=As(Cu);function oo(t){if(t===Cu)throw Error(de(174));return t}function Am(t,e){switch(at(lu,e),at(au,t),at(Gr,Cu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bf(e,t)}ht(Gr),at(Gr,e)}function Pa(){ht(Gr),ht(au),ht(lu)}function I0(t){oo(lu.current);var e=oo(Gr.current),n=Bf(e,t.type);e!==n&&(at(au,t),at(Gr,n))}function Pm(t){au.current===t&&(ht(Gr),ht(au))}var mt=As(0);function ch(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nf=[];function Nm(){for(var t=0;t<nf.length;t++)nf[t]._workInProgressVersionPrimary=null;nf.length=0}var Rc=Ni.ReactCurrentDispatcher,rf=Ni.ReactCurrentBatchConfig,vo=0,gt=null,Ot=null,$t=null,hh=!1,Ul=!1,uu=0,NI=0;function nn(){throw Error(de(321))}function Rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kr(t[n],e[n]))return!1;return!0}function Dm(t,e,n,r,i,s){if(vo=s,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?jI:VI,t=n(r,i),Ul){s=0;do{if(Ul=!1,uu=0,25<=s)throw Error(de(301));s+=1,$t=Ot=null,e.updateQueue=null,Rc.current=LI,t=n(r,i)}while(Ul)}if(Rc.current=dh,e=Ot!==null&&Ot.next!==null,vo=0,$t=Ot=gt=null,hh=!1,e)throw Error(de(300));return t}function Om(){var t=uu!==0;return uu=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?gt.memoizedState=$t=t:$t=$t.next=t,$t}function rr(){if(Ot===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=$t===null?gt.memoizedState:$t.next;if(e!==null)$t=e,Ot=t;else{if(t===null)throw Error(de(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},$t===null?gt.memoizedState=$t=t:$t=$t.next=t}return $t}function cu(t,e){return typeof e=="function"?e(t):e}function sf(t){var e=rr(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=Ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=o=null,h=null,d=s;do{var y=d.lane;if((vo&y)===y)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var _={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(u=h=_,o=r):h=h.next=_,gt.lanes|=y,_o|=y}d=d.next}while(d!==null&&d!==s);h===null?o=r:h.next=u,kr(r,e.memoizedState)||(In=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gt.lanes|=s,_o|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function of(t){var e=rr(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);kr(s,e.memoizedState)||(In=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function S0(){}function k0(t,e){var n=gt,r=rr(),i=e(),s=!kr(r.memoizedState,i);if(s&&(r.memoizedState=i,In=!0),r=r.queue,jm(P0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,hu(9,A0.bind(null,n,r,i,e),void 0,null),Kt===null)throw Error(de(349));vo&30||C0(n,e,i)}return i}function C0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function A0(t,e,n,r){e.value=n,e.getSnapshot=r,N0(e)&&R0(t)}function P0(t,e,n){return n(function(){N0(e)&&R0(t)})}function N0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kr(t,n)}catch{return!0}}function R0(t){var e=Ii(t,1);e!==null&&Tr(e,t,1,-1)}function Ky(t){var e=Kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:t},e.queue=t,t=t.dispatch=OI.bind(null,gt,t),[e.memoizedState,t]}function hu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function D0(){return rr().memoizedState}function Dc(t,e,n,r){var i=Kr();gt.flags|=t,i.memoizedState=hu(1|e,n,void 0,r===void 0?null:r)}function Hh(t,e,n,r){var i=rr();r=r===void 0?null:r;var s=void 0;if(Ot!==null){var o=Ot.memoizedState;if(s=o.destroy,r!==null&&Rm(r,o.deps)){i.memoizedState=hu(e,n,s,r);return}}gt.flags|=t,i.memoizedState=hu(1|e,n,s,r)}function qy(t,e){return Dc(8390656,8,t,e)}function jm(t,e){return Hh(2048,8,t,e)}function O0(t,e){return Hh(4,2,t,e)}function j0(t,e){return Hh(4,4,t,e)}function V0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L0(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,V0.bind(null,e,t),n)}function Vm(){}function M0(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F0(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function U0(t,e,n){return vo&21?(kr(n,e)||(n=qw(),gt.lanes|=n,_o|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,In=!0),t.memoizedState=n)}function RI(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=rf.transition;rf.transition={};try{t(!1),e()}finally{rt=n,rf.transition=r}}function B0(){return rr().memoizedState}function DI(t,e,n){var r=ds(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},z0(t))$0(e,n);else if(n=b0(t,e,n,r),n!==null){var i=yn();Tr(n,t,r,i),K0(n,e,r)}}function OI(t,e,n){var r=ds(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(z0(t))$0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(i.hasEagerState=!0,i.eagerState=u,kr(u,o)){var h=e.interleaved;h===null?(i.next=i,km(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=b0(t,e,i,r),n!==null&&(i=yn(),Tr(n,t,r,i),K0(n,e,r))}}function z0(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function $0(t,e){Ul=hh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function K0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}var dh={readContext:nr,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},jI={readContext:nr,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:qy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dc(4194308,4,V0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dc(4,2,t,e)},useMemo:function(t,e){var n=Kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DI.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:Ky,useDebugValue:Vm,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=Ky(!1),e=t[0];return t=RI.bind(null,t[1]),Kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,i=Kr();if(ft){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),Kt===null)throw Error(de(349));vo&30||C0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,qy(P0.bind(null,r,s,t),[t]),r.flags|=2048,hu(9,A0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Kr(),e=Kt.identifierPrefix;if(ft){var n=vi,r=yi;n=(r&~(1<<32-br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VI={readContext:nr,useCallback:M0,useContext:nr,useEffect:jm,useImperativeHandle:L0,useInsertionEffect:O0,useLayoutEffect:j0,useMemo:F0,useReducer:sf,useRef:D0,useState:function(){return sf(cu)},useDebugValue:Vm,useDeferredValue:function(t){var e=rr();return U0(e,Ot.memoizedState,t)},useTransition:function(){var t=sf(cu)[0],e=rr().memoizedState;return[t,e]},useMutableSource:S0,useSyncExternalStore:k0,useId:B0,unstable_isNewReconciler:!1},LI={readContext:nr,useCallback:M0,useContext:nr,useEffect:jm,useImperativeHandle:L0,useInsertionEffect:O0,useLayoutEffect:j0,useMemo:F0,useReducer:of,useRef:D0,useState:function(){return of(cu)},useDebugValue:Vm,useDeferredValue:function(t){var e=rr();return Ot===null?e.memoizedState=t:U0(e,Ot.memoizedState,t)},useTransition:function(){var t=of(cu)[0],e=rr().memoizedState;return[t,e]},useMutableSource:S0,useSyncExternalStore:k0,useId:B0,unstable_isNewReconciler:!1};function vr(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gh={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),i=ds(t),s=xi(r,i);s.payload=e,n!=null&&(s.callback=n),e=cs(t,s,i),e!==null&&(Tr(e,t,i,r),Nc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),i=ds(t),s=xi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=cs(t,s,i),e!==null&&(Tr(e,t,i,r),Nc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=ds(t),i=xi(n,r);i.tag=2,e!=null&&(i.callback=e),e=cs(t,i,r),e!==null&&(Tr(e,t,r,n),Nc(e,t,r))}};function Wy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ru(n,r)||!ru(i,s):!0}function q0(t,e,n){var r=!1,i=_s,s=e.contextType;return typeof s=="object"&&s!==null?s=nr(s):(i=kn(e)?go:un.current,r=e.contextTypes,s=(r=r!=null)?ka(t,i):_s),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gh.enqueueReplaceState(e,e.state,null)}function up(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Cm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nr(s):(s=kn(e)?go:un.current,i.context=ka(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gh.enqueueReplaceState(i,i.state,null),uh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Na(t,e){try{var n="",r=e;do n+=hT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function af(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var MI=typeof WeakMap=="function"?WeakMap:Map;function W0(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ph||(ph=!0,wp=r),cp(t,e)},n}function H0(t,e,n){n=xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cp(t,e),typeof r!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new MI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XI.bind(null,t,e,n),e.then(t,t))}function Qy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,cs(n,e,1))),n.lanes|=1),t)}var FI=Ni.ReactCurrentOwner,In=!1;function gn(t,e,n,r){e.child=t===null?E0(e,null,n,r):Aa(e,t.child,n,r)}function Jy(t,e,n,r,i){n=n.render;var s=e.ref;return ya(e,i),r=Dm(t,e,n,r,s,i),n=Om(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Si(t,e,i)):(ft&&n&&xm(e),e.flags|=1,gn(t,e,r,i),e.child)}function Xy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Km(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,G0(t,e,s,r,i)):(t=Lc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ru,n(o,r)&&t.ref===e.ref)return Si(t,e,i)}return e.flags|=1,t=fs(s,r),t.ref=e.ref,t.return=e,e.child=t}function G0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ru(s,r)&&t.ref===e.ref)if(In=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(In=!0);else return e.lanes=t.lanes,Si(t,e,i)}return hp(t,e,n,r,i)}function Q0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(da,On),On|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(da,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,at(da,On),On|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,at(da,On),On|=r;return gn(t,e,i,n),e.child}function Y0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hp(t,e,n,r,i){var s=kn(n)?go:un.current;return s=ka(e,s),ya(e,i),n=Dm(t,e,n,r,s,i),r=Om(),t!==null&&!In?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Si(t,e,i)):(ft&&r&&xm(e),e.flags|=1,gn(t,e,n,i),e.child)}function Zy(t,e,n,r,i){if(kn(n)){var s=!0;ih(e)}else s=!1;if(ya(e,i),e.stateNode===null)Oc(t,e),q0(e,n,r),up(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var h=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=nr(d):(d=kn(n)?go:un.current,d=ka(e,d));var y=n.getDerivedStateFromProps,_=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function";_||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||h!==d)&&Hy(e,o,r,d),Qi=!1;var w=e.memoizedState;o.state=w,uh(e,r,o,i),h=e.memoizedState,u!==r||w!==h||Sn.current||Qi?(typeof y=="function"&&(lp(e,n,y,r),h=e.memoizedState),(u=Qi||Wy(e,n,u,r,w,h,d))?(_||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,T0(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:vr(e.type,u),o.props=d,_=e.pendingProps,w=o.context,h=n.contextType,typeof h=="object"&&h!==null?h=nr(h):(h=kn(n)?go:un.current,h=ka(e,h));var P=n.getDerivedStateFromProps;(y=typeof P=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==_||w!==h)&&Hy(e,o,r,h),Qi=!1,w=e.memoizedState,o.state=w,uh(e,r,o,i);var M=e.memoizedState;u!==_||w!==M||Sn.current||Qi?(typeof P=="function"&&(lp(e,n,P,r),M=e.memoizedState),(d=Qi||Wy(e,n,d,r,w,M,h)||!1)?(y||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,M,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,M,h)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=M),o.props=r,o.state=M,o.context=h,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return dp(t,e,n,r,s,i)}function dp(t,e,n,r,i,s){Y0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&My(e,n,!1),Si(t,e,s);r=e.stateNode,FI.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aa(e,t.child,null,s),e.child=Aa(e,null,u,s)):gn(t,e,u,s),e.memoizedState=r.state,i&&My(e,n,!0),e.child}function J0(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),Am(t,e.containerInfo)}function ev(t,e,n,r,i){return Ca(),bm(i),e.flags|=256,gn(t,e,n,r),e.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function pp(t){return{baseLanes:t,cachePool:null,transitions:null}}function X0(t,e,n){var r=e.pendingProps,i=mt.current,s=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),at(mt,i&1),t===null)return op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jh(o,r,0,null),t=ho(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pp(n),e.memoizedState=fp,t):Lm(e,o));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return UI(t,e,o,r,u,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,u=i.sibling;var h={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=fs(i,h),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=fs(u,s):(s=ho(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=fp,r}return s=t.child,t=s.sibling,r=fs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lm(t,e){return e=Jh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mc(t,e,n,r){return r!==null&&bm(r),Aa(e,t.child,null,n),t=Lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=af(Error(de(422))),mc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jh({mode:"visible",children:r.children},i,0,null),s=ho(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Aa(e,t.child,null,o),e.child.memoizedState=pp(o),e.memoizedState=fp,s);if(!(e.mode&1))return mc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(de(419)),r=af(s,r,void 0),mc(t,e,o,r)}if(u=(o&t.childLanes)!==0,In||u){if(r=Kt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ii(t,i),Tr(r,t,i,-1))}return $m(),r=af(Error(de(421))),mc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ZI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jn=us(i.nextSibling),Ln=e,ft=!0,wr=null,t!==null&&(Qn[Yn++]=yi,Qn[Yn++]=vi,Qn[Yn++]=yo,yi=t.id,vi=t.overflow,yo=e),e=Lm(e,r.children),e.flags|=4096,e)}function tv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ap(t.return,e,n)}function lf(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Z0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tv(t,n,e);else if(t.tag===19)tv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(at(mt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ch(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lf(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ch(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lf(e,!0,n,null,s);break;case"together":lf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_o|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BI(t,e,n){switch(e.tag){case 3:J0(e),Ca();break;case 5:I0(e);break;case 1:kn(e.type)&&ih(e);break;case 4:Am(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;at(ah,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(at(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?X0(t,e,n):(at(mt,mt.current&1),t=Si(t,e,n),t!==null?t.sibling:null);at(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Z0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),at(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,Q0(t,e,n)}return Si(t,e,n)}var ex,mp,tx,nx;ex=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mp=function(){};tx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,oo(Gr.current);var s=null;switch(n){case"input":i=Lf(t,i),r=Lf(t,r),s=[];break;case"select":i=yt({},i,{value:void 0}),r=yt({},r,{value:void 0}),s=[];break;case"textarea":i=Uf(t,i),r=Uf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nh)}zf(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var h=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&h!==u&&(h!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in h)h.hasOwnProperty(o)&&u[o]!==h[o]&&(n||(n={}),n[o]=h[o])}else n||(s||(s=[]),s.push(d,n)),n=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(s=s||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yl.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&lt("scroll",t),s||u===h||(s=[])):(s=s||[]).push(d,h))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};nx=function(t,e,n,r){n!==r&&(e.flags|=4)};function bl(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zI(t,e,n){var r=e.pendingProps;switch(Em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(e),null;case 1:return kn(e.type)&&rh(),rn(e),null;case 3:return r=e.stateNode,Pa(),ht(Sn),ht(un),Nm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wr!==null&&(bp(wr),wr=null))),mp(t,e),rn(e),null;case 5:Pm(e);var i=oo(lu.current);if(n=e.type,t!==null&&e.stateNode!=null)tx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return rn(e),null}if(t=oo(Gr.current),fc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wr]=e,r[ou]=s,t=(e.mode&1)!==0,n){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(i=0;i<Pl.length;i++)lt(Pl[i],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":cy(r,s),lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},lt("invalid",r);break;case"textarea":dy(r,s),lt("invalid",r)}zf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&dc(r.textContent,u,t),i=["children",""+u]):Yl.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&lt("scroll",r)}switch(n){case"input":ic(r),hy(r,s,!0);break;case"textarea":ic(r),fy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=nh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wr]=e,t[ou]=r,ex(t,e,!1,!1),e.stateNode=t;e:{switch(o=$f(n,r),n){case"dialog":lt("cancel",t),lt("close",t),i=r;break;case"iframe":case"object":case"embed":lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Pl.length;i++)lt(Pl[i],t);i=r;break;case"source":lt("error",t),i=r;break;case"img":case"image":case"link":lt("error",t),lt("load",t),i=r;break;case"details":lt("toggle",t),i=r;break;case"input":cy(t,r),i=Lf(t,r),lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=yt({},r,{value:void 0}),lt("invalid",t);break;case"textarea":dy(t,r),i=Uf(t,r),lt("invalid",t);break;default:i=r}zf(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var h=u[s];s==="style"?Dw(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Nw(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Jl(t,h):typeof h=="number"&&Jl(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yl.hasOwnProperty(s)?h!=null&&s==="onScroll"&&lt("scroll",t):h!=null&&am(t,s,h,o))}switch(n){case"input":ic(t),hy(t,r,!1);break;case"textarea":ic(t),fy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?fa(t,!!r.multiple,s,!1):r.defaultValue!=null&&fa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rn(e),null;case 6:if(t&&e.stateNode!=null)nx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=oo(lu.current),oo(Gr.current),fc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wr]=e,(s=r.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:dc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=e,e.stateNode=r}return rn(e),null;case 13:if(ht(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&jn!==null&&e.mode&1&&!(e.flags&128))w0(),Ca(),e.flags|=98560,s=!1;else if(s=fc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(de(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[Wr]=e}else Ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rn(e),s=!1}else wr!==null&&(bp(wr),wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Vt===0&&(Vt=3):$m())),e.updateQueue!==null&&(e.flags|=4),rn(e),null);case 4:return Pa(),mp(t,e),t===null&&iu(e.stateNode.containerInfo),rn(e),null;case 10:return Sm(e.type._context),rn(e),null;case 17:return kn(e.type)&&rh(),rn(e),null;case 19:if(ht(mt),s=e.memoizedState,s===null)return rn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)bl(s,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ch(t),o!==null){for(e.flags|=128,bl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return at(mt,mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&It()>Ra&&(e.flags|=128,r=!0,bl(s,!1),e.lanes=4194304)}else{if(!r)if(t=ch(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ft)return rn(e),null}else 2*It()-s.renderingStartTime>Ra&&n!==1073741824&&(e.flags|=128,r=!0,bl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=It(),e.sibling=null,n=mt.current,at(mt,r?n&1|2:n&1),e):(rn(e),null);case 22:case 23:return zm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(rn(e),e.subtreeFlags&6&&(e.flags|=8192)):rn(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function $I(t,e){switch(Em(e),e.tag){case 1:return kn(e.type)&&rh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),ht(Sn),ht(un),Nm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pm(e),null;case 13:if(ht(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(mt),null;case 4:return Pa(),null;case 10:return Sm(e.type._context),null;case 22:case 23:return zm(),null;case 24:return null;default:return null}}var gc=!1,an=!1,KI=typeof WeakSet=="function"?WeakSet:Set,ke=null;function ha(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(t,e,r)}else n.current=null}function gp(t,e,n){try{n()}catch(r){wt(t,e,r)}}var nv=!1;function qI(t,e){if(Zf=Zc,t=a0(),wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,h=-1,d=0,y=0,_=t,w=null;t:for(;;){for(var P;_!==n||i!==0&&_.nodeType!==3||(u=o+i),_!==s||r!==0&&_.nodeType!==3||(h=o+r),_.nodeType===3&&(o+=_.nodeValue.length),(P=_.firstChild)!==null;)w=_,_=P;for(;;){if(_===t)break t;if(w===n&&++d===i&&(u=o),w===s&&++y===r&&(h=o),(P=_.nextSibling)!==null)break;_=w,w=_.parentNode}_=P}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(ep={focusedElem:t,selectionRange:n},Zc=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var M=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var z=M.memoizedProps,G=M.memoizedState,D=e.stateNode,b=D.getSnapshotBeforeUpdate(e.elementType===e.type?z:vr(e.type,z),G);D.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(ee){wt(e,e.return,ee)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return M=nv,nv=!1,M}function Bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&gp(e,n,s)}i=i.next}while(i!==r)}}function Qh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rx(t){var e=t.alternate;e!==null&&(t.alternate=null,rx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wr],delete e[ou],delete e[rp],delete e[kI],delete e[CI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ix(t){return t.tag===5||t.tag===3||t.tag===4}function rv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ix(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nh));else if(r!==4&&(t=t.child,t!==null))for(vp(t,e,n),t=t.sibling;t!==null;)vp(t,e,n),t=t.sibling}function _p(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_p(t,e,n),t=t.sibling;t!==null;)_p(t,e,n),t=t.sibling}var Wt=null,_r=!1;function Wi(t,e,n){for(n=n.child;n!==null;)sx(t,e,n),n=n.sibling}function sx(t,e,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(Bh,n)}catch{}switch(n.tag){case 5:an||ha(n,e);case 6:var r=Wt,i=_r;Wt=null,Wi(t,e,n),Wt=r,_r=i,Wt!==null&&(_r?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(_r?(t=Wt,n=n.stateNode,t.nodeType===8?ef(t.parentNode,n):t.nodeType===1&&ef(t,n),tu(t)):ef(Wt,n.stateNode));break;case 4:r=Wt,i=_r,Wt=n.stateNode.containerInfo,_r=!0,Wi(t,e,n),Wt=r,_r=i;break;case 0:case 11:case 14:case 15:if(!an&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&gp(n,e,o),i=i.next}while(i!==r)}Wi(t,e,n);break;case 1:if(!an&&(ha(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){wt(n,e,u)}Wi(t,e,n);break;case 21:Wi(t,e,n);break;case 22:n.mode&1?(an=(r=an)||n.memoizedState!==null,Wi(t,e,n),an=r):Wi(t,e,n);break;default:Wi(t,e,n)}}function iv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KI),e.forEach(function(r){var i=eS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Wt=u.stateNode,_r=!1;break e;case 3:Wt=u.stateNode.containerInfo,_r=!0;break e;case 4:Wt=u.stateNode.containerInfo,_r=!0;break e}u=u.return}if(Wt===null)throw Error(de(160));sx(s,o,i),Wt=null,_r=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(d){wt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ox(e,t),e=e.sibling}function ox(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gr(e,t),$r(t),r&4){try{Bl(3,t,t.return),Qh(3,t)}catch(z){wt(t,t.return,z)}try{Bl(5,t,t.return)}catch(z){wt(t,t.return,z)}}break;case 1:gr(e,t),$r(t),r&512&&n!==null&&ha(n,n.return);break;case 5:if(gr(e,t),$r(t),r&512&&n!==null&&ha(n,n.return),t.flags&32){var i=t.stateNode;try{Jl(i,"")}catch(z){wt(t,t.return,z)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Cw(i,s),$f(u,o);var d=$f(u,s);for(o=0;o<h.length;o+=2){var y=h[o],_=h[o+1];y==="style"?Dw(i,_):y==="dangerouslySetInnerHTML"?Nw(i,_):y==="children"?Jl(i,_):am(i,y,_,d)}switch(u){case"input":Mf(i,s);break;case"textarea":Aw(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var P=s.value;P!=null?fa(i,!!s.multiple,P,!1):w!==!!s.multiple&&(s.defaultValue!=null?fa(i,!!s.multiple,s.defaultValue,!0):fa(i,!!s.multiple,s.multiple?[]:"",!1))}i[ou]=s}catch(z){wt(t,t.return,z)}}break;case 6:if(gr(e,t),$r(t),r&4){if(t.stateNode===null)throw Error(de(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(z){wt(t,t.return,z)}}break;case 3:if(gr(e,t),$r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tu(e.containerInfo)}catch(z){wt(t,t.return,z)}break;case 4:gr(e,t),$r(t);break;case 13:gr(e,t),$r(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Um=It())),r&4&&iv(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(an=(d=an)||y,gr(e,t),an=d):gr(e,t),$r(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!y&&t.mode&1)for(ke=t,y=t.child;y!==null;){for(_=ke=y;ke!==null;){switch(w=ke,P=w.child,w.tag){case 0:case 11:case 14:case 15:Bl(4,w,w.return);break;case 1:ha(w,w.return);var M=w.stateNode;if(typeof M.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,M.props=e.memoizedProps,M.state=e.memoizedState,M.componentWillUnmount()}catch(z){wt(r,n,z)}}break;case 5:ha(w,w.return);break;case 22:if(w.memoizedState!==null){ov(_);continue}}P!==null?(P.return=w,ke=P):ov(_)}y=y.sibling}e:for(y=null,_=t;;){if(_.tag===5){if(y===null){y=_;try{i=_.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=_.stateNode,h=_.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=Rw("display",o))}catch(z){wt(t,t.return,z)}}}else if(_.tag===6){if(y===null)try{_.stateNode.nodeValue=d?"":_.memoizedProps}catch(z){wt(t,t.return,z)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;y===_&&(y=null),_=_.return}y===_&&(y=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:gr(e,t),$r(t),r&4&&iv(t);break;case 21:break;default:gr(e,t),$r(t)}}function $r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ix(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jl(i,""),r.flags&=-33);var s=rv(t);_p(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,u=rv(t);vp(t,u,o);break;default:throw Error(de(161))}}catch(h){wt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WI(t,e,n){ke=t,ax(t)}function ax(t,e,n){for(var r=(t.mode&1)!==0;ke!==null;){var i=ke,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gc;if(!o){var u=i.alternate,h=u!==null&&u.memoizedState!==null||an;u=gc;var d=an;if(gc=o,(an=h)&&!d)for(ke=i;ke!==null;)o=ke,h=o.child,o.tag===22&&o.memoizedState!==null?av(i):h!==null?(h.return=o,ke=h):av(i);for(;s!==null;)ke=s,ax(s),s=s.sibling;ke=i,gc=u,an=d}sv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ke=s):sv(t)}}function sv(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||Qh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!an)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$y(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$y(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var _=y.dehydrated;_!==null&&tu(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}an||e.flags&512&&yp(e)}catch(w){wt(e,e.return,w)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function ov(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function av(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qh(4,e)}catch(h){wt(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){wt(e,i,h)}}var s=e.return;try{yp(e)}catch(h){wt(e,s,h)}break;case 5:var o=e.return;try{yp(e)}catch(h){wt(e,o,h)}}}catch(h){wt(e,e.return,h)}if(e===t){ke=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ke=u;break}ke=e.return}}var HI=Math.ceil,fh=Ni.ReactCurrentDispatcher,Mm=Ni.ReactCurrentOwner,Zn=Ni.ReactCurrentBatchConfig,Ye=0,Kt=null,Ct=null,Qt=0,On=0,da=As(0),Vt=0,du=null,_o=0,Yh=0,Fm=0,zl=null,bn=null,Um=0,Ra=1/0,pi=null,ph=!1,wp=null,hs=null,yc=!1,rs=null,mh=0,$l=0,xp=null,jc=-1,Vc=0;function yn(){return Ye&6?It():jc!==-1?jc:jc=It()}function ds(t){return t.mode&1?Ye&2&&Qt!==0?Qt&-Qt:PI.transition!==null?(Vc===0&&(Vc=qw()),Vc):(t=rt,t!==0||(t=window.event,t=t===void 0?16:Xw(t.type)),t):1}function Tr(t,e,n,r){if(50<$l)throw $l=0,xp=null,Error(de(185));Iu(t,n,r),(!(Ye&2)||t!==Kt)&&(t===Kt&&(!(Ye&2)&&(Yh|=n),Vt===4&&Xi(t,Qt)),Cn(t,r),n===1&&Ye===0&&!(e.mode&1)&&(Ra=It()+500,Wh&&Ps()))}function Cn(t,e){var n=t.callbackNode;PT(t,e);var r=Xc(t,t===Kt?Qt:0);if(r===0)n!==null&&gy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gy(n),e===1)t.tag===0?AI(lv.bind(null,t)):y0(lv.bind(null,t)),II(function(){!(Ye&6)&&Ps()}),n=null;else{switch(Ww(r)){case 1:n=dm;break;case 4:n=$w;break;case 16:n=Jc;break;case 536870912:n=Kw;break;default:n=Jc}n=mx(n,lx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lx(t,e){if(jc=-1,Vc=0,Ye&6)throw Error(de(327));var n=t.callbackNode;if(va()&&t.callbackNode!==n)return null;var r=Xc(t,t===Kt?Qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gh(t,r);else{e=r;var i=Ye;Ye|=2;var s=cx();(Kt!==t||Qt!==e)&&(pi=null,Ra=It()+500,co(t,e));do try{YI();break}catch(u){ux(t,u)}while(!0);Im(),fh.current=s,Ye=i,Ct!==null?e=0:(Kt=null,Qt=0,e=Vt)}if(e!==0){if(e===2&&(i=Gf(t),i!==0&&(r=i,e=Ep(t,i))),e===1)throw n=du,co(t,0),Xi(t,r),Cn(t,It()),n;if(e===6)Xi(t,r);else{if(i=t.current.alternate,!(r&30)&&!GI(i)&&(e=gh(t,r),e===2&&(s=Gf(t),s!==0&&(r=s,e=Ep(t,s))),e===1))throw n=du,co(t,0),Xi(t,r),Cn(t,It()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:to(t,bn,pi);break;case 3:if(Xi(t,r),(r&130023424)===r&&(e=Um+500-It(),10<e)){if(Xc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=np(to.bind(null,t,bn,pi),e);break}to(t,bn,pi);break;case 4:if(Xi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-br(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HI(r/1960))-r,10<r){t.timeoutHandle=np(to.bind(null,t,bn,pi),r);break}to(t,bn,pi);break;case 5:to(t,bn,pi);break;default:throw Error(de(329))}}}return Cn(t,It()),t.callbackNode===n?lx.bind(null,t):null}function Ep(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(co(t,e).flags|=256),t=gh(t,e),t!==2&&(e=bn,bn=n,e!==null&&bp(e)),t}function bp(t){bn===null?bn=t:bn.push.apply(bn,t)}function GI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!kr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xi(t,e){for(e&=~Fm,e&=~Yh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-br(e),r=1<<n;t[n]=-1,e&=~r}}function lv(t){if(Ye&6)throw Error(de(327));va();var e=Xc(t,0);if(!(e&1))return Cn(t,It()),null;var n=gh(t,e);if(t.tag!==0&&n===2){var r=Gf(t);r!==0&&(e=r,n=Ep(t,r))}if(n===1)throw n=du,co(t,0),Xi(t,e),Cn(t,It()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,to(t,bn,pi),Cn(t,It()),null}function Bm(t,e){var n=Ye;Ye|=1;try{return t(e)}finally{Ye=n,Ye===0&&(Ra=It()+500,Wh&&Ps())}}function wo(t){rs!==null&&rs.tag===0&&!(Ye&6)&&va();var e=Ye;Ye|=1;var n=Zn.transition,r=rt;try{if(Zn.transition=null,rt=1,t)return t()}finally{rt=r,Zn.transition=n,Ye=e,!(Ye&6)&&Ps()}}function zm(){On=da.current,ht(da)}function co(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TI(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(Em(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rh();break;case 3:Pa(),ht(Sn),ht(un),Nm();break;case 5:Pm(r);break;case 4:Pa();break;case 13:ht(mt);break;case 19:ht(mt);break;case 10:Sm(r.type._context);break;case 22:case 23:zm()}n=n.return}if(Kt=t,Ct=t=fs(t.current,null),Qt=On=e,Vt=0,du=null,Fm=Yh=_o=0,bn=zl=null,so!==null){for(e=0;e<so.length;e++)if(n=so[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}so=null}return t}function ux(t,e){do{var n=Ct;try{if(Im(),Rc.current=dh,hh){for(var r=gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hh=!1}if(vo=0,$t=Ot=gt=null,Ul=!1,uu=0,Mm.current=null,n===null||n.return===null){Vt=1,du=e,Ct=null;break}e:{var s=t,o=n.return,u=n,h=e;if(e=Qt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,y=u,_=y.tag;if(!(y.mode&1)&&(_===0||_===11||_===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var P=Qy(o);if(P!==null){P.flags&=-257,Yy(P,o,u,s,e),P.mode&1&&Gy(s,d,e),e=P,h=d;var M=e.updateQueue;if(M===null){var z=new Set;z.add(h),e.updateQueue=z}else M.add(h);break e}else{if(!(e&1)){Gy(s,d,e),$m();break e}h=Error(de(426))}}else if(ft&&u.mode&1){var G=Qy(o);if(G!==null){!(G.flags&65536)&&(G.flags|=256),Yy(G,o,u,s,e),bm(Na(h,u));break e}}s=h=Na(h,u),Vt!==4&&(Vt=2),zl===null?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var D=W0(s,h,e);zy(s,D);break e;case 1:u=h;var b=s.type,O=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(hs===null||!hs.has(O)))){s.flags|=65536,e&=-e,s.lanes|=e;var ee=H0(s,u,e);zy(s,ee);break e}}s=s.return}while(s!==null)}dx(n)}catch(X){e=X,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function cx(){var t=fh.current;return fh.current=dh,t===null?dh:t}function $m(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Kt===null||!(_o&268435455)&&!(Yh&268435455)||Xi(Kt,Qt)}function gh(t,e){var n=Ye;Ye|=2;var r=cx();(Kt!==t||Qt!==e)&&(pi=null,co(t,e));do try{QI();break}catch(i){ux(t,i)}while(!0);if(Im(),Ye=n,fh.current=r,Ct!==null)throw Error(de(261));return Kt=null,Qt=0,Vt}function QI(){for(;Ct!==null;)hx(Ct)}function YI(){for(;Ct!==null&&!xT();)hx(Ct)}function hx(t){var e=px(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?dx(t):Ct=e,Mm.current=null}function dx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$I(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Ct=null;return}}else if(n=zI(n,e,On),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Vt===0&&(Vt=5)}function to(t,e,n){var r=rt,i=Zn.transition;try{Zn.transition=null,rt=1,JI(t,e,n,r)}finally{Zn.transition=i,rt=r}return null}function JI(t,e,n,r){do va();while(rs!==null);if(Ye&6)throw Error(de(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(NT(t,s),t===Kt&&(Ct=Kt=null,Qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,mx(Jc,function(){return va(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zn.transition,Zn.transition=null;var o=rt;rt=1;var u=Ye;Ye|=4,Mm.current=null,qI(t,n),ox(n,t),yI(ep),Zc=!!Zf,ep=Zf=null,t.current=n,WI(n),ET(),Ye=u,rt=o,Zn.transition=s}else t.current=n;if(yc&&(yc=!1,rs=t,mh=i),s=t.pendingLanes,s===0&&(hs=null),IT(n.stateNode),Cn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ph)throw ph=!1,t=wp,wp=null,t;return mh&1&&t.tag!==0&&va(),s=t.pendingLanes,s&1?t===xp?$l++:($l=0,xp=t):$l=0,Ps(),null}function va(){if(rs!==null){var t=Ww(mh),e=Zn.transition,n=rt;try{if(Zn.transition=null,rt=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,mh=0,Ye&6)throw Error(de(331));var i=Ye;for(Ye|=4,ke=t.current;ke!==null;){var s=ke,o=s.child;if(ke.flags&16){var u=s.deletions;if(u!==null){for(var h=0;h<u.length;h++){var d=u[h];for(ke=d;ke!==null;){var y=ke;switch(y.tag){case 0:case 11:case 15:Bl(8,y,s)}var _=y.child;if(_!==null)_.return=y,ke=_;else for(;ke!==null;){y=ke;var w=y.sibling,P=y.return;if(rx(y),y===d){ke=null;break}if(w!==null){w.return=P,ke=w;break}ke=P}}}var M=s.alternate;if(M!==null){var z=M.child;if(z!==null){M.child=null;do{var G=z.sibling;z.sibling=null,z=G}while(z!==null)}}ke=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ke=o;else e:for(;ke!==null;){if(s=ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bl(9,s,s.return)}var D=s.sibling;if(D!==null){D.return=s.return,ke=D;break e}ke=s.return}}var b=t.current;for(ke=b;ke!==null;){o=ke;var O=o.child;if(o.subtreeFlags&2064&&O!==null)O.return=o,ke=O;else e:for(o=b;ke!==null;){if(u=ke,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Qh(9,u)}}catch(X){wt(u,u.return,X)}if(u===o){ke=null;break e}var ee=u.sibling;if(ee!==null){ee.return=u.return,ke=ee;break e}ke=u.return}}if(Ye=i,Ps(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(Bh,t)}catch{}r=!0}return r}finally{rt=n,Zn.transition=e}}return!1}function uv(t,e,n){e=Na(n,e),e=W0(t,e,1),t=cs(t,e,1),e=yn(),t!==null&&(Iu(t,1,e),Cn(t,e))}function wt(t,e,n){if(t.tag===3)uv(t,t,n);else for(;e!==null;){if(e.tag===3){uv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hs===null||!hs.has(r))){t=Na(n,t),t=H0(e,t,1),e=cs(e,t,1),t=yn(),e!==null&&(Iu(e,1,t),Cn(e,t));break}}e=e.return}}function XI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,Kt===t&&(Qt&n)===n&&(Vt===4||Vt===3&&(Qt&130023424)===Qt&&500>It()-Um?co(t,0):Fm|=n),Cn(t,e)}function fx(t,e){e===0&&(t.mode&1?(e=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):e=1);var n=yn();t=Ii(t,e),t!==null&&(Iu(t,e,n),Cn(t,n))}function ZI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fx(t,n)}function eS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),fx(t,n)}var px;px=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)In=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return In=!1,BI(t,e,n);In=!!(t.flags&131072)}else In=!1,ft&&e.flags&1048576&&v0(e,oh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Oc(t,e),t=e.pendingProps;var i=ka(e,un.current);ya(e,n),i=Dm(null,e,r,t,i,n);var s=Om();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(s=!0,ih(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cm(e),i.updater=Gh,e.stateNode=i,i._reactInternals=e,up(e,r,t,n),e=dp(null,e,r,!0,s,n)):(e.tag=0,ft&&s&&xm(e),gn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Oc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nS(r),t=vr(r,t),i){case 0:e=hp(null,e,r,t,n);break e;case 1:e=Zy(null,e,r,t,n);break e;case 11:e=Jy(null,e,r,t,n);break e;case 14:e=Xy(null,e,r,vr(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),hp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),Zy(t,e,r,i,n);case 3:e:{if(J0(e),t===null)throw Error(de(387));r=e.pendingProps,s=e.memoizedState,i=s.element,T0(t,e),uh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Na(Error(de(423)),e),e=ev(t,e,r,n,i);break e}else if(r!==i){i=Na(Error(de(424)),e),e=ev(t,e,r,n,i);break e}else for(jn=us(e.stateNode.containerInfo.firstChild),Ln=e,ft=!0,wr=null,n=E0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ca(),r===i){e=Si(t,e,n);break e}gn(t,e,r,n)}e=e.child}return e;case 5:return I0(e),t===null&&op(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,tp(r,i)?o=null:s!==null&&tp(r,s)&&(e.flags|=32),Y0(t,e),gn(t,e,o,n),e.child;case 6:return t===null&&op(e),null;case 13:return X0(t,e,n);case 4:return Am(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aa(e,null,r,n):gn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),Jy(t,e,r,i,n);case 7:return gn(t,e,e.pendingProps,n),e.child;case 8:return gn(t,e,e.pendingProps.children,n),e.child;case 12:return gn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,at(ah,r._currentValue),r._currentValue=o,s!==null)if(kr(s.value,o)){if(s.children===i.children&&!Sn.current){e=Si(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var h=u.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=xi(-1,n&-n),h.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?h.next=h:(h.next=y.next,y.next=h),d.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),ap(s.return,n,e),u.lanes|=n;break}h=h.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(de(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ap(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ya(e,n),i=nr(i),r=r(i),e.flags|=1,gn(t,e,r,n),e.child;case 14:return r=e.type,i=vr(r,e.pendingProps),i=vr(r.type,i),Xy(t,e,r,i,n);case 15:return G0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),Oc(t,e),e.tag=1,kn(r)?(t=!0,ih(e)):t=!1,ya(e,n),q0(e,r,i),up(e,r,i,n),dp(null,e,r,!0,t,n);case 19:return Z0(t,e,n);case 22:return Q0(t,e,n)}throw Error(de(156,e.tag))};function mx(t,e){return zw(t,e)}function tS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,r){return new tS(t,e,n,r)}function Km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nS(t){if(typeof t=="function")return Km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===um)return 11;if(t===cm)return 14}return 2}function fs(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Km(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case na:return ho(n.children,i,s,e);case lm:o=8,i|=8;break;case Df:return t=Xn(12,n,e,i|2),t.elementType=Df,t.lanes=s,t;case Of:return t=Xn(13,n,e,i),t.elementType=Of,t.lanes=s,t;case jf:return t=Xn(19,n,e,i),t.elementType=jf,t.lanes=s,t;case Iw:return Jh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bw:o=10;break e;case Tw:o=9;break e;case um:o=11;break e;case cm:o=14;break e;case Gi:o=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ho(t,e,n,r){return t=Xn(7,t,r,e),t.lanes=n,t}function Jh(t,e,n,r){return t=Xn(22,t,r,e),t.elementType=Iw,t.lanes=n,t.stateNode={isHidden:!1},t}function uf(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function cf(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$d(0),this.expirationTimes=$d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$d(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qm(t,e,n,r,i,s,o,u,h){return t=new rS(t,e,n,u,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cm(s),t}function iS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gx(t){if(!t)return _s;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(kn(n))return g0(t,n,e)}return e}function yx(t,e,n,r,i,s,o,u,h){return t=qm(n,r,!0,t,i,s,o,u,h),t.context=gx(null),n=t.current,r=yn(),i=ds(n),s=xi(r,i),s.callback=e??null,cs(n,s,i),t.current.lanes=i,Iu(t,i,r),Cn(t,r),t}function Xh(t,e,n,r){var i=e.current,s=yn(),o=ds(i);return n=gx(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=cs(i,e,o),t!==null&&(Tr(t,i,o,s),Nc(t,i,o)),o}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wm(t,e){cv(t,e),(t=t.alternate)&&cv(t,e)}function sS(){return null}var vx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hm(t){this._internalRoot=t}Zh.prototype.render=Hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));Xh(t,e,null,null)};Zh.prototype.unmount=Hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wo(function(){Xh(null,t,null,null)}),e[Ti]=null}};function Zh(t){this._internalRoot=t}Zh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ji.length&&e!==0&&e<Ji[n].priority;n++);Ji.splice(n,0,t),n===0&&Jw(t)}};function Gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ed(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hv(){}function oS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=yh(o);s.call(d)}}var o=yx(e,r,t,0,null,!1,!1,"",hv);return t._reactRootContainer=o,t[Ti]=o.current,iu(t.nodeType===8?t.parentNode:t),wo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=yh(h);u.call(d)}}var h=qm(t,0,!1,null,null,!1,!1,"",hv);return t._reactRootContainer=h,t[Ti]=h.current,iu(t.nodeType===8?t.parentNode:t),wo(function(){Xh(e,h,n,r)}),h}function td(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var u=i;i=function(){var h=yh(o);u.call(h)}}Xh(e,o,t,i)}else o=oS(n,e,t,i,r);return yh(o)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Al(e.pendingLanes);n!==0&&(fm(e,n|1),Cn(e,It()),!(Ye&6)&&(Ra=It()+500,Ps()))}break;case 13:wo(function(){var r=Ii(t,1);if(r!==null){var i=yn();Tr(r,t,1,i)}}),Wm(t,1)}};pm=function(t){if(t.tag===13){var e=Ii(t,134217728);if(e!==null){var n=yn();Tr(e,t,134217728,n)}Wm(t,134217728)}};Gw=function(t){if(t.tag===13){var e=ds(t),n=Ii(t,e);if(n!==null){var r=yn();Tr(n,t,e,r)}Wm(t,e)}};Qw=function(){return rt};Yw=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};qf=function(t,e,n){switch(e){case"input":if(Mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=qh(r);if(!i)throw Error(de(90));kw(r),Mf(r,i)}}}break;case"textarea":Aw(t,n);break;case"select":e=n.value,e!=null&&fa(t,!!n.multiple,e,!1)}};Vw=Bm;Lw=wo;var aS={usingClientEntryPoint:!1,Events:[ku,oa,qh,Ow,jw,Bm]},Tl={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lS={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Uw(t),t===null?null:t.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||sS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Bh=vc.inject(lS),Hr=vc}catch{}}Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aS;Un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gm(e))throw Error(de(200));return iS(t,e,null,n)};Un.createRoot=function(t,e){if(!Gm(t))throw Error(de(299));var n=!1,r="",i=vx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qm(t,1,!1,null,null,n,!1,r,i),t[Ti]=e.current,iu(t.nodeType===8?t.parentNode:t),new Hm(e)};Un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Uw(e),t=t===null?null:t.stateNode,t};Un.flushSync=function(t){return wo(t)};Un.hydrate=function(t,e,n){if(!ed(e))throw Error(de(200));return td(null,t,e,!0,n)};Un.hydrateRoot=function(t,e,n){if(!Gm(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yx(e,null,t,1,n??null,i,!1,s,o),t[Ti]=e.current,iu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zh(e)};Un.render=function(t,e,n){if(!ed(e))throw Error(de(200));return td(null,t,e,!1,n)};Un.unmountComponentAtNode=function(t){if(!ed(t))throw Error(de(40));return t._reactRootContainer?(wo(function(){td(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};Un.unstable_batchedUpdates=Bm;Un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ed(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return td(t,e,n,!1,r)};Un.version="18.3.1-next-f1338f8080-20240426";function _x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_x)}catch(t){console.error(t)}}_x(),_w.exports=Un;var uS=_w.exports,dv=uS;Nf.createRoot=dv.createRoot,Nf.hydrateRoot=dv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fu.apply(this,arguments)}var is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(is||(is={}));const fv="popstate";function cS(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:u}=r.location;return Tp("",{pathname:s,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wx(i)}return dS(e,n,null,t)}function Mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hS(){return Math.random().toString(36).substr(2,8)}function pv(t,e){return{usr:t.state,key:t.key,idx:e}}function Tp(t,e,n,r){return n===void 0&&(n=null),fu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ka(e):e,{state:n,key:e&&e.key||r||hS()})}function wx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function dS(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,u=is.Pop,h=null,d=y();d==null&&(d=0,o.replaceState(fu({},o.state,{idx:d}),""));function y(){return(o.state||{idx:null}).idx}function _(){u=is.Pop;let G=y(),D=G==null?null:G-d;d=G,h&&h({action:u,location:z.location,delta:D})}function w(G,D){u=is.Push;let b=Tp(z.location,G,D);d=y()+1;let O=pv(b,d),ee=z.createHref(b);try{o.pushState(O,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(ee)}s&&h&&h({action:u,location:z.location,delta:1})}function P(G,D){u=is.Replace;let b=Tp(z.location,G,D);d=y();let O=pv(b,d),ee=z.createHref(b);o.replaceState(O,"",ee),s&&h&&h({action:u,location:z.location,delta:0})}function M(G){let D=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof G=="string"?G:wx(G);return b=b.replace(/ $/,"%20"),Mt(D,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,D)}let z={get action(){return u},get location(){return t(i,o)},listen(G){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(fv,_),h=G,()=>{i.removeEventListener(fv,_),h=null}},createHref(G){return e(i,G)},createURL:M,encodeLocation(G){let D=M(G);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:w,replace:P,go(G){return o.go(G)}};return z}var mv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mv||(mv={}));function fS(t,e,n){return n===void 0&&(n="/"),pS(t,e,n)}function pS(t,e,n,r){let i=typeof e=="string"?Ka(e):e,s=bx(i.pathname||"/",n);if(s==null)return null;let o=xx(t);mS(o);let u=null;for(let h=0;u==null&&h<o.length;++h){let d=kS(s);u=TS(o[h],d)}return u}function xx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,u)=>{let h={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};h.relativePath.startsWith("/")&&(Mt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let d=fo([r,h.relativePath]),y=n.concat(h);s.children&&s.children.length>0&&(Mt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),xx(s.children,e,y,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:ES(d,s.index),routesMeta:y})};return t.forEach((s,o)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,o);else for(let h of Ex(s.path))i(s,o,h)}),e}function Ex(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ex(r.join("/")),u=[];return u.push(...o.map(h=>h===""?s:[s,h].join("/"))),i&&u.push(...o),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function mS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gS=/^:[\w-]+$/,yS=3,vS=2,_S=1,wS=10,xS=-2,gv=t=>t==="*";function ES(t,e){let n=t.split("/"),r=n.length;return n.some(gv)&&(r+=xS),e&&(r+=vS),n.filter(i=>!gv(i)).reduce((i,s)=>i+(gS.test(s)?yS:s===""?_S:wS),r)}function bS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function TS(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let u=0;u<r.length;++u){let h=r[u],d=u===r.length-1,y=s==="/"?e:e.slice(s.length)||"/",_=IS({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},y),w=h.route;if(!_)return null;Object.assign(i,_.params),o.push({params:i,pathname:fo([s,_.pathname]),pathnameBase:OS(fo([s,_.pathnameBase])),route:w}),_.pathnameBase!=="/"&&(s=fo([s,_.pathnameBase]))}return o}function IS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SS(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((d,y,_)=>{let{paramName:w,isOptional:P}=y;if(w==="*"){let z=u[_]||"";o=s.slice(0,s.length-z.length).replace(/(.)\/+$/,"$1")}const M=u[_];return P&&!M?d[w]=void 0:d[w]=(M||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function SS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const CS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AS=t=>CS.test(t);function PS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ka(t):t,s;if(n)if(AS(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=yv(n.substring(1),"/"):s=yv(n,e)}else s=e;return{pathname:s,search:jS(r),hash:VS(i)}}function yv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function RS(t,e){let n=NS(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function DS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ka(t):(i=fu({},t),Mt(!i.pathname||!i.pathname.includes("?"),hf("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),hf("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),hf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,u;if(o==null)u=n;else{let _=e.length-1;if(!r&&o.startsWith("..")){let w=o.split("/");for(;w[0]==="..";)w.shift(),_-=1;i.pathname=w.join("/")}u=_>=0?e[_]:"/"}let h=PS(i,u),d=o&&o!=="/"&&o.endsWith("/"),y=(s||o===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(d||y)&&(h.pathname+="/"),h}const fo=t=>t.join("/").replace(/\/\/+/g,"/"),OS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Tx=["post","put","patch","delete"];new Set(Tx);const MS=["get",...Tx];new Set(MS);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pu.apply(this,arguments)}const Ym=he.createContext(null),FS=he.createContext(null),nd=he.createContext(null),rd=he.createContext(null),Co=he.createContext({outlet:null,matches:[],isDataRoute:!1}),Ix=he.createContext(null);function id(){return he.useContext(rd)!=null}function Jm(){return id()||Mt(!1),he.useContext(rd).location}function Sx(t){he.useContext(nd).static||he.useLayoutEffect(t)}function Ao(){let{isDataRoute:t}=he.useContext(Co);return t?ZS():US()}function US(){id()||Mt(!1);let t=he.useContext(Ym),{basename:e,future:n,navigator:r}=he.useContext(nd),{matches:i}=he.useContext(Co),{pathname:s}=Jm(),o=JSON.stringify(RS(i,n.v7_relativeSplatPath)),u=he.useRef(!1);return Sx(()=>{u.current=!0}),he.useCallback(function(d,y){if(y===void 0&&(y={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let _=DS(d,JSON.parse(o),s,y.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:fo([e,_.pathname])),(y.replace?r.replace:r.push)(_,y.state,y)},[e,r,o,s,t])}function BS(){let{matches:t}=he.useContext(Co),e=t[t.length-1];return e?e.params:{}}function zS(t,e){return $S(t,e)}function $S(t,e,n,r){id()||Mt(!1);let{navigator:i}=he.useContext(nd),{matches:s}=he.useContext(Co),o=s[s.length-1],u=o?o.params:{};o&&o.pathname;let h=o?o.pathnameBase:"/";o&&o.route;let d=Jm(),y;if(e){var _;let G=typeof e=="string"?Ka(e):e;h==="/"||(_=G.pathname)!=null&&_.startsWith(h)||Mt(!1),y=G}else y=d;let w=y.pathname||"/",P=w;if(h!=="/"){let G=h.replace(/^\//,"").split("/");P="/"+w.replace(/^\//,"").split("/").slice(G.length).join("/")}let M=fS(t,{pathname:P}),z=GS(M&&M.map(G=>Object.assign({},G,{params:Object.assign({},u,G.params),pathname:fo([h,i.encodeLocation?i.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?h:fo([h,i.encodeLocation?i.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),s,n,r);return e&&z?he.createElement(rd.Provider,{value:{location:pu({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:is.Pop}},z):z}function KS(){let t=XS(),e=LS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),n?he.createElement("pre",{style:i},n):null,null)}const qS=he.createElement(KS,null);class WS extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?he.createElement(Co.Provider,{value:this.props.routeContext},he.createElement(Ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HS(t){let{routeContext:e,match:n,children:r}=t,i=he.useContext(Ym);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),he.createElement(Co.Provider,{value:e},r)}function GS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let y=o.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);y>=0||Mt(!1),o=o.slice(0,Math.min(o.length,y+1))}let h=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<o.length;y++){let _=o[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=y),_.route.id){let{loaderData:w,errors:P}=n,M=_.route.loader&&w[_.route.id]===void 0&&(!P||P[_.route.id]===void 0);if(_.route.lazy||M){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((y,_,w)=>{let P,M=!1,z=null,G=null;n&&(P=u&&_.route.id?u[_.route.id]:void 0,z=_.route.errorElement||qS,h&&(d<0&&w===0?(ek("route-fallback"),M=!0,G=null):d===w&&(M=!0,G=_.route.hydrateFallbackElement||null)));let D=e.concat(o.slice(0,w+1)),b=()=>{let O;return P?O=z:M?O=G:_.route.Component?O=he.createElement(_.route.Component,null):_.route.element?O=_.route.element:O=y,he.createElement(HS,{match:_,routeContext:{outlet:y,matches:D,isDataRoute:n!=null},children:O})};return n&&(_.route.ErrorBoundary||_.route.errorElement||w===0)?he.createElement(WS,{location:n.location,revalidation:n.revalidation,component:z,error:P,children:b(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):b()},null)}var kx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kx||{}),Cx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cx||{});function QS(t){let e=he.useContext(Ym);return e||Mt(!1),e}function YS(t){let e=he.useContext(FS);return e||Mt(!1),e}function JS(t){let e=he.useContext(Co);return e||Mt(!1),e}function Ax(t){let e=JS(),n=e.matches[e.matches.length-1];return n.route.id||Mt(!1),n.route.id}function XS(){var t;let e=he.useContext(Ix),n=YS(),r=Ax();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ZS(){let{router:t}=QS(kx.UseNavigateStable),e=Ax(Cx.UseNavigateStable),n=he.useRef(!1);return Sx(()=>{n.current=!0}),he.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pu({fromRouteId:e},s)))},[t,e])}const vv={};function ek(t,e,n){vv[t]||(vv[t]=!0)}function tk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function no(t){Mt(!1)}function nk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=is.Pop,navigator:s,static:o=!1,future:u}=t;id()&&Mt(!1);let h=e.replace(/^\/*/,"/"),d=he.useMemo(()=>({basename:h,navigator:s,static:o,future:pu({v7_relativeSplatPath:!1},u)}),[h,u,s,o]);typeof r=="string"&&(r=Ka(r));let{pathname:y="/",search:_="",hash:w="",state:P=null,key:M="default"}=r,z=he.useMemo(()=>{let G=bx(y,h);return G==null?null:{location:{pathname:G,search:_,hash:w,state:P,key:M},navigationType:i}},[h,y,_,w,P,M,i]);return z==null?null:he.createElement(nd.Provider,{value:d},he.createElement(rd.Provider,{children:n,value:z}))}function rk(t){let{children:e,location:n}=t;return zS(Ip(e),n)}new Promise(()=>{});function Ip(t,e){e===void 0&&(e=[]);let n=[];return he.Children.forEach(t,(r,i)=>{if(!he.isValidElement(r))return;let s=[...e,i];if(r.type===he.Fragment){n.push.apply(n,Ip(r.props.children,s));return}r.type!==no&&Mt(!1),!r.props.index||!r.props.children||Mt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ip(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ik="6";try{window.__reactRouterVersion=ik}catch{}const sk="startTransition",_v=Xb[sk];function ok(t){let{basename:e,children:n,future:r,window:i}=t,s=he.useRef();s.current==null&&(s.current=cS({window:i,v5Compat:!0}));let o=s.current,[u,h]=he.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},y=he.useCallback(_=>{d&&_v?_v(()=>h(_)):h(_)},[h,d]);return he.useLayoutEffect(()=>o.listen(y),[o,y]),he.useEffect(()=>tk(r),[r]),he.createElement(nk,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}var wv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wv||(wv={}));var xv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xv||(xv={}));var ak={exports:{}};(function(t){var e=function(n){var r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(Y,Z,ue){Y[Z]=ue.value},o,u=typeof Symbol=="function"?Symbol:{},h=u.iterator||"@@iterator",d=u.asyncIterator||"@@asyncIterator",y=u.toStringTag||"@@toStringTag";function _(Y,Z,ue){return Object.defineProperty(Y,Z,{value:ue,enumerable:!0,configurable:!0,writable:!0}),Y[Z]}try{_({},"")}catch{_=function(Z,ue,Ee){return Z[ue]=Ee}}function w(Y,Z,ue,Ee){var ae=Z&&Z.prototype instanceof O?Z:O,me=Object.create(ae.prototype),Ne=new qt(Ee||[]);return s(me,"_invoke",{value:B(Y,ue,Ne)}),me}n.wrap=w;function P(Y,Z,ue){try{return{type:"normal",arg:Y.call(Z,ue)}}catch(Ee){return{type:"throw",arg:Ee}}}var M="suspendedStart",z="suspendedYield",G="executing",D="completed",b={};function O(){}function ee(){}function X(){}var se={};_(se,h,function(){return this});var C=Object.getPrototypeOf,I=C&&C(C(hn([])));I&&I!==r&&i.call(I,h)&&(se=I);var R=X.prototype=O.prototype=Object.create(se);ee.prototype=X,s(R,"constructor",{value:X,configurable:!0}),s(X,"constructor",{value:ee,configurable:!0}),ee.displayName=_(X,y,"GeneratorFunction");function S(Y){["next","throw","return"].forEach(function(Z){_(Y,Z,function(ue){return this._invoke(Z,ue)})})}n.isGeneratorFunction=function(Y){var Z=typeof Y=="function"&&Y.constructor;return Z?Z===ee||(Z.displayName||Z.name)==="GeneratorFunction":!1},n.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,X):(Y.__proto__=X,_(Y,y,"GeneratorFunction")),Y.prototype=Object.create(R),Y},n.awrap=function(Y){return{__await:Y}};function N(Y,Z){function ue(me,Ne,Re,Fe){var tt=P(Y[me],Y,Ne);if(tt.type==="throw")Fe(tt.arg);else{var Ie=tt.arg,xn=Ie.value;return xn&&typeof xn=="object"&&i.call(xn,"__await")?Z.resolve(xn.__await).then(function(Xt){ue("next",Xt,Re,Fe)},function(Xt){ue("throw",Xt,Re,Fe)}):Z.resolve(xn).then(function(Xt){Ie.value=Xt,Re(Ie)},function(Xt){return ue("throw",Xt,Re,Fe)})}}var Ee;function ae(me,Ne){function Re(){return new Z(function(Fe,tt){ue(me,Ne,Fe,tt)})}return Ee=Ee?Ee.then(Re,Re):Re()}s(this,"_invoke",{value:ae})}S(N.prototype),_(N.prototype,d,function(){return this}),n.AsyncIterator=N,n.async=function(Y,Z,ue,Ee,ae){ae===void 0&&(ae=Promise);var me=new N(w(Y,Z,ue,Ee),ae);return n.isGeneratorFunction(Z)?me:me.next().then(function(Ne){return Ne.done?Ne.value:me.next()})};function B(Y,Z,ue){var Ee=M;return function(me,Ne){if(Ee===G)throw new Error("Generator is already running");if(Ee===D){if(me==="throw")throw Ne;return re()}for(ue.method=me,ue.arg=Ne;;){var Re=ue.delegate;if(Re){var Fe=A(Re,ue);if(Fe){if(Fe===b)continue;return Fe}}if(ue.method==="next")ue.sent=ue._sent=ue.arg;else if(ue.method==="throw"){if(Ee===M)throw Ee=D,ue.arg;ue.dispatchException(ue.arg)}else ue.method==="return"&&ue.abrupt("return",ue.arg);Ee=G;var tt=P(Y,Z,ue);if(tt.type==="normal"){if(Ee=ue.done?D:z,tt.arg===b)continue;return{value:tt.arg,done:ue.done}}else tt.type==="throw"&&(Ee=D,ue.method="throw",ue.arg=tt.arg)}}}function A(Y,Z){var ue=Z.method,Ee=Y.iterator[ue];if(Ee===o)return Z.delegate=null,ue==="throw"&&Y.iterator.return&&(Z.method="return",Z.arg=o,A(Y,Z),Z.method==="throw")||ue!=="return"&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+ue+"' method")),b;var ae=P(Ee,Y.iterator,Z.arg);if(ae.type==="throw")return Z.method="throw",Z.arg=ae.arg,Z.delegate=null,b;var me=ae.arg;if(!me)return Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,b;if(me.done)Z[Y.resultName]=me.value,Z.next=Y.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=o);else return me;return Z.delegate=null,b}S(R),_(R,y,"Generator"),_(R,h,function(){return this}),_(R,"toString",function(){return"[object Generator]"});function Xe(Y){var Z={tryLoc:Y[0]};1 in Y&&(Z.catchLoc=Y[1]),2 in Y&&(Z.finallyLoc=Y[2],Z.afterLoc=Y[3]),this.tryEntries.push(Z)}function dt(Y){var Z=Y.completion||{};Z.type="normal",delete Z.arg,Y.completion=Z}function qt(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(Xe,this),this.reset(!0)}n.keys=function(Y){var Z=Object(Y),ue=[];for(var Ee in Z)ue.push(Ee);return ue.reverse(),function ae(){for(;ue.length;){var me=ue.pop();if(me in Z)return ae.value=me,ae.done=!1,ae}return ae.done=!0,ae}};function hn(Y){if(Y){var Z=Y[h];if(Z)return Z.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length)){var ue=-1,Ee=function ae(){for(;++ue<Y.length;)if(i.call(Y,ue))return ae.value=Y[ue],ae.done=!1,ae;return ae.value=o,ae.done=!0,ae};return Ee.next=Ee}}return{next:re}}n.values=hn;function re(){return{value:o,done:!0}}return qt.prototype={constructor:qt,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(dt),!Y)for(var Z in this)Z.charAt(0)==="t"&&i.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=o)},stop:function(){this.done=!0;var Y=this.tryEntries[0],Z=Y.completion;if(Z.type==="throw")throw Z.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var Z=this;function ue(Fe,tt){return me.type="throw",me.arg=Y,Z.next=Fe,tt&&(Z.method="next",Z.arg=o),!!tt}for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var ae=this.tryEntries[Ee],me=ae.completion;if(ae.tryLoc==="root")return ue("end");if(ae.tryLoc<=this.prev){var Ne=i.call(ae,"catchLoc"),Re=i.call(ae,"finallyLoc");if(Ne&&Re){if(this.prev<ae.catchLoc)return ue(ae.catchLoc,!0);if(this.prev<ae.finallyLoc)return ue(ae.finallyLoc)}else if(Ne){if(this.prev<ae.catchLoc)return ue(ae.catchLoc,!0)}else if(Re){if(this.prev<ae.finallyLoc)return ue(ae.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Y,Z){for(var ue=this.tryEntries.length-1;ue>=0;--ue){var Ee=this.tryEntries[ue];if(Ee.tryLoc<=this.prev&&i.call(Ee,"finallyLoc")&&this.prev<Ee.finallyLoc){var ae=Ee;break}}ae&&(Y==="break"||Y==="continue")&&ae.tryLoc<=Z&&Z<=ae.finallyLoc&&(ae=null);var me=ae?ae.completion:{};return me.type=Y,me.arg=Z,ae?(this.method="next",this.next=ae.finallyLoc,b):this.complete(me)},complete:function(Y,Z){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&Z&&(this.next=Z),b},finish:function(Y){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var ue=this.tryEntries[Z];if(ue.finallyLoc===Y)return this.complete(ue.completion,ue.afterLoc),dt(ue),b}},catch:function(Y){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var ue=this.tryEntries[Z];if(ue.tryLoc===Y){var Ee=ue.completion;if(Ee.type==="throw"){var ae=Ee.arg;dt(ue)}return ae}}throw new Error("illegal catch attempt")},delegateYield:function(Y,Z,ue){return this.delegate={iterator:hn(Y),resultName:Z,nextLoc:ue},this.method==="next"&&(this.arg=o),b}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(ak);var Xm=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const lk=Xm;let Ev=0;var Px=({id:t,action:e,payload:n={}})=>{let r=t;return typeof r>"u"&&(r=lk("Job",Ev),Ev+=1),{id:r,action:e,payload:n}},qa={};let Zm=!1;qa.logging=Zm;qa.setLogging=t=>{Zm=t};qa.log=(...t)=>Zm?console.log.apply(void 0,t):null;const uk=Px,{log:_c}=qa,ck=Xm;let bv=0;var hk=()=>{const t=ck("Scheduler",bv),e={},n={};let r=[];bv+=1;const i=()=>r.length,s=()=>Object.keys(e).length,o=()=>{if(r.length!==0){const _=Object.keys(e);for(let w=0;w<_.length;w+=1)if(typeof n[_[w]]>"u"){r[0](e[_[w]]);break}}},u=(_,w)=>new Promise((P,M)=>{const z=uk({action:_,payload:w});r.push(async G=>{r.shift(),n[G.id]=z;try{P(await G[_].apply(void 0,[...w,z.id]))}catch(D){M(D)}finally{delete n[G.id],o()}}),_c(`[${t}]: Add ${z.id} to JobQueue`),_c(`[${t}]: JobQueue length=${r.length}`),o()});return{addWorker:_=>(e[_.id]=_,_c(`[${t}]: Add ${_.id}`),_c(`[${t}]: Number of workers=${s()}`),o(),_.id),addJob:async(_,...w)=>{if(s()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return u(_,w)},terminate:async()=>{Object.keys(e).forEach(async _=>{await e[_].terminate()}),r=[]},getQueueLen:i,getNumWorkers:s}};function dk(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function fk(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var pk=fk;const mk=pk;var gk=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":mk()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof dk=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const yk=gk("type")==="browser",vk=yk?t=>new URL(t,window.location.href).href:t=>t;var _k=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(n=>{t[n]&&(e[n]=vk(e[n]))}),e},wk=t=>{const e=[],n=[],r=[],i=[],s=[];return t.blocks&&t.blocks.forEach(o=>{o.paragraphs.forEach(u=>{u.lines.forEach(h=>{h.words.forEach(d=>{d.symbols.forEach(y=>{s.push({...y,page:t,block:o,paragraph:u,line:h,word:d})}),i.push({...d,page:t,block:o,paragraph:u,line:h})}),r.push({...h,page:t,block:o,paragraph:u})}),n.push({...u,page:t,block:o})}),e.push({...o,page:t})}),{...t,blocks:e,paragraphs:n,lines:r,words:i,symbols:s}},Nx={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const xk="5.1.1",Ek={version:xk};var bk={workerBlobURL:!0,logger:()=>{}};const Tk=Ek.version,Ik=bk;var Sk={...Ik,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Tk}/dist/worker.min.js`},kk=({workerPath:t,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(t);return n},Ck=t=>{t.terminate()},Ak=(t,e)=>{t.onmessage=({data:n})=>{e(n)}},Pk=async(t,e)=>{t.postMessage(e)};const df=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:i}}})=>{n(Error(`File could not be read! Code=${i}`))},r.readAsArrayBuffer(t)}),Sp=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await Sp(t.src)),t.tagName==="VIDEO"&&(e=await Sp(t.poster)),t.tagName==="CANVAS"&&await new Promise(n=>{t.toBlob(async r=>{e=await df(r),n()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const n=await t.convertToBlob();e=await df(n)}else(t instanceof File||t instanceof Blob)&&(e=await df(t));return new Uint8Array(e)};var Nk=Sp;const Rk=Sk,Dk=kk,Ok=Ck,jk=Ak,Vk=Pk,Lk=Nk;var Mk={defaultOptions:Rk,spawnWorker:Dk,terminateWorker:Ok,onMessage:jk,send:Vk,loadImage:Lk};const Fk=_k,Uk=wk,yr=Px,{log:Tv}=qa,Bk=Xm,Zs=Nx,{defaultOptions:zk,spawnWorker:$k,terminateWorker:Kk,onMessage:qk,loadImage:Iv,send:Wk}=Mk;let Sv=0;var Rx=async(t="eng",e=Zs.LSTM_ONLY,n={},r={})=>{const i=Bk("Worker",Sv),{logger:s,errorHandler:o,...u}=Fk({...zk,...n}),h={},d={},y=typeof t=="string"?t.split("+"):t;let _=e,w=r;const P=[Zs.DEFAULT,Zs.LSTM_ONLY].includes(e)&&!u.legacyCore;let M,z;const G=new Promise((ae,me)=>{z=ae,M=me}),D=ae=>{M(ae.message)};let b=$k(u);b.onerror=D,Sv+=1;const O=(ae,me)=>{h[ae]=me},ee=(ae,me)=>{d[ae]=me},X=({id:ae,action:me,payload:Ne})=>new Promise((Re,Fe)=>{Tv(`[${i}]: Start ${ae}, action=${me}`);const tt=`${me}-${ae}`;O(tt,Re),ee(tt,Fe),Wk(b,{workerId:i,jobId:ae,action:me,payload:Ne})}),se=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),C=ae=>X(yr({id:ae,action:"load",payload:{options:{lstmOnly:P,corePath:u.corePath,logging:u.logging}}})),I=(ae,me,Ne)=>X(yr({id:Ne,action:"FS",payload:{method:"writeFile",args:[ae,me]}})),R=(ae,me)=>X(yr({id:me,action:"FS",payload:{method:"readFile",args:[ae,{encoding:"utf8"}]}})),S=(ae,me)=>X(yr({id:me,action:"FS",payload:{method:"unlink",args:[ae]}})),N=(ae,me,Ne)=>X(yr({id:Ne,action:"FS",payload:{method:ae,args:me}})),B=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),A=(ae,me)=>X(yr({id:me,action:"loadLanguage",payload:{langs:ae,options:{langPath:u.langPath,dataPath:u.dataPath,cachePath:u.cachePath,cacheMethod:u.cacheMethod,gzip:u.gzip,lstmOnly:[Zs.DEFAULT,Zs.LSTM_ONLY].includes(_)&&!u.legacyLang}}})),Xe=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),dt=(ae,me,Ne,Re)=>X(yr({id:Re,action:"initialize",payload:{langs:ae,oem:me,config:Ne}})),qt=(ae="eng",me,Ne,Re)=>{if(P&&[Zs.TESSERACT_ONLY,Zs.TESSERACT_LSTM_COMBINED].includes(me))throw Error("Legacy model requested but code missing.");const Fe=me||_;_=Fe;const tt=Ne||w;w=tt;const xn=(typeof ae=="string"?ae.split("+"):ae).filter(Xt=>!y.includes(Xt));return y.push(...xn),xn.length>0?A(xn,Re).then(()=>dt(ae,Fe,tt,Re)):dt(ae,Fe,tt,Re)},hn=(ae={},me)=>X(yr({id:me,action:"setParameters",payload:{params:ae}})),re=async(ae,me={},Ne={blocks:!0,text:!0,hocr:!0,tsv:!0},Re)=>X(yr({id:Re,action:"recognize",payload:{image:await Iv(ae),options:me,output:Ne}})),Y=(ae="Tesseract OCR Result",me=!1,Ne)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),X(yr({id:Ne,action:"getPDF",payload:{title:ae,textonly:me}}))),Z=async(ae,me)=>{if(P)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return X(yr({id:me,action:"detect",payload:{image:await Iv(ae)}}))},ue=async()=>(b!==null&&(Kk(b),b=null),Promise.resolve());qk(b,({workerId:ae,jobId:me,status:Ne,action:Re,data:Fe})=>{const tt=`${Re}-${me}`;if(Ne==="resolve"){Tv(`[${ae}]: Complete ${me}`);let Ie=Fe;Re==="recognize"?Ie=Uk(Fe):Re==="getPDF"&&(Ie=Array.from({...Fe,length:Object.keys(Fe).length})),h[tt]({jobId:me,data:Ie})}else if(Ne==="reject")if(d[tt](Fe),Re==="load"&&M(Fe),o)o(Fe);else throw Error(Fe);else Ne==="progress"&&s({...Fe,userJobId:me})});const Ee={id:i,worker:b,setResolve:O,setReject:ee,load:se,writeText:I,readText:R,removeFile:S,FS:N,loadLanguage:B,initialize:Xe,reinitialize:qt,setParameters:hn,recognize:re,getPDF:Y,detect:Z,terminate:ue};return C().then(()=>A(t)).then(()=>dt(t,e,r)).then(()=>z(Ee)).catch(()=>{}),G};const Dx=Rx,Hk=async(t,e,n)=>{const r=await Dx(e,1,n);return r.recognize(t).finally(async()=>{await r.terminate()})},Gk=async(t,e)=>{const n=await Dx("osd",0,e);return n.detect(t).finally(async()=>{await n.terminate()})};var Qk={recognize:Hk,detect:Gk},Yk={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Jk={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Xk=hk,Zk=Rx,eC=Qk,tC=Yk,nC=Nx,rC=Jk,{setLogging:iC}=qa;var sC={languages:tC,OEM:nC,PSM:rC,createScheduler:Xk,createWorker:Zk,setLogging:iC,...eC};const oC=em(sC);var Ox={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(ry,function(){var n=function(l,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(f[x]=g[x])})(l,c)},r=function(){return(r=Object.assign||function(l){for(var c,f=1,g=arguments.length;f<g;f++)for(var x in c=arguments[f])Object.prototype.hasOwnProperty.call(c,x)&&(l[x]=c[x]);return l}).apply(this,arguments)};function i(l,c,f){for(var g,x=0,E=c.length;x<E;x++)!g&&x in c||((g=g||Array.prototype.slice.call(c,0,x))[x]=c[x]);return l.concat(g||Array.prototype.slice.call(c))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ry,o=Object.keys,u=Array.isArray;function h(l,c){return typeof c!="object"||o(c).forEach(function(f){l[f]=c[f]}),l}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var d=Object.getPrototypeOf,y={}.hasOwnProperty;function _(l,c){return y.call(l,c)}function w(l,c){typeof c=="function"&&(c=c(d(l))),(typeof Reflect>"u"?o:Reflect.ownKeys)(c).forEach(function(f){M(l,f,c[f])})}var P=Object.defineProperty;function M(l,c,f,g){P(l,c,h(f&&_(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},g))}function z(l){return{from:function(c){return l.prototype=Object.create(c.prototype),M(l.prototype,"constructor",l),{extend:w.bind(null,l.prototype)}}}}var G=Object.getOwnPropertyDescriptor,D=[].slice;function b(l,c,f){return D.call(l,c,f)}function O(l,c){return c(l)}function ee(l){if(!l)throw new Error("Assertion Failed")}function X(l){s.setImmediate?setImmediate(l):setTimeout(l,0)}function se(l,c){if(typeof c=="string"&&_(l,c))return l[c];if(!c)return l;if(typeof c!="string"){for(var f=[],g=0,x=c.length;g<x;++g){var E=se(l,c[g]);f.push(E)}return f}var k=c.indexOf(".");if(k!==-1){var j=l[c.substr(0,k)];return j==null?void 0:se(j,c.substr(k+1))}}function C(l,c,f){if(l&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(l)))if(typeof c!="string"&&"length"in c){ee(typeof f!="string"&&"length"in f);for(var g=0,x=c.length;g<x;++g)C(l,c[g],f[g])}else{var E,k,j=c.indexOf(".");j!==-1?(E=c.substr(0,j),(k=c.substr(j+1))===""?f===void 0?u(l)&&!isNaN(parseInt(E))?l.splice(E,1):delete l[E]:l[E]=f:C(j=!(j=l[E])||!_(l,E)?l[E]={}:j,k,f)):f===void 0?u(l)&&!isNaN(parseInt(c))?l.splice(c,1):delete l[c]:l[c]=f}}function I(l){var c,f={};for(c in l)_(l,c)&&(f[c]=l[c]);return f}var R=[].concat;function S(l){return R.apply([],l)}var Pr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map(function(l){return["Int","Uint","Float"].map(function(c){return c+l+"Array"})}))).filter(function(l){return s[l]}),N=new Set(Pr.map(function(l){return s[l]})),B=null;function A(l){return B=new WeakMap,l=function c(f){if(!f||typeof f!="object")return f;var g=B.get(f);if(g)return g;if(u(f)){g=[],B.set(f,g);for(var x=0,E=f.length;x<E;++x)g.push(c(f[x]))}else if(N.has(f.constructor))g=f;else{var k,j=d(f);for(k in g=j===Object.prototype?{}:Object.create(j),B.set(f,g),f)_(f,k)&&(g[k]=c(f[k]))}return g}(l),B=null,l}var Xe={}.toString;function dt(l){return Xe.call(l).slice(8,-1)}var qt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",hn=typeof qt=="symbol"?function(l){var c;return l!=null&&(c=l[qt])&&c.apply(l)}:function(){return null};function re(l,c){return c=l.indexOf(c),0<=c&&l.splice(c,1),0<=c}var Y={};function Z(l){var c,f,g,x;if(arguments.length===1){if(u(l))return l.slice();if(this===Y&&typeof l=="string")return[l];if(x=hn(l)){for(f=[];!(g=x.next()).done;)f.push(g.value);return f}if(l==null)return[l];if(typeof(c=l.length)!="number")return[l];for(f=new Array(c);c--;)f[c]=l[c];return f}for(c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return f}var ue=typeof Symbol<"u"?function(l){return l[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ir=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Gn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ir),Ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ae(l,c){this.name=l,this.message=c}function me(l,c){return l+". Errors: "+Object.keys(c).map(function(f){return c[f].toString()}).filter(function(f,g,x){return x.indexOf(f)===g}).join(`
`)}function Ne(l,c,f,g){this.failures=c,this.failedKeys=g,this.successCount=f,this.message=me(l,c)}function Re(l,c){this.name="BulkError",this.failures=Object.keys(c).map(function(f){return c[f]}),this.failuresByPos=c,this.message=me(l,this.failures)}z(ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),z(Ne).from(ae),z(Re).from(ae);var Fe=Gn.reduce(function(l,c){return l[c]=c+"Error",l},{}),tt=ae,Ie=Gn.reduce(function(l,c){var f=c+"Error";function g(x,E){this.name=f,x?typeof x=="string"?(this.message="".concat(x).concat(E?`
 `+E:""),this.inner=E||null):typeof x=="object"&&(this.message="".concat(x.name," ").concat(x.message),this.inner=x):(this.message=Ee[c]||f,this.inner=null)}return z(g).from(tt),l[c]=g,l},{});Ie.Syntax=SyntaxError,Ie.Type=TypeError,Ie.Range=RangeError;var xn=ir.reduce(function(l,c){return l[c+"Error"]=Ie[c],l},{}),Xt=Gn.reduce(function(l,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(l[c+"Error"]=Ie[c]),l},{});function Ze(){}function ri(l){return l}function Fu(l,c){return l==null||l===ri?c:function(f){return c(l(f))}}function ii(l,c){return function(){l.apply(this,arguments),c.apply(this,arguments)}}function el(l,c){return l===Ze?c:function(){var f=l.apply(this,arguments);f!==void 0&&(arguments[0]=f);var g=this.onsuccess,x=this.onerror;this.onsuccess=null,this.onerror=null;var E=c.apply(this,arguments);return g&&(this.onsuccess=this.onsuccess?ii(g,this.onsuccess):g),x&&(this.onerror=this.onerror?ii(x,this.onerror):x),E!==void 0?E:f}}function tl(l,c){return l===Ze?c:function(){l.apply(this,arguments);var f=this.onsuccess,g=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?ii(f,this.onsuccess):f),g&&(this.onerror=this.onerror?ii(g,this.onerror):g)}}function Uu(l,c){return l===Ze?c:function(f){var g=l.apply(this,arguments);h(f,g);var x=this.onsuccess,E=this.onerror;return this.onsuccess=null,this.onerror=null,f=c.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?ii(x,this.onsuccess):x),E&&(this.onerror=this.onerror?ii(E,this.onerror):E),g===void 0?f===void 0?void 0:f:h(g,f)}}function Ut(l,c){return l===Ze?c:function(){return c.apply(this,arguments)!==!1&&l.apply(this,arguments)}}function Nt(l,c){return l===Ze?c:function(){var f=l.apply(this,arguments);if(f&&typeof f.then=="function"){for(var g=this,x=arguments.length,E=new Array(x);x--;)E[x]=arguments[x];return f.then(function(){return c.apply(g,E)})}return c.apply(this,arguments)}}Xt.ModifyError=Ne,Xt.DexieError=ae,Xt.BulkError=Re;var dn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Bu(l){dn=l}var Ri={},zu=100,Pr=typeof Promise>"u"?[]:function(){var l=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[l,d(l),l];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,d(c),l]}(),ir=Pr[0],Gn=Pr[1],Pr=Pr[2],Gn=Gn&&Gn.then,Nr=ir&&ir.constructor,Ds=!!Pr,Os=function(l,c){Di.push([l,c]),js&&(queueMicrotask(Pd),js=!1)},nl=!0,js=!0,Rr=[],Dr=[],Vs=ri,zn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ze,pgp:!1,env:{},finalize:Ze},Se=zn,Di=[],$n=0,Ls=[];function _e(l){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=Se;if(typeof l!="function"){if(l!==Ri)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&jo(this,this._value))}this._state=null,this._value=null,++c.ref,function f(g,x){try{x(function(E){if(g._state===null){if(E===g)throw new TypeError("A promise cannot be resolved with itself.");var k=g._lib&&An();E&&typeof E.then=="function"?f(g,function(j,L){E instanceof _e?E._then(j,L):E.then(j,L)}):(g._state=!0,g._value=E,Oi(g)),k&&ji()}},jo.bind(null,g))}catch(E){jo(g,E)}}(this,l)}var Oo={get:function(){var l=Se,c=Pn;function f(g,x){var E=this,k=!l.global&&(l!==Se||c!==Pn),j=k&&!Kn(),L=new _e(function(F,q){si(E,new Bt(sl(g,l,k,j),sl(x,l,k,j),F,q,l))});return this._consoleTask&&(L._consoleTask=this._consoleTask),L}return f.prototype=Ri,f},set:function(l){M(this,"then",l&&l.prototype===Ri?Oo:{get:function(){return l},set:Oo.set})}};function Bt(l,c,f,g,x){this.onFulfilled=typeof l=="function"?l:null,this.onRejected=typeof c=="function"?c:null,this.resolve=f,this.reject=g,this.psd=x}function jo(l,c){var f,g;Dr.push(c),l._state===null&&(f=l._lib&&An(),c=Vs(c),l._state=!1,l._value=c,g=l,Rr.some(function(x){return x._value===g._value})||Rr.push(g),Oi(l),f&&ji())}function Oi(l){var c=l._listeners;l._listeners=[];for(var f=0,g=c.length;f<g;++f)si(l,c[f]);var x=l._PSD;--x.ref||x.finalize(),$n===0&&(++$n,Os(function(){--$n==0&&rl()},[]))}function si(l,c){if(l._state!==null){var f=l._state?c.onFulfilled:c.onRejected;if(f===null)return(l._state?c.resolve:c.reject)(l._value);++c.psd.ref,++$n,Os(Ad,[f,l,c])}else l._listeners.push(c)}function Ad(l,c,f){try{var g,x=c._value;!c._state&&Dr.length&&(Dr=[]),g=dn&&c._consoleTask?c._consoleTask.run(function(){return l(x)}):l(x),c._state||Dr.indexOf(x)!==-1||function(E){for(var k=Rr.length;k;)if(Rr[--k]._value===E._value)return Rr.splice(k,1)}(c),f.resolve(g)}catch(E){f.reject(E)}finally{--$n==0&&rl(),--f.psd.ref||f.psd.finalize()}}function Pd(){qn(zn,function(){An()&&ji()})}function An(){var l=nl;return js=nl=!1,l}function ji(){var l,c,f;do for(;0<Di.length;)for(l=Di,Di=[],f=l.length,c=0;c<f;++c){var g=l[c];g[0].apply(null,g[1])}while(0<Di.length);js=nl=!0}function rl(){var l=Rr;Rr=[],l.forEach(function(g){g._PSD.onunhandled.call(null,g._value,g)});for(var c=Ls.slice(0),f=c.length;f;)c[--f]()}function oi(l){return new _e(Ri,!1,l)}function st(l,c){var f=Se;return function(){var g=An(),x=Se;try{return or(f,!0),l.apply(this,arguments)}catch(E){c&&c(E)}finally{or(x,!1),g&&ji()}}}w(_e.prototype,{then:Oo,_then:function(l,c){si(this,new Bt(null,null,l,c,Se))},catch:function(l){if(arguments.length===1)return this.then(null,l);var c=l,f=arguments[1];return typeof c=="function"?this.then(null,function(g){return(g instanceof c?f:oi)(g)}):this.then(null,function(g){return(g&&g.name===c?f:oi)(g)})},finally:function(l){return this.then(function(c){return _e.resolve(l()).then(function(){return c})},function(c){return _e.resolve(l()).then(function(){return oi(c)})})},timeout:function(l,c){var f=this;return l<1/0?new _e(function(g,x){var E=setTimeout(function(){return x(new Ie.Timeout(c))},l);f.then(g,x).finally(clearTimeout.bind(null,E))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&M(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),zn.env=Ku(),w(_e,{all:function(){var l=Z.apply(null,arguments).map(Ms);return new _e(function(c,f){l.length===0&&c([]);var g=l.length;l.forEach(function(x,E){return _e.resolve(x).then(function(k){l[E]=k,--g||c(l)},f)})})},resolve:function(l){return l instanceof _e?l:l&&typeof l.then=="function"?new _e(function(c,f){l.then(c,f)}):new _e(Ri,!0,l)},reject:oi,race:function(){var l=Z.apply(null,arguments).map(Ms);return new _e(function(c,f){l.map(function(g){return _e.resolve(g).then(c,f)})})},PSD:{get:function(){return Se},set:function(l){return Se=l}},totalEchoes:{get:function(){return Pn}},newPSD:sr,usePSD:qn,scheduler:{get:function(){return Os},set:function(l){Os=l}},rejectionMapper:{get:function(){return Vs},set:function(l){Vs=l}},follow:function(l,c){return new _e(function(f,g){return sr(function(x,E){var k=Se;k.unhandleds=[],k.onunhandled=E,k.finalize=ii(function(){var j,L=this;j=function(){L.unhandleds.length===0?x():E(L.unhandleds[0])},Ls.push(function F(){j(),Ls.splice(Ls.indexOf(F),1)}),++$n,Os(function(){--$n==0&&rl()},[])},k.finalize),l()},c,f,g)})}}),Nr&&(Nr.allSettled&&M(_e,"allSettled",function(){var l=Z.apply(null,arguments).map(Ms);return new _e(function(c){l.length===0&&c([]);var f=l.length,g=new Array(f);l.forEach(function(x,E){return _e.resolve(x).then(function(k){return g[E]={status:"fulfilled",value:k}},function(k){return g[E]={status:"rejected",reason:k}}).then(function(){return--f||c(g)})})})}),Nr.any&&typeof AggregateError<"u"&&M(_e,"any",function(){var l=Z.apply(null,arguments).map(Ms);return new _e(function(c,f){l.length===0&&f(new AggregateError([]));var g=l.length,x=new Array(g);l.forEach(function(E,k){return _e.resolve(E).then(function(j){return c(j)},function(j){x[k]=j,--g||f(new AggregateError(x))})})})}),Nr.withResolvers&&(_e.withResolvers=Nr.withResolvers));var xt={awaits:0,echoes:0,id:0},il=0,Or=[],Vo=0,Pn=0,$u=0;function sr(l,c,f,g){var x=Se,E=Object.create(x);return E.parent=x,E.ref=0,E.global=!1,E.id=++$u,zn.env,E.env=Ds?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},c&&h(E,c),++x.ref,E.finalize=function(){--this.parent.ref||this.parent.finalize()},g=qn(E,l,f,g),E.ref===0&&E.finalize(),g}function jr(){return xt.id||(xt.id=++il),++xt.awaits,xt.echoes+=zu,xt.id}function Kn(){return!!xt.awaits&&(--xt.awaits==0&&(xt.id=0),xt.echoes=xt.awaits*zu,!0)}function Ms(l){return xt.echoes&&l&&l.constructor===Nr?(jr(),l.then(function(c){return Kn(),c},function(c){return Kn(),ot(c)})):l}function Nd(){var l=Or[Or.length-1];Or.pop(),or(l,!1)}function or(l,c){var f,g=Se;(c?!xt.echoes||Vo++&&l===Se:!Vo||--Vo&&l===Se)||queueMicrotask(c?(function(x){++Pn,xt.echoes&&--xt.echoes!=0||(xt.echoes=xt.awaits=xt.id=0),Or.push(Se),or(x,!0)}).bind(null,l):Nd),l!==Se&&(Se=l,g===zn&&(zn.env=Ku()),Ds&&(f=zn.env.Promise,c=l.env,(g.global||l.global)&&(Object.defineProperty(s,"Promise",c.PromiseProp),f.all=c.all,f.race=c.race,f.resolve=c.resolve,f.reject=c.reject,c.allSettled&&(f.allSettled=c.allSettled),c.any&&(f.any=c.any))))}function Ku(){var l=s.Promise;return Ds?{Promise:l,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:l.all,race:l.race,allSettled:l.allSettled,any:l.any,resolve:l.resolve,reject:l.reject}:{}}function qn(l,c,f,g,x){var E=Se;try{return or(l,!0),c(f,g,x)}finally{or(E,!1)}}function sl(l,c,f,g){return typeof l!="function"?l:function(){var x=Se;f&&jr(),or(c,!0);try{return l.apply(this,arguments)}finally{or(x,!1),g&&queueMicrotask(Kn)}}}function Fs(l){Promise===Nr&&xt.echoes===0?Vo===0?l():enqueueNativeMicroTask(l):setTimeout(l,0)}(""+Gn).indexOf("[native code]")===-1&&(jr=Kn=Ze);var ot=_e.reject,fn="",Nn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qu="String expected.",ai=[],Us="__dbnames",Lo="readonly",Bs="readwrite";function ar(l,c){return l?c?function(){return l.apply(this,arguments)&&c.apply(this,arguments)}:l:c}var ol={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zs(l){return typeof l!="string"||/\./.test(l)?function(c){return c}:function(c){return c[l]===void 0&&l in c&&delete(c=A(c))[l],c}}function al(){throw Ie.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ze(l,c){try{var f=lr(l),g=lr(c);if(f!==g)return f==="Array"?1:g==="Array"?-1:f==="binary"?1:g==="binary"?-1:f==="string"?1:g==="string"?-1:f==="Date"?1:g!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return c<l?1:l<c?-1:0;case"binary":return function(x,E){for(var k=x.length,j=E.length,L=k<j?k:j,F=0;F<L;++F)if(x[F]!==E[F])return x[F]<E[F]?-1:1;return k===j?0:k<j?-1:1}(Rn(l),Rn(c));case"Array":return function(x,E){for(var k=x.length,j=E.length,L=k<j?k:j,F=0;F<L;++F){var q=ze(x[F],E[F]);if(q!==0)return q}return k===j?0:k<j?-1:1}(l,c)}}catch{}return NaN}function lr(l){var c=typeof l;return c!="object"?c:ArrayBuffer.isView(l)?"binary":(l=dt(l),l==="ArrayBuffer"?"binary":l)}function Rn(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l)}function Vr(l,c,f){var g=l.schema.yProps;return g?(c&&0<f.numFailures&&(c=c.filter(function(x,E){return!f.failures[E]})),Promise.all(g.map(function(x){return x=x.updatesTable,c?l.db.table(x).where("k").anyOf(c).delete():l.db.table(x).clear()})).then(function(){return f})):f}var ur=(Mo.prototype.execute=function(l){var c=this["@@propmod"];if(c.add!==void 0){var f=c.add;if(u(f))return i(i([],u(l)?l:[],!0),f).sort();if(typeof f=="number")return(Number(l)||0)+f;if(typeof f=="bigint")try{return BigInt(l)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(c.remove!==void 0){var g=c.remove;if(u(g))return u(l)?l.filter(function(x){return!g.includes(x)}).sort():[];if(typeof g=="number")return Number(l)-g;if(typeof g=="bigint")try{return BigInt(l)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return f=(f=c.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof l=="string"&&l.startsWith(f)?c.replacePrefix[1]+l.substring(f.length):l},Mo);function Mo(l){this["@@propmod"]=l}function it(l,c){for(var f=o(c),g=f.length,x=!1,E=0;E<g;++E){var k=f[E],j=c[k],L=se(l,k);j instanceof ur?(C(l,k,j.execute(L)),x=!0):L!==j&&(C(l,k,j),x=!0)}return x}var $s=(Je.prototype._trans=function(l,c,f){var g=this._tx||Se.trans,x=this.name,E=dn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(l==="readonly"?"read":"write"," ").concat(this.name));function k(F,q,V){if(!V.schema[x])throw new Ie.NotFound("Table "+x+" not part of transaction");return c(V.idbtrans,V)}var j=An();try{var L=g&&g.db._novip===this.db._novip?g===Se.trans?g._promise(l,k,f):sr(function(){return g._promise(l,k,f)},{trans:g,transless:Se.transless||Se}):function F(q,V,H,U){if(q.idbdb&&(q._state.openComplete||Se.letThrough||q._vip)){var $=q._createTransaction(V,H,q._dbSchema);try{$.create(),q._state.PR1398_maxLoop=3}catch(K){return K.name===Fe.InvalidState&&q.isOpen()&&0<--q._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),q.close({disableAutoOpen:!1}),q.open().then(function(){return F(q,V,H,U)})):ot(K)}return $._promise(V,function(K,W){return sr(function(){return Se.trans=$,U(K,W,$)})}).then(function(K){if(V==="readwrite")try{$.idbtrans.commit()}catch{}return V==="readonly"?K:$._completion.then(function(){return K})})}if(q._state.openComplete)return ot(new Ie.DatabaseClosed(q._state.dbOpenError));if(!q._state.isBeingOpened){if(!q._state.autoOpen)return ot(new Ie.DatabaseClosed);q.open().catch(Ze)}return q._state.dbReadyPromise.then(function(){return F(q,V,H,U)})}(this.db,l,[this.name],k);return E&&(L._consoleTask=E,L=L.catch(function(F){return console.trace(F),ot(F)})),L}finally{j&&ji()}},Je.prototype.get=function(l,c){var f=this;return l&&l.constructor===Object?this.where(l).first(c):l==null?ot(new Ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(g){return f.core.get({trans:g,key:l}).then(function(x){return f.hook.reading.fire(x)})}).then(c)},Je.prototype.where=function(l){if(typeof l=="string")return new this.db.WhereClause(this,l);if(u(l))return new this.db.WhereClause(this,"[".concat(l.join("+"),"]"));var c=o(l);if(c.length===1)return this.where(c[0]).equals(l[c[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&c.every(function(F){return 0<=j.keyPath.indexOf(F)})){for(var L=0;L<c.length;++L)if(c.indexOf(j.keyPath[L])===-1)return!1;return!0}return!1}).sort(function(j,L){return j.keyPath.length-L.keyPath.length})[0];if(f&&this.db._maxKey!==fn){var E=f.keyPath.slice(0,c.length);return this.where(E).equals(E.map(function(L){return l[L]}))}!f&&dn&&console.warn("The query ".concat(JSON.stringify(l)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var g=this.schema.idxByName;function x(j,L){return ze(j,L)===0}var k=c.reduce(function(V,L){var F=V[0],q=V[1],V=g[L],H=l[L];return[F||V,F||!V?ar(q,V&&V.multi?function(U){return U=se(U,L),u(U)&&U.some(function($){return x(H,$)})}:function(U){return x(H,se(U,L))}):q]},[null,null]),E=k[0],k=k[1];return E?this.where(E.name).equals(l[E.keyPath]).filter(k):f?this.filter(k):this.where(c).equals("")},Je.prototype.filter=function(l){return this.toCollection().and(l)},Je.prototype.count=function(l){return this.toCollection().count(l)},Je.prototype.offset=function(l){return this.toCollection().offset(l)},Je.prototype.limit=function(l){return this.toCollection().limit(l)},Je.prototype.each=function(l){return this.toCollection().each(l)},Je.prototype.toArray=function(l){return this.toCollection().toArray(l)},Je.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Je.prototype.orderBy=function(l){return new this.db.Collection(new this.db.WhereClause(this,u(l)?"[".concat(l.join("+"),"]"):l))},Je.prototype.reverse=function(){return this.toCollection().reverse()},Je.prototype.mapToClass=function(l){var c,f=this.db,g=this.name;function x(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=l).prototype instanceof al&&(function(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function q(){this.constructor=L}n(L,F),L.prototype=F===null?Object.create(F):(q.prototype=F.prototype,new q)}(x,c=l),Object.defineProperty(x.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),x.prototype.table=function(){return g},l=x);for(var E=new Set,k=l.prototype;k;k=d(k))Object.getOwnPropertyNames(k).forEach(function(L){return E.add(L)});function j(L){if(!L)return L;var F,q=Object.create(l.prototype);for(F in L)if(!E.has(F))try{q[F]=L[F]}catch{}return q}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=j,this.hook("reading",j),l},Je.prototype.defineClass=function(){return this.mapToClass(function(l){h(this,l)})},Je.prototype.add=function(l,c){var f=this,g=this.schema.primKey,x=g.auto,E=g.keyPath,k=l;return E&&x&&(k=zs(E)(l)),this._trans("readwrite",function(j){return f.core.mutate({trans:j,type:"add",keys:c!=null?[c]:null,values:[k]})}).then(function(j){return j.numFailures?_e.reject(j.failures[0]):j.lastResult}).then(function(j){if(E)try{C(l,E,j)}catch{}return j})},Je.prototype.upsert=function(l,c){var f=this,g=this.schema.primKey.keyPath;return this._trans("readwrite",function(x){return f.core.get({trans:x,key:l}).then(function(E){var k=E??{};return it(k,c),g&&C(k,g,l),f.core.mutate({trans:x,type:"put",values:[k],keys:[l],upsert:!0,updates:{keys:[l],changeSpecs:[c]}}).then(function(j){return j.numFailures?_e.reject(j.failures[0]):!!E})})})},Je.prototype.update=function(l,c){return typeof l!="object"||u(l)?this.where(":id").equals(l).modify(c):(l=se(l,this.schema.primKey.keyPath),l===void 0?ot(new Ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(l).modify(c))},Je.prototype.put=function(l,c){var f=this,g=this.schema.primKey,x=g.auto,E=g.keyPath,k=l;return E&&x&&(k=zs(E)(l)),this._trans("readwrite",function(j){return f.core.mutate({trans:j,type:"put",values:[k],keys:c!=null?[c]:null})}).then(function(j){return j.numFailures?_e.reject(j.failures[0]):j.lastResult}).then(function(j){if(E)try{C(l,E,j)}catch{}return j})},Je.prototype.delete=function(l){var c=this;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:[l]}).then(function(g){return Vr(c,[l],g)}).then(function(g){return g.numFailures?_e.reject(g.failures[0]):void 0})})},Je.prototype.clear=function(){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"deleteRange",range:ol}).then(function(f){return Vr(l,null,f)})}).then(function(c){return c.numFailures?_e.reject(c.failures[0]):void 0})},Je.prototype.bulkGet=function(l){var c=this;return this._trans("readonly",function(f){return c.core.getMany({keys:l,trans:f}).then(function(g){return g.map(function(x){return c.hook.reading.fire(x)})})})},Je.prototype.bulkAdd=function(l,c,f){var g=this,x=Array.isArray(c)?c:void 0,E=(f=f||(x?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(k){var F=g.schema.primKey,j=F.auto,F=F.keyPath;if(F&&x)throw new Ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==l.length)throw new Ie.InvalidArgument("Arguments objects and keys must have the same length");var L=l.length,F=F&&j?l.map(zs(F)):l;return g.core.mutate({trans:k,type:"add",keys:x,values:F,wantResults:E}).then(function($){var V=$.numFailures,H=$.results,U=$.lastResult,$=$.failures;if(V===0)return E?H:U;throw new Re("".concat(g.name,".bulkAdd(): ").concat(V," of ").concat(L," operations failed"),$)})})},Je.prototype.bulkPut=function(l,c,f){var g=this,x=Array.isArray(c)?c:void 0,E=(f=f||(x?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(k){var F=g.schema.primKey,j=F.auto,F=F.keyPath;if(F&&x)throw new Ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==l.length)throw new Ie.InvalidArgument("Arguments objects and keys must have the same length");var L=l.length,F=F&&j?l.map(zs(F)):l;return g.core.mutate({trans:k,type:"put",keys:x,values:F,wantResults:E}).then(function($){var V=$.numFailures,H=$.results,U=$.lastResult,$=$.failures;if(V===0)return E?H:U;throw new Re("".concat(g.name,".bulkPut(): ").concat(V," of ").concat(L," operations failed"),$)})})},Je.prototype.bulkUpdate=function(l){var c=this,f=this.core,g=l.map(function(k){return k.key}),x=l.map(function(k){return k.changes}),E=[];return this._trans("readwrite",function(k){return f.getMany({trans:k,keys:g,cache:"clone"}).then(function(j){var L=[],F=[];l.forEach(function(V,H){var U=V.key,$=V.changes,K=j[H];if(K){for(var W=0,J=Object.keys($);W<J.length;W++){var te=J[W],ie=$[te];if(te===c.schema.primKey.keyPath){if(ze(ie,U)!==0)throw new Ie.Constraint("Cannot update primary key in bulkUpdate()")}else C(K,te,ie)}E.push(H),L.push(U),F.push(K)}});var q=L.length;return f.mutate({trans:k,type:"put",keys:L,values:F,updates:{keys:g,changeSpecs:x}}).then(function(V){var H=V.numFailures,U=V.failures;if(H===0)return q;for(var $=0,K=Object.keys(U);$<K.length;$++){var W,J=K[$],te=E[Number(J)];te!=null&&(W=U[J],delete U[J],U[te]=W)}throw new Re("".concat(c.name,".bulkUpdate(): ").concat(H," of ").concat(q," operations failed"),U)})})})},Je.prototype.bulkDelete=function(l){var c=this,f=l.length;return this._trans("readwrite",function(g){return c.core.mutate({trans:g,type:"delete",keys:l}).then(function(x){return Vr(c,l,x)})}).then(function(k){var x=k.numFailures,E=k.lastResult,k=k.failures;if(x===0)return E;throw new Re("".concat(c.name,".bulkDelete(): ").concat(x," of ").concat(f," operations failed"),k)})},Je);function Je(){}function cr(l){function c(k,j){if(j){for(var L=arguments.length,F=new Array(L-1);--L;)F[L-1]=arguments[L];return f[k].subscribe.apply(null,F),l}if(typeof k=="string")return f[k]}var f={};c.addEventType=E;for(var g=1,x=arguments.length;g<x;++g)E(arguments[g]);return c;function E(k,j,L){if(typeof k!="object"){var F;j=j||Ut;var q={subscribers:[],fire:L=L||Ze,subscribe:function(V){q.subscribers.indexOf(V)===-1&&(q.subscribers.push(V),q.fire=j(q.fire,V))},unsubscribe:function(V){q.subscribers=q.subscribers.filter(function(H){return H!==V}),q.fire=q.subscribers.reduce(j,L)}};return f[k]=c[k]=q}o(F=k).forEach(function(V){var H=F[V];if(u(H))E(V,F[V][0],F[V][1]);else{if(H!=="asap")throw new Ie.InvalidArgument("Invalid event config");var U=E(V,ri,function(){for(var $=arguments.length,K=new Array($);$--;)K[$]=arguments[$];U.subscribers.forEach(function(W){X(function(){W.apply(null,K)})})})}})}}function Ks(l,c){return z(c).from({prototype:l}),c}function li(l,c){return!(l.filter||l.algorithm||l.or)&&(c?l.justLimit:!l.replayFilter)}function ll(l,c){l.filter=ar(l.filter,c)}function ul(l,c,f){var g=l.replayFilter;l.replayFilter=g?function(){return ar(g(),c())}:c,l.justLimit=f&&!g}function Fo(l,c){if(l.isPrimKey)return c.primaryKey;var f=c.getIndexByKeyPath(l.index);if(!f)throw new Ie.Schema("KeyPath "+l.index+" on object store "+c.name+" is not indexed");return f}function Wu(l,c,f){var g=Fo(l,c.schema);return c.openCursor({trans:f,values:!l.keysOnly,reverse:l.dir==="prev",unique:!!l.unique,query:{index:g,range:l.range}})}function Lr(l,c,f,g){var x=l.replayFilter?ar(l.filter,l.replayFilter()):l.filter;if(l.or){var E={},k=function(j,L,F){var q,V;x&&!x(L,F,function(H){return L.stop(H)},function(H){return L.fail(H)})||((V=""+(q=L.primaryKey))=="[object ArrayBuffer]"&&(V=""+new Uint8Array(q)),_(E,V)||(E[V]=!0,c(j,L,F)))};return Promise.all([l.or._iterate(k,f),Mr(Wu(l,g,f),l.algorithm,k,!l.keysOnly&&l.valueMapper)])}return Mr(Wu(l,g,f),ar(l.algorithm,x),c,!l.keysOnly&&l.valueMapper)}function Mr(l,c,f,g){var x=st(g?function(E,k,j){return f(g(E),k,j)}:f);return l.then(function(E){if(E)return E.start(function(){var k=function(){return E.continue()};c&&!c(E,function(j){return k=j},function(j){E.stop(j),k=Ze},function(j){E.fail(j),k=Ze})||x(E.value,E,function(j){return k=j}),k()})})}var Hu=(He.prototype._read=function(l,c){var f=this._ctx;return f.error?f.table._trans(null,ot.bind(null,f.error)):f.table._trans("readonly",l).then(c)},He.prototype._write=function(l){var c=this._ctx;return c.error?c.table._trans(null,ot.bind(null,c.error)):c.table._trans("readwrite",l,"locked")},He.prototype._addAlgorithm=function(l){var c=this._ctx;c.algorithm=ar(c.algorithm,l)},He.prototype._iterate=function(l,c){return Lr(this._ctx,l,c,this._ctx.table.core)},He.prototype.clone=function(l){var c=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return l&&h(f,l),c._ctx=f,c},He.prototype.raw=function(){return this._ctx.valueMapper=null,this},He.prototype.each=function(l){var c=this._ctx;return this._read(function(f){return Lr(c,l,f,c.table.core)})},He.prototype.count=function(l){var c=this;return this._read(function(f){var g=c._ctx,x=g.table.core;if(li(g,!0))return x.count({trans:f,query:{index:Fo(g,x.schema),range:g.range}}).then(function(k){return Math.min(k,g.limit)});var E=0;return Lr(g,function(){return++E,!1},f,x).then(function(){return E})}).then(l)},He.prototype.sortBy=function(l,c){var f=l.split(".").reverse(),g=f[0],x=f.length-1;function E(L,F){return F?E(L[f[F]],F-1):L[g]}var k=this._ctx.dir==="next"?1:-1;function j(L,F){return ze(E(L,x),E(F,x))*k}return this.toArray(function(L){return L.sort(j)}).then(c)},He.prototype.toArray=function(l){var c=this;return this._read(function(f){var g=c._ctx;if(g.dir==="next"&&li(g,!0)&&0<g.limit){var x=g.valueMapper,E=Fo(g,g.table.core.schema);return g.table.core.query({trans:f,limit:g.limit,values:!0,query:{index:E,range:g.range}}).then(function(j){return j=j.result,x?j.map(x):j})}var k=[];return Lr(g,function(j){return k.push(j)},f,g.table.core).then(function(){return k})},l)},He.prototype.offset=function(l){var c=this._ctx;return l<=0||(c.offset+=l,li(c)?ul(c,function(){var f=l;return function(g,x){return f===0||(f===1?--f:x(function(){g.advance(f),f=0}),!1)}}):ul(c,function(){var f=l;return function(){return--f<0}})),this},He.prototype.limit=function(l){return this._ctx.limit=Math.min(this._ctx.limit,l),ul(this._ctx,function(){var c=l;return function(f,g,x){return--c<=0&&g(x),0<=c}},!0),this},He.prototype.until=function(l,c){return ll(this._ctx,function(f,g,x){return!l(f.value)||(g(x),c)}),this},He.prototype.first=function(l){return this.limit(1).toArray(function(c){return c[0]}).then(l)},He.prototype.last=function(l){return this.reverse().first(l)},He.prototype.filter=function(l){var c;return ll(this._ctx,function(f){return l(f.value)}),(c=this._ctx).isMatch=ar(c.isMatch,l),this},He.prototype.and=function(l){return this.filter(l)},He.prototype.or=function(l){return new this.db.WhereClause(this._ctx.table,l,this)},He.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},He.prototype.desc=function(){return this.reverse()},He.prototype.eachKey=function(l){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,g){l(g.key,g)})},He.prototype.eachUniqueKey=function(l){return this._ctx.unique="unique",this.eachKey(l)},He.prototype.eachPrimaryKey=function(l){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,g){l(g.primaryKey,g)})},He.prototype.keys=function(l){var c=this._ctx;c.keysOnly=!c.isMatch;var f=[];return this.each(function(g,x){f.push(x.key)}).then(function(){return f}).then(l)},He.prototype.primaryKeys=function(l){var c=this._ctx;if(c.dir==="next"&&li(c,!0)&&0<c.limit)return this._read(function(g){var x=Fo(c,c.table.core.schema);return c.table.core.query({trans:g,values:!1,limit:c.limit,query:{index:x,range:c.range}})}).then(function(g){return g.result}).then(l);c.keysOnly=!c.isMatch;var f=[];return this.each(function(g,x){f.push(x.primaryKey)}).then(function(){return f}).then(l)},He.prototype.uniqueKeys=function(l){return this._ctx.unique="unique",this.keys(l)},He.prototype.firstKey=function(l){return this.limit(1).keys(function(c){return c[0]}).then(l)},He.prototype.lastKey=function(l){return this.reverse().firstKey(l)},He.prototype.distinct=function(){var l=this._ctx,l=l.index&&l.table.schema.idxByName[l.index];if(!l||!l.multi)return this;var c={};return ll(this._ctx,function(x){var g=x.primaryKey.toString(),x=_(c,g);return c[g]=!0,!x}),this},He.prototype.modify=function(l){var c=this,f=this._ctx;return this._write(function(g){var x=typeof l=="function"?l:function(K){return it(K,l)},E=f.table.core,F=E.schema.primaryKey,k=F.outbound,j=F.extractKey,L=200,F=c.db._options.modifyChunkSize;F&&(L=typeof F=="object"?F[E.name]||F["*"]||200:F);function q(K,te){var J=te.failures,te=te.numFailures;H+=K-te;for(var ie=0,oe=o(J);ie<oe.length;ie++){var pe=oe[ie];V.push(J[pe])}}var V=[],H=0,U=[],$=l===cl;return c.clone().primaryKeys().then(function(K){function W(te){var ie=Math.min(L,K.length-te),oe=K.slice(te,te+ie);return($?Promise.resolve([]):E.getMany({trans:g,keys:oe,cache:"immutable"})).then(function(pe){var we=[],fe=[],ye=k?[]:null,xe=$?oe:[];if(!$)for(var ve=0;ve<ie;++ve){var Te=pe[ve],Me={value:A(Te),primKey:K[te+ve]};x.call(Me,Me.value,Me)!==!1&&(Me.value==null?xe.push(K[te+ve]):k||ze(j(Te),j(Me.value))===0?(fe.push(Me.value),k&&ye.push(K[te+ve])):(xe.push(K[te+ve]),we.push(Me.value)))}return Promise.resolve(0<we.length&&E.mutate({trans:g,type:"add",values:we}).then(function(Ue){for(var Be in Ue.failures)xe.splice(parseInt(Be),1);q(we.length,Ue)})).then(function(){return(0<fe.length||J&&typeof l=="object")&&E.mutate({trans:g,type:"put",keys:ye,values:fe,criteria:J,changeSpec:typeof l!="function"&&l,isAdditionalChunk:0<te}).then(function(Ue){return q(fe.length,Ue)})}).then(function(){return(0<xe.length||J&&$)&&E.mutate({trans:g,type:"delete",keys:xe,criteria:J,isAdditionalChunk:0<te}).then(function(Ue){return Vr(f.table,xe,Ue)}).then(function(Ue){return q(xe.length,Ue)})}).then(function(){return K.length>te+ie&&W(te+L)})})}var J=li(f)&&f.limit===1/0&&(typeof l!="function"||$)&&{index:f.index,range:f.range};return W(0).then(function(){if(0<V.length)throw new Ne("Error modifying one or more objects",V,H,U);return K.length})})})},He.prototype.delete=function(){var l=this._ctx,c=l.range;return!li(l)||l.table.schema.yProps||!l.isPrimKey&&c.type!==3?this.modify(cl):this._write(function(f){var g=l.table.core.schema.primaryKey,x=c;return l.table.core.count({trans:f,query:{index:g,range:x}}).then(function(E){return l.table.core.mutate({trans:f,type:"deleteRange",range:x}).then(function(L){var j=L.failures,L=L.numFailures;if(L)throw new Ne("Could not delete some values",Object.keys(j).map(function(F){return j[F]}),E-L);return E-L})})})},He);function He(){}var cl=function(l,c){return c.value=null};function Gu(l,c){return l<c?-1:l===c?0:1}function Qu(l,c){return c<l?-1:l===c?0:1}function St(l,c,f){return l=l instanceof Yu?new l.Collection(l):l,l._ctx.error=new(f||TypeError)(c),l}function Vi(l){return new l.Collection(l,function(){return hr("")}).limit(0)}function Uo(l,c,f,g){var x,E,k,j,L,F,q,V=f.length;if(!f.every(function($){return typeof $=="string"}))return St(l,qu);function H($){x=$==="next"?function(W){return W.toUpperCase()}:function(W){return W.toLowerCase()},E=$==="next"?function(W){return W.toLowerCase()}:function(W){return W.toUpperCase()},k=$==="next"?Gu:Qu;var K=f.map(function(W){return{lower:E(W),upper:x(W)}}).sort(function(W,J){return k(W.lower,J.lower)});j=K.map(function(W){return W.upper}),L=K.map(function(W){return W.lower}),q=(F=$)==="next"?"":g}H("next"),l=new l.Collection(l,function(){return Fr(j[0],L[V-1]+g)}),l._ondirectionchange=function($){H($)};var U=0;return l._addAlgorithm(function($,K,W){var J=$.key;if(typeof J!="string")return!1;var te=E(J);if(c(te,L,U))return!0;for(var ie=null,oe=U;oe<V;++oe){var pe=function(we,fe,ye,xe,ve,Te){for(var Me=Math.min(we.length,xe.length),Ue=-1,Be=0;Be<Me;++Be){var Dn=fe[Be];if(Dn!==xe[Be])return ve(we[Be],ye[Be])<0?we.substr(0,Be)+ye[Be]+ye.substr(Be+1):ve(we[Be],xe[Be])<0?we.substr(0,Be)+xe[Be]+ye.substr(Be+1):0<=Ue?we.substr(0,Ue)+fe[Ue]+ye.substr(Ue+1):null;ve(we[Be],Dn)<0&&(Ue=Be)}return Me<xe.length&&Te==="next"?we+ye.substr(we.length):Me<we.length&&Te==="prev"?we.substr(0,ye.length):Ue<0?null:we.substr(0,Ue)+xe[Ue]+ye.substr(Ue+1)}(J,te,j[oe],L[oe],k,F);pe===null&&ie===null?U=oe+1:(ie===null||0<k(ie,pe))&&(ie=pe)}return K(ie!==null?function(){$.continue(ie+q)}:W),!1}),l}function Fr(l,c,f,g){return{type:2,lower:l,upper:c,lowerOpen:f,upperOpen:g}}function hr(l){return{type:1,lower:l,upper:l}}var Yu=(Object.defineProperty(_t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_t.prototype.between=function(l,c,f,g){f=f!==!1,g=g===!0;try{return 0<this._cmp(l,c)||this._cmp(l,c)===0&&(f||g)&&(!f||!g)?Vi(this):new this.Collection(this,function(){return Fr(l,c,!f,!g)})}catch{return St(this,Nn)}},_t.prototype.equals=function(l){return l==null?St(this,Nn):new this.Collection(this,function(){return hr(l)})},_t.prototype.above=function(l){return l==null?St(this,Nn):new this.Collection(this,function(){return Fr(l,void 0,!0)})},_t.prototype.aboveOrEqual=function(l){return l==null?St(this,Nn):new this.Collection(this,function(){return Fr(l,void 0,!1)})},_t.prototype.below=function(l){return l==null?St(this,Nn):new this.Collection(this,function(){return Fr(void 0,l,!1,!0)})},_t.prototype.belowOrEqual=function(l){return l==null?St(this,Nn):new this.Collection(this,function(){return Fr(void 0,l)})},_t.prototype.startsWith=function(l){return typeof l!="string"?St(this,qu):this.between(l,l+fn,!0,!0)},_t.prototype.startsWithIgnoreCase=function(l){return l===""?this.startsWith(l):Uo(this,function(c,f){return c.indexOf(f[0])===0},[l],fn)},_t.prototype.equalsIgnoreCase=function(l){return Uo(this,function(c,f){return c===f[0]},[l],"")},_t.prototype.anyOfIgnoreCase=function(){var l=Z.apply(Y,arguments);return l.length===0?Vi(this):Uo(this,function(c,f){return f.indexOf(c)!==-1},l,"")},_t.prototype.startsWithAnyOfIgnoreCase=function(){var l=Z.apply(Y,arguments);return l.length===0?Vi(this):Uo(this,function(c,f){return f.some(function(g){return c.indexOf(g)===0})},l,fn)},_t.prototype.anyOf=function(){var l=this,c=Z.apply(Y,arguments),f=this._cmp;try{c.sort(f)}catch{return St(this,Nn)}if(c.length===0)return Vi(this);var g=new this.Collection(this,function(){return Fr(c[0],c[c.length-1])});g._ondirectionchange=function(E){f=E==="next"?l._ascending:l._descending,c.sort(f)};var x=0;return g._addAlgorithm(function(E,k,j){for(var L=E.key;0<f(L,c[x]);)if(++x===c.length)return k(j),!1;return f(L,c[x])===0||(k(function(){E.continue(c[x])}),!1)}),g},_t.prototype.notEqual=function(l){return this.inAnyRange([[-1/0,l],[l,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_t.prototype.noneOf=function(){var l=Z.apply(Y,arguments);if(l.length===0)return new this.Collection(this);try{l.sort(this._ascending)}catch{return St(this,Nn)}var c=l.reduce(function(f,g){return f?f.concat([[f[f.length-1][1],g]]):[[-1/0,g]]},null);return c.push([l[l.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},_t.prototype.inAnyRange=function(J,c){var f=this,g=this._cmp,x=this._ascending,E=this._descending,k=this._min,j=this._max;if(J.length===0)return Vi(this);if(!J.every(function(te){return te[0]!==void 0&&te[1]!==void 0&&x(te[0],te[1])<=0}))return St(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ie.InvalidArgument);var L=!c||c.includeLowers!==!1,F=c&&c.includeUppers===!0,q,V=x;function H(te,ie){return V(te[0],ie[0])}try{(q=J.reduce(function(te,ie){for(var oe=0,pe=te.length;oe<pe;++oe){var we=te[oe];if(g(ie[0],we[1])<0&&0<g(ie[1],we[0])){we[0]=k(we[0],ie[0]),we[1]=j(we[1],ie[1]);break}}return oe===pe&&te.push(ie),te},[])).sort(H)}catch{return St(this,Nn)}var U=0,$=F?function(te){return 0<x(te,q[U][1])}:function(te){return 0<=x(te,q[U][1])},K=L?function(te){return 0<E(te,q[U][0])}:function(te){return 0<=E(te,q[U][0])},W=$,J=new this.Collection(this,function(){return Fr(q[0][0],q[q.length-1][1],!L,!F)});return J._ondirectionchange=function(te){V=te==="next"?(W=$,x):(W=K,E),q.sort(H)},J._addAlgorithm(function(te,ie,oe){for(var pe,we=te.key;W(we);)if(++U===q.length)return ie(oe),!1;return!$(pe=we)&&!K(pe)||(f._cmp(we,q[U][1])===0||f._cmp(we,q[U][0])===0||ie(function(){V===x?te.continue(q[U][0]):te.continue(q[U][1])}),!1)}),J},_t.prototype.startsWithAnyOf=function(){var l=Z.apply(Y,arguments);return l.every(function(c){return typeof c=="string"})?l.length===0?Vi(this):this.inAnyRange(l.map(function(c){return[c,c+fn]})):St(this,"startsWithAnyOf() only works with strings")},_t);function _t(){}function pn(l){return st(function(c){return Li(c),l(c.target.error),!1})}function Li(l){l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault()}var dr="storagemutated",ui="x-storagemutated-1",fr=cr(null,dr),hl=(Qe.prototype._lock=function(){return ee(!Se.global),++this._reculock,this._reculock!==1||Se.global||(Se.lockOwnerFor=this),this},Qe.prototype._unlock=function(){if(ee(!Se.global),--this._reculock==0)for(Se.global||(Se.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var l=this._blockedFuncs.shift();try{qn(l[1],l[0])}catch{}}return this},Qe.prototype._locked=function(){return this._reculock&&Se.lockOwnerFor!==this},Qe.prototype.create=function(l){var c=this;if(!this.mode)return this;var f=this.db.idbdb,g=this.db._state.dbOpenError;if(ee(!this.idbtrans),!l&&!f)switch(g&&g.name){case"DatabaseClosedError":throw new Ie.DatabaseClosed(g);case"MissingAPIError":throw new Ie.MissingAPI(g.message,g);default:throw new Ie.OpenFailed(g)}if(!this.active)throw new Ie.TransactionInactive;return ee(this._completion._state===null),(l=this.idbtrans=l||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=st(function(x){Li(x),c._reject(l.error)}),l.onabort=st(function(x){Li(x),c.active&&c._reject(new Ie.Abort(l.error)),c.active=!1,c.on("abort").fire(x)}),l.oncomplete=st(function(){c.active=!1,c._resolve(),"mutatedParts"in l&&fr.storagemutated.fire(l.mutatedParts)}),this},Qe.prototype._promise=function(l,c,f){var g=this;if(l==="readwrite"&&this.mode!=="readwrite")return ot(new Ie.ReadOnly("Transaction is readonly"));if(!this.active)return ot(new Ie.TransactionInactive);if(this._locked())return new _e(function(E,k){g._blockedFuncs.push([function(){g._promise(l,c,f).then(E,k)},Se])});if(f)return sr(function(){var E=new _e(function(k,j){g._lock();var L=c(k,j,g);L&&L.then&&L.then(k,j)});return E.finally(function(){return g._unlock()}),E._lib=!0,E});var x=new _e(function(E,k){var j=c(E,k,g);j&&j.then&&j.then(E,k)});return x._lib=!0,x},Qe.prototype._root=function(){return this.parent?this.parent._root():this},Qe.prototype.waitFor=function(l){var c,f=this._root(),g=_e.resolve(l);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return g}):(f._waitingFor=g,f._waitingQueue=[],c=f.idbtrans.objectStore(f.storeNames[0]),function E(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(c.get(-1/0).onsuccess=E)}());var x=f._waitingFor;return new _e(function(E,k){g.then(function(j){return f._waitingQueue.push(st(E.bind(null,j)))},function(j){return f._waitingQueue.push(st(k.bind(null,j)))}).finally(function(){f._waitingFor===x&&(f._waitingFor=null)})})},Qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ie.Abort))},Qe.prototype.table=function(l){var c=this._memoizedTables||(this._memoizedTables={});if(_(c,l))return c[l];var f=this.schema[l];if(!f)throw new Ie.NotFound("Table "+l+" not part of transaction");return f=new this.db.Table(l,f,this),f.core=this.db.core.table(l),c[l]=f},Qe);function Qe(){}function dl(l,c,f,g,x,E,k,j){return{name:l,keyPath:c,unique:f,multi:g,auto:x,compound:E,src:(f&&!k?"&":"")+(g?"*":"")+(x?"++":"")+Ju(c),type:j}}function Ju(l){return typeof l=="string"?l:l?"["+[].join.call(l,"+")+"]":""}function Bo(l,c,f){return{name:l,primKey:c,indexes:f,mappedClass:null,idxByName:(g=function(x){return[x.name,x]},f.reduce(function(x,E,k){return k=g(E,k),k&&(x[k[0]]=k[1]),x},{}))};var g}var Mi=function(l){try{return l.only([[]]),Mi=function(){return[[]]},[[]]}catch{return Mi=function(){return fn},fn}};function zo(l){return l==null?function(){}:typeof l=="string"?(c=l).split(".").length===1?function(f){return f[c]}:function(f){return se(f,c)}:function(f){return se(f,l)};var c}function qs(l){return[].slice.call(l)}var Ur=0;function Fi(l){return l==null?":id":typeof l=="string"?l:"[".concat(l.join("+"),"]")}function Rd(l,c,L){function g(W){if(W.type===3)return null;if(W.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var U=W.lower,$=W.upper,K=W.lowerOpen,W=W.upperOpen;return U===void 0?$===void 0?null:c.upperBound($,!!W):$===void 0?c.lowerBound(U,!!K):c.bound(U,$,!!K,!!W)}function x(H){var U,$=H.name;return{name:$,schema:H,mutate:function(K){var W=K.trans,J=K.type,te=K.keys,ie=K.values,oe=K.range;return new Promise(function(pe,we){pe=st(pe);var fe=W.objectStore($),ye=fe.keyPath==null,xe=J==="put"||J==="add";if(!xe&&J!=="delete"&&J!=="deleteRange")throw new Error("Invalid operation type: "+J);var ve,Te=(te||ie||{length:1}).length;if(te&&ie&&te.length!==ie.length)throw new Error("Given keys array must have same length as given values array.");if(Te===0)return pe({numFailures:0,failures:{},results:[],lastResult:void 0});function Me(mn){++Dn,Li(mn)}var Ue=[],Be=[],Dn=0;if(J==="deleteRange"){if(oe.type===4)return pe({numFailures:Dn,failures:Be,results:[],lastResult:void 0});oe.type===3?Ue.push(ve=fe.clear()):Ue.push(ve=fe.delete(g(oe)))}else{var ye=xe?ye?[ie,te]:[ie,null]:[te,null],Le=ye[0],en=ye[1];if(xe)for(var tn=0;tn<Te;++tn)Ue.push(ve=en&&en[tn]!==void 0?fe[J](Le[tn],en[tn]):fe[J](Le[tn])),ve.onerror=Me;else for(tn=0;tn<Te;++tn)Ue.push(ve=fe[J](Le[tn])),ve.onerror=Me}function tc(mn){mn=mn.target.result,Ue.forEach(function(Xs,Ld){return Xs.error!=null&&(Be[Ld]=Xs.error)}),pe({numFailures:Dn,failures:Be,results:J==="delete"?te:Ue.map(function(Xs){return Xs.result}),lastResult:mn})}ve.onerror=function(mn){Me(mn),tc(mn)},ve.onsuccess=tc})},getMany:function(K){var W=K.trans,J=K.keys;return new Promise(function(te,ie){te=st(te);for(var oe,pe=W.objectStore($),we=J.length,fe=new Array(we),ye=0,xe=0,ve=function(Ue){Ue=Ue.target,fe[Ue._pos]=Ue.result,++xe===ye&&te(fe)},Te=pn(ie),Me=0;Me<we;++Me)J[Me]!=null&&((oe=pe.get(J[Me]))._pos=Me,oe.onsuccess=ve,oe.onerror=Te,++ye);ye===0&&te(fe)})},get:function(K){var W=K.trans,J=K.key;return new Promise(function(te,ie){te=st(te);var oe=W.objectStore($).get(J);oe.onsuccess=function(pe){return te(pe.target.result)},oe.onerror=pn(ie)})},query:(U=F,function(K){return new Promise(function(W,J){W=st(W);var te,ie,oe,ye=K.trans,pe=K.values,we=K.limit,ve=K.query,fe=we===1/0?void 0:we,xe=ve.index,ve=ve.range,ye=ye.objectStore($),xe=xe.isPrimaryKey?ye:ye.index(xe.name),ve=g(ve);if(we===0)return W({result:[]});U?((fe=pe?xe.getAll(ve,fe):xe.getAllKeys(ve,fe)).onsuccess=function(Te){return W({result:Te.target.result})},fe.onerror=pn(J)):(te=0,ie=!pe&&"openKeyCursor"in xe?xe.openKeyCursor(ve):xe.openCursor(ve),oe=[],ie.onsuccess=function(Te){var Me=ie.result;return Me?(oe.push(pe?Me.value:Me.primaryKey),++te===we?W({result:oe}):void Me.continue()):W({result:oe})},ie.onerror=pn(J))})}),openCursor:function(K){var W=K.trans,J=K.values,te=K.query,ie=K.reverse,oe=K.unique;return new Promise(function(pe,we){pe=st(pe);var xe=te.index,fe=te.range,ye=W.objectStore($),ye=xe.isPrimaryKey?ye:ye.index(xe.name),xe=ie?oe?"prevunique":"prev":oe?"nextunique":"next",ve=!J&&"openKeyCursor"in ye?ye.openKeyCursor(g(fe),xe):ye.openCursor(g(fe),xe);ve.onerror=pn(we),ve.onsuccess=st(function(Te){var Me,Ue,Be,Dn,Le=ve.result;Le?(Le.___id=++Ur,Le.done=!1,Me=Le.continue.bind(Le),Ue=(Ue=Le.continuePrimaryKey)&&Ue.bind(Le),Be=Le.advance.bind(Le),Dn=function(){throw new Error("Cursor not stopped")},Le.trans=W,Le.stop=Le.continue=Le.continuePrimaryKey=Le.advance=function(){throw new Error("Cursor not started")},Le.fail=st(we),Le.next=function(){var en=this,tn=1;return this.start(function(){return tn--?en.continue():en.stop()}).then(function(){return en})},Le.start=function(en){function tn(){if(ve.result)try{en()}catch(mn){Le.fail(mn)}else Le.done=!0,Le.start=function(){throw new Error("Cursor behind last entry")},Le.stop()}var tc=new Promise(function(mn,Xs){mn=st(mn),ve.onerror=pn(Xs),Le.fail=Xs,Le.stop=function(Ld){Le.stop=Le.continue=Le.continuePrimaryKey=Le.advance=Dn,mn(Ld)}});return ve.onsuccess=st(function(mn){ve.onsuccess=tn,tn()}),Le.continue=Me,Le.continuePrimaryKey=Ue,Le.advance=Be,tn(),tc},pe(Le)):pe(null)},we)})},count:function(K){var W=K.query,J=K.trans,te=W.index,ie=W.range;return new Promise(function(oe,pe){var we=J.objectStore($),fe=te.isPrimaryKey?we:we.index(te.name),we=g(ie),fe=we?fe.count(we):fe.count();fe.onsuccess=st(function(ye){return oe(ye.target.result)}),fe.onerror=pn(pe)})}}}var E,k,j,q=(k=L,j=qs((E=l).objectStoreNames),{schema:{name:E.name,tables:j.map(function(H){return k.objectStore(H)}).map(function(H){var U=H.keyPath,W=H.autoIncrement,$=u(U),K={},W={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:U==null,compound:$,keyPath:U,autoIncrement:W,unique:!0,extractKey:zo(U)},indexes:qs(H.indexNames).map(function(J){return H.index(J)}).map(function(oe){var te=oe.name,ie=oe.unique,pe=oe.multiEntry,oe=oe.keyPath,pe={name:te,compound:u(oe),keyPath:oe,unique:ie,multiEntry:pe,extractKey:zo(oe)};return K[Fi(oe)]=pe}),getIndexByKeyPath:function(J){return K[Fi(J)]}};return K[":id"]=W.primaryKey,U!=null&&(K[Fi(U)]=W.primaryKey),W})},hasGetAll:0<j.length&&"getAll"in k.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),L=q.schema,F=q.hasGetAll,q=L.tables.map(x),V={};return q.forEach(function(H){return V[H.name]=H}),{stack:"dbcore",transaction:l.transaction.bind(l),table:function(H){if(!V[H])throw new Error("Table '".concat(H,"' not found"));return V[H]},MIN_KEY:-1/0,MAX_KEY:Mi(c),schema:L}}function Ws(l,c,f,g){var x=f.IDBKeyRange;return f.indexedDB,{dbcore:(g=Rd(c,x,g),l.dbcore.reduce(function(E,k){return k=k.create,r(r({},E),k(E))},g))}}function Hs(l,g){var f=g.db,g=Ws(l._middlewares,f,l._deps,g);l.core=g.dbcore,l.tables.forEach(function(x){var E=x.name;l.core.schema.tables.some(function(k){return k.name===E})&&(x.core=l.core.table(E),l[E]instanceof l.Table&&(l[E].core=x.core))})}function Ui(l,c,f,g){f.forEach(function(x){var E=g[x];c.forEach(function(k){var j=function L(F,q){return G(F,q)||(F=d(F))&&L(F,q)}(k,x);(!j||"value"in j&&j.value===void 0)&&(k===l.Transaction.prototype||k instanceof l.Transaction?M(k,x,{get:function(){return this.table(x)},set:function(L){P(this,x,{value:L,writable:!0,configurable:!0,enumerable:!0})}}):k[x]=new l.Table(x,E))})})}function Bi(l,c){c.forEach(function(f){for(var g in f)f[g]instanceof l.Table&&delete f[g]})}function Xu(l,c){return l._cfg.version-c._cfg.version}function $o(l,c,f,g){var x=l._dbSchema;f.objectStoreNames.contains("$meta")&&!x.$meta&&(x.$meta=Bo("$meta",pl("")[0],[]),l._storeNames.push("$meta"));var E=l._createTransaction("readwrite",l._storeNames,x);E.create(f),E._completion.catch(g);var k=E._reject.bind(E),j=Se.transless||Se;sr(function(){return Se.trans=E,Se.transless=j,c!==0?(Hs(l,f),F=c,((L=E).storeNames.includes("$meta")?L.table("$meta").get("version").then(function(q){return q??F}):_e.resolve(F)).then(function(q){return H=q,U=E,$=f,K=[],q=(V=l)._versions,W=V._dbSchema=zi(0,V.idbdb,$),(q=q.filter(function(J){return J._cfg.version>=H})).length!==0?(q.forEach(function(J){K.push(function(){var te=W,ie=J._cfg.dbschema;$i(V,te,$),$i(V,ie,$),W=V._dbSchema=ie;var oe=Ko(te,ie);oe.add.forEach(function(xe){ci($,xe[0],xe[1].primKey,xe[1].indexes)}),oe.change.forEach(function(xe){if(xe.recreate)throw new Ie.Upgrade("Not yet support for changing primary key");var ve=$.objectStore(xe.name);xe.add.forEach(function(Te){return Gs(ve,Te)}),xe.change.forEach(function(Te){ve.deleteIndex(Te.name),Gs(ve,Te)}),xe.del.forEach(function(Te){return ve.deleteIndex(Te)})});var pe=J._cfg.contentUpgrade;if(pe&&J._cfg.version>H){Hs(V,$),U._memoizedTables={};var we=I(ie);oe.del.forEach(function(xe){we[xe]=te[xe]}),Bi(V,[V.Transaction.prototype]),Ui(V,[V.Transaction.prototype],o(we),we),U.schema=we;var fe,ye=ue(pe);return ye&&jr(),oe=_e.follow(function(){var xe;(fe=pe(U))&&ye&&(xe=Kn.bind(null,null),fe.then(xe,xe))}),fe&&typeof fe.then=="function"?_e.resolve(fe):oe.then(function(){return fe})}}),K.push(function(te){var ie,oe,pe=J._cfg.dbschema;ie=pe,oe=te,[].slice.call(oe.db.objectStoreNames).forEach(function(we){return ie[we]==null&&oe.db.deleteObjectStore(we)}),Bi(V,[V.Transaction.prototype]),Ui(V,[V.Transaction.prototype],V._storeNames,V._dbSchema),U.schema=V._dbSchema}),K.push(function(te){V.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(V.idbdb.version/10)===J._cfg.version?(V.idbdb.deleteObjectStore("$meta"),delete V._dbSchema.$meta,V._storeNames=V._storeNames.filter(function(ie){return ie!=="$meta"})):te.objectStore("$meta").put(J._cfg.version,"version"))})}),function J(){return K.length?_e.resolve(K.shift()(U.idbtrans)).then(J):_e.resolve()}().then(function(){fl(W,$)})):_e.resolve();var V,H,U,$,K,W}).catch(k)):(o(x).forEach(function(q){ci(f,q,x[q].primKey,x[q].indexes)}),Hs(l,f),void _e.follow(function(){return l.on.populate.fire(E)}).catch(k));var L,F})}function Dd(l,c){fl(l._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var f=zi(0,l.idbdb,c);$i(l,l._dbSchema,c);for(var g=0,x=Ko(f,l._dbSchema).change;g<x.length;g++){var E=function(k){if(k.change.length||k.recreate)return console.warn("Unable to patch indexes of table ".concat(k.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=c.objectStore(k.name);k.add.forEach(function(L){dn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(k.name,".").concat(L.src)),Gs(j,L)})}(x[g]);if(typeof E=="object")return E.value}}function Ko(l,c){var f,g={del:[],add:[],change:[]};for(f in l)c[f]||g.del.push(f);for(f in c){var x=l[f],E=c[f];if(x){var k={name:f,def:E,recreate:!1,del:[],add:[],change:[]};if(""+(x.primKey.keyPath||"")!=""+(E.primKey.keyPath||"")||x.primKey.auto!==E.primKey.auto)k.recreate=!0,g.change.push(k);else{var j=x.idxByName,L=E.idxByName,F=void 0;for(F in j)L[F]||k.del.push(F);for(F in L){var q=j[F],V=L[F];q?q.src!==V.src&&k.change.push(V):k.add.push(V)}(0<k.del.length||0<k.add.length||0<k.change.length)&&g.change.push(k)}}else g.add.push([f,E])}return g}function ci(l,c,f,g){var x=l.db.createObjectStore(c,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return g.forEach(function(E){return Gs(x,E)}),x}function fl(l,c){o(l).forEach(function(f){c.db.objectStoreNames.contains(f)||(dn&&console.debug("Dexie: Creating missing table",f),ci(c,f,l[f].primKey,l[f].indexes))})}function Gs(l,c){l.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function zi(l,c,f){var g={};return b(c.objectStoreNames,0).forEach(function(x){for(var E=f.objectStore(x),k=dl(Ju(F=E.keyPath),F||"",!0,!1,!!E.autoIncrement,F&&typeof F!="string",!0),j=[],L=0;L<E.indexNames.length;++L){var q=E.index(E.indexNames[L]),F=q.keyPath,q=dl(q.name,F,!!q.unique,!!q.multiEntry,!1,F&&typeof F!="string",!1);j.push(q)}g[x]=Bo(x,k,j)}),g}function $i(l,c,f){for(var g=f.db.objectStoreNames,x=0;x<g.length;++x){var E=g[x],k=f.objectStore(E);l._hasGetAll="getAll"in k;for(var j=0;j<k.indexNames.length;++j){var L=k.indexNames[j],F=k.index(L).keyPath,q=typeof F=="string"?F:"["+b(F).join("+")+"]";!c[E]||(F=c[E].idxByName[q])&&(F.name=L,delete c[E].idxByName[q],c[E].idxByName[L]=F)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(l._hasGetAll=!1)}function pl(l){return l.split(",").map(function(c,f){var E=c.split(":"),g=(x=E[1])===null||x===void 0?void 0:x.trim(),x=(c=E[0].trim()).replace(/([&*]|\+\+)/g,""),E=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return dl(x,E||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),u(E),f===0,g)})}var qo=(hi.prototype._createTableSchema=Bo,hi.prototype._parseIndexSyntax=pl,hi.prototype._parseStoresSpec=function(l,c){var f=this;o(l).forEach(function(g){if(l[g]!==null){var x=f._parseIndexSyntax(l[g]),E=x.shift();if(!E)throw new Ie.Schema("Invalid schema for table "+g+": "+l[g]);if(E.unique=!0,E.multi)throw new Ie.Schema("Primary key cannot be multiEntry*");x.forEach(function(k){if(k.auto)throw new Ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!k.keyPath)throw new Ie.Schema("Index must have a name and cannot be an empty string")}),x=f._createTableSchema(g,E,x),c[g]=x}})},hi.prototype.stores=function(f){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,f):f;var f=c._versions,g={},x={};return f.forEach(function(E){h(g,E._cfg.storesSource),x=E._cfg.dbschema={},E._parseStoresSpec(g,x)}),c._dbSchema=x,Bi(c,[c._allTables,c,c.Transaction.prototype]),Ui(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],o(x),x),c._storeNames=o(x),this},hi.prototype.upgrade=function(l){return this._cfg.contentUpgrade=Nt(this._cfg.contentUpgrade||Ze,l),this},hi);function hi(){}function Wo(l,c){var f=l._dbNamesDB;return f||(f=l._dbNamesDB=new fi(Us,{addons:[],indexedDB:l,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function pr(l){return l&&typeof l.databases=="function"}function Ho(l){return sr(function(){return Se.letThrough=!0,l()})}function Go(l){return!("from"in l)}var Rt=function(l,c){if(!this){var f=new Rt;return l&&"d"in l&&h(f,l),f}h(this,arguments.length?{d:1,from:l,to:1<arguments.length?c:l}:{d:0})};function Ki(l,c,f){var g=ze(c,f);if(!isNaN(g)){if(0<g)throw RangeError();if(Go(l))return h(l,{from:c,to:f,d:1});var x=l.l,g=l.r;if(ze(f,l.from)<0)return x?Ki(x,c,f):l.l={from:c,to:f,d:1,l:null,r:null},ml(l);if(0<ze(c,l.to))return g?Ki(g,c,f):l.r={from:c,to:f,d:1,l:null,r:null},ml(l);ze(c,l.from)<0&&(l.from=c,l.l=null,l.d=g?g.d+1:1),0<ze(f,l.to)&&(l.to=f,l.r=null,l.d=l.l?l.l.d+1:1),f=!l.r,x&&!l.l&&Br(l,x),g&&f&&Br(l,g)}}function Br(l,c){Go(c)||function f(g,L){var E=L.from,k=L.to,j=L.l,L=L.r;Ki(g,E,k),j&&f(g,j),L&&f(g,L)}(l,c)}function Zt(l,c){var f=Qs(c),g=f.next();if(g.done)return!1;for(var x=g.value,E=Qs(l),k=E.next(x.from),j=k.value;!g.done&&!k.done;){if(ze(j.from,x.to)<=0&&0<=ze(j.to,x.from))return!0;ze(x.from,j.from)<0?x=(g=f.next(j.from)).value:j=(k=E.next(x.from)).value}return!1}function Qs(l){var c=Go(l)?null:{s:0,n:l};return{next:function(f){for(var g=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,g)for(;c.n.l&&ze(f,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!g||ze(f,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function ml(l){var c,f,g=(((c=l.r)===null||c===void 0?void 0:c.d)||0)-(((f=l.l)===null||f===void 0?void 0:f.d)||0),x=1<g?"r":g<-1?"l":"";x&&(c=x=="r"?"l":"r",f=r({},l),g=l[x],l.from=g.from,l.to=g.to,l[x]=g[x],f[x]=g[c],(l[c]=f).d=di(f)),l.d=di(l)}function di(f){var c=f.r,f=f.l;return(c?f?Math.max(c.d,f.d):c.d:f?f.d:0)+1}function a(l,c){return o(c).forEach(function(f){l[f]?Br(l[f],c[f]):l[f]=function g(x){var E,k,j={};for(E in x)_(x,E)&&(k=x[E],j[E]=!k||typeof k!="object"||N.has(k.constructor)?k:g(k));return j}(c[f])}),l}function p(l,c){return l.all||c.all||Object.keys(l).some(function(f){return c[f]&&Zt(c[f],l[f])})}w(Rt.prototype,((Gn={add:function(l){return Br(this,l),this},addKey:function(l){return Ki(this,l,l),this},addKeys:function(l){var c=this;return l.forEach(function(f){return Ki(c,f,f)}),this},hasKey:function(l){var c=Qs(this).next(l).value;return c&&ze(c.from,l)<=0&&0<=ze(c.to,l)}})[qt]=function(){return Qs(this)},Gn));var v={},T={},Q=!1;function ne(l){a(T,l),Q||(Q=!0,setTimeout(function(){Q=!1,ge(T,!(T={}))},0))}function ge(l,c){c===void 0&&(c=!1);var f=new Set;if(l.all)for(var g=0,x=Object.values(v);g<x.length;g++)Ve(k=x[g],l,f,c);else for(var E in l){var k,j=/^idb\:\/\/(.*)\/(.*)\//.exec(E);j&&(E=j[1],j=j[2],(k=v["idb://".concat(E,"/").concat(j)])&&Ve(k,l,f,c))}f.forEach(function(L){return L()})}function Ve(l,c,f,g){for(var x=[],E=0,k=Object.entries(l.queries.query);E<k.length;E++){for(var j=k[E],L=j[0],F=[],q=0,V=j[1];q<V.length;q++){var H=V[q];p(c,H.obsSet)?H.subscribers.forEach(function(W){return f.add(W)}):g&&F.push(H)}g&&x.push([L,F])}if(g)for(var U=0,$=x;U<$.length;U++){var K=$[U],L=K[0],F=K[1];l.queries.query[L]=F}}function Et(l){var c=l._state,f=l._deps.indexedDB;if(c.isBeingOpened||l.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?ot(c.dbOpenError):l});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var g=c.openCanceller,x=Math.round(10*l.verno),E=!1;function k(){if(c.openCanceller!==g)throw new Ie.DatabaseClosed("db.open() was cancelled")}function j(){return new _e(function(H,U){if(k(),!f)throw new Ie.MissingAPI;var $=l.name,K=c.autoSchema||!x?f.open($):f.open($,x);if(!K)throw new Ie.MissingAPI;K.onerror=pn(U),K.onblocked=st(l._fireOnBlocked),K.onupgradeneeded=st(function(W){var J;q=K.transaction,c.autoSchema&&!l._options.allowEmptyDB?(K.onerror=Li,q.abort(),K.result.close(),(J=f.deleteDatabase($)).onsuccess=J.onerror=st(function(){U(new Ie.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(q.onerror=pn(U),W=W.oldVersion>Math.pow(2,62)?0:W.oldVersion,V=W<1,l.idbdb=K.result,E&&Dd(l,q),$o(l,W/10,q,U))},U),K.onsuccess=st(function(){q=null;var W,J,te,ie,oe,pe=l.idbdb=K.result,we=b(pe.objectStoreNames);if(0<we.length)try{var fe=pe.transaction((ie=we).length===1?ie[0]:ie,"readonly");if(c.autoSchema)J=pe,te=fe,(W=l).verno=J.version/10,te=W._dbSchema=zi(0,J,te),W._storeNames=b(J.objectStoreNames,0),Ui(W,[W._allTables],o(te),te);else if($i(l,l._dbSchema,fe),((oe=Ko(zi(0,(oe=l).idbdb,fe),oe._dbSchema)).add.length||oe.change.some(function(ye){return ye.add.length||ye.change.length}))&&!E)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),pe.close(),x=pe.version+1,E=!0,H(j());Hs(l,fe)}catch{}ai.push(l),pe.onversionchange=st(function(ye){c.vcFired=!0,l.on("versionchange").fire(ye)}),pe.onclose=st(function(){l.close({disableAutoOpen:!1})}),V&&(oe=l._deps,fe=$,pe=oe.indexedDB,oe=oe.IDBKeyRange,pr(pe)||fe===Us||Wo(pe,oe).put({name:fe}).catch(Ze)),H()},U)}).catch(function(H){switch(H==null?void 0:H.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(0<x)return x=0,j()}return _e.reject(H)})}var L,F=c.dbReadyResolve,q=null,V=!1;return _e.race([g,(typeof navigator>"u"?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(H){function U(){return indexedDB.databases().finally(H)}L=setInterval(U,100),U()}).finally(function(){return clearInterval(L)}):Promise.resolve()).then(j)]).then(function(){return k(),c.onReadyBeingFired=[],_e.resolve(Ho(function(){return l.on.ready.fire(l.vip)})).then(function H(){if(0<c.onReadyBeingFired.length){var U=c.onReadyBeingFired.reduce(Nt,Ze);return c.onReadyBeingFired=[],_e.resolve(Ho(function(){return U(l.vip)})).then(H)}})}).finally(function(){c.openCanceller===g&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(H){c.dbOpenError=H;try{q&&q.abort()}catch{}return g===c.openCanceller&&l._close(),ot(H)}).finally(function(){c.openComplete=!0,F()}).then(function(){var H;return V&&(H={},l.tables.forEach(function(U){U.schema.indexes.forEach(function($){$.name&&(H["idb://".concat(l.name,"/").concat(U.name,"/").concat($.name)]=new Rt(-1/0,[[[]]]))}),H["idb://".concat(l.name,"/").concat(U.name,"/")]=H["idb://".concat(l.name,"/").concat(U.name,"/:dels")]=new Rt(-1/0,[[[]]])}),fr(dr).fire(H),ge(H,!0)),l})}function et(l){function c(E){return l.next(E)}var f=x(c),g=x(function(E){return l.throw(E)});function x(E){return function(L){var j=E(L),L=j.value;return j.done?L:L&&typeof L.then=="function"?L.then(f,g):u(L)?Promise.all(L).then(f,g):f(L)}}return x(c)()}function pt(l,c,f){for(var g=u(l)?l.slice():[l],x=0;x<f;++x)g.push(c);return g}var Wn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(l){return r(r({},l),{table:function(c){var f=l.table(c),g=f.schema,x={},E=[];function k(V,H,U){var $=Fi(V),K=x[$]=x[$]||[],W=V==null?0:typeof V=="string"?1:V.length,J=0<H,J=r(r({},U),{name:J?"".concat($,"(virtual-from:").concat(U.name,")"):U.name,lowLevelIndex:U,isVirtual:J,keyTail:H,keyLength:W,extractKey:zo(V),unique:!J&&U.unique});return K.push(J),J.isPrimaryKey||E.push(J),1<W&&k(W===2?V[0]:V.slice(0,W-1),H+1,U),K.sort(function(te,ie){return te.keyTail-ie.keyTail}),J}c=k(g.primaryKey.keyPath,0,g.primaryKey),x[":id"]=[c];for(var j=0,L=g.indexes;j<L.length;j++){var F=L[j];k(F.keyPath,0,F)}function q(V){var H,U=V.query.index;return U.isVirtual?r(r({},V),{query:{index:U.lowLevelIndex,range:(H=V.query.range,U=U.keyTail,{type:H.type===1?2:H.type,lower:pt(H.lower,H.lowerOpen?l.MAX_KEY:l.MIN_KEY,U),lowerOpen:!0,upper:pt(H.upper,H.upperOpen?l.MIN_KEY:l.MAX_KEY,U),upperOpen:!0})}}):V}return r(r({},f),{schema:r(r({},g),{primaryKey:c,indexes:E,getIndexByKeyPath:function(V){return(V=x[Fi(V)])&&V[0]}}),count:function(V){return f.count(q(V))},query:function(V){return f.query(q(V))},openCursor:function(V){var H=V.query.index,U=H.keyTail,$=H.isVirtual,K=H.keyLength;return $?f.openCursor(q(V)).then(function(J){return J&&W(J)}):f.openCursor(V);function W(J){return Object.create(J,{continue:{value:function(te){te!=null?J.continue(pt(te,V.reverse?l.MAX_KEY:l.MIN_KEY,U)):V.unique?J.continue(J.key.slice(0,K).concat(V.reverse?l.MIN_KEY:l.MAX_KEY,U)):J.continue()}},continuePrimaryKey:{value:function(te,ie){J.continuePrimaryKey(pt(te,l.MAX_KEY,U),ie)}},primaryKey:{get:function(){return J.primaryKey}},key:{get:function(){var te=J.key;return K===1?te[0]:te.slice(0,K)}},value:{get:function(){return J.value}}})}}})}})}};function mr(l,c,f,g){return f=f||{},g=g||"",o(l).forEach(function(x){var E,k,j;_(c,x)?(E=l[x],k=c[x],typeof E=="object"&&typeof k=="object"&&E&&k?(j=dt(E))!==dt(k)?f[g+x]=c[x]:j==="Object"?mr(E,k,f,g+x+"."):E!==k&&(f[g+x]=c[x]):E!==k&&(f[g+x]=c[x])):f[g+x]=void 0}),o(c).forEach(function(x){_(l,x)||(f[g+x]=c[x])}),f}function Hn(l,c){return c.type==="delete"?c.keys:c.keys||c.values.map(l.extractKey)}var zr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(l){return r(r({},l),{table:function(c){var f=l.table(c),g=f.schema.primaryKey;return r(r({},f),{mutate:function(x){var E=Se.trans,k=E.table(c).hook,j=k.deleting,L=k.creating,F=k.updating;switch(x.type){case"add":if(L.fire===Ze)break;return E._promise("readwrite",function(){return q(x)},!0);case"put":if(L.fire===Ze&&F.fire===Ze)break;return E._promise("readwrite",function(){return q(x)},!0);case"delete":if(j.fire===Ze)break;return E._promise("readwrite",function(){return q(x)},!0);case"deleteRange":if(j.fire===Ze)break;return E._promise("readwrite",function(){return function V(H,U,$){return f.query({trans:H,values:!1,query:{index:g,range:U},limit:$}).then(function(K){var W=K.result;return q({type:"delete",keys:W,trans:H}).then(function(J){return 0<J.numFailures?Promise.reject(J.failures[0]):W.length<$?{failures:[],numFailures:0,lastResult:void 0}:V(H,r(r({},U),{lower:W[W.length-1],lowerOpen:!0}),$)})})}(x.trans,x.range,1e4)},!0)}return f.mutate(x);function q(V){var H,U,$,K=Se.trans,W=V.keys||Hn(g,V);if(!W)throw new Error("Keys missing");return(V=V.type==="add"||V.type==="put"?r(r({},V),{keys:W}):r({},V)).type!=="delete"&&(V.values=i([],V.values)),V.keys&&(V.keys=i([],V.keys)),H=f,$=W,((U=V).type==="add"?Promise.resolve([]):H.getMany({trans:U.trans,keys:$,cache:"immutable"})).then(function(J){var te=W.map(function(ie,oe){var pe,we,fe,ye=J[oe],xe={onerror:null,onsuccess:null};return V.type==="delete"?j.fire.call(xe,ie,ye,K):V.type==="add"||ye===void 0?(pe=L.fire.call(xe,ie,V.values[oe],K),ie==null&&pe!=null&&(V.keys[oe]=ie=pe,g.outbound||C(V.values[oe],g.keyPath,ie))):(pe=mr(ye,V.values[oe]),(we=F.fire.call(xe,pe,ie,ye,K))&&(fe=V.values[oe],Object.keys(we).forEach(function(ve){_(fe,ve)?fe[ve]=we[ve]:C(fe,ve,we[ve])}))),xe});return f.mutate(V).then(function(ie){for(var oe=ie.failures,pe=ie.results,we=ie.numFailures,ie=ie.lastResult,fe=0;fe<W.length;++fe){var ye=(pe||W)[fe],xe=te[fe];ye==null?xe.onerror&&xe.onerror(oe[fe]):xe.onsuccess&&xe.onsuccess(V.type==="put"&&J[fe]?V.values[fe]:ye)}return{failures:oe,results:pe,numFailures:we,lastResult:ie}}).catch(function(ie){return te.forEach(function(oe){return oe.onerror&&oe.onerror(ie)}),Promise.reject(ie)})})}}})}})}};function Ys(l,c,f){try{if(!c||c.keys.length<l.length)return null;for(var g=[],x=0,E=0;x<c.keys.length&&E<l.length;++x)ze(c.keys[x],l[E])===0&&(g.push(f?A(c.values[x]):c.values[x]),++E);return g.length===l.length?g:null}catch{return null}}var gl={stack:"dbcore",level:-1,create:function(l){return{table:function(c){var f=l.table(c);return r(r({},f),{getMany:function(g){if(!g.cache)return f.getMany(g);var x=Ys(g.keys,g.trans._cache,g.cache==="clone");return x?_e.resolve(x):f.getMany(g).then(function(E){return g.trans._cache={keys:g.keys,values:g.cache==="clone"?A(E):E},E})},mutate:function(g){return g.type!=="add"&&(g.trans._cache=null),f.mutate(g)}})}}}};function Yg(l,c){return l.trans.mode==="readonly"&&!!l.subscr&&!l.trans.explicit&&l.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Jg(l,c){switch(l){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Nb={stack:"dbcore",level:0,name:"Observability",create:function(l){var c=l.schema.name,f=new Rt(l.MIN_KEY,l.MAX_KEY);return r(r({},l),{transaction:function(g,x,E){if(Se.subscr&&x!=="readonly")throw new Ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Se.querier));return l.transaction(g,x,E)},table:function(g){var x=l.table(g),E=x.schema,k=E.primaryKey,V=E.indexes,j=k.extractKey,L=k.outbound,F=k.autoIncrement&&V.filter(function(U){return U.compound&&U.keyPath.includes(k.keyPath)}),q=r(r({},x),{mutate:function(U){function $(ve){return ve="idb://".concat(c,"/").concat(g,"/").concat(ve),ie[ve]||(ie[ve]=new Rt)}var K,W,J,te=U.trans,ie=U.mutatedParts||(U.mutatedParts={}),oe=$(""),pe=$(":dels"),we=U.type,xe=U.type==="deleteRange"?[U.range]:U.type==="delete"?[U.keys]:U.values.length<50?[Hn(k,U).filter(function(ve){return ve}),U.values]:[],fe=xe[0],ye=xe[1],xe=U.trans._cache;return u(fe)?(oe.addKeys(fe),(xe=we==="delete"||fe.length===ye.length?Ys(fe,xe):null)||pe.addKeys(fe),(xe||ye)&&(K=$,W=xe,J=ye,E.indexes.forEach(function(ve){var Te=K(ve.name||"");function Me(Be){return Be!=null?ve.extractKey(Be):null}function Ue(Be){return ve.multiEntry&&u(Be)?Be.forEach(function(Dn){return Te.addKey(Dn)}):Te.addKey(Be)}(W||J).forEach(function(Be,en){var Le=W&&Me(W[en]),en=J&&Me(J[en]);ze(Le,en)!==0&&(Le!=null&&Ue(Le),en!=null&&Ue(en))})}))):fe?(ye={from:(ye=fe.lower)!==null&&ye!==void 0?ye:l.MIN_KEY,to:(ye=fe.upper)!==null&&ye!==void 0?ye:l.MAX_KEY},pe.add(ye),oe.add(ye)):(oe.add(f),pe.add(f),E.indexes.forEach(function(ve){return $(ve.name).add(f)})),x.mutate(U).then(function(ve){return!fe||U.type!=="add"&&U.type!=="put"||(oe.addKeys(ve.results),F&&F.forEach(function(Te){for(var Me=U.values.map(function(Le){return Te.extractKey(Le)}),Ue=Te.keyPath.findIndex(function(Le){return Le===k.keyPath}),Be=0,Dn=ve.results.length;Be<Dn;++Be)Me[Be][Ue]=ve.results[Be];$(Te.name).addKeys(Me)})),te.mutatedParts=a(te.mutatedParts||{},ie),ve})}}),V=function($){var K=$.query,$=K.index,K=K.range;return[$,new Rt(($=K.lower)!==null&&$!==void 0?$:l.MIN_KEY,(K=K.upper)!==null&&K!==void 0?K:l.MAX_KEY)]},H={get:function(U){return[k,new Rt(U.key)]},getMany:function(U){return[k,new Rt().addKeys(U.keys)]},count:V,query:V,openCursor:V};return o(H).forEach(function(U){q[U]=function($){var K=Se.subscr,W=!!K,J=Yg(Se,x)&&Jg(U,$)?$.obsSet={}:K;if(W){var te=function(ye){return ye="idb://".concat(c,"/").concat(g,"/").concat(ye),J[ye]||(J[ye]=new Rt)},ie=te(""),oe=te(":dels"),K=H[U]($),W=K[0],K=K[1];if((U==="query"&&W.isPrimaryKey&&!$.values?oe:te(W.name||"")).add(K),!W.isPrimaryKey){if(U!=="count"){var pe=U==="query"&&L&&$.values&&x.query(r(r({},$),{values:!1}));return x[U].apply(this,arguments).then(function(ye){if(U==="query"){if(L&&$.values)return pe.then(function(Me){return Me=Me.result,ie.addKeys(Me),ye});var xe=$.values?ye.result.map(j):ye.result;($.values?ie:oe).addKeys(xe)}else if(U==="openCursor"){var ve=ye,Te=$.values;return ve&&Object.create(ve,{key:{get:function(){return oe.addKey(ve.primaryKey),ve.key}},primaryKey:{get:function(){var Me=ve.primaryKey;return oe.addKey(Me),Me}},value:{get:function(){return Te&&ie.addKey(ve.primaryKey),ve.value}}})}return ye})}oe.add(f)}}return x[U].apply(this,arguments)}}),q}})}};function Xg(l,c,f){if(f.numFailures===0)return c;if(c.type==="deleteRange")return null;var g=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return f.numFailures===g?null:(c=r({},c),u(c.keys)&&(c.keys=c.keys.filter(function(x,E){return!(E in f.failures)})),"values"in c&&u(c.values)&&(c.values=c.values.filter(function(x,E){return!(E in f.failures)})),c)}function Od(l,c){return f=l,((g=c).lower===void 0||(g.lowerOpen?0<ze(f,g.lower):0<=ze(f,g.lower)))&&(l=l,(c=c).upper===void 0||(c.upperOpen?ze(l,c.upper)<0:ze(l,c.upper)<=0));var f,g}function Zg(l,c,H,g,x,E){if(!H||H.length===0)return l;var k=c.query.index,j=k.multiEntry,L=c.query.range,F=g.schema.primaryKey.extractKey,q=k.extractKey,V=(k.lowLevelIndex||k).extractKey,H=H.reduce(function(U,$){var K=U,W=[];if($.type==="add"||$.type==="put")for(var J=new Rt,te=$.values.length-1;0<=te;--te){var ie,oe=$.values[te],pe=F(oe);J.hasKey(pe)||(ie=q(oe),(j&&u(ie)?ie.some(function(ve){return Od(ve,L)}):Od(ie,L))&&(J.addKey(pe),W.push(oe)))}switch($.type){case"add":var we=new Rt().addKeys(c.values?U.map(function(Te){return F(Te)}):U),K=U.concat(c.values?W.filter(function(Te){return Te=F(Te),!we.hasKey(Te)&&(we.addKey(Te),!0)}):W.map(function(Te){return F(Te)}).filter(function(Te){return!we.hasKey(Te)&&(we.addKey(Te),!0)}));break;case"put":var fe=new Rt().addKeys($.values.map(function(Te){return F(Te)}));K=U.filter(function(Te){return!fe.hasKey(c.values?F(Te):Te)}).concat(c.values?W:W.map(function(Te){return F(Te)}));break;case"delete":var ye=new Rt().addKeys($.keys);K=U.filter(function(Te){return!ye.hasKey(c.values?F(Te):Te)});break;case"deleteRange":var xe=$.range;K=U.filter(function(Te){return!Od(F(Te),xe)})}return K},l);return H===l?l:(H.sort(function(U,$){return ze(V(U),V($))||ze(F(U),F($))}),c.limit&&c.limit<1/0&&(H.length>c.limit?H.length=c.limit:l.length===c.limit&&H.length<c.limit&&(x.dirty=!0)),E?Object.freeze(H):H)}function ey(l,c){return ze(l.lower,c.lower)===0&&ze(l.upper,c.upper)===0&&!!l.lowerOpen==!!c.lowerOpen&&!!l.upperOpen==!!c.upperOpen}function Rb(l,c){return function(f,g,x,E){if(f===void 0)return g!==void 0?-1:0;if(g===void 0)return 1;if((g=ze(f,g))===0){if(x&&E)return 0;if(x)return 1;if(E)return-1}return g}(l.lower,c.lower,l.lowerOpen,c.lowerOpen)<=0&&0<=function(f,g,x,E){if(f===void 0)return g!==void 0?1:0;if(g===void 0)return-1;if((g=ze(f,g))===0){if(x&&E)return 0;if(x)return-1;if(E)return 1}return g}(l.upper,c.upper,l.upperOpen,c.upperOpen)}function Db(l,c,f,g){l.subscribers.add(f),g.addEventListener("abort",function(){var x,E;l.subscribers.delete(f),l.subscribers.size===0&&(x=l,E=c,setTimeout(function(){x.subscribers.size===0&&re(E,x)},3e3))})}var Ob={stack:"dbcore",level:0,name:"Cache",create:function(l){var c=l.schema.name;return r(r({},l),{transaction:function(f,g,x){var E,k,j=l.transaction(f,g,x);return g==="readwrite"&&(k=(E=new AbortController).signal,x=function(L){return function(){if(E.abort(),g==="readwrite"){for(var F=new Set,q=0,V=f;q<V.length;q++){var H=V[q],U=v["idb://".concat(c,"/").concat(H)];if(U){var $=l.table(H),K=U.optimisticOps.filter(function(Te){return Te.trans===j});if(j._explicit&&L&&j.mutatedParts)for(var W=0,J=Object.values(U.queries.query);W<J.length;W++)for(var te=0,ie=(we=J[W]).slice();te<ie.length;te++)p((fe=ie[te]).obsSet,j.mutatedParts)&&(re(we,fe),fe.subscribers.forEach(function(Te){return F.add(Te)}));else if(0<K.length){U.optimisticOps=U.optimisticOps.filter(function(Te){return Te.trans!==j});for(var oe=0,pe=Object.values(U.queries.query);oe<pe.length;oe++)for(var we,fe,ye,xe=0,ve=(we=pe[oe]).slice();xe<ve.length;xe++)(fe=ve[xe]).res!=null&&j.mutatedParts&&(L&&!fe.dirty?(ye=Object.isFrozen(fe.res),ye=Zg(fe.res,fe.req,K,$,fe,ye),fe.dirty?(re(we,fe),fe.subscribers.forEach(function(Te){return F.add(Te)})):ye!==fe.res&&(fe.res=ye,fe.promise=_e.resolve({result:ye}))):(fe.dirty&&re(we,fe),fe.subscribers.forEach(function(Te){return F.add(Te)})))}}}F.forEach(function(Te){return Te()})}}},j.addEventListener("abort",x(!1),{signal:k}),j.addEventListener("error",x(!1),{signal:k}),j.addEventListener("complete",x(!0),{signal:k})),j},table:function(f){var g=l.table(f),x=g.schema.primaryKey;return r(r({},g),{mutate:function(E){var k=Se.trans;if(x.outbound||k.db._options.cache==="disabled"||k.explicit||k.idbtrans.mode!=="readwrite")return g.mutate(E);var j=v["idb://".concat(c,"/").concat(f)];return j?(k=g.mutate(E),E.type!=="add"&&E.type!=="put"||!(50<=E.values.length||Hn(x,E).some(function(L){return L==null}))?(j.optimisticOps.push(E),E.mutatedParts&&ne(E.mutatedParts),k.then(function(L){0<L.numFailures&&(re(j.optimisticOps,E),(L=Xg(0,E,L))&&j.optimisticOps.push(L),E.mutatedParts&&ne(E.mutatedParts))}),k.catch(function(){re(j.optimisticOps,E),E.mutatedParts&&ne(E.mutatedParts)})):k.then(function(L){var F=Xg(0,r(r({},E),{values:E.values.map(function(q,V){var H;return L.failures[V]?q:(q=(H=x.keyPath)!==null&&H!==void 0&&H.includes(".")?A(q):r({},q),C(q,x.keyPath,L.results[V]),q)})}),L);j.optimisticOps.push(F),queueMicrotask(function(){return E.mutatedParts&&ne(E.mutatedParts)})}),k):g.mutate(E)},query:function(E){if(!Yg(Se,g)||!Jg("query",E))return g.query(E);var k=((F=Se.trans)===null||F===void 0?void 0:F.db._options.cache)==="immutable",V=Se,j=V.requery,L=V.signal,F=function($,K,W,J){var te=v["idb://".concat($,"/").concat(K)];if(!te)return[];if(!(K=te.queries[W]))return[null,!1,te,null];var ie=K[(J.query?J.query.index.name:null)||""];if(!ie)return[null,!1,te,null];switch(W){case"query":var oe=ie.find(function(pe){return pe.req.limit===J.limit&&pe.req.values===J.values&&ey(pe.req.query.range,J.query.range)});return oe?[oe,!0,te,ie]:[ie.find(function(pe){return("limit"in pe.req?pe.req.limit:1/0)>=J.limit&&(!J.values||pe.req.values)&&Rb(pe.req.query.range,J.query.range)}),!1,te,ie];case"count":return oe=ie.find(function(pe){return ey(pe.req.query.range,J.query.range)}),[oe,!!oe,te,ie]}}(c,f,"query",E),q=F[0],V=F[1],H=F[2],U=F[3];return q&&V?q.obsSet=E.obsSet:(V=g.query(E).then(function($){var K=$.result;if(q&&(q.res=K),k){for(var W=0,J=K.length;W<J;++W)Object.freeze(K[W]);Object.freeze(K)}else $.result=A(K);return $}).catch(function($){return U&&q&&re(U,q),Promise.reject($)}),q={obsSet:E.obsSet,promise:V,subscribers:new Set,type:"query",req:E,dirty:!1},U?U.push(q):(U=[q],(H=H||(v["idb://".concat(c,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[E.query.index.name||""]=U)),Db(q,U,j,L),q.promise.then(function($){return{result:Zg($.result,E,H==null?void 0:H.optimisticOps,g,q,k)}})}})}})}};function Zu(l,c){return new Proxy(l,{get:function(f,g,x){return g==="db"?c:Reflect.get(f,g,x)}})}var fi=(bt.prototype.version=function(l){if(isNaN(l)||l<.1)throw new Ie.Type("Given version is not a positive number");if(l=Math.round(10*l)/10,this.idbdb||this._state.isBeingOpened)throw new Ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,l);var c=this._versions,f=c.filter(function(g){return g._cfg.version===l})[0];return f||(f=new this.Version(l),c.push(f),c.sort(Xu),f.stores({}),this._state.autoSchema=!1,f)},bt.prototype._whenReady=function(l){var c=this;return this.idbdb&&(this._state.openComplete||Se.letThrough||this._vip)?l():new _e(function(f,g){if(c._state.openComplete)return g(new Ie.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void g(new Ie.DatabaseClosed);c.open().catch(Ze)}c._state.dbReadyPromise.then(f,g)}).then(l)},bt.prototype.use=function(l){var c=l.stack,f=l.create,g=l.level,x=l.name;return x&&this.unuse({stack:c,name:x}),l=this._middlewares[c]||(this._middlewares[c]=[]),l.push({stack:c,create:f,level:g??10,name:x}),l.sort(function(E,k){return E.level-k.level}),this},bt.prototype.unuse=function(l){var c=l.stack,f=l.name,g=l.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(x){return g?x.create!==g:!!f&&x.name!==f})),this},bt.prototype.open=function(){var l=this;return qn(zn,function(){return Et(l)})},bt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var l=this._state,c=ai.indexOf(this);if(0<=c&&ai.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}l.isBeingOpened||(l.dbReadyPromise=new _e(function(f){l.dbReadyResolve=f}),l.openCanceller=new _e(function(f,g){l.cancelOpen=g}))},bt.prototype.close=function(f){var c=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;c?(f.isBeingOpened&&f.cancelOpen(new Ie.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new Ie.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},bt.prototype.delete=function(l){var c=this;l===void 0&&(l={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",g=this._state;return new _e(function(x,E){function k(){c.close(l);var j=c._deps.indexedDB.deleteDatabase(c.name);j.onsuccess=st(function(){var L,F,q;L=c._deps,F=c.name,q=L.indexedDB,L=L.IDBKeyRange,pr(q)||F===Us||Wo(q,L).delete(F).catch(Ze),x()}),j.onerror=pn(E),j.onblocked=c._fireOnBlocked}if(f)throw new Ie.InvalidArgument("Invalid closeOptions argument to db.delete()");g.isBeingOpened?g.dbReadyPromise.then(k):k()})},bt.prototype.backendDB=function(){return this.idbdb},bt.prototype.isOpen=function(){return this.idbdb!==null},bt.prototype.hasBeenClosed=function(){var l=this._state.dbOpenError;return l&&l.name==="DatabaseClosed"},bt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},bt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(bt.prototype,"tables",{get:function(){var l=this;return o(this._allTables).map(function(c){return l._allTables[c]})},enumerable:!1,configurable:!0}),bt.prototype.transaction=function(){var l=(function(c,f,g){var x=arguments.length;if(x<2)throw new Ie.InvalidArgument("Too few arguments");for(var E=new Array(x-1);--x;)E[x-1]=arguments[x];return g=E.pop(),[c,S(E),g]}).apply(this,arguments);return this._transaction.apply(this,l)},bt.prototype._transaction=function(l,c,f){var g=this,x=Se.trans;x&&x.db===this&&l.indexOf("!")===-1||(x=null);var E,k,j=l.indexOf("?")!==-1;l=l.replace("!","").replace("?","");try{if(k=c.map(function(F){if(F=F instanceof g.Table?F.name:F,typeof F!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return F}),l=="r"||l===Lo)E=Lo;else{if(l!="rw"&&l!=Bs)throw new Ie.InvalidArgument("Invalid transaction mode: "+l);E=Bs}if(x){if(x.mode===Lo&&E===Bs){if(!j)throw new Ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&k.forEach(function(F){if(x&&x.storeNames.indexOf(F)===-1){if(!j)throw new Ie.SubTransaction("Table "+F+" not included in parent transaction.");x=null}}),j&&x&&!x.active&&(x=null)}}catch(F){return x?x._promise(null,function(q,V){V(F)}):ot(F)}var L=(function F(q,V,H,U,$){return _e.resolve().then(function(){var K=Se.transless||Se,W=q._createTransaction(V,H,q._dbSchema,U);if(W.explicit=!0,K={trans:W,transless:K},U)W.idbtrans=U.idbtrans;else try{W.create(),W.idbtrans._explicit=!0,q._state.PR1398_maxLoop=3}catch(ie){return ie.name===Fe.InvalidState&&q.isOpen()&&0<--q._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),q.close({disableAutoOpen:!1}),q.open().then(function(){return F(q,V,H,null,$)})):ot(ie)}var J,te=ue($);return te&&jr(),K=_e.follow(function(){var ie;(J=$.call(W,W))&&(te?(ie=Kn.bind(null,null),J.then(ie,ie)):typeof J.next=="function"&&typeof J.throw=="function"&&(J=et(J)))},K),(J&&typeof J.then=="function"?_e.resolve(J).then(function(ie){return W.active?ie:ot(new Ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):K.then(function(){return J})).then(function(ie){return U&&W._resolve(),W._completion.then(function(){return ie})}).catch(function(ie){return W._reject(ie),ot(ie)})})}).bind(null,this,E,k,x,f);return x?x._promise(E,L,"lock"):Se.trans?qn(Se.transless,function(){return g._whenReady(L)}):this._whenReady(L)},bt.prototype.table=function(l){if(!_(this._allTables,l))throw new Ie.InvalidTable("Table ".concat(l," does not exist"));return this._allTables[l]},bt);function bt(l,c){var f=this;this._middlewares={},this.verno=0;var g=bt.dependencies;this._options=c=r({addons:bt.addons,autoOpen:!0,indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},g=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x,E,k,j,L,F={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ze,dbReadyPromise:null,cancelOpen:Ze,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};F.dbReadyPromise=new _e(function(V){F.dbReadyResolve=V}),F.openCanceller=new _e(function(V,H){F.cancelOpen=H}),this._state=F,this.name=l,this.on=cr(this,"populate","blocked","versionchange","close",{ready:[Nt,Ze]}),this.once=function(V,H){var U=function(){for(var $=[],K=0;K<arguments.length;K++)$[K]=arguments[K];f.on(V).unsubscribe(U),H.apply(f,$)};return f.on(V,U)},this.on.ready.subscribe=O(this.on.ready.subscribe,function(V){return function(H,U){bt.vip(function(){var $,K=f._state;K.openComplete?(K.dbOpenError||_e.resolve().then(H),U&&V(H)):K.onReadyBeingFired?(K.onReadyBeingFired.push(H),U&&V(H)):(V(H),$=f,U||V(function W(){$.on.ready.unsubscribe(H),$.on.ready.unsubscribe(W)}))})}}),this.Collection=(x=this,Ks(Hu.prototype,function(J,W){this.db=x;var U=ol,$=null;if(W)try{U=W()}catch(te){$=te}var K=J._ctx,W=K.table,J=W.hook.reading.fire;this._ctx={table:W,index:K.index,isPrimKey:!K.index||W.schema.primKey.keyPath&&K.index===W.schema.primKey.name,range:U,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:K.or,valueMapper:J!==ri?J:null}})),this.Table=(E=this,Ks($s.prototype,function(V,H,U){this.db=E,this._tx=U,this.name=V,this.schema=H,this.hook=E._allTables[V]?E._allTables[V].hook:cr(null,{creating:[el,Ze],reading:[Fu,ri],updating:[Uu,Ze],deleting:[tl,Ze]})})),this.Transaction=(k=this,Ks(hl.prototype,function(V,H,U,$,K){var W=this;V!=="readonly"&&H.forEach(function(J){J=(J=U[J])===null||J===void 0?void 0:J.yProps,J&&(H=H.concat(J.map(function(te){return te.updatesTable})))}),this.db=k,this.mode=V,this.storeNames=H,this.schema=U,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=cr(this,"complete","error","abort"),this.parent=K||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e(function(J,te){W._resolve=J,W._reject=te}),this._completion.then(function(){W.active=!1,W.on.complete.fire()},function(J){var te=W.active;return W.active=!1,W.on.error.fire(J),W.parent?W.parent._reject(J):te&&W.idbtrans&&W.idbtrans.abort(),ot(J)})})),this.Version=(j=this,Ks(qo.prototype,function(V){this.db=j,this._cfg={version:V,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(L=this,Ks(Yu.prototype,function(V,H,U){if(this.db=L,this._ctx={table:V,index:H===":id"?null:H,or:U},this._cmp=this._ascending=ze,this._descending=function($,K){return ze(K,$)},this._max=function($,K){return 0<ze($,K)?$:K},this._min=function($,K){return ze($,K)<0?$:K},this._IDBKeyRange=L._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ie.MissingAPI})),this.on("versionchange",function(V){0<V.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(V){!V.newVersion||V.newVersion<V.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(V.oldVersion/10))}),this._maxKey=Mi(c.IDBKeyRange),this._createTransaction=function(V,H,U,$){return new f.Transaction(V,H,U,f._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(V){f.on("blocked").fire(V),ai.filter(function(H){return H.name===f.name&&H!==f&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(V)})},this.use(gl),this.use(Ob),this.use(Nb),this.use(Wn),this.use(zr);var q=new Proxy(this,{get:function(V,H,U){if(H==="_vip")return!0;if(H==="table")return function(K){return Zu(f.table(K),q)};var $=Reflect.get(V,H,U);return $ instanceof $s?Zu($,q):H==="tables"?$.map(function(K){return Zu(K,q)}):H==="_createTransaction"?function(){return Zu($.apply(this,arguments),q)}:$}});this.vip=q,g.forEach(function(V){return V(f)})}var ec,Gn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",jb=(jd.prototype.subscribe=function(l,c,f){return this._subscribe(l&&typeof l!="function"?l:{next:l,error:c,complete:f})},jd.prototype[Gn]=function(){return this},jd);function jd(l){this._subscribe=l}try{ec={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{ec={indexedDB:null,IDBKeyRange:null}}function ty(l){var c,f=!1,g=new jb(function(x){var E=ue(l),k,j=!1,L={},F={},q={get closed(){return j},unsubscribe:function(){j||(j=!0,k&&k.abort(),V&&fr.storagemutated.unsubscribe(U))}};x.start&&x.start(q);var V=!1,H=function(){return Fs($)},U=function(K){a(L,K),p(F,L)&&H()},$=function(){var K,W,J;!j&&ec.indexedDB&&(L={},K={},k&&k.abort(),k=new AbortController,J=function(te){var ie=An();try{E&&jr();var oe=sr(l,te);return oe=E?oe.finally(Kn):oe}finally{ie&&ji()}}(W={subscr:K,signal:k.signal,requery:H,querier:l,trans:null}),Promise.resolve(J).then(function(te){f=!0,c=te,j||W.signal.aborted||(L={},function(ie){for(var oe in ie)if(_(ie,oe))return;return 1}(F=K)||V||(fr(dr,U),V=!0),Fs(function(){return!j&&x.next&&x.next(te)}))},function(te){f=!1,["DatabaseClosedError","AbortError"].includes(te==null?void 0:te.name)||j||Fs(function(){j||x.error&&x.error(te)})}))};return setTimeout(H,0),q});return g.hasValue=function(){return f},g.getValue=function(){return c},g}var Js=fi;function Vd(l){var c=qi;try{qi=!0,fr.storagemutated.fire(l),ge(l,!0)}finally{qi=c}}w(Js,r(r({},Xt),{delete:function(l){return new Js(l,{addons:[]}).delete()},exists:function(l){return new Js(l,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(l){try{return c=Js.dependencies,f=c.indexedDB,c=c.IDBKeyRange,(pr(f)?Promise.resolve(f.databases()).then(function(g){return g.map(function(x){return x.name}).filter(function(x){return x!==Us})}):Wo(f,c).toCollection().primaryKeys()).then(l)}catch{return ot(new Ie.MissingAPI)}var c,f},defineClass:function(){return function(l){h(this,l)}},ignoreTransaction:function(l){return Se.trans?qn(Se.transless,l):l()},vip:Ho,async:function(l){return function(){try{var c=et(l.apply(this,arguments));return c&&typeof c.then=="function"?c:_e.resolve(c)}catch(f){return ot(f)}}},spawn:function(l,c,f){try{var g=et(l.apply(f,c||[]));return g&&typeof g.then=="function"?g:_e.resolve(g)}catch(x){return ot(x)}},currentTransaction:{get:function(){return Se.trans||null}},waitFor:function(l,c){return c=_e.resolve(typeof l=="function"?Js.ignoreTransaction(l):l).timeout(c||6e4),Se.trans?Se.trans.waitFor(c):c},Promise:_e,debug:{get:function(){return dn},set:function(l){Bu(l)}},derive:z,extend:h,props:w,override:O,Events:cr,on:fr,liveQuery:ty,extendObservabilitySet:a,getByKeyPath:se,setByKeyPath:C,delByKeyPath:function(l,c){typeof c=="string"?C(l,c,void 0):"length"in c&&[].map.call(c,function(f){C(l,f,void 0)})},shallowClone:I,deepClone:A,getObjectDiff:mr,cmp:ze,asap:X,minKey:-1/0,addons:[],connections:ai,errnames:Fe,dependencies:ec,cache:v,semVer:"4.2.1",version:"4.2.1".split(".").map(function(l){return parseInt(l)}).reduce(function(l,c,f){return l+c/Math.pow(10,2*f)})})),Js.maxKey=Mi(Js.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(fr(dr,function(l){qi||(l=new CustomEvent(ui,{detail:l}),qi=!0,dispatchEvent(l),qi=!1)}),addEventListener(ui,function(l){l=l.detail,qi||Vd(l)}));var Qo,qi=!1,ny=function(){};return typeof BroadcastChannel<"u"&&((ny=function(){(Qo=new BroadcastChannel(ui)).onmessage=function(l){return l.data&&Vd(l.data)}})(),typeof Qo.unref=="function"&&Qo.unref(),fr(dr,function(l){qi||Qo.postMessage(l)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(l){if(!fi.disableBfCache&&l.persisted){dn&&console.debug("Dexie: handling persisted pagehide"),Qo!=null&&Qo.close();for(var c=0,f=ai;c<f.length;c++)f[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(l){!fi.disableBfCache&&l.persisted&&(dn&&console.debug("Dexie: handling persisted pageshow"),ny(),Vd({all:new Rt(-1/0,[[]])}))})),_e.rejectionMapper=function(l,c){return!l||l instanceof ae||l instanceof TypeError||l instanceof SyntaxError||!l.name||!xn[l.name]?l:(c=new xn[l.name](c||l.message,l),"stack"in l&&M(c,"stack",{get:function(){return this.inner.stack}}),c)},Bu(dn),r(fi,Object.freeze({__proto__:null,Dexie:fi,liveQuery:ty,Entity:al,cmp:ze,PropModification:ur,replacePrefix:function(l,c){return new ur({replacePrefix:[l,c]})},add:function(l){return new ur({add:l})},remove:function(l){return new ur({remove:l})},default:fi,RangeSet:Rt,mergeRanges:Br,rangesOverlap:Zt}),{default:fi}),fi})})(Ox);var aC=Ox.exports;const kp=em(aC),kv=Symbol.for("Dexie"),Da=globalThis[kv]||(globalThis[kv]=kp);if(kp.semVer!==Da.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${kp.semVer} and ${Da.semVer}`);const{liveQuery:Jj,mergeRanges:Xj,rangesOverlap:Zj,RangeSet:e4,cmp:t4,Entity:n4,PropModification:r4,replacePrefix:i4,add:s4,remove:o4,DexieYProvider:a4}=Da,Dt=new Da("NexusMindDB");Dt.version(2).stores({contacts:"id, name, ocrText, phone, *tags, lastUpdated",settings:"id"});function lC(t,e,n){var r,i;typeof t=="function"?(r=e||[],i=n):(r=[],i=e);var s=Yi.useRef({hasResult:!1,result:i,error:null}),o=Yi.useReducer(function(d){return d+1},0);o[0];var u=o[1],h=Yi.useMemo(function(){var d=typeof t=="function"?t():t;if(!d||typeof d.subscribe!="function")throw t===d?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof d.hasValue!="function"||d.hasValue()))if(typeof d.getValue=="function")s.current.result=d.getValue(),s.current.hasResult=!0;else{var y=d.subscribe(function(_){s.current.result=_,s.current.hasResult=!0});typeof y=="function"?y():y.unsubscribe()}return d},r);if(Yi.useDebugValue(s.current.result),Yi.useEffect(function(){var d=h.subscribe(function(y){var _=s.current;(_.error!==null||_.result!==y)&&(_.error=null,_.result=y,_.hasResult=!0,u())},function(y){var _=s.current;_.error!==y&&(_.error=y,u())});return typeof d=="function"?d:d.unsubscribe.bind(d)},r),s.current.error)throw s.current.error;return s.current.result}function Cp(t,e,n){return lC(function(){return Da.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=Da.DexieYProvider;e&&e.release(t)});const uC=()=>{};var Cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],u=t[n++],h=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,u=o?t[i+1]:0,h=i+2<t.length,d=h?t[i+2]:0,y=s>>2,_=(s&3)<<4|u>>4;let w=(u&15)<<2|d>>6,P=d&63;h||(P=64,o||(w=64)),r.push(n[y],n[_],n[w],n[P])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||d==null||_==null)throw new hC;const w=s<<2|u>>4;if(r.push(w),d!==64){const P=u<<4&240|d>>2;if(r.push(P),_!==64){const M=d<<6&192|_;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dC=function(t){const e=jx(t);return Vx.encodeByteArray(e,!0)},vh=function(t){return dC(t).replace(/\./g,"")},Lx=function(t){try{return Vx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=()=>fC().__FIREBASE_DEFAULTS__,mC=()=>{if(typeof process>"u"||typeof Cv>"u")return;const t=Cv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lx(t[1]);return e&&JSON.parse(e)},sd=()=>{try{return uC()||pC()||mC()||gC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mx=t=>{var e,n;return(n=(e=sd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},yC=t=>{const e=Mx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fx=()=>{var t;return(t=sd())==null?void 0:t.config},Ux=t=>{var e;return(e=sd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[vh(JSON.stringify(n)),vh(JSON.stringify(o)),""].join(".")}const Kl={};function wC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kl))Kl[e]?t.emulator.push(e):t.prod.push(e);return t}function xC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Av=!1;function zx(t,e){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||Kl[t]===e||Kl[t]||Av)return;Kl[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",s=wC().prod.length>0;function o(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,P){w.setAttribute("width","24"),w.setAttribute("id",P),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function d(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Av=!0,o()},w}function y(w,P){w.setAttribute("id",P),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=xC(r),P=n("text"),M=document.getElementById(P)||document.createElement("span"),z=n("learnmore"),G=document.getElementById(z)||document.createElement("a"),D=n("preprendIcon"),b=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const O=w.element;u(O),y(G,z);const ee=d();h(b,D),O.append(b,M,G,ee),document.body.appendChild(O)}s?(M.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function bC(){var e;const t=(e=sd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $x(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SC(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kC(){return!bC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kx(){try{return typeof indexedDB=="object"}catch{return!1}}function qx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function CC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AC,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Po.prototype.create)}}class Po{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PC(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new Ar(i,u,r)}}function PC(t,e){return t.replace(NC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const NC=/\{\$([^}]+)}/g;function RC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ws(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Pv(s)&&Pv(o)){if(!ws(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Pv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function DC(t,e){const n=new OC(t,e);return n.subscribe.bind(n)}class OC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ff),i.error===void 0&&(i.error=ff),i.complete===void 0&&(i.complete=ff);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1e3,LC=2,MC=4*60*60*1e3,FC=.5;function Nv(t,e=VC,n=LC){const r=e*Math.pow(n,t),i=Math.round(FC*r*(Math.random()-.5)*2);return Math.min(MC,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t){return t&&t._delegate?t._delegate:t}class Cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zC(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BC(t){return t===ro?void 0:t}function zC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const KC={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},qC=Ke.INFO,WC={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},HC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class od{constructor(e){this.name=e,this._logLevel=qC,this._logHandler=HC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const GC=(t,e)=>e.some(n=>t instanceof n);let Rv,Dv;function QC(){return Rv||(Rv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wx=new WeakMap,Ap=new WeakMap,Hx=new WeakMap,pf=new WeakMap,eg=new WeakMap;function JC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ps(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wx.set(n,t)}).catch(()=>{}),eg.set(e,t),e}function XC(t){if(Ap.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ap.set(t,e)}let Pp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZC(t){Pp=t(Pp)}function eA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mf(this),e,...n);return Hx.set(r,e.sort?e.sort():[e]),ps(r)}:YC().includes(t)?function(...e){return t.apply(mf(this),e),ps(Wx.get(this))}:function(...e){return ps(t.apply(mf(this),e))}}function tA(t){return typeof t=="function"?eA(t):(t instanceof IDBTransaction&&XC(t),GC(t,QC())?new Proxy(t,Pp):t)}function ps(t){if(t instanceof IDBRequest)return JC(t);if(pf.has(t))return pf.get(t);const e=tA(t);return e!==t&&(pf.set(t,e),eg.set(e,t)),e}const mf=t=>eg.get(t);function Gx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=ps(o);return r&&o.addEventListener("upgradeneeded",h=>{r(ps(o.result),h.oldVersion,h.newVersion,ps(o.transaction),h)}),n&&o.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const nA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],gf=new Map;function Ov(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nA.includes(n)))return;const s=async function(o,...u){const h=this.transaction(o,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),i&&h.done]))[0]};return gf.set(e,s),s}ZC(t=>({...t,get:(e,n,r)=>Ov(e,n)||t.get(e,n,r),has:(e,n)=>!!Ov(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",jv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new od("@firebase/app"),oA="@firebase/app-compat",aA="@firebase/analytics-compat",lA="@firebase/analytics",uA="@firebase/app-check-compat",cA="@firebase/app-check",hA="@firebase/auth",dA="@firebase/auth-compat",fA="@firebase/database",pA="@firebase/data-connect",mA="@firebase/database-compat",gA="@firebase/functions",yA="@firebase/functions-compat",vA="@firebase/installations",_A="@firebase/installations-compat",wA="@firebase/messaging",xA="@firebase/messaging-compat",EA="@firebase/performance",bA="@firebase/performance-compat",TA="@firebase/remote-config",IA="@firebase/remote-config-compat",SA="@firebase/storage",kA="@firebase/storage-compat",CA="@firebase/firestore",AA="@firebase/ai",PA="@firebase/firestore-compat",NA="firebase",RA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",DA={[Np]:"fire-core",[oA]:"fire-core-compat",[lA]:"fire-analytics",[aA]:"fire-analytics-compat",[cA]:"fire-app-check",[uA]:"fire-app-check-compat",[hA]:"fire-auth",[dA]:"fire-auth-compat",[fA]:"fire-rtdb",[pA]:"fire-data-connect",[mA]:"fire-rtdb-compat",[gA]:"fire-fn",[yA]:"fire-fn-compat",[vA]:"fire-iid",[_A]:"fire-iid-compat",[wA]:"fire-fcm",[xA]:"fire-fcm-compat",[EA]:"fire-perf",[bA]:"fire-perf-compat",[TA]:"fire-rc",[IA]:"fire-rc-compat",[SA]:"fire-gcs",[kA]:"fire-gcs-compat",[CA]:"fire-fst",[PA]:"fire-fst-compat",[AA]:"fire-vertex","fire-js":"fire-js",[NA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,OA=new Map,Dp=new Map;function Vv(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zr(t){const e=t.name;if(Dp.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,t);for(const n of _h.values())Vv(n,t);for(const n of OA.values())Vv(n,t);return!0}function No(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Po("app","Firebase",jA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=RA;function Qx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Rp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ms.create("bad-app-name",{appName:String(i)});if(n||(n=Fx()),!n)throw ms.create("no-options");const s=_h.get(i);if(s){if(ws(n,s.options)&&ws(r,s.config))return s;throw ms.create("duplicate-app",{appName:i})}const o=new $C(i);for(const h of Dp.values())o.addComponent(h);const u=new VA(n,r,o);return _h.set(i,u),u}function tg(t=Rp){const e=_h.get(t);if(!e&&t===Rp&&Fx())return Qx();if(!e)throw ms.create("no-app",{appName:t});return e}function er(t,e,n){let r=DA[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(o.join(" "));return}Zr(new Cr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",MA=1,mu="firebase-heartbeat-store";let yf=null;function Yx(){return yf||(yf=Gx(LA,MA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),yf}async function FA(t){try{const n=(await Yx()).transaction(mu),r=await n.objectStore(mu).get(Jx(t));return await n.done,r}catch(e){if(e instanceof Ar)ki.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function Lv(t,e){try{const r=(await Yx()).transaction(mu,"readwrite");await r.objectStore(mu).put(e,Jx(t)),await r.done}catch(n){if(n instanceof Ar)ki.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(r.message)}}}function Jx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=1024,BA=30;class zA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>BA){const o=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ki.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mv(),{heartbeatsToSend:r,unsentEntries:i}=$A(this._heartbeatsCache.heartbeats),s=vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ki.warn(n),""}}}function Mv(){return new Date().toISOString().substring(0,10)}function $A(t,e=UA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kx()?qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Lv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Fv(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function qA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){Zr(new Cr("platform-logger",e=>new iA(e),"PRIVATE")),Zr(new Cr("heartbeat",e=>new zA(e),"PRIVATE")),er(Np,jv,t),er(Np,jv,"esm2020"),er("fire-js","")}WA("");var HA="firebase",GA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(HA,GA,"app");function Xx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QA=Xx,Zx=new Po("auth","Firebase",Xx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new od("@firebase/auth");function YA(t,...e){wh.logLevel<=Ke.WARN&&wh.warn(`Auth (${Ha}): ${t}`,...e)}function Mc(t,...e){wh.logLevel<=Ke.ERROR&&wh.error(`Auth (${Ha}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,...e){throw rg(t,...e)}function Ir(t,...e){return rg(t,...e)}function ng(t,e,n){const r={...QA(),[e]:n};return new Po("auth","Firebase",r).create(e,{appName:t.name})}function po(t){return ng(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ei(t,"argument-error"),ng(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Zx.create(t,...e)}function De(t,e,...n){if(!t)throw rg(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mc(e),new Error(e)}function Ci(t,e){t||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function XA(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XA()||$x()||"connection"in navigator)?navigator.onLine:!0}function eP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=EC()||IC()}get(){return ZA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rP=new Pu(3e4,6e4);function sg(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ga(t,e,n,r,i={}){return tE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const u=Au({key:t.config.apiKey,...o}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:h,...s};return TC()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Wa(t.emulatorConfig.host)&&(d.credentials="include"),eE.fetch()(await nE(t,t.config.apiHost,n,u),d)})}async function tE(t,e,n){t._canInitEmulator=!1;const r={...tP,...e};try{const i=new sP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw wc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const u=s.ok?o.errorMessage:o.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(t,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw wc(t,"email-already-in-use",o);if(h==="USER_DISABLED")throw wc(t,"user-disabled",o);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ng(t,y,d);ei(t,y)}}catch(i){if(i instanceof Ar)throw i;ei(t,"network-request-failed",{message:String(i)})}}async function iP(t,e,n,r,i={}){const s=await Ga(t,e,n,r,i);return"mfaPendingCredential"in s&&ei(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function nE(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?ig(t.config,i):`${t.config.apiScheme}://${i}`;return nP.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class sP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ir(this.auth,"network-request-failed")),rP.get())})}}function wc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ir(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(t,e){return Ga(t,"POST","/v1/accounts:delete",e)}async function xh(t,e){return Ga(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aP(t,e=!1){const n=Pt(t),r=await n.getIdToken(e),i=og(r);De(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ql(vf(i.auth_time)),issuedAtTime:ql(vf(i.iat)),expirationTime:ql(vf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vf(t){return Number(t)*1e3}function og(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Lx(n);return i?JSON.parse(i):(Mc("Failed to decode base64 JWT payload"),null)}catch(i){return Mc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Bv(t){const e=og(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&lP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ql(this.lastLoginAt),this.creationTime=ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t){var _;const e=t.auth,n=await t.getIdToken(),r=await gu(t,xh(e,{idToken:n}));De(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(_=i.providerUserInfo)!=null&&_.length?rE(i.providerUserInfo):[],o=hP(t.providerData,s),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=u?h:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new jp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,y)}async function cP(t){const e=Pt(t);await Eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e){const n=await tE(t,{},async()=>{const r=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await nE(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&Wa(t.emulatorConfig.host)&&(h.credentials="include"),eE.fetch()(o,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fP(t,e){return Ga(t,"POST","/v2/accounts:revokeToken",sg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=Bv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await dP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new _a;return r&&(De(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(De(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(De(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new uP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await gu(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aP(this,e)}reload(){return cP(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Eh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(po(this.auth));const e=await this.getIdToken();return await gu(this,oP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,d=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:_,emailVerified:w,isAnonymous:P,providerData:M,stsTokenManager:z}=n;De(_&&z,e,"internal-error");const G=_a.fromJSON(this.name,z);De(typeof _=="string",e,"internal-error"),Hi(r,e.name),Hi(i,e.name),De(typeof w=="boolean",e,"internal-error"),De(typeof P=="boolean",e,"internal-error"),Hi(s,e.name),Hi(o,e.name),Hi(u,e.name),Hi(h,e.name),Hi(d,e.name),Hi(y,e.name);const D=new Er({uid:_,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:P,photoURL:o,phoneNumber:s,tenantId:u,stsTokenManager:G,createdAt:d,lastLoginAt:y});return M&&Array.isArray(M)&&(D.providerData=M.map(b=>({...b}))),h&&(D._redirectEventId=h),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new _a;i.updateFromServerResponse(n);const s=new Er({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Eh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];De(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new _a;u.updateFromIdToken(r);const h=new Er({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function wi(t){Ci(t instanceof Function,"Expected a class definition");let e=zv.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iE.type="NONE";const $v=iE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}class wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Fc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Fc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xh(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wa(wi($v),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||wi($v);const o=Fc(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const y=await d._get(o);if(y){let _;if(typeof y=="string"){const w=await xh(e,{idToken:y}).catch(()=>{});if(!w)break;_=await Er._fromGetAccountInfoResponse(e,w,y)}else _=Er._fromJSON(e,y);d!==s&&(u=_),s=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new wa(s,e,r):(s=h[0],u&&await s._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new wa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cE(e))return"Blackberry";if(hE(e))return"Webos";if(oE(e))return"Safari";if((e.includes("chrome/")||aE(e))&&!e.includes("edge/"))return"Chrome";if(uE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sE(t=cn()){return/firefox\//i.test(t)}function oE(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aE(t=cn()){return/crios\//i.test(t)}function lE(t=cn()){return/iemobile/i.test(t)}function uE(t=cn()){return/android/i.test(t)}function cE(t=cn()){return/blackberry/i.test(t)}function hE(t=cn()){return/webos/i.test(t)}function ag(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pP(t=cn()){var e;return ag(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mP(){return SC()&&document.documentMode===10}function dE(t=cn()){return ag(t)||uE(t)||hE(t)||cE(t)||/windows phone/i.test(t)||lE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t,e=[]){let n;switch(t){case"Browser":n=Kv(cn());break;case"Worker":n=`${Kv(cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ha}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,u)=>{try{const h=e(s);o(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(t,e={}){return Ga(t,"GET","/v2/passwordPolicy",sg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=6;class _P{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??vP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new gP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xh(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(xr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===u)&&(h!=null&&h.user)&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(po(this));const n=e?Pt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(po(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(po(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yP(this),n=new _P(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Po("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(u,this,"internal-error"),u.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{o=!0,h()}}else{const h=e.addObserver(n);return()=>{o=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&YA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ad(t){return Pt(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DC(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xP(t){lg=t}function EP(t){return lg.loadJS(t)}function bP(){return lg.gapiScript}function TP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e){const n=No(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ws(s,e??{}))return i;ei(i,"already-initialized")}return n.initialize({options:e})}function SP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kP(t,e,n){const r=ad(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=pE(e),{host:o,port:u}=CP(e),h=u===null?"":`:${u}`,d={url:`${s}//${o}${h}/`},y=Object.freeze({host:o,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(ws(d,r.config.emulator)&&ws(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Wa(o)?(Bx(`${s}//${o}${h}`),zx("Auth",!0)):AP()}function pE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CP(t){const e=pE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Wv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Wv(o)}}}function Wv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t,e){return iP(t,"POST","/v1/accounts:signInWithIdp",sg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="http://localhost";class xo extends mE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new xo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return xa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,xa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xa(e,n)}buildRequest(){const e={requestUri:PP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends ug{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Nu{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xo._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gi.credential(n,r)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Nu{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Nu{constructor(){super("twitter.com")}static credential(e,n){return xo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ts.credential(n,r)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Er._fromIdTokenResponse(e,r,i),o=Hv(r);return new Oa({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Hv(r);return new Oa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Hv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Ar{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bh(e,n,r,i)}}function gE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,s,e,r):s})}async function NP(t,e,n=!1){const r=await gu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(t,e,n=!1){const{auth:r}=t;if(xr(r.app))return Promise.reject(po(r));const i="reauthenticate";try{const s=await gu(t,gE(r,i,e,t),n);De(s.idToken,r,"internal-error");const o=og(s.idToken);De(o,r,"internal-error");const{sub:u}=o;return De(t.uid===u,r,"user-mismatch"),Oa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ei(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(t,e,n=!1){if(xr(t.app))return Promise.reject(po(t));const r="signIn",i=await gE(t,r,e),s=await Oa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function OP(t,e,n,r){return Pt(t).onIdTokenChanged(e,n,r)}function jP(t,e,n){return Pt(t).beforeAuthStateChanged(e,n)}function VP(t,e,n,r){return Pt(t).onAuthStateChanged(e,n,r)}function LP(t){return Pt(t).signOut()}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=1e3,FP=10;class vE extends yE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,h)=>{this.notifyListeners(o,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);mP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,FP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vE.type="LOCAL";const UP=vE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E extends yE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_E.type="SESSION";const wE=_E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(o).map(async d=>d(n.origin,s)),h=await BP(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((u,h)=>{const d=cg("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(_){const w=_;if(w.data.eventId===d)switch(w.data.status){case"ack":clearTimeout(y),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(w.data.response);break;default:clearTimeout(y),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function $P(t){Qr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function KP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WP(){return xE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebaseLocalStorageDb",HP=1,Ih="firebaseLocalStorage",bE="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ud(t,e){return t.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function GP(){const t=indexedDB.deleteDatabase(EE);return new Ru(t).toPromise()}function Vp(){const t=indexedDB.open(EE,HP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ih,{keyPath:bE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ih)?e(r):(r.close(),await GP(),e(await Vp()))})})}async function Gv(t,e,n){const r=ud(t,!0).put({[bE]:e,value:n});return new Ru(r).toPromise()}async function QP(t,e){const n=ud(t,!1).get(e),r=await new Ru(n).toPromise();return r===void 0?null:r.value}function Qv(t,e){const n=ud(t,!0).delete(e);return new Ru(n).toPromise()}const YP=800,JP=3;class TE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(WP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await KP(),!this.activeServiceWorker)return;this.sender=new zP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await Gv(e,Th,"1"),await Qv(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ud(i,!1).getAll();return new Ru(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TE.type="LOCAL";const XP=TE;new Pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e){return e?wi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg extends mE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZP(t){return DP(t.auth,new hg(t),t.bypassAuthState)}function eN(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),RP(n,new hg(t),t.bypassAuthState)}async function tN(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),NP(n,new hg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:u}=e;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZP;case"linkViaPopup":case"linkViaRedirect":return tN;case"reauthViaPopup":case"reauthViaRedirect":return eN;default:ei(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=new Pu(2e3,1e4);async function rN(t,e,n){if(xr(t.app))return Promise.reject(Ir(t,"operation-not-supported-in-this-environment"));const r=ad(t);JA(t,e,ug);const i=IE(r,n);return new ao(r,"signInViaPopup",e,i).executeNotNull()}class ao extends SE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nN.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="pendingRedirect",Uc=new Map;class sN extends SE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uc.get(this.auth._key());if(!e){try{const r=await oN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uc.set(this.auth._key(),e)}return this.bypassAuthState||Uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oN(t,e){const n=uN(e),r=lN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function aN(t,e){Uc.set(t._key(),e)}function lN(t){return wi(t._redirectPersistence)}function uN(t){return Fc(iN,t.config.apiKey,t.name)}async function cN(t,e,n=!1){if(xr(t.app))return Promise.reject(po(t));const r=ad(t),i=IE(r,e),o=await new sN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=10*60*1e3;class dN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kE(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ir(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yv(e))}saveEventToCache(e){this.cachedEventUids.add(Yv(e)),this.lastProcessedEventTime=Date.now()}}function Yv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e={}){return Ga(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gN=/^https?/;async function yN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pN(t);for(const n of e)try{if(vN(n))return}catch{}ei(t,"unauthorized-domain")}function vN(t){const e=Op(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gN.test(n))return!1;if(mN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new Pu(3e4,6e4);function Jv(){const t=Qr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wN(t){return new Promise((e,n)=>{var i,s,o;function r(){Jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(Ir(t,"network-request-failed"))},timeout:_N.get()})}if((s=(i=Qr().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Qr().gapi)!=null&&o.load)r();else{const u=TP("iframefcb");return Qr()[u]=()=>{gapi.load?r():n(Ir(t,"network-request-failed"))},EP(`${bP()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Bc=null,e})}let Bc=null;function xN(t){return Bc=Bc||wN(t),Bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Pu(5e3,15e3),bN="__/auth/iframe",TN="emulator/auth/iframe",IN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kN(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ig(e,TN):`https://${t.config.authDomain}/${bN}`,r={apiKey:e.apiKey,appName:t.name,v:Ha},i=SN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Au(r).slice(1)}`}async function CN(t){const e=await xN(t),n=Qr().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:kN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ir(t,"network-request-failed"),u=Qr().setTimeout(()=>{s(o)},EN.get());function h(){Qr().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PN=500,NN=600,RN="_blank",DN="http://localhost";class Xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ON(t,e,n,r=PN,i=NN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={...AN,width:r.toString(),height:i.toString(),top:s,left:o},d=cn().toLowerCase();n&&(u=aE(d)?RN:n),sE(d)&&(e=e||DN,h.scrollbars="yes");const y=Object.entries(h).reduce((w,[P,M])=>`${w}${P}=${M},`,"");if(pP(d)&&u!=="_self")return jN(e||"",u),new Xv(null);const _=window.open(e||"",u,y);De(_,t,"popup-blocked");try{_.focus()}catch{}return new Xv(_)}function jN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="__/auth/handler",LN="emulator/auth/handler",MN=encodeURIComponent("fac");async function Zv(t,e,n,r,i,s){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ha,eventId:i};if(e instanceof ug){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",RC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))o[y]=_}if(e instanceof Nu){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(o.scopes=y.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const y of Object.keys(u))u[y]===void 0&&delete u[y];const h=await t._getAppCheckToken(),d=h?`#${MN}=${encodeURIComponent(h)}`:"";return`${FN(t)}?${Au(u).slice(1)}${d}`}function FN({config:t}){return t.emulator?ig(t,LN):`https://${t.authDomain}/${VN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class UN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wE,this._completeRedirectFn=cN,this._overrideRedirectResult=aN}async _openPopup(e,n,r,i){var o;Ci((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Zv(e,n,r,Op(),i);return ON(e,s,cg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Zv(e,n,r,Op(),i);return $P(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ci(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CN(e),r=new dN(e);return n.register("authEvent",i=>(De(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_f,{type:_f},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[_f];s!==void 0&&n(!!s),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dE()||oE()||ag()}}const BN=UN;var e_="@firebase/auth",t_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KN(t){Zr(new Cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;De(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fE(t)},d=new wP(r,i,s,h);return SP(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new Cr("auth-internal",e=>{const n=ad(e.getProvider("auth").getImmediate());return(r=>new zN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),er(e_,t_,$N(t)),er(e_,t_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=5*60,WN=Ux("authIdTokenMaxAge")||qN;let n_=null;const HN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WN)return;const i=n==null?void 0:n.token;n_!==i&&(n_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GN(t=tg()){const e=No(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IP(t,{popupRedirectResolver:BN,persistence:[XP,UP,wE]}),r=Ux("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=HN(s.toString());jP(n,o,()=>o(n.currentUser)),OP(n,u=>o(u))}}const i=Mx("auth");return i&&kP(n,`http://${i}`),n}function QN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ir("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",QN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KN("Browser");var r_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,CE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function R(){}R.prototype=I.prototype,C.F=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(S,N,B){for(var A=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)A[Xe-2]=arguments[Xe];return I.prototype[N].apply(S,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,R){R||(R=0);const S=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)S[N]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(N=0;N<16;++N)S[N]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],N=C.g[2];let B=C.g[3],A;A=I+(B^R&(N^B))+S[0]+3614090360&4294967295,I=R+(A<<7&4294967295|A>>>25),A=B+(N^I&(R^N))+S[1]+3905402710&4294967295,B=I+(A<<12&4294967295|A>>>20),A=N+(R^B&(I^R))+S[2]+606105819&4294967295,N=B+(A<<17&4294967295|A>>>15),A=R+(I^N&(B^I))+S[3]+3250441966&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(B^R&(N^B))+S[4]+4118548399&4294967295,I=R+(A<<7&4294967295|A>>>25),A=B+(N^I&(R^N))+S[5]+1200080426&4294967295,B=I+(A<<12&4294967295|A>>>20),A=N+(R^B&(I^R))+S[6]+2821735955&4294967295,N=B+(A<<17&4294967295|A>>>15),A=R+(I^N&(B^I))+S[7]+4249261313&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(B^R&(N^B))+S[8]+1770035416&4294967295,I=R+(A<<7&4294967295|A>>>25),A=B+(N^I&(R^N))+S[9]+2336552879&4294967295,B=I+(A<<12&4294967295|A>>>20),A=N+(R^B&(I^R))+S[10]+4294925233&4294967295,N=B+(A<<17&4294967295|A>>>15),A=R+(I^N&(B^I))+S[11]+2304563134&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(B^R&(N^B))+S[12]+1804603682&4294967295,I=R+(A<<7&4294967295|A>>>25),A=B+(N^I&(R^N))+S[13]+4254626195&4294967295,B=I+(A<<12&4294967295|A>>>20),A=N+(R^B&(I^R))+S[14]+2792965006&4294967295,N=B+(A<<17&4294967295|A>>>15),A=R+(I^N&(B^I))+S[15]+1236535329&4294967295,R=N+(A<<22&4294967295|A>>>10),A=I+(N^B&(R^N))+S[1]+4129170786&4294967295,I=R+(A<<5&4294967295|A>>>27),A=B+(R^N&(I^R))+S[6]+3225465664&4294967295,B=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(B^I))+S[11]+643717713&4294967295,N=B+(A<<14&4294967295|A>>>18),A=R+(B^I&(N^B))+S[0]+3921069994&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(N^B&(R^N))+S[5]+3593408605&4294967295,I=R+(A<<5&4294967295|A>>>27),A=B+(R^N&(I^R))+S[10]+38016083&4294967295,B=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(B^I))+S[15]+3634488961&4294967295,N=B+(A<<14&4294967295|A>>>18),A=R+(B^I&(N^B))+S[4]+3889429448&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(N^B&(R^N))+S[9]+568446438&4294967295,I=R+(A<<5&4294967295|A>>>27),A=B+(R^N&(I^R))+S[14]+3275163606&4294967295,B=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(B^I))+S[3]+4107603335&4294967295,N=B+(A<<14&4294967295|A>>>18),A=R+(B^I&(N^B))+S[8]+1163531501&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(N^B&(R^N))+S[13]+2850285829&4294967295,I=R+(A<<5&4294967295|A>>>27),A=B+(R^N&(I^R))+S[2]+4243563512&4294967295,B=I+(A<<9&4294967295|A>>>23),A=N+(I^R&(B^I))+S[7]+1735328473&4294967295,N=B+(A<<14&4294967295|A>>>18),A=R+(B^I&(N^B))+S[12]+2368359562&4294967295,R=N+(A<<20&4294967295|A>>>12),A=I+(R^N^B)+S[5]+4294588738&4294967295,I=R+(A<<4&4294967295|A>>>28),A=B+(I^R^N)+S[8]+2272392833&4294967295,B=I+(A<<11&4294967295|A>>>21),A=N+(B^I^R)+S[11]+1839030562&4294967295,N=B+(A<<16&4294967295|A>>>16),A=R+(N^B^I)+S[14]+4259657740&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(R^N^B)+S[1]+2763975236&4294967295,I=R+(A<<4&4294967295|A>>>28),A=B+(I^R^N)+S[4]+1272893353&4294967295,B=I+(A<<11&4294967295|A>>>21),A=N+(B^I^R)+S[7]+4139469664&4294967295,N=B+(A<<16&4294967295|A>>>16),A=R+(N^B^I)+S[10]+3200236656&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(R^N^B)+S[13]+681279174&4294967295,I=R+(A<<4&4294967295|A>>>28),A=B+(I^R^N)+S[0]+3936430074&4294967295,B=I+(A<<11&4294967295|A>>>21),A=N+(B^I^R)+S[3]+3572445317&4294967295,N=B+(A<<16&4294967295|A>>>16),A=R+(N^B^I)+S[6]+76029189&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(R^N^B)+S[9]+3654602809&4294967295,I=R+(A<<4&4294967295|A>>>28),A=B+(I^R^N)+S[12]+3873151461&4294967295,B=I+(A<<11&4294967295|A>>>21),A=N+(B^I^R)+S[15]+530742520&4294967295,N=B+(A<<16&4294967295|A>>>16),A=R+(N^B^I)+S[2]+3299628645&4294967295,R=N+(A<<23&4294967295|A>>>9),A=I+(N^(R|~B))+S[0]+4096336452&4294967295,I=R+(A<<6&4294967295|A>>>26),A=B+(R^(I|~N))+S[7]+1126891415&4294967295,B=I+(A<<10&4294967295|A>>>22),A=N+(I^(B|~R))+S[14]+2878612391&4294967295,N=B+(A<<15&4294967295|A>>>17),A=R+(B^(N|~I))+S[5]+4237533241&4294967295,R=N+(A<<21&4294967295|A>>>11),A=I+(N^(R|~B))+S[12]+1700485571&4294967295,I=R+(A<<6&4294967295|A>>>26),A=B+(R^(I|~N))+S[3]+2399980690&4294967295,B=I+(A<<10&4294967295|A>>>22),A=N+(I^(B|~R))+S[10]+4293915773&4294967295,N=B+(A<<15&4294967295|A>>>17),A=R+(B^(N|~I))+S[1]+2240044497&4294967295,R=N+(A<<21&4294967295|A>>>11),A=I+(N^(R|~B))+S[8]+1873313359&4294967295,I=R+(A<<6&4294967295|A>>>26),A=B+(R^(I|~N))+S[15]+4264355552&4294967295,B=I+(A<<10&4294967295|A>>>22),A=N+(I^(B|~R))+S[6]+2734768916&4294967295,N=B+(A<<15&4294967295|A>>>17),A=R+(B^(N|~I))+S[13]+1309151649&4294967295,R=N+(A<<21&4294967295|A>>>11),A=I+(N^(R|~B))+S[4]+4149444226&4294967295,I=R+(A<<6&4294967295|A>>>26),A=B+(R^(I|~N))+S[11]+3174756917&4294967295,B=I+(A<<10&4294967295|A>>>22),A=N+(I^(B|~R))+S[2]+718787259&4294967295,N=B+(A<<15&4294967295|A>>>17),A=R+(B^(N|~I))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+B&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const R=I-this.blockSize,S=this.C;let N=this.h,B=0;for(;B<I;){if(N==0)for(;B<=R;)i(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<I;)if(S[N++]=C.charCodeAt(B++),N==this.blockSize){i(this,S),N=0;break}}else for(;B<I;)if(S[N++]=C[B++],N==this.blockSize){i(this,S),N=0;break}}this.h=N,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,R=0;R<4;++R)for(let S=0;S<32;S+=8)C[I++]=this.g[R]>>>S&255;return C};function s(C,I){var R=u;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function o(C,I){this.h=I;const R=[];let S=!0;for(let N=C.length-1;N>=0;N--){const B=C[N]|0;S&&B==I||(R[N]=B,S=!1)}this.g=R}var u={};function h(C){return-128<=C&&C<128?s(C,function(I){return new o([I|0],I<0?-1:0)}):new o([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return G(d(-C));const I=[];let R=1;for(let S=0;C>=R;S++)I[S]=C/R|0,R*=4294967296;return new o(I,0)}function y(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return G(y(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=d(Math.pow(I,8));let S=_;for(let B=0;B<C.length;B+=8){var N=Math.min(8,C.length-B);const A=parseInt(C.substring(B,B+N),I);N<8?(N=d(Math.pow(I,N)),S=S.j(N).add(d(A))):(S=S.j(R),S=S.add(d(A)))}return S}var _=h(0),w=h(1),P=h(16777216);t=o.prototype,t.m=function(){if(z(this))return-G(this).m();let C=0,I=1;for(let R=0;R<this.g.length;R++){const S=this.i(R);C+=(S>=0?S:4294967296+S)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M(this))return"0";if(z(this))return"-"+G(this).toString(C);const I=d(Math.pow(C,6));var R=this;let S="";for(;;){const N=ee(R,I).g;R=D(R,N.j(I));let B=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=N,M(R))return B+S;for(;B.length<6;)B="0"+B;S=B+S}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function M(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function z(C){return C.h==-1}t.l=function(C){return C=D(this,C),z(C)?-1:M(C)?0:1};function G(C){const I=C.g.length,R=[];for(let S=0;S<I;S++)R[S]=~C.g[S];return new o(R,~C.h).add(w)}t.abs=function(){return z(this)?G(this):this},t.add=function(C){const I=Math.max(this.g.length,C.g.length),R=[];let S=0;for(let N=0;N<=I;N++){let B=S+(this.i(N)&65535)+(C.i(N)&65535),A=(B>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);S=A>>>16,B&=65535,A&=65535,R[N]=A<<16|B}return new o(R,R[R.length-1]&-2147483648?-1:0)};function D(C,I){return C.add(G(I))}t.j=function(C){if(M(this)||M(C))return _;if(z(this))return z(C)?G(this).j(G(C)):G(G(this).j(C));if(z(C))return G(this.j(G(C)));if(this.l(P)<0&&C.l(P)<0)return d(this.m()*C.m());const I=this.g.length+C.g.length,R=[];for(var S=0;S<2*I;S++)R[S]=0;for(S=0;S<this.g.length;S++)for(let N=0;N<C.g.length;N++){const B=this.i(S)>>>16,A=this.i(S)&65535,Xe=C.i(N)>>>16,dt=C.i(N)&65535;R[2*S+2*N]+=A*dt,b(R,2*S+2*N),R[2*S+2*N+1]+=B*dt,b(R,2*S+2*N+1),R[2*S+2*N+1]+=A*Xe,b(R,2*S+2*N+1),R[2*S+2*N+2]+=B*Xe,b(R,2*S+2*N+2)}for(C=0;C<I;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=I;C<2*I;C++)R[C]=0;return new o(R,0)};function b(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function O(C,I){this.g=C,this.h=I}function ee(C,I){if(M(I))throw Error("division by zero");if(M(C))return new O(_,_);if(z(C))return I=ee(G(C),I),new O(G(I.g),G(I.h));if(z(I))return I=ee(C,G(I)),new O(G(I.g),I.h);if(C.g.length>30){if(z(C)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var R=w,S=I;S.l(C)<=0;)R=X(R),S=X(S);var N=se(R,1),B=se(S,1);for(S=se(S,2),R=se(R,2);!M(S);){var A=B.add(S);A.l(C)<=0&&(N=N.add(R),B=A),S=se(S,1),R=se(R,1)}return I=D(C,N.j(I)),new O(N,I)}for(N=_;C.l(I)>=0;){for(R=Math.max(1,Math.floor(C.m()/I.m())),S=Math.ceil(Math.log(R)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),B=d(R),A=B.j(I);z(A)||A.l(C)>0;)R-=S,B=d(R),A=B.j(I);M(B)&&(B=w),N=N.add(B),C=D(C,A)}return new O(N,C)}t.B=function(C){return ee(this,C).h},t.and=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let S=0;S<I;S++)R[S]=this.i(S)&C.i(S);return new o(R,this.h&C.h)},t.or=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let S=0;S<I;S++)R[S]=this.i(S)|C.i(S);return new o(R,this.h|C.h)},t.xor=function(C){const I=Math.max(this.g.length,C.g.length),R=[];for(let S=0;S<I;S++)R[S]=this.i(S)^C.i(S);return new o(R,this.h^C.h)};function X(C){const I=C.g.length+1,R=[];for(let S=0;S<I;S++)R[S]=C.i(S)<<1|C.i(S-1)>>>31;return new o(R,C.h)}function se(C,I){const R=I>>5;I%=32;const S=C.g.length-R,N=[];for(let B=0;B<S;B++)N[B]=I>0?C.i(B+R)>>>I|C.i(B+R+1)<<32-I:C.i(B+R);return new o(N,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,CE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=y,gs=o}).apply(typeof r_<"u"?r_:typeof self<"u"?self:typeof window<"u"?window:{});var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,Nl,PE,zc,Lp,NE,RE,DE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xc=="object"&&xc];for(var p=0;p<a.length;++p){var v=a[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(a,p){if(p)e:{var v=r;a=a.split(".");for(var T=0;T<a.length-1;T++){var Q=a[T];if(!(Q in v))break e;v=v[Q]}a=a[a.length-1],T=v[a],p=p(T),p!=T&&p!=null&&e(v,a,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(p){var v=[],T;for(T in p)Object.prototype.hasOwnProperty.call(p,T)&&v.push([T,p[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function u(a){var p=typeof a;return p=="object"&&a!=null||p=="function"}function h(a,p,v){return a.call.apply(a.bind,arguments)}function d(a,p,v){return d=h,d.apply(null,arguments)}function y(a,p){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),a.apply(this,T)}}function _(a,p){function v(){}v.prototype=p.prototype,a.Z=p.prototype,a.prototype=new v,a.prototype.constructor=a,a.Ob=function(T,Q,ne){for(var ge=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ge[Ve-2]=arguments[Ve];return p.prototype[Q].apply(T,ge)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function P(a){const p=a.length;if(p>0){const v=Array(p);for(let T=0;T<p;T++)v[T]=a[T];return v}return[]}function M(a,p){for(let T=1;T<arguments.length;T++){const Q=arguments[T];var v=typeof Q;if(v=v!="object"?v:Q?Array.isArray(Q)?"array":v:"null",v=="array"||v=="object"&&typeof Q.length=="number"){v=a.length||0;const ne=Q.length||0;a.length=v+ne;for(let ge=0;ge<ne;ge++)a[v+ge]=Q[ge]}else a.push(Q)}}class z{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function G(a){o.setTimeout(()=>{throw a},0)}function D(){var a=C;let p=null;return a.g&&(p=a.g,a.g=a.g.next,a.g||(a.h=null),p.next=null),p}class b{constructor(){this.h=this.g=null}add(p,v){const T=O.get();T.set(p,v),this.h?this.h.next=T:this.g=T,this.h=T}}var O=new z(()=>new ee,a=>a.reset());class ee{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let X,se=!1,C=new b,I=()=>{const a=Promise.resolve(void 0);X=()=>{a.then(R)}};function R(){for(var a;a=D();){try{a.h.call(a.g)}catch(v){G(v)}var p=O;p.j(a),p.h<100&&(p.h++,a.next=p.g,p.g=a)}se=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(a,p){this.type=a,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,p=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const v=()=>{};o.addEventListener("test",v,p),o.removeEventListener("test",v,p)}catch{}return a}();function A(a){return/^[\s\xa0]*$/.test(a)}function Xe(a,p){N.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,p)}_(Xe,N),Xe.prototype.init=function(a,p){const v=this.type=a.type,T=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=p,p=a.relatedTarget,p||(v=="mouseover"?p=a.fromElement:v=="mouseout"&&(p=a.toElement)),this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Xe.Z.h.call(this)},Xe.prototype.h=function(){Xe.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),qt=0;function hn(a,p,v,T,Q){this.listener=a,this.proxy=null,this.src=p,this.type=v,this.capture=!!T,this.ha=Q,this.key=++qt,this.da=this.fa=!1}function re(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Y(a,p,v){for(const T in a)p.call(v,a[T],T,a)}function Z(a,p){for(const v in a)p.call(void 0,a[v],v,a)}function ue(a){const p={};for(const v in a)p[v]=a[v];return p}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(a,p){let v,T;for(let Q=1;Q<arguments.length;Q++){T=arguments[Q];for(v in T)a[v]=T[v];for(let ne=0;ne<Ee.length;ne++)v=Ee[ne],Object.prototype.hasOwnProperty.call(T,v)&&(a[v]=T[v])}}function me(a){this.src=a,this.g={},this.h=0}me.prototype.add=function(a,p,v,T,Q){const ne=a.toString();a=this.g[ne],a||(a=this.g[ne]=[],this.h++);const ge=Re(a,p,T,Q);return ge>-1?(p=a[ge],v||(p.fa=!1)):(p=new hn(p,this.src,ne,!!T,Q),p.fa=v,a.push(p)),p};function Ne(a,p){const v=p.type;if(v in a.g){var T=a.g[v],Q=Array.prototype.indexOf.call(T,p,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(T,Q,1),ne&&(re(p),a.g[v].length==0&&(delete a.g[v],a.h--))}}function Re(a,p,v,T){for(let Q=0;Q<a.length;++Q){const ne=a[Q];if(!ne.da&&ne.listener==p&&ne.capture==!!v&&ne.ha==T)return Q}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),tt={};function Ie(a,p,v,T,Q){if(Array.isArray(p)){for(let ne=0;ne<p.length;ne++)Ie(a,p[ne],v,T,Q);return null}return v=Uu(v),a&&a[dt]?a.J(p,v,u(T)?!!T.capture:!1,Q):xn(a,p,v,!1,T,Q)}function xn(a,p,v,T,Q,ne){if(!p)throw Error("Invalid event type");const ge=u(Q)?!!Q.capture:!!Q;let Ve=el(a);if(Ve||(a[Fe]=Ve=new me(a)),v=Ve.add(p,v,T,ge,ne),v.proxy)return v;if(T=Xt(),v.proxy=T,T.src=a,T.listener=v,a.addEventListener)B||(Q=ge),Q===void 0&&(Q=!1),a.addEventListener(p.toString(),T,Q);else if(a.attachEvent)a.attachEvent(Fu(p.toString()),T);else if(a.addListener&&a.removeListener)a.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Xt(){function a(v){return p.call(a.src,a.listener,v)}const p=ii;return a}function Ze(a,p,v,T,Q){if(Array.isArray(p))for(var ne=0;ne<p.length;ne++)Ze(a,p[ne],v,T,Q);else T=u(T)?!!T.capture:!!T,v=Uu(v),a&&a[dt]?(a=a.i,ne=String(p).toString(),ne in a.g&&(p=a.g[ne],v=Re(p,v,T,Q),v>-1&&(re(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete a.g[ne],a.h--)))):a&&(a=el(a))&&(p=a.g[p.toString()],a=-1,p&&(a=Re(p,v,T,Q)),(v=a>-1?p[a]:null)&&ri(v))}function ri(a){if(typeof a!="number"&&a&&!a.da){var p=a.src;if(p&&p[dt])Ne(p.i,a);else{var v=a.type,T=a.proxy;p.removeEventListener?p.removeEventListener(v,T,a.capture):p.detachEvent?p.detachEvent(Fu(v),T):p.addListener&&p.removeListener&&p.removeListener(T),(v=el(p))?(Ne(v,a),v.h==0&&(v.src=null,p[Fe]=null)):re(a)}}}function Fu(a){return a in tt?tt[a]:tt[a]="on"+a}function ii(a,p){if(a.da)a=!0;else{p=new Xe(p,this);const v=a.listener,T=a.ha||a.src;a.fa&&ri(a),a=v.call(T,p)}return a}function el(a){return a=a[Fe],a instanceof me?a:null}var tl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Uu(a){return typeof a=="function"?a:(a[tl]||(a[tl]=function(p){return a.handleEvent(p)}),a[tl])}function Ut(){S.call(this),this.i=new me(this),this.M=this,this.G=null}_(Ut,S),Ut.prototype[dt]=!0,Ut.prototype.removeEventListener=function(a,p,v,T){Ze(this,a,p,v,T)};function Nt(a,p){var v,T=a.G;if(T)for(v=[];T;T=T.G)v.push(T);if(a=a.M,T=p.type||p,typeof p=="string")p=new N(p,a);else if(p instanceof N)p.target=p.target||a;else{var Q=p;p=new N(T,a),ae(p,Q)}Q=!0;let ne,ge;if(v)for(ge=v.length-1;ge>=0;ge--)ne=p.g=v[ge],Q=dn(ne,T,!0,p)&&Q;if(ne=p.g=a,Q=dn(ne,T,!0,p)&&Q,Q=dn(ne,T,!1,p)&&Q,v)for(ge=0;ge<v.length;ge++)ne=p.g=v[ge],Q=dn(ne,T,!1,p)&&Q}Ut.prototype.N=function(){if(Ut.Z.N.call(this),this.i){var a=this.i;for(const p in a.g){const v=a.g[p];for(let T=0;T<v.length;T++)re(v[T]);delete a.g[p],a.h--}}this.G=null},Ut.prototype.J=function(a,p,v,T){return this.i.add(String(a),p,!1,v,T)},Ut.prototype.K=function(a,p,v,T){return this.i.add(String(a),p,!0,v,T)};function dn(a,p,v,T){if(p=a.i.g[String(p)],!p)return!0;p=p.concat();let Q=!0;for(let ne=0;ne<p.length;++ne){const ge=p[ne];if(ge&&!ge.da&&ge.capture==v){const Ve=ge.listener,Et=ge.ha||ge.src;ge.fa&&Ne(a.i,ge),Q=Ve.call(Et,T)!==!1&&Q}}return Q&&!T.defaultPrevented}function Bu(a,p){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(a,p||0)}function Ri(a){a.g=Bu(()=>{a.g=null,a.i&&(a.i=!1,Ri(a))},a.l);const p=a.h;a.h=null,a.m.apply(null,p)}class zu extends S{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ri(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ir(a){S.call(this),this.h=a,this.g={}}_(ir,S);var Pr=[];function Nr(a){Y(a.g,function(p,v){this.g.hasOwnProperty(v)&&ri(p)},a),a.g={}}ir.prototype.N=function(){ir.Z.N.call(this),Nr(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=o.JSON.stringify,Os=o.JSON.parse,nl=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function js(){}function Rr(){}var Dr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vs(){N.call(this,"d")}_(Vs,N);function zn(){N.call(this,"c")}_(zn,N);var Se={},Di=null;function $n(){return Di=Di||new Ut}Se.Ia="serverreachability";function Ls(a){N.call(this,Se.Ia,a)}_(Ls,N);function _e(a){const p=$n();Nt(p,new Ls(p))}Se.STAT_EVENT="statevent";function Oo(a,p){N.call(this,Se.STAT_EVENT,a),this.stat=p}_(Oo,N);function Bt(a){const p=$n();Nt(p,new Oo(p,a))}Se.Ja="timingevent";function jo(a,p){N.call(this,Se.Ja,a),this.size=p}_(jo,N);function Oi(a,p){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},p)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function Ad(a,p,v,T,Q,ne){a.info(function(){if(a.g)if(ne){var ge="",Ve=ne.split("&");for(let et=0;et<Ve.length;et++){var Et=Ve[et].split("=");if(Et.length>1){const pt=Et[0];Et=Et[1];const Wn=pt.split("_");ge=Wn.length>=2&&Wn[1]=="type"?ge+(pt+"="+Et+"&"):ge+(pt+"=redacted&")}}}else ge=null;else ge=ne;return"XMLHTTP REQ ("+T+") [attempt "+Q+"]: "+p+`
`+v+`
`+ge})}function Pd(a,p,v,T,Q,ne,ge){a.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+Q+"]: "+p+`
`+v+`
`+ne+" "+ge})}function An(a,p,v,T){a.info(function(){return"XMLHTTP TEXT ("+p+"): "+rl(a,v)+(T?" "+T:"")})}function ji(a,p){a.info(function(){return"TIMEOUT: "+p})}si.prototype.info=function(){};function rl(a,p){if(!a.g)return p;if(!p)return null;try{const ne=JSON.parse(p);if(ne){for(a=0;a<ne.length;a++)if(Array.isArray(ne[a])){var v=ne[a];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var Q=T[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ge=1;ge<T.length;ge++)T[ge]=""}}}}return Ds(ne)}catch{return p}}var oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},st={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xt;function il(){}_(il,js),il.prototype.g=function(){return new XMLHttpRequest},xt=new il;function Or(a){return encodeURIComponent(String(a))}function Vo(a){var p=1;a=a.split(":");const v=[];for(;p>0&&a.length;)v.push(a.shift()),p--;return a.length&&v.push(a.join(":")),v}function Pn(a,p,v,T){this.j=a,this.i=p,this.l=v,this.S=T||1,this.V=new ir(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $u}function $u(){this.i=null,this.g="",this.h=!1}var sr={},jr={};function Kn(a,p,v){a.M=1,a.A=$s(Rn(p)),a.u=v,a.R=!0,Ms(a,null)}function Ms(a,p){a.F=Date.now(),qn(a),a.B=Rn(a.A);var v=a.B,T=a.S;Array.isArray(T)||(T=[String(T)]),Gu(v.i,"t",T),a.C=0,v=a.j.L,a.h=new $u,a.g=Rt(a.j,v?p:null,!a.u),a.P>0&&(a.O=new zu(d(a.Y,a,a.g),a.P)),p=a.V,v=a.g,T=a.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Pr[0]=Q.toString()),Q=Pr);for(let ne=0;ne<Q.length;ne++){const ge=Ie(v,Q[ne],T||p.handleEvent,!1,p.h||p);if(!ge)break;p.g[ge.key]=ge}p=a.J?ue(a.J):{},a.u?(a.v||(a.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,p)):(a.v="GET",a.g.ea(a.B,a.v,null,p)),_e(),Ad(a.i,a.v,a.B,a.l,a.S,a.u)}Pn.prototype.ba=function(a){a=a.target;const p=this.O;p&&Ur(a)==3?p.j():this.Y(a)},Pn.prototype.Y=function(a){try{if(a==this.g)e:{const Ve=Ur(this.g),Et=this.g.ya(),et=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Fi(this.g)))){this.K||Ve!=4||Et==7||(Et==8||et<=0?_e(3):_e(2)),Fs(this);var p=this.g.ca();this.X=p;var v=Nd(this);if(this.o=p==200,Pd(this.i,this.v,this.B,this.l,this.S,Ve,p),this.o){if(this.U&&!this.L){t:{if(this.g){var T,Q=this.g;if((T=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var ne=T;break t}}ne=null}if(a=ne)An(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Nn(this,a);else{this.o=!1,this.m=3,Bt(12),fn(this),ot(this);break e}}if(this.R){a=!0;let pt;for(;!this.K&&this.C<v.length;)if(pt=Ku(this,v),pt==jr){Ve==4&&(this.m=4,Bt(14),a=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==sr){this.m=4,Bt(15),An(this.i,this.l,v,"[Invalid Chunk]"),a=!1;break}else An(this.i,this.l,pt,null),Nn(this,pt);if(or(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||v.length!=0||this.h.h||(this.m=1,Bt(16),a=!1),this.o=this.o&&a,!a)An(this.i,this.l,v,"[Invalid Chunked Response]"),fn(this),ot(this);else if(v.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),$i(ge),ge.P=!0,Bt(11))}}else An(this.i,this.l,v,null),Nn(this,v);Ve==4&&fn(this),this.o&&!this.K&&(Ve==4?hi(this.j,this):(this.o=!1,qn(this)))}else Rd(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),fn(this),ot(this)}}}catch{}finally{}};function Nd(a){if(!or(a))return a.g.la();const p=Fi(a.g);if(p==="")return"";let v="";const T=p.length,Q=Ur(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return fn(a),ot(a),"";a.h.i=new o.TextDecoder}for(let ne=0;ne<T;ne++)a.h.h=!0,v+=a.h.i.decode(p[ne],{stream:!(Q&&ne==T-1)});return p.length=0,a.h.g+=v,a.C=0,a.h.g}function or(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Ku(a,p){var v=a.C,T=p.indexOf(`
`,v);return T==-1?jr:(v=Number(p.substring(v,T)),isNaN(v)?sr:(T+=1,T+v>p.length?jr:(p=p.slice(T,T+v),a.C=T+v,p)))}Pn.prototype.cancel=function(){this.K=!0,fn(this)};function qn(a){a.T=Date.now()+a.H,sl(a,a.H)}function sl(a,p){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Oi(d(a.aa,a),p)}function Fs(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Pn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(ji(this.i,this.B),this.M!=2&&(_e(),Bt(17)),fn(this),this.m=2,ot(this)):sl(this,this.T-a)};function ot(a){a.j.I==0||a.K||hi(a.j,a)}function fn(a){Fs(a);var p=a.O;p&&typeof p.dispose=="function"&&p.dispose(),a.O=null,Nr(a.V),a.g&&(p=a.g,a.g=null,p.abort(),p.dispose())}function Nn(a,p){try{var v=a.j;if(v.I!=0&&(v.g==a||Bs(v.h,a))){if(!a.L&&Bs(v.h,a)&&v.I==3){try{var T=v.Ba.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var Q=T;if(Q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<a.F)qo(v),Bi(v);else break e;zi(v),Bt(18)}}else v.xa=Q[1],0<v.xa-v.K&&Q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Oi(d(v.Va,v),6e3));Lo(v.h)<=1&&v.ta&&(v.ta=void 0)}else pr(v,11)}else if((a.L||v.g==a)&&qo(v),!A(p))for(Q=v.Ba.g.parse(p),p=0;p<Q.length;p++){let et=Q[p];const pt=et[0];if(!(pt<=v.K))if(v.K=pt,et=et[1],v.I==2)if(et[0]=="c"){v.M=et[1],v.ba=et[2];const Wn=et[3];Wn!=null&&(v.ka=Wn,v.j.info("VER="+v.ka));const mr=et[4];mr!=null&&(v.za=mr,v.j.info("SVER="+v.za));const Hn=et[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(T=1.5*Hn,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const zr=a.g;if(zr){const Ys=zr.g?zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ys){var ne=T.h;ne.g||Ys.indexOf("spdy")==-1&&Ys.indexOf("quic")==-1&&Ys.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(ar(ne,ne.h),ne.h=null))}if(T.G){const gl=zr.g?zr.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(T.wa=gl,it(T.J,T.G,gl))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-a.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var ge=a;if(T.na=Go(T,T.L?T.ba:null,T.W),ge.L){ol(T.h,ge);var Ve=ge,Et=T.O;Et&&(Ve.H=Et),Ve.D&&(Fs(Ve),qn(Ve)),T.g=ge}else Gs(T);v.i.length>0&&$o(v)}else et[0]!="stop"&&et[0]!="close"||pr(v,7);else v.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?pr(v,7):Ui(v):et[0]!="noop"&&v.l&&v.l.qa(et),v.A=0)}}_e(4)}catch{}}var qu=class{constructor(a,p){this.g=a,this.map=p}};function ai(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Us(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Lo(a){return a.h?1:a.g?a.g.size:0}function Bs(a,p){return a.h?a.h==p:a.g?a.g.has(p):!1}function ar(a,p){a.g?a.g.add(p):a.h=p}function ol(a,p){a.h&&a.h==p?a.h=null:a.g&&a.g.has(p)&&a.g.delete(p)}ai.prototype.cancel=function(){if(this.i=zs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zs(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let p=a.i;for(const v of a.g.values())p=p.concat(v.G);return p}return P(a.i)}var al=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(a,p){if(a){a=a.split("&");for(let v=0;v<a.length;v++){const T=a[v].indexOf("=");let Q,ne=null;T>=0?(Q=a[v].substring(0,T),ne=a[v].substring(T+1)):Q=a[v],p(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function lr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;a instanceof lr?(this.l=a.l,Vr(this,a.j),this.o=a.o,this.g=a.g,ur(this,a.u),this.h=a.h,Mo(this,Qu(a.i)),this.m=a.m):a&&(p=String(a).match(al))?(this.l=!1,Vr(this,p[1]||"",!0),this.o=Je(p[2]||""),this.g=Je(p[3]||"",!0),ur(this,p[4]),this.h=Je(p[5]||"",!0),Mo(this,p[6]||"",!0),this.m=Je(p[7]||"")):(this.l=!1,this.i=new Lr(null,this.l))}lr.prototype.toString=function(){const a=[];var p=this.j;p&&a.push(cr(p,li,!0),":");var v=this.g;return(v||p=="file")&&(a.push("//"),(p=this.o)&&a.push(cr(p,li,!0),"@"),a.push(Or(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&a.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&a.push("/"),a.push(cr(v,v.charAt(0)=="/"?ul:ll,!0))),(v=this.i.toString())&&a.push("?",v),(v=this.m)&&a.push("#",cr(v,Wu)),a.join("")},lr.prototype.resolve=function(a){const p=Rn(this);let v=!!a.j;v?Vr(p,a.j):v=!!a.o,v?p.o=a.o:v=!!a.g,v?p.g=a.g:v=a.u!=null;var T=a.h;if(v)ur(p,a.u);else if(v=!!a.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var Q=p.h.lastIndexOf("/");Q!=-1&&(T=p.h.slice(0,Q+1)+T)}if(Q=T,Q==".."||Q==".")T="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){T=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let ge=0;ge<Q.length;){const Ve=Q[ge++];Ve=="."?T&&ge==Q.length&&ne.push(""):Ve==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),T&&ge==Q.length&&ne.push("")):(ne.push(Ve),T=!0)}T=ne.join("/")}else T=Q}return v?p.h=T:v=a.i.toString()!=="",v?Mo(p,Qu(a.i)):v=!!a.m,v&&(p.m=a.m),p};function Rn(a){return new lr(a)}function Vr(a,p,v){a.j=v?Je(p,!0):p,a.j&&(a.j=a.j.replace(/:$/,""))}function ur(a,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);a.u=p}else a.u=null}function Mo(a,p,v){p instanceof Lr?(a.i=p,Vi(a.i,a.l)):(v||(p=cr(p,Fo)),a.i=new Lr(p,a.l))}function it(a,p,v){a.i.set(p,v)}function $s(a){return it(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Je(a,p){return a?p?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function cr(a,p,v){return typeof a=="string"?(a=encodeURI(a).replace(p,Ks),v&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ks(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var li=/[#\/\?@]/g,ll=/[#\?:]/g,ul=/[#\?]/g,Fo=/[#\?@]/g,Wu=/#/g;function Lr(a,p){this.h=this.g=null,this.i=a||null,this.j=!!p}function Mr(a){a.g||(a.g=new Map,a.h=0,a.i&&ze(a.i,function(p,v){a.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=Lr.prototype,t.add=function(a,p){Mr(this),this.i=null,a=St(this,a);let v=this.g.get(a);return v||this.g.set(a,v=[]),v.push(p),this.h+=1,this};function Hu(a,p){Mr(a),p=St(a,p),a.g.has(p)&&(a.i=null,a.h-=a.g.get(p).length,a.g.delete(p))}function He(a,p){return Mr(a),p=St(a,p),a.g.has(p)}t.forEach=function(a,p){Mr(this),this.g.forEach(function(v,T){v.forEach(function(Q){a.call(p,Q,T,this)},this)},this)};function cl(a,p){Mr(a);let v=[];if(typeof p=="string")He(a,p)&&(v=v.concat(a.g.get(St(a,p))));else for(a=Array.from(a.g.values()),p=0;p<a.length;p++)v=v.concat(a[p]);return v}t.set=function(a,p){return Mr(this),this.i=null,a=St(this,a),He(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[p]),this.h+=1,this},t.get=function(a,p){return a?(a=cl(this,a),a.length>0?String(a[0]):p):p};function Gu(a,p,v){Hu(a,p),v.length>0&&(a.i=null,a.g.set(St(a,p),P(v)),a.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],p=Array.from(this.g.keys());for(let T=0;T<p.length;T++){var v=p[T];const Q=Or(v);v=cl(this,v);for(let ne=0;ne<v.length;ne++){let ge=Q;v[ne]!==""&&(ge+="="+Or(v[ne])),a.push(ge)}}return this.i=a.join("&")};function Qu(a){const p=new Lr;return p.i=a.i,a.g&&(p.g=new Map(a.g),p.h=a.h),p}function St(a,p){return p=String(p),a.j&&(p=p.toLowerCase()),p}function Vi(a,p){p&&!a.j&&(Mr(a),a.i=null,a.g.forEach(function(v,T){const Q=T.toLowerCase();T!=Q&&(Hu(this,T),Gu(this,Q,v))},a)),a.j=p}function Uo(a,p){const v=new si;if(o.Image){const T=new Image;T.onload=y(hr,v,"TestLoadImage: loaded",!0,p,T),T.onerror=y(hr,v,"TestLoadImage: error",!1,p,T),T.onabort=y(hr,v,"TestLoadImage: abort",!1,p,T),T.ontimeout=y(hr,v,"TestLoadImage: timeout",!1,p,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=a}else p(!1)}function Fr(a,p){const v=new si,T=new AbortController,Q=setTimeout(()=>{T.abort(),hr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(a,{signal:T.signal}).then(ne=>{clearTimeout(Q),ne.ok?hr(v,"TestPingServer: ok",!0,p):hr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(Q),hr(v,"TestPingServer: error",!1,p)})}function hr(a,p,v,T,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),T(v)}catch{}}function Yu(){this.g=new nl}function _t(a){this.i=a.Sb||null,this.h=a.ab||!1}_(_t,js),_t.prototype.g=function(){return new pn(this.i,this.h)};function pn(a,p){Ut.call(this),this.H=a,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(pn,Ut),t=pn.prototype,t.open=function(a,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=p,this.readyState=1,ui(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(p.body=a),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,dr(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Li(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Li(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var p=a.value?a.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!a.done}))&&(this.response=this.responseText+=p)}a.done?dr(this):ui(this),this.readyState==3&&Li(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,dr(this))},t.Na=function(a){this.g&&(this.response=a,dr(this))},t.ga=function(){this.g&&dr(this)};function dr(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ui(a)}t.setRequestHeader=function(a,p){this.A.append(a,p)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,a.push(v[0]+": "+v[1]),v=p.next();return a.join(`\r
`)};function ui(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(pn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fr(a){let p="";return Y(a,function(v,T){p+=T,p+=":",p+=v,p+=`\r
`}),p}function hl(a,p,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=fr(v),typeof a=="string"?v!=null&&Or(v):it(a,p,v))}function Qe(a){Ut.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Qe,Ut);var dl=/^https?$/i,Ju=["POST","PUT"];t=Qe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,p,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);p=p?p.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xt.g(),this.g.onreadystatechange=w(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(a),!0),this.B=!1}catch(ne){Bo(this,ne);return}if(a=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var Q in T)v.set(Q,T[Q]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ne of T.keys())v.set(ne,T.get(ne));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Ju,p,void 0)>=0)||T||Q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ge]of v)this.g.setRequestHeader(ne,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(ne){Bo(this,ne)}};function Bo(a,p){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=p,a.o=5,Mi(a),qs(a)}function Mi(a){a.A||(a.A=!0,Nt(a,"complete"),Nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Nt(this,"complete"),Nt(this,"abort"),qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?zo(this):this.Xa())},t.Xa=function(){zo(this)};function zo(a){if(a.h&&typeof s<"u"){if(a.v&&Ur(a)==4)setTimeout(a.Ca.bind(a),0);else if(Nt(a,"readystatechange"),Ur(a)==4){a.h=!1;try{const ne=a.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var T;if(T=ne===0){let ge=String(a.D).match(al)[1]||null;!ge&&o.self&&o.self.location&&(ge=o.self.location.protocol.slice(0,-1)),T=!dl.test(ge?ge.toLowerCase():"")}v=T}if(v)Nt(a,"complete"),Nt(a,"success");else{a.o=6;try{var Q=Ur(a)>2?a.g.statusText:""}catch{Q=""}a.l=Q+" ["+a.ca()+"]",Mi(a)}}finally{qs(a)}}}}function qs(a,p){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const v=a.g;a.g=null,p||Nt(a,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ur(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Ur(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var p=this.g.responseText;return a&&p.indexOf(a)==0&&(p=p.substring(a.length)),Os(p)}};function Fi(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Rd(a){const p={};a=(a.g&&Ur(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<a.length;T++){if(A(a[T]))continue;var v=Vo(a[T]);const Q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const ne=p[Q]||[];p[Q]=ne,ne.push(v)}Z(p,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(a,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[a]||p}function Hs(a){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ws("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ws("baseRetryDelayMs",5e3,a),this.Za=Ws("retryDelaySeedMs",1e4,a),this.Ta=Ws("forwardChannelMaxRetries",2,a),this.va=Ws("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ai(a&&a.concurrentRequestLimit),this.Ba=new Yu,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Hs.prototype,t.ka=8,t.I=1,t.connect=function(a,p,v,T){Bt(0),this.W=a,this.H=p||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=Go(this,null,this.W),$o(this)};function Ui(a){if(Xu(a),a.I==3){var p=a.V++,v=Rn(a.J);if(it(v,"SID",a.M),it(v,"RID",p),it(v,"TYPE","terminate"),ci(a,v),p=new Pn(a,a.j,p),p.M=2,p.A=$s(Rn(v)),v=!1,o.navigator&&o.navigator.sendBeacon)try{v=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&o.Image&&(new Image().src=p.A,v=!0),v||(p.g=Rt(p.j,null),p.g.ea(p.A)),p.F=Date.now(),qn(p)}Ho(a)}function Bi(a){a.g&&($i(a),a.g.cancel(),a.g=null)}function Xu(a){Bi(a),a.v&&(o.clearTimeout(a.v),a.v=null),qo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function $o(a){if(!Us(a.h)&&!a.m){a.m=!0;var p=a.Ea;X||I(),se||(X(),se=!0),C.add(p,a),a.D=0}}function Dd(a,p){return Lo(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=p.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Oi(d(a.Ea,a,p),Wo(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const Q=new Pn(this,this.j,a);let ne=this.o;if(this.U&&(ne?(ne=ue(ne),ae(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=fl(this,Q,p),v=Rn(this.J),it(v,"RID",a),it(v,"CVER",22),this.G&&it(v,"X-HTTP-Session-Id",this.G),ci(this,v),ne&&(this.R?p="headers="+Or(fr(ne))+"&"+p:this.u&&hl(v,this.u,ne)),ar(this.h,Q),this.Ra&&it(v,"TYPE","init"),this.S?(it(v,"$req",p),it(v,"SID","null"),Q.U=!0,Kn(Q,v,null)):Kn(Q,v,p),this.I=2}}else this.I==3&&(a?Ko(this,a):this.i.length==0||Us(this.h)||Ko(this))};function Ko(a,p){var v;p?v=p.l:v=a.V++;const T=Rn(a.J);it(T,"SID",a.M),it(T,"RID",v),it(T,"AID",a.K),ci(a,T),a.u&&a.o&&hl(T,a.u,a.o),v=new Pn(a,a.j,v,a.D+1),a.u===null&&(v.J=a.o),p&&(a.i=p.G.concat(a.i)),p=fl(a,v,1e3),v.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ar(a.h,v),Kn(v,T,p)}function ci(a,p){a.H&&Y(a.H,function(v,T){it(p,T,v)}),a.l&&Y({},function(v,T){it(p,T,v)})}function fl(a,p,v){v=Math.min(a.i.length,v);const T=a.l?d(a.l.Ka,a.l,a):null;e:{var Q=a.i;let Ve=-1;for(;;){const Et=["count="+v];Ve==-1?v>0?(Ve=Q[0].g,Et.push("ofs="+Ve)):Ve=0:Et.push("ofs="+Ve);let et=!0;for(let pt=0;pt<v;pt++){var ne=Q[pt].g;const Wn=Q[pt].map;if(ne-=Ve,ne<0)Ve=Math.max(0,Q[pt].g-100),et=!1;else try{ne="req"+ne+"_"||"";try{var ge=Wn instanceof Map?Wn:Object.entries(Wn);for(const[mr,Hn]of ge){let zr=Hn;u(Hn)&&(zr=Ds(Hn)),Et.push(ne+mr+"="+encodeURIComponent(zr))}}catch(mr){throw Et.push(ne+"type="+encodeURIComponent("_badmap")),mr}}catch{T&&T(Wn)}}if(et){ge=Et.join("&");break e}}ge=void 0}return a=a.i.splice(0,v),p.G=a,ge}function Gs(a){if(!a.g&&!a.v){a.Y=1;var p=a.Da;X||I(),se||(X(),se=!0),C.add(p,a),a.A=0}}function zi(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Oi(d(a.Da,a),Wo(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,pl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Oi(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Bi(this),pl(this))};function $i(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function pl(a){a.g=new Pn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var p=Rn(a.na);it(p,"RID","rpc"),it(p,"SID",a.M),it(p,"AID",a.K),it(p,"CI",a.F?"0":"1"),!a.F&&a.ia&&it(p,"TO",a.ia),it(p,"TYPE","xmlhttp"),ci(a,p),a.u&&a.o&&hl(p,a.u,a.o),a.O&&(a.g.H=a.O);var v=a.g;a=a.ba,v.M=1,v.A=$s(Rn(p)),v.u=null,v.R=!0,Ms(v,a)}t.Va=function(){this.C!=null&&(this.C=null,Bi(this),zi(this),Bt(19))};function qo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function hi(a,p){var v=null;if(a.g==p){qo(a),$i(a),a.g=null;var T=2}else if(Bs(a.h,p))v=p.G,ol(a.h,p),T=1;else return;if(a.I!=0){if(p.o)if(T==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var Q=a.D;T=$n(),Nt(T,new jo(T,v)),$o(a)}else Gs(a);else if(Q=p.m,Q==3||Q==0&&p.X>0||!(T==1&&Dd(a,p)||T==2&&zi(a)))switch(v&&v.length>0&&(p=a.h,p.i=p.i.concat(v)),Q){case 1:pr(a,5);break;case 4:pr(a,10);break;case 3:pr(a,6);break;default:pr(a,2)}}}function Wo(a,p){let v=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(v*=2),v*p}function pr(a,p){if(a.j.info("Error code "+p),p==2){var v=d(a.bb,a),T=a.Ua;const Q=!T;T=new lr(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vr(T,"https"),$s(T),Q?Uo(T.toString(),v):Fr(T.toString(),v)}else Bt(2);a.I=0,a.l&&a.l.pa(p),Ho(a),Xu(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Ho(a){if(a.I=0,a.ja=[],a.l){const p=zs(a.h);(p.length!=0||a.i.length!=0)&&(M(a.ja,p),M(a.ja,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.oa()}}function Go(a,p,v){var T=v instanceof lr?Rn(v):new lr(v);if(T.g!="")p&&(T.g=p+"."+T.g),ur(T,T.u);else{var Q=o.location;T=Q.protocol,p=p?p+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new lr(null);T&&Vr(ne,T),p&&(ne.g=p),Q&&ur(ne,Q),v&&(ne.h=v),T=ne}return v=a.G,p=a.wa,v&&p&&it(T,v,p),it(T,"VER",a.ka),ci(a,T),T}function Rt(a,p,v){if(p&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=a.Aa&&!a.ma?new Qe(new _t({ab:v})):new Qe(a.ma),p.Fa(a.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ki(){}t=Ki.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Br(){}Br.prototype.g=function(a,p){return new Zt(a,p)};function Zt(a,p){Ut.call(this),this.g=new Hs(p),this.l=a,this.h=p&&p.messageUrlParams||null,a=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(a?a["X-WebChannel-Content-Type"]=p.messageContentType:a={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(a?a["X-WebChannel-Client-Profile"]=p.sa:a={"X-WebChannel-Client-Profile":p.sa}),this.g.U=a,(a=p&&p.Qb)&&!A(a)&&(this.g.u=a),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,a=this.h,a!==null&&p in a&&(a=this.h,p in a&&delete a[p])),this.j=new di(this)}_(Zt,Ut),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Ui(this.g)},Zt.prototype.o=function(a){var p=this.g;if(typeof a=="string"){var v={};v.__data__=a,a=v}else this.v&&(v={},v.__data__=Ds(a),a=v);p.i.push(new qu(p.Ya++,a)),p.I==3&&$o(p)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Ui(this.g),delete this.g,Zt.Z.N.call(this)};function Qs(a){Vs.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var p=a.__sm__;if(p){e:{for(const v in p){a=v;break e}a=void 0}(this.i=a)&&(a=this.i,p=p!==null&&a in p?p[a]:void 0),this.data=p}else this.data=a}_(Qs,Vs);function ml(){zn.call(this),this.status=1}_(ml,zn);function di(a){this.g=a}_(di,Ki),di.prototype.ra=function(){Nt(this.g,"a")},di.prototype.qa=function(a){Nt(this.g,new Qs(a))},di.prototype.pa=function(a){Nt(this.g,new ml)},di.prototype.oa=function(){Nt(this.g,"b")},Br.prototype.createWebChannel=Br.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,DE=function(){return new Br},RE=function(){return $n()},NE=Se,Lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oi.NO_ERROR=0,oi.TIMEOUT=8,oi.HTTP_ERROR=6,zc=oi,st.COMPLETE="complete",PE=st,Rr.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",Ut.prototype.listen=Ut.prototype.J,Nl=Rr,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,AE=Qe}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="12.8.0";function YN(t){Qa=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new od("@firebase/firestore");function Jo(){return Eo.logLevel}function be(t,...e){if(Eo.logLevel<=Ke.DEBUG){const n=e.map(dg);Eo.debug(`Firestore (${Qa}): ${t}`,...n)}}function Ai(t,...e){if(Eo.logLevel<=Ke.ERROR){const n=e.map(dg);Eo.error(`Firestore (${Qa}): ${t}`,...n)}}function ja(t,...e){if(Eo.logLevel<=Ke.WARN){const n=e.map(dg);Eo.warn(`Firestore (${Qa}): ${t}`,...n)}}function dg(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,OE(t,r,n)}function OE(t,e,n){let r=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ai(r),new Error(r)}function nt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||OE(e,i,r)}function je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class XN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZN{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let s=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ei,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ei)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new jE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class eR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class tR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const r=s=>{s.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new i_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new i_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function Mp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return wf(i)===wf(s)?qe(i,s):wf(i)?1:-1}return qe(t.length,e.length)}const iR=55296,sR=57343;function wf(t){const e=t.charCodeAt(0);return e>=iR&&e<=sR}function Va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="__name__";class qr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=qr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return qe(e.length,n.length)}static compareSegments(e,n){const r=qr.isNumericId(e),i=qr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?qr.extractNumericId(e).compare(qr.extractNumericId(n)):Mp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class ut extends qr{construct(e,n,r){return new ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends qr{construct(e,n,r){return new Gt(e,n,r)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s_}static keyField(){return new Gt([s_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ce(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Ce(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ce(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new Ce(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(ut.fromString(e))}static fromName(e){return new Ae(ut.fromString(e).popFirst(5))}static empty(){return new Ae(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e,n){if(!n)throw new Ce(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aR(t,e,n,r){if(e===!0&&r===!0)throw new Ce(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o_(t){if(!Ae.isDocumentKey(t))throw new Ce(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a_(t){if(Ae.isDocumentKey(t))throw new Ce(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function LE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function xs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ce(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pg(t);throw new Ce(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function Du(t,e){if(!LE(t))throw new Ce(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ce(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=-62135596800,u_=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*u_);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l_)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u_}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:At("string",ct._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new ct(0,0))}static max(){return new Oe(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=-1;function lR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Es(i,Ae.empty(),e)}function uR(t){return new Es(t.readTime,t.key,yu)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(Oe.min(),Ae.empty(),yu)}static max(){return new Es(Oe.max(),Ae.empty(),yu)}}function cR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==hR)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):le.reject(n)}static resolve(e){return new le((n,r)=>{n(e)})}static reject(e){return new le((n,r)=>{r(e)})}static waitFor(e){return new le((n,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},h=>r(h))}),o=!0,s===i&&n()})}static or(e){let n=le.resolve(!1);for(const r of e)n=n.next(i=>i?le.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new le((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let h=0;h<s;h++){const d=h;n(e[d]).next(y=>{o[d]=y,++u,u===s&&r(o)},y=>i(y))}})}static doWhile(e,n){return new le((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function fR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ja(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=-1;function hd(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function pR(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="";function mR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c_(e)),e=gR(t.get(n),e);return c_(e)}function gR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case ME:n+="";break;default:n+=s}}return n}function c_(t){return t+ME+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ec(this.root,e,this.comparator,!0)}}class Ec{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=i??Ht.EMPTY,this.right=s??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d_(this.data.getIterator())}getIteratorFrom(e){return new d_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class d_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Ft(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new UE("Invalid base64 string: "+s):s}}(e);return new Jt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const yR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=yR.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?Jt.fromBase64String(t):Jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="server_timestamp",zE="__type__",$E="__previous_value__",KE="__local_write_time__";function gg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zE])==null?void 0:r.stringValue)===BE}function dd(t){const e=t.mapValue.fields[$E];return gg(e)?dd(e):e}function vu(t){const e=bs(t.mapValue.fields[KE].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n,r,i,s,o,u,h,d,y,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=y,this.apiKey=_}}const kh="(default)";class _u{constructor(e,n){this.projectId=e,this.database=n||kh}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}function _R(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ce(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__type__",wR="__max__",bc={mapValue:{}},WE="__vector__",Ch="value";function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gg(t)?4:ER(t)?9007199254740991:xR(t)?10:11:Pe(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vu(t).isEqual(vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bs(i.timestampValue),u=bs(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ts(i.bytesValue).isEqual(Ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Tt(i.doubleValue),u=Tt(s.doubleValue);return o===u?Sh(o)===Sh(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(h_(o)!==h_(u))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(u[h]===void 0||!ti(o[h],u[h])))return!1;return!0}(t,e);default:return Pe(52216,{left:t})}}function wu(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function La(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const u=Tt(s.integerValue||s.doubleValue),h=Tt(o.integerValue||o.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return f_(t.timestampValue,e.timestampValue);case 4:return f_(vu(t),vu(e));case 5:return Mp(t.stringValue,e.stringValue);case 6:return function(s,o){const u=Ts(s),h=Ts(o);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const u=s.split("/"),h=o.split("/");for(let d=0;d<u.length&&d<h.length;d++){const y=qe(u[d],h[d]);if(y!==0)return y}return qe(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const u=qe(Tt(s.latitude),Tt(o.latitude));return u!==0?u:qe(Tt(s.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return p_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var w,P,M,z;const u=s.fields||{},h=o.fields||{},d=(w=u[Ch])==null?void 0:w.arrayValue,y=(P=h[Ch])==null?void 0:P.arrayValue,_=qe(((M=d==null?void 0:d.values)==null?void 0:M.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return _!==0?_:p_(d,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===bc.mapValue&&o===bc.mapValue)return 0;if(s===bc.mapValue)return 1;if(o===bc.mapValue)return-1;const u=s.fields||{},h=Object.keys(u),d=o.fields||{},y=Object.keys(d);h.sort(),y.sort();for(let _=0;_<h.length&&_<y.length;++_){const w=Mp(h[_],y[_]);if(w!==0)return w;const P=La(u[h[_]],d[y[_]]);if(P!==0)return P}return qe(h.length,y.length)}(t.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function f_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=bs(t),r=bs(e),i=qe(n.seconds,r.seconds);return i!==0?i:qe(n.nanos,r.nanos)}function p_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=La(n[i],r[i]);if(s)return s}return qe(n.length,r.length)}function Ma(t){return Fp(t)}function Fp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Fp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Fp(n.fields[o])}`;return i+"}"}(t.mapValue):Pe(61005,{value:t})}function $c(t){switch(Is(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(t);return e?16+$c(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+$c(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ns(r.fields,(s,o)=>{i+=s.length+$c(o)}),i}(t.mapValue);default:throw Pe(13486,{value:t})}}function Up(t){return!!t&&"integerValue"in t}function yg(t){return!!t&&"arrayValue"in t}function m_(t){return!!t&&"nullValue"in t}function g_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kc(t){return!!t&&"mapValue"in t}function xR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qE])==null?void 0:r.stringValue)===WE}function Wl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wl(t.arrayValue.values[n]);return e}return{...t}}function ER(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(n)}setAll(e){let n=Gt.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=Wl(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Kc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ns(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Tn(Wl(this.value))}}function HE(t){const e=[];return Ns(t.fields,(n,r)=>{const i=new Gt([n]);if(Kc(r)){const s=HE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,i,s,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ln(e,0,Oe.min(),Oe.min(),Oe.min(),Tn.empty(),0)}static newFoundDocument(e,n,r,i){return new ln(e,1,n,Oe.min(),r,i,0)}static newNoDocument(e,n){return new ln(e,2,n,Oe.min(),Oe.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,Oe.min(),Oe.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.position=e,this.inclusive=n}}function y_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),n.key):r=La(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function v_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n="asc"){this.field=e,this.dir=n}}function bR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{}class jt extends GE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IR(e,n,r):n==="array-contains"?new CR(e,r):n==="in"?new AR(e,r):n==="not-in"?new PR(e,r):n==="array-contains-any"?new NR(e,r):new jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SR(e,r):new kR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(La(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(La(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends GE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ni(e,n)}matches(e){return QE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QE(t){return t.op==="and"}function YE(t){return TR(t)&&QE(t)}function TR(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function Bp(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+Ma(t.value);if(YE(t))return t.filters.map(e=>Bp(e)).join(",");{const e=t.filters.map(n=>Bp(n)).join(",");return`${t.op}(${e})`}}function JE(t,e){return t instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&ti(r.value,i.value)}(t,e):t instanceof ni?function(r,i){return i instanceof ni&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&JE(o,i.filters[u]),!0):!1}(t,e):void Pe(19439)}function XE(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ma(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(XE).join(" ,")+"}"}(t):"Filter"}class IR extends jt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class SR extends jt{constructor(e,n){super(e,"in",n),this.keys=ZE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kR extends jt{constructor(e,n){super(e,"not-in",n),this.keys=ZE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class CR extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yg(n)&&wu(n.arrayValue,this.value)}}class AR extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class PR extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wu(this.value.arrayValue,n)}}class NR extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.Te=null}}function __(t,e=null,n=[],r=[],i=null,s=null,o=null){return new RR(t,e,n,r,i,s,o)}function vg(t){const e=je(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ma(r)).join(",")),e.Te=n}return e.Te}function _g(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v_(t.startAt,e.startAt)&&v_(t.endAt,e.endAt)}function zp(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n=null,r=[],i=[],s=null,o="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function DR(t,e,n,r,i,s,o,u){return new fd(t,e,n,r,i,s,o,u)}function wg(t){return new fd(t)}function w_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OR(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jR(t){return t.collectionGroup!==null}function Hl(t){const e=je(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ft(Gt.comparator);return o.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Ph(s,r))}),n.has(Gt.keyField().canonicalString())||e.Ie.push(new Ph(Gt.keyField(),r))}return e.Ie}function Yr(t){const e=je(t);return e.Ee||(e.Ee=VR(e,Hl(t))),e.Ee}function VR(t,e){if(t.limitType==="F")return __(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ph(i.field,s)});const n=t.endAt?new Ah(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ah(t.startAt.position,t.startAt.inclusive):null;return __(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $p(t,e,n){return new fd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pd(t,e){return _g(Yr(t),Yr(e))&&t.limitType===e.limitType}function e1(t){return`${vg(Yr(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XE(i)).join(", ")}]`),hd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ma(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ma(i)).join(",")),`Target(${r})`}(Yr(t))}; limitType=${t.limitType})`}function md(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Hl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,u,h){const d=y_(o,u,h);return o.inclusive?d<=0:d<0}(r.startAt,Hl(r),i)||r.endAt&&!function(o,u,h){const d=y_(o,u,h);return o.inclusive?d>=0:d>0}(r.endAt,Hl(r),i))}(t,e)}function LR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function t1(t){return(e,n)=>{let r=!1;for(const i of Hl(t)){const s=MR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MR(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(s,o,u){const h=o.data.field(s),d=u.data.field(s);return h!==null&&d!==null?La(h,d):Pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new vt(Ae.comparator);function Pi(){return FR}const n1=new vt(Ae.comparator);function Rl(...t){let e=n1;for(const n of t)e=e.insert(n.key,n);return e}function r1(t){let e=n1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lo(){return Gl()}function i1(){return Gl()}function Gl(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const UR=new vt(Ae.comparator),BR=new Ft(Ae.comparator);function We(...t){let e=BR;for(const n of t)e=e.add(n);return e}const zR=new Ft(qe);function $R(){return zR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function s1(t){return{integerValue:""+t}}function KR(t,e){return pR(e)?s1(e):xg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function qR(t,e,n){return t instanceof Nh?function(i,s){const o={fields:{[zE]:{stringValue:BE},[KE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gg(s)&&(s=dd(s)),s&&(o.fields[$E]=s),{mapValue:o}}(n,e):t instanceof xu?a1(t,e):t instanceof Eu?l1(t,e):function(i,s){const o=o1(i,s),u=x_(o)+x_(i.Ae);return Up(o)&&Up(i.Ae)?s1(u):xg(i.serializer,u)}(t,e)}function WR(t,e,n){return t instanceof xu?a1(t,e):t instanceof Eu?l1(t,e):n}function o1(t,e){return t instanceof Rh?function(r){return Up(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nh extends gd{}class xu extends gd{constructor(e){super(),this.elements=e}}function a1(t,e){const n=u1(e);for(const r of t.elements)n.some(i=>ti(i,r))||n.push(r);return{arrayValue:{values:n}}}class Eu extends gd{constructor(e){super(),this.elements=e}}function l1(t,e){let n=u1(e);for(const r of t.elements)n=n.filter(i=>!ti(i,r));return{arrayValue:{values:n}}}class Rh extends gd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function x_(t){return Tt(t.integerValue||t.doubleValue)}function u1(t){return yg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xu&&i instanceof xu||r instanceof Eu&&i instanceof Eu?Va(r.elements,i.elements,ti):r instanceof Rh&&i instanceof Rh?ti(r.Ae,i.Ae):r instanceof Nh&&i instanceof Nh}(t.transform,e.transform)}class GR{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yd{}function c1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Eg(t.key,tr.none()):new Ou(t.key,t.data,tr.none());{const n=t.data,r=Tn.empty();let i=new Ft(Gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Rs(t.key,r,new Vn(i.toArray()),tr.none())}}function QR(t,e,n){t instanceof Ou?function(i,s,o){const u=i.value.clone(),h=b_(i.fieldTransforms,s,o.transformResults);u.setAll(h),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(i,s,o){if(!qc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=b_(i.fieldTransforms,s,o.transformResults),h=s.data;h.setAll(h1(i)),h.setAll(u),s.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ql(t,e,n,r){return t instanceof Ou?function(s,o,u,h){if(!qc(s.precondition,o))return u;const d=s.value.clone(),y=T_(s.fieldTransforms,h,o);return d.setAll(y),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(s,o,u,h){if(!qc(s.precondition,o))return u;const d=T_(s.fieldTransforms,h,o),y=o.data;return y.setAll(h1(s)),y.setAll(d),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(t,e,n,r):function(s,o,u){return qc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function YR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=o1(r.transform,i||null);s!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,s))}return n||null}function E_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Va(r,i,(s,o)=>HR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ou extends yd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rs extends yd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function h1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function b_(t,e,n){const r=new Map;nt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,WR(o,u,n[i]))}return r}function T_(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,qR(s,o,e))}return r}class Eg extends yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JR extends yd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=i1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const h=c1(o,u);h!==null&&r.set(i.key,h),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>E_(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>E_(n,r))}}class bg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return UR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new bg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ge;function t2(t){switch(t){case ce.OK:return Pe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function d1(t){if(t===void 0)return Ai("GRPC error has no .code"),ce.UNKNOWN;switch(t){case kt.OK:return ce.OK;case kt.CANCELLED:return ce.CANCELLED;case kt.UNKNOWN:return ce.UNKNOWN;case kt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case kt.INTERNAL:return ce.INTERNAL;case kt.UNAVAILABLE:return ce.UNAVAILABLE;case kt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case kt.NOT_FOUND:return ce.NOT_FOUND;case kt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case kt.ABORTED:return ce.ABORTED;case kt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case kt.DATA_LOSS:return ce.DATA_LOSS;default:return Pe(39323,{code:t})}}(Ge=kt||(kt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new gs([4294967295,4294967295],0);function I_(t){const e=n2().encode(t),n=new CE;return n.update(e),new Uint8Array(n.digest())}function S_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gs([n,r],0),new gs([i,s],0)]}class Tg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl(`Invalid padding: ${n}`);if(r<0)throw new Dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(gs.fromNumber(r)));return i.compare(r2)===1&&(i=new gs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=I_(e),[r,i]=S_(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Tg(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=I_(e),[r,i]=S_(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vd(Oe.min(),i,new vt(qe),Pi(),We())}}class ju{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ju(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class f1{constructor(e,n){this.targetId=e,this.Ce=n}}class p1{constructor(e,n,r=Jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class k_{constructor(){this.ve=0,this.Fe=C_(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),n=We(),r=We();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:s})}}),new ju(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=C_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class i2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pi(),this.He=Tc(),this.Je=Tc(),this.Ze=new vt(qe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(zp(s))if(r===0){const o=new Ae(s.path);this.et(n,o,ln.newNoDocument(o,Oe.min()))}else nt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),h=u?this.ct(u,e,o):1;if(h!==0){this.it(n);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=Ts(r).toUint8Array()}catch(h){if(h instanceof UE)return ja("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Tg(o,i,s)}catch(h){return ja(h instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const u=this.ot(o);if(u){if(s.current&&zp(u.target)){const h=new Ae(u.target.path);this.It(h).has(o)||this.Et(o,h)||this.et(o,h,ln.newNoDocument(h,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}});let r=We();this.Je.forEach((s,o)=>{let u=!0;o.forEachWhile(h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new vd(e,n,this.Ze,this.je,r);return this.je=Pi(),this.He=Tc(),this.Je=Tc(),this.Ze=new vt(qe),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new k_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ft(qe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ft(qe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new k_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Tc(){return new vt(Ae.comparator)}function C_(){return new vt(Ae.comparator)}const s2={asc:"ASCENDING",desc:"DESCENDING"},o2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a2={and:"AND",or:"OR"};class l2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kp(t,e){return t.useProto3Json||hd(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u2(t,e){return Dh(t,e.toTimestamp())}function Jr(t){return nt(!!t,49232),Oe.fromTimestamp(function(n){const r=bs(n);return new ct(r.seconds,r.nanos)}(t))}function Ig(t,e){return qp(t,e).canonicalString()}function qp(t,e){const n=function(i){return new ut(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g1(t){const e=ut.fromString(t);return nt(x1(e),10190,{key:e.toString()}),e}function Wp(t,e){return Ig(t.databaseId,e.path)}function xf(t,e){const n=g1(e);if(n.get(1)!==t.databaseId.projectId)throw new Ce(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ce(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(v1(n))}function y1(t,e){return Ig(t.databaseId,e)}function c2(t){const e=g1(t);return e.length===4?ut.emptyPath():v1(e)}function Hp(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v1(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function A_(t,e,n){return{name:Wp(t,e),fields:n.value.mapValue.fields}}function h2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Pe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,y){return d.useProto3Json?(nt(y===void 0||typeof y=="string",58123),Jt.fromBase64String(y||"")):(nt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Jt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const y=d.code===void 0?ce.UNKNOWN:d1(d.code);return new Ce(y,d.message||"")}(o);n=new p1(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xf(t,r.document.name),s=Jr(r.document.updateTime),o=r.document.createTime?Jr(r.document.createTime):Oe.min(),u=new Tn({mapValue:{fields:r.document.fields}}),h=ln.newFoundDocument(i,s,o,u),d=r.targetIds||[],y=r.removedTargetIds||[];n=new Wc(d,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xf(t,r.document),s=r.readTime?Jr(r.readTime):Oe.min(),o=ln.newNoDocument(i,s),u=r.removedTargetIds||[];n=new Wc([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xf(t,r.document),s=r.removedTargetIds||[];n=new Wc([],s,i,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new e2(i,s),u=r.targetId;n=new f1(u,o)}}return n}function d2(t,e){let n;if(e instanceof Ou)n={update:A_(t,e.key,e.value)};else if(e instanceof Eg)n={delete:Wp(t,e.key)};else if(e instanceof Rs)n={update:A_(t,e.key,e.data),updateMask:x2(e.fieldMask)};else{if(!(e instanceof JR))return Pe(16599,{dt:e.type});n={verify:Wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof Nh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof xu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Eu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Rh)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw Pe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe(27497)}(t,e.precondition)),n}function f2(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Jr(i.updateTime):Jr(s);return o.isEqual(Oe.min())&&(o=Jr(s)),new GR(o,i.transformResults||[])}(n,e))):[]}function p2(t,e){return{documents:[y1(t,e.path)]}}function m2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=y1(t,i);const s=function(d){if(d.length!==0)return w1(ni.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(y=>function(w){return{field:Zo(w.field),direction:v2(w.dir)}}(y))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Kp(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function g2(t){let e=c2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nt(r===1,65062);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];n.where&&(s=function(_){const w=_1(_);return w instanceof ni&&YE(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=function(_){return _.map(w=>function(M){return new Ph(ea(M.field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let u=null;n.limit&&(u=function(_){let w;return w=typeof _=="object"?_.value:_,hd(w)?null:w}(n.limit));let h=null;n.startAt&&(h=function(_){const w=!!_.before,P=_.values||[];return new Ah(P,w)}(n.startAt));let d=null;return n.endAt&&(d=function(_){const w=!_.before,P=_.values||[];return new Ah(P,w)}(n.endAt)),DR(e,i,o,s,u,"F",h,d)}function y2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ea(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ea(n.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ea(n.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ea(n.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return jt.create(ea(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(r=>_1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(t):Pe(30097,{filter:t})}function v2(t){return s2[t]}function _2(t){return o2[t]}function w2(t){return a2[t]}function Zo(t){return{fieldPath:t.canonicalString()}}function ea(t){return Gt.fromServerFormat(t.fieldPath)}function w1(t){return t instanceof jt?function(n){if(n.op==="=="){if(g_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NAN"}};if(m_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(g_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NAN"}};if(m_(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(n.field),op:_2(n.op),value:n.value}}}(t):t instanceof ni?function(n){const r=n.getFilters().map(i=>w1(i));return r.length===1?r[0]:{compositeFilter:{op:w2(n.op),filters:r}}}(t):Pe(54877,{filter:t})}function x2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function x1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function E1(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,i,s=Oe.min(),o=Oe.min(),u=Jt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.yt=e}}function b2(t){const e=g2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.Sn=new I2}addToCollectionParentIndex(e,n){return this.Sn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Es.min())}updateCollectionGroup(e,n,r){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class I2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ft(ut.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ft(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},b1=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(b1,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Fa(0)}static ar(){return new Fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="LruGarbageCollector",S2=1048576;function R_([t,e],[n,r]){const i=qe(t,n);return i===0?qe(e,r):i}class k2{constructor(e){this.Pr=e,this.buffer=new Ft(R_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();R_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){be(N_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ja(n)?be(N_,"Ignoring IndexedDB error during garbage collection: ",n):await Ya(n)}await this.Ar(3e5)})}}class A2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return le.resolve(cd.ce);const r=new k2(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(P_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P_):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,u,h,d;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,o=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,u=Date.now(),this.removeTargets(e,r,n))).next(_=>(s=_,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(d=Date.now(),Jo()<=Ke.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-y}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(h-u)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-y}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:_})))}}function P2(t,e){return new A2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?le.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ql(r.mutation,i,Vn.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=lo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Rl();return s.forEach((u,h)=>{o=o.insert(u,h.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=lo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,i){let s=Pi();const o=Gl(),u=function(){return Gl()}();return n.forEach((h,d)=>{const y=r.get(d.key);i.has(d.key)&&(y===void 0||y.mutation instanceof Rs)?s=s.insert(d.key,d):y!==void 0?(o.set(d.key,y.mutation.getFieldMask()),Ql(y.mutation,d,y.mutation.getFieldMask(),ct.now())):o.set(d.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,y)=>o.set(d,y)),n.forEach((d,y)=>u.set(d,new R2(y,o.get(d)??null))),u))}recalculateAndSaveOverlays(e,n){const r=Gl();let i=new vt((o,u)=>o-u),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(h=>{const d=n.get(h);if(d===null)return;let y=r.get(h)||Vn.empty();y=u.applyToLocalView(d,y),r.set(h,y);const _=(i.get(u.batchId)||We()).add(h);i=i.insert(u.batchId,_)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),d=h.key,y=h.value,_=i1();y.forEach(w=>{if(!s.has(w)){const P=c1(n.get(w),r.get(w));P!==null&&_.set(w,P),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,_))}return le.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return OR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):le.resolve(lo());let u=yu,h=s;return o.next(d=>le.forEach(d,(y,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),s.get(y)?le.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{h=h.insert(y,w)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,We())).next(y=>({batchId:u,changes:r1(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let i=Rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Rl();return this.indexManager.getCollectionParents(e,s).next(u=>le.forEach(u,h=>{const d=function(_,w){return new fd(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(y=>{y.forEach((_,w)=>{o=o.insert(_,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((h,d)=>{const y=d.getKey();o.get(y)===null&&(o=o.insert(y,ln.newInvalidDocument(y)))});let u=Rl();return o.forEach((h,d)=>{const y=s.get(h);y!==void 0&&Ql(y.mutation,d,Vn.empty(),ct.now()),md(n,d)&&(u=u.insert(h,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return le.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Jr(i.createTime)}}(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:b2(i.bundledQuery),readTime:Jr(i.readTime)}}(n)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.overlays=new vt(Ae.comparator),this.Lr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lo();return le.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),le.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),le.resolve()}getOverlaysForCollection(e,n,r){const i=lo(),s=n.length+1,o=new Ae(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const h=u.getNext().value,d=h.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return le.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new vt((d,y)=>d-y);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let y=s.get(d.largestBatchId);y===null&&(y=lo(),s=s.insert(d.largestBatchId,y)),y.set(d.getKey(),d)}}const u=lo(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,y)=>u.set(d,y)),!(u.size()>=i)););return le.resolve(u)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZR(n,r));let s=this.Lr.get(n);s===void 0&&(s=We(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.kr=new Ft(zt.Kr),this.qr=new Ft(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new zt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Ae(new ut([])),r=new zt(n,e),i=new zt(n,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ae(new ut([])),r=new zt(n,e),i=new zt(n,e+1);let s=We();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new zt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ae.comparator(e.key,n.key)||qe(e.Hr,n.Hr)}static Ur(e,n){return qe(e.Hr,n.Hr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ft(zt.Kr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new XR(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.Jr=this.Jr.add(new zt(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return le.resolve(o)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?mg:this.Yn-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),i=new zt(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{const u=this.Zr(o.Hr);s.push(u)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(qe);return n.forEach(i=>{const s=new zt(i,0),o=new zt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],u=>{r=r.add(u.Hr)})}),le.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ae.isDocumentKey(s)||(s=s.child(""));const o=new zt(new Ae(s),0);let u=new Ft(qe);return this.Jr.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.Hr)),!0)},o),le.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return le.forEach(n.mutations,i=>{const s=new zt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new zt(n,0),i=this.Jr.firstAfterOrEqual(r);return le.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.ti=e,this.docs=function(){return new vt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return le.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=Pi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ln.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pi();const o=n.path,u=new Ae(o.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:d,value:{document:y}}=h.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||cR(uR(y),r)<=0||(i.has(y.key)||md(n,y))&&(s=s.insert(y.key,y.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Pe(9500)}ni(e,n){return le.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F2(this)}getSize(e){return le.resolve(this.size)}}class F2 extends N2{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),le.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.persistence=e,this.ri=new Ro(n=>vg(n),_g),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new Sg,this.targetCount=0,this.oi=Fa._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),le.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Fa(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.lr(n),le.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return le.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),le.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return le.resolve(r)}containsKey(e,n){return le.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this._i={},this.overlays={},this.ai=new cd(0),this.ui=!1,this.ui=!0,this.ci=new V2,this.referenceDelegate=e(this),this.li=new U2(this),this.indexManager=new T2,this.remoteDocumentCache=function(i){return new M2(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new E2(n),this.Pi=new O2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new j2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new L2(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const i=new B2(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return le.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class B2 extends dR{constructor(e){super(),this.currentSequenceNumber=e}}class kg{constructor(e){this.persistence=e,this.Ri=new Sg,this.Ai=null}static Vi(e){return new kg(e)}get di(){if(this.Ai)return this.Ai;throw Pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),le.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.di,r=>{const i=Ae.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,Oe.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Oh{constructor(e,n){this.persistence=e,this.fi=new Ro(r=>mR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=P2(this,n)}static Vi(e,n){return new Oh(e,n)}Ti(){}Ii(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return le.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?le.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(u=>{u||(r++,s.removeEntry(o,Oe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),le.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}wr(e,n,r){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return le.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Cg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return kC()?8:fR(cn())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new z2;return this.ys(e,n,o).next(u=>{if(s.result=u,this.As)return this.ws(e,n,o,u.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Jo()<=Ke.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(Jo()<=Ke.DEBUG&&be("QueryEngine","Query:",Xo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Jo()<=Ke.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(n))):le.resolve())}gs(e,n){if(w_(n))return le.resolve(null);let r=Yr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$p(n,null,"F"),r=Yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=We(...s);return this.fs.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.bs(n,u);return this.Ss(n,d,o,h.readTime)?this.gs(e,$p(n,null,"F")):this.Ds(e,d,n,h)}))})))}ps(e,n,r,i){return w_(n)||i.isEqual(Oe.min())?le.resolve(null):this.fs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?le.resolve(null):(Jo()<=Ke.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xo(n)),this.Ds(e,o,n,lR(i,yu)).next(u=>u))})}bs(e,n){let r=new Ft(t1(e));return n.forEach((i,s)=>{md(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Jo()<=Ke.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.fs.getDocumentsMatchingQuery(e,n,Es.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="LocalStore",K2=3e8;class q2{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new vt(qe),this.Fs=new Ro(s=>vg(s),_g),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function W2(t,e,n,r){return new q2(t,e,n,r)}async function I1(t,e){const n=je(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let h=We();for(const d of i){o.push(d.batchId);for(const y of d.mutations)h=h.add(y.key)}for(const d of s){u.push(d.batchId);for(const y of d.mutations)h=h.add(y.key)}return n.localDocuments.getDocuments(r,h).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:u}))})})}function H2(t,e){const n=je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(u,h,d,y){const _=d.batch,w=_.keys();let P=le.resolve();return w.forEach(M=>{P=P.next(()=>y.getEntry(h,M)).next(z=>{const G=d.docVersions.get(M);nt(G!==null,48541),z.version.compareTo(G)<0&&(_.applyToRemoteDocument(z,d),z.isValidDocument()&&(z.setReadTime(d.commitVersion),y.addEntry(z)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(h,_))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=We();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function S1(t){const e=je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function G2(t,e){const n=je(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const u=[];e.targetChanges.forEach((y,_)=>{const w=i.get(_);if(!w)return;u.push(n.li.removeMatchingKeys(s,y.removedDocuments,_).next(()=>n.li.addMatchingKeys(s,y.addedDocuments,_)));let P=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?P=P.withResumeToken(Jt.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):y.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(y.resumeToken,r)),i=i.insert(_,P),function(z,G,D){return z.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=K2?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(w,P,y)&&u.push(n.li.updateTargetData(s,P))});let h=Pi(),d=We();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,y))}),u.push(Q2(s,o,e.documentUpdates).next(y=>{h=y.Bs,d=y.Ls})),!r.isEqual(Oe.min())){const y=n.li.getLastRemoteSnapshotVersion(s).next(_=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(y)}return le.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,d)).next(()=>h)}).then(s=>(n.vs=i,s))}function Q2(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pi();return n.forEach((u,h)=>{const d=s.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(Oe.min())?(e.removeEntry(u,h.readTime),o=o.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),o=o.insert(u,h)):be(Ag,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)}),{Bs:o,Ls:i}})}function Y2(t,e){const n=je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J2(t,e){const n=je(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new ss(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Gp(t,e,n){const r=je(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ja(o))throw o;be(Ag,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function D_(t,e,n){const r=je(t);let i=Oe.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",o=>function(h,d,y){const _=je(h),w=_.Fs.get(y);return w!==void 0?le.resolve(_.vs.get(w)):_.li.getTargetData(d,y)}(r,o,Yr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,u.targetId).next(h=>{s=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Oe.min(),n?s:We())).next(u=>(X2(r,LR(e),u),{documents:u,ks:s})))}function X2(t,e,n){let r=t.Ms.get(e)||Oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class O_{constructor(){this.activeTargetIds=$R()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z2{constructor(){this.vo=new O_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new O_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="ConnectivityMonitor";class V_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){be(j_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){be(j_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function Qp(){return Ic===null?Ic=function(){return 268435456+Math.round(2147483648*Math.random())}():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="RestConnection",tD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class nD{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===kh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=Qp(),u=this.Qo(e,n.toUriEncodedString());be(Ef,`Sending RPC '${e}' ${o}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,s);const{host:d}=new URL(u),y=Wa(d);return this.zo(e,u,h,r,y).then(_=>(be(Ef,`Received RPC '${e}' ${o}: `,_),_),_=>{throw ja(Ef,`RPC '${e}' ${o} failed with error: `,_,"url: ",u,"request:",r),_})}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=tD[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection",Il=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class Ea extends nD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ea.c_){const e=RE();Il(e,NE.STAT_EVENT,n=>{n.stat===Lp.PROXY?be(sn,"STAT_EVENT: detected buffering proxy"):n.stat===Lp.NOPROXY&&be(sn,"STAT_EVENT: detected no buffering proxy")}),Ea.c_=!0}}zo(e,n,r,i,s){const o=Qp();return new Promise((u,h)=>{const d=new AE;d.setWithCredentials(!0),d.listenOnce(PE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case zc.NO_ERROR:const _=d.getResponseJson();be(sn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),u(_);break;case zc.TIMEOUT:be(sn,`RPC '${e}' ${o} timed out`),h(new Ce(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zc.HTTP_ERROR:const w=d.getStatus();if(be(sn,`RPC '${e}' ${o} failed with status:`,w,"response text:",d.getResponseText()),w>0){let P=d.getResponseJson();Array.isArray(P)&&(P=P[0]);const M=P==null?void 0:P.error;if(M&&M.status&&M.message){const z=function(D){const b=D.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(b)>=0?b:ce.UNKNOWN}(M.status);h(new Ce(z,M.message))}else h(new Ce(ce.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new Ce(ce.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{be(sn,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(i);be(sn,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",y,r,15)})}T_(e,n,r){const i=Qp(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");be(sn,`Creating RPC '${e}' stream ${i}: ${d}`,u);const y=o.createWebChannel(d,u);this.I_(y);let _=!1,w=!1;const P=new rD({Ho:M=>{w?be(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(_||(be(sn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),be(sn,`RPC '${e}' stream ${i} sending:`,M),y.send(M))},Jo:()=>y.close()});return Il(y,Nl.EventType.OPEN,()=>{w||(be(sn,`RPC '${e}' stream ${i} transport opened.`),P.i_())}),Il(y,Nl.EventType.CLOSE,()=>{w||(w=!0,be(sn,`RPC '${e}' stream ${i} transport closed`),P.o_(),this.E_(y))}),Il(y,Nl.EventType.ERROR,M=>{w||(w=!0,ja(sn,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),P.o_(new Ce(ce.UNAVAILABLE,"The operation could not be completed")))}),Il(y,Nl.EventType.MESSAGE,M=>{var z;if(!w){const G=M.data[0];nt(!!G,16349);const D=G,b=(D==null?void 0:D.error)||((z=D[0])==null?void 0:z.error);if(b){be(sn,`RPC '${e}' stream ${i} received error:`,b);const O=b.status;let ee=function(C){const I=kt[C];if(I!==void 0)return d1(I)}(O),X=b.message;ee===void 0&&(ee=ce.INTERNAL,X="Unknown error status: "+O+" with message "+b.message),w=!0,P.o_(new Ce(ee,X)),y.close()}else be(sn,`RPC '${e}' stream ${i} received:`,G),P.__(G)}}),Ea.u_(),setTimeout(()=>{P.s_()},0),P}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return DE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){return new Ea(t)}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return new l2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ea.c_=!1;class k1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="PersistentStream";class C1{constructor(e,n,r,i,s,o,u,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new k1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Ce(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return be(L_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(be(L_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sD extends C1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=h2(this.serializer,e),r=function(s){if(!("targetChange"in s))return Oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Oe.min():o.readTime?Jr(o.readTime):Oe.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Hp(this.serializer),n.addTarget=function(s,o){let u;const h=o.target;if(u=zp(h)?{documents:p2(s,h)}:{query:m2(s,h).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=m1(s,o.resumeToken);const d=Kp(s,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(Oe.min())>0){u.readTime=Dh(s,o.snapshotVersion.toTimestamp());const d=Kp(s,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=y2(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Hp(this.serializer),n.removeTarget=e,this.K_(n)}}class oD extends C1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=f2(e.writeResults,e.commitTime),r=Jr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>d2(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{}class lD extends aD{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ce(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,qp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ce(ce.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.jo(e,qp(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ce(ce.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function uD(t,e,n,r){return new lD(t,e,n,r)}class cD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class hD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Do(this)&&(be(bo,"Restarting streams for network reachability change."),await async function(h){const d=je(h);d.Ea.add(4),await Vu(d),d.Va.set("Unknown"),d.Ea.delete(4),await wd(d)}(this))})}),this.Va=new cD(r,i)}}async function wd(t){if(Do(t))for(const e of t.Ra)await e(!0)}async function Vu(t){for(const e of t.Ra)await e(!1)}function A1(t,e){const n=je(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dg(n)?Rg(n):Xa(n).O_()&&Ng(n,e))}function Pg(t,e){const n=je(t),r=Xa(n);n.Ia.delete(e),r.O_()&&P1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Do(n)&&n.Va.set("Unknown"))}function Ng(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(t).Z_(e)}function P1(t,e){t.da.$e(e),Xa(t).X_(e)}function Rg(t){t.da=new i2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xa(t).start(),t.Va.ua()}function Dg(t){return Do(t)&&!Xa(t).x_()&&t.Ia.size>0}function Do(t){return je(t).Ea.size===0}function N1(t){t.da=void 0}async function dD(t){t.Va.set("Online")}async function fD(t){t.Ia.forEach((e,n)=>{Ng(t,e)})}async function pD(t,e){N1(t),Dg(t)?(t.Va.ha(e),Rg(t)):t.Va.set("Unknown")}async function mD(t,e,n){if(t.Va.set("Online"),e instanceof p1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.Ia.delete(u),i.da.removeTarget(u))}(t,e)}catch(r){be(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jh(t,r)}else if(e instanceof Wc?t.da.Xe(e):e instanceof f1?t.da.st(e):t.da.tt(e),!n.isEqual(Oe.min()))try{const r=await S1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.da.Tt(o);return u.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const y=s.Ia.get(d);y&&s.Ia.set(d,y.withResumeToken(h.resumeToken,o))}}),u.targetMismatches.forEach((h,d)=>{const y=s.Ia.get(h);if(!y)return;s.Ia.set(h,y.withResumeToken(Jt.EMPTY_BYTE_STRING,y.snapshotVersion)),P1(s,h);const _=new ss(y.target,h,d,y.sequenceNumber);Ng(s,_)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){be(bo,"Failed to raise snapshot:",r),await jh(t,r)}}async function jh(t,e,n){if(!Ja(e))throw e;t.Ea.add(1),await Vu(t),t.Va.set("Offline"),n||(n=()=>S1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{be(bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wd(t)})}function R1(t,e){return e().catch(n=>jh(t,n,e))}async function xd(t){const e=je(t),n=Ss(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mg;for(;gD(e);)try{const i=await Y2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,yD(e,i)}catch(i){await jh(e,i)}D1(e)&&O1(e)}function gD(t){return Do(t)&&t.Ta.length<10}function yD(t,e){t.Ta.push(e);const n=Ss(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function D1(t){return Do(t)&&!Ss(t).x_()&&t.Ta.length>0}function O1(t){Ss(t).start()}async function vD(t){Ss(t).ra()}async function _D(t){const e=Ss(t);for(const n of t.Ta)e.ea(n.mutations)}async function wD(t,e,n){const r=t.Ta.shift(),i=bg.from(r,e,n);await R1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xd(t)}async function xD(t,e){e&&Ss(t).Y_&&await async function(r,i){if(function(o){return t2(o)&&o!==ce.ABORTED}(i.code)){const s=r.Ta.shift();Ss(r).B_(),await R1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xd(r)}}(t,e),D1(t)&&O1(t)}async function M_(t,e){const n=je(t);n.asyncQueue.verifyOperationInProgress(),be(bo,"RemoteStore received new credentials");const r=Do(n);n.Ea.add(3),await Vu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wd(n)}async function ED(t,e){const n=je(t);e?(n.Ea.delete(2),await wd(n)):e||(n.Ea.add(2),await Vu(n),n.Va.set("Unknown"))}function Xa(t){return t.ma||(t.ma=function(n,r,i){const s=je(n);return s.sa(),new sD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:dD.bind(null,t),Yo:fD.bind(null,t),t_:pD.bind(null,t),J_:mD.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Dg(t)?Rg(t):t.Va.set("Unknown")):(await t.ma.stop(),N1(t))})),t.ma}function Ss(t){return t.fa||(t.fa=function(n,r,i){const s=je(n);return s.sa(),new oD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:vD.bind(null,t),t_:xD.bind(null,t),ta:_D.bind(null,t),na:wD.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await xd(t)):(await t.fa.stop(),t.Ta.length>0&&(be(bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,u=new Og(e,n,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jg(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Ja(t))return new Ce(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{static emptySet(e){return new ba(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=Rl(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ba)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ba;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.ga=new vt(Ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,i,s,o,u,h,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Ua(e,n,ba.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class TD{constructor(){this.queries=U_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=je(n),s=i.queries;i.queries=U_(),s.forEach((o,u)=>{for(const h of u.ba)h.onError(r)})})(this,new Ce(ce.ABORTED,"Firestore shutting down"))}}function U_(){return new Ro(t=>e1(t),pd)}async function j1(t,e){const n=je(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new bD,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=jg(o,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Vg(n)}async function V1(t,e){const n=je(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ID(t,e){const n=je(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.ba)u.Fa(i)&&(r=!0);o.wa=i}}r&&Vg(n)}function SD(t,e,n){const r=je(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function Vg(t){t.Ca.forEach(e=>{e.next()})}var Yp,B_;(B_=Yp||(Yp={})).Ma="default",B_.Cache="cache";class L1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.key=e}}class F1{constructor(e){this.key=e}}class kD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.eu=t1(e),this.tu=new ba(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new F_,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,_)=>{const w=i.get(y),P=md(this.query,_)?_:null,M=!!w&&this.mutatedKeys.has(w.key),z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let G=!1;w&&P?w.data.isEqual(P.data)?M!==z&&(r.track({type:3,doc:P}),G=!0):this.su(w,P)||(r.track({type:2,doc:P}),G=!0,(h&&this.eu(P,h)>0||d&&this.eu(P,d)<0)&&(u=!0)):!w&&P?(r.track({type:0,doc:P}),G=!0):w&&!P&&(r.track({type:1,doc:w}),G=!0,(h||d)&&(u=!0)),G&&(P?(o=o.add(P),s=z?s.add(y):s.delete(y)):(o=o.delete(y),s=s.delete(y)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const y=this.query.limitType==="F"?o.last():o.first();o=o.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{tu:o,iu:r,Ss:u,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((y,_)=>function(P,M){const z=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:G})}};return z(P)-z(M)}(y.type,_.type)||this.eu(y.doc,_.doc)),this.ou(r),i=i??!1;const u=n&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,d=h!==this.Xa;return this.Xa=h,o.length!==0||d?{snapshot:new Ua(this.query,e.tu,s,o,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new F1(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new M1(r))}),n}cu(e){this.Za=e.ks,this.Ya=We();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Lg="SyncEngine";class CD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AD{constructor(e){this.key=e,this.hu=!1}}class PD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ro(u=>e1(u),pd),this.Iu=new Map,this.Eu=new Set,this.Ru=new vt(Ae.comparator),this.Au=new Map,this.Vu=new Sg,this.du={},this.mu=new Map,this.fu=Fa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ND(t,e,n=!0){const r=q1(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await U1(r,e,n,!0),i}async function RD(t,e){const n=q1(t);await U1(n,e,!0,!1)}async function U1(t,e,n,r){const i=await J2(t.localStore,Yr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await DD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&A1(t.remoteStore,i),u}async function DD(t,e,n,r,i){t.pu=(_,w,P)=>async function(z,G,D,b){let O=G.view.ru(D);O.Ss&&(O=await D_(z.localStore,G.query,!1).then(({documents:C})=>G.view.ru(C,O)));const ee=b&&b.targetChanges.get(G.targetId),X=b&&b.targetMismatches.get(G.targetId)!=null,se=G.view.applyChanges(O,z.isPrimaryClient,ee,X);return $_(z,G.targetId,se.au),se.snapshot}(t,_,w,P);const s=await D_(t.localStore,e,!0),o=new kD(e,s.ks),u=o.ru(s.documents),h=ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(u,t.isPrimaryClient,h);$_(t,n,d.au);const y=new CD(e,n,o);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function OD(t,e,n){const r=je(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!pd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pg(r.remoteStore,i.targetId),Jp(r,i.targetId)}).catch(Ya)):(Jp(r,i.targetId),await Gp(r.localStore,i.targetId,!0))}async function jD(t,e){const n=je(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pg(n.remoteStore,r.targetId))}async function VD(t,e,n){const r=$D(t);try{const i=await function(o,u){const h=je(o),d=ct.now(),y=u.reduce((P,M)=>P.add(M.key),We());let _,w;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let M=Pi(),z=We();return h.xs.getEntries(P,y).next(G=>{M=G,M.forEach((D,b)=>{b.isValidDocument()||(z=z.add(D))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,M)).next(G=>{_=G;const D=[];for(const b of u){const O=YR(b,_.get(b.key).overlayedDocument);O!=null&&D.push(new Rs(b.key,O,HE(O.value.mapValue),tr.exists(!0)))}return h.mutationQueue.addMutationBatch(P,d,D,u)}).next(G=>{w=G;const D=G.applyToLocalDocumentSet(_,z);return h.documentOverlayCache.saveOverlays(P,G.batchId,D)})}).then(()=>({batchId:w.batchId,changes:r1(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,h){let d=o.du[o.currentUser.toKey()];d||(d=new vt(qe)),d=d.insert(u,h),o.du[o.currentUser.toKey()]=d}(r,i.batchId,n),await Lu(r,i.changes),await xd(r.remoteStore)}catch(i){const s=jg(i,"Failed to persist write");n.reject(s)}}async function B1(t,e){const n=je(t);try{const r=await G2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?nt(o.hu,14607):i.removedDocuments.size>0&&(nt(o.hu,42227),o.hu=!1))}),await Lu(n,r,e)}catch(r){await Ya(r)}}function z_(t,e,n){const r=je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const u=o.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){const h=je(o);h.onlineState=u;let d=!1;h.queries.forEach((y,_)=>{for(const w of _.ba)w.va(u)&&(d=!0)}),d&&Vg(h)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LD(t,e,n){const r=je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new vt(Ae.comparator);o=o.insert(s,ln.newNoDocument(s,Oe.min()));const u=We().add(s),h=new vd(Oe.min(),new Map,new vt(qe),o,u);await B1(r,h),r.Ru=r.Ru.remove(s),r.Au.delete(e),Mg(r)}else await Gp(r.localStore,e,!1).then(()=>Jp(r,e,n)).catch(Ya)}async function MD(t,e){const n=je(t),r=e.batch.batchId;try{const i=await H2(n.localStore,e);$1(n,r,null),z1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lu(n,i)}catch(i){await Ya(i)}}async function FD(t,e,n){const r=je(t);try{const i=await function(o,u){const h=je(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let y;return h.mutationQueue.lookupMutationBatch(d,u).next(_=>(nt(_!==null,37113),y=_.keys(),h.mutationQueue.removeMutationBatch(d,_))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,y,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,y)).next(()=>h.localDocuments.getDocuments(d,y))})}(r.localStore,e);$1(r,e,n),z1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lu(r,i)}catch(i){await Ya(i)}}function z1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $1(t,e,n){const r=je(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||K1(t,r)})}function K1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Pg(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Mg(t))}function $_(t,e,n){for(const r of n)r instanceof M1?(t.Vu.addReference(r.key,e),UD(t,r)):r instanceof F1?(be(Lg,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||K1(t,r.key)):Pe(19791,{wu:r})}function UD(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(be(Lg,"New document in limbo: "+n),t.Eu.add(r),Mg(t))}function Mg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ae(ut.fromString(e)),r=t.fu.next();t.Au.set(r,new AD(n)),t.Ru=t.Ru.insert(n,r),A1(t.remoteStore,new ss(Yr(wg(n.path)),r,"TargetPurposeLimboResolution",cd.ce))}}async function Lu(t,e,n){const r=je(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,h)=>{o.push(r.pu(h,e,n).then(d=>{var y;if((d||n)&&r.isPrimaryClient){const _=d?!d.fromCache:(y=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=Cg.Es(h.targetId,d);s.push(_)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(h,d){const y=je(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>le.forEach(d,w=>le.forEach(w.Ts,P=>y.persistence.referenceDelegate.addReference(_,w.targetId,P)).next(()=>le.forEach(w.Is,P=>y.persistence.referenceDelegate.removeReference(_,w.targetId,P)))))}catch(_){if(!Ja(_))throw _;be(Ag,"Failed to update sequence numbers: "+_)}for(const _ of d){const w=_.targetId;if(!_.fromCache){const P=y.vs.get(w),M=P.snapshotVersion,z=P.withLastLimboFreeSnapshotVersion(M);y.vs=y.vs.insert(w,z)}}}(r.localStore,s))}async function BD(t,e){const n=je(t);if(!n.currentUser.isEqual(e)){be(Lg,"User change. New user:",e.toKey());const r=await I1(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(u=>{u.forEach(h=>{h.reject(new Ce(ce.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lu(n,r.Ns)}}function zD(t,e){const n=je(t),r=n.Au.get(e);if(r&&r.hu)return We().add(r.key);{let i=We();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const u=n.Tu.get(o);i=i.unionWith(u.view.nu)}return i}}function q1(t){const e=je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LD.bind(null,e),e.Pu.J_=ID.bind(null,e.eventManager),e.Pu.yu=SD.bind(null,e.eventManager),e}function $D(t){const e=je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FD.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return W2(this.persistence,new $2,e.initialUser,this.serializer)}Cu(e){return new T1(kg.Vi,this.serializer)}Du(e){return new Z2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class KD extends Vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nt(this.persistence.referenceDelegate instanceof Oh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new C2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new T1(r=>Oh.Vi(r,n),this.serializer)}}class Xp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BD.bind(null,this.syncEngine),await ED(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TD}()}createDatastore(e){const n=_d(e.databaseInfo.databaseId),r=iD(e.databaseInfo);return uD(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,u){return new hD(r,i,s,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>z_(this.syncEngine,n,0),function(){return V_.v()?new V_:new eD}())}createSyncEngine(e,n){return function(i,s,o,u,h,d,y){const _=new PD(i,s,o,u,h,d);return y&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=je(i);be(bo,"RemoteStore shutting down."),s.Ea.add(5),await Vu(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xp.provider={build:()=>new Xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class qD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=fg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{be(ks,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(be(ks,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tf(t,e){t.asyncQueue.verifyOperationInProgress(),be(ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await I1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function K_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WD(t);be(ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>M_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>M_(e.remoteStore,i)),t._onlineComponents=e}async function WD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(ks,"Using user provided OfflineComponentProvider");try{await Tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await Tf(t,new Vh)}}else be(ks,"Using default OfflineComponentProvider"),await Tf(t,new KD(void 0));return t._offlineComponents}async function H1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(ks,"Using user provided OnlineComponentProvider"),await K_(t,t._uninitializedComponentsProvider._online)):(be(ks,"Using default OnlineComponentProvider"),await K_(t,new Xp))),t._onlineComponents}function HD(t){return H1(t).then(e=>e.syncEngine)}async function G1(t){const e=await H1(t),n=e.eventManager;return n.onListen=ND.bind(null,e.syncEngine),n.onUnlisten=OD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jD.bind(null,e.syncEngine),n}function GD(t,e,n={}){const r=new Ei;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,h,d){const y=new W1({next:w=>{y.Nu(),o.enqueueAndForget(()=>V1(s,_));const P=w.docs.has(u);!P&&w.fromCache?d.reject(new Ce(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&w.fromCache&&h&&h.source==="server"?d.reject(new Ce(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),_=new L1(wg(u.path),y,{includeMetadataChanges:!0,Ka:!0});return j1(s,_)}(await G1(t),t.asyncQueue,e,n,r)),r.promise}function QD(t,e,n={}){const r=new Ei;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,h,d){const y=new W1({next:w=>{y.Nu(),o.enqueueAndForget(()=>V1(s,_)),w.fromCache&&h.source==="server"?d.reject(new Ce(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),_=new L1(u,y,{includeMetadataChanges:!0,Ka:!0});return j1(s,_)}(await G1(t),t.asyncQueue,e,n,r)),r.promise}function YD(t,e){const n=new Ei;return t.asyncQueue.enqueueAndForget(async()=>VD(await HD(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="ComponentProvider",q_=new Map;function XD(t,e,n,r,i){return new vR(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Q1(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="firestore.googleapis.com",W_=!0;class H_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y1,this.ssl=W_}else this.host=e.host,this.ssl=e.ssl??W_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=b1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S2)throw new Ce(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ce(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ce(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ce(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JN;switch(r.type){case"firstParty":return new tR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=q_.get(n);r&&(be(JD,"Removing Datastore"),q_.delete(n),r.terminate())}(this),Promise.resolve()}}function ZD(t,e,n,r={}){var d;t=xs(t,Ed);const i=Wa(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(Bx(`https://${u}`),zx("Firestore",!0)),s.host!==Y1&&s.host!==u&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...s,host:u,ssl:i,emulatorOptions:r};if(!ws(h,o)&&(t._setSettings(h),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=on.MOCK_USER;else{y=_C(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ce(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new on(w)}t._authCredentials=new XN(new jE(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bd(this.firestore,e,this._query)}}class Lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Du(n,Lt._jsonSchema))return new Lt(e,r||null,new Ae(ut.fromString(n.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:At("string",Lt._jsonSchemaVersion),referencePath:At("string")};class ys extends bd{constructor(e,n,r){super(e,n,wg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Ae(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function G_(t,e,...n){if(t=Pt(t),VE("collection","path",e),t instanceof Ed){const r=ut.fromString(e,...n);return a_(r),new ys(t,null,r)}{if(!(t instanceof Lt||t instanceof ys))throw new Ce(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return a_(r),new ys(t.firestore,null,r)}}function If(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=fg.newId()),VE("doc","path",e),t instanceof Ed){const r=ut.fromString(e,...n);return o_(r),new Lt(t,null,new Ae(r))}{if(!(t instanceof Lt||t instanceof ys))throw new Ce(ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return o_(r),new Lt(t.firestore,t instanceof ys?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="AsyncQueue";class Y_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new k1(this,"async_queue_retry"),this._c=()=>{const r=bf();r&&be(Q_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ei;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ja(e))throw e;be(Q_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",J_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Og.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Pe(47125,{Pc:J_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function J_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Mu extends Ed{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Y_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y_(e),this._firestoreClient=void 0,await e}}}function eO(t,e){const n=typeof t=="object"?t:tg(),r=typeof t=="string"?t:kh,i=No(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=yC("firestore");s&&ZD(i,...s)}return i}function Td(t){if(t._terminated)throw new Ce(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||tO(t),t._firestoreClient}function tO(t){var r,i,s,o;const e=t._freezeSettings(),n=XD(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(Jt.fromBase64String(e))}catch(n){throw new Ce(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jn(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:At("string",Jn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ce(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ce(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ce(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xr._jsonSchemaVersion}}static fromJSON(e){if(Du(e,Xr._jsonSchema))return new Xr(e.latitude,e.longitude)}}Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:At("string",Xr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sr(e.vectorValues);throw new Ce(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:At("string",Sr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=/^__.*__$/;class rO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ou(e,this.data,n,this.fieldTransforms)}}class J1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function X1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{dataSource:t})}}class Bg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Lh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(X1(this.dataSource)&&nO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_d(e)}createContext(e,n,r,i=!1){return new Bg({dataSource:e,methodName:n,targetDoc:r,path:Gt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z1(t){const e=t._freezeSettings(),n=_d(t._databaseId);return new iO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eb(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);zg("Data must be an object, but it was:",o,r);const u=tb(r,o);let h,d;if(s.merge)h=new Vn(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const y=[];for(const _ of s.mergeFields){const w=bu(e,_,n);if(!o.contains(w))throw new Ce(ce.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ib(y,w)||y.push(w)}h=new Vn(y),d=o.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,d=o.fieldTransforms;return new rO(new Tn(u),h,d)}class Id extends Ug{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}function sO(t,e,n,r){const i=t.createContext(1,e,n);zg("Data must be an object, but it was:",i,r);const s=[],o=Tn.empty();Ns(r,(h,d)=>{const y=rb(e,h,n);d=Pt(d);const _=i.childContextForFieldPath(y);if(d instanceof Id)s.push(y);else{const w=Sd(d,_);w!=null&&(s.push(y),o.set(y,w))}});const u=new Vn(s);return new J1(o,u,i.fieldTransforms)}function oO(t,e,n,r,i,s){const o=t.createContext(1,e,n),u=[bu(e,r,n)],h=[i];if(s.length%2!=0)throw new Ce(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)u.push(bu(e,s[w])),h.push(s[w+1]);const d=[],y=Tn.empty();for(let w=u.length-1;w>=0;--w)if(!ib(d,u[w])){const P=u[w];let M=h[w];M=Pt(M);const z=o.childContextForFieldPath(P);if(M instanceof Id)d.push(P);else{const G=Sd(M,z);G!=null&&(d.push(P),y.set(P,G))}}const _=new Vn(d);return new J1(y,_,o.fieldTransforms)}function Sd(t,e){if(nb(t=Pt(t)))return zg("Unsupported field value:",e,t),tb(t,e);if(t instanceof Ug)return function(r,i){if(!X1(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let h=Sd(u,i.childContextForArray(o));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ct.fromDate(r);return{timestampValue:Dh(i.serializer,s)}}if(r instanceof ct){const s=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dh(i.serializer,s)}}if(r instanceof Xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:m1(i.serializer,r._byteString)};if(r instanceof Lt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ig(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sr)return function(o,u){const h=o instanceof Sr?o.toArray():o;return{mapValue:{fields:{[qE]:{stringValue:WE},[Ch]:{arrayValue:{values:h.map(y=>{if(typeof y!="number")throw u.createError("VectorValues must only contain numeric values.");return xg(u.serializer,y)})}}}}}}(r,i);if(E1(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${pg(r)}`)}(t,e)}function tb(t,e){const n={};return FE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(r,i)=>{const s=Sd(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function nb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof Xr||t instanceof Jn||t instanceof Lt||t instanceof Ug||t instanceof Sr||E1(t))}function zg(t,e,n){if(!nb(n)||!LE(n)){const r=pg(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function bu(t,e,n){if((e=Pt(e))instanceof Fg)return e._internalPath;if(typeof e=="string")return rb(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,n)}const aO=new RegExp("[~\\*/\\[\\]]");function rb(t,e,n){if(e.search(aO)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fg(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||o)&&(h+=" (found",s&&(h+=` in field ${r}`),o&&(h+=` in document ${i}`),h+=")"),new Ce(ce.INVALID_ARGUMENT,u+t+h)}function ib(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ns(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ch].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Tt(o.doubleValue));return new Sr(n)}convertGeoPoint(e){return new Xr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const n=bs(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ut.fromString(e);nt(x1(r),9688,{name:e});const i=new _u(r.get(1),r.get(3)),s=new Ae(r.popFirst(5));return i.isEqual(n)||Ai(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb extends lO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}const X_="@firebase/firestore",Z_="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(bu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uO extends ob{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ce(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function ab(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends ob{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:At("string",mo._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class Hc extends mo{data(e={}){return super.data(e)}}class Ta{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ol(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hc(this._firestore,this._userDataWriter,r.key,r,new Ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ce(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const h=new Hc(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ol(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const h=new Hc(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ol(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,y=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),y=o.indexOf(u.doc.key)),{type:hO(u.type),doc:h,oldIndex:d,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:At("string",Ta._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Z1(e)}set(e,n,r){this._verifyNotCommitted();const i=Sf(e,this._firestore),s=ab(i.converter,n,r),o=eb(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,tr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Sf(e,this._firestore);let o;return o=typeof(n=Pt(n))=="string"||n instanceof Fg?oO(this._dataReader,"WriteBatch.update",s._key,n,r,i):sO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Sf(e,this._firestore);return this._mutations=this._mutations.concat(new Eg(n._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sf(t,e){if((t=Pt(t)).firestore!==e)throw new Ce(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){t=xs(t,Lt);const e=xs(t.firestore,Mu),n=Td(e);return GD(n,t._key).then(r=>gO(e,t,r))}function pO(t){t=xs(t,bd);const e=xs(t.firestore,Mu),n=Td(e),r=new sb(e);return cO(t._query),QD(n,t._query).then(i=>new Ta(e,r,t,i))}function mO(t,e,n){t=xs(t,Lt);const r=xs(t.firestore,Mu),i=ab(t.converter,e,n),s=Z1(r);return lb(r,[eb(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,tr.none())])}function lb(t,e){const n=Td(t);return YD(n,e)}function gO(t,e,n){const r=n.docs.get(e._key),i=new sb(t);return new mo(t,i,e._key,r,new Ol(n.hasPendingWrites,n.fromCache),e.converter)}function yO(t){return t=xs(t,Mu),Td(t),new dO(t,e=>lb(t,e))}(function(e,n=!0){YN(Ha),Zr(new Cr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new Mu(new ZN(r.getProvider("auth-internal")),new nR(o,r.getProvider("app-check-internal")),_R(o,i),o);return s={useFetchStreams:n,...s},u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),er(X_,Z_,e),er(X_,Z_,"esm2020")})();const ub="@firebase/installations",$g="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=1e4,hb=`w:${$g}`,db="FIS_v2",vO="https://firebaseinstallations.googleapis.com/v1",_O=60*60*1e3,wO="installations",xO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},To=new Po(wO,xO,EO);function fb(t){return t instanceof Ar&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb({projectId:t}){return`${vO}/projects/${t}/installations`}function mb(t){return{token:t.token,requestStatus:2,expiresIn:TO(t.expiresIn),creationTime:Date.now()}}async function gb(t,e){const r=(await e.json()).error;return To.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function yb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bO(t,{refreshToken:e}){const n=yb(t);return n.append("Authorization",IO(e)),n}async function vb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function TO(t){return Number(t.replace("s","000"))}function IO(t){return`${db} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=pb(t),i=yb(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:db,appId:t.appId,sdkVersion:hb},u={method:"POST",headers:i,body:JSON.stringify(o)},h=await vb(()=>fetch(r,u));if(h.ok){const d=await h.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:mb(d.authToken)}}else throw await gb("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=/^[cdef][\w-]{21}$/,Zp="";function AO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=PO(t);return CO.test(n)?n:Zp}catch{return Zp}}function PO(t){return kO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new Map;function xb(t,e){const n=kd(t);Eb(n,e),NO(n,e)}function Eb(t,e){const n=wb.get(t);if(n)for(const r of n)r(e)}function NO(t,e){const n=RO();n&&n.postMessage({key:t,fid:e}),DO()}let uo=null;function RO(){return!uo&&"BroadcastChannel"in self&&(uo=new BroadcastChannel("[Firebase] FID Change"),uo.onmessage=t=>{Eb(t.data.key,t.data.fid)}),uo}function DO(){wb.size===0&&uo&&(uo.close(),uo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="firebase-installations-database",jO=1,Io="firebase-installations-store";let kf=null;function Kg(){return kf||(kf=Gx(OO,jO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Io)}}})),kf}async function Mh(t,e){const n=kd(t),i=(await Kg()).transaction(Io,"readwrite"),s=i.objectStore(Io),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&xb(t,e.fid),e}async function bb(t){const e=kd(t),r=(await Kg()).transaction(Io,"readwrite");await r.objectStore(Io).delete(e),await r.done}async function Cd(t,e){const n=kd(t),i=(await Kg()).transaction(Io,"readwrite"),s=i.objectStore(Io),o=await s.get(n),u=e(o);return u===void 0?await s.delete(n):await s.put(u,n),await i.done,u&&(!o||o.fid!==u.fid)&&xb(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qg(t){let e;const n=await Cd(t.appConfig,r=>{const i=VO(r),s=LO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Zp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function VO(t){const e=t||{fid:AO(),registrationStatus:0};return Tb(e)}function LO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(To.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=MO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:FO(t)}:{installationEntry:e}}async function MO(t,e){try{const n=await SO(t,e);return Mh(t.appConfig,n)}catch(n){throw fb(n)&&n.customData.serverCode===409?await bb(t.appConfig):await Mh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function FO(t){let e=await ew(t.appConfig);for(;e.registrationStatus===1;)await _b(100),e=await ew(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await qg(t);return r||n}return e}function ew(t){return Cd(t,e=>{if(!e)throw To.create("installation-not-found");return Tb(e)})}function Tb(t){return UO(t)?{fid:t.fid,registrationStatus:0}:t}function UO(t){return t.registrationStatus===1&&t.registrationTime+cb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO({appConfig:t,heartbeatServiceProvider:e},n){const r=zO(t,n),i=bO(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:hb,appId:t.appId}},u={method:"POST",headers:i,body:JSON.stringify(o)},h=await vb(()=>fetch(r,u));if(h.ok){const d=await h.json();return mb(d)}else throw await gb("Generate Auth Token",h)}function zO(t,{fid:e}){return`${pb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wg(t,e=!1){let n;const r=await Cd(t.appConfig,s=>{if(!Ib(s))throw To.create("not-registered");const o=s.authToken;if(!e&&qO(o))return s;if(o.requestStatus===1)return n=$O(t,e),s;{if(!navigator.onLine)throw To.create("app-offline");const u=HO(s);return n=KO(t,u),u}});return n?await n:r.authToken}async function $O(t,e){let n=await tw(t.appConfig);for(;n.authToken.requestStatus===1;)await _b(100),n=await tw(t.appConfig);const r=n.authToken;return r.requestStatus===0?Wg(t,e):r}function tw(t){return Cd(t,e=>{if(!Ib(e))throw To.create("not-registered");const n=e.authToken;return GO(n)?{...e,authToken:{requestStatus:0}}:e})}async function KO(t,e){try{const n=await BO(t,e),r={...e,authToken:n};return await Mh(t.appConfig,r),n}catch(n){if(fb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await bb(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Mh(t.appConfig,r)}throw n}}function Ib(t){return t!==void 0&&t.registrationStatus===2}function qO(t){return t.requestStatus===2&&!WO(t)}function WO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+_O}function HO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function GO(t){return t.requestStatus===1&&t.requestTime+cb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t){const e=t,{installationEntry:n,registrationPromise:r}=await qg(e);return r?r.catch(console.error):Wg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(t,e=!1){const n=t;return await JO(n),(await Wg(n,e)).token}async function JO(t){const{registrationPromise:e}=await qg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){if(!t||!t.options)throw Cf("App Configuration");if(!t.name)throw Cf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Cf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cf(t){return To.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="installations",ZO="installations-internal",ej=t=>{const e=t.getProvider("app").getImmediate(),n=XO(e),r=No(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},tj=t=>{const e=t.getProvider("app").getImmediate(),n=No(e,Sb).getImmediate();return{getId:()=>QO(n),getToken:i=>YO(n,i)}};function nj(){Zr(new Cr(Sb,ej,"PUBLIC")),Zr(new Cr(ZO,tj,"PRIVATE"))}nj();er(ub,$g);er(ub,$g,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="analytics",rj="firebase_id",ij="origin",sj=60*1e3,oj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new od("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mn=new Po("analytics","Analytics",aj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){if(!t.startsWith(Hg)){const e=Mn.create("invalid-gtag-resource",{gtagURL:t});return vn.warn(e.message),""}return t}function kb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function uj(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function cj(t,e){const n=uj("firebase-js-sdk-policy",{createScriptURL:lj}),r=document.createElement("script"),i=`${Hg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function hj(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function dj(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const h=(await kb(n)).find(d=>d.measurementId===i);h&&await e[h.appId]}}catch(u){vn.error(u)}t("config",i,s)}async function fj(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const u=await kb(n);for(const h of o){const d=u.find(_=>_.measurementId===h),y=d&&e[d.appId];if(y)s.push(y);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){vn.error(s)}}function pj(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[u,h]=o;await fj(t,e,n,u,h)}else if(s==="config"){const[u,h]=o;await dj(t,e,n,r,u,h)}else if(s==="consent"){const[u,h]=o;t("consent",u,h)}else if(s==="get"){const[u,h,d]=o;t("get",u,h,d)}else if(s==="set"){const[u]=o;t("set",u)}else t(s,...o)}catch(u){vn.error(u)}}return i}function mj(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=pj(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function gj(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Hg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=30,vj=1e3;class _j{constructor(e={},n=vj){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Cb=new _j;function wj(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function xj(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:wj(n)},i=oj.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let u="";try{const h=await s.json();(o=h.error)!=null&&o.message&&(u=h.error.message)}catch{}throw Mn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u})}return s.json()}async function Ej(t,e=Cb,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Mn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Mn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Ij;return setTimeout(async()=>{u.abort()},sj),Ab({appId:r,apiKey:i,measurementId:s},o,u,e)}async function Ab(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Cb){var u;const{appId:s,measurementId:o}=t;try{await bj(r,e)}catch(h){if(o)return vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:s,measurementId:o};throw h}try{const h=await xj(t);return i.deleteThrottleMetadata(s),h}catch(h){const d=h;if(!Tj(d)){if(i.deleteThrottleMetadata(s),o)return vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:o};throw h}const y=Number((u=d==null?void 0:d.customData)==null?void 0:u.httpStatus)===503?Nv(n,i.intervalMillis,yj):Nv(n,i.intervalMillis),_={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return i.setThrottleMetadata(s,_),vn.debug(`Calling attemptFetch again in ${y} millis`),Ab(t,_,r,i)}}function bj(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Mn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Tj(t){if(!(t instanceof Ar)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Ij{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Sj(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function kj(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(){if(Kx())try{await qx()}catch(t){return vn.warn(Mn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return vn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Aj(t,e,n,r,i,s,o){const u=Ej(t);u.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&vn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>vn.error(w)),e.push(u);const h=Cj().then(w=>{if(w)return r.getId()}),[d,y]=await Promise.all([u,h]);gj(s)||cj(s,d.measurementId),i("js",new Date);const _=(o==null?void 0:o.config)??{};return _[ij]="firebase",_.update=!0,y!=null&&(_[rj]=y),i("config",d.measurementId,_),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.app=e}_delete(){return delete Ia[this.app.options.appId],Promise.resolve()}}let Ia={},nw=[];const rw={};let Af="dataLayer",Nj="gtag",iw,Gg,sw=!1;function Rj(){const t=[];if($x()&&t.push("This is a browser extension environment."),CC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Mn.create("invalid-analytics-context",{errorInfo:e});vn.warn(n.message)}}function Dj(t,e,n){Rj();const r=t.options.appId;if(!r)throw Mn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mn.create("no-api-key");if(Ia[r]!=null)throw Mn.create("already-exists",{id:r});if(!sw){hj(Af);const{wrappedGtag:s,gtagCore:o}=mj(Ia,nw,rw,Af,Nj);Gg=s,iw=o,sw=!0}return Ia[r]=Aj(t,nw,rw,e,iw,Af,n),new Pj(t)}function Oj(t=tg()){t=Pt(t);const e=No(t,Fh);return e.isInitialized()?e.getImmediate():jj(t)}function jj(t,e={}){const n=No(t,Fh);if(n.isInitialized()){const i=n.getImmediate();if(ws(e,n.getOptions()))return i;throw Mn.create("already-initialized")}return n.initialize({options:e})}function Vj(t,e,n){t=Pt(t),kj(Gg,Ia[t.app.options.appId],e,n).catch(r=>vn.error(r))}function Lj(t,e,n,r){t=Pt(t),Sj(Gg,Ia[t.app.options.appId],e,n,r).catch(i=>vn.error(i))}const ow="@firebase/analytics",aw="0.10.19";function Mj(){Zr(new Cr(Fh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Dj(r,i,n)},"PUBLIC")),Zr(new Cr("analytics-internal",t,"PRIVATE")),er(ow,aw),er(ow,aw,"esm2020");function t(e){try{const n=e.getProvider(Fh).getImmediate();return{logEvent:(r,i,s)=>Lj(n,r,i,s),setUserProperties:(r,i)=>Vj(n,r,i)}}catch(n){throw Mn.create("interop-component-reg-failed",{reason:n})}}}Mj();const Fj={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"},Qg=Qx(Fj),Pf=GN(Qg),Uj=new gi,Sl=eO(Qg);typeof window<"u"&&Oj(Qg);const Pb=he.createContext(),Za=()=>he.useContext(Pb),Bj=({children:t})=>{const e=Cp(()=>Dt.contacts.orderBy("lastUpdated").reverse().toArray()),n=Cp(()=>Dt.settings.get("userProfile")),[r,i]=he.useState(null),[s,o]=he.useState(null),[u,h]=he.useState(!1);he.useEffect(()=>{const X=VP(Pf,se=>{o(se)});return()=>X()},[]);const d=async()=>{try{return(await rN(Pf,Uj)).user}catch(X){throw console.error("Login Error:",X),X}},y=async()=>{try{await LP(Pf)}catch(X){console.error("Logout Error:",X)}},_=async()=>{if(s){h(!0);try{const X=await Dt.contacts.toArray(),se=await Dt.settings.get("userProfile"),C=If(Sl,"users",s.uid);await mO(C,{profile:se,lastSynced:new Date,email:s.email},{merge:!0});const I=G_(Sl,"users",s.uid,"contacts"),R=yO(Sl);X.forEach(S=>{const N=If(I,S.id);R.set(N,S)}),await R.commit(),console.log("Synced to cloud successfully")}catch(X){console.error("Sync Error:",X)}finally{h(!1)}}},w=async()=>{if(s){h(!0);try{const X=If(Sl,"users",s.uid),se=await fO(X);if(se.exists()){const S=se.data();S.profile&&await Dt.settings.put({...S.profile,id:"userProfile"})}const C=G_(Sl,"users",s.uid,"contacts"),I=await pO(C),R=[];I.forEach(S=>{R.push(S.data())}),R.length>0&&await Dt.contacts.bulkPut(R),console.log("Synced from cloud successfully")}catch(X){console.error("Download Error:",X)}finally{h(!1)}}};he.useEffect(()=>{(async()=>{await Dt.settings.get("userProfile")||await Dt.settings.add({id:"userProfile",name:"",bio:"",avatar:"",links:[],categories:["","","","",""]})})(),(async()=>{const C=await Dt.settings.get("userProfile");C&&!C.hasClearedMock&&(await Dt.contacts.clear(),await Dt.settings.update("userProfile",{hasClearedMock:!0}))})()},[]);const P=async X=>{const se=crypto.randomUUID();return await Dt.contacts.add({...X,id:se,lastUpdated:new Date}),se},M=async(X,se)=>{await Dt.contacts.update(X,{...se,lastUpdated:new Date})},z=async X=>{await Dt.settings.update("userProfile",X)},G=async X=>{await Dt.contacts.delete(X)},D=async(X,se)=>{const C=await Dt.contacts.get(X);if(C){const I=[...C.memories||[],{...se,date:se.date||new Date}];await Dt.contacts.update(X,{memories:I,lastUpdated:new Date})}},[b,O]=he.useState(null),ee=(X,se="")=>new Promise(C=>{O({title:X,placeholder:se,onConfirm:I=>{O(null),C(I)},onCancel:()=>{O(null),C(null)}})});return m.jsxs(Pb.Provider,{value:{contacts:e,currentContactId:r,setCurrentContactId:i,userProfile:n,updateProfile:z,addContact:P,updateContact:M,deleteContact:G,addMemory:D,customPrompt:ee,currentUser:s,login:d,logout:y,syncToCloud:_,syncFromCloud:w,isSyncing:u},children:[t,b&&m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:m.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[m.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:b.title}),m.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:b.placeholder,onKeyDown:X=>{X.key==="Enter"&&b.onConfirm(X.target.value),X.key==="Escape"&&b.onCancel()},id:"custom-prompt-input"}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),m.jsx("button",{onClick:()=>{const X=document.getElementById("custom-prompt-input").value;b.onConfirm(X)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},zj=()=>{const t=Ao(),{contacts:e,addContact:n,updateContact:r,addMemory:i,userProfile:s,updateProfile:o,customPrompt:u}=Za(),[h,d]=he.useState(!1),[y,_]=he.useState(!1),[w,P]=he.useState(!1),[M,z]=he.useState(""),[G,D]=he.useState(null),[b,O]=he.useState(""),[ee,X]=he.useState(""),[se,C]=he.useState(""),[I,R]=he.useState(""),[S,N]=he.useState(""),[B,A]=he.useState(new Date().toISOString().split("T")[0]),Xe=he.useMemo(()=>(s==null?void 0:s.categories)||["","","","",""],[s]);Yi.useEffect(()=>{Xe.length>0&&!S&&N(Xe[0])},[Xe]);const dt=he.useMemo(()=>M.trim()?(e==null?void 0:e.filter(re=>{var Y;return re.name.toLowerCase().includes(M.toLowerCase())||((Y=re.tags)==null?void 0:Y.some(Z=>Z.toLowerCase().includes(M.toLowerCase())))}))||[]:[],[e,M]),qt=async()=>{let re=G;if(!re&&ee.trim())re=await n({name:ee,phone:I,tags:[S,""],importance:50,birthday:se||null,memories:[]});else if(re&&(se||I)){const Y={};se&&(Y.birthday=se),I&&(Y.phone=I),await r(re,Y)}re&&b.trim()&&(await i(re,{content:b,location:"",date:new Date(B)}),P(!1),z(""),D(null),O(""),X(""),C(""),R(""),N(Xe[0]||""),A(new Date().toISOString().split("T")[0]),d(!1),navigator.vibrate&&navigator.vibrate(50))},hn=async re=>{const Y=re.target.files[0];if(Y){_(!0);try{const ue=(await oC.recognize(Y,"eng",{logger:ae=>console.log(ae)})).data.text,Ee=await n({name:"New Contact (OCR)",cardImage:URL.createObjectURL(Y),ocrText:ue,tags:["OCR Scan"],memories:[{date:new Date,content:"Scanned business card.",location:"Unknown"}],importance:50});navigator.vibrate&&navigator.vibrate(50),t(`/profile/${Ee}`)}catch(Z){console.error("OCR failed:",Z)}finally{_(!1),d(!1)}}};return m.jsxs("div",{className:"w-full h-full bg-mesh",children:[m.jsxs("header",{className:"sticky top-0 z-40 bg-background-dark/80 backdrop-blur-xl pt-safe-top pb-4 px-6 border-b border-white/5",children:[m.jsx("div",{className:"flex items-center justify-between mb-6 pt-4",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"size-11 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 p-0.5 shadow-lg shadow-primary/10",children:m.jsxs("div",{className:"w-full h-full rounded-[14px] bg-background-dark flex items-center justify-center overflow-hidden relative",children:[m.jsx("div",{className:"absolute inset-0 bg-primary/10 animate-pulse"}),m.jsx("div",{className:"w-full h-full bg-center bg-cover relative z-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuBJ4IyEmTKuuDd2LjWAC_c9c8tbn5UsDuZ85z0b0z_HBfvqJ4cQzftfEWYtbuMvNodNOqEw3h7fMRezfuyubNk2VnpKp61bj6d8qV-c7oSv3Ufa9_iTZrjQO-CALbBVBwf-W19vXdty89lNH0k570SZEfrd51IheZ36T4qnGOPlLtPHP0wxw0GmlB779orEW3f-PI_n3r9fryi_FUXsQ1ACzGzbpxj59uSIgA0dB0CHcN7fE45lIFTfnzWZMMuPaxKE4Edpjn64W4Q")'}})]})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-xl font-bold tracking-tight text-white mb-0.5",children:""}),m.jsx("p",{className:"text-[11px] font-bold text-white/40 tracking-wider uppercase",children:"Nexus Mind"})]})]})}),m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"}),m.jsxs("div",{className:"glass-search flex items-center h-12 rounded-2xl px-4 relative z-10 transition-all border border-white/10 group-focus-within:border-primary/50 group-focus-within:bg-background-dark/90",onClick:()=>t("/search"),children:[m.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px] group-focus-within:text-primary transition-colors",children:"search"}),m.jsx("input",{className:"bg-transparent border-none focus:ring-0 text-sm w-full placeholder:text-white/30 font-medium ml-3 text-white",placeholder:"...",type:"text",readOnly:!0}),m.jsx("div",{className:"px-2 py-0.5 rounded-md bg-white/5 border border-white/5 text-[10px] text-white/30 font-bold",children:"CMD+K"})]})]})]}),m.jsx("div",{className:"px-6 mb-2 sticky top-[136px] z-30 bg-background-dark/95 backdrop-blur-xl py-2 -mx-2",children:m.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar px-2 pb-2",children:["","","",""].map((re,Y)=>m.jsx("button",{className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${Y===0?"bg-white text-background-dark shadow-lg shadow-white/10":"bg-white/5 text-white/60 hover:bg-white/10 hover:text-white"}`,children:re},re))})}),m.jsxs("main",{className:"flex-1 px-4 pb-32 space-y-4",children:[y&&m.jsxs("div",{className:"flex items-center justify-center py-8",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),m.jsx("span",{className:"ml-3 text-sm text-[#9da6b9]",children:"..."})]}),(e==null?void 0:e.length)===0&&!y&&m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-[#9da6b9]",children:[m.jsx("span",{className:"material-symbols-outlined text-64px opacity-20 mb-4",children:"database_off"}),m.jsx("p",{className:"text-sm font-medium",children:""})]}),e==null?void 0:e.map(re=>{var Y,Z,ue,Ee,ae,me,Ne;return m.jsxs("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>t(`/profile/${re.id}`),children:[m.jsxs("div",{className:"p-5 space-y-4",children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"size-12 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors",children:re.cardImage?m.jsx("img",{src:re.cardImage,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",alt:re.name}):m.jsx("span",{className:"material-symbols-outlined text-white/10 text-2xl",children:"person"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors",children:re.name}),m.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[m.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:((Y=re.tags)==null?void 0:Y[0])||""}),m.jsx("span",{className:"text-[10px] font-medium text-white/30 uppercase",children:new Date(re.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),m.jsx("button",{className:"size-8 rounded-full bg-white/5 flex items-center justify-center text-white/20 group-hover:text-white/60 transition-colors",children:m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"more_horiz"})})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-primary/20 rounded-full"}),m.jsxs("p",{className:"pl-4 text-[14px] text-white/70 font-medium leading-relaxed line-clamp-2 italic",children:['"',((ue=(Z=re.memories)==null?void 0:Z[0])==null?void 0:ue.content)||((Ee=re.ocrText)==null?void 0:Ee.substring(0,100))||"",'"']})]}),m.jsxs("div",{className:"flex items-center gap-4 pt-1",children:[m.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-white/5 border border-white/5",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px] text-white/40",children:"location_on"}),m.jsx("span",{className:"text-[11px] font-bold text-white/40",children:((me=(ae=re.memories)==null?void 0:ae[0])==null?void 0:me.location)||""})]}),((Ne=re.memories)==null?void 0:Ne.length)>1&&m.jsxs("div",{className:"text-[11px] font-bold text-primary/60",children:["+",re.memories.length-1," "]})]})]}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-gradient-to-r from-transparent via-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]},re.id)})]}),m.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:m.jsxs("div",{className:"relative",children:[h&&m.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[m.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[m.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),m.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:m.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),m.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:hn})]}),m.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>P(!0),children:[m.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),m.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:m.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),m.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${h?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>d(!h),children:m.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),w&&m.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[m.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>P(!1)}),m.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[m.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),m.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),m.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),m.jsx("button",{onClick:()=>P(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:m.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),m.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:M,onChange:re=>{z(re.target.value),G||X(re.target.value)}}),G&&m.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[m.jsx("span",{children:""}),m.jsx("button",{onClick:()=>{D(null),z(ee)},className:"flex items-center",children:m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),M&&!G&&m.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:dt.length>0?dt.map(re=>{var Y;return m.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{D(re.id),z(re.name),X(re.name)},children:[m.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:re.name}),m.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(Y=re.tags)==null?void 0:Y[0]})]},re.id)}):m.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",M,""]})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),m.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[Xe.map(re=>m.jsx("button",{onClick:()=>N(re),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${S===re?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:re},re)),m.jsxs("button",{onClick:async()=>{const re=await u("","...");if(re){const Y=(s==null?void 0:s.categories)||["","","","",""];Y.includes(re)||(o({...s,categories:[...Y,re]}),N(re))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[m.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),m.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),m.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:b,onChange:re=>O(re.target.value)})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest ml-1",children:""}),m.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3.5 text-white text-sm focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:B,onChange:re=>A(re.target.value)})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest ml-1",children:""}),m.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3.5 text-white text-sm focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:I,onChange:re=>R(re.target.value)})]})]}),m.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${(G||ee)&&b?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!((G||ee)&&b),onClick:qt,children:""})]})]})]})]})},$j=()=>{const t=Ao(),{contacts:e,userProfile:n}=Za(),[r,i]=he.useState(""),[s,o]=he.useState(""),u=he.useMemo(()=>["",...(n==null?void 0:n.categories)||["","","","",""]],[n]),h=he.useMemo(()=>{let d=e||[];if(s!==""&&(d=d.filter(y=>{var _;return(_=y.tags)==null?void 0:_.includes(s)})),r.trim()){const y=r.toLowerCase();d=d.filter(_=>{var D,b,O,ee,X;const w=(D=_.name)==null?void 0:D.toLowerCase().includes(y),P=(b=_.phone)==null?void 0:b.toLowerCase().includes(y),M=(O=_.tags)==null?void 0:O.some(se=>se.toLowerCase().includes(y)),z=(ee=_.ocrText)==null?void 0:ee.toLowerCase().includes(y),G=(X=_.memories)==null?void 0:X.some(se=>se.content.toLowerCase().includes(y));return w||P||M||z||G?(_._matchReason=w?"":P?"":M?` #${y}`:z?"":"",!0):!1})}else s===""&&(d=d.slice(0,5));return d},[e,r,s]);return m.jsxs("div",{className:"min-h-screen bg-mesh pb-32 safe-top",children:[m.jsxs("header",{className:"sticky top-0 z-50 bg-background-dark/40 backdrop-blur-xl px-6 py-4 flex items-center justify-between border-b border-white/5",children:[m.jsx("button",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/60 hover:text-white hover:bg-white/10 transition-all active:scale-90",onClick:()=>t(-1),children:m.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),m.jsx("p",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),m.jsx("button",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/60 hover:text-white hover:bg-white/10 transition-all",children:m.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"tune"})})]}),m.jsx("div",{className:"px-6 py-6",children:m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:"absolute inset-y-0 left-5 flex items-center pointer-events-none",children:m.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),m.jsx("input",{className:"block w-full h-14 pl-14 pr-12 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[15px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:r,onChange:d=>i(d.target.value),autoFocus:!0}),r&&m.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:m.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>i(""),children:m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),m.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:u.map(d=>m.jsx("button",{onClick:()=>o(d),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${s===d?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:m.jsx("span",{className:"text-xs font-bold tracking-wider",children:d})},d))}),m.jsxs("main",{className:"px-6 space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[m.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:r||s!==""?` (${h.length})`:""}),m.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),m.jsx("div",{className:"grid gap-4",children:h.map(d=>m.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>t(`/profile/${d.id}`),children:m.jsxs("div",{className:"p-5 flex gap-4",children:[m.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:d.cardImage?m.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:d.cardImage,alt:d.name}):m.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),m.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[m.jsx("div",{className:"flex items-center gap-2 mb-1",children:m.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:d._matchReason||""})}),m.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:d.name}),m.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[d.phone&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),m.jsx("span",{className:"text-[11px] font-medium",children:d.phone})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),m.jsx("span",{className:"text-[11px] font-medium",children:new Date(d.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},d.id))}),h.length===0&&m.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[m.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:m.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),m.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},Kj=()=>{var X,se,C,I,R;const{id:t}=BS(),e=Ao(),{updateContact:n,deleteContact:r,userProfile:i,updateProfile:s,customPrompt:o}=Za(),u=Cp(()=>Dt.contacts.get(t),[t]),[h,d]=he.useState(!1),[y,_]=he.useState(!1),[w,P]=he.useState(null),[M,z]=he.useState(!1);if(!u)return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const G=()=>{var S;P({name:u.name,birthday:u.birthday||"",phone:u.phone||"",tags:((S=u.tags)==null?void 0:S.join(", "))||"",ocrText:u.ocrText||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[]}),_(!0),d(!1)},D=async()=>{await n(t,{name:w.name,birthday:w.birthday||null,phone:w.phone,tags:w.tags.split(",").map(S=>S.trim()).filter(S=>S),ocrText:w.ocrText,events:w.events,bio:w.bio,links:w.links,gallery:w.gallery}),_(!1)},b=()=>{var N;const S=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(N=u.tags)!=null&&N.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(S),z(!0),setTimeout(()=>z(!1),2e3),d(!1)},O=async()=>{window.confirm(` ${u.name} `)&&(await r(t),e("/"))},ee=async S=>{if(window.confirm("")){const N=[...u.memories];N.splice(S,1),await n(t,{memories:N})}};return m.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col max-w-[480px] mx-auto overflow-x-hidden pb-32 bg-background-dark text-white safe-top safe-bottom",children:[m.jsxs("header",{className:"flex items-center bg-transparent p-6 pb-2 justify-between sticky top-0 z-50 backdrop-blur-sm",children:[m.jsx("div",{onClick:()=>e(-1),className:"text-white/60 hover:text-white flex size-10 shrink-0 items-center justify-center rounded-full bg-white/5 cursor-pointer transition-all active:scale-90",children:m.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),m.jsxs("div",{className:"text-center opacity-0 animate-in fade-in slide-in-from-top-4 duration-700",children:[m.jsx("h2",{className:"text-white text-sm font-bold leading-tight tracking-widest uppercase opacity-80",children:""}),m.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile"})]}),m.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[m.jsx("button",{onClick:()=>d(!h),className:"flex cursor-pointer items-center justify-center rounded-full size-10 bg-white/5 text-white/60 hover:text-white transition-all",children:m.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_horiz"})}),h&&m.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[m.jsxs("button",{onClick:G,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),m.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),m.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),m.jsxs("button",{onClick:O,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),m.jsx("span",{children:""})]})]})]})]}),m.jsx("div",{className:"px-6 py-4",children:m.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?m.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:m.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:m.jsxs("div",{children:[m.jsx("div",{className:"flex items-center gap-2 mb-2",children:m.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((X=u.tags)==null?void 0:X[0])||""})}),m.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),u.phone&&m.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[m.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),m.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]})]})})]})}),m.jsx("div",{className:"px-6 pb-2",children:y?m.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),m.jsx("input",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:w.name,onChange:S=>P({...w,name:S.target.value})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),m.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:w.phone,onChange:S=>P({...w,phone:S.target.value})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (YYYY-MM-DD)"}),m.jsx("input",{type:"date",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:w.birthday,onChange:S=>P({...w,birthday:S.target.value})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),m.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:m.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((i==null?void 0:i.categories)||["","","","",""]).map(S=>{const N=w.tags.split(",").map(A=>A.trim()).filter(A=>A),B=N.includes(S);return m.jsx("button",{type:"button",onClick:()=>{let A;B?A=N.filter(Xe=>Xe!==S):A=[...N,S],P({...w,tags:A.join(", ")})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${B?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:S},S)}),m.jsxs("button",{type:"button",onClick:async()=>{const S=await o("","...");if(S){const N=(i==null?void 0:i.categories)||["","","","",""];if(!N.includes(S)){s({...i,categories:[...N,S]});const B=w.tags.split(",").map(A=>A.trim()).filter(A=>A);P({...w,tags:[...B,S].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),m.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),m.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28 resize-none no-scrollbar",placeholder:"...",value:w.bio,onChange:S=>P({...w,bio:S.target.value})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center px-1",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),m.jsxs("button",{onClick:()=>P({...w,links:[...w.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),m.jsx("div",{className:"space-y-2",children:w.links.map((S,N)=>m.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-4 duration-300",children:[m.jsx("input",{className:"w-24 bg-[#1c1f27] border border-white/10 rounded-xl px-4 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:" (IG)",value:S.label,onChange:B=>{const A=[...w.links];A[N].label=B.target.value,P({...w,links:A})}}),m.jsx("input",{className:"flex-1 bg-[#1c1f27] border border-white/10 rounded-xl px-4 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:" (https://...)",value:S.url,onChange:B=>{const A=[...w.links];A[N].url=B.target.value,P({...w,links:A})}}),m.jsx("button",{onClick:()=>P({...w,links:w.links.filter((B,A)=>A!==N)}),className:"size-10 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},N))})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center px-1",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),m.jsxs("button",{onClick:()=>{const S=window.prompt(":");S&&P({...w,gallery:[...w.gallery,S]})},className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]})]}),m.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[w.gallery.map((S,N)=>m.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[m.jsx("img",{src:S,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),m.jsx("button",{onClick:()=>P({...w,gallery:w.gallery.filter((B,A)=>A!==N)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:m.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},N)),m.jsx("button",{onClick:()=>{const S=window.prompt(":");S&&P({...w,gallery:[...w.gallery,S]})},className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:m.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),m.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28 resize-none no-scrollbar",placeholder:"...",value:w.ocrText,onChange:S=>P({...w,ocrText:S.target.value})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between items-center px-1",children:[m.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),m.jsxs("button",{onClick:()=>P({...w,events:[...w.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),m.jsx("div",{className:"space-y-2",children:w.events.map((S,N)=>m.jsxs("div",{className:"flex gap-2 items-start animate-in slide-in-from-right-2 duration-200",children:[m.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-4 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-36",value:S.date,onChange:B=>{const A=[...w.events];A[N].date=B.target.value,P({...w,events:A})}}),m.jsx("input",{className:"flex-1 bg-[#1c1f27] border border-white/10 rounded-xl px-4 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:S.title,onChange:B=>{const A=[...w.events];A[N].title=B.target.value,P({...w,events:A})}}),m.jsx("button",{onClick:()=>{const B=[...w.events];B.splice(N,1),P({...w,events:B})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},N))})]}),m.jsxs("div",{className:"flex gap-3 pt-6",children:[m.jsx("button",{onClick:D,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),m.jsx("button",{onClick:()=>_(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),m.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:((se=u.ocrText)==null?void 0:se.split(`
`)[0])||""}),u.phone&&m.jsxs("div",{className:"flex items-center gap-2 mt-2 text-primary/80",children:[m.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),m.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&m.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((S,N)=>m.jsxs("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),S.label]},N))}),m.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[(C=u.tags)==null?void 0:C.map((S,N)=>m.jsxs("div",{className:`${N===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",S]},N)),u.birthday&&m.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})}),m.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&m.jsxs("div",{className:"px-4 mb-6",children:[m.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((S,N)=>m.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:m.jsx("img",{src:S,className:"w-full h-full object-cover",alt:`gallery-${N}`})},N))})]}),m.jsxs("div",{className:"px-4",children:[m.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),m.jsxs("div",{className:"space-y-8",children:[(I=u.memories)==null?void 0:I.map((S,N)=>m.jsxs("div",{className:`relative ${N!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[m.jsx("div",{className:`absolute ${N===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("span",{className:"text-white font-semibold text-sm",children:S.content}),m.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(S.date).toLocaleDateString("zh-TW"),"  ",S.location]})]}),m.jsx("button",{onClick:()=>ee(N),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:m.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},N)),!((R=u.memories)!=null&&R.length)&&m.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),M&&m.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),m.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},qj=()=>{var b;const t=Ao(),{contacts:e,updateContact:n,addMemory:r}=Za(),[i,s]=he.useState(!1),[o,u]=he.useState(""),[h,d]=he.useState(65),[y,_]=he.useState(40),[w,P]=he.useState(null);he.useEffect(()=>{e&&e.length>0&&!w&&(P(e[0].id),d(e[0].importance||50))},[e]);const M=O=>{const ee=parseInt(O.target.value);d(ee),w&&n(w,{importance:ee})},z=async()=>{!o.trim()||!w||(await r(w,{content:o,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),u(""),s(!1))},G=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),z())},D=e==null?void 0:e.find(O=>O.id===w);return m.jsxs("div",{className:"bg-background-dark text-white min-h-screen overflow-hidden select-none relative",children:[m.jsxs("div",{className:"fixed top-0 w-full z-50 px-8 pt-4 pb-2 flex justify-between items-end",children:[m.jsx("div",{className:"text-sm font-semibold tracking-tight",onClick:()=>t(-1),children:"9:41"}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),m.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>s(!0),children:[m.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),m.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),m.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>t("/"),children:[m.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),m.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),m.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[m.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),m.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),m.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[m.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),m.jsxs("div",{className:"text-center py-2",children:[m.jsx("div",{className:"text-sm font-bold truncate w-28",children:(D==null?void 0:D.name)||""}),m.jsx("div",{className:"text-xs text-white/50",children:((b=D==null?void 0:D.tags)==null?void 0:b[0])||""})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[m.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[m.jsx("input",{type:"range",min:"0",max:"100",value:h,onChange:M,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),m.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${h}%`}}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[m.jsx("span",{className:`material-symbols-outlined text-[28px] ${h>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${h>50?"text-black/40":"text-white/40"}`,children:""})]})]}),m.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[m.jsx("input",{type:"range",min:"0",max:"100",value:y,onChange:O=>_(parseInt(O.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),m.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${y}%`}}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[m.jsx("span",{className:`material-symbols-outlined text-[28px] ${y>50?"text-black/40":"text-white/40"}`,children:"speed"}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${y>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),m.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[m.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),m.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),m.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),m.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>t("/search"),children:m.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),m.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[m.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),m.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),i&&m.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:m.jsxs("div",{className:"w-full max-w-sm",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),m.jsx("button",{onClick:()=>s(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),m.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:o,onChange:O=>u(O.target.value),onKeyDown:G}),m.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),m.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),m.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),m.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:z,children:" SAVE TO VAULT"})]})]})}),m.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[m.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),m.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},Wj=()=>{const t=Ao(),{contacts:e}=Za(),n=he.useMemo(()=>{if(!e)return[];const s=[],o=new Date;o.setHours(0,0,0,0);const u=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(h=>{if(h.birthday){const[d,y,_]=h.birthday.split("-").map(Number),w=new Date(o.getFullYear(),y-1,_);w<o&&w.setFullYear(o.getFullYear()+1);const P=Math.ceil((w-o)/(1e3*60*60*24));s.push({id:`birthday-${h.id}`,contactId:h.id,contactName:h.name,date:w,title:"",description:`${h.name} `,type:"birthday",diffDays:P,isUpcoming:P<=30&&P>=0})}if(h.events&&h.events.forEach((d,y)=>{const _=new Date(d.date);_.setHours(0,0,0,0);const w=Math.ceil((_-o)/(1e3*60*60*24));s.push({id:`event-${h.id}-${y}`,contactId:h.id,contactName:h.name,date:_,title:d.title,description:"",type:d.type||"event",diffDays:w,isUpcoming:w<=30&&w>=0})}),h.memories&&h.memories.forEach((d,y)=>{const _=new Date(d.date);_.setHours(0,0,0,0);const w=Math.ceil((_-o)/(1e3*60*60*24));s.push({id:`memory-${h.id}-${y}`,contactId:h.id,contactName:h.name,date:_,title:"",description:d.content.substring(0,20)+(d.content.length>20?"...":""),type:"memory",diffDays:w,isUpcoming:w<=30&&w>=0});let P;for(;(P=u.exec(d.content))!==null;){const[M,z,G,D]=P,b=z?parseInt(z.replace(/[-/]/,"")):o.getFullYear(),O=new Date(b,parseInt(G)-1,parseInt(D));if(O.setHours(0,0,0,0),!isNaN(O.getTime())){const ee=Math.ceil((O-o)/864e5);s.push({id:`extracted-mem-${h.id}-${y}-${P.index}`,contactId:h.id,contactName:h.name,date:O,title:"",description:`: ${M}`,type:"extracted",diffDays:ee,isUpcoming:ee<=30&&ee>=0})}}}),h.ocrText){let d;for(;(d=u.exec(h.ocrText))!==null;){const[y,_,w,P]=d,M=_?parseInt(_.replace(/[-/]/,"")):o.getFullYear(),z=new Date(M,parseInt(w)-1,parseInt(P));if(z.setHours(0,0,0,0),!isNaN(z.getTime())){const G=Math.ceil((z-o)/864e5);s.push({id:`extracted-ocr-${h.id}-${d.index}`,contactId:h.id,contactName:h.name,date:z,title:"/",description:`: ${y}`,type:"extracted",diffDays:G,isUpcoming:G<=30&&G>=0})}}}}),s.sort((h,d)=>d.date-h.date)},[e]),r=n.filter(s=>s.isUpcoming),i=n.filter(s=>!s.isUpcoming);return m.jsxs("div",{className:"max-w-[480px] mx-auto min-h-screen bg-background-dark text-white pb-24",children:[m.jsx("header",{className:"sticky top-0 z-40 bg-background-dark/80 backdrop-blur-md pt-12 pb-4 px-4 border-b border-white/5",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:()=>t(-1),className:"material-symbols-outlined",children:"arrow_back_ios_new"}),m.jsx("h1",{className:"text-xl font-extrabold tracking-tight",children:""})]})}),m.jsxs("main",{className:"p-4 space-y-8",children:[m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),m.jsx("div",{className:"space-y-3",children:r.length>0?r.map(s=>m.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>t(`/profile/${s.contactId}`),children:[m.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${s.type==="birthday"?"bg-pink-500/20 text-pink-500":s.type==="memory"?"bg-blue-500/20 text-blue-500":s.type==="extracted"?"bg-amber-500/20 text-amber-500":"bg-primary/20 text-primary"}`,children:m.jsx("span",{className:"material-symbols-outlined",children:s.type==="birthday"?"cake":s.type==="memory"?"history":s.type==="extracted"?"find_in_page":"event_available"})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-sm text-white/90",children:s.title}),m.jsx("p",{className:"text-[10px] text-white/40 mt-0.5",children:s.contactName})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs font-bold text-white/80",children:s.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),m.jsx("p",{className:`text-[10px] font-bold ${s.diffDays===0?"text-red-500":"text-primary"}`,children:s.diffDays===0?"":`${s.diffDays} `})]})]}),m.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:s.description})]})]},s.id)):m.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:m.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),m.jsxs("section",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),m.jsx("div",{className:"space-y-3",children:i.map(s=>m.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>t(`/profile/${s.contactId}`),children:[m.jsxs("div",{className:"text-center min-w-[50px]",children:[m.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:s.date.getFullYear()}),m.jsx("p",{className:"text-sm font-black text-white/80",children:s.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),m.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:m.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:s.type==="birthday"?"cake":s.type==="memory"?"history":s.type==="extracted"?"find_in_page":"event_available"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[s.title,"  ",s.contactName]}),m.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:s.description})]})]},s.id))})]})]})]})},Hj=()=>{var G,D;const t=Ao(),{userProfile:e,updateProfile:n,customPrompt:r,currentUser:i,login:s,logout:o,syncToCloud:u,syncFromCloud:h,isSyncing:d}=Za(),[y,_]=he.useState(!1),[w,P]=he.useState({name:"",bio:"",avatar:"",links:[],categories:[]});he.useEffect(()=>{e&&P({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const M=async()=>{await n(w),_(!1)},z=async()=>{const b=await r("","...");if(b)if(y)w.categories.includes(b)||P({...w,categories:[...w.categories,b]});else{const O=e.categories||["","","","",""];O.includes(b)||await n({...e,categories:[...O,b]})}};return e?m.jsxs("div",{className:"bg-background-dark text-white min-h-screen pb-24",children:[m.jsxs("div",{className:"px-6 pt-12 pb-6 flex justify-between items-center border-b border-white/5 bg-background-dark/80 backdrop-blur-md sticky top-0 z-30",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 text-white/60 hover:text-white transition-colors",children:m.jsx("span",{className:"material-symbols-outlined",children:"arrow_back_ios_new"})}),m.jsx("h1",{className:"text-xl font-bold tracking-tight",children:""})]}),y?m.jsx("button",{onClick:M,className:"text-sm font-bold text-white px-4 py-1.5 rounded-full bg-primary hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""}):m.jsx("button",{onClick:()=>_(!0),className:"text-sm font-bold text-primary px-4 py-1.5 rounded-full bg-primary/10 hover:bg-primary/20 transition-all",children:""})]}),m.jsxs("main",{className:"px-6 pt-8 max-w-lg mx-auto space-y-8",children:[m.jsxs("div",{className:"flex flex-col items-center gap-4",children:[m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:w.avatar?m.jsx("img",{src:w.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):m.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),y&&m.jsx("button",{onClick:async()=>{const b=await r(""," URL...");b&&P({...w,avatar:b})},className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})})]}),m.jsx("div",{className:"text-center space-y-1 w-full",children:y?m.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:w.name,onChange:b=>P({...w,name:b.target.value}),placeholder:""}):m.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y?m.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px] resize-none",value:w.bio,onChange:b=>P({...w,bio:b.target.value}),placeholder:"..."}):m.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic",children:["",e.bio||"",""]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center px-1",children:[m.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y&&m.jsxs("button",{onClick:()=>P({...w,links:[...w.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),m.jsxs("div",{className:"space-y-2",children:[(G=y?w.links:e.links)==null?void 0:G.map((b,O)=>m.jsx("div",{className:"flex gap-2 items-center",children:y?m.jsxs(m.Fragment,{children:[m.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:b.label,onChange:ee=>{const X=[...w.links];X[O].label=ee.target.value,P({...w,links:X})}}),m.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:b.url,onChange:ee=>{const X=[...w.links];X[O].url=ee.target.value,P({...w,links:X})}}),m.jsx("button",{onClick:()=>P({...w,links:w.links.filter((ee,X)=>X!==O)}),className:"text-white/20 hover:text-red-400 p-1",children:m.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):m.jsxs("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[m.jsx("span",{className:"text-sm font-medium text-white/80",children:b.label}),m.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},O)),!y&&((D=e.links)==null?void 0:D.length)===0&&m.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!y&&m.jsxs("div",{className:"pt-8 space-y-4",children:[m.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),m.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:i?m.jsxs("div",{className:"divide-y divide-white/5",children:[m.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[m.jsx("img",{src:i.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-bold truncate",children:i.displayName}),m.jsx("p",{className:"text-[10px] text-white/30 truncate",children:i.email})]}),m.jsx("button",{onClick:o,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),m.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[m.jsxs("button",{onClick:u,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[m.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_upload"}),d?"...":""]}),m.jsxs("button",{onClick:h,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[m.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):m.jsxs("button",{onClick:s,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[m.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:m.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-bold",children:" Google "}),m.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),m.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),m.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),m.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[m.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),m.jsx("span",{className:"text-sm",children:""})]}),m.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),m.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),m.jsx("span",{className:"text-sm",children:""})]})})]}),m.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),m.jsxs("button",{onClick:z,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[m.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),m.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.categories.map((b,O)=>m.jsxs("div",{className:`group flex items-center gap-2 px-3 py-1.5 rounded-full text-[11px] font-bold transition-all border border-transparent ${y?"bg-white/10 text-white hover:border-white/20":"bg-white/5 text-white/60"}`,children:[m.jsx("span",{children:b}),y&&m.jsx("button",{onClick:()=>{window.confirm(`${b}`)&&P({...w,categories:w.categories.filter((ee,X)=>X!==O)})},className:"opacity-0 group-hover:opacity-100 text-white/40 hover:text-red-400 transition-all flex items-center",children:m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]},O)),y&&m.jsxs("button",{onClick:z,className:"px-3 py-1.5 rounded-full text-[11px] font-bold bg-primary/10 text-primary border border-primary/20 border-dashed hover:bg-primary/20 transition-all flex items-center gap-1",children:[m.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]})]}),!y&&w.categories.length===0&&m.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[m.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),m.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),m.jsx("div",{className:"text-center pt-4",children:m.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]})]})]}):null},Gj=()=>{const t=Ao(),e=Jm(),n=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}];return m.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-6 pb-8 pointer-events-none",children:m.jsx("div",{className:"bg-[#16181d]/80 backdrop-blur-3xl border border-white/10 rounded-[32px] h-20 flex items-center justify-around px-4 shadow-[0_20px_50px_rgba(0,0,0,0.5)] pointer-events-auto",children:n.map(r=>{const i=e.pathname===r.path;return m.jsxs("button",{onClick:()=>{t(r.path),navigator.vibrate&&navigator.vibrate(5)},className:`flex flex-col items-center justify-center gap-1 transition-all duration-500 relative group w-16 ${i?"text-primary":"text-white/30 hover:text-white/60"}`,children:[i&&m.jsx("div",{className:"absolute -top-4 w-1 h-1 rounded-full bg-primary shadow-[0_0_12px_rgba(43,108,238,0.8)] animate-pulse"}),m.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${i?"scale-110 -translate-y-1":"scale-100"}`,children:[i&&m.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150 animate-pulse"}),m.jsx("span",{className:`material-symbols-outlined text-[28px] relative z-10 ${i?"fill-current":""}`,children:r.icon})]}),m.jsx("span",{className:`text-[10px] font-bold tracking-[0.1em] transition-all duration-500 ${i?"opacity-100 translate-y-0":"opacity-40 translate-y-1"}`,children:r.label})]},r.id)})})})},Qj=({children:t})=>m.jsxs("div",{className:"bg-background-dark min-h-screen text-white font-sans selection:bg-primary/30",children:[m.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative pb-24",children:t}),m.jsx(Gj,{})]});function Yj(){return m.jsx(Bj,{children:m.jsx(ok,{basename:"/nexus-mind",children:m.jsx(Qj,{children:m.jsxs(rk,{children:[m.jsx(no,{path:"/",element:m.jsx(zj,{})}),m.jsx(no,{path:"/search",element:m.jsx($j,{})}),m.jsx(no,{path:"/profile/:id",element:m.jsx(Kj,{})}),m.jsx(no,{path:"/stealth",element:m.jsx(qj,{})}),m.jsx(no,{path:"/settings",element:m.jsx(Hj,{})}),m.jsx(no,{path:"/vault",element:m.jsx(Wj,{})})]})})})})}Nf.createRoot(document.getElementById("root")).render(m.jsx(Yi.StrictMode,{children:m.jsx(Yj,{})}));
