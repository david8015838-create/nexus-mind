function eA(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var b_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ev(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xb={exports:{}},rp={},Jb={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh=Symbol.for("react.element"),tA=Symbol.for("react.portal"),nA=Symbol.for("react.fragment"),rA=Symbol.for("react.strict_mode"),iA=Symbol.for("react.profiler"),sA=Symbol.for("react.provider"),oA=Symbol.for("react.context"),aA=Symbol.for("react.forward_ref"),lA=Symbol.for("react.suspense"),uA=Symbol.for("react.memo"),cA=Symbol.for("react.lazy"),E_=Symbol.iterator;function hA(n){return n===null||typeof n!="object"?null:(n=E_&&n[E_]||n["@@iterator"],typeof n=="function"?n:null)}var Zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eE=Object.assign,tE={};function lu(n,e,r){this.props=n,this.context=e,this.refs=tE,this.updater=r||Zb}lu.prototype.isReactComponent={};lu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};lu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function nE(){}nE.prototype=lu.prototype;function tv(n,e,r){this.props=n,this.context=e,this.refs=tE,this.updater=r||Zb}var nv=tv.prototype=new nE;nv.constructor=tv;eE(nv,lu.prototype);nv.isPureReactComponent=!0;var T_=Array.isArray,rE=Object.prototype.hasOwnProperty,rv={current:null},iE={key:!0,ref:!0,__self:!0,__source:!0};function sE(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)rE.call(e,i)&&!iE.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:uh,type:n,key:o,ref:a,props:s,_owner:rv.current}}function fA(n,e){return{$$typeof:uh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function iv(n){return typeof n=="object"&&n!==null&&n.$$typeof===uh}function dA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var I_=/\/+/g;function lm(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dA(""+n.key):e.toString(36)}function xf(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case uh:case tA:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+lm(a,0):i,T_(s)?(r="",n!=null&&(r=n.replace(I_,"$&/")+"/"),xf(s,e,r,"",function(c){return c})):s!=null&&(iv(s)&&(s=fA(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(I_,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",T_(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+lm(o,l);a+=xf(o,e,r,u,s)}else if(u=hA(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+lm(o,l++),a+=xf(o,e,r,u,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function qh(n,e,r){if(n==null)return n;var i=[],s=0;return xf(n,i,"","",function(o){return e.call(r,o,s++)}),i}function pA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kn={current:null},bf={transition:null},mA={ReactCurrentDispatcher:Kn,ReactCurrentBatchConfig:bf,ReactCurrentOwner:rv};function oE(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:qh,forEach:function(n,e,r){qh(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return qh(n,function(){e++}),e},toArray:function(n){return qh(n,function(e){return e})||[]},only:function(n){if(!iv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};et.Component=lu;et.Fragment=nA;et.Profiler=iA;et.PureComponent=tv;et.StrictMode=rA;et.Suspense=lA;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mA;et.act=oE;et.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=eE({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=rv.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)rE.call(e,u)&&!iE.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:uh,type:n.type,key:s,ref:o,props:i,_owner:a}};et.createContext=function(n){return n={$$typeof:oA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sA,_context:n},n.Consumer=n};et.createElement=sE;et.createFactory=function(n){var e=sE.bind(null,n);return e.type=n,e};et.createRef=function(){return{current:null}};et.forwardRef=function(n){return{$$typeof:aA,render:n}};et.isValidElement=iv;et.lazy=function(n){return{$$typeof:cA,_payload:{_status:-1,_result:n},_init:pA}};et.memo=function(n,e){return{$$typeof:uA,type:n,compare:e===void 0?null:e}};et.startTransition=function(n){var e=bf.transition;bf.transition={};try{n()}finally{bf.transition=e}};et.unstable_act=oE;et.useCallback=function(n,e){return Kn.current.useCallback(n,e)};et.useContext=function(n){return Kn.current.useContext(n)};et.useDebugValue=function(){};et.useDeferredValue=function(n){return Kn.current.useDeferredValue(n)};et.useEffect=function(n,e){return Kn.current.useEffect(n,e)};et.useId=function(){return Kn.current.useId()};et.useImperativeHandle=function(n,e,r){return Kn.current.useImperativeHandle(n,e,r)};et.useInsertionEffect=function(n,e){return Kn.current.useInsertionEffect(n,e)};et.useLayoutEffect=function(n,e){return Kn.current.useLayoutEffect(n,e)};et.useMemo=function(n,e){return Kn.current.useMemo(n,e)};et.useReducer=function(n,e,r){return Kn.current.useReducer(n,e,r)};et.useRef=function(n){return Kn.current.useRef(n)};et.useState=function(n){return Kn.current.useState(n)};et.useSyncExternalStore=function(n,e,r){return Kn.current.useSyncExternalStore(n,e,r)};et.useTransition=function(){return Kn.current.useTransition()};et.version="18.3.1";Jb.exports=et;var ue=Jb.exports;const mt=ev(ue),gA=eA({__proto__:null,default:mt},[ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA=ue,vA=Symbol.for("react.element"),_A=Symbol.for("react.fragment"),wA=Object.prototype.hasOwnProperty,xA=yA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bA={key:!0,ref:!0,__self:!0,__source:!0};function aE(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)wA.call(e,i)&&!bA.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:vA,type:n,key:o,ref:a,props:s,_owner:xA.current}}rp.Fragment=_A;rp.jsx=aE;rp.jsxs=aE;Xb.exports=rp;var y=Xb.exports,lg={},lE={exports:{}},xr={},uE={exports:{}},cE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ee,ae){var he=ee.length;ee.push(ae);e:for(;0<he;){var be=he-1>>>1,ce=ee[be];if(0<s(ce,ae))ee[be]=ae,ee[he]=ce,he=be;else break e}}function r(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ae=ee[0],he=ee.pop();if(he!==ae){ee[0]=he;e:for(var be=0,ce=ee.length,Ae=ce>>>1;be<Ae;){var Pe=2*(be+1)-1,Me=ee[Pe],Ye=Pe+1,Ge=ee[Ye];if(0>s(Me,he))Ye<ce&&0>s(Ge,Me)?(ee[be]=Ge,ee[Ye]=he,be=Ye):(ee[be]=Me,ee[Pe]=he,be=Pe);else if(Ye<ce&&0>s(Ge,he))ee[be]=Ge,ee[Ye]=he,be=Ye;else break e}}return ae}function s(ee,ae){var he=ee.sortIndex-ae.sortIndex;return he!==0?he:ee.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],c=[],f=1,h=null,m=3,v=!1,w=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ee){for(var ae=r(c);ae!==null;){if(ae.callback===null)i(c);else if(ae.startTime<=ee)i(c),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=r(c)}}function O(ee){if(T=!1,N(ee),!w)if(r(u)!==null)w=!0,Z(L);else{var ae=r(c);ae!==null&&de(O,ae.startTime-ee)}}function L(ee,ae){w=!1,T&&(T=!1,b(R),R=-1),v=!0;var he=m;try{for(N(ae),h=r(u);h!==null&&(!(h.expirationTime>ae)||ee&&!F());){var be=h.callback;if(typeof be=="function"){h.callback=null,m=h.priorityLevel;var ce=be(h.expirationTime<=ae);ae=n.unstable_now(),typeof ce=="function"?h.callback=ce:h===r(u)&&i(u),N(ae)}else i(u);h=r(u)}if(h!==null)var Ae=!0;else{var Pe=r(c);Pe!==null&&de(O,Pe.startTime-ae),Ae=!1}return Ae}finally{h=null,m=he,v=!1}}var U=!1,A=null,R=-1,D=5,M=-1;function F(){return!(n.unstable_now()-M<D)}function $(){if(A!==null){var ee=n.unstable_now();M=ee;var ae=!0;try{ae=A(!0,ee)}finally{ae?j():(U=!1,A=null)}}else U=!1}var j;if(typeof I=="function")j=function(){I($)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,G=q.port2;q.port1.onmessage=$,j=function(){G.postMessage(null)}}else j=function(){C($,0)};function Z(ee){A=ee,U||(U=!0,j())}function de(ee,ae){R=C(function(){ee(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,Z(L))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(ee){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var he=m;m=ae;try{return ee()}finally{m=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=m;m=ee;try{return ae()}finally{m=he}},n.unstable_scheduleCallback=function(ee,ae,he){var be=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?be+he:be):he=be,ee){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=he+ce,ee={id:f++,callback:ae,priorityLevel:ee,startTime:he,expirationTime:ce,sortIndex:-1},he>be?(ee.sortIndex=he,e(c,ee),r(u)===null&&ee===r(c)&&(T?(b(R),R=-1):T=!0,de(O,he-be))):(ee.sortIndex=ce,e(u,ee),w||v||(w=!0,Z(L))),ee},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ee){var ae=m;return function(){var he=m;m=ae;try{return ee.apply(this,arguments)}finally{m=he}}}})(cE);uE.exports=cE;var EA=uE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA=ue,_r=EA;function ye(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hE=new Set,Cc={};function Ma(n,e){Bl(n,e),Bl(n+"Capture",e)}function Bl(n,e){for(Cc[n]=e,n=0;n<e.length;n++)hE.add(e[n])}var Is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ug=Object.prototype.hasOwnProperty,IA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S_={},C_={};function SA(n){return ug.call(C_,n)?!0:ug.call(S_,n)?!1:IA.test(n)?C_[n]=!0:(S_[n]=!0,!1)}function CA(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function kA(n,e,r,i){if(e===null||typeof e>"u"||CA(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gn(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){wn[n]=new Gn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];wn[e]=new Gn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){wn[n]=new Gn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){wn[n]=new Gn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){wn[n]=new Gn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){wn[n]=new Gn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){wn[n]=new Gn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){wn[n]=new Gn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){wn[n]=new Gn(n,5,!1,n.toLowerCase(),null,!1,!1)});var sv=/[\-:]([a-z])/g;function ov(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sv,ov);wn[e]=new Gn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sv,ov);wn[e]=new Gn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sv,ov);wn[e]=new Gn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){wn[n]=new Gn(n,1,!1,n.toLowerCase(),null,!1,!1)});wn.xlinkHref=new Gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){wn[n]=new Gn(n,1,!1,n.toLowerCase(),null,!0,!0)});function av(n,e,r,i){var s=wn.hasOwnProperty(e)?wn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kA(e,r,s,i)&&(r=null),i||s===null?SA(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var js=TA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hh=Symbol.for("react.element"),ml=Symbol.for("react.portal"),gl=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),cg=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),dE=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),hg=Symbol.for("react.suspense"),fg=Symbol.for("react.suspense_list"),cv=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),pE=Symbol.for("react.offscreen"),k_=Symbol.iterator;function Ou(n){return n===null||typeof n!="object"?null:(n=k_&&n[k_]||n["@@iterator"],typeof n=="function"?n:null)}var Ot=Object.assign,um;function Yu(n){if(um===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);um=e&&e[1]||""}return`
`+um+n}var cm=!1;function hm(n,e){if(!n||cm)return"";cm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{cm=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Yu(n):""}function AA(n){switch(n.tag){case 5:return Yu(n.type);case 16:return Yu("Lazy");case 13:return Yu("Suspense");case 19:return Yu("SuspenseList");case 0:case 2:case 15:return n=hm(n.type,!1),n;case 11:return n=hm(n.type.render,!1),n;case 1:return n=hm(n.type,!0),n;default:return""}}function dg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case gl:return"Fragment";case ml:return"Portal";case cg:return"Profiler";case lv:return"StrictMode";case hg:return"Suspense";case fg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dE:return(n.displayName||"Context")+".Consumer";case fE:return(n._context.displayName||"Context")+".Provider";case uv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cv:return e=n.displayName||null,e!==null?e:dg(n.type)||"Memo";case Xs:e=n._payload,n=n._init;try{return dg(n(e))}catch{}}return null}function NA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dg(e);case 8:return e===lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function To(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RA(n){var e=mE(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Kh(n){n._valueTracker||(n._valueTracker=RA(n))}function gE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=mE(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function Jf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function pg(n,e){var r=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function A_(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=To(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yE(n,e){e=e.checked,e!=null&&av(n,"checked",e,!1)}function mg(n,e){yE(n,e);var r=To(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?gg(n,e.type,r):e.hasOwnProperty("defaultValue")&&gg(n,e.type,To(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function N_(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function gg(n,e,r){(e!=="number"||Jf(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Xu=Array.isArray;function kl(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+To(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function yg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function R_(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ye(92));if(Xu(r)){if(1<r.length)throw Error(ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:To(r)}}function vE(n,e){var r=To(e.value),i=To(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function P_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _E(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_E(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gh,wE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Gh=Gh||document.createElement("div"),Gh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function kc(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var lc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PA=["Webkit","ms","Moz","O"];Object.keys(lc).forEach(function(n){PA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),lc[e]=lc[n]})});function xE(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||lc.hasOwnProperty(n)&&lc[n]?(""+e).trim():e+"px"}function bE(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=xE(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var OA=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _g(n,e){if(e){if(OA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function wg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xg=null;function hv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bg=null,Al=null,Nl=null;function O_(n){if(n=fh(n)){if(typeof bg!="function")throw Error(ye(280));var e=n.stateNode;e&&(e=lp(e),bg(n.stateNode,n.type,e))}}function EE(n){Al?Nl?Nl.push(n):Nl=[n]:Al=n}function TE(){if(Al){var n=Al,e=Nl;if(Nl=Al=null,O_(n),e)for(n=0;n<e.length;n++)O_(e[n])}}function IE(n,e){return n(e)}function SE(){}var fm=!1;function CE(n,e,r){if(fm)return n(e,r);fm=!0;try{return IE(n,e,r)}finally{fm=!1,(Al!==null||Nl!==null)&&(SE(),TE())}}function Ac(n,e){var r=n.stateNode;if(r===null)return null;var i=lp(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(ye(231,e,typeof r));return r}var Eg=!1;if(Is)try{var ju={};Object.defineProperty(ju,"passive",{get:function(){Eg=!0}}),window.addEventListener("test",ju,ju),window.removeEventListener("test",ju,ju)}catch{Eg=!1}function jA(n,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(f){this.onError(f)}}var uc=!1,Zf=null,ed=!1,Tg=null,DA={onError:function(n){uc=!0,Zf=n}};function MA(n,e,r,i,s,o,a,l,u){uc=!1,Zf=null,jA.apply(DA,arguments)}function LA(n,e,r,i,s,o,a,l,u){if(MA.apply(this,arguments),uc){if(uc){var c=Zf;uc=!1,Zf=null}else throw Error(ye(198));ed||(ed=!0,Tg=c)}}function La(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function kE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function j_(n){if(La(n)!==n)throw Error(ye(188))}function VA(n){var e=n.alternate;if(!e){if(e=La(n),e===null)throw Error(ye(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return j_(s),n;if(o===i)return j_(s),e;o=o.sibling}throw Error(ye(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(ye(189))}}if(r.alternate!==i)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?n:e}function AE(n){return n=VA(n),n!==null?NE(n):null}function NE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=NE(n);if(e!==null)return e;n=n.sibling}return null}var RE=_r.unstable_scheduleCallback,D_=_r.unstable_cancelCallback,FA=_r.unstable_shouldYield,UA=_r.unstable_requestPaint,qt=_r.unstable_now,zA=_r.unstable_getCurrentPriorityLevel,fv=_r.unstable_ImmediatePriority,PE=_r.unstable_UserBlockingPriority,td=_r.unstable_NormalPriority,$A=_r.unstable_LowPriority,OE=_r.unstable_IdlePriority,ip=null,zi=null;function BA(n){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(ip,n,void 0,(n.current.flags&128)===128)}catch{}}var hi=Math.clz32?Math.clz32:KA,qA=Math.log,HA=Math.LN2;function KA(n){return n>>>=0,n===0?32:31-(qA(n)/HA|0)|0}var Wh=64,Qh=4194304;function Ju(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function nd(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Ju(l):(o&=a,o!==0&&(i=Ju(o)))}else a=r&~s,a!==0?i=Ju(a):o!==0&&(i=Ju(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-hi(e),s=1<<r,i|=n[r],e&=~s;return i}function GA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WA(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-hi(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=GA(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function Ig(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function jE(){var n=Wh;return Wh<<=1,!(Wh&4194240)&&(Wh=64),n}function dm(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function ch(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-hi(e),n[e]=r}function QA(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-hi(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function dv(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-hi(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var dt=0;function DE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ME,pv,LE,VE,FE,Sg=!1,Yh=[],co=null,ho=null,fo=null,Nc=new Map,Rc=new Map,to=[],YA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M_(n,e){switch(n){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(e.pointerId)}}function Du(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=fh(e),e!==null&&pv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function XA(n,e,r,i,s){switch(e){case"focusin":return co=Du(co,n,e,r,i,s),!0;case"dragenter":return ho=Du(ho,n,e,r,i,s),!0;case"mouseover":return fo=Du(fo,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return Nc.set(o,Du(Nc.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Rc.set(o,Du(Rc.get(o)||null,n,e,r,i,s)),!0}return!1}function UE(n){var e=ua(n.target);if(e!==null){var r=La(e);if(r!==null){if(e=r.tag,e===13){if(e=kE(r),e!==null){n.blockedOn=e,FE(n.priority,function(){LE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ef(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=Cg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);xg=i,r.target.dispatchEvent(i),xg=null}else return e=fh(r),e!==null&&pv(e),n.blockedOn=r,!1;e.shift()}return!0}function L_(n,e,r){Ef(n)&&r.delete(e)}function JA(){Sg=!1,co!==null&&Ef(co)&&(co=null),ho!==null&&Ef(ho)&&(ho=null),fo!==null&&Ef(fo)&&(fo=null),Nc.forEach(L_),Rc.forEach(L_)}function Mu(n,e){n.blockedOn===e&&(n.blockedOn=null,Sg||(Sg=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,JA)))}function Pc(n){function e(s){return Mu(s,n)}if(0<Yh.length){Mu(Yh[0],n);for(var r=1;r<Yh.length;r++){var i=Yh[r];i.blockedOn===n&&(i.blockedOn=null)}}for(co!==null&&Mu(co,n),ho!==null&&Mu(ho,n),fo!==null&&Mu(fo,n),Nc.forEach(e),Rc.forEach(e),r=0;r<to.length;r++)i=to[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<to.length&&(r=to[0],r.blockedOn===null);)UE(r),r.blockedOn===null&&to.shift()}var Rl=js.ReactCurrentBatchConfig,rd=!0;function ZA(n,e,r,i){var s=dt,o=Rl.transition;Rl.transition=null;try{dt=1,mv(n,e,r,i)}finally{dt=s,Rl.transition=o}}function eN(n,e,r,i){var s=dt,o=Rl.transition;Rl.transition=null;try{dt=4,mv(n,e,r,i)}finally{dt=s,Rl.transition=o}}function mv(n,e,r,i){if(rd){var s=Cg(n,e,r,i);if(s===null)Em(n,e,i,id,r),M_(n,i);else if(XA(s,n,e,r,i))i.stopPropagation();else if(M_(n,i),e&4&&-1<YA.indexOf(n)){for(;s!==null;){var o=fh(s);if(o!==null&&ME(o),o=Cg(n,e,r,i),o===null&&Em(n,e,i,id,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else Em(n,e,i,null,r)}}var id=null;function Cg(n,e,r,i){if(id=null,n=hv(i),n=ua(n),n!==null)if(e=La(n),e===null)n=null;else if(r=e.tag,r===13){if(n=kE(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return id=n,null}function zE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zA()){case fv:return 1;case PE:return 4;case td:case $A:return 16;case OE:return 536870912;default:return 16}default:return 16}}var oo=null,gv=null,Tf=null;function $E(){if(Tf)return Tf;var n,e=gv,r=e.length,i,s="value"in oo?oo.value:oo.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return Tf=s.slice(n,1<i?1-i:void 0)}function If(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Xh(){return!0}function V_(){return!1}function br(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xh:V_,this.isPropagationStopped=V_,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xh)},persist:function(){},isPersistent:Xh}),e}var uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yv=br(uu),hh=Ot({},uu,{view:0,detail:0}),tN=br(hh),pm,mm,Lu,sp=Ot({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lu&&(Lu&&n.type==="mousemove"?(pm=n.screenX-Lu.screenX,mm=n.screenY-Lu.screenY):mm=pm=0,Lu=n),pm)},movementY:function(n){return"movementY"in n?n.movementY:mm}}),F_=br(sp),nN=Ot({},sp,{dataTransfer:0}),rN=br(nN),iN=Ot({},hh,{relatedTarget:0}),gm=br(iN),sN=Ot({},uu,{animationName:0,elapsedTime:0,pseudoElement:0}),oN=br(sN),aN=Ot({},uu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lN=br(aN),uN=Ot({},uu,{data:0}),U_=br(uN),cN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=fN[n])?!!e[n]:!1}function vv(){return dN}var pN=Ot({},hh,{key:function(n){if(n.key){var e=cN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=If(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(n){return n.type==="keypress"?If(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?If(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mN=br(pN),gN=Ot({},sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z_=br(gN),yN=Ot({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),vN=br(yN),_N=Ot({},uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),wN=br(_N),xN=Ot({},sp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bN=br(xN),EN=[9,13,27,32],_v=Is&&"CompositionEvent"in window,cc=null;Is&&"documentMode"in document&&(cc=document.documentMode);var TN=Is&&"TextEvent"in window&&!cc,BE=Is&&(!_v||cc&&8<cc&&11>=cc),$_=" ",B_=!1;function qE(n,e){switch(n){case"keyup":return EN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var yl=!1;function IN(n,e){switch(n){case"compositionend":return HE(e);case"keypress":return e.which!==32?null:(B_=!0,$_);case"textInput":return n=e.data,n===$_&&B_?null:n;default:return null}}function SN(n,e){if(yl)return n==="compositionend"||!_v&&qE(n,e)?(n=$E(),Tf=gv=oo=null,yl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var CN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CN[n.type]:e==="textarea"}function KE(n,e,r,i){EE(i),e=sd(e,"onChange"),0<e.length&&(r=new yv("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var hc=null,Oc=null;function kN(n){rT(n,0)}function op(n){var e=wl(n);if(gE(e))return n}function AN(n,e){if(n==="change")return e}var GE=!1;if(Is){var ym;if(Is){var vm="oninput"in document;if(!vm){var H_=document.createElement("div");H_.setAttribute("oninput","return;"),vm=typeof H_.oninput=="function"}ym=vm}else ym=!1;GE=ym&&(!document.documentMode||9<document.documentMode)}function K_(){hc&&(hc.detachEvent("onpropertychange",WE),Oc=hc=null)}function WE(n){if(n.propertyName==="value"&&op(Oc)){var e=[];KE(e,Oc,n,hv(n)),CE(kN,e)}}function NN(n,e,r){n==="focusin"?(K_(),hc=e,Oc=r,hc.attachEvent("onpropertychange",WE)):n==="focusout"&&K_()}function RN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return op(Oc)}function PN(n,e){if(n==="click")return op(e)}function ON(n,e){if(n==="input"||n==="change")return op(e)}function jN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var mi=typeof Object.is=="function"?Object.is:jN;function jc(n,e){if(mi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!ug.call(e,s)||!mi(n[s],e[s]))return!1}return!0}function G_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function W_(n,e){var r=G_(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=G_(r)}}function QE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?QE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function YE(){for(var n=window,e=Jf();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=Jf(n.document)}return e}function wv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function DN(n){var e=YE(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&QE(r.ownerDocument.documentElement,r)){if(i!==null&&wv(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=W_(r,o);var a=W_(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var MN=Is&&"documentMode"in document&&11>=document.documentMode,vl=null,kg=null,fc=null,Ag=!1;function Q_(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ag||vl==null||vl!==Jf(i)||(i=vl,"selectionStart"in i&&wv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fc&&jc(fc,i)||(fc=i,i=sd(kg,"onSelect"),0<i.length&&(e=new yv("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=vl)))}function Jh(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var _l={animationend:Jh("Animation","AnimationEnd"),animationiteration:Jh("Animation","AnimationIteration"),animationstart:Jh("Animation","AnimationStart"),transitionend:Jh("Transition","TransitionEnd")},_m={},XE={};Is&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function ap(n){if(_m[n])return _m[n];if(!_l[n])return n;var e=_l[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in XE)return _m[n]=e[r];return n}var JE=ap("animationend"),ZE=ap("animationiteration"),eT=ap("animationstart"),tT=ap("transitionend"),nT=new Map,Y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(n,e){nT.set(n,e),Ma(e,[n])}for(var wm=0;wm<Y_.length;wm++){var xm=Y_[wm],LN=xm.toLowerCase(),VN=xm[0].toUpperCase()+xm.slice(1);jo(LN,"on"+VN)}jo(JE,"onAnimationEnd");jo(ZE,"onAnimationIteration");jo(eT,"onAnimationStart");jo("dblclick","onDoubleClick");jo("focusin","onFocus");jo("focusout","onBlur");jo(tT,"onTransitionEnd");Bl("onMouseEnter",["mouseout","mouseover"]);Bl("onMouseLeave",["mouseout","mouseover"]);Bl("onPointerEnter",["pointerout","pointerover"]);Bl("onPointerLeave",["pointerout","pointerover"]);Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zu));function X_(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,LA(i,e,void 0,n),n.currentTarget=null}function rT(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;X_(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;X_(s,l,c),o=u}}}if(ed)throw n=Tg,ed=!1,Tg=null,n}function Et(n,e){var r=e[jg];r===void 0&&(r=e[jg]=new Set);var i=n+"__bubble";r.has(i)||(iT(e,n,2,!1),r.add(i))}function bm(n,e,r){var i=0;e&&(i|=4),iT(r,n,i,e)}var Zh="_reactListening"+Math.random().toString(36).slice(2);function Dc(n){if(!n[Zh]){n[Zh]=!0,hE.forEach(function(r){r!=="selectionchange"&&(FN.has(r)||bm(r,!1,n),bm(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Zh]||(e[Zh]=!0,bm("selectionchange",!1,e))}}function iT(n,e,r,i){switch(zE(e)){case 1:var s=ZA;break;case 4:s=eN;break;default:s=mv}r=s.bind(null,e,r,n),s=void 0,!Eg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function Em(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ua(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}CE(function(){var c=o,f=hv(r),h=[];e:{var m=nT.get(n);if(m!==void 0){var v=yv,w=n;switch(n){case"keypress":if(If(r)===0)break e;case"keydown":case"keyup":v=mN;break;case"focusin":w="focus",v=gm;break;case"focusout":w="blur",v=gm;break;case"beforeblur":case"afterblur":v=gm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=F_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=rN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=vN;break;case JE:case ZE:case eT:v=oN;break;case tT:v=wN;break;case"scroll":v=tN;break;case"wheel":v=bN;break;case"copy":case"cut":case"paste":v=lN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=z_}var T=(e&4)!==0,C=!T&&n==="scroll",b=T?m!==null?m+"Capture":null:m;T=[];for(var I=c,N;I!==null;){N=I;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,b!==null&&(O=Ac(I,b),O!=null&&T.push(Mc(I,O,N)))),C)break;I=I.return}0<T.length&&(m=new v(m,w,null,r,f),h.push({event:m,listeners:T}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&r!==xg&&(w=r.relatedTarget||r.fromElement)&&(ua(w)||w[Ss]))break e;if((v||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=c,w=w?ua(w):null,w!==null&&(C=La(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(T=F_,O="onMouseLeave",b="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(T=z_,O="onPointerLeave",b="onPointerEnter",I="pointer"),C=v==null?m:wl(v),N=w==null?m:wl(w),m=new T(O,I+"leave",v,r,f),m.target=C,m.relatedTarget=N,O=null,ua(f)===c&&(T=new T(b,I+"enter",w,r,f),T.target=N,T.relatedTarget=C,O=T),C=O,v&&w)t:{for(T=v,b=w,I=0,N=T;N;N=al(N))I++;for(N=0,O=b;O;O=al(O))N++;for(;0<I-N;)T=al(T),I--;for(;0<N-I;)b=al(b),N--;for(;I--;){if(T===b||b!==null&&T===b.alternate)break t;T=al(T),b=al(b)}T=null}else T=null;v!==null&&J_(h,m,v,T,!1),w!==null&&C!==null&&J_(h,C,w,T,!0)}}e:{if(m=c?wl(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=AN;else if(q_(m))if(GE)L=ON;else{L=RN;var U=NN}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=PN);if(L&&(L=L(n,c))){KE(h,L,r,f);break e}U&&U(n,m,c),n==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&gg(m,"number",m.value)}switch(U=c?wl(c):window,n){case"focusin":(q_(U)||U.contentEditable==="true")&&(vl=U,kg=c,fc=null);break;case"focusout":fc=kg=vl=null;break;case"mousedown":Ag=!0;break;case"contextmenu":case"mouseup":case"dragend":Ag=!1,Q_(h,r,f);break;case"selectionchange":if(MN)break;case"keydown":case"keyup":Q_(h,r,f)}var A;if(_v)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else yl?qE(n,r)&&(R="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(BE&&r.locale!=="ko"&&(yl||R!=="onCompositionStart"?R==="onCompositionEnd"&&yl&&(A=$E()):(oo=f,gv="value"in oo?oo.value:oo.textContent,yl=!0)),U=sd(c,R),0<U.length&&(R=new U_(R,n,null,r,f),h.push({event:R,listeners:U}),A?R.data=A:(A=HE(r),A!==null&&(R.data=A)))),(A=TN?IN(n,r):SN(n,r))&&(c=sd(c,"onBeforeInput"),0<c.length&&(f=new U_("onBeforeInput","beforeinput",null,r,f),h.push({event:f,listeners:c}),f.data=A))}rT(h,e)})}function Mc(n,e,r){return{instance:n,listener:e,currentTarget:r}}function sd(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ac(n,r),o!=null&&i.unshift(Mc(n,o,s)),o=Ac(n,e),o!=null&&i.push(Mc(n,o,s))),n=n.return}return i}function al(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function J_(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=Ac(r,o),u!=null&&a.unshift(Mc(r,u,l))):s||(u=Ac(r,o),u!=null&&a.push(Mc(r,u,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var UN=/\r\n?/g,zN=/\u0000|\uFFFD/g;function Z_(n){return(typeof n=="string"?n:""+n).replace(UN,`
`).replace(zN,"")}function ef(n,e,r){if(e=Z_(e),Z_(n)!==e&&r)throw Error(ye(425))}function od(){}var Ng=null,Rg=null;function Pg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,$N=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(n){return ew.resolve(null).then(n).catch(qN)}:Og;function qN(n){setTimeout(function(){throw n})}function Tm(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),Pc(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Pc(e)}function po(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function tw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var cu=Math.random().toString(36).slice(2),Fi="__reactFiber$"+cu,Lc="__reactProps$"+cu,Ss="__reactContainer$"+cu,jg="__reactEvents$"+cu,HN="__reactListeners$"+cu,KN="__reactHandles$"+cu;function ua(n){var e=n[Fi];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Ss]||r[Fi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=tw(n);n!==null;){if(r=n[Fi])return r;n=tw(n)}return e}n=r,r=n.parentNode}return null}function fh(n){return n=n[Fi]||n[Ss],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ye(33))}function lp(n){return n[Lc]||null}var Dg=[],xl=-1;function Do(n){return{current:n}}function St(n){0>xl||(n.current=Dg[xl],Dg[xl]=null,xl--)}function bt(n,e){xl++,Dg[xl]=n.current,n.current=e}var Io={},Dn=Do(Io),nr=Do(!1),Ea=Io;function ql(n,e){var r=n.type.contextTypes;if(!r)return Io;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function rr(n){return n=n.childContextTypes,n!=null}function ad(){St(nr),St(Dn)}function nw(n,e,r){if(Dn.current!==Io)throw Error(ye(168));bt(Dn,e),bt(nr,r)}function sT(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ye(108,NA(n)||"Unknown",s));return Ot({},r,i)}function ld(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Io,Ea=Dn.current,bt(Dn,n),bt(nr,nr.current),!0}function rw(n,e,r){var i=n.stateNode;if(!i)throw Error(ye(169));r?(n=sT(n,e,Ea),i.__reactInternalMemoizedMergedChildContext=n,St(nr),St(Dn),bt(Dn,n)):St(nr),bt(nr,r)}var ds=null,up=!1,Im=!1;function oT(n){ds===null?ds=[n]:ds.push(n)}function GN(n){up=!0,oT(n)}function Mo(){if(!Im&&ds!==null){Im=!0;var n=0,e=dt;try{var r=ds;for(dt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}ds=null,up=!1}catch(s){throw ds!==null&&(ds=ds.slice(n+1)),RE(fv,Mo),s}finally{dt=e,Im=!1}}return null}var bl=[],El=0,ud=null,cd=0,Pr=[],Or=0,Ta=null,gs=1,ys="";function ia(n,e){bl[El++]=cd,bl[El++]=ud,ud=n,cd=e}function aT(n,e,r){Pr[Or++]=gs,Pr[Or++]=ys,Pr[Or++]=Ta,Ta=n;var i=gs;n=ys;var s=32-hi(i)-1;i&=~(1<<s),r+=1;var o=32-hi(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,gs=1<<32-hi(e)+s|r<<s|i,ys=o+n}else gs=1<<o|r<<s|i,ys=n}function xv(n){n.return!==null&&(ia(n,1),aT(n,1,0))}function bv(n){for(;n===ud;)ud=bl[--El],bl[El]=null,cd=bl[--El],bl[El]=null;for(;n===Ta;)Ta=Pr[--Or],Pr[Or]=null,ys=Pr[--Or],Pr[Or]=null,gs=Pr[--Or],Pr[Or]=null}var yr=null,mr=null,kt=!1,oi=null;function lT(n,e){var r=Lr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function iw(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,yr=n,mr=po(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,yr=n,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ta!==null?{id:gs,overflow:ys}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Lr(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,yr=n,mr=null,!0):!1;default:return!1}}function Mg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Lg(n){if(kt){var e=mr;if(e){var r=e;if(!iw(n,e)){if(Mg(n))throw Error(ye(418));e=po(r.nextSibling);var i=yr;e&&iw(n,e)?lT(i,r):(n.flags=n.flags&-4097|2,kt=!1,yr=n)}}else{if(Mg(n))throw Error(ye(418));n.flags=n.flags&-4097|2,kt=!1,yr=n}}}function sw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yr=n}function tf(n){if(n!==yr)return!1;if(!kt)return sw(n),kt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Pg(n.type,n.memoizedProps)),e&&(e=mr)){if(Mg(n))throw uT(),Error(ye(418));for(;e;)lT(n,e),e=po(e.nextSibling)}if(sw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ye(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){mr=po(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}mr=null}}else mr=yr?po(n.stateNode.nextSibling):null;return!0}function uT(){for(var n=mr;n;)n=po(n.nextSibling)}function Hl(){mr=yr=null,kt=!1}function Ev(n){oi===null?oi=[n]:oi.push(n)}var WN=js.ReactCurrentBatchConfig;function Vu(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var i=r.stateNode}if(!i)throw Error(ye(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,n))}return n}function nf(n,e){throw n=Object.prototype.toString.call(e),Error(ye(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ow(n){var e=n._init;return e(n._payload)}function cT(n){function e(b,I){if(n){var N=b.deletions;N===null?(b.deletions=[I],b.flags|=16):N.push(I)}}function r(b,I){if(!n)return null;for(;I!==null;)e(b,I),I=I.sibling;return null}function i(b,I){for(b=new Map;I!==null;)I.key!==null?b.set(I.key,I):b.set(I.index,I),I=I.sibling;return b}function s(b,I){return b=vo(b,I),b.index=0,b.sibling=null,b}function o(b,I,N){return b.index=N,n?(N=b.alternate,N!==null?(N=N.index,N<I?(b.flags|=2,I):N):(b.flags|=2,I)):(b.flags|=1048576,I)}function a(b){return n&&b.alternate===null&&(b.flags|=2),b}function l(b,I,N,O){return I===null||I.tag!==6?(I=Pm(N,b.mode,O),I.return=b,I):(I=s(I,N),I.return=b,I)}function u(b,I,N,O){var L=N.type;return L===gl?f(b,I,N.props.children,O,N.key):I!==null&&(I.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xs&&ow(L)===I.type)?(O=s(I,N.props),O.ref=Vu(b,I,N),O.return=b,O):(O=Pf(N.type,N.key,N.props,null,b.mode,O),O.ref=Vu(b,I,N),O.return=b,O)}function c(b,I,N,O){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=Om(N,b.mode,O),I.return=b,I):(I=s(I,N.children||[]),I.return=b,I)}function f(b,I,N,O,L){return I===null||I.tag!==7?(I=ya(N,b.mode,O,L),I.return=b,I):(I=s(I,N),I.return=b,I)}function h(b,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Pm(""+I,b.mode,N),I.return=b,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Hh:return N=Pf(I.type,I.key,I.props,null,b.mode,N),N.ref=Vu(b,null,I),N.return=b,N;case ml:return I=Om(I,b.mode,N),I.return=b,I;case Xs:var O=I._init;return h(b,O(I._payload),N)}if(Xu(I)||Ou(I))return I=ya(I,b.mode,N,null),I.return=b,I;nf(b,I)}return null}function m(b,I,N,O){var L=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:l(b,I,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Hh:return N.key===L?u(b,I,N,O):null;case ml:return N.key===L?c(b,I,N,O):null;case Xs:return L=N._init,m(b,I,L(N._payload),O)}if(Xu(N)||Ou(N))return L!==null?null:f(b,I,N,O,null);nf(b,N)}return null}function v(b,I,N,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(N)||null,l(I,b,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Hh:return b=b.get(O.key===null?N:O.key)||null,u(I,b,O,L);case ml:return b=b.get(O.key===null?N:O.key)||null,c(I,b,O,L);case Xs:var U=O._init;return v(b,I,N,U(O._payload),L)}if(Xu(O)||Ou(O))return b=b.get(N)||null,f(I,b,O,L,null);nf(I,O)}return null}function w(b,I,N,O){for(var L=null,U=null,A=I,R=I=0,D=null;A!==null&&R<N.length;R++){A.index>R?(D=A,A=null):D=A.sibling;var M=m(b,A,N[R],O);if(M===null){A===null&&(A=D);break}n&&A&&M.alternate===null&&e(b,A),I=o(M,I,R),U===null?L=M:U.sibling=M,U=M,A=D}if(R===N.length)return r(b,A),kt&&ia(b,R),L;if(A===null){for(;R<N.length;R++)A=h(b,N[R],O),A!==null&&(I=o(A,I,R),U===null?L=A:U.sibling=A,U=A);return kt&&ia(b,R),L}for(A=i(b,A);R<N.length;R++)D=v(A,b,R,N[R],O),D!==null&&(n&&D.alternate!==null&&A.delete(D.key===null?R:D.key),I=o(D,I,R),U===null?L=D:U.sibling=D,U=D);return n&&A.forEach(function(F){return e(b,F)}),kt&&ia(b,R),L}function T(b,I,N,O){var L=Ou(N);if(typeof L!="function")throw Error(ye(150));if(N=L.call(N),N==null)throw Error(ye(151));for(var U=L=null,A=I,R=I=0,D=null,M=N.next();A!==null&&!M.done;R++,M=N.next()){A.index>R?(D=A,A=null):D=A.sibling;var F=m(b,A,M.value,O);if(F===null){A===null&&(A=D);break}n&&A&&F.alternate===null&&e(b,A),I=o(F,I,R),U===null?L=F:U.sibling=F,U=F,A=D}if(M.done)return r(b,A),kt&&ia(b,R),L;if(A===null){for(;!M.done;R++,M=N.next())M=h(b,M.value,O),M!==null&&(I=o(M,I,R),U===null?L=M:U.sibling=M,U=M);return kt&&ia(b,R),L}for(A=i(b,A);!M.done;R++,M=N.next())M=v(A,b,R,M.value,O),M!==null&&(n&&M.alternate!==null&&A.delete(M.key===null?R:M.key),I=o(M,I,R),U===null?L=M:U.sibling=M,U=M);return n&&A.forEach(function($){return e(b,$)}),kt&&ia(b,R),L}function C(b,I,N,O){if(typeof N=="object"&&N!==null&&N.type===gl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Hh:e:{for(var L=N.key,U=I;U!==null;){if(U.key===L){if(L=N.type,L===gl){if(U.tag===7){r(b,U.sibling),I=s(U,N.props.children),I.return=b,b=I;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xs&&ow(L)===U.type){r(b,U.sibling),I=s(U,N.props),I.ref=Vu(b,U,N),I.return=b,b=I;break e}r(b,U);break}else e(b,U);U=U.sibling}N.type===gl?(I=ya(N.props.children,b.mode,O,N.key),I.return=b,b=I):(O=Pf(N.type,N.key,N.props,null,b.mode,O),O.ref=Vu(b,I,N),O.return=b,b=O)}return a(b);case ml:e:{for(U=N.key;I!==null;){if(I.key===U)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){r(b,I.sibling),I=s(I,N.children||[]),I.return=b,b=I;break e}else{r(b,I);break}else e(b,I);I=I.sibling}I=Om(N,b.mode,O),I.return=b,b=I}return a(b);case Xs:return U=N._init,C(b,I,U(N._payload),O)}if(Xu(N))return w(b,I,N,O);if(Ou(N))return T(b,I,N,O);nf(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(r(b,I.sibling),I=s(I,N),I.return=b,b=I):(r(b,I),I=Pm(N,b.mode,O),I.return=b,b=I),a(b)):r(b,I)}return C}var Kl=cT(!0),hT=cT(!1),hd=Do(null),fd=null,Tl=null,Tv=null;function Iv(){Tv=Tl=fd=null}function Sv(n){var e=hd.current;St(hd),n._currentValue=e}function Vg(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Pl(n,e){fd=n,Tv=Tl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(er=!0),n.firstContext=null)}function zr(n){var e=n._currentValue;if(Tv!==n)if(n={context:n,memoizedValue:e,next:null},Tl===null){if(fd===null)throw Error(ye(308));Tl=n,fd.dependencies={lanes:0,firstContext:n}}else Tl=Tl.next=n;return e}var ca=null;function Cv(n){ca===null?ca=[n]:ca.push(n)}function fT(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Cv(e)):(r.next=s.next,s.next=r),e.interleaved=r,Cs(n,i)}function Cs(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var Js=!1;function kv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function bs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function mo(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,lt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Cs(n,r)}return s=i.interleaved,s===null?(e.next=e,Cv(i)):(e.next=s.next,s.next=e),i.interleaved=e,Cs(n,r)}function Sf(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,dv(n,r)}}function aw(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function dd(n,e,r,i){var s=n.updateQueue;Js=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var f=n.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(o!==null){var h=s.baseState;a=0,f=c=u=null,l=o;do{var m=l.lane,v=l.eventTime;if((i&m)===m){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=n,T=l;switch(m=e,v=r,T.tag){case 1:if(w=T.payload,typeof w=="function"){h=w.call(v,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=T.payload,m=typeof w=="function"?w.call(v,h,m):w,m==null)break e;h=Ot({},h,m);break e;case 2:Js=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,u=h):f=f.next=v,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Sa|=a,n.lanes=a,n.memoizedState=h}}function lw(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ye(191,s));s.call(i)}}}var dh={},$i=Do(dh),Vc=Do(dh),Fc=Do(dh);function ha(n){if(n===dh)throw Error(ye(174));return n}function Av(n,e){switch(bt(Fc,e),bt(Vc,n),bt($i,dh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=vg(e,n)}St($i),bt($i,e)}function Gl(){St($i),St(Vc),St(Fc)}function pT(n){ha(Fc.current);var e=ha($i.current),r=vg(e,n.type);e!==r&&(bt(Vc,n),bt($i,r))}function Nv(n){Vc.current===n&&(St($i),St(Vc))}var Rt=Do(0);function pd(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sm=[];function Rv(){for(var n=0;n<Sm.length;n++)Sm[n]._workInProgressVersionPrimary=null;Sm.length=0}var Cf=js.ReactCurrentDispatcher,Cm=js.ReactCurrentBatchConfig,Ia=0,Pt=null,nn=null,fn=null,md=!1,dc=!1,Uc=0,QN=0;function Cn(){throw Error(ye(321))}function Pv(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!mi(n[r],e[r]))return!1;return!0}function Ov(n,e,r,i,s,o){if(Ia=o,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cf.current=n===null||n.memoizedState===null?ZN:eR,n=r(i,s),dc){o=0;do{if(dc=!1,Uc=0,25<=o)throw Error(ye(301));o+=1,fn=nn=null,e.updateQueue=null,Cf.current=tR,n=r(i,s)}while(dc)}if(Cf.current=gd,e=nn!==null&&nn.next!==null,Ia=0,fn=nn=Pt=null,md=!1,e)throw Error(ye(300));return n}function jv(){var n=Uc!==0;return Uc=0,n}function Di(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Pt.memoizedState=fn=n:fn=fn.next=n,fn}function $r(){if(nn===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=nn.next;var e=fn===null?Pt.memoizedState:fn.next;if(e!==null)fn=e,nn=n;else{if(n===null)throw Error(ye(310));nn=n,n={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},fn===null?Pt.memoizedState=fn=n:fn=fn.next=n}return fn}function zc(n,e){return typeof e=="function"?e(n):e}function km(n){var e=$r(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=n;var i=nn,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var f=c.lane;if((Ia&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,a=i):u=u.next=h,Pt.lanes|=f,Sa|=f}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,mi(i,e.memoizedState)||(er=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Pt.lanes|=o,Sa|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Am(n){var e=$r(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);mi(o,e.memoizedState)||(er=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function mT(){}function gT(n,e){var r=Pt,i=$r(),s=e(),o=!mi(i.memoizedState,s);if(o&&(i.memoizedState=s,er=!0),i=i.queue,Dv(_T.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||fn!==null&&fn.memoizedState.tag&1){if(r.flags|=2048,$c(9,vT.bind(null,r,i,s,e),void 0,null),dn===null)throw Error(ye(349));Ia&30||yT(r,e,s)}return s}function yT(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function vT(n,e,r,i){e.value=r,e.getSnapshot=i,wT(e)&&xT(n)}function _T(n,e,r){return r(function(){wT(e)&&xT(n)})}function wT(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!mi(n,r)}catch{return!0}}function xT(n){var e=Cs(n,1);e!==null&&fi(e,n,1,-1)}function uw(n){var e=Di();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:n},e.queue=n,n=n.dispatch=JN.bind(null,Pt,n),[e.memoizedState,n]}function $c(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function bT(){return $r().memoizedState}function kf(n,e,r,i){var s=Di();Pt.flags|=n,s.memoizedState=$c(1|e,r,void 0,i===void 0?null:i)}function cp(n,e,r,i){var s=$r();i=i===void 0?null:i;var o=void 0;if(nn!==null){var a=nn.memoizedState;if(o=a.destroy,i!==null&&Pv(i,a.deps)){s.memoizedState=$c(e,r,o,i);return}}Pt.flags|=n,s.memoizedState=$c(1|e,r,o,i)}function cw(n,e){return kf(8390656,8,n,e)}function Dv(n,e){return cp(2048,8,n,e)}function ET(n,e){return cp(4,2,n,e)}function TT(n,e){return cp(4,4,n,e)}function IT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ST(n,e,r){return r=r!=null?r.concat([n]):null,cp(4,4,IT.bind(null,e,n),r)}function Mv(){}function CT(n,e){var r=$r();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Pv(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function kT(n,e){var r=$r();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Pv(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function AT(n,e,r){return Ia&21?(mi(r,e)||(r=jE(),Pt.lanes|=r,Sa|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=r)}function YN(n,e){var r=dt;dt=r!==0&&4>r?r:4,n(!0);var i=Cm.transition;Cm.transition={};try{n(!1),e()}finally{dt=r,Cm.transition=i}}function NT(){return $r().memoizedState}function XN(n,e,r){var i=yo(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},RT(n))PT(e,r);else if(r=fT(n,e,r,i),r!==null){var s=qn();fi(r,n,i,s),OT(r,e,i)}}function JN(n,e,r){var i=yo(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(RT(n))PT(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,mi(l,a)){var u=e.interleaved;u===null?(s.next=s,Cv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=fT(n,e,s,i),r!==null&&(s=qn(),fi(r,n,i,s),OT(r,e,i))}}function RT(n){var e=n.alternate;return n===Pt||e!==null&&e===Pt}function PT(n,e){dc=md=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function OT(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,dv(n,r)}}var gd={readContext:zr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},ZN={readContext:zr,useCallback:function(n,e){return Di().memoizedState=[n,e===void 0?null:e],n},useContext:zr,useEffect:cw,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,kf(4194308,4,IT.bind(null,e,n),r)},useLayoutEffect:function(n,e){return kf(4194308,4,n,e)},useInsertionEffect:function(n,e){return kf(4,2,n,e)},useMemo:function(n,e){var r=Di();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Di();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=XN.bind(null,Pt,n),[i.memoizedState,n]},useRef:function(n){var e=Di();return n={current:n},e.memoizedState=n},useState:uw,useDebugValue:Mv,useDeferredValue:function(n){return Di().memoizedState=n},useTransition:function(){var n=uw(!1),e=n[0];return n=YN.bind(null,n[1]),Di().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Pt,s=Di();if(kt){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=e(),dn===null)throw Error(ye(349));Ia&30||yT(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,cw(_T.bind(null,i,o,n),[n]),i.flags|=2048,$c(9,vT.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=Di(),e=dn.identifierPrefix;if(kt){var r=ys,i=gs;r=(i&~(1<<32-hi(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Uc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=QN++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},eR={readContext:zr,useCallback:CT,useContext:zr,useEffect:Dv,useImperativeHandle:ST,useInsertionEffect:ET,useLayoutEffect:TT,useMemo:kT,useReducer:km,useRef:bT,useState:function(){return km(zc)},useDebugValue:Mv,useDeferredValue:function(n){var e=$r();return AT(e,nn.memoizedState,n)},useTransition:function(){var n=km(zc)[0],e=$r().memoizedState;return[n,e]},useMutableSource:mT,useSyncExternalStore:gT,useId:NT,unstable_isNewReconciler:!1},tR={readContext:zr,useCallback:CT,useContext:zr,useEffect:Dv,useImperativeHandle:ST,useInsertionEffect:ET,useLayoutEffect:TT,useMemo:kT,useReducer:Am,useRef:bT,useState:function(){return Am(zc)},useDebugValue:Mv,useDeferredValue:function(n){var e=$r();return nn===null?e.memoizedState=n:AT(e,nn.memoizedState,n)},useTransition:function(){var n=Am(zc)[0],e=$r().memoizedState;return[n,e]},useMutableSource:mT,useSyncExternalStore:gT,useId:NT,unstable_isNewReconciler:!1};function ii(n,e){if(n&&n.defaultProps){e=Ot({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Fg(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Ot({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var hp={isMounted:function(n){return(n=n._reactInternals)?La(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=qn(),s=yo(n),o=bs(i,s);o.payload=e,r!=null&&(o.callback=r),e=mo(n,o,s),e!==null&&(fi(e,n,s,i),Sf(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=qn(),s=yo(n),o=bs(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=mo(n,o,s),e!==null&&(fi(e,n,s,i),Sf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=qn(),i=yo(n),s=bs(r,i);s.tag=2,e!=null&&(s.callback=e),e=mo(n,s,i),e!==null&&(fi(e,n,i,r),Sf(e,n,i))}};function hw(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!jc(r,i)||!jc(s,o):!0}function jT(n,e,r){var i=!1,s=Io,o=e.contextType;return typeof o=="object"&&o!==null?o=zr(o):(s=rr(e)?Ea:Dn.current,i=e.contextTypes,o=(i=i!=null)?ql(n,s):Io),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hp,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function fw(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&hp.enqueueReplaceState(e,e.state,null)}function Ug(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},kv(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=zr(o):(o=rr(e)?Ea:Dn.current,s.context=ql(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Fg(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hp.enqueueReplaceState(s,s.state,null),dd(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Wl(n,e){try{var r="",i=e;do r+=AA(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Nm(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function zg(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var nR=typeof WeakMap=="function"?WeakMap:Map;function DT(n,e,r){r=bs(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){vd||(vd=!0,Xg=i),zg(n,e)},r}function MT(n,e,r){r=bs(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){zg(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){zg(n,e),typeof i!="function"&&(go===null?go=new Set([this]):go.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function dw(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new nR;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=gR.bind(null,n,e,r),e.then(n,n))}function pw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function mw(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=bs(-1,1),e.tag=2,mo(r,e,1))),r.lanes|=1),n)}var rR=js.ReactCurrentOwner,er=!1;function $n(n,e,r,i){e.child=n===null?hT(e,null,r,i):Kl(e,n.child,r,i)}function gw(n,e,r,i,s){r=r.render;var o=e.ref;return Pl(e,s),i=Ov(n,e,r,i,o,s),r=jv(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ks(n,e,s)):(kt&&r&&xv(e),e.flags|=1,$n(n,e,i,s),e.child)}function yw(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!qv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,LT(n,e,o,i,s)):(n=Pf(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:jc,r(a,i)&&n.ref===e.ref)return ks(n,e,s)}return e.flags|=1,n=vo(o,i),n.ref=e.ref,n.return=e,e.child=n}function LT(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(jc(o,i)&&n.ref===e.ref)if(er=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(er=!0);else return e.lanes=n.lanes,ks(n,e,s)}return $g(n,e,r,i,s)}function VT(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(Sl,pr),pr|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,bt(Sl,pr),pr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,bt(Sl,pr),pr|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,bt(Sl,pr),pr|=i;return $n(n,e,s,r),e.child}function FT(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function $g(n,e,r,i,s){var o=rr(r)?Ea:Dn.current;return o=ql(e,o),Pl(e,s),r=Ov(n,e,r,i,o,s),i=jv(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ks(n,e,s)):(kt&&i&&xv(e),e.flags|=1,$n(n,e,r,s),e.child)}function vw(n,e,r,i,s){if(rr(r)){var o=!0;ld(e)}else o=!1;if(Pl(e,s),e.stateNode===null)Af(n,e),jT(e,r,i),Ug(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=zr(c):(c=rr(r)?Ea:Dn.current,c=ql(e,c));var f=r.getDerivedStateFromProps,h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&fw(e,a,i,c),Js=!1;var m=e.memoizedState;a.state=m,dd(e,i,a,s),u=e.memoizedState,l!==i||m!==u||nr.current||Js?(typeof f=="function"&&(Fg(e,r,f,i),u=e.memoizedState),(l=Js||hw(e,r,l,i,m,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,dT(n,e),l=e.memoizedProps,c=e.type===e.elementType?l:ii(e.type,l),a.props=c,h=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=zr(u):(u=rr(r)?Ea:Dn.current,u=ql(e,u));var v=r.getDerivedStateFromProps;(f=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==u)&&fw(e,a,i,u),Js=!1,m=e.memoizedState,a.state=m,dd(e,i,a,s);var w=e.memoizedState;l!==h||m!==w||nr.current||Js?(typeof v=="function"&&(Fg(e,r,v,i),w=e.memoizedState),(c=Js||hw(e,r,c,i,m,w,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,w,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,w,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),a.props=i,a.state=w,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Bg(n,e,r,i,o,s)}function Bg(n,e,r,i,s,o){FT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&rw(e,r,!1),ks(n,e,o);i=e.stateNode,rR.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Kl(e,n.child,null,o),e.child=Kl(e,null,l,o)):$n(n,e,l,o),e.memoizedState=i.state,s&&rw(e,r,!0),e.child}function UT(n){var e=n.stateNode;e.pendingContext?nw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&nw(n,e.context,!1),Av(n,e.containerInfo)}function _w(n,e,r,i,s){return Hl(),Ev(s),e.flags|=256,$n(n,e,r,i),e.child}var qg={dehydrated:null,treeContext:null,retryLane:0};function Hg(n){return{baseLanes:n,cachePool:null,transitions:null}}function zT(n,e,r){var i=e.pendingProps,s=Rt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),bt(Rt,s&1),n===null)return Lg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=pp(a,i,0,null),n=ya(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Hg(r),e.memoizedState=qg,n):Lv(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return iR(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=vo(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=vo(l,o):(o=ya(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?Hg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=qg,i}return o=n.child,n=o.sibling,i=vo(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function Lv(n,e){return e=pp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function rf(n,e,r,i){return i!==null&&Ev(i),Kl(e,n.child,null,r),n=Lv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function iR(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=Nm(Error(ye(422))),rf(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=pp({mode:"visible",children:i.children},s,0,null),o=ya(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Kl(e,n.child,null,a),e.child.memoizedState=Hg(a),e.memoizedState=qg,o);if(!(e.mode&1))return rf(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(ye(419)),i=Nm(o,i,void 0),rf(n,e,a,i)}if(l=(a&n.childLanes)!==0,er||l){if(i=dn,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Cs(n,s),fi(i,n,s,-1))}return Bv(),i=Nm(Error(ye(421))),rf(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=yR.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,mr=po(s.nextSibling),yr=e,kt=!0,oi=null,n!==null&&(Pr[Or++]=gs,Pr[Or++]=ys,Pr[Or++]=Ta,gs=n.id,ys=n.overflow,Ta=e),e=Lv(e,i.children),e.flags|=4096,e)}function ww(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Vg(n.return,e,r)}function Rm(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function $T(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if($n(n,e,i.children,r),i=Rt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ww(n,r,e);else if(n.tag===19)ww(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(bt(Rt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&pd(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Rm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&pd(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}Rm(e,!0,r,null,o);break;case"together":Rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Af(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ks(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Sa|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ye(153));if(e.child!==null){for(n=e.child,r=vo(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=vo(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function sR(n,e,r){switch(e.tag){case 3:UT(e),Hl();break;case 5:pT(e);break;case 1:rr(e.type)&&ld(e);break;case 4:Av(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;bt(hd,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(bt(Rt,Rt.current&1),e.flags|=128,null):r&e.child.childLanes?zT(n,e,r):(bt(Rt,Rt.current&1),n=ks(n,e,r),n!==null?n.sibling:null);bt(Rt,Rt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return $T(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),bt(Rt,Rt.current),i)break;return null;case 22:case 23:return e.lanes=0,VT(n,e,r)}return ks(n,e,r)}var BT,Kg,qT,HT;BT=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Kg=function(){};qT=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,ha($i.current);var o=null;switch(r){case"input":s=pg(n,s),i=pg(n,i),o=[];break;case"select":s=Ot({},s,{value:void 0}),i=Ot({},i,{value:void 0}),o=[];break;case"textarea":s=yg(n,s),i=yg(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=od)}_g(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cc.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Et("scroll",n),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};HT=function(n,e,r,i){r!==i&&(e.flags|=4)};function Fu(n,e){if(!kt)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function kn(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function oR(n,e,r){var i=e.pendingProps;switch(bv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(e),null;case 1:return rr(e.type)&&ad(),kn(e),null;case 3:return i=e.stateNode,Gl(),St(nr),St(Dn),Rv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(tf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oi!==null&&(ey(oi),oi=null))),Kg(n,e),kn(e),null;case 5:Nv(e);var s=ha(Fc.current);if(r=e.type,n!==null&&e.stateNode!=null)qT(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ye(166));return kn(e),null}if(n=ha($i.current),tf(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Fi]=e,i[Lc]=o,n=(e.mode&1)!==0,r){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(s=0;s<Zu.length;s++)Et(Zu[s],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":A_(i,o),Et("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Et("invalid",i);break;case"textarea":R_(i,o),Et("invalid",i)}_g(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&ef(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ef(i.textContent,l,n),s=["children",""+l]):Cc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Et("scroll",i)}switch(r){case"input":Kh(i),N_(i,o,!0);break;case"textarea":Kh(i),P_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=od)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_E(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Fi]=e,n[Lc]=i,BT(n,e,!1,!1),e.stateNode=n;e:{switch(a=wg(r,i),r){case"dialog":Et("cancel",n),Et("close",n),s=i;break;case"iframe":case"object":case"embed":Et("load",n),s=i;break;case"video":case"audio":for(s=0;s<Zu.length;s++)Et(Zu[s],n);s=i;break;case"source":Et("error",n),s=i;break;case"img":case"image":case"link":Et("error",n),Et("load",n),s=i;break;case"details":Et("toggle",n),s=i;break;case"input":A_(n,i),s=pg(n,i),Et("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ot({},i,{value:void 0}),Et("invalid",n);break;case"textarea":R_(n,i),s=yg(n,i),Et("invalid",n);break;default:s=i}_g(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?bE(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wE(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&kc(n,u):typeof u=="number"&&kc(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cc.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Et("scroll",n):u!=null&&av(n,o,u,a))}switch(r){case"input":Kh(n),N_(n,i,!1);break;case"textarea":Kh(n),P_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+To(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?kl(n,!!i.multiple,o,!1):i.defaultValue!=null&&kl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=od)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kn(e),null;case 6:if(n&&e.stateNode!=null)HT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ye(166));if(r=ha(Fc.current),ha($i.current),tf(e)){if(i=e.stateNode,r=e.memoizedProps,i[Fi]=e,(o=i.nodeValue!==r)&&(n=yr,n!==null))switch(n.tag){case 3:ef(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ef(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Fi]=e,e.stateNode=i}return kn(e),null;case 13:if(St(Rt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(kt&&mr!==null&&e.mode&1&&!(e.flags&128))uT(),Hl(),e.flags|=98560,o=!1;else if(o=tf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(ye(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ye(317));o[Fi]=e}else Hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kn(e),o=!1}else oi!==null&&(ey(oi),oi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Rt.current&1?rn===0&&(rn=3):Bv())),e.updateQueue!==null&&(e.flags|=4),kn(e),null);case 4:return Gl(),Kg(n,e),n===null&&Dc(e.stateNode.containerInfo),kn(e),null;case 10:return Sv(e.type._context),kn(e),null;case 17:return rr(e.type)&&ad(),kn(e),null;case 19:if(St(Rt),o=e.memoizedState,o===null)return kn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Fu(o,!1);else{if(rn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=pd(n),a!==null){for(e.flags|=128,Fu(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return bt(Rt,Rt.current&1|2),e.child}n=n.sibling}o.tail!==null&&qt()>Ql&&(e.flags|=128,i=!0,Fu(o,!1),e.lanes=4194304)}else{if(!i)if(n=pd(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!kt)return kn(e),null}else 2*qt()-o.renderingStartTime>Ql&&r!==1073741824&&(e.flags|=128,i=!0,Fu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=qt(),e.sibling=null,r=Rt.current,bt(Rt,i?r&1|2:r&1),e):(kn(e),null);case 22:case 23:return $v(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?pr&1073741824&&(kn(e),e.subtreeFlags&6&&(e.flags|=8192)):kn(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function aR(n,e){switch(bv(e),e.tag){case 1:return rr(e.type)&&ad(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Gl(),St(nr),St(Dn),Rv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Nv(e),null;case 13:if(St(Rt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));Hl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return St(Rt),null;case 4:return Gl(),null;case 10:return Sv(e.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var sf=!1,Pn=!1,lR=typeof WeakSet=="function"?WeakSet:Set,De=null;function Il(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Ft(n,e,i)}else r.current=null}function Gg(n,e,r){try{r()}catch(i){Ft(n,e,i)}}var xw=!1;function uR(n,e){if(Ng=rd,n=YE(),wv(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,f=0,h=n,m=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||i!==0&&h.nodeType!==3||(u=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)m=h,h=v;for(;;){if(h===n)break t;if(m===r&&++c===s&&(l=a),m===o&&++f===i&&(u=a),(v=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=v}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Rg={focusedElem:n,selectionRange:r},rd=!1,De=e;De!==null;)if(e=De,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,De=n;else for(;De!==null;){e=De;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,C=w.memoizedState,b=e.stateNode,I=b.getSnapshotBeforeUpdate(e.elementType===e.type?T:ii(e.type,T),C);b.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(O){Ft(e,e.return,O)}if(n=e.sibling,n!==null){n.return=e.return,De=n;break}De=e.return}return w=xw,xw=!1,w}function pc(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&Gg(e,r,o)}s=s.next}while(s!==i)}}function fp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Wg(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function KT(n){var e=n.alternate;e!==null&&(n.alternate=null,KT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fi],delete e[Lc],delete e[jg],delete e[HN],delete e[KN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function GT(n){return n.tag===5||n.tag===3||n.tag===4}function bw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||GT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=od));else if(i!==4&&(n=n.child,n!==null))for(Qg(n,e,r),n=n.sibling;n!==null;)Qg(n,e,r),n=n.sibling}function Yg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Yg(n,e,r),n=n.sibling;n!==null;)Yg(n,e,r),n=n.sibling}var gn=null,si=!1;function Gs(n,e,r){for(r=r.child;r!==null;)WT(n,e,r),r=r.sibling}function WT(n,e,r){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(ip,r)}catch{}switch(r.tag){case 5:Pn||Il(r,e);case 6:var i=gn,s=si;gn=null,Gs(n,e,r),gn=i,si=s,gn!==null&&(si?(n=gn,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):gn.removeChild(r.stateNode));break;case 18:gn!==null&&(si?(n=gn,r=r.stateNode,n.nodeType===8?Tm(n.parentNode,r):n.nodeType===1&&Tm(n,r),Pc(n)):Tm(gn,r.stateNode));break;case 4:i=gn,s=si,gn=r.stateNode.containerInfo,si=!0,Gs(n,e,r),gn=i,si=s;break;case 0:case 11:case 14:case 15:if(!Pn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Gg(r,e,a),s=s.next}while(s!==i)}Gs(n,e,r);break;case 1:if(!Pn&&(Il(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Ft(r,e,l)}Gs(n,e,r);break;case 21:Gs(n,e,r);break;case 22:r.mode&1?(Pn=(i=Pn)||r.memoizedState!==null,Gs(n,e,r),Pn=i):Gs(n,e,r);break;default:Gs(n,e,r)}}function Ew(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new lR),e.forEach(function(i){var s=vR.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function ni(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:gn=l.stateNode,si=!1;break e;case 3:gn=l.stateNode.containerInfo,si=!0;break e;case 4:gn=l.stateNode.containerInfo,si=!0;break e}l=l.return}if(gn===null)throw Error(ye(160));WT(o,a,s),gn=null,si=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ft(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QT(e,n),e=e.sibling}function QT(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ni(e,n),Oi(n),i&4){try{pc(3,n,n.return),fp(3,n)}catch(T){Ft(n,n.return,T)}try{pc(5,n,n.return)}catch(T){Ft(n,n.return,T)}}break;case 1:ni(e,n),Oi(n),i&512&&r!==null&&Il(r,r.return);break;case 5:if(ni(e,n),Oi(n),i&512&&r!==null&&Il(r,r.return),n.flags&32){var s=n.stateNode;try{kc(s,"")}catch(T){Ft(n,n.return,T)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&yE(s,o),wg(l,a);var c=wg(l,o);for(a=0;a<u.length;a+=2){var f=u[a],h=u[a+1];f==="style"?bE(s,h):f==="dangerouslySetInnerHTML"?wE(s,h):f==="children"?kc(s,h):av(s,f,h,c)}switch(l){case"input":mg(s,o);break;case"textarea":vE(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?kl(s,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?kl(s,!!o.multiple,o.defaultValue,!0):kl(s,!!o.multiple,o.multiple?[]:"",!1))}s[Lc]=o}catch(T){Ft(n,n.return,T)}}break;case 6:if(ni(e,n),Oi(n),i&4){if(n.stateNode===null)throw Error(ye(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(T){Ft(n,n.return,T)}}break;case 3:if(ni(e,n),Oi(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Pc(e.containerInfo)}catch(T){Ft(n,n.return,T)}break;case 4:ni(e,n),Oi(n);break;case 13:ni(e,n),Oi(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Uv=qt())),i&4&&Ew(n);break;case 22:if(f=r!==null&&r.memoizedState!==null,n.mode&1?(Pn=(c=Pn)||f,ni(e,n),Pn=c):ni(e,n),Oi(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!f&&n.mode&1)for(De=n,f=n.child;f!==null;){for(h=De=f;De!==null;){switch(m=De,v=m.child,m.tag){case 0:case 11:case 14:case 15:pc(4,m,m.return);break;case 1:Il(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){i=m,r=m.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(T){Ft(i,r,T)}}break;case 5:Il(m,m.return);break;case 22:if(m.memoizedState!==null){Iw(h);continue}}v!==null?(v.return=m,De=v):Iw(h)}f=f.sibling}e:for(f=null,h=n;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=xE("display",a))}catch(T){Ft(n,n.return,T)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(T){Ft(n,n.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ni(e,n),Oi(n),i&4&&Ew(n);break;case 21:break;default:ni(e,n),Oi(n)}}function Oi(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(GT(r)){var i=r;break e}r=r.return}throw Error(ye(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(kc(s,""),i.flags&=-33);var o=bw(n);Yg(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=bw(n);Qg(n,l,a);break;default:throw Error(ye(161))}}catch(u){Ft(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function cR(n,e,r){De=n,YT(n)}function YT(n,e,r){for(var i=(n.mode&1)!==0;De!==null;){var s=De,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||sf;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Pn;l=sf;var c=Pn;if(sf=a,(Pn=u)&&!c)for(De=s;De!==null;)a=De,u=a.child,a.tag===22&&a.memoizedState!==null?Sw(s):u!==null?(u.return=a,De=u):Sw(s);for(;o!==null;)De=o,YT(o),o=o.sibling;De=s,sf=l,Pn=c}Tw(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,De=o):Tw(n)}}function Tw(n){for(;De!==null;){var e=De;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pn||fp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Pn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ii(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&lw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}lw(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Pc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}Pn||e.flags&512&&Wg(e)}catch(m){Ft(e,e.return,m)}}if(e===n){De=null;break}if(r=e.sibling,r!==null){r.return=e.return,De=r;break}De=e.return}}function Iw(n){for(;De!==null;){var e=De;if(e===n){De=null;break}var r=e.sibling;if(r!==null){r.return=e.return,De=r;break}De=e.return}}function Sw(n){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{fp(4,e)}catch(u){Ft(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Ft(e,s,u)}}var o=e.return;try{Wg(e)}catch(u){Ft(e,o,u)}break;case 5:var a=e.return;try{Wg(e)}catch(u){Ft(e,a,u)}}}catch(u){Ft(e,e.return,u)}if(e===n){De=null;break}var l=e.sibling;if(l!==null){l.return=e.return,De=l;break}De=e.return}}var hR=Math.ceil,yd=js.ReactCurrentDispatcher,Vv=js.ReactCurrentOwner,Vr=js.ReactCurrentBatchConfig,lt=0,dn=null,Xt=null,_n=0,pr=0,Sl=Do(0),rn=0,Bc=null,Sa=0,dp=0,Fv=0,mc=null,Jn=null,Uv=0,Ql=1/0,fs=null,vd=!1,Xg=null,go=null,of=!1,ao=null,_d=0,gc=0,Jg=null,Nf=-1,Rf=0;function qn(){return lt&6?qt():Nf!==-1?Nf:Nf=qt()}function yo(n){return n.mode&1?lt&2&&_n!==0?_n&-_n:WN.transition!==null?(Rf===0&&(Rf=jE()),Rf):(n=dt,n!==0||(n=window.event,n=n===void 0?16:zE(n.type)),n):1}function fi(n,e,r,i){if(50<gc)throw gc=0,Jg=null,Error(ye(185));ch(n,r,i),(!(lt&2)||n!==dn)&&(n===dn&&(!(lt&2)&&(dp|=r),rn===4&&no(n,_n)),ir(n,i),r===1&&lt===0&&!(e.mode&1)&&(Ql=qt()+500,up&&Mo()))}function ir(n,e){var r=n.callbackNode;WA(n,e);var i=nd(n,n===dn?_n:0);if(i===0)r!==null&&D_(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&D_(r),e===1)n.tag===0?GN(Cw.bind(null,n)):oT(Cw.bind(null,n)),BN(function(){!(lt&6)&&Mo()}),r=null;else{switch(DE(i)){case 1:r=fv;break;case 4:r=PE;break;case 16:r=td;break;case 536870912:r=OE;break;default:r=td}r=iI(r,XT.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function XT(n,e){if(Nf=-1,Rf=0,lt&6)throw Error(ye(327));var r=n.callbackNode;if(Ol()&&n.callbackNode!==r)return null;var i=nd(n,n===dn?_n:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=wd(n,i);else{e=i;var s=lt;lt|=2;var o=ZT();(dn!==n||_n!==e)&&(fs=null,Ql=qt()+500,ga(n,e));do try{pR();break}catch(l){JT(n,l)}while(!0);Iv(),yd.current=o,lt=s,Xt!==null?e=0:(dn=null,_n=0,e=rn)}if(e!==0){if(e===2&&(s=Ig(n),s!==0&&(i=s,e=Zg(n,s))),e===1)throw r=Bc,ga(n,0),no(n,i),ir(n,qt()),r;if(e===6)no(n,i);else{if(s=n.current.alternate,!(i&30)&&!fR(s)&&(e=wd(n,i),e===2&&(o=Ig(n),o!==0&&(i=o,e=Zg(n,o))),e===1))throw r=Bc,ga(n,0),no(n,i),ir(n,qt()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(ye(345));case 2:sa(n,Jn,fs);break;case 3:if(no(n,i),(i&130023424)===i&&(e=Uv+500-qt(),10<e)){if(nd(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){qn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Og(sa.bind(null,n,Jn,fs),e);break}sa(n,Jn,fs);break;case 4:if(no(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-hi(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=qt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hR(i/1960))-i,10<i){n.timeoutHandle=Og(sa.bind(null,n,Jn,fs),i);break}sa(n,Jn,fs);break;case 5:sa(n,Jn,fs);break;default:throw Error(ye(329))}}}return ir(n,qt()),n.callbackNode===r?XT.bind(null,n):null}function Zg(n,e){var r=mc;return n.current.memoizedState.isDehydrated&&(ga(n,e).flags|=256),n=wd(n,e),n!==2&&(e=Jn,Jn=r,e!==null&&ey(e)),n}function ey(n){Jn===null?Jn=n:Jn.push.apply(Jn,n)}function fR(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!mi(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(n,e){for(e&=~Fv,e&=~dp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-hi(e),i=1<<r;n[r]=-1,e&=~i}}function Cw(n){if(lt&6)throw Error(ye(327));Ol();var e=nd(n,0);if(!(e&1))return ir(n,qt()),null;var r=wd(n,e);if(n.tag!==0&&r===2){var i=Ig(n);i!==0&&(e=i,r=Zg(n,i))}if(r===1)throw r=Bc,ga(n,0),no(n,e),ir(n,qt()),r;if(r===6)throw Error(ye(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,sa(n,Jn,fs),ir(n,qt()),null}function zv(n,e){var r=lt;lt|=1;try{return n(e)}finally{lt=r,lt===0&&(Ql=qt()+500,up&&Mo())}}function Ca(n){ao!==null&&ao.tag===0&&!(lt&6)&&Ol();var e=lt;lt|=1;var r=Vr.transition,i=dt;try{if(Vr.transition=null,dt=1,n)return n()}finally{dt=i,Vr.transition=r,lt=e,!(lt&6)&&Mo()}}function $v(){pr=Sl.current,St(Sl)}function ga(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,$N(r)),Xt!==null)for(r=Xt.return;r!==null;){var i=r;switch(bv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ad();break;case 3:Gl(),St(nr),St(Dn),Rv();break;case 5:Nv(i);break;case 4:Gl();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:Sv(i.type._context);break;case 22:case 23:$v()}r=r.return}if(dn=n,Xt=n=vo(n.current,null),_n=pr=e,rn=0,Bc=null,Fv=dp=Sa=0,Jn=mc=null,ca!==null){for(e=0;e<ca.length;e++)if(r=ca[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}ca=null}return n}function JT(n,e){do{var r=Xt;try{if(Iv(),Cf.current=gd,md){for(var i=Pt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}md=!1}if(Ia=0,fn=nn=Pt=null,dc=!1,Uc=0,Vv.current=null,r===null||r.return===null){rn=1,Bc=e,Xt=null;break}e:{var o=n,a=r.return,l=r,u=e;if(e=_n,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=pw(a);if(v!==null){v.flags&=-257,mw(v,a,l,o,e),v.mode&1&&dw(o,c,e),e=v,u=c;var w=e.updateQueue;if(w===null){var T=new Set;T.add(u),e.updateQueue=T}else w.add(u);break e}else{if(!(e&1)){dw(o,c,e),Bv();break e}u=Error(ye(426))}}else if(kt&&l.mode&1){var C=pw(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),mw(C,a,l,o,e),Ev(Wl(u,l));break e}}o=u=Wl(u,l),rn!==4&&(rn=2),mc===null?mc=[o]:mc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=DT(o,u,e);aw(o,b);break e;case 1:l=u;var I=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(go===null||!go.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var O=MT(o,l,e);aw(o,O);break e}}o=o.return}while(o!==null)}tI(r)}catch(L){e=L,Xt===r&&r!==null&&(Xt=r=r.return);continue}break}while(!0)}function ZT(){var n=yd.current;return yd.current=gd,n===null?gd:n}function Bv(){(rn===0||rn===3||rn===2)&&(rn=4),dn===null||!(Sa&268435455)&&!(dp&268435455)||no(dn,_n)}function wd(n,e){var r=lt;lt|=2;var i=ZT();(dn!==n||_n!==e)&&(fs=null,ga(n,e));do try{dR();break}catch(s){JT(n,s)}while(!0);if(Iv(),lt=r,yd.current=i,Xt!==null)throw Error(ye(261));return dn=null,_n=0,rn}function dR(){for(;Xt!==null;)eI(Xt)}function pR(){for(;Xt!==null&&!FA();)eI(Xt)}function eI(n){var e=rI(n.alternate,n,pr);n.memoizedProps=n.pendingProps,e===null?tI(n):Xt=e,Vv.current=null}function tI(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=aR(r,e),r!==null){r.flags&=32767,Xt=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{rn=6,Xt=null;return}}else if(r=oR(r,e,pr),r!==null){Xt=r;return}if(e=e.sibling,e!==null){Xt=e;return}Xt=e=n}while(e!==null);rn===0&&(rn=5)}function sa(n,e,r){var i=dt,s=Vr.transition;try{Vr.transition=null,dt=1,mR(n,e,r,i)}finally{Vr.transition=s,dt=i}return null}function mR(n,e,r,i){do Ol();while(ao!==null);if(lt&6)throw Error(ye(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(ye(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(QA(n,o),n===dn&&(Xt=dn=null,_n=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||of||(of=!0,iI(td,function(){return Ol(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Vr.transition,Vr.transition=null;var a=dt;dt=1;var l=lt;lt|=4,Vv.current=null,uR(n,r),QT(r,n),DN(Rg),rd=!!Ng,Rg=Ng=null,n.current=r,cR(r),UA(),lt=l,dt=a,Vr.transition=o}else n.current=r;if(of&&(of=!1,ao=n,_d=s),o=n.pendingLanes,o===0&&(go=null),BA(r.stateNode),ir(n,qt()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(vd)throw vd=!1,n=Xg,Xg=null,n;return _d&1&&n.tag!==0&&Ol(),o=n.pendingLanes,o&1?n===Jg?gc++:(gc=0,Jg=n):gc=0,Mo(),null}function Ol(){if(ao!==null){var n=DE(_d),e=Vr.transition,r=dt;try{if(Vr.transition=null,dt=16>n?16:n,ao===null)var i=!1;else{if(n=ao,ao=null,_d=0,lt&6)throw Error(ye(331));var s=lt;for(lt|=4,De=n.current;De!==null;){var o=De,a=o.child;if(De.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(De=c;De!==null;){var f=De;switch(f.tag){case 0:case 11:case 15:pc(8,f,o)}var h=f.child;if(h!==null)h.return=f,De=h;else for(;De!==null;){f=De;var m=f.sibling,v=f.return;if(KT(f),f===c){De=null;break}if(m!==null){m.return=v,De=m;break}De=v}}}var w=o.alternate;if(w!==null){var T=w.child;if(T!==null){w.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}De=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,De=a;else e:for(;De!==null;){if(o=De,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pc(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,De=b;break e}De=o.return}}var I=n.current;for(De=I;De!==null;){a=De;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,De=N;else e:for(a=I;De!==null;){if(l=De,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fp(9,l)}}catch(L){Ft(l,l.return,L)}if(l===a){De=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,De=O;break e}De=l.return}}if(lt=s,Mo(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(ip,n)}catch{}i=!0}return i}finally{dt=r,Vr.transition=e}}return!1}function kw(n,e,r){e=Wl(r,e),e=DT(n,e,1),n=mo(n,e,1),e=qn(),n!==null&&(ch(n,1,e),ir(n,e))}function Ft(n,e,r){if(n.tag===3)kw(n,n,r);else for(;e!==null;){if(e.tag===3){kw(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(go===null||!go.has(i))){n=Wl(r,n),n=MT(e,n,1),e=mo(e,n,1),n=qn(),e!==null&&(ch(e,1,n),ir(e,n));break}}e=e.return}}function gR(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=qn(),n.pingedLanes|=n.suspendedLanes&r,dn===n&&(_n&r)===r&&(rn===4||rn===3&&(_n&130023424)===_n&&500>qt()-Uv?ga(n,0):Fv|=r),ir(n,e)}function nI(n,e){e===0&&(n.mode&1?(e=Qh,Qh<<=1,!(Qh&130023424)&&(Qh=4194304)):e=1);var r=qn();n=Cs(n,e),n!==null&&(ch(n,e,r),ir(n,r))}function yR(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),nI(n,r)}function vR(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ye(314))}i!==null&&i.delete(e),nI(n,r)}var rI;rI=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||nr.current)er=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return er=!1,sR(n,e,r);er=!!(n.flags&131072)}else er=!1,kt&&e.flags&1048576&&aT(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Af(n,e),n=e.pendingProps;var s=ql(e,Dn.current);Pl(e,r),s=Ov(null,e,i,n,s,r);var o=jv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(i)?(o=!0,ld(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kv(e),s.updater=hp,e.stateNode=s,s._reactInternals=e,Ug(e,i,n,r),e=Bg(null,e,i,!0,o,r)):(e.tag=0,kt&&o&&xv(e),$n(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Af(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=wR(i),n=ii(i,n),s){case 0:e=$g(null,e,i,n,r);break e;case 1:e=vw(null,e,i,n,r);break e;case 11:e=gw(null,e,i,n,r);break e;case 14:e=yw(null,e,i,ii(i.type,n),r);break e}throw Error(ye(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ii(i,s),$g(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ii(i,s),vw(n,e,i,s,r);case 3:e:{if(UT(e),n===null)throw Error(ye(387));i=e.pendingProps,o=e.memoizedState,s=o.element,dT(n,e),dd(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Wl(Error(ye(423)),e),e=_w(n,e,i,r,s);break e}else if(i!==s){s=Wl(Error(ye(424)),e),e=_w(n,e,i,r,s);break e}else for(mr=po(e.stateNode.containerInfo.firstChild),yr=e,kt=!0,oi=null,r=hT(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hl(),i===s){e=ks(n,e,r);break e}$n(n,e,i,r)}e=e.child}return e;case 5:return pT(e),n===null&&Lg(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,Pg(i,s)?a=null:o!==null&&Pg(i,o)&&(e.flags|=32),FT(n,e),$n(n,e,a,r),e.child;case 6:return n===null&&Lg(e),null;case 13:return zT(n,e,r);case 4:return Av(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Kl(e,null,i,r):$n(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ii(i,s),gw(n,e,i,s,r);case 7:return $n(n,e,e.pendingProps,r),e.child;case 8:return $n(n,e,e.pendingProps.children,r),e.child;case 12:return $n(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,bt(hd,i._currentValue),i._currentValue=a,o!==null)if(mi(o.value,a)){if(o.children===s.children&&!nr.current){e=ks(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=bs(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Vg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ye(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Vg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}$n(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Pl(e,r),s=zr(s),i=i(s),e.flags|=1,$n(n,e,i,r),e.child;case 14:return i=e.type,s=ii(i,e.pendingProps),s=ii(i.type,s),yw(n,e,i,s,r);case 15:return LT(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ii(i,s),Af(n,e),e.tag=1,rr(i)?(n=!0,ld(e)):n=!1,Pl(e,r),jT(e,i,s),Ug(e,i,s,r),Bg(null,e,i,!0,n,r);case 19:return $T(n,e,r);case 22:return VT(n,e,r)}throw Error(ye(156,e.tag))};function iI(n,e){return RE(n,e)}function _R(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(n,e,r,i){return new _R(n,e,r,i)}function qv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wR(n){if(typeof n=="function")return qv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===uv)return 11;if(n===cv)return 14}return 2}function vo(n,e){var r=n.alternate;return r===null?(r=Lr(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Pf(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")qv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case gl:return ya(r.children,s,o,e);case lv:a=8,s|=8;break;case cg:return n=Lr(12,r,e,s|2),n.elementType=cg,n.lanes=o,n;case hg:return n=Lr(13,r,e,s),n.elementType=hg,n.lanes=o,n;case fg:return n=Lr(19,r,e,s),n.elementType=fg,n.lanes=o,n;case pE:return pp(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case fE:a=10;break e;case dE:a=9;break e;case uv:a=11;break e;case cv:a=14;break e;case Xs:a=16,i=null;break e}throw Error(ye(130,n==null?n:typeof n,""))}return e=Lr(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function ya(n,e,r,i){return n=Lr(7,n,i,e),n.lanes=r,n}function pp(n,e,r,i){return n=Lr(22,n,i,e),n.elementType=pE,n.lanes=r,n.stateNode={isHidden:!1},n}function Pm(n,e,r){return n=Lr(6,n,null,e),n.lanes=r,n}function Om(n,e,r){return e=Lr(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function xR(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dm(0),this.expirationTimes=dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hv(n,e,r,i,s,o,a,l,u){return n=new xR(n,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Lr(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kv(o),n}function bR(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ml,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function sI(n){if(!n)return Io;n=n._reactInternals;e:{if(La(n)!==n||n.tag!==1)throw Error(ye(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(n.tag===1){var r=n.type;if(rr(r))return sT(n,r,e)}return e}function oI(n,e,r,i,s,o,a,l,u){return n=Hv(r,i,!0,n,s,o,a,l,u),n.context=sI(null),r=n.current,i=qn(),s=yo(r),o=bs(i,s),o.callback=e??null,mo(r,o,s),n.current.lanes=s,ch(n,s,i),ir(n,i),n}function mp(n,e,r,i){var s=e.current,o=qn(),a=yo(s);return r=sI(r),e.context===null?e.context=r:e.pendingContext=r,e=bs(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=mo(s,e,a),n!==null&&(fi(n,s,a,o),Sf(n,s,a)),a}function xd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Aw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Kv(n,e){Aw(n,e),(n=n.alternate)&&Aw(n,e)}function ER(){return null}var aI=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gv(n){this._internalRoot=n}gp.prototype.render=Gv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ye(409));mp(n,e,null,null)};gp.prototype.unmount=Gv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ca(function(){mp(null,n,null,null)}),e[Ss]=null}};function gp(n){this._internalRoot=n}gp.prototype.unstable_scheduleHydration=function(n){if(n){var e=VE();n={blockedOn:null,target:n,priority:e};for(var r=0;r<to.length&&e!==0&&e<to[r].priority;r++);to.splice(r,0,n),r===0&&UE(n)}};function Wv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function TR(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=xd(a);o.call(c)}}var a=oI(e,i,n,0,null,!1,!1,"",Nw);return n._reactRootContainer=a,n[Ss]=a.current,Dc(n.nodeType===8?n.parentNode:n),Ca(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=xd(u);l.call(c)}}var u=Hv(n,0,!1,null,null,!1,!1,"",Nw);return n._reactRootContainer=u,n[Ss]=u.current,Dc(n.nodeType===8?n.parentNode:n),Ca(function(){mp(e,u,r,i)}),u}function vp(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=xd(a);l.call(u)}}mp(e,a,n,s)}else a=TR(r,e,n,s,i);return xd(a)}ME=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ju(e.pendingLanes);r!==0&&(dv(e,r|1),ir(e,qt()),!(lt&6)&&(Ql=qt()+500,Mo()))}break;case 13:Ca(function(){var i=Cs(n,1);if(i!==null){var s=qn();fi(i,n,1,s)}}),Kv(n,1)}};pv=function(n){if(n.tag===13){var e=Cs(n,134217728);if(e!==null){var r=qn();fi(e,n,134217728,r)}Kv(n,134217728)}};LE=function(n){if(n.tag===13){var e=yo(n),r=Cs(n,e);if(r!==null){var i=qn();fi(r,n,e,i)}Kv(n,e)}};VE=function(){return dt};FE=function(n,e){var r=dt;try{return dt=n,e()}finally{dt=r}};bg=function(n,e,r){switch(e){case"input":if(mg(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=lp(i);if(!s)throw Error(ye(90));gE(i),mg(i,s)}}}break;case"textarea":vE(n,r);break;case"select":e=r.value,e!=null&&kl(n,!!r.multiple,e,!1)}};IE=zv;SE=Ca;var IR={usingClientEntryPoint:!1,Events:[fh,wl,lp,EE,TE,zv]},Uu={findFiberByHostInstance:ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SR={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:js.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=AE(n),n===null?null:n.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||ER,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{ip=af.inject(SR),zi=af}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;xr.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wv(e))throw Error(ye(200));return bR(n,e,null,r)};xr.createRoot=function(n,e){if(!Wv(n))throw Error(ye(299));var r=!1,i="",s=aI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hv(n,1,!1,null,null,r,!1,i,s),n[Ss]=e.current,Dc(n.nodeType===8?n.parentNode:n),new Gv(e)};xr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ye(188)):(n=Object.keys(n).join(","),Error(ye(268,n)));return n=AE(e),n=n===null?null:n.stateNode,n};xr.flushSync=function(n){return Ca(n)};xr.hydrate=function(n,e,r){if(!yp(e))throw Error(ye(200));return vp(null,n,e,!0,r)};xr.hydrateRoot=function(n,e,r){if(!Wv(n))throw Error(ye(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=aI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=oI(e,null,n,1,r??null,s,!1,o,a),n[Ss]=e.current,Dc(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new gp(e)};xr.render=function(n,e,r){if(!yp(e))throw Error(ye(200));return vp(null,n,e,!1,r)};xr.unmountComponentAtNode=function(n){if(!yp(n))throw Error(ye(40));return n._reactRootContainer?(Ca(function(){vp(null,null,n,!1,function(){n._reactRootContainer=null,n[Ss]=null})}),!0):!1};xr.unstable_batchedUpdates=zv;xr.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!yp(r))throw Error(ye(200));if(n==null||n._reactInternals===void 0)throw Error(ye(38));return vp(n,e,r,!1,i)};xr.version="18.3.1-next-f1338f8080-20240426";function lI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lI)}catch(n){console.error(n)}}lI(),lE.exports=xr;var CR=lE.exports,Rw=CR;lg.createRoot=Rw.createRoot,lg.hydrateRoot=Rw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qc(){return qc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},qc.apply(this,arguments)}var lo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(lo||(lo={}));const Pw="popstate";function kR(n){n===void 0&&(n={});function e(s,o){let{pathname:a="/",search:l="",hash:u=""}=Va(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ty("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:uI(o))}function i(s,o){_p(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return NR(e,r,i,n)}function sn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _p(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AR(){return Math.random().toString(36).substr(2,8)}function Ow(n,e){return{usr:n.state,key:n.key,idx:e}}function ty(n,e,r,i){return r===void 0&&(r=null),qc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Va(e):e,{state:r,key:e&&e.key||i||AR()})}function uI(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Va(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function NR(n,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=lo.Pop,u=null,c=f();c==null&&(c=0,a.replaceState(qc({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function h(){l=lo.Pop;let C=f(),b=C==null?null:C-c;c=C,u&&u({action:l,location:T.location,delta:b})}function m(C,b){l=lo.Push;let I=ty(T.location,C,b);r&&r(I,C),c=f()+1;let N=Ow(I,c),O=T.createHref(I);try{a.pushState(N,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(O)}o&&u&&u({action:l,location:T.location,delta:1})}function v(C,b){l=lo.Replace;let I=ty(T.location,C,b);r&&r(I,C),c=f();let N=Ow(I,c),O=T.createHref(I);a.replaceState(N,"",O),o&&u&&u({action:l,location:T.location,delta:0})}function w(C){let b=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof C=="string"?C:uI(C);return I=I.replace(/ $/,"%20"),sn(b,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,b)}let T={get action(){return l},get location(){return n(s,a)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Pw,h),u=C,()=>{s.removeEventListener(Pw,h),u=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let b=w(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:v,go(C){return a.go(C)}};return T}var jw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(jw||(jw={}));function RR(n,e,r){return r===void 0&&(r="/"),PR(n,e,r)}function PR(n,e,r,i){let s=typeof e=="string"?Va(e):e,o=fI(s.pathname||"/",r);if(o==null)return null;let a=cI(n);OR(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=HR(o);l=$R(a[u],c)}return l}function cI(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(sn(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=va([i,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(sn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cI(o.children,e,f,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:UR(c,o.index),routesMeta:f})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of hI(o.path))s(o,a,u)}),e}function hI(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=hI(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function OR(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:zR(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const jR=/^:[\w-]+$/,DR=3,MR=2,LR=1,VR=10,FR=-2,Dw=n=>n==="*";function UR(n,e){let r=n.split("/"),i=r.length;return r.some(Dw)&&(i+=FR),e&&(i+=MR),r.filter(s=>!Dw(s)).reduce((s,o)=>s+(jR.test(o)?DR:o===""?LR:VR),i)}function zR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function $R(n,e,r){let{routesMeta:i}=n,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,f=o==="/"?e:e.slice(o.length)||"/",h=BR({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),m=u.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:va([o,h.pathname]),pathnameBase:JR(va([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=va([o,h.pathnameBase]))}return a}function BR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=qR(n.path,n.caseSensitive,n.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,f,h)=>{let{paramName:m,isOptional:v}=f;if(m==="*"){let T=l[h]||"";a=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const w=l[h];return v&&!w?c[m]=void 0:c[m]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:n}}function qR(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),_p(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function HR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _p(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function fI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}const KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GR=n=>KR.test(n);function WR(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof n=="string"?Va(n):n,o;if(r)if(GR(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),_p(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Mw(r.substring(1),"/"):o=Mw(r,e)}else o=e;return{pathname:o,search:ZR(i),hash:eP(s)}}function Mw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function jm(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QR(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function YR(n,e){let r=QR(n);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function XR(n,e,r,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Va(n):(s=qc({},n),sn(!s.pathname||!s.pathname.includes("?"),jm("?","pathname","search",s)),sn(!s.pathname||!s.pathname.includes("#"),jm("#","pathname","hash",s)),sn(!s.search||!s.search.includes("#"),jm("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let u=WR(s,l),c=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const va=n=>n.join("/").replace(/\/\/+/g,"/"),JR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const dI=["post","put","patch","delete"];new Set(dI);const nP=["get",...dI];new Set(nP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Hc.apply(this,arguments)}const Qv=ue.createContext(null),rP=ue.createContext(null),wp=ue.createContext(null),xp=ue.createContext(null),Fa=ue.createContext({outlet:null,matches:[],isDataRoute:!1}),pI=ue.createContext(null);function bp(){return ue.useContext(xp)!=null}function Yv(){return bp()||sn(!1),ue.useContext(xp).location}function mI(n){ue.useContext(wp).static||ue.useLayoutEffect(n)}function Lo(){let{isDataRoute:n}=ue.useContext(Fa);return n?gP():iP()}function iP(){bp()||sn(!1);let n=ue.useContext(Qv),{basename:e,future:r,navigator:i}=ue.useContext(wp),{matches:s}=ue.useContext(Fa),{pathname:o}=Yv(),a=JSON.stringify(YR(s,r.v7_relativeSplatPath)),l=ue.useRef(!1);return mI(()=>{l.current=!0}),ue.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let h=XR(c,JSON.parse(a),o,f.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:va([e,h.pathname])),(f.replace?i.replace:i.push)(h,f.state,f)},[e,i,a,o,n])}function gI(){let{matches:n}=ue.useContext(Fa),e=n[n.length-1];return e?e.params:{}}function sP(n,e){return oP(n,e)}function oP(n,e,r,i){bp()||sn(!1);let{navigator:s}=ue.useContext(wp),{matches:o}=ue.useContext(Fa),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Yv(),f;if(e){var h;let C=typeof e=="string"?Va(e):e;u==="/"||(h=C.pathname)!=null&&h.startsWith(u)||sn(!1),f=C}else f=c;let m=f.pathname||"/",v=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=RR(n,{pathname:v}),T=hP(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:va([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:va([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,r,i);return e&&T?ue.createElement(xp.Provider,{value:{location:Hc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:lo.Pop}},T):T}function aP(){let n=mP(),e=tP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},e),r?ue.createElement("pre",{style:s},r):null,null)}const lP=ue.createElement(aP,null);class uP extends ue.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ue.createElement(Fa.Provider,{value:this.props.routeContext},ue.createElement(pI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cP(n){let{routeContext:e,match:r,children:i}=n,s=ue.useContext(Qv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),ue.createElement(Fa.Provider,{value:e},i)}function hP(n,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let a=n,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||sn(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:m,errors:v}=r,w=h.route.loader&&m[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,h,m)=>{let v,w=!1,T=null,C=null;r&&(v=l&&h.route.id?l[h.route.id]:void 0,T=h.route.errorElement||lP,u&&(c<0&&m===0?(yP("route-fallback"),w=!0,C=null):c===m&&(w=!0,C=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),I=()=>{let N;return v?N=T:w?N=C:h.route.Component?N=ue.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=f,ue.createElement(cP,{match:h,routeContext:{outlet:f,matches:b,isDataRoute:r!=null},children:N})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?ue.createElement(uP,{location:r.location,revalidation:r.revalidation,component:T,error:v,children:I(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):I()},null)}var yI=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(yI||{}),vI=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(vI||{});function fP(n){let e=ue.useContext(Qv);return e||sn(!1),e}function dP(n){let e=ue.useContext(rP);return e||sn(!1),e}function pP(n){let e=ue.useContext(Fa);return e||sn(!1),e}function _I(n){let e=pP(),r=e.matches[e.matches.length-1];return r.route.id||sn(!1),r.route.id}function mP(){var n;let e=ue.useContext(pI),r=dP(),i=_I();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function gP(){let{router:n}=fP(yI.UseNavigateStable),e=_I(vI.UseNavigateStable),r=ue.useRef(!1);return mI(()=>{r.current=!0}),ue.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Hc({fromRouteId:e},o)))},[n,e])}const Lw={};function yP(n,e,r){Lw[n]||(Lw[n]=!0)}function vP(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function ji(n){sn(!1)}function _P(n){let{basename:e="/",children:r=null,location:i,navigationType:s=lo.Pop,navigator:o,static:a=!1,future:l}=n;bp()&&sn(!1);let u=e.replace(/^\/*/,"/"),c=ue.useMemo(()=>({basename:u,navigator:o,static:a,future:Hc({v7_relativeSplatPath:!1},l)}),[u,l,o,a]);typeof i=="string"&&(i=Va(i));let{pathname:f="/",search:h="",hash:m="",state:v=null,key:w="default"}=i,T=ue.useMemo(()=>{let C=fI(f,u);return C==null?null:{location:{pathname:C,search:h,hash:m,state:v,key:w},navigationType:s}},[u,f,h,m,v,w,s]);return T==null?null:ue.createElement(wp.Provider,{value:c},ue.createElement(xp.Provider,{children:r,value:T}))}function Vw(n){let{children:e,location:r}=n;return sP(ny(e),r)}new Promise(()=>{});function ny(n,e){e===void 0&&(e=[]);let r=[];return ue.Children.forEach(n,(i,s)=>{if(!ue.isValidElement(i))return;let o=[...e,s];if(i.type===ue.Fragment){r.push.apply(r,ny(i.props.children,o));return}i.type!==ji&&sn(!1),!i.props.index||!i.props.children||sn(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ny(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const wP="6";try{window.__reactRouterVersion=wP}catch{}const xP="startTransition",Fw=gA[xP];function bP(n){let{basename:e,children:r,future:i,window:s}=n,o=ue.useRef();o.current==null&&(o.current=kR({window:s,v5Compat:!0}));let a=o.current,[l,u]=ue.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},f=ue.useCallback(h=>{c&&Fw?Fw(()=>u(h)):u(h)},[u,c]);return ue.useLayoutEffect(()=>a.listen(f),[a,f]),ue.useEffect(()=>vP(i),[i]),ue.createElement(_P,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:i})}var Uw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Uw||(Uw={}));var zw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(zw||(zw={}));var EP=Object.defineProperty,bd=Object.getOwnPropertySymbols,wI=Object.prototype.hasOwnProperty,xI=Object.prototype.propertyIsEnumerable,$w=(n,e,r)=>e in n?EP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ry=(n,e)=>{for(var r in e||(e={}))wI.call(e,r)&&$w(n,r,e[r]);if(bd)for(var r of bd(e))xI.call(e,r)&&$w(n,r,e[r]);return n},iy=(n,e)=>{var r={};for(var i in n)wI.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&bd)for(var i of bd(n))e.indexOf(i)<0&&xI.call(n,i)&&(r[i]=n[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ka;(n=>{const e=class Ze{constructor(u,c,f,h){if(this.version=u,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],u<Ze.MIN_VERSION||u>Ze.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let m=[];for(let w=0;w<this.size;w++)m.push(!1);for(let w=0;w<this.size;w++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(f);if(this.drawCodewords(v),h==-1){let w=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const C=this.getPenaltyScore();C<w&&(h=T,w=C),this.applyMask(T)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(u,c){const f=n.QrSegment.makeSegments(u);return Ze.encodeSegments(f,c)}static encodeBinary(u,c){const f=n.QrSegment.makeBytes(u);return Ze.encodeSegments([f],c)}static encodeSegments(u,c,f=1,h=40,m=-1,v=!0){if(!(Ze.MIN_VERSION<=f&&f<=h&&h<=Ze.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let w,T;for(w=f;;w++){const N=Ze.getNumDataCodewords(w,c)*8,O=a.getTotalBits(u,w);if(O<=N){T=O;break}if(w>=h)throw new RangeError("Data too long")}for(const N of[Ze.Ecc.MEDIUM,Ze.Ecc.QUARTILE,Ze.Ecc.HIGH])v&&T<=Ze.getNumDataCodewords(w,N)*8&&(c=N);let C=[];for(const N of u){r(N.mode.modeBits,4,C),r(N.numChars,N.mode.numCharCountBits(w),C);for(const O of N.getData())C.push(O)}s(C.length==T);const b=Ze.getNumDataCodewords(w,c)*8;s(C.length<=b),r(0,Math.min(4,b-C.length),C),r(0,(8-C.length%8)%8,C),s(C.length%8==0);for(let N=236;C.length<b;N^=253)r(N,8,C);let I=[];for(;I.length*8<C.length;)I.push(0);return C.forEach((N,O)=>I[O>>>3]|=N<<7-(O&7)),new Ze(w,c,I,m)}getModule(u,c){return 0<=u&&u<this.size&&0<=c&&c<this.size&&this.modules[c][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),c=u.length;for(let f=0;f<c;f++)for(let h=0;h<c;h++)f==0&&h==0||f==0&&h==c-1||f==c-1&&h==0||this.drawAlignmentPattern(u[f],u[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const c=this.errorCorrectionLevel.formatBits<<3|u;let f=c;for(let m=0;m<10;m++)f=f<<1^(f>>>9)*1335;const h=(c<<10|f)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(h,m));this.setFunctionModule(8,7,i(h,6)),this.setFunctionModule(8,8,i(h,7)),this.setFunctionModule(7,8,i(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let f=0;f<12;f++)u=u<<1^(u>>>11)*7973;const c=this.version<<12|u;s(c>>>18==0);for(let f=0;f<18;f++){const h=i(c,f),m=this.size-11+f%3,v=Math.floor(f/3);this.setFunctionModule(m,v,h),this.setFunctionModule(v,m,h)}}drawFinderPattern(u,c){for(let f=-4;f<=4;f++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(f)),v=u+h,w=c+f;0<=v&&v<this.size&&0<=w&&w<this.size&&this.setFunctionModule(v,w,m!=2&&m!=4)}}drawAlignmentPattern(u,c){for(let f=-2;f<=2;f++)for(let h=-2;h<=2;h++)this.setFunctionModule(u+h,c+f,Math.max(Math.abs(h),Math.abs(f))!=1)}setFunctionModule(u,c,f){this.modules[c][u]=f,this.isFunction[c][u]=!0}addEccAndInterleave(u){const c=this.version,f=this.errorCorrectionLevel;if(u.length!=Ze.getNumDataCodewords(c,f))throw new RangeError("Invalid argument");const h=Ze.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][c],m=Ze.ECC_CODEWORDS_PER_BLOCK[f.ordinal][c],v=Math.floor(Ze.getNumRawDataModules(c)/8),w=h-v%h,T=Math.floor(v/h);let C=[];const b=Ze.reedSolomonComputeDivisor(m);for(let N=0,O=0;N<h;N++){let L=u.slice(O,O+T-m+(N<w?0:1));O+=L.length;const U=Ze.reedSolomonComputeRemainder(L,b);N<w&&L.push(0),C.push(L.concat(U))}let I=[];for(let N=0;N<C[0].length;N++)C.forEach((O,L)=>{(N!=T-m||L>=w)&&I.push(O[N])});return s(I.length==v),I}drawCodewords(u){if(u.length!=Math.floor(Ze.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const v=f-m,T=(f+1&2)==0?this.size-1-h:h;!this.isFunction[T][v]&&c<u.length*8&&(this.modules[T][v]=i(u[c>>>3],7-(c&7)),c++)}}s(c==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let f=0;f<this.size;f++){let h;switch(u){case 0:h=(f+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=f%3==0;break;case 3:h=(f+c)%3==0;break;case 4:h=(Math.floor(f/3)+Math.floor(c/2))%2==0;break;case 5:h=f*c%2+f*c%3==0;break;case 6:h=(f*c%2+f*c%3)%2==0;break;case 7:h=((f+c)%2+f*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][f]&&h&&(this.modules[c][f]=!this.modules[c][f])}}getPenaltyScore(){let u=0;for(let m=0;m<this.size;m++){let v=!1,w=0,T=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[m][C]==v?(w++,w==5?u+=Ze.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,T),v||(u+=this.finderPenaltyCountPatterns(T)*Ze.PENALTY_N3),v=this.modules[m][C],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,T)*Ze.PENALTY_N3}for(let m=0;m<this.size;m++){let v=!1,w=0,T=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][m]==v?(w++,w==5?u+=Ze.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,T),v||(u+=this.finderPenaltyCountPatterns(T)*Ze.PENALTY_N3),v=this.modules[C][m],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,T)*Ze.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let v=0;v<this.size-1;v++){const w=this.modules[m][v];w==this.modules[m][v+1]&&w==this.modules[m+1][v]&&w==this.modules[m+1][v+1]&&(u+=Ze.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((v,w)=>v+(w?1:0),c);const f=this.size*this.size,h=Math.ceil(Math.abs(c*20-f*10)/f)-1;return s(0<=h&&h<=9),u+=h*Ze.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let f=[6];for(let h=this.size-7;f.length<u;h-=c)f.splice(1,0,h);return f}}static getNumRawDataModules(u){if(u<Ze.MIN_VERSION||u>Ze.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*u+128)*u+64;if(u>=2){const f=Math.floor(u/7)+2;c-=(25*f-10)*f-55,u>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(u,c){return Math.floor(Ze.getNumRawDataModules(u)/8)-Ze.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u]*Ze.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<u-1;h++)c.push(0);c.push(1);let f=1;for(let h=0;h<u;h++){for(let m=0;m<c.length;m++)c[m]=Ze.reedSolomonMultiply(c[m],f),m+1<c.length&&(c[m]^=c[m+1]);f=Ze.reedSolomonMultiply(f,2)}return c}static reedSolomonComputeRemainder(u,c){let f=c.map(h=>0);for(const h of u){const m=h^f.shift();f.push(0),c.forEach((v,w)=>f[w]^=Ze.reedSolomonMultiply(v,m))}return f}static reedSolomonMultiply(u,c){if(u>>>8||c>>>8)throw new RangeError("Byte out of range");let f=0;for(let h=7;h>=0;h--)f=f<<1^(f>>>7)*285,f^=(c>>>h&1)*u;return s(f>>>8==0),f}finderPenaltyCountPatterns(u){const c=u[1];s(c<=this.size*3);const f=c>0&&u[2]==c&&u[3]==c*3&&u[4]==c&&u[5]==c;return(f&&u[0]>=c*4&&u[6]>=c?1:0)+(f&&u[6]>=c*4&&u[0]>=c?1:0)}finderPenaltyTerminateAndCount(u,c,f){return u&&(this.finderPenaltyAddHistory(c,f),c=0),c+=this.size,this.finderPenaltyAddHistory(c,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(u,c){c[0]==0&&(u+=this.size),c.pop(),c.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function r(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let f=u-1;f>=0;f--)c.push(l>>>f&1)}function i(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class Vt{constructor(u,c,f){if(this.mode=u,this.numChars=c,this.bitData=f,c<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(u){let c=[];for(const f of u)r(f,8,c);return new Vt(Vt.Mode.BYTE,u.length,c)}static makeNumeric(u){if(!Vt.isNumeric(u))throw new RangeError("String contains non-numeric characters");let c=[];for(let f=0;f<u.length;){const h=Math.min(u.length-f,3);r(parseInt(u.substring(f,f+h),10),h*3+1,c),f+=h}return new Vt(Vt.Mode.NUMERIC,u.length,c)}static makeAlphanumeric(u){if(!Vt.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],f;for(f=0;f+2<=u.length;f+=2){let h=Vt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f))*45;h+=Vt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f+1)),r(h,11,c)}return f<u.length&&r(Vt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f)),6,c),new Vt(Vt.Mode.ALPHANUMERIC,u.length,c)}static makeSegments(u){return u==""?[]:Vt.isNumeric(u)?[Vt.makeNumeric(u)]:Vt.isAlphanumeric(u)?[Vt.makeAlphanumeric(u)]:[Vt.makeBytes(Vt.toUtf8ByteArray(u))]}static makeEci(u){let c=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,c);else if(u<16384)r(2,2,c),r(u,14,c);else if(u<1e6)r(6,3,c),r(u,21,c);else throw new RangeError("ECI assignment value out of range");return new Vt(Vt.Mode.ECI,0,c)}static isNumeric(u){return Vt.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Vt.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,c){let f=0;for(const h of u){const m=h.mode.numCharCountBits(c);if(h.numChars>=1<<m)return 1/0;f+=4+m+h.bitData.length}return f}static toUtf8ByteArray(u){u=encodeURI(u);let c=[];for(let f=0;f<u.length;f++)u.charAt(f)!="%"?c.push(u.charCodeAt(f)):(c.push(parseInt(u.substring(f+1,f+3),16)),f+=2);return c}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;n.QrSegment=o})(ka||(ka={}));(n=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(ka||(ka={}));(n=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(ka||(ka={}));var Cl=ka;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var TP={L:Cl.QrCode.Ecc.LOW,M:Cl.QrCode.Ecc.MEDIUM,Q:Cl.QrCode.Ecc.QUARTILE,H:Cl.QrCode.Ecc.HIGH},bI=128,EI="L",TI="#FFFFFF",II="#000000",SI=!1,CI=1,IP=4,SP=0,CP=.1;function kI(n,e=0){const r=[];return n.forEach(function(i,s){let o=null;i.forEach(function(a,l){if(!a&&o!==null){r.push(`M${o+e} ${s+e}h${l-o}v1H${o+e}z`),o=null;return}if(l===i.length-1){if(!a)return;o===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${o+e},${s+e} h${l+1-o}v1H${o+e}z`);return}a&&o===null&&(o=l)})}),r.join("")}function AI(n,e){return n.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function kP(n,e,r,i){if(i==null)return null;const s=n.length+r*2,o=Math.floor(e*CP),a=s/e,l=(i.width||o)*a,u=(i.height||o)*a,c=i.x==null?n.length/2-l/2:i.x*a,f=i.y==null?n.length/2-u/2:i.y*a,h=i.opacity==null?1:i.opacity;let m=null;if(i.excavate){let w=Math.floor(c),T=Math.floor(f),C=Math.ceil(l+c-w),b=Math.ceil(u+f-T);m={x:w,y:T,w:C,h:b}}const v=i.crossOrigin;return{x:c,y:f,h:u,w:l,excavation:m,opacity:h,crossOrigin:v}}function AP(n,e){return e!=null?Math.max(Math.floor(e),0):n?IP:SP}function NI({value:n,level:e,minVersion:r,includeMargin:i,marginSize:s,imageSettings:o,size:a,boostLevel:l}){let u=mt.useMemo(()=>{const w=(Array.isArray(n)?n:[n]).reduce((T,C)=>(T.push(...Cl.QrSegment.makeSegments(C)),T),[]);return Cl.QrCode.encodeSegments(w,TP[e],r,void 0,void 0,l)},[n,e,r,l]);const{cells:c,margin:f,numCells:h,calculatedImageSettings:m}=mt.useMemo(()=>{let v=u.getModules();const w=AP(i,s),T=v.length+w*2,C=kP(v,a,w,o);return{cells:v,margin:w,numCells:T,calculatedImageSettings:C}},[u,a,o,i,s]);return{qrcode:u,margin:f,cells:c,numCells:h,calculatedImageSettings:m}}var NP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),RP=mt.forwardRef(function(e,r){const i=e,{value:s,size:o=bI,level:a=EI,bgColor:l=TI,fgColor:u=II,includeMargin:c=SI,minVersion:f=CI,boostLevel:h,marginSize:m,imageSettings:v}=i,T=iy(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=T,b=iy(T,["style"]),I=v==null?void 0:v.src,N=mt.useRef(null),O=mt.useRef(null),L=mt.useCallback(q=>{N.current=q,typeof r=="function"?r(q):r&&(r.current=q)},[r]),[U,A]=mt.useState(!1),{margin:R,cells:D,numCells:M,calculatedImageSettings:F}=NI({value:s,level:a,minVersion:f,boostLevel:h,includeMargin:c,marginSize:m,imageSettings:v,size:o});mt.useEffect(()=>{if(N.current!=null){const q=N.current,G=q.getContext("2d");if(!G)return;let Z=D;const de=O.current,ee=F!=null&&de!==null&&de.complete&&de.naturalHeight!==0&&de.naturalWidth!==0;ee&&F.excavation!=null&&(Z=AI(D,F.excavation));const ae=window.devicePixelRatio||1;q.height=q.width=o*ae;const he=o/M*ae;G.scale(he,he),G.fillStyle=l,G.fillRect(0,0,M,M),G.fillStyle=u,NP?G.fill(new Path2D(kI(Z,R))):D.forEach(function(be,ce){be.forEach(function(Ae,Pe){Ae&&G.fillRect(Pe+R,ce+R,1,1)})}),F&&(G.globalAlpha=F.opacity),ee&&G.drawImage(de,F.x+R,F.y+R,F.w,F.h)}}),mt.useEffect(()=>{A(!1)},[I]);const $=ry({height:o,width:o},C);let j=null;return I!=null&&(j=mt.createElement("img",{src:I,key:I,style:{display:"none"},onLoad:()=>{A(!0)},ref:O,crossOrigin:F==null?void 0:F.crossOrigin})),mt.createElement(mt.Fragment,null,mt.createElement("canvas",ry({style:$,height:o,width:o,ref:L,role:"img"},b)),j)});RP.displayName="QRCodeCanvas";var Xv=mt.forwardRef(function(e,r){const i=e,{value:s,size:o=bI,level:a=EI,bgColor:l=TI,fgColor:u=II,includeMargin:c=SI,minVersion:f=CI,boostLevel:h,title:m,marginSize:v,imageSettings:w}=i,T=iy(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:b,numCells:I,calculatedImageSettings:N}=NI({value:s,level:a,minVersion:f,boostLevel:h,includeMargin:c,marginSize:v,imageSettings:w,size:o});let O=b,L=null;w!=null&&N!=null&&(N.excavation!=null&&(O=AI(b,N.excavation)),L=mt.createElement("image",{href:w.src,height:N.h,width:N.w,x:N.x+C,y:N.y+C,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const U=kI(O,C);return mt.createElement("svg",ry({height:o,width:o,viewBox:`0 0 ${I} ${I}`,ref:r,role:"img"},T),!!m&&mt.createElement("title",null,m),mt.createElement("path",{fill:l,d:`M0,0 h${I}v${I}H0z`,shapeRendering:"crispEdges"}),mt.createElement("path",{fill:u,d:U,shapeRendering:"crispEdges"}),L)});Xv.displayName="QRCodeSVG";var Bw;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(Bw||(Bw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qw;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(qw||(qw={}));var Hw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Hw||(Hw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=["user","model","function","system"];var Gw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Gw||(Gw={}));var Ww;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Ww||(Ww={}));var Qw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Qw||(Qw={}));var Yw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Yw||(Yw={}));var yc;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(yc||(yc={}));var Xw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Xw||(Xw={}));var Jw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Jw||(Jw={}));var Zw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Zw||(Zw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ll extends jn{constructor(e,r){super(e),this.response=r}}class RI extends jn{constructor(e,r,i,s){super(e),this.status=r,this.statusText=i,this.errorDetails=s}}class _o extends jn{}class PI extends jn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="https://generativelanguage.googleapis.com",OP="v1beta",jP="0.24.1",DP="genai-js";var Aa;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Aa||(Aa={}));class MP{constructor(e,r,i,s,o){this.model=e,this.task=r,this.apiKey=i,this.stream=s,this.requestOptions=o}toString(){var e,r;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||OP;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||PP}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function LP(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${DP}/${jP}`),e.join(" ")}async function VP(n){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",LP(n.requestOptions)),r.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new _o(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,o]of i.entries()){if(s==="x-goog-api-key")throw new _o(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new _o(`Header name ${s} can only be set using the apiClient field`);r.append(s,o)}}return r}async function FP(n,e,r,i,s,o){const a=new MP(n,e,r,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},BP(o)),{method:"POST",headers:await VP(a),body:s})}}async function ph(n,e,r,i,s,o={},a=fetch){const{url:l,fetchOptions:u}=await FP(n,e,r,i,s,o);return UP(l,u,a)}async function UP(n,e,r=fetch){let i;try{i=await r(n,e)}catch(s){zP(s,n)}return i.ok||await $P(i,n),i}function zP(n,e){let r=n;throw r.name==="AbortError"?(r=new PI(`Request aborted when fetching ${e.toString()}: ${n.message}`),r.stack=n.stack):n instanceof RI||n instanceof _o||(r=new jn(`Error fetching from ${e.toString()}: ${n.message}`),r.stack=n.stack),r}async function $P(n,e){let r="",i;try{const s=await n.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new RI(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${r}`,n.status,n.statusText,i)}function BP(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const r=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>r.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Of(n.candidates[0]))throw new ll(`${Zs(n)}`,n);return qP(n)}else if(n.promptFeedback)throw new ll(`Text not available. ${Zs(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Of(n.candidates[0]))throw new ll(`${Zs(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ex(n)[0]}else if(n.promptFeedback)throw new ll(`Function call not available. ${Zs(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Of(n.candidates[0]))throw new ll(`${Zs(n)}`,n);return ex(n)}else if(n.promptFeedback)throw new ll(`Function call not available. ${Zs(n)}`,n)},n}function qP(n){var e,r,i,s;const o=[];if(!((r=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function ex(n){var e,r,i,s;const o=[];if(!((r=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const HP=[yc.RECITATION,yc.SAFETY,yc.LANGUAGE];function Of(n){return!!n.finishReason&&HP.includes(n.finishReason)}function Zs(n){var e,r,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((r=n.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const o=n.candidates[0];Of(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function Kc(n){return this instanceof Kc?(this.v=n,this):new Kc(n)}function KP(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(m){i[m]&&(s[m]=function(v){return new Promise(function(w,T){o.push([m,v,w,T])>1||l(m,v)})})}function l(m,v){try{u(i[m](v))}catch(w){h(o[0][3],w)}}function u(m){m.value instanceof Kc?Promise.resolve(m.value.v).then(c,f):h(o[0][2],m)}function c(m){l("next",m)}function f(m){l("throw",m)}function h(m,v){m(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function GP(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=YP(e),[i,s]=r.tee();return{stream:QP(i),response:WP(s)}}async function WP(n){const e=[],r=n.getReader();for(;;){const{done:i,value:s}=await r.read();if(i)return Jv(XP(e));e.push(s)}}function QP(n){return KP(this,arguments,function*(){const r=n.getReader();for(;;){const{value:i,done:s}=yield Kc(r.read());if(s)break;yield yield Kc(Jv(i))}})}function YP(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return o();function o(){return e.read().then(({value:a,done:l})=>{if(l){if(s.trim()){i.error(new jn("Failed to parse stream"));return}i.close();return}s+=a;let u=s.match(tx),c;for(;u;){try{c=JSON.parse(u[1])}catch{i.error(new jn(`Error parsing JSON response: "${u[1]}"`));return}i.enqueue(c),s=s.substring(u[0].length),u=s.match(tx)}return o()}).catch(a=>{let l=a;throw l.stack=a.stack,l.name==="AbortError"?l=new PI("Request aborted when reading from the stream"):l=new jn("Error reading from the stream"),l})}}})}function XP(n){const e=n[n.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const o of i.candidates)if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:s}),r.candidates[s].citationMetadata=o.citationMetadata,r.candidates[s].groundingMetadata=o.groundingMetadata,r.candidates[s].finishReason=o.finishReason,r.candidates[s].finishMessage=o.finishMessage,r.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[s].content||(r.candidates[s].content={role:o.content.role||"user",parts:[]});const a={};for(const l of o.content.parts)l.text&&(a.text=l.text),l.functionCall&&(a.functionCall=l.functionCall),l.executableCode&&(a.executableCode=l.executableCode),l.codeExecutionResult&&(a.codeExecutionResult=l.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[s].content.parts.push(a)}s++}i.usageMetadata&&(r.usageMetadata=i.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(n,e,r,i){const s=await ph(e,Aa.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(r),i);return GP(s)}async function jI(n,e,r,i){const o=await(await ph(e,Aa.GENERATE_CONTENT,n,!1,JSON.stringify(r),i)).json();return{response:Jv(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Gc(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const r of n)typeof r=="string"?e.push({text:r}):e.push(r);return JP(e)}function JP(n){const e={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,s=!1;for(const o of n)"functionResponse"in o?(r.parts.push(o),s=!0):(e.parts.push(o),i=!0);if(i&&s)throw new jn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new jn("No content is provided for sending chat message.");return i?e:r}function ZP(n,e){var r;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new _o("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const o=Gc(n);i.contents=[o]}return{generateContentRequest:i}}function nx(n){let e;return n.contents?e=n:e={contents:[Gc(n)]},n.systemInstruction&&(e.systemInstruction=DI(n.systemInstruction)),e}function eO(n){return typeof n=="string"||Array.isArray(n)?{content:Gc(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],tO={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function nO(n){let e=!1;for(const r of n){const{role:i,parts:s}=r;if(!e&&i!=="user")throw new jn(`First content should be with role 'user', got ${i}`);if(!Kw.includes(i))throw new jn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(Kw)}`);if(!Array.isArray(s))throw new jn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new jn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of s)for(const u of rx)u in l&&(o[u]+=1);const a=tO[i];for(const l of rx)if(!a.includes(l)&&o[l]>0)throw new jn(`Content with role '${i}' can't contain '${l}' part`);e=!0}}function ix(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const r=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const i of r.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="SILENT_ERROR";class rO{constructor(e,r,i,s={}){this.model=r,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(nO(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var i,s,o,a,l,u;await this._sendPromise;const c=Gc(e),f={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>jI(this._apiKey,this.model,f,h)).then(v=>{var w;if(ix(v.response)){this._history.push(c);const T=Object.assign({parts:[],role:"model"},(w=v.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(T)}else{const T=Zs(v.response);T&&console.warn(`sendMessage() was unsuccessful. ${T}. Inspect response object for details.`)}m=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,m}async sendMessageStream(e,r={}){var i,s,o,a,l,u;await this._sendPromise;const c=Gc(e),f={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r),m=OI(this._apiKey,this.model,f,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(v=>{throw new Error(sx)}).then(v=>v.response).then(v=>{if(ix(v)){this._history.push(c);const w=Object.assign({},v.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=Zs(v);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(v=>{v.message!==sx&&console.error(v)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(n,e,r,i){return(await ph(e,Aa.COUNT_TOKENS,n,!1,JSON.stringify(r),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(n,e,r,i){return(await ph(e,Aa.EMBED_CONTENT,n,!1,JSON.stringify(r),i)).json()}async function oO(n,e,r,i){const s=r.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await ph(e,Aa.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,r,i={}){this.apiKey=e,this._requestOptions=i,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=DI(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var i;const s=nx(e),o=Object.assign(Object.assign({},this._requestOptions),r);return jI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}async generateContentStream(e,r={}){var i;const s=nx(e),o=Object.assign(Object.assign({},this._requestOptions),r);return OI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}startChat(e){var r;return new rO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const i=ZP(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return iO(this.apiKey,this.model,i,s)}async embedContent(e,r={}){const i=eO(e),s=Object.assign(Object.assign({},this._requestOptions),r);return sO(this.apiKey,this.model,i,s)}async batchEmbedContents(e,r={}){const i=Object.assign(Object.assign({},this._requestOptions),r);return oO(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new jn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ox(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,i){if(!e.name)throw new _o("Cached content must contain a `name` field.");if(!e.model)throw new _o("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(r!=null&&r[a]&&e[a]&&(r==null?void 0:r[a])!==e[a]){if(a==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(l===u)continue}throw new _o(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new ox(this.apiKey,o,i)}}var MI={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(b_,function(){var r=function(p,g){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(_[k]=E[k])})(p,g)},i=function(){return(i=Object.assign||function(p){for(var g,_=1,E=arguments.length;_<E;_++)for(var k in g=arguments[_])Object.prototype.hasOwnProperty.call(g,k)&&(p[k]=g[k]);return p}).apply(this,arguments)};function s(p,g,_){for(var E,k=0,P=g.length;k<P;k++)!E&&k in g||((E=E||Array.prototype.slice.call(g,0,k))[k]=g[k]);return p.concat(E||Array.prototype.slice.call(g))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:b_,a=Object.keys,l=Array.isArray;function u(p,g){return typeof g!="object"||a(g).forEach(function(_){p[_]=g[_]}),p}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(p,g){return f.call(p,g)}function m(p,g){typeof g=="function"&&(g=g(c(p))),(typeof Reflect>"u"?a:Reflect.ownKeys)(g).forEach(function(_){w(p,_,g[_])})}var v=Object.defineProperty;function w(p,g,_,E){v(p,g,u(_&&h(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},E))}function T(p){return{from:function(g){return p.prototype=Object.create(g.prototype),w(p.prototype,"constructor",p),{extend:m.bind(null,p.prototype)}}}}var C=Object.getOwnPropertyDescriptor,b=[].slice;function I(p,g,_){return b.call(p,g,_)}function N(p,g){return g(p)}function O(p){if(!p)throw new Error("Assertion Failed")}function L(p){o.setImmediate?setImmediate(p):setTimeout(p,0)}function U(p,g){if(typeof g=="string"&&h(p,g))return p[g];if(!g)return p;if(typeof g!="string"){for(var _=[],E=0,k=g.length;E<k;++E){var P=U(p,g[E]);_.push(P)}return _}var z=g.indexOf(".");if(z!==-1){var B=p[g.substr(0,z)];return B==null?void 0:U(B,g.substr(z+1))}}function A(p,g,_){if(p&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof g!="string"&&"length"in g){O(typeof _!="string"&&"length"in _);for(var E=0,k=g.length;E<k;++E)A(p,g[E],_[E])}else{var P,z,B=g.indexOf(".");B!==-1?(P=g.substr(0,B),(z=g.substr(B+1))===""?_===void 0?l(p)&&!isNaN(parseInt(P))?p.splice(P,1):delete p[P]:p[P]=_:A(B=!(B=p[P])||!h(p,P)?p[P]={}:B,z,_)):_===void 0?l(p)&&!isNaN(parseInt(g))?p.splice(g,1):delete p[g]:p[g]=_}}function R(p){var g,_={};for(g in p)h(p,g)&&(_[g]=p[g]);return _}var D=[].concat;function M(p){return D.apply([],p)}var mn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(M([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(g){return g+p+"Array"})}))).filter(function(p){return o[p]}),F=new Set(mn.map(function(p){return o[p]})),$=null;function j(p){return $=new WeakMap,p=function g(_){if(!_||typeof _!="object")return _;var E=$.get(_);if(E)return E;if(l(_)){E=[],$.set(_,E);for(var k=0,P=_.length;k<P;++k)E.push(g(_[k]))}else if(F.has(_.constructor))E=_;else{var z,B=c(_);for(z in E=B===Object.prototype?{}:Object.create(B),$.set(_,E),_)h(_,z)&&(E[z]=g(_[z]))}return E}(p),$=null,p}var q={}.toString;function G(p){return q.call(p).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof Z=="symbol"?function(p){var g;return p!=null&&(g=p[Z])&&g.apply(p)}:function(){return null};function ee(p,g){return g=p.indexOf(g),0<=g&&p.splice(g,1),0<=g}var ae={};function he(p){var g,_,E,k;if(arguments.length===1){if(l(p))return p.slice();if(this===ae&&typeof p=="string")return[p];if(k=de(p)){for(_=[];!(E=k.next()).done;)_.push(E.value);return _}if(p==null)return[p];if(typeof(g=p.length)!="number")return[p];for(_=new Array(g);g--;)_[g]=p[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var be=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},or=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ar=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(or),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(p,g){this.name=p,this.message=g}function Pe(p,g){return p+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,E,k){return k.indexOf(_)===E}).join(`
`)}function Me(p,g,_,E){this.failures=g,this.failedKeys=E,this.successCount=_,this.message=Pe(p,g)}function Ye(p,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=Pe(p,this.failures)}T(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),T(Me).from(Ae),T(Ye).from(Ae);var Ge=Ar.reduce(function(p,g){return p[g]=g+"Error",p},{}),Kt=Ae,Le=Ar.reduce(function(p,g){var _=g+"Error";function E(k,P){this.name=_,k?typeof k=="string"?(this.message="".concat(k).concat(P?`
 `+P:""),this.inner=P||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=ce[g]||_,this.inner=null)}return T(E).from(Kt),p[g]=E,p},{});Le.Syntax=SyntaxError,Le.Type=TypeError,Le.Range=RangeError;var wi=or.reduce(function(p,g){return p[g+"Error"]=Le[g],p},{}),xi=Ar.reduce(function(p,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(p[g+"Error"]=Le[g]),p},{});function ot(){}function Br(p){return p}function Se(p,g){return p==null||p===Br?g:function(_){return g(p(_))}}function qe(p,g){return function(){p.apply(this,arguments),g.apply(this,arguments)}}function Gt(p,g){return p===ot?g:function(){var _=p.apply(this,arguments);_!==void 0&&(arguments[0]=_);var E=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var P=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?qe(E,this.onsuccess):E),k&&(this.onerror=this.onerror?qe(k,this.onerror):k),P!==void 0?P:_}}function Dt(p,g){return p===ot?g:function(){p.apply(this,arguments);var _=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?qe(_,this.onsuccess):_),E&&(this.onerror=this.onerror?qe(E,this.onerror):E)}}function Qn(p,g){return p===ot?g:function(_){var E=p.apply(this,arguments);u(_,E);var k=this.onsuccess,P=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?qe(k,this.onsuccess):k),P&&(this.onerror=this.onerror?qe(P,this.onerror):P),E===void 0?_===void 0?void 0:_:u(E,_)}}function gt(p,g){return p===ot?g:function(){return g.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Mt(p,g){return p===ot?g:function(){var _=p.apply(this,arguments);if(_&&typeof _.then=="function"){for(var E=this,k=arguments.length,P=new Array(k);k--;)P[k]=arguments[k];return _.then(function(){return g.apply(E,P)})}return g.apply(this,arguments)}}xi.ModifyError=Me,xi.DexieError=Ae,xi.BulkError=Ye;var pn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qa(p){pn=p}var qr={},an=100,mn=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,c(p),p];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,c(g),p]}(),or=mn[0],Ar=mn[1],mn=mn[2],Ar=Ar&&Ar.then,ln=or&&or.constructor,ar=!!mn,bi=function(p,g){Ei.push([p,g]),Ln&&(queueMicrotask(em),Ln=!1)},Er=!0,Ln=!0,En=[],Yn=[],Vn=Br,Wt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ot,pgp:!1,env:{},finalize:ot},Oe=Wt,Ei=[],Tr=0,zo=[];function Ie(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=Oe;if(typeof p!="function"){if(p!==qr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ka(this,this._value))}this._state=null,this._value=null,++g.ref,function _(E,k){try{k(function(P){if(E._state===null){if(P===E)throw new TypeError("A promise cannot be resolved with itself.");var z=E._lib&&lr();P&&typeof P.then=="function"?_(E,function(B,K){P instanceof Ie?P._then(B,K):P.then(B,K)}):(E._state=!0,E._value=P,Ds(E)),z&&Ms()}},Ka.bind(null,E))}catch(P){Ka(E,P)}}(this,p)}var Ha={get:function(){var p=Oe,g=ur;function _(E,k){var P=this,z=!p.global&&(p!==Oe||g!==ur),B=z&&!Ir(),K=new Ie(function(W,te){Zi(P,new un(xu(E,p,z,B),xu(k,p,z,B),W,te,p))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return _.prototype=qr,_},set:function(p){w(this,"then",p&&p.prototype===qr?Ha:{get:function(){return p},set:Ha.set})}};function un(p,g,_,E,k){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=E,this.psd=k}function Ka(p,g){var _,E;Yn.push(g),p._state===null&&(_=p._lib&&lr(),g=Vn(g),p._state=!1,p._value=g,E=p,En.some(function(k){return k._value===E._value})||En.push(E),Ds(p),_&&Ms())}function Ds(p){var g=p._listeners;p._listeners=[];for(var _=0,E=g.length;_<E;++_)Zi(p,g[_]);var k=p._PSD;--k.ref||k.finalize(),Tr===0&&(++Tr,bi(function(){--Tr==0&&_u()},[]))}function Zi(p,g){if(p._state!==null){var _=p._state?g.onFulfilled:g.onRejected;if(_===null)return(p._state?g.resolve:g.reject)(p._value);++g.psd.ref,++Tr,bi(Zp,[_,p,g])}else p._listeners.push(g)}function Zp(p,g,_){try{var E,k=g._value;!g._state&&Yn.length&&(Yn=[]),E=pn&&g._consoleTask?g._consoleTask.run(function(){return p(k)}):p(k),g._state||Yn.indexOf(k)!==-1||function(P){for(var z=En.length;z;)if(En[--z]._value===P._value)return En.splice(z,1)}(g),_.resolve(E)}catch(P){_.reject(P)}finally{--Tr==0&&_u(),--_.psd.ref||_.psd.finalize()}}function em(){Sr(Wt,function(){lr()&&Ms()})}function lr(){var p=Er;return Ln=Er=!1,p}function Ms(){var p,g,_;do for(;0<Ei.length;)for(p=Ei,Ei=[],_=p.length,g=0;g<_;++g){var E=p[g];E[0].apply(null,E[1])}while(0<Ei.length);Ln=Er=!0}function _u(){var p=En;En=[],p.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var g=zo.slice(0),_=g.length;_;)g[--_]()}function es(p){return new Ie(qr,!1,p)}function yt(p,g){var _=Oe;return function(){var E=lr(),k=Oe;try{return Kr(_,!0),p.apply(this,arguments)}catch(P){g&&g(P)}finally{Kr(k,!1),E&&Ms()}}}m(Ie.prototype,{then:Ha,_then:function(p,g){Zi(this,new un(null,null,p,g,Oe))},catch:function(p){if(arguments.length===1)return this.then(null,p);var g=p,_=arguments[1];return typeof g=="function"?this.then(null,function(E){return(E instanceof g?_:es)(E)}):this.then(null,function(E){return(E&&E.name===g?_:es)(E)})},finally:function(p){return this.then(function(g){return Ie.resolve(p()).then(function(){return g})},function(g){return Ie.resolve(p()).then(function(){return es(g)})})},timeout:function(p,g){var _=this;return p<1/0?new Ie(function(E,k){var P=setTimeout(function(){return k(new Le.Timeout(g))},p);_.then(E,k).finally(clearTimeout.bind(null,P))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),Wt.env=Ph(),m(Ie,{all:function(){var p=he.apply(null,arguments).map($o);return new Ie(function(g,_){p.length===0&&g([]);var E=p.length;p.forEach(function(k,P){return Ie.resolve(k).then(function(z){p[P]=z,--E||g(p)},_)})})},resolve:function(p){return p instanceof Ie?p:p&&typeof p.then=="function"?new Ie(function(g,_){p.then(g,_)}):new Ie(qr,!0,p)},reject:es,race:function(){var p=he.apply(null,arguments).map($o);return new Ie(function(g,_){p.map(function(E){return Ie.resolve(E).then(g,_)})})},PSD:{get:function(){return Oe},set:function(p){return Oe=p}},totalEchoes:{get:function(){return ur}},newPSD:Hr,usePSD:Sr,scheduler:{get:function(){return bi},set:function(p){bi=p}},rejectionMapper:{get:function(){return Vn},set:function(p){Vn=p}},follow:function(p,g){return new Ie(function(_,E){return Hr(function(k,P){var z=Oe;z.unhandleds=[],z.onunhandled=P,z.finalize=qe(function(){var B,K=this;B=function(){K.unhandleds.length===0?k():P(K.unhandleds[0])},zo.push(function W(){B(),zo.splice(zo.indexOf(W),1)}),++Tr,bi(function(){--Tr==0&&_u()},[])},z.finalize),p()},g,_,E)})}}),ln&&(ln.allSettled&&w(Ie,"allSettled",function(){var p=he.apply(null,arguments).map($o);return new Ie(function(g){p.length===0&&g([]);var _=p.length,E=new Array(_);p.forEach(function(k,P){return Ie.resolve(k).then(function(z){return E[P]={status:"fulfilled",value:z}},function(z){return E[P]={status:"rejected",reason:z}}).then(function(){return--_||g(E)})})})}),ln.any&&typeof AggregateError<"u"&&w(Ie,"any",function(){var p=he.apply(null,arguments).map($o);return new Ie(function(g,_){p.length===0&&_(new AggregateError([]));var E=p.length,k=new Array(E);p.forEach(function(P,z){return Ie.resolve(P).then(function(B){return g(B)},function(B){k[z]=B,--E||_(new AggregateError(k))})})})}),ln.withResolvers&&(Ie.withResolvers=ln.withResolvers));var Ut={awaits:0,echoes:0,id:0},wu=0,Ti=[],Ga=0,ur=0,Rh=0;function Hr(p,g,_,E){var k=Oe,P=Object.create(k);return P.parent=k,P.ref=0,P.global=!1,P.id=++Rh,Wt.env,P.env=ar?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},g&&u(P,g),++k.ref,P.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Sr(P,p,_,E),P.ref===0&&P.finalize(),E}function Ii(){return Ut.id||(Ut.id=++wu),++Ut.awaits,Ut.echoes+=an,Ut.id}function Ir(){return!!Ut.awaits&&(--Ut.awaits==0&&(Ut.id=0),Ut.echoes=Ut.awaits*an,!0)}function $o(p){return Ut.echoes&&p&&p.constructor===ln?(Ii(),p.then(function(g){return Ir(),g},function(g){return Ir(),vt(g)})):p}function tm(){var p=Ti[Ti.length-1];Ti.pop(),Kr(p,!1)}function Kr(p,g){var _,E=Oe;(g?!Ut.echoes||Ga++&&p===Oe:!Ga||--Ga&&p===Oe)||queueMicrotask(g?(function(k){++ur,Ut.echoes&&--Ut.echoes!=0||(Ut.echoes=Ut.awaits=Ut.id=0),Ti.push(Oe),Kr(k,!0)}).bind(null,p):tm),p!==Oe&&(Oe=p,E===Wt&&(Wt.env=Ph()),ar&&(_=Wt.env.Promise,g=p.env,(E.global||p.global)&&(Object.defineProperty(o,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function Ph(){var p=o.Promise;return ar?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Sr(p,g,_,E,k){var P=Oe;try{return Kr(p,!0),g(_,E,k)}finally{Kr(P,!1)}}function xu(p,g,_,E){return typeof p!="function"?p:function(){var k=Oe;_&&Ii(),Kr(g,!0);try{return p.apply(this,arguments)}finally{Kr(k,!1),E&&queueMicrotask(Ir)}}}function Bo(p){Promise===ln&&Ut.echoes===0?Ga===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Ar).indexOf("[native code]")===-1&&(Ii=Ir=ot);var vt=Ie.reject,Fn="",cr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Oh="String expected.",ts=[],qo="__dbnames",Wa="readonly",Ho="readwrite";function Gr(p,g){return p?g?function(){return p.apply(this,arguments)&&g.apply(this,arguments)}:p:g}var bu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ko(p){return typeof p!="string"||/\./.test(p)?function(g){return g}:function(g){return g[p]===void 0&&p in g&&delete(g=j(g))[p],g}}function Eu(){throw Le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Je(p,g){try{var _=Wr(p),E=Wr(g);if(_!==E)return _==="Array"?1:E==="Array"?-1:_==="binary"?1:E==="binary"?-1:_==="string"?1:E==="string"?-1:_==="Date"?1:E!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<p?1:p<g?-1:0;case"binary":return function(k,P){for(var z=k.length,B=P.length,K=z<B?z:B,W=0;W<K;++W)if(k[W]!==P[W])return k[W]<P[W]?-1:1;return z===B?0:z<B?-1:1}(hr(p),hr(g));case"Array":return function(k,P){for(var z=k.length,B=P.length,K=z<B?z:B,W=0;W<K;++W){var te=Je(k[W],P[W]);if(te!==0)return te}return z===B?0:z<B?-1:1}(p,g)}}catch{}return NaN}function Wr(p){var g=typeof p;return g!="object"?g:ArrayBuffer.isView(p)?"binary":(p=G(p),p==="ArrayBuffer"?"binary":p)}function hr(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function Si(p,g,_){var E=p.schema.yProps;return E?(g&&0<_.numFailures&&(g=g.filter(function(k,P){return!_.failures[P]})),Promise.all(E.map(function(k){return k=k.updatesTable,g?p.db.table(k).where("k").anyOf(g).delete():p.db.table(k).clear()})).then(function(){return _})):_}var Qr=(Qa.prototype.execute=function(p){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(l(_))return s(s([],l(p)?p:[],!0),_).sort();if(typeof _=="number")return(Number(p)||0)+_;if(typeof _=="bigint")try{return BigInt(p)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var E=g.remove;if(l(E))return l(p)?p.filter(function(k){return!E.includes(k)}).sort():[];if(typeof E=="number")return Number(p)-E;if(typeof E=="bigint")try{return BigInt(p)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof p=="string"&&p.startsWith(_)?g.replacePrefix[1]+p.substring(_.length):p},Qa);function Qa(p){this["@@propmod"]=p}function pt(p,g){for(var _=a(g),E=_.length,k=!1,P=0;P<E;++P){var z=_[P],B=g[z],K=U(p,z);B instanceof Qr?(A(p,z,B.execute(K)),k=!0):K!==B&&(A(p,z,B),k=!0)}return k}var Go=(ut.prototype._trans=function(p,g,_){var E=this._tx||Oe.trans,k=this.name,P=pn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function z(W,te,H){if(!H.schema[k])throw new Le.NotFound("Table "+k+" not part of transaction");return g(H.idbtrans,H)}var B=lr();try{var K=E&&E.db._novip===this.db._novip?E===Oe.trans?E._promise(p,z,_):Hr(function(){return E._promise(p,z,_)},{trans:E,transless:Oe.transless||Oe}):function W(te,H,re,Q){if(te.idbdb&&(te._state.openComplete||Oe.letThrough||te._vip)){var X=te._createTransaction(H,re,te._dbSchema);try{X.create(),te._state.PR1398_maxLoop=3}catch(J){return J.name===Ge.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return W(te,H,re,Q)})):vt(J)}return X._promise(H,function(J,ne){return Hr(function(){return Oe.trans=X,Q(J,ne,X)})}).then(function(J){if(H==="readwrite")try{X.idbtrans.commit()}catch{}return H==="readonly"?J:X._completion.then(function(){return J})})}if(te._state.openComplete)return vt(new Le.DatabaseClosed(te._state.dbOpenError));if(!te._state.isBeingOpened){if(!te._state.autoOpen)return vt(new Le.DatabaseClosed);te.open().catch(ot)}return te._state.dbReadyPromise.then(function(){return W(te,H,re,Q)})}(this.db,p,[this.name],z);return P&&(K._consoleTask=P,K=K.catch(function(W){return console.trace(W),vt(W)})),K}finally{B&&Ms()}},ut.prototype.get=function(p,g){var _=this;return p&&p.constructor===Object?this.where(p).first(g):p==null?vt(new Le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return _.core.get({trans:E,key:p}).then(function(k){return _.hook.reading.fire(k)})}).then(g)},ut.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(l(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var g=a(p);if(g.length===1)return this.where(g[0]).equals(p[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&g.every(function(W){return 0<=B.keyPath.indexOf(W)})){for(var K=0;K<g.length;++K)if(g.indexOf(B.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(B,K){return B.keyPath.length-K.keyPath.length})[0];if(_&&this.db._maxKey!==Fn){var P=_.keyPath.slice(0,g.length);return this.where(P).equals(P.map(function(K){return p[K]}))}!_&&pn&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var E=this.schema.idxByName;function k(B,K){return Je(B,K)===0}var z=g.reduce(function(H,K){var W=H[0],te=H[1],H=E[K],re=p[K];return[W||H,W||!H?Gr(te,H&&H.multi?function(Q){return Q=U(Q,K),l(Q)&&Q.some(function(X){return k(re,X)})}:function(Q){return k(re,U(Q,K))}):te]},[null,null]),P=z[0],z=z[1];return P?this.where(P.name).equals(p[P.keyPath]).filter(z):_?this.filter(z):this.where(g).equals("")},ut.prototype.filter=function(p){return this.toCollection().and(p)},ut.prototype.count=function(p){return this.toCollection().count(p)},ut.prototype.offset=function(p){return this.toCollection().offset(p)},ut.prototype.limit=function(p){return this.toCollection().limit(p)},ut.prototype.each=function(p){return this.toCollection().each(p)},ut.prototype.toArray=function(p){return this.toCollection().toArray(p)},ut.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ut.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,l(p)?"[".concat(p.join("+"),"]"):p))},ut.prototype.reverse=function(){return this.toCollection().reverse()},ut.prototype.mapToClass=function(p){var g,_=this.db,E=this.name;function k(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof Eu&&(function(K,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function te(){this.constructor=K}r(K,W),K.prototype=W===null?Object.create(W):(te.prototype=W.prototype,new te)}(k,g=p),Object.defineProperty(k.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),k.prototype.table=function(){return E},p=k);for(var P=new Set,z=p.prototype;z;z=c(z))Object.getOwnPropertyNames(z).forEach(function(K){return P.add(K)});function B(K){if(!K)return K;var W,te=Object.create(p.prototype);for(W in K)if(!P.has(W))try{te[W]=K[W]}catch{}return te}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),p},ut.prototype.defineClass=function(){return this.mapToClass(function(p){u(this,p)})},ut.prototype.add=function(p,g){var _=this,E=this.schema.primKey,k=E.auto,P=E.keyPath,z=p;return P&&k&&(z=Ko(P)(p)),this._trans("readwrite",function(B){return _.core.mutate({trans:B,type:"add",keys:g!=null?[g]:null,values:[z]})}).then(function(B){return B.numFailures?Ie.reject(B.failures[0]):B.lastResult}).then(function(B){if(P)try{A(p,P,B)}catch{}return B})},ut.prototype.upsert=function(p,g){var _=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return _.core.get({trans:k,key:p}).then(function(P){var z=P??{};return pt(z,g),E&&A(z,E,p),_.core.mutate({trans:k,type:"put",values:[z],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[g]}}).then(function(B){return B.numFailures?Ie.reject(B.failures[0]):!!P})})})},ut.prototype.update=function(p,g){return typeof p!="object"||l(p)?this.where(":id").equals(p).modify(g):(p=U(p,this.schema.primKey.keyPath),p===void 0?vt(new Le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(g))},ut.prototype.put=function(p,g){var _=this,E=this.schema.primKey,k=E.auto,P=E.keyPath,z=p;return P&&k&&(z=Ko(P)(p)),this._trans("readwrite",function(B){return _.core.mutate({trans:B,type:"put",values:[z],keys:g!=null?[g]:null})}).then(function(B){return B.numFailures?Ie.reject(B.failures[0]):B.lastResult}).then(function(B){if(P)try{A(p,P,B)}catch{}return B})},ut.prototype.delete=function(p){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[p]}).then(function(E){return Si(g,[p],E)}).then(function(E){return E.numFailures?Ie.reject(E.failures[0]):void 0})})},ut.prototype.clear=function(){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"deleteRange",range:bu}).then(function(_){return Si(p,null,_)})}).then(function(g){return g.numFailures?Ie.reject(g.failures[0]):void 0})},ut.prototype.bulkGet=function(p){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:p,trans:_}).then(function(E){return E.map(function(k){return g.hook.reading.fire(k)})})})},ut.prototype.bulkAdd=function(p,g,_){var E=this,k=Array.isArray(g)?g:void 0,P=(_=_||(k?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(z){var W=E.schema.primKey,B=W.auto,W=W.keyPath;if(W&&k)throw new Le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var K=p.length,W=W&&B?p.map(Ko(W)):p;return E.core.mutate({trans:z,type:"add",keys:k,values:W,wantResults:P}).then(function(X){var H=X.numFailures,re=X.results,Q=X.lastResult,X=X.failures;if(H===0)return P?re:Q;throw new Ye("".concat(E.name,".bulkAdd(): ").concat(H," of ").concat(K," operations failed"),X)})})},ut.prototype.bulkPut=function(p,g,_){var E=this,k=Array.isArray(g)?g:void 0,P=(_=_||(k?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(z){var W=E.schema.primKey,B=W.auto,W=W.keyPath;if(W&&k)throw new Le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var K=p.length,W=W&&B?p.map(Ko(W)):p;return E.core.mutate({trans:z,type:"put",keys:k,values:W,wantResults:P}).then(function(X){var H=X.numFailures,re=X.results,Q=X.lastResult,X=X.failures;if(H===0)return P?re:Q;throw new Ye("".concat(E.name,".bulkPut(): ").concat(H," of ").concat(K," operations failed"),X)})})},ut.prototype.bulkUpdate=function(p){var g=this,_=this.core,E=p.map(function(z){return z.key}),k=p.map(function(z){return z.changes}),P=[];return this._trans("readwrite",function(z){return _.getMany({trans:z,keys:E,cache:"clone"}).then(function(B){var K=[],W=[];p.forEach(function(H,re){var Q=H.key,X=H.changes,J=B[re];if(J){for(var ne=0,se=Object.keys(X);ne<se.length;ne++){var oe=se[ne],fe=X[oe];if(oe===g.schema.primKey.keyPath){if(Je(fe,Q)!==0)throw new Le.Constraint("Cannot update primary key in bulkUpdate()")}else A(J,oe,fe)}P.push(re),K.push(Q),W.push(J)}});var te=K.length;return _.mutate({trans:z,type:"put",keys:K,values:W,updates:{keys:E,changeSpecs:k}}).then(function(H){var re=H.numFailures,Q=H.failures;if(re===0)return te;for(var X=0,J=Object.keys(Q);X<J.length;X++){var ne,se=J[X],oe=P[Number(se)];oe!=null&&(ne=Q[se],delete Q[se],Q[oe]=ne)}throw new Ye("".concat(g.name,".bulkUpdate(): ").concat(re," of ").concat(te," operations failed"),Q)})})})},ut.prototype.bulkDelete=function(p){var g=this,_=p.length;return this._trans("readwrite",function(E){return g.core.mutate({trans:E,type:"delete",keys:p}).then(function(k){return Si(g,p,k)})}).then(function(z){var k=z.numFailures,P=z.lastResult,z=z.failures;if(k===0)return P;throw new Ye("".concat(g.name,".bulkDelete(): ").concat(k," of ").concat(_," operations failed"),z)})},ut);function ut(){}function Yr(p){function g(z,B){if(B){for(var K=arguments.length,W=new Array(K-1);--K;)W[K-1]=arguments[K];return _[z].subscribe.apply(null,W),p}if(typeof z=="string")return _[z]}var _={};g.addEventType=P;for(var E=1,k=arguments.length;E<k;++E)P(arguments[E]);return g;function P(z,B,K){if(typeof z!="object"){var W;B=B||gt;var te={subscribers:[],fire:K=K||ot,subscribe:function(H){te.subscribers.indexOf(H)===-1&&(te.subscribers.push(H),te.fire=B(te.fire,H))},unsubscribe:function(H){te.subscribers=te.subscribers.filter(function(re){return re!==H}),te.fire=te.subscribers.reduce(B,K)}};return _[z]=g[z]=te}a(W=z).forEach(function(H){var re=W[H];if(l(re))P(H,W[H][0],W[H][1]);else{if(re!=="asap")throw new Le.InvalidArgument("Invalid event config");var Q=P(H,Br,function(){for(var X=arguments.length,J=new Array(X);X--;)J[X]=arguments[X];Q.subscribers.forEach(function(ne){L(function(){ne.apply(null,J)})})})}})}}function Wo(p,g){return T(g).from({prototype:p}),g}function ns(p,g){return!(p.filter||p.algorithm||p.or)&&(g?p.justLimit:!p.replayFilter)}function Tu(p,g){p.filter=Gr(p.filter,g)}function Iu(p,g,_){var E=p.replayFilter;p.replayFilter=E?function(){return Gr(E(),g())}:g,p.justLimit=_&&!E}function Ya(p,g){if(p.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(p.index);if(!_)throw new Le.Schema("KeyPath "+p.index+" on object store "+g.name+" is not indexed");return _}function jh(p,g,_){var E=Ya(p,g.schema);return g.openCursor({trans:_,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:E,range:p.range}})}function Ci(p,g,_,E){var k=p.replayFilter?Gr(p.filter,p.replayFilter()):p.filter;if(p.or){var P={},z=function(B,K,W){var te,H;k&&!k(K,W,function(re){return K.stop(re)},function(re){return K.fail(re)})||((H=""+(te=K.primaryKey))=="[object ArrayBuffer]"&&(H=""+new Uint8Array(te)),h(P,H)||(P[H]=!0,g(B,K,W)))};return Promise.all([p.or._iterate(z,_),ki(jh(p,E,_),p.algorithm,z,!p.keysOnly&&p.valueMapper)])}return ki(jh(p,E,_),Gr(p.algorithm,k),g,!p.keysOnly&&p.valueMapper)}function ki(p,g,_,E){var k=yt(E?function(P,z,B){return _(E(P),z,B)}:_);return p.then(function(P){if(P)return P.start(function(){var z=function(){return P.continue()};g&&!g(P,function(B){return z=B},function(B){P.stop(B),z=ot},function(B){P.fail(B),z=ot})||k(P.value,P,function(B){return z=B}),z()})})}var Dh=(it.prototype._read=function(p,g){var _=this._ctx;return _.error?_.table._trans(null,vt.bind(null,_.error)):_.table._trans("readonly",p).then(g)},it.prototype._write=function(p){var g=this._ctx;return g.error?g.table._trans(null,vt.bind(null,g.error)):g.table._trans("readwrite",p,"locked")},it.prototype._addAlgorithm=function(p){var g=this._ctx;g.algorithm=Gr(g.algorithm,p)},it.prototype._iterate=function(p,g){return Ci(this._ctx,p,g,this._ctx.table.core)},it.prototype.clone=function(p){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return p&&u(_,p),g._ctx=_,g},it.prototype.raw=function(){return this._ctx.valueMapper=null,this},it.prototype.each=function(p){var g=this._ctx;return this._read(function(_){return Ci(g,p,_,g.table.core)})},it.prototype.count=function(p){var g=this;return this._read(function(_){var E=g._ctx,k=E.table.core;if(ns(E,!0))return k.count({trans:_,query:{index:Ya(E,k.schema),range:E.range}}).then(function(z){return Math.min(z,E.limit)});var P=0;return Ci(E,function(){return++P,!1},_,k).then(function(){return P})}).then(p)},it.prototype.sortBy=function(p,g){var _=p.split(".").reverse(),E=_[0],k=_.length-1;function P(K,W){return W?P(K[_[W]],W-1):K[E]}var z=this._ctx.dir==="next"?1:-1;function B(K,W){return Je(P(K,k),P(W,k))*z}return this.toArray(function(K){return K.sort(B)}).then(g)},it.prototype.toArray=function(p){var g=this;return this._read(function(_){var E=g._ctx;if(E.dir==="next"&&ns(E,!0)&&0<E.limit){var k=E.valueMapper,P=Ya(E,E.table.core.schema);return E.table.core.query({trans:_,limit:E.limit,values:!0,query:{index:P,range:E.range}}).then(function(B){return B=B.result,k?B.map(k):B})}var z=[];return Ci(E,function(B){return z.push(B)},_,E.table.core).then(function(){return z})},p)},it.prototype.offset=function(p){var g=this._ctx;return p<=0||(g.offset+=p,ns(g)?Iu(g,function(){var _=p;return function(E,k){return _===0||(_===1?--_:k(function(){E.advance(_),_=0}),!1)}}):Iu(g,function(){var _=p;return function(){return--_<0}})),this},it.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),Iu(this._ctx,function(){var g=p;return function(_,E,k){return--g<=0&&E(k),0<=g}},!0),this},it.prototype.until=function(p,g){return Tu(this._ctx,function(_,E,k){return!p(_.value)||(E(k),g)}),this},it.prototype.first=function(p){return this.limit(1).toArray(function(g){return g[0]}).then(p)},it.prototype.last=function(p){return this.reverse().first(p)},it.prototype.filter=function(p){var g;return Tu(this._ctx,function(_){return p(_.value)}),(g=this._ctx).isMatch=Gr(g.isMatch,p),this},it.prototype.and=function(p){return this.filter(p)},it.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},it.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},it.prototype.desc=function(){return this.reverse()},it.prototype.eachKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){p(E.key,E)})},it.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},it.prototype.eachPrimaryKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){p(E.primaryKey,E)})},it.prototype.keys=function(p){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,k){_.push(k.key)}).then(function(){return _}).then(p)},it.prototype.primaryKeys=function(p){var g=this._ctx;if(g.dir==="next"&&ns(g,!0)&&0<g.limit)return this._read(function(E){var k=Ya(g,g.table.core.schema);return g.table.core.query({trans:E,values:!1,limit:g.limit,query:{index:k,range:g.range}})}).then(function(E){return E.result}).then(p);g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,k){_.push(k.primaryKey)}).then(function(){return _}).then(p)},it.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},it.prototype.firstKey=function(p){return this.limit(1).keys(function(g){return g[0]}).then(p)},it.prototype.lastKey=function(p){return this.reverse().firstKey(p)},it.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var g={};return Tu(this._ctx,function(k){var E=k.primaryKey.toString(),k=h(g,E);return g[E]=!0,!k}),this},it.prototype.modify=function(p){var g=this,_=this._ctx;return this._write(function(E){var k=typeof p=="function"?p:function(J){return pt(J,p)},P=_.table.core,W=P.schema.primaryKey,z=W.outbound,B=W.extractKey,K=200,W=g.db._options.modifyChunkSize;W&&(K=typeof W=="object"?W[P.name]||W["*"]||200:W);function te(J,oe){var se=oe.failures,oe=oe.numFailures;re+=J-oe;for(var fe=0,me=a(se);fe<me.length;fe++){var we=me[fe];H.push(se[we])}}var H=[],re=0,Q=[],X=p===Su;return g.clone().primaryKeys().then(function(J){function ne(oe){var fe=Math.min(K,J.length-oe),me=J.slice(oe,oe+fe);return(X?Promise.resolve([]):P.getMany({trans:E,keys:me,cache:"immutable"})).then(function(we){var Ce=[],ve=[],Ee=z?[]:null,ke=X?me:[];if(!X)for(var Te=0;Te<fe;++Te){var je=we[Te],We={value:j(je),primKey:J[oe+Te]};k.call(We,We.value,We)!==!1&&(We.value==null?ke.push(J[oe+Te]):z||Je(B(je),B(We.value))===0?(ve.push(We.value),z&&Ee.push(J[oe+Te])):(ke.push(J[oe+Te]),Ce.push(We.value)))}return Promise.resolve(0<Ce.length&&P.mutate({trans:E,type:"add",values:Ce}).then(function(Qe){for(var Xe in Qe.failures)ke.splice(parseInt(Xe),1);te(Ce.length,Qe)})).then(function(){return(0<ve.length||se&&typeof p=="object")&&P.mutate({trans:E,type:"put",keys:Ee,values:ve,criteria:se,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<oe}).then(function(Qe){return te(ve.length,Qe)})}).then(function(){return(0<ke.length||se&&X)&&P.mutate({trans:E,type:"delete",keys:ke,criteria:se,isAdditionalChunk:0<oe}).then(function(Qe){return Si(_.table,ke,Qe)}).then(function(Qe){return te(ke.length,Qe)})}).then(function(){return J.length>oe+fe&&ne(oe+K)})})}var se=ns(_)&&_.limit===1/0&&(typeof p!="function"||X)&&{index:_.index,range:_.range};return ne(0).then(function(){if(0<H.length)throw new Me("Error modifying one or more objects",H,re,Q);return J.length})})})},it.prototype.delete=function(){var p=this._ctx,g=p.range;return!ns(p)||p.table.schema.yProps||!p.isPrimKey&&g.type!==3?this.modify(Su):this._write(function(_){var E=p.table.core.schema.primaryKey,k=g;return p.table.core.count({trans:_,query:{index:E,range:k}}).then(function(P){return p.table.core.mutate({trans:_,type:"deleteRange",range:k}).then(function(K){var B=K.failures,K=K.numFailures;if(K)throw new Me("Could not delete some values",Object.keys(B).map(function(W){return B[W]}),P-K);return P-K})})})},it);function it(){}var Su=function(p,g){return g.value=null};function Mh(p,g){return p<g?-1:p===g?0:1}function Lh(p,g){return g<p?-1:p===g?0:1}function Qt(p,g,_){return p=p instanceof Vh?new p.Collection(p):p,p._ctx.error=new(_||TypeError)(g),p}function Ls(p){return new p.Collection(p,function(){return Xr("")}).limit(0)}function Xa(p,g,_,E){var k,P,z,B,K,W,te,H=_.length;if(!_.every(function(X){return typeof X=="string"}))return Qt(p,Oh);function re(X){k=X==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},P=X==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},z=X==="next"?Mh:Lh;var J=_.map(function(ne){return{lower:P(ne),upper:k(ne)}}).sort(function(ne,se){return z(ne.lower,se.lower)});B=J.map(function(ne){return ne.upper}),K=J.map(function(ne){return ne.lower}),te=(W=X)==="next"?"":E}re("next"),p=new p.Collection(p,function(){return Ai(B[0],K[H-1]+E)}),p._ondirectionchange=function(X){re(X)};var Q=0;return p._addAlgorithm(function(X,J,ne){var se=X.key;if(typeof se!="string")return!1;var oe=P(se);if(g(oe,K,Q))return!0;for(var fe=null,me=Q;me<H;++me){var we=function(Ce,ve,Ee,ke,Te,je){for(var We=Math.min(Ce.length,ke.length),Qe=-1,Xe=0;Xe<We;++Xe){var fr=ve[Xe];if(fr!==ke[Xe])return Te(Ce[Xe],Ee[Xe])<0?Ce.substr(0,Xe)+Ee[Xe]+Ee.substr(Xe+1):Te(Ce[Xe],ke[Xe])<0?Ce.substr(0,Xe)+ke[Xe]+Ee.substr(Xe+1):0<=Qe?Ce.substr(0,Qe)+ve[Qe]+Ee.substr(Qe+1):null;Te(Ce[Xe],fr)<0&&(Qe=Xe)}return We<ke.length&&je==="next"?Ce+Ee.substr(Ce.length):We<Ce.length&&je==="prev"?Ce.substr(0,Ee.length):Qe<0?null:Ce.substr(0,Qe)+ke[Qe]+Ee.substr(Qe+1)}(se,oe,B[me],K[me],z,W);we===null&&fe===null?Q=me+1:(fe===null||0<z(fe,we))&&(fe=we)}return J(fe!==null?function(){X.continue(fe+te)}:ne),!1}),p}function Ai(p,g,_,E){return{type:2,lower:p,upper:g,lowerOpen:_,upperOpen:E}}function Xr(p){return{type:1,lower:p,upper:p}}var Vh=(Object.defineProperty(Lt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lt.prototype.between=function(p,g,_,E){_=_!==!1,E=E===!0;try{return 0<this._cmp(p,g)||this._cmp(p,g)===0&&(_||E)&&(!_||!E)?Ls(this):new this.Collection(this,function(){return Ai(p,g,!_,!E)})}catch{return Qt(this,cr)}},Lt.prototype.equals=function(p){return p==null?Qt(this,cr):new this.Collection(this,function(){return Xr(p)})},Lt.prototype.above=function(p){return p==null?Qt(this,cr):new this.Collection(this,function(){return Ai(p,void 0,!0)})},Lt.prototype.aboveOrEqual=function(p){return p==null?Qt(this,cr):new this.Collection(this,function(){return Ai(p,void 0,!1)})},Lt.prototype.below=function(p){return p==null?Qt(this,cr):new this.Collection(this,function(){return Ai(void 0,p,!1,!0)})},Lt.prototype.belowOrEqual=function(p){return p==null?Qt(this,cr):new this.Collection(this,function(){return Ai(void 0,p)})},Lt.prototype.startsWith=function(p){return typeof p!="string"?Qt(this,Oh):this.between(p,p+Fn,!0,!0)},Lt.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):Xa(this,function(g,_){return g.indexOf(_[0])===0},[p],Fn)},Lt.prototype.equalsIgnoreCase=function(p){return Xa(this,function(g,_){return g===_[0]},[p],"")},Lt.prototype.anyOfIgnoreCase=function(){var p=he.apply(ae,arguments);return p.length===0?Ls(this):Xa(this,function(g,_){return _.indexOf(g)!==-1},p,"")},Lt.prototype.startsWithAnyOfIgnoreCase=function(){var p=he.apply(ae,arguments);return p.length===0?Ls(this):Xa(this,function(g,_){return _.some(function(E){return g.indexOf(E)===0})},p,Fn)},Lt.prototype.anyOf=function(){var p=this,g=he.apply(ae,arguments),_=this._cmp;try{g.sort(_)}catch{return Qt(this,cr)}if(g.length===0)return Ls(this);var E=new this.Collection(this,function(){return Ai(g[0],g[g.length-1])});E._ondirectionchange=function(P){_=P==="next"?p._ascending:p._descending,g.sort(_)};var k=0;return E._addAlgorithm(function(P,z,B){for(var K=P.key;0<_(K,g[k]);)if(++k===g.length)return z(B),!1;return _(K,g[k])===0||(z(function(){P.continue(g[k])}),!1)}),E},Lt.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lt.prototype.noneOf=function(){var p=he.apply(ae,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return Qt(this,cr)}var g=p.reduce(function(_,E){return _?_.concat([[_[_.length-1][1],E]]):[[-1/0,E]]},null);return g.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},Lt.prototype.inAnyRange=function(se,g){var _=this,E=this._cmp,k=this._ascending,P=this._descending,z=this._min,B=this._max;if(se.length===0)return Ls(this);if(!se.every(function(oe){return oe[0]!==void 0&&oe[1]!==void 0&&k(oe[0],oe[1])<=0}))return Qt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Le.InvalidArgument);var K=!g||g.includeLowers!==!1,W=g&&g.includeUppers===!0,te,H=k;function re(oe,fe){return H(oe[0],fe[0])}try{(te=se.reduce(function(oe,fe){for(var me=0,we=oe.length;me<we;++me){var Ce=oe[me];if(E(fe[0],Ce[1])<0&&0<E(fe[1],Ce[0])){Ce[0]=z(Ce[0],fe[0]),Ce[1]=B(Ce[1],fe[1]);break}}return me===we&&oe.push(fe),oe},[])).sort(re)}catch{return Qt(this,cr)}var Q=0,X=W?function(oe){return 0<k(oe,te[Q][1])}:function(oe){return 0<=k(oe,te[Q][1])},J=K?function(oe){return 0<P(oe,te[Q][0])}:function(oe){return 0<=P(oe,te[Q][0])},ne=X,se=new this.Collection(this,function(){return Ai(te[0][0],te[te.length-1][1],!K,!W)});return se._ondirectionchange=function(oe){H=oe==="next"?(ne=X,k):(ne=J,P),te.sort(re)},se._addAlgorithm(function(oe,fe,me){for(var we,Ce=oe.key;ne(Ce);)if(++Q===te.length)return fe(me),!1;return!X(we=Ce)&&!J(we)||(_._cmp(Ce,te[Q][1])===0||_._cmp(Ce,te[Q][0])===0||fe(function(){H===k?oe.continue(te[Q][0]):oe.continue(te[Q][1])}),!1)}),se},Lt.prototype.startsWithAnyOf=function(){var p=he.apply(ae,arguments);return p.every(function(g){return typeof g=="string"})?p.length===0?Ls(this):this.inAnyRange(p.map(function(g){return[g,g+Fn]})):Qt(this,"startsWithAnyOf() only works with strings")},Lt);function Lt(){}function Un(p){return yt(function(g){return Vs(g),p(g.target.error),!1})}function Vs(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Jr="storagemutated",rs="x-storagemutated-1",Zr=Yr(null,Jr),Cu=(at.prototype._lock=function(){return O(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this},at.prototype._unlock=function(){if(O(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Sr(p[1],p[0])}catch{}}return this},at.prototype._locked=function(){return this._reculock&&Oe.lockOwnerFor!==this},at.prototype.create=function(p){var g=this;if(!this.mode)return this;var _=this.db.idbdb,E=this.db._state.dbOpenError;if(O(!this.idbtrans),!p&&!_)switch(E&&E.name){case"DatabaseClosedError":throw new Le.DatabaseClosed(E);case"MissingAPIError":throw new Le.MissingAPI(E.message,E);default:throw new Le.OpenFailed(E)}if(!this.active)throw new Le.TransactionInactive;return O(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=yt(function(k){Vs(k),g._reject(p.error)}),p.onabort=yt(function(k){Vs(k),g.active&&g._reject(new Le.Abort(p.error)),g.active=!1,g.on("abort").fire(k)}),p.oncomplete=yt(function(){g.active=!1,g._resolve(),"mutatedParts"in p&&Zr.storagemutated.fire(p.mutatedParts)}),this},at.prototype._promise=function(p,g,_){var E=this;if(p==="readwrite"&&this.mode!=="readwrite")return vt(new Le.ReadOnly("Transaction is readonly"));if(!this.active)return vt(new Le.TransactionInactive);if(this._locked())return new Ie(function(P,z){E._blockedFuncs.push([function(){E._promise(p,g,_).then(P,z)},Oe])});if(_)return Hr(function(){var P=new Ie(function(z,B){E._lock();var K=g(z,B,E);K&&K.then&&K.then(z,B)});return P.finally(function(){return E._unlock()}),P._lib=!0,P});var k=new Ie(function(P,z){var B=g(P,z,E);B&&B.then&&B.then(P,z)});return k._lib=!0,k},at.prototype._root=function(){return this.parent?this.parent._root():this},at.prototype.waitFor=function(p){var g,_=this._root(),E=Ie.resolve(p);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return E}):(_._waitingFor=E,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function P(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=P)}());var k=_._waitingFor;return new Ie(function(P,z){E.then(function(B){return _._waitingQueue.push(yt(P.bind(null,B)))},function(B){return _._waitingQueue.push(yt(z.bind(null,B)))}).finally(function(){_._waitingFor===k&&(_._waitingFor=null)})})},at.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Le.Abort))},at.prototype.table=function(p){var g=this._memoizedTables||(this._memoizedTables={});if(h(g,p))return g[p];var _=this.schema[p];if(!_)throw new Le.NotFound("Table "+p+" not part of transaction");return _=new this.db.Table(p,_,this),_.core=this.db.core.table(p),g[p]=_},at);function at(){}function ku(p,g,_,E,k,P,z,B){return{name:p,keyPath:g,unique:_,multi:E,auto:k,compound:P,src:(_&&!z?"&":"")+(E?"*":"")+(k?"++":"")+Fh(g),type:B}}function Fh(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Ja(p,g,_){return{name:p,primKey:g,indexes:_,mappedClass:null,idxByName:(E=function(k){return[k.name,k]},_.reduce(function(k,P,z){return z=E(P,z),z&&(k[z[0]]=z[1]),k},{}))};var E}var Fs=function(p){try{return p.only([[]]),Fs=function(){return[[]]},[[]]}catch{return Fs=function(){return Fn},Fn}};function Za(p){return p==null?function(){}:typeof p=="string"?(g=p).split(".").length===1?function(_){return _[g]}:function(_){return U(_,g)}:function(_){return U(_,p)};var g}function Qo(p){return[].slice.call(p)}var Ni=0;function Us(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function nm(p,g,K){function E(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=ne.lower,X=ne.upper,J=ne.lowerOpen,ne=ne.upperOpen;return Q===void 0?X===void 0?null:g.upperBound(X,!!ne):X===void 0?g.lowerBound(Q,!!J):g.bound(Q,X,!!J,!!ne)}function k(re){var Q,X=re.name;return{name:X,schema:re,mutate:function(J){var ne=J.trans,se=J.type,oe=J.keys,fe=J.values,me=J.range;return new Promise(function(we,Ce){we=yt(we);var ve=ne.objectStore(X),Ee=ve.keyPath==null,ke=se==="put"||se==="add";if(!ke&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var Te,je=(oe||fe||{length:1}).length;if(oe&&fe&&oe.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return we({numFailures:0,failures:{},results:[],lastResult:void 0});function We(zn){++fr,Vs(zn)}var Qe=[],Xe=[],fr=0;if(se==="deleteRange"){if(me.type===4)return we({numFailures:fr,failures:Xe,results:[],lastResult:void 0});me.type===3?Qe.push(Te=ve.clear()):Qe.push(Te=ve.delete(E(me)))}else{var Ee=ke?Ee?[fe,oe]:[fe,null]:[oe,null],Ke=Ee[0],In=Ee[1];if(ke)for(var Sn=0;Sn<je;++Sn)Qe.push(Te=In&&In[Sn]!==void 0?ve[se](Ke[Sn],In[Sn]):ve[se](Ke[Sn])),Te.onerror=We;else for(Sn=0;Sn<je;++Sn)Qe.push(Te=ve[se](Ke[Sn])),Te.onerror=We}function Bh(zn){zn=zn.target.result,Qe.forEach(function(na,am){return na.error!=null&&(Xe[am]=na.error)}),we({numFailures:fr,failures:Xe,results:se==="delete"?oe:Qe.map(function(na){return na.result}),lastResult:zn})}Te.onerror=function(zn){We(zn),Bh(zn)},Te.onsuccess=Bh})},getMany:function(J){var ne=J.trans,se=J.keys;return new Promise(function(oe,fe){oe=yt(oe);for(var me,we=ne.objectStore(X),Ce=se.length,ve=new Array(Ce),Ee=0,ke=0,Te=function(Qe){Qe=Qe.target,ve[Qe._pos]=Qe.result,++ke===Ee&&oe(ve)},je=Un(fe),We=0;We<Ce;++We)se[We]!=null&&((me=we.get(se[We]))._pos=We,me.onsuccess=Te,me.onerror=je,++Ee);Ee===0&&oe(ve)})},get:function(J){var ne=J.trans,se=J.key;return new Promise(function(oe,fe){oe=yt(oe);var me=ne.objectStore(X).get(se);me.onsuccess=function(we){return oe(we.target.result)},me.onerror=Un(fe)})},query:(Q=W,function(J){return new Promise(function(ne,se){ne=yt(ne);var oe,fe,me,Ee=J.trans,we=J.values,Ce=J.limit,Te=J.query,ve=Ce===1/0?void 0:Ce,ke=Te.index,Te=Te.range,Ee=Ee.objectStore(X),ke=ke.isPrimaryKey?Ee:Ee.index(ke.name),Te=E(Te);if(Ce===0)return ne({result:[]});Q?((ve=we?ke.getAll(Te,ve):ke.getAllKeys(Te,ve)).onsuccess=function(je){return ne({result:je.target.result})},ve.onerror=Un(se)):(oe=0,fe=!we&&"openKeyCursor"in ke?ke.openKeyCursor(Te):ke.openCursor(Te),me=[],fe.onsuccess=function(je){var We=fe.result;return We?(me.push(we?We.value:We.primaryKey),++oe===Ce?ne({result:me}):void We.continue()):ne({result:me})},fe.onerror=Un(se))})}),openCursor:function(J){var ne=J.trans,se=J.values,oe=J.query,fe=J.reverse,me=J.unique;return new Promise(function(we,Ce){we=yt(we);var ke=oe.index,ve=oe.range,Ee=ne.objectStore(X),Ee=ke.isPrimaryKey?Ee:Ee.index(ke.name),ke=fe?me?"prevunique":"prev":me?"nextunique":"next",Te=!se&&"openKeyCursor"in Ee?Ee.openKeyCursor(E(ve),ke):Ee.openCursor(E(ve),ke);Te.onerror=Un(Ce),Te.onsuccess=yt(function(je){var We,Qe,Xe,fr,Ke=Te.result;Ke?(Ke.___id=++Ni,Ke.done=!1,We=Ke.continue.bind(Ke),Qe=(Qe=Ke.continuePrimaryKey)&&Qe.bind(Ke),Xe=Ke.advance.bind(Ke),fr=function(){throw new Error("Cursor not stopped")},Ke.trans=ne,Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=function(){throw new Error("Cursor not started")},Ke.fail=yt(Ce),Ke.next=function(){var In=this,Sn=1;return this.start(function(){return Sn--?In.continue():In.stop()}).then(function(){return In})},Ke.start=function(In){function Sn(){if(Te.result)try{In()}catch(zn){Ke.fail(zn)}else Ke.done=!0,Ke.start=function(){throw new Error("Cursor behind last entry")},Ke.stop()}var Bh=new Promise(function(zn,na){zn=yt(zn),Te.onerror=Un(na),Ke.fail=na,Ke.stop=function(am){Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=fr,zn(am)}});return Te.onsuccess=yt(function(zn){Te.onsuccess=Sn,Sn()}),Ke.continue=We,Ke.continuePrimaryKey=Qe,Ke.advance=Xe,Sn(),Bh},we(Ke)):we(null)},Ce)})},count:function(J){var ne=J.query,se=J.trans,oe=ne.index,fe=ne.range;return new Promise(function(me,we){var Ce=se.objectStore(X),ve=oe.isPrimaryKey?Ce:Ce.index(oe.name),Ce=E(fe),ve=Ce?ve.count(Ce):ve.count();ve.onsuccess=yt(function(Ee){return me(Ee.target.result)}),ve.onerror=Un(we)})}}}var P,z,B,te=(z=K,B=Qo((P=p).objectStoreNames),{schema:{name:P.name,tables:B.map(function(re){return z.objectStore(re)}).map(function(re){var Q=re.keyPath,ne=re.autoIncrement,X=l(Q),J={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:X,keyPath:Q,autoIncrement:ne,unique:!0,extractKey:Za(Q)},indexes:Qo(re.indexNames).map(function(se){return re.index(se)}).map(function(me){var oe=me.name,fe=me.unique,we=me.multiEntry,me=me.keyPath,we={name:oe,compound:l(me),keyPath:me,unique:fe,multiEntry:we,extractKey:Za(me)};return J[Us(me)]=we}),getIndexByKeyPath:function(se){return J[Us(se)]}};return J[":id"]=ne.primaryKey,Q!=null&&(J[Us(Q)]=ne.primaryKey),ne})},hasGetAll:0<B.length&&"getAll"in z.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=te.schema,W=te.hasGetAll,te=K.tables.map(k),H={};return te.forEach(function(re){return H[re.name]=re}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(re){if(!H[re])throw new Error("Table '".concat(re,"' not found"));return H[re]},MIN_KEY:-1/0,MAX_KEY:Fs(g),schema:K}}function Yo(p,g,_,E){var k=_.IDBKeyRange;return _.indexedDB,{dbcore:(E=nm(g,k,E),p.dbcore.reduce(function(P,z){return z=z.create,i(i({},P),z(P))},E))}}function Xo(p,E){var _=E.db,E=Yo(p._middlewares,_,p._deps,E);p.core=E.dbcore,p.tables.forEach(function(k){var P=k.name;p.core.schema.tables.some(function(z){return z.name===P})&&(k.core=p.core.table(P),p[P]instanceof p.Table&&(p[P].core=k.core))})}function zs(p,g,_,E){_.forEach(function(k){var P=E[k];g.forEach(function(z){var B=function K(W,te){return C(W,te)||(W=c(W))&&K(W,te)}(z,k);(!B||"value"in B&&B.value===void 0)&&(z===p.Transaction.prototype||z instanceof p.Transaction?w(z,k,{get:function(){return this.table(k)},set:function(K){v(this,k,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):z[k]=new p.Table(k,P))})})}function $s(p,g){g.forEach(function(_){for(var E in _)_[E]instanceof p.Table&&delete _[E]})}function Uh(p,g){return p._cfg.version-g._cfg.version}function el(p,g,_,E){var k=p._dbSchema;_.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=Ja("$meta",Nu("")[0],[]),p._storeNames.push("$meta"));var P=p._createTransaction("readwrite",p._storeNames,k);P.create(_),P._completion.catch(E);var z=P._reject.bind(P),B=Oe.transless||Oe;Hr(function(){return Oe.trans=P,Oe.transless=B,g!==0?(Xo(p,_),W=g,((K=P).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(te){return te??W}):Ie.resolve(W)).then(function(te){return re=te,Q=P,X=_,J=[],te=(H=p)._versions,ne=H._dbSchema=Bs(0,H.idbdb,X),(te=te.filter(function(se){return se._cfg.version>=re})).length!==0?(te.forEach(function(se){J.push(function(){var oe=ne,fe=se._cfg.dbschema;qs(H,oe,X),qs(H,fe,X),ne=H._dbSchema=fe;var me=tl(oe,fe);me.add.forEach(function(ke){is(X,ke[0],ke[1].primKey,ke[1].indexes)}),me.change.forEach(function(ke){if(ke.recreate)throw new Le.Upgrade("Not yet support for changing primary key");var Te=X.objectStore(ke.name);ke.add.forEach(function(je){return Jo(Te,je)}),ke.change.forEach(function(je){Te.deleteIndex(je.name),Jo(Te,je)}),ke.del.forEach(function(je){return Te.deleteIndex(je)})});var we=se._cfg.contentUpgrade;if(we&&se._cfg.version>re){Xo(H,X),Q._memoizedTables={};var Ce=R(fe);me.del.forEach(function(ke){Ce[ke]=oe[ke]}),$s(H,[H.Transaction.prototype]),zs(H,[H.Transaction.prototype],a(Ce),Ce),Q.schema=Ce;var ve,Ee=be(we);return Ee&&Ii(),me=Ie.follow(function(){var ke;(ve=we(Q))&&Ee&&(ke=Ir.bind(null,null),ve.then(ke,ke))}),ve&&typeof ve.then=="function"?Ie.resolve(ve):me.then(function(){return ve})}}),J.push(function(oe){var fe,me,we=se._cfg.dbschema;fe=we,me=oe,[].slice.call(me.db.objectStoreNames).forEach(function(Ce){return fe[Ce]==null&&me.db.deleteObjectStore(Ce)}),$s(H,[H.Transaction.prototype]),zs(H,[H.Transaction.prototype],H._storeNames,H._dbSchema),Q.schema=H._dbSchema}),J.push(function(oe){H.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(H.idbdb.version/10)===se._cfg.version?(H.idbdb.deleteObjectStore("$meta"),delete H._dbSchema.$meta,H._storeNames=H._storeNames.filter(function(fe){return fe!=="$meta"})):oe.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return J.length?Ie.resolve(J.shift()(Q.idbtrans)).then(se):Ie.resolve()}().then(function(){Au(ne,X)})):Ie.resolve();var H,re,Q,X,J,ne}).catch(z)):(a(k).forEach(function(te){is(_,te,k[te].primKey,k[te].indexes)}),Xo(p,_),void Ie.follow(function(){return p.on.populate.fire(P)}).catch(z));var K,W})}function rm(p,g){Au(p._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=Bs(0,p.idbdb,g);qs(p,p._dbSchema,g);for(var E=0,k=tl(_,p._dbSchema).change;E<k.length;E++){var P=function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=g.objectStore(z.name);z.add.forEach(function(K){pn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(K.src)),Jo(B,K)})}(k[E]);if(typeof P=="object")return P.value}}function tl(p,g){var _,E={del:[],add:[],change:[]};for(_ in p)g[_]||E.del.push(_);for(_ in g){var k=p[_],P=g[_];if(k){var z={name:_,def:P,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(P.primKey.keyPath||"")||k.primKey.auto!==P.primKey.auto)z.recreate=!0,E.change.push(z);else{var B=k.idxByName,K=P.idxByName,W=void 0;for(W in B)K[W]||z.del.push(W);for(W in K){var te=B[W],H=K[W];te?te.src!==H.src&&z.change.push(H):z.add.push(H)}(0<z.del.length||0<z.add.length||0<z.change.length)&&E.change.push(z)}}else E.add.push([_,P])}return E}function is(p,g,_,E){var k=p.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return E.forEach(function(P){return Jo(k,P)}),k}function Au(p,g){a(p).forEach(function(_){g.db.objectStoreNames.contains(_)||(pn&&console.debug("Dexie: Creating missing table",_),is(g,_,p[_].primKey,p[_].indexes))})}function Jo(p,g){p.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Bs(p,g,_){var E={};return I(g.objectStoreNames,0).forEach(function(k){for(var P=_.objectStore(k),z=ku(Fh(W=P.keyPath),W||"",!0,!1,!!P.autoIncrement,W&&typeof W!="string",!0),B=[],K=0;K<P.indexNames.length;++K){var te=P.index(P.indexNames[K]),W=te.keyPath,te=ku(te.name,W,!!te.unique,!!te.multiEntry,!1,W&&typeof W!="string",!1);B.push(te)}E[k]=Ja(k,z,B)}),E}function qs(p,g,_){for(var E=_.db.objectStoreNames,k=0;k<E.length;++k){var P=E[k],z=_.objectStore(P);p._hasGetAll="getAll"in z;for(var B=0;B<z.indexNames.length;++B){var K=z.indexNames[B],W=z.index(K).keyPath,te=typeof W=="string"?W:"["+I(W).join("+")+"]";!g[P]||(W=g[P].idxByName[te])&&(W.name=K,delete g[P].idxByName[te],g[P].idxByName[K]=W)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function Nu(p){return p.split(",").map(function(g,_){var P=g.split(":"),E=(k=P[1])===null||k===void 0?void 0:k.trim(),k=(g=P[0].trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return ku(k,P||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),l(P),_===0,E)})}var nl=(ss.prototype._createTableSchema=Ja,ss.prototype._parseIndexSyntax=Nu,ss.prototype._parseStoresSpec=function(p,g){var _=this;a(p).forEach(function(E){if(p[E]!==null){var k=_._parseIndexSyntax(p[E]),P=k.shift();if(!P)throw new Le.Schema("Invalid schema for table "+E+": "+p[E]);if(P.unique=!0,P.multi)throw new Le.Schema("Primary key cannot be multiEntry*");k.forEach(function(z){if(z.auto)throw new Le.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new Le.Schema("Index must have a name and cannot be an empty string")}),k=_._createTableSchema(E,P,k),g[E]=k}})},ss.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,_):_;var _=g._versions,E={},k={};return _.forEach(function(P){u(E,P._cfg.storesSource),k=P._cfg.dbschema={},P._parseStoresSpec(E,k)}),g._dbSchema=k,$s(g,[g._allTables,g,g.Transaction.prototype]),zs(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],a(k),k),g._storeNames=a(k),this},ss.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Mt(this._cfg.contentUpgrade||ot,p),this},ss);function ss(){}function rl(p,g){var _=p._dbNamesDB;return _||(_=p._dbNamesDB=new as(qo,{addons:[],indexedDB:p,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function ei(p){return p&&typeof p.databases=="function"}function il(p){return Hr(function(){return Oe.letThrough=!0,p()})}function sl(p){return!("from"in p)}var tn=function(p,g){if(!this){var _=new tn;return p&&"d"in p&&u(_,p),_}u(this,arguments.length?{d:1,from:p,to:1<arguments.length?g:p}:{d:0})};function Hs(p,g,_){var E=Je(g,_);if(!isNaN(E)){if(0<E)throw RangeError();if(sl(p))return u(p,{from:g,to:_,d:1});var k=p.l,E=p.r;if(Je(_,p.from)<0)return k?Hs(k,g,_):p.l={from:g,to:_,d:1,l:null,r:null},Ru(p);if(0<Je(g,p.to))return E?Hs(E,g,_):p.r={from:g,to:_,d:1,l:null,r:null},Ru(p);Je(g,p.from)<0&&(p.from=g,p.l=null,p.d=E?E.d+1:1),0<Je(_,p.to)&&(p.to=_,p.r=null,p.d=p.l?p.l.d+1:1),_=!p.r,k&&!p.l&&Ri(p,k),E&&_&&Ri(p,E)}}function Ri(p,g){sl(g)||function _(E,K){var P=K.from,z=K.to,B=K.l,K=K.r;Hs(E,P,z),B&&_(E,B),K&&_(E,K)}(p,g)}function Tn(p,g){var _=Zo(g),E=_.next();if(E.done)return!1;for(var k=E.value,P=Zo(p),z=P.next(k.from),B=z.value;!E.done&&!z.done;){if(Je(B.from,k.to)<=0&&0<=Je(B.to,k.from))return!0;Je(k.from,B.from)<0?k=(E=_.next(B.from)).value:B=(z=P.next(k.from)).value}return!1}function Zo(p){var g=sl(p)?null:{s:0,n:p};return{next:function(_){for(var E=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,E)for(;g.n.l&&Je(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!E||Je(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Ru(p){var g,_,E=(((g=p.r)===null||g===void 0?void 0:g.d)||0)-(((_=p.l)===null||_===void 0?void 0:_.d)||0),k=1<E?"r":E<-1?"l":"";k&&(g=k=="r"?"l":"r",_=i({},p),E=p[k],p.from=E.from,p.to=E.to,p[k]=E[k],_[k]=E[g],(p[g]=_).d=os(_)),p.d=os(p)}function os(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function d(p,g){return a(g).forEach(function(_){p[_]?Ri(p[_],g[_]):p[_]=function E(k){var P,z,B={};for(P in k)h(k,P)&&(z=k[P],B[P]=!z||typeof z!="object"||F.has(z.constructor)?z:E(z));return B}(g[_])}),p}function x(p,g){return p.all||g.all||Object.keys(p).some(function(_){return g[_]&&Tn(g[_],p[_])})}m(tn.prototype,((Ar={add:function(p){return Ri(this,p),this},addKey:function(p){return Hs(this,p,p),this},addKeys:function(p){var g=this;return p.forEach(function(_){return Hs(g,_,_)}),this},hasKey:function(p){var g=Zo(this).next(p).value;return g&&Je(g.from,p)<=0&&0<=Je(g.to,p)}})[Z]=function(){return Zo(this)},Ar));var S={},V={},ie=!1;function le(p){d(V,p),ie||(ie=!0,setTimeout(function(){ie=!1,xe(V,!(V={}))},0))}function xe(p,g){g===void 0&&(g=!1);var _=new Set;if(p.all)for(var E=0,k=Object.values(S);E<k.length;E++)He(z=k[E],p,_,g);else for(var P in p){var z,B=/^idb\:\/\/(.*)\/(.*)\//.exec(P);B&&(P=B[1],B=B[2],(z=S["idb://".concat(P,"/").concat(B)])&&He(z,p,_,g))}_.forEach(function(K){return K()})}function He(p,g,_,E){for(var k=[],P=0,z=Object.entries(p.queries.query);P<z.length;P++){for(var B=z[P],K=B[0],W=[],te=0,H=B[1];te<H.length;te++){var re=H[te];x(g,re.obsSet)?re.subscribers.forEach(function(ne){return _.add(ne)}):E&&W.push(re)}E&&k.push([K,W])}if(E)for(var Q=0,X=k;Q<X.length;Q++){var J=X[Q],K=J[0],W=J[1];p.queries.query[K]=W}}function zt(p){var g=p._state,_=p._deps.indexedDB;if(g.isBeingOpened||p.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?vt(g.dbOpenError):p});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var E=g.openCanceller,k=Math.round(10*p.verno),P=!1;function z(){if(g.openCanceller!==E)throw new Le.DatabaseClosed("db.open() was cancelled")}function B(){return new Ie(function(re,Q){if(z(),!_)throw new Le.MissingAPI;var X=p.name,J=g.autoSchema||!k?_.open(X):_.open(X,k);if(!J)throw new Le.MissingAPI;J.onerror=Un(Q),J.onblocked=yt(p._fireOnBlocked),J.onupgradeneeded=yt(function(ne){var se;te=J.transaction,g.autoSchema&&!p._options.allowEmptyDB?(J.onerror=Vs,te.abort(),J.result.close(),(se=_.deleteDatabase(X)).onsuccess=se.onerror=yt(function(){Q(new Le.NoSuchDatabase("Database ".concat(X," doesnt exist")))})):(te.onerror=Un(Q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,H=ne<1,p.idbdb=J.result,P&&rm(p,te),el(p,ne/10,te,Q))},Q),J.onsuccess=yt(function(){te=null;var ne,se,oe,fe,me,we=p.idbdb=J.result,Ce=I(we.objectStoreNames);if(0<Ce.length)try{var ve=we.transaction((fe=Ce).length===1?fe[0]:fe,"readonly");if(g.autoSchema)se=we,oe=ve,(ne=p).verno=se.version/10,oe=ne._dbSchema=Bs(0,se,oe),ne._storeNames=I(se.objectStoreNames,0),zs(ne,[ne._allTables],a(oe),oe);else if(qs(p,p._dbSchema,ve),((me=tl(Bs(0,(me=p).idbdb,ve),me._dbSchema)).add.length||me.change.some(function(Ee){return Ee.add.length||Ee.change.length}))&&!P)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),we.close(),k=we.version+1,P=!0,re(B());Xo(p,ve)}catch{}ts.push(p),we.onversionchange=yt(function(Ee){g.vcFired=!0,p.on("versionchange").fire(Ee)}),we.onclose=yt(function(){p.close({disableAutoOpen:!1})}),H&&(me=p._deps,ve=X,we=me.indexedDB,me=me.IDBKeyRange,ei(we)||ve===qo||rl(we,me).put({name:ve}).catch(ot)),re()},Q)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<k)return k=0,B()}return Ie.reject(re)})}var K,W=g.dbReadyResolve,te=null,H=!1;return Ie.race([E,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function Q(){return indexedDB.databases().finally(re)}K=setInterval(Q,100),Q()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(B)]).then(function(){return z(),g.onReadyBeingFired=[],Ie.resolve(il(function(){return p.on.ready.fire(p.vip)})).then(function re(){if(0<g.onReadyBeingFired.length){var Q=g.onReadyBeingFired.reduce(Mt,ot);return g.onReadyBeingFired=[],Ie.resolve(il(function(){return Q(p.vip)})).then(re)}})}).finally(function(){g.openCanceller===E&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(re){g.dbOpenError=re;try{te&&te.abort()}catch{}return E===g.openCanceller&&p._close(),vt(re)}).finally(function(){g.openComplete=!0,W()}).then(function(){var re;return H&&(re={},p.tables.forEach(function(Q){Q.schema.indexes.forEach(function(X){X.name&&(re["idb://".concat(p.name,"/").concat(Q.name,"/").concat(X.name)]=new tn(-1/0,[[[]]]))}),re["idb://".concat(p.name,"/").concat(Q.name,"/")]=re["idb://".concat(p.name,"/").concat(Q.name,"/:dels")]=new tn(-1/0,[[[]]])}),Zr(Jr).fire(re),xe(re,!0)),p})}function ct(p){function g(P){return p.next(P)}var _=k(g),E=k(function(P){return p.throw(P)});function k(P){return function(K){var B=P(K),K=B.value;return B.done?K:K&&typeof K.then=="function"?K.then(_,E):l(K)?Promise.all(K).then(_,E):_(K)}}return k(g)()}function Nt(p,g,_){for(var E=l(p)?p.slice():[p],k=0;k<_;++k)E.push(g);return E}var Cr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return i(i({},p),{table:function(g){var _=p.table(g),E=_.schema,k={},P=[];function z(H,re,Q){var X=Us(H),J=k[X]=k[X]||[],ne=H==null?0:typeof H=="string"?1:H.length,se=0<re,se=i(i({},Q),{name:se?"".concat(X,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:se,keyTail:re,keyLength:ne,extractKey:Za(H),unique:!se&&Q.unique});return J.push(se),se.isPrimaryKey||P.push(se),1<ne&&z(ne===2?H[0]:H.slice(0,ne-1),re+1,Q),J.sort(function(oe,fe){return oe.keyTail-fe.keyTail}),se}g=z(E.primaryKey.keyPath,0,E.primaryKey),k[":id"]=[g];for(var B=0,K=E.indexes;B<K.length;B++){var W=K[B];z(W.keyPath,0,W)}function te(H){var re,Q=H.query.index;return Q.isVirtual?i(i({},H),{query:{index:Q.lowLevelIndex,range:(re=H.query.range,Q=Q.keyTail,{type:re.type===1?2:re.type,lower:Nt(re.lower,re.lowerOpen?p.MAX_KEY:p.MIN_KEY,Q),lowerOpen:!0,upper:Nt(re.upper,re.upperOpen?p.MIN_KEY:p.MAX_KEY,Q),upperOpen:!0})}}):H}return i(i({},_),{schema:i(i({},E),{primaryKey:g,indexes:P,getIndexByKeyPath:function(H){return(H=k[Us(H)])&&H[0]}}),count:function(H){return _.count(te(H))},query:function(H){return _.query(te(H))},openCursor:function(H){var re=H.query.index,Q=re.keyTail,X=re.isVirtual,J=re.keyLength;return X?_.openCursor(te(H)).then(function(se){return se&&ne(se)}):_.openCursor(H);function ne(se){return Object.create(se,{continue:{value:function(oe){oe!=null?se.continue(Nt(oe,H.reverse?p.MAX_KEY:p.MIN_KEY,Q)):H.unique?se.continue(se.key.slice(0,J).concat(H.reverse?p.MIN_KEY:p.MAX_KEY,Q)):se.continue()}},continuePrimaryKey:{value:function(oe,fe){se.continuePrimaryKey(Nt(oe,p.MAX_KEY,Q),fe)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var oe=se.key;return J===1?oe[0]:oe.slice(0,J)}},value:{get:function(){return se.value}}})}}})}})}};function ti(p,g,_,E){return _=_||{},E=E||"",a(p).forEach(function(k){var P,z,B;h(g,k)?(P=p[k],z=g[k],typeof P=="object"&&typeof z=="object"&&P&&z?(B=G(P))!==G(z)?_[E+k]=g[k]:B==="Object"?ti(P,z,_,E+k+"."):P!==z&&(_[E+k]=g[k]):P!==z&&(_[E+k]=g[k])):_[E+k]=void 0}),a(g).forEach(function(k){h(p,k)||(_[E+k]=g[k])}),_}function kr(p,g){return g.type==="delete"?g.keys:g.keys||g.values.map(p.extractKey)}var Pi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return i(i({},p),{table:function(g){var _=p.table(g),E=_.schema.primaryKey;return i(i({},_),{mutate:function(k){var P=Oe.trans,z=P.table(g).hook,B=z.deleting,K=z.creating,W=z.updating;switch(k.type){case"add":if(K.fire===ot)break;return P._promise("readwrite",function(){return te(k)},!0);case"put":if(K.fire===ot&&W.fire===ot)break;return P._promise("readwrite",function(){return te(k)},!0);case"delete":if(B.fire===ot)break;return P._promise("readwrite",function(){return te(k)},!0);case"deleteRange":if(B.fire===ot)break;return P._promise("readwrite",function(){return function H(re,Q,X){return _.query({trans:re,values:!1,query:{index:E,range:Q},limit:X}).then(function(J){var ne=J.result;return te({type:"delete",keys:ne,trans:re}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):ne.length<X?{failures:[],numFailures:0,lastResult:void 0}:H(re,i(i({},Q),{lower:ne[ne.length-1],lowerOpen:!0}),X)})})}(k.trans,k.range,1e4)},!0)}return _.mutate(k);function te(H){var re,Q,X,J=Oe.trans,ne=H.keys||kr(E,H);if(!ne)throw new Error("Keys missing");return(H=H.type==="add"||H.type==="put"?i(i({},H),{keys:ne}):i({},H)).type!=="delete"&&(H.values=s([],H.values)),H.keys&&(H.keys=s([],H.keys)),re=_,X=ne,((Q=H).type==="add"?Promise.resolve([]):re.getMany({trans:Q.trans,keys:X,cache:"immutable"})).then(function(se){var oe=ne.map(function(fe,me){var we,Ce,ve,Ee=se[me],ke={onerror:null,onsuccess:null};return H.type==="delete"?B.fire.call(ke,fe,Ee,J):H.type==="add"||Ee===void 0?(we=K.fire.call(ke,fe,H.values[me],J),fe==null&&we!=null&&(H.keys[me]=fe=we,E.outbound||A(H.values[me],E.keyPath,fe))):(we=ti(Ee,H.values[me]),(Ce=W.fire.call(ke,we,fe,Ee,J))&&(ve=H.values[me],Object.keys(Ce).forEach(function(Te){h(ve,Te)?ve[Te]=Ce[Te]:A(ve,Te,Ce[Te])}))),ke});return _.mutate(H).then(function(fe){for(var me=fe.failures,we=fe.results,Ce=fe.numFailures,fe=fe.lastResult,ve=0;ve<ne.length;++ve){var Ee=(we||ne)[ve],ke=oe[ve];Ee==null?ke.onerror&&ke.onerror(me[ve]):ke.onsuccess&&ke.onsuccess(H.type==="put"&&se[ve]?H.values[ve]:Ee)}return{failures:me,results:we,numFailures:Ce,lastResult:fe}}).catch(function(fe){return oe.forEach(function(me){return me.onerror&&me.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function ea(p,g,_){try{if(!g||g.keys.length<p.length)return null;for(var E=[],k=0,P=0;k<g.keys.length&&P<p.length;++k)Je(g.keys[k],p[P])===0&&(E.push(_?j(g.values[k]):g.values[k]),++P);return E.length===p.length?E:null}catch{return null}}var Pu={stack:"dbcore",level:-1,create:function(p){return{table:function(g){var _=p.table(g);return i(i({},_),{getMany:function(E){if(!E.cache)return _.getMany(E);var k=ea(E.keys,E.trans._cache,E.cache==="clone");return k?Ie.resolve(k):_.getMany(E).then(function(P){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?j(P):P},P})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),_.mutate(E)}})}}}};function m_(p,g){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function g_(p,g){switch(p){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Qk={stack:"dbcore",level:0,name:"Observability",create:function(p){var g=p.schema.name,_=new tn(p.MIN_KEY,p.MAX_KEY);return i(i({},p),{transaction:function(E,k,P){if(Oe.subscr&&k!=="readonly")throw new Le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Oe.querier));return p.transaction(E,k,P)},table:function(E){var k=p.table(E),P=k.schema,z=P.primaryKey,H=P.indexes,B=z.extractKey,K=z.outbound,W=z.autoIncrement&&H.filter(function(Q){return Q.compound&&Q.keyPath.includes(z.keyPath)}),te=i(i({},k),{mutate:function(Q){function X(Te){return Te="idb://".concat(g,"/").concat(E,"/").concat(Te),fe[Te]||(fe[Te]=new tn)}var J,ne,se,oe=Q.trans,fe=Q.mutatedParts||(Q.mutatedParts={}),me=X(""),we=X(":dels"),Ce=Q.type,ke=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[kr(z,Q).filter(function(Te){return Te}),Q.values]:[],ve=ke[0],Ee=ke[1],ke=Q.trans._cache;return l(ve)?(me.addKeys(ve),(ke=Ce==="delete"||ve.length===Ee.length?ea(ve,ke):null)||we.addKeys(ve),(ke||Ee)&&(J=X,ne=ke,se=Ee,P.indexes.forEach(function(Te){var je=J(Te.name||"");function We(Xe){return Xe!=null?Te.extractKey(Xe):null}function Qe(Xe){return Te.multiEntry&&l(Xe)?Xe.forEach(function(fr){return je.addKey(fr)}):je.addKey(Xe)}(ne||se).forEach(function(Xe,In){var Ke=ne&&We(ne[In]),In=se&&We(se[In]);Je(Ke,In)!==0&&(Ke!=null&&Qe(Ke),In!=null&&Qe(In))})}))):ve?(Ee={from:(Ee=ve.lower)!==null&&Ee!==void 0?Ee:p.MIN_KEY,to:(Ee=ve.upper)!==null&&Ee!==void 0?Ee:p.MAX_KEY},we.add(Ee),me.add(Ee)):(me.add(_),we.add(_),P.indexes.forEach(function(Te){return X(Te.name).add(_)})),k.mutate(Q).then(function(Te){return!ve||Q.type!=="add"&&Q.type!=="put"||(me.addKeys(Te.results),W&&W.forEach(function(je){for(var We=Q.values.map(function(Ke){return je.extractKey(Ke)}),Qe=je.keyPath.findIndex(function(Ke){return Ke===z.keyPath}),Xe=0,fr=Te.results.length;Xe<fr;++Xe)We[Xe][Qe]=Te.results[Xe];X(je.name).addKeys(We)})),oe.mutatedParts=d(oe.mutatedParts||{},fe),Te})}}),H=function(X){var J=X.query,X=J.index,J=J.range;return[X,new tn((X=J.lower)!==null&&X!==void 0?X:p.MIN_KEY,(J=J.upper)!==null&&J!==void 0?J:p.MAX_KEY)]},re={get:function(Q){return[z,new tn(Q.key)]},getMany:function(Q){return[z,new tn().addKeys(Q.keys)]},count:H,query:H,openCursor:H};return a(re).forEach(function(Q){te[Q]=function(X){var J=Oe.subscr,ne=!!J,se=m_(Oe,k)&&g_(Q,X)?X.obsSet={}:J;if(ne){var oe=function(Ee){return Ee="idb://".concat(g,"/").concat(E,"/").concat(Ee),se[Ee]||(se[Ee]=new tn)},fe=oe(""),me=oe(":dels"),J=re[Q](X),ne=J[0],J=J[1];if((Q==="query"&&ne.isPrimaryKey&&!X.values?me:oe(ne.name||"")).add(J),!ne.isPrimaryKey){if(Q!=="count"){var we=Q==="query"&&K&&X.values&&k.query(i(i({},X),{values:!1}));return k[Q].apply(this,arguments).then(function(Ee){if(Q==="query"){if(K&&X.values)return we.then(function(We){return We=We.result,fe.addKeys(We),Ee});var ke=X.values?Ee.result.map(B):Ee.result;(X.values?fe:me).addKeys(ke)}else if(Q==="openCursor"){var Te=Ee,je=X.values;return Te&&Object.create(Te,{key:{get:function(){return me.addKey(Te.primaryKey),Te.key}},primaryKey:{get:function(){var We=Te.primaryKey;return me.addKey(We),We}},value:{get:function(){return je&&fe.addKey(Te.primaryKey),Te.value}}})}return Ee})}me.add(_)}}return k[Q].apply(this,arguments)}}),te}})}};function y_(p,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var E=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===E?null:(g=i({},g),l(g.keys)&&(g.keys=g.keys.filter(function(k,P){return!(P in _.failures)})),"values"in g&&l(g.values)&&(g.values=g.values.filter(function(k,P){return!(P in _.failures)})),g)}function im(p,g){return _=p,((E=g).lower===void 0||(E.lowerOpen?0<Je(_,E.lower):0<=Je(_,E.lower)))&&(p=p,(g=g).upper===void 0||(g.upperOpen?Je(p,g.upper)<0:Je(p,g.upper)<=0));var _,E}function v_(p,g,re,E,k,P){if(!re||re.length===0)return p;var z=g.query.index,B=z.multiEntry,K=g.query.range,W=E.schema.primaryKey.extractKey,te=z.extractKey,H=(z.lowLevelIndex||z).extractKey,re=re.reduce(function(Q,X){var J=Q,ne=[];if(X.type==="add"||X.type==="put")for(var se=new tn,oe=X.values.length-1;0<=oe;--oe){var fe,me=X.values[oe],we=W(me);se.hasKey(we)||(fe=te(me),(B&&l(fe)?fe.some(function(Te){return im(Te,K)}):im(fe,K))&&(se.addKey(we),ne.push(me)))}switch(X.type){case"add":var Ce=new tn().addKeys(g.values?Q.map(function(je){return W(je)}):Q),J=Q.concat(g.values?ne.filter(function(je){return je=W(je),!Ce.hasKey(je)&&(Ce.addKey(je),!0)}):ne.map(function(je){return W(je)}).filter(function(je){return!Ce.hasKey(je)&&(Ce.addKey(je),!0)}));break;case"put":var ve=new tn().addKeys(X.values.map(function(je){return W(je)}));J=Q.filter(function(je){return!ve.hasKey(g.values?W(je):je)}).concat(g.values?ne:ne.map(function(je){return W(je)}));break;case"delete":var Ee=new tn().addKeys(X.keys);J=Q.filter(function(je){return!Ee.hasKey(g.values?W(je):je)});break;case"deleteRange":var ke=X.range;J=Q.filter(function(je){return!im(W(je),ke)})}return J},p);return re===p?p:(re.sort(function(Q,X){return Je(H(Q),H(X))||Je(W(Q),W(X))}),g.limit&&g.limit<1/0&&(re.length>g.limit?re.length=g.limit:p.length===g.limit&&re.length<g.limit&&(k.dirty=!0)),P?Object.freeze(re):re)}function __(p,g){return Je(p.lower,g.lower)===0&&Je(p.upper,g.upper)===0&&!!p.lowerOpen==!!g.lowerOpen&&!!p.upperOpen==!!g.upperOpen}function Yk(p,g){return function(_,E,k,P){if(_===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=Je(_,E))===0){if(k&&P)return 0;if(k)return 1;if(P)return-1}return E}(p.lower,g.lower,p.lowerOpen,g.lowerOpen)<=0&&0<=function(_,E,k,P){if(_===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=Je(_,E))===0){if(k&&P)return 0;if(k)return-1;if(P)return 1}return E}(p.upper,g.upper,p.upperOpen,g.upperOpen)}function Xk(p,g,_,E){p.subscribers.add(_),E.addEventListener("abort",function(){var k,P;p.subscribers.delete(_),p.subscribers.size===0&&(k=p,P=g,setTimeout(function(){k.subscribers.size===0&&ee(P,k)},3e3))})}var Jk={stack:"dbcore",level:0,name:"Cache",create:function(p){var g=p.schema.name;return i(i({},p),{transaction:function(_,E,k){var P,z,B=p.transaction(_,E,k);return E==="readwrite"&&(z=(P=new AbortController).signal,k=function(K){return function(){if(P.abort(),E==="readwrite"){for(var W=new Set,te=0,H=_;te<H.length;te++){var re=H[te],Q=S["idb://".concat(g,"/").concat(re)];if(Q){var X=p.table(re),J=Q.optimisticOps.filter(function(je){return je.trans===B});if(B._explicit&&K&&B.mutatedParts)for(var ne=0,se=Object.values(Q.queries.query);ne<se.length;ne++)for(var oe=0,fe=(Ce=se[ne]).slice();oe<fe.length;oe++)x((ve=fe[oe]).obsSet,B.mutatedParts)&&(ee(Ce,ve),ve.subscribers.forEach(function(je){return W.add(je)}));else if(0<J.length){Q.optimisticOps=Q.optimisticOps.filter(function(je){return je.trans!==B});for(var me=0,we=Object.values(Q.queries.query);me<we.length;me++)for(var Ce,ve,Ee,ke=0,Te=(Ce=we[me]).slice();ke<Te.length;ke++)(ve=Te[ke]).res!=null&&B.mutatedParts&&(K&&!ve.dirty?(Ee=Object.isFrozen(ve.res),Ee=v_(ve.res,ve.req,J,X,ve,Ee),ve.dirty?(ee(Ce,ve),ve.subscribers.forEach(function(je){return W.add(je)})):Ee!==ve.res&&(ve.res=Ee,ve.promise=Ie.resolve({result:Ee}))):(ve.dirty&&ee(Ce,ve),ve.subscribers.forEach(function(je){return W.add(je)})))}}}W.forEach(function(je){return je()})}}},B.addEventListener("abort",k(!1),{signal:z}),B.addEventListener("error",k(!1),{signal:z}),B.addEventListener("complete",k(!0),{signal:z})),B},table:function(_){var E=p.table(_),k=E.schema.primaryKey;return i(i({},E),{mutate:function(P){var z=Oe.trans;if(k.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return E.mutate(P);var B=S["idb://".concat(g,"/").concat(_)];return B?(z=E.mutate(P),P.type!=="add"&&P.type!=="put"||!(50<=P.values.length||kr(k,P).some(function(K){return K==null}))?(B.optimisticOps.push(P),P.mutatedParts&&le(P.mutatedParts),z.then(function(K){0<K.numFailures&&(ee(B.optimisticOps,P),(K=y_(0,P,K))&&B.optimisticOps.push(K),P.mutatedParts&&le(P.mutatedParts))}),z.catch(function(){ee(B.optimisticOps,P),P.mutatedParts&&le(P.mutatedParts)})):z.then(function(K){var W=y_(0,i(i({},P),{values:P.values.map(function(te,H){var re;return K.failures[H]?te:(te=(re=k.keyPath)!==null&&re!==void 0&&re.includes(".")?j(te):i({},te),A(te,k.keyPath,K.results[H]),te)})}),K);B.optimisticOps.push(W),queueMicrotask(function(){return P.mutatedParts&&le(P.mutatedParts)})}),z):E.mutate(P)},query:function(P){if(!m_(Oe,E)||!g_("query",P))return E.query(P);var z=((W=Oe.trans)===null||W===void 0?void 0:W.db._options.cache)==="immutable",H=Oe,B=H.requery,K=H.signal,W=function(X,J,ne,se){var oe=S["idb://".concat(X,"/").concat(J)];if(!oe)return[];if(!(J=oe.queries[ne]))return[null,!1,oe,null];var fe=J[(se.query?se.query.index.name:null)||""];if(!fe)return[null,!1,oe,null];switch(ne){case"query":var me=fe.find(function(we){return we.req.limit===se.limit&&we.req.values===se.values&&__(we.req.query.range,se.query.range)});return me?[me,!0,oe,fe]:[fe.find(function(we){return("limit"in we.req?we.req.limit:1/0)>=se.limit&&(!se.values||we.req.values)&&Yk(we.req.query.range,se.query.range)}),!1,oe,fe];case"count":return me=fe.find(function(we){return __(we.req.query.range,se.query.range)}),[me,!!me,oe,fe]}}(g,_,"query",P),te=W[0],H=W[1],re=W[2],Q=W[3];return te&&H?te.obsSet=P.obsSet:(H=E.query(P).then(function(X){var J=X.result;if(te&&(te.res=J),z){for(var ne=0,se=J.length;ne<se;++ne)Object.freeze(J[ne]);Object.freeze(J)}else X.result=j(J);return X}).catch(function(X){return Q&&te&&ee(Q,te),Promise.reject(X)}),te={obsSet:P.obsSet,promise:H,subscribers:new Set,type:"query",req:P,dirty:!1},Q?Q.push(te):(Q=[te],(re=re||(S["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[P.query.index.name||""]=Q)),Xk(te,Q,B,K),te.promise.then(function(X){return{result:v_(X.result,P,re==null?void 0:re.optimisticOps,E,te,z)}})}})}})}};function zh(p,g){return new Proxy(p,{get:function(_,E,k){return E==="db"?g:Reflect.get(_,E,k)}})}var as=($t.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Le.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var g=this._versions,_=g.filter(function(E){return E._cfg.version===p})[0];return _||(_=new this.Version(p),g.push(_),g.sort(Uh),_.stores({}),this._state.autoSchema=!1,_)},$t.prototype._whenReady=function(p){var g=this;return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?p():new Ie(function(_,E){if(g._state.openComplete)return E(new Le.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void E(new Le.DatabaseClosed);g.open().catch(ot)}g._state.dbReadyPromise.then(_,E)}).then(p)},$t.prototype.use=function(p){var g=p.stack,_=p.create,E=p.level,k=p.name;return k&&this.unuse({stack:g,name:k}),p=this._middlewares[g]||(this._middlewares[g]=[]),p.push({stack:g,create:_,level:E??10,name:k}),p.sort(function(P,z){return P.level-z.level}),this},$t.prototype.unuse=function(p){var g=p.stack,_=p.name,E=p.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(k){return E?k.create!==E:!!_&&k.name!==_})),this},$t.prototype.open=function(){var p=this;return Sr(Wt,function(){return zt(p)})},$t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,g=ts.indexOf(this);if(0<=g&&ts.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new Ie(function(_){p.dbReadyResolve=_}),p.openCanceller=new Ie(function(_,E){p.cancelOpen=E}))},$t.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new Le.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Le.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},$t.prototype.delete=function(p){var g=this;p===void 0&&(p={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ie(function(k,P){function z(){g.close(p);var B=g._deps.indexedDB.deleteDatabase(g.name);B.onsuccess=yt(function(){var K,W,te;K=g._deps,W=g.name,te=K.indexedDB,K=K.IDBKeyRange,ei(te)||W===qo||rl(te,K).delete(W).catch(ot),k()}),B.onerror=Un(P),B.onblocked=g._fireOnBlocked}if(_)throw new Le.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(z):z()})},$t.prototype.backendDB=function(){return this.idbdb},$t.prototype.isOpen=function(){return this.idbdb!==null},$t.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},$t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},$t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty($t.prototype,"tables",{get:function(){var p=this;return a(this._allTables).map(function(g){return p._allTables[g]})},enumerable:!1,configurable:!0}),$t.prototype.transaction=function(){var p=(function(g,_,E){var k=arguments.length;if(k<2)throw new Le.InvalidArgument("Too few arguments");for(var P=new Array(k-1);--k;)P[k-1]=arguments[k];return E=P.pop(),[g,M(P),E]}).apply(this,arguments);return this._transaction.apply(this,p)},$t.prototype._transaction=function(p,g,_){var E=this,k=Oe.trans;k&&k.db===this&&p.indexOf("!")===-1||(k=null);var P,z,B=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(z=g.map(function(W){if(W=W instanceof E.Table?W.name:W,typeof W!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return W}),p=="r"||p===Wa)P=Wa;else{if(p!="rw"&&p!=Ho)throw new Le.InvalidArgument("Invalid transaction mode: "+p);P=Ho}if(k){if(k.mode===Wa&&P===Ho){if(!B)throw new Le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&z.forEach(function(W){if(k&&k.storeNames.indexOf(W)===-1){if(!B)throw new Le.SubTransaction("Table "+W+" not included in parent transaction.");k=null}}),B&&k&&!k.active&&(k=null)}}catch(W){return k?k._promise(null,function(te,H){H(W)}):vt(W)}var K=(function W(te,H,re,Q,X){return Ie.resolve().then(function(){var J=Oe.transless||Oe,ne=te._createTransaction(H,re,te._dbSchema,Q);if(ne.explicit=!0,J={trans:ne,transless:J},Q)ne.idbtrans=Q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,te._state.PR1398_maxLoop=3}catch(fe){return fe.name===Ge.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return W(te,H,re,null,X)})):vt(fe)}var se,oe=be(X);return oe&&Ii(),J=Ie.follow(function(){var fe;(se=X.call(ne,ne))&&(oe?(fe=Ir.bind(null,null),se.then(fe,fe)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=ct(se)))},J),(se&&typeof se.then=="function"?Ie.resolve(se).then(function(fe){return ne.active?fe:vt(new Le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):J.then(function(){return se})).then(function(fe){return Q&&ne._resolve(),ne._completion.then(function(){return fe})}).catch(function(fe){return ne._reject(fe),vt(fe)})})}).bind(null,this,P,z,k,_);return k?k._promise(P,K,"lock"):Oe.trans?Sr(Oe.transless,function(){return E._whenReady(K)}):this._whenReady(K)},$t.prototype.table=function(p){if(!h(this._allTables,p))throw new Le.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},$t);function $t(p,g){var _=this;this._middlewares={},this.verno=0;var E=$t.dependencies;this._options=g=i({addons:$t.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},E=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var k,P,z,B,K,W={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ot,dbReadyPromise:null,cancelOpen:ot,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};W.dbReadyPromise=new Ie(function(H){W.dbReadyResolve=H}),W.openCanceller=new Ie(function(H,re){W.cancelOpen=re}),this._state=W,this.name=p,this.on=Yr(this,"populate","blocked","versionchange","close",{ready:[Mt,ot]}),this.once=function(H,re){var Q=function(){for(var X=[],J=0;J<arguments.length;J++)X[J]=arguments[J];_.on(H).unsubscribe(Q),re.apply(_,X)};return _.on(H,Q)},this.on.ready.subscribe=N(this.on.ready.subscribe,function(H){return function(re,Q){$t.vip(function(){var X,J=_._state;J.openComplete?(J.dbOpenError||Ie.resolve().then(re),Q&&H(re)):J.onReadyBeingFired?(J.onReadyBeingFired.push(re),Q&&H(re)):(H(re),X=_,Q||H(function ne(){X.on.ready.unsubscribe(re),X.on.ready.unsubscribe(ne)}))})}}),this.Collection=(k=this,Wo(Dh.prototype,function(se,ne){this.db=k;var Q=bu,X=null;if(ne)try{Q=ne()}catch(oe){X=oe}var J=se._ctx,ne=J.table,se=ne.hook.reading.fire;this._ctx={table:ne,index:J.index,isPrimKey:!J.index||ne.schema.primKey.keyPath&&J.index===ne.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:X,or:J.or,valueMapper:se!==Br?se:null}})),this.Table=(P=this,Wo(Go.prototype,function(H,re,Q){this.db=P,this._tx=Q,this.name=H,this.schema=re,this.hook=P._allTables[H]?P._allTables[H].hook:Yr(null,{creating:[Gt,ot],reading:[Se,Br],updating:[Qn,ot],deleting:[Dt,ot]})})),this.Transaction=(z=this,Wo(Cu.prototype,function(H,re,Q,X,J){var ne=this;H!=="readonly"&&re.forEach(function(se){se=(se=Q[se])===null||se===void 0?void 0:se.yProps,se&&(re=re.concat(se.map(function(oe){return oe.updatesTable})))}),this.db=z,this.mode=H,this.storeNames=re,this.schema=Q,this.chromeTransactionDurability=X,this.idbtrans=null,this.on=Yr(this,"complete","error","abort"),this.parent=J||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(se,oe){ne._resolve=se,ne._reject=oe}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(se){var oe=ne.active;return ne.active=!1,ne.on.error.fire(se),ne.parent?ne.parent._reject(se):oe&&ne.idbtrans&&ne.idbtrans.abort(),vt(se)})})),this.Version=(B=this,Wo(nl.prototype,function(H){this.db=B,this._cfg={version:H,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,Wo(Vh.prototype,function(H,re,Q){if(this.db=K,this._ctx={table:H,index:re===":id"?null:re,or:Q},this._cmp=this._ascending=Je,this._descending=function(X,J){return Je(J,X)},this._max=function(X,J){return 0<Je(X,J)?X:J},this._min=function(X,J){return Je(X,J)<0?X:J},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new Le.MissingAPI})),this.on("versionchange",function(H){0<H.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(H){!H.newVersion||H.newVersion<H.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(H.oldVersion/10))}),this._maxKey=Fs(g.IDBKeyRange),this._createTransaction=function(H,re,Q,X){return new _.Transaction(H,re,Q,_._options.chromeTransactionDurability,X)},this._fireOnBlocked=function(H){_.on("blocked").fire(H),ts.filter(function(re){return re.name===_.name&&re!==_&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(H)})},this.use(Pu),this.use(Jk),this.use(Qk),this.use(Cr),this.use(Pi);var te=new Proxy(this,{get:function(H,re,Q){if(re==="_vip")return!0;if(re==="table")return function(J){return zh(_.table(J),te)};var X=Reflect.get(H,re,Q);return X instanceof Go?zh(X,te):re==="tables"?X.map(function(J){return zh(J,te)}):re==="_createTransaction"?function(){return zh(X.apply(this,arguments),te)}:X}});this.vip=te,E.forEach(function(H){return H(_)})}var $h,Ar=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Zk=(sm.prototype.subscribe=function(p,g,_){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:g,complete:_})},sm.prototype[Ar]=function(){return this},sm);function sm(p){this._subscribe=p}try{$h={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{$h={indexedDB:null,IDBKeyRange:null}}function w_(p){var g,_=!1,E=new Zk(function(k){var P=be(p),z,B=!1,K={},W={},te={get closed(){return B},unsubscribe:function(){B||(B=!0,z&&z.abort(),H&&Zr.storagemutated.unsubscribe(Q))}};k.start&&k.start(te);var H=!1,re=function(){return Bo(X)},Q=function(J){d(K,J),x(W,K)&&re()},X=function(){var J,ne,se;!B&&$h.indexedDB&&(K={},J={},z&&z.abort(),z=new AbortController,se=function(oe){var fe=lr();try{P&&Ii();var me=Hr(p,oe);return me=P?me.finally(Ir):me}finally{fe&&Ms()}}(ne={subscr:J,signal:z.signal,requery:re,querier:p,trans:null}),Promise.resolve(se).then(function(oe){_=!0,g=oe,B||ne.signal.aborted||(K={},function(fe){for(var me in fe)if(h(fe,me))return;return 1}(W=J)||H||(Zr(Jr,Q),H=!0),Bo(function(){return!B&&k.next&&k.next(oe)}))},function(oe){_=!1,["DatabaseClosedError","AbortError"].includes(oe==null?void 0:oe.name)||B||Bo(function(){B||k.error&&k.error(oe)})}))};return setTimeout(re,0),te});return E.hasValue=function(){return _},E.getValue=function(){return g},E}var ta=as;function om(p){var g=Ks;try{Ks=!0,Zr.storagemutated.fire(p),xe(p,!0)}finally{Ks=g}}m(ta,i(i({},xi),{delete:function(p){return new ta(p,{addons:[]}).delete()},exists:function(p){return new ta(p,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return g=ta.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(ei(_)?Promise.resolve(_.databases()).then(function(E){return E.map(function(k){return k.name}).filter(function(k){return k!==qo})}):rl(_,g).toCollection().primaryKeys()).then(p)}catch{return vt(new Le.MissingAPI)}var g,_},defineClass:function(){return function(p){u(this,p)}},ignoreTransaction:function(p){return Oe.trans?Sr(Oe.transless,p):p()},vip:il,async:function(p){return function(){try{var g=ct(p.apply(this,arguments));return g&&typeof g.then=="function"?g:Ie.resolve(g)}catch(_){return vt(_)}}},spawn:function(p,g,_){try{var E=ct(p.apply(_,g||[]));return E&&typeof E.then=="function"?E:Ie.resolve(E)}catch(k){return vt(k)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(p,g){return g=Ie.resolve(typeof p=="function"?ta.ignoreTransaction(p):p).timeout(g||6e4),Oe.trans?Oe.trans.waitFor(g):g},Promise:Ie,debug:{get:function(){return pn},set:function(p){qa(p)}},derive:T,extend:u,props:m,override:N,Events:Yr,on:Zr,liveQuery:w_,extendObservabilitySet:d,getByKeyPath:U,setByKeyPath:A,delByKeyPath:function(p,g){typeof g=="string"?A(p,g,void 0):"length"in g&&[].map.call(g,function(_){A(p,_,void 0)})},shallowClone:R,deepClone:j,getObjectDiff:ti,cmp:Je,asap:L,minKey:-1/0,addons:[],connections:ts,errnames:Ge,dependencies:$h,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(p){return parseInt(p)}).reduce(function(p,g,_){return p+g/Math.pow(10,2*_)})})),ta.maxKey=Fs(ta.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Zr(Jr,function(p){Ks||(p=new CustomEvent(rs,{detail:p}),Ks=!0,dispatchEvent(p),Ks=!1)}),addEventListener(rs,function(p){p=p.detail,Ks||om(p)}));var ol,Ks=!1,x_=function(){};return typeof BroadcastChannel<"u"&&((x_=function(){(ol=new BroadcastChannel(rs)).onmessage=function(p){return p.data&&om(p.data)}})(),typeof ol.unref=="function"&&ol.unref(),Zr(Jr,function(p){Ks||ol.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!as.disableBfCache&&p.persisted){pn&&console.debug("Dexie: handling persisted pagehide"),ol!=null&&ol.close();for(var g=0,_=ts;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!as.disableBfCache&&p.persisted&&(pn&&console.debug("Dexie: handling persisted pageshow"),x_(),om({all:new tn(-1/0,[[]])}))})),Ie.rejectionMapper=function(p,g){return!p||p instanceof Ae||p instanceof TypeError||p instanceof SyntaxError||!p.name||!wi[p.name]?p:(g=new wi[p.name](g||p.message,p),"stack"in p&&w(g,"stack",{get:function(){return this.inner.stack}}),g)},qa(pn),i(as,Object.freeze({__proto__:null,Dexie:as,liveQuery:w_,Entity:Eu,cmp:Je,PropModification:Qr,replacePrefix:function(p,g){return new Qr({replacePrefix:[p,g]})},add:function(p){return new Qr({add:p})},remove:function(p){return new Qr({remove:p})},default:as,RangeSet:tn,mergeRanges:Ri,rangesOverlap:Tn}),{default:as}),as})})(MI);var lO=MI.exports;const sy=ev(lO),ax=Symbol.for("Dexie"),Yl=globalThis[ax]||(globalThis[ax]=sy);if(sy.semVer!==Yl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${sy.semVer} and ${Yl.semVer}`);const{liveQuery:K7,mergeRanges:G7,rangesOverlap:W7,RangeSet:Q7,cmp:Y7,Entity:X7,PropModification:J7,replacePrefix:Z7,add:eB,remove:tB,DexieYProvider:nB}=Yl,_t=new Yl("NexusMindDB");_t.version(4).stores({contacts:"id, name, ocrText, phone, email, company, *tags, lastUpdated",settings:"id",schedules:"id, title, date, *contactIds, type"});function uO(n,e,r){var i,s;typeof n=="function"?(i=e||[],s=r):(i=[],s=e);var o=mt.useRef({hasResult:!1,result:s,error:null}),a=mt.useReducer(function(c){return c+1},0);a[0];var l=a[1],u=mt.useMemo(function(){var c=typeof n=="function"?n():n;if(!c||typeof c.subscribe!="function")throw n===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")o.current.result=c.getValue(),o.current.hasResult=!0;else{var f=c.subscribe(function(h){o.current.result=h,o.current.hasResult=!0});typeof f=="function"?f():f.unsubscribe()}return c},i);if(mt.useDebugValue(o.current.result),mt.useEffect(function(){var c=u.subscribe(function(f){var h=o.current;(h.error!==null||h.result!==f)&&(h.error=null,h.result=f,h.hasResult=!0,l())},function(f){var h=o.current;h.error!==f&&(h.error=f,l())});return typeof c=="function"?c:c.unsubscribe.bind(c)},i),o.current.error)throw o.current.error;return o.current.result}function jf(n,e,r){return uO(function(){return Yl.liveQuery(n)},e||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=Yl.DexieYProvider;e&&e.release(n)});const cO=()=>{};var lx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=function(n){const e=[];let r=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},hO=function(n){const e=[];let r=0,i=0;for(;r<n.length;){const s=n[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[r++],a=n[r++],l=n[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],a=n[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},VI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,f=o>>2,h=(o&3)<<4|l>>4;let m=(l&15)<<2|c>>6,v=c&63;u||(v=64,a||(m=64)),i.push(r[f],r[h],r[m],r[v])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=r[n.charAt(s++)],l=s<n.length?r[n.charAt(s)]:0;++s;const c=s<n.length?r[n.charAt(s)]:64;++s;const h=s<n.length?r[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||h==null)throw new fO;const m=o<<2|l>>4;if(i.push(m),c!==64){const v=l<<4&240|c>>2;if(i.push(v),h!==64){const w=c<<6&192|h;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dO=function(n){const e=LI(n);return VI.encodeByteArray(e,!0)},Ed=function(n){return dO(n).replace(/\./g,"")},FI=function(n){try{return VI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=()=>pO().__FIREBASE_DEFAULTS__,gO=()=>{if(typeof process>"u"||typeof lx>"u")return;const n=lx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&FI(n[1]);return e&&JSON.parse(e)},Ep=()=>{try{return cO()||mO()||gO()||yO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},UI=n=>{var e,r;return(r=(e=Ep())==null?void 0:e.emulatorHosts)==null?void 0:r[n]},vO=n=>{const e=UI(n);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},zI=()=>{var n;return(n=Ep())==null?void 0:n.config},$I=n=>{var e;return(e=Ep())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ed(JSON.stringify(r)),Ed(JSON.stringify(a)),""].join(".")}const vc={};function xO(){const n={prod:[],emulator:[]};for(const e of Object.keys(vc))vc[e]?n.emulator.push(e):n.prod.push(e);return n}function bO(n){let e=document.getElementById(n),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),r=!0),{created:r,element:e}}let ux=!1;function qI(n,e){if(typeof window>"u"||typeof document>"u"||!hu(window.location.host)||vc[n]===e||vc[n]||ux)return;vc[n]=e;function r(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=xO().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ux=!0,a()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=bO(i),v=r("text"),w=document.getElementById(v)||document.createElement("span"),T=r("learnmore"),C=document.getElementById(T)||document.createElement("a"),b=r("preprendIcon"),I=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),f(C,T);const O=c();u(I,b),N.append(I,w,C,O),document.body.appendChild(N)}o?(w.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function TO(){var e;const n=(e=Ep())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function SO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CO(){const n=Mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kO(){return!TO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KI(){try{return typeof indexedDB=="object"}catch{return!1}}function GI(){return new Promise((n,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function AO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="FirebaseError";class vi extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=NO,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ua.prototype.create)}}class Ua{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?RO(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new vi(s,l,i)}}function RO(n,e){return n.replace(PO,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const PO=/\{\$([^}]+)}/g;function OO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e){if(n===e)return!0;const r=Object.keys(n),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(cx(o)&&cx(a)){if(!So(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function cx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n){const e=[];for(const[r,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jO(n,e){const r=new DO(n,e);return r.subscribe.bind(r)}class DO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");MO(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Dm),s.error===void 0&&(s.error=Dm),s.complete===void 0&&(s.complete=Dm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MO(n,e){if(typeof n!="object"||n===null)return!1;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1e3,VO=2,FO=4*60*60*1e3,UO=.5;function hx(n,e=LO,r=VO){const i=e*Math.pow(r,n),s=Math.round(UO*i*(Math.random()-.5)*2);return Math.min(FO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class gi{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new _O;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BO(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){const i=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(n){return n===oa?void 0:n}function BO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new zO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(tt||(tt={}));const HO={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},KO=tt.INFO,GO={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},WO=(n,e,...r)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=GO[e];if(s)console[s](`[${i}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=WO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const QO=(n,e)=>e.some(r=>n instanceof r);let fx,dx;function YO(){return fx||(fx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XO(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WI=new WeakMap,oy=new WeakMap,QI=new WeakMap,Mm=new WeakMap,Zv=new WeakMap;function JO(n){const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(wo(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&WI.set(r,n)}).catch(()=>{}),Zv.set(e,n),e}function ZO(n){if(oy.has(n))return;const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});oy.set(n,e)}let ay={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return oy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QI.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wo(n[e])},set(n,e,r){return n[e]=r,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ej(n){ay=n(ay)}function tj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=n.call(Lm(this),e,...r);return QI.set(i,e.sort?e.sort():[e]),wo(i)}:XO().includes(n)?function(...e){return n.apply(Lm(this),e),wo(WI.get(this))}:function(...e){return wo(n.apply(Lm(this),e))}}function nj(n){return typeof n=="function"?tj(n):(n instanceof IDBTransaction&&ZO(n),QO(n,YO())?new Proxy(n,ay):n)}function wo(n){if(n instanceof IDBRequest)return JO(n);if(Mm.has(n))return Mm.get(n);const e=nj(n);return e!==n&&(Mm.set(n,e),Zv.set(e,n)),e}const Lm=n=>Zv.get(n);function YI(n,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=wo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(wo(a.result),u.oldVersion,u.newVersion,wo(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const rj=["get","getKey","getAll","getAllKeys","count"],ij=["put","add","delete","clear"],Vm=new Map;function px(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=ij.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||rj.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Vm.set(e,o),o}ej(n=>({...n,get:(e,r,i)=>px(e,r)||n.get(e,r,i),has:(e,r)=>!!px(e,r)||n.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(oj(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function oj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ly="@firebase/app",mx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Tp("@firebase/app"),aj="@firebase/app-compat",lj="@firebase/analytics-compat",uj="@firebase/analytics",cj="@firebase/app-check-compat",hj="@firebase/app-check",fj="@firebase/auth",dj="@firebase/auth-compat",pj="@firebase/database",mj="@firebase/data-connect",gj="@firebase/database-compat",yj="@firebase/functions",vj="@firebase/functions-compat",_j="@firebase/installations",wj="@firebase/installations-compat",xj="@firebase/messaging",bj="@firebase/messaging-compat",Ej="@firebase/performance",Tj="@firebase/performance-compat",Ij="@firebase/remote-config",Sj="@firebase/remote-config-compat",Cj="@firebase/storage",kj="@firebase/storage-compat",Aj="@firebase/firestore",Nj="@firebase/ai",Rj="@firebase/firestore-compat",Pj="firebase",Oj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="[DEFAULT]",jj={[ly]:"fire-core",[aj]:"fire-core-compat",[uj]:"fire-analytics",[lj]:"fire-analytics-compat",[hj]:"fire-app-check",[cj]:"fire-app-check-compat",[fj]:"fire-auth",[dj]:"fire-auth-compat",[pj]:"fire-rtdb",[mj]:"fire-data-connect",[gj]:"fire-rtdb-compat",[yj]:"fire-fn",[vj]:"fire-fn-compat",[_j]:"fire-iid",[wj]:"fire-iid-compat",[xj]:"fire-fcm",[bj]:"fire-fcm-compat",[Ej]:"fire-perf",[Tj]:"fire-perf-compat",[Ij]:"fire-rc",[Sj]:"fire-rc-compat",[Cj]:"fire-gcs",[kj]:"fire-gcs-compat",[Aj]:"fire-fst",[Rj]:"fire-fst-compat",[Nj]:"fire-vertex","fire-js":"fire-js",[Pj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Map,Dj=new Map,cy=new Map;function gx(n,e){try{n.container.addComponent(e)}catch(r){As.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function Wi(n){const e=n.name;if(cy.has(e))return As.debug(`There were multiple attempts to register component ${e}.`),!1;cy.set(e,n);for(const r of Td.values())gx(r,n);for(const r of Dj.values())gx(r,n);return!0}function za(n,e){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function ai(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new Ua("app","Firebase",Mj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,r,i){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=Oj;function XI(n,e={}){let r=n;typeof e!="object"&&(e={name:e});const i={name:uy,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw xo.create("bad-app-name",{appName:String(s)});if(r||(r=zI()),!r)throw xo.create("no-options");const o=Td.get(s);if(o){if(So(r,o.options)&&So(i,o.config))return o;throw xo.create("duplicate-app",{appName:s})}const a=new qO(s);for(const u of cy.values())a.addComponent(u);const l=new Lj(r,i,a);return Td.set(s,l),l}function e0(n=uy){const e=Td.get(n);if(!e&&n===uy&&zI())return XI();if(!e)throw xo.create("no-app",{appName:n});return e}function Fr(n,e,r){let i=jj[n]??n;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),As.warn(a.join(" "));return}Wi(new gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="firebase-heartbeat-database",Fj=1,Wc="firebase-heartbeat-store";let Fm=null;function JI(){return Fm||(Fm=YI(Vj,Fj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wc)}catch(r){console.warn(r)}}}}).catch(n=>{throw xo.create("idb-open",{originalErrorMessage:n.message})})),Fm}async function Uj(n){try{const r=(await JI()).transaction(Wc),i=await r.objectStore(Wc).get(ZI(n));return await r.done,i}catch(e){if(e instanceof vi)As.warn(e.message);else{const r=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});As.warn(r.message)}}}async function yx(n,e){try{const i=(await JI()).transaction(Wc,"readwrite");await i.objectStore(Wc).put(e,ZI(n)),await i.done}catch(r){if(r instanceof vi)As.warn(r.message);else{const i=xo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});As.warn(i.message)}}}function ZI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=1024,$j=30;class Bj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Hj(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>$j){const a=Kj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){As.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=vx(),{heartbeatsToSend:i,unsentEntries:s}=qj(this._heartbeatsCache.heartbeats),o=Ed(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return As.warn(r),""}}}function vx(){return new Date().toISOString().substring(0,10)}function qj(n,e=zj){const r=[];let i=n.slice();for(const s of n){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),_x(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),_x(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class Hj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KI()?GI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Uj(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _x(n){return Ed(JSON.stringify({version:2,heartbeats:n})).length}function Kj(n){if(n.length===0)return-1;let e=0,r=n[0].date;for(let i=1;i<n.length;i++)n[i].date<r&&(r=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(n){Wi(new gi("platform-logger",e=>new sj(e),"PRIVATE")),Wi(new gi("heartbeat",e=>new Bj(e),"PRIVATE")),Fr(ly,mx,n),Fr(ly,mx,"esm2020"),Fr("fire-js","")}Gj("");var Wj="firebase",Qj="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr(Wj,Qj,"app");function e2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yj=e2,t2=new Ua("auth","Firebase",e2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Tp("@firebase/auth");function Xj(n,...e){Id.logLevel<=tt.WARN&&Id.warn(`Auth (${fu}): ${n}`,...e)}function Df(n,...e){Id.logLevel<=tt.ERROR&&Id.error(`Auth (${fu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(n,...e){throw n0(n,...e)}function di(n,...e){return n0(n,...e)}function t0(n,e,r){const i={...Yj(),[e]:r};return new Ua("auth","Firebase",i).create(e,{appName:n.name})}function _a(n){return t0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jj(n,e,r){const i=r;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qi(n,"argument-error"),t0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function n0(n,...e){if(typeof n!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(r,...i)}return t2.create(n,...e)}function ze(n,e,...r){if(!n)throw n0(e,...r)}function vs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Df(e),new Error(e)}function Ns(n,e){n||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Zj(){return wx()==="http:"||wx()==="https:"}function wx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zj()||HI()||"connection"in navigator)?navigator.onLine:!0}function tD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ns(r>e,"Short delay should be less than long delay!"),this.isMobile=EO()||SO()}get(){return eD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e){Ns(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iD=new gh(3e4,6e4);function i0(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function du(n,e,r,i,s={}){return r2(n,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=mh({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:u,...o};return IO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&hu(n.emulatorConfig.host)&&(c.credentials="include"),n2.fetch()(await i2(n,n.config.apiHost,r,l),c)})}async function r2(n,e,r){n._canInitEmulator=!1;const i={...nD,...e};try{const s=new oD(n),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw lf(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw lf(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw lf(n,"user-disabled",a);const f=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw t0(n,f,c);Qi(n,f)}}catch(s){if(s instanceof vi)throw s;Qi(n,"network-request-failed",{message:String(s)})}}async function sD(n,e,r,i,s={}){const o=await du(n,e,r,i,s);return"mfaPendingCredential"in o&&Qi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function i2(n,e,r,i){const s=`${e}${r}?${i}`,o=n,a=o.config.emulator?r0(n.config,s):`${n.config.apiScheme}://${s}`;return rD.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class oD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(di(this.auth,"network-request-failed")),iD.get())})}}function lf(n,e,r){const i={appName:n.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=di(n,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(n,e){return du(n,"POST","/v1/accounts:delete",e)}async function Sd(n,e){return du(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lD(n,e=!1){const r=Ht(n),i=await r.getIdToken(e),s=s0(i);ze(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:_c(Um(s.auth_time)),issuedAtTime:_c(Um(s.iat)),expirationTime:_c(Um(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Um(n){return Number(n)*1e3}function s0(n){const[e,r,i]=n.split(".");if(e===void 0||r===void 0||i===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const s=FI(r);return s?JSON.parse(s):(Df("Failed to decode base64 JWT payload"),null)}catch(s){return Df("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xx(n){const e=s0(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(n,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof vi&&uD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function uD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(n){var h;const e=n.auth,r=await n.getIdToken(),i=await Qc(n,Sd(e,{idToken:r}));ze(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(h=s.providerUserInfo)!=null&&h.length?s2(s.providerUserInfo):[],a=fD(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,f)}async function hD(n){const e=Ht(n);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fD(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function s2(n){return n.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(n,e){const r=await r2(n,{},async()=>{const i=mh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await i2(n,s,"/v1/token",`key=${o}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return n.emulatorConfig&&hu(n.emulatorConfig.host)&&(u.credentials="include"),n2.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function pD(n,e){return du(n,"POST","/v2/accounts:revokeToken",i0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const r=xx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await dD(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new jl;return i&&(ze(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(ze(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(ze(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ui{constructor({uid:e,auth:r,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new cD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Qc(this,this.stsTokenManager.getToken(this.auth,e));return ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return lD(this,e)}reload(){return hD(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ui({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await Cd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(_a(this.auth));const e=await this.getIdToken();return await Qc(this,aD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const i=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,c=r.createdAt??void 0,f=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:v,providerData:w,stsTokenManager:T}=r;ze(h&&T,e,"internal-error");const C=jl.fromJSON(this.name,T);ze(typeof h=="string",e,"internal-error"),Ws(i,e.name),Ws(s,e.name),ze(typeof m=="boolean",e,"internal-error"),ze(typeof v=="boolean",e,"internal-error"),Ws(o,e.name),Ws(a,e.name),Ws(l,e.name),Ws(u,e.name),Ws(c,e.name),Ws(f,e.name);const b=new ui({uid:h,auth:e,email:s,emailVerified:m,displayName:i,isAnonymous:v,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:C,createdAt:c,lastLoginAt:f});return w&&Array.isArray(w)&&(b.providerData=w.map(I=>({...I}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,r,i=!1){const s=new jl;s.updateFromServerResponse(r);const o=new ui({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Cd(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];ze(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?s2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new jl;l.updateFromIdToken(i);const u=new ui({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Map;function _s(n){Ns(n instanceof Function,"Expected a class definition");let e=bx.get(n);return e?(Ns(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}o2.type="NONE";const Ex=o2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,e,r){return`firebase:${n}:${e}:${r}`}class Dl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Mf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Mf("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Sd(this.auth,{idToken:e}).catch(()=>{});return r?ui._fromGetAccountInfoResponse(this.auth,r,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Dl(_s(Ex),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||_s(Ex);const a=Mf(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const f=await c._get(a);if(f){let h;if(typeof f=="string"){const m=await Sd(e,{idToken:f}).catch(()=>{});if(!m)break;h=await ui._fromGetAccountInfoResponse(e,m,f)}else h=ui._fromJSON(e,f);c!==o&&(l=h),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Dl(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Dl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f2(e))return"Blackberry";if(d2(e))return"Webos";if(l2(e))return"Safari";if((e.includes("chrome/")||u2(e))&&!e.includes("edge/"))return"Chrome";if(h2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function a2(n=Mn()){return/firefox\//i.test(n)}function l2(n=Mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u2(n=Mn()){return/crios\//i.test(n)}function c2(n=Mn()){return/iemobile/i.test(n)}function h2(n=Mn()){return/android/i.test(n)}function f2(n=Mn()){return/blackberry/i.test(n)}function d2(n=Mn()){return/webos/i.test(n)}function o0(n=Mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mD(n=Mn()){var e;return o0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function gD(){return CO()&&document.documentMode===10}function p2(n=Mn()){return o0(n)||h2(n)||d2(n)||f2(n)||/windows phone/i.test(n)||c2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n,e=[]){let r;switch(n){case"Browser":r=Tx(Mn());break;case"Worker":r=`${Tx(Mn())}-${n}`;break;default:r=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${fu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(n,e={}){return du(n,"GET","/v2/passwordPolicy",i0(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=6;class wD{constructor(e){var i;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??_D,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ix(this),this.idTokenSubscription=new Ix(this),this.beforeStateQueue=new yD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_s(r)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Sd(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ai(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(_a(this));const r=e?Ht(e):null;return r&&ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(_a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(_a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vD(this),r=new wD(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ua("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await pD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_s(e)||this._popupRedirectResolver;ze(r,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[_s(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var r;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&Xj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ip(n){return Ht(n)}class Ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=jO(r=>this.observer=r)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bD(n){a0=n}function ED(n){return a0.loadJS(n)}function TD(){return a0.gapiScript}function ID(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n,e){const r=za(n,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(So(o,e??{}))return s;Qi(s,"already-initialized")}return r.initialize({options:e})}function CD(n,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(_s);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function kD(n,e,r){const i=Ip(n);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=g2(e),{host:a,port:l}=AD(e),u=l===null?"":`:${l}`,c={url:`${o}//${a}${u}/`},f=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(So(c,i.config.emulator)&&So(f,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=f,i.settings.appVerificationDisabledForTesting=!0,hu(a)?(BI(`${o}//${a}${u}`),qI("Auth",!0)):ND()}function g2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AD(n){const e=g2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Sx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:Sx(a)}}}function Sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ND(){function n(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,r){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n,e){return sD(n,"POST","/v1/accounts:signInWithIdp",i0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="http://localhost";class Na extends y2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Qi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=r;if(!i||!s)return null;const a=new Na(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ml(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Ml(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ml(e,r)}buildRequest(){const e={requestUri:RD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=mh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends l0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends yh{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Na._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return ms.credential(r,i)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends yh{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.GITHUB_SIGN_IN_METHOD="github.com";io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends yh{constructor(){super("twitter.com")}static credential(e,r){return Na._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return so.credential(r,i)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await ui._fromIdTokenResponse(e,i,s),a=Cx(i);return new Xl({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=Cx(i);return new Xl({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function Cx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends vi{constructor(e,r,i,s){super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new kd(e,r,i,s)}}function v2(n,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(n,o,e,i):o})}async function PD(n,e,r=!1){const i=await Qc(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Xl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e,r=!1){const{auth:i}=n;if(ai(i.app))return Promise.reject(_a(i));const s="reauthenticate";try{const o=await Qc(n,v2(i,s,e,n),r);ze(o.idToken,i,"internal-error");const a=s0(o.idToken);ze(a,i,"internal-error");const{sub:l}=a;return ze(n.uid===l,i,"user-mismatch"),Xl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Qi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n,e,r=!1){if(ai(n.app))return Promise.reject(_a(n));const i="signIn",s=await v2(n,i,e),o=await Xl._fromIdTokenResponse(n,i,s);return r||await n._updateCurrentUser(o.user),o}function DD(n,e,r,i){return Ht(n).onIdTokenChanged(e,r,i)}function MD(n,e,r){return Ht(n).beforeAuthStateChanged(e,r)}function LD(n,e,r,i){return Ht(n).onAuthStateChanged(e,r,i)}function VD(n){return Ht(n).signOut()}const Ad="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=1e3,UD=10;class w2 extends _2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UD):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},FD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}w2.type="LOCAL";const zD=w2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends _2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}x2.type="SESSION";const b2=x2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new Sp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await $D(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=u0("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function qD(n){Bi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function HD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function GD(){return E2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebaseLocalStorageDb",WD=1,Nd="firebaseLocalStorage",I2="fbase_key";class vh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Cp(n,e){return n.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function QD(){const n=indexedDB.deleteDatabase(T2);return new vh(n).toPromise()}function dy(){const n=indexedDB.open(T2,WD);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Nd,{keyPath:I2})}catch(s){r(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Nd)?e(i):(i.close(),await QD(),e(await dy()))})})}async function kx(n,e,r){const i=Cp(n,!0).put({[I2]:e,value:r});return new vh(i).toPromise()}async function YD(n,e){const r=Cp(n,!1).get(e),i=await new vh(r).toPromise();return i===void 0?null:i.value}function Ax(n,e){const r=Cp(n,!0).delete(e);return new vh(r).toPromise()}const XD=800,JD=3;class S2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dy(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>JD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sp._getInstance(GD()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await HD(),!this.activeServiceWorker)return;this.sender=new BD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dy();return await kx(e,Ad,"1"),await Ax(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>kx(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>YD(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ax(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Cp(s,!1).getAll();return new vh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S2.type="LOCAL";const ZD=S2;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(n,e){return e?_s(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends y2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ml(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function e4(n){return jD(n.auth,new c0(n),n.bypassAuthState)}function t4(n){const{auth:e,user:r}=n;return ze(r,e,"internal-error"),OD(r,new c0(n),n.bypassAuthState)}async function n4(n){const{auth:e,user:r}=n;return ze(r,e,"internal-error"),PD(r,new c0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:Qi(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new gh(2e3,1e4);async function i4(n,e,r){if(ai(n.app))return Promise.reject(di(n,"operation-not-supported-in-this-environment"));const i=Ip(n);Jj(n,e,l0);const s=C2(i,r);return new fa(i,"signInViaPopup",e,s).executeNotNull()}class fa extends k2{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const e=u0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r4.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="pendingRedirect",Lf=new Map;class o4 extends k2{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const i=await a4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a4(n,e){const r=c4(e),i=u4(n);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function l4(n,e){Lf.set(n._key(),e)}function u4(n){return _s(n._redirectPersistence)}function c4(n){return Mf(s4,n.config.apiKey,n.name)}async function h4(n,e,r=!1){if(ai(n.app))return Promise.reject(_a(n));const i=Ip(n),s=C2(i,e),a=await new o4(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=10*60*1e3;class d4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p4(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!A2(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(di(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nx(e))}saveEventToCache(e){this.cachedEventUids.add(Nx(e)),this.lastProcessedEventTime=Date.now()}}function Nx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function A2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function p4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(n,e={}){return du(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y4=/^https?/;async function v4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await m4(n);for(const r of e)try{if(_4(r))return}catch{}Qi(n,"unauthorized-domain")}function _4(n){const e=hy(),{protocol:r,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!y4.test(r))return!1;if(g4.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new gh(3e4,6e4);function Rx(){const n=Bi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function x4(n){return new Promise((e,r)=>{var s,o,a;function i(){Rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rx(),r(di(n,"network-request-failed"))},timeout:w4.get()})}if((o=(s=Bi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Bi().gapi)!=null&&a.load)i();else{const l=ID("iframefcb");return Bi()[l]=()=>{gapi.load?i():r(di(n,"network-request-failed"))},ED(`${TD()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Vf=null,e})}let Vf=null;function b4(n){return Vf=Vf||x4(n),Vf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new gh(5e3,15e3),T4="__/auth/iframe",I4="emulator/auth/iframe",S4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k4(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const r=e.emulator?r0(e,I4):`https://${n.config.authDomain}/${T4}`,i={apiKey:e.apiKey,appName:n.name,v:fu},s=C4.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${mh(i).slice(1)}`}async function A4(n){const e=await b4(n),r=Bi().gapi;return ze(r,n,"internal-error"),e.open({where:document.body,url:k4(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S4,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=di(n,"network-request-failed"),l=Bi().setTimeout(()=>{o(a)},E4.get());function u(){Bi().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R4=500,P4=600,O4="_blank",j4="http://localhost";class Px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(n,e,r,i=R4,s=P4){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...N4,width:i.toString(),height:s.toString(),top:o,left:a},c=Mn().toLowerCase();r&&(l=u2(c)?O4:r),a2(c)&&(e=e||j4,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(mD(c)&&l!=="_self")return M4(e||"",l),new Px(null);const h=window.open(e||"",l,f);ze(h,n,"popup-blocked");try{h.focus()}catch{}return new Px(h)}function M4(n,e){const r=document.createElement("a");r.href=n,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="__/auth/handler",V4="emulator/auth/handler",F4=encodeURIComponent("fac");async function Ox(n,e,r,i,s,o){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:i,v:fu,eventId:s};if(e instanceof l0){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",OO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))a[f]=h}if(e instanceof yh){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await n._getAppCheckToken(),c=u?`#${F4}=${encodeURIComponent(u)}`:"";return`${U4(n)}?${mh(l).slice(1)}${c}`}function U4({config:n}){return n.emulator?r0(n,V4):`https://${n.authDomain}/${L4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="webStorageSupport";class z4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b2,this._completeRedirectFn=h4,this._overrideRedirectResult=l4}async _openPopup(e,r,i,s){var a;Ns((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Ox(e,r,i,hy(),s);return D4(e,o,u0())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await Ox(e,r,i,hy(),s);return qD(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Ns(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await A4(e),i=new d4(e);return r.register("authEvent",s=>(ze(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(zm,{type:zm},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[zm];o!==void 0&&r(!!o),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=v4(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return p2()||l2()||o0()}}const $4=z4;var jx="@firebase/auth",Dx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H4(n){Wi(new gi("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;ze(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m2(n)},c=new xD(i,s,o,u);return CD(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Wi(new gi("auth-internal",e=>{const r=Ip(e.getProvider("auth").getImmediate());return(i=>new B4(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(jx,Dx,q4(n)),Fr(jx,Dx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=5*60,G4=$I("authIdTokenMaxAge")||K4;let Mx=null;const W4=n=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>G4)return;const s=r==null?void 0:r.token;Mx!==s&&(Mx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Q4(n=e0()){const e=za(n,"auth");if(e.isInitialized())return e.getImmediate();const r=SD(n,{popupRedirectResolver:$4,persistence:[ZD,zD,b2]}),i=$I("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=W4(o.toString());MD(r,a,()=>a(r.currentUser)),DD(r,l=>a(l))}}const s=UI("auth");return s&&kD(r,`http://${s}`),r}function Y4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}bD({loadJS(n){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=di("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",Y4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H4("Browser");var Lx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,N2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function D(){}D.prototype=R.prototype,A.F=R.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(M,F,$){for(var j=Array(arguments.length-2),q=2;q<arguments.length;q++)j[q-2]=arguments[q];return R.prototype[F].apply(M,j)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,R,D){D||(D=0);const M=Array(16);if(typeof R=="string")for(var F=0;F<16;++F)M[F]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(F=0;F<16;++F)M[F]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=A.g[0],D=A.g[1],F=A.g[2];let $=A.g[3],j;j=R+($^D&(F^$))+M[0]+3614090360&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[1]+3905402710&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[2]+606105819&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[3]+3250441966&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+($^D&(F^$))+M[4]+4118548399&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[5]+1200080426&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[6]+2821735955&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[7]+4249261313&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+($^D&(F^$))+M[8]+1770035416&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[9]+2336552879&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[10]+4294925233&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[11]+2304563134&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+($^D&(F^$))+M[12]+1804603682&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[13]+4254626195&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[14]+2792965006&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[15]+1236535329&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+(F^$&(D^F))+M[1]+4129170786&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[6]+3225465664&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[11]+643717713&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[0]+3921069994&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(F^$&(D^F))+M[5]+3593408605&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[10]+38016083&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[15]+3634488961&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[4]+3889429448&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(F^$&(D^F))+M[9]+568446438&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[14]+3275163606&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[3]+4107603335&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[8]+1163531501&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(F^$&(D^F))+M[13]+2850285829&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[2]+4243563512&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[7]+1735328473&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[12]+2368359562&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(D^F^$)+M[5]+4294588738&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[8]+2272392833&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[11]+1839030562&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[14]+4259657740&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(D^F^$)+M[1]+2763975236&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[4]+1272893353&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[7]+4139469664&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[10]+3200236656&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(D^F^$)+M[13]+681279174&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[0]+3936430074&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[3]+3572445317&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[6]+76029189&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(D^F^$)+M[9]+3654602809&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[12]+3873151461&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[15]+530742520&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[2]+3299628645&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(F^(D|~$))+M[0]+4096336452&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[7]+1126891415&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[14]+2878612391&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[5]+4237533241&4294967295,D=F+(j<<21&4294967295|j>>>11),j=R+(F^(D|~$))+M[12]+1700485571&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[3]+2399980690&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[10]+4293915773&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[1]+2240044497&4294967295,D=F+(j<<21&4294967295|j>>>11),j=R+(F^(D|~$))+M[8]+1873313359&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[15]+4264355552&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[6]+2734768916&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[13]+1309151649&4294967295,D=F+(j<<21&4294967295|j>>>11),j=R+(F^(D|~$))+M[4]+4149444226&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[11]+3174756917&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[2]+718787259&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(F+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+F&4294967295,A.g[3]=A.g[3]+$&4294967295}i.prototype.v=function(A,R){R===void 0&&(R=A.length);const D=R-this.blockSize,M=this.C;let F=this.h,$=0;for(;$<R;){if(F==0)for(;$<=D;)s(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<R;)if(M[F++]=A.charCodeAt($++),F==this.blockSize){s(this,M),F=0;break}}else for(;$<R;)if(M[F++]=A[$++],F==this.blockSize){s(this,M),F=0;break}}this.h=F,this.o+=R},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,D=0;D<4;++D)for(let M=0;M<32;M+=8)A[R++]=this.g[D]>>>M&255;return A};function o(A,R){var D=l;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=R(A)}function a(A,R){this.h=R;const D=[];let M=!0;for(let F=A.length-1;F>=0;F--){const $=A[F]|0;M&&$==R||(D[F]=$,M=!1)}this.g=D}var l={};function u(A){return-128<=A&&A<128?o(A,function(R){return new a([R|0],R<0?-1:0)}):new a([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return C(c(-A));const R=[];let D=1;for(let M=0;A>=D;M++)R[M]=A/D|0,D*=4294967296;return new a(R,0)}function f(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return C(f(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=c(Math.pow(R,8));let M=h;for(let $=0;$<A.length;$+=8){var F=Math.min(8,A.length-$);const j=parseInt(A.substring($,$+F),R);F<8?(F=c(Math.pow(R,F)),M=M.j(F).add(c(j))):(M=M.j(D),M=M.add(c(j)))}return M}var h=u(0),m=u(1),v=u(16777216);n=a.prototype,n.m=function(){if(T(this))return-C(this).m();let A=0,R=1;for(let D=0;D<this.g.length;D++){const M=this.i(D);A+=(M>=0?M:4294967296+M)*R,R*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(T(this))return"-"+C(this).toString(A);const R=c(Math.pow(A,6));var D=this;let M="";for(;;){const F=O(D,R).g;D=b(D,F.j(R));let $=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=F,w(D))return $+M;for(;$.length<6;)$="0"+$;M=$+M}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function T(A){return A.h==-1}n.l=function(A){return A=b(this,A),T(A)?-1:w(A)?0:1};function C(A){const R=A.g.length,D=[];for(let M=0;M<R;M++)D[M]=~A.g[M];return new a(D,~A.h).add(m)}n.abs=function(){return T(this)?C(this):this},n.add=function(A){const R=Math.max(this.g.length,A.g.length),D=[];let M=0;for(let F=0;F<=R;F++){let $=M+(this.i(F)&65535)+(A.i(F)&65535),j=($>>>16)+(this.i(F)>>>16)+(A.i(F)>>>16);M=j>>>16,$&=65535,j&=65535,D[F]=j<<16|$}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(A,R){return A.add(C(R))}n.j=function(A){if(w(this)||w(A))return h;if(T(this))return T(A)?C(this).j(C(A)):C(C(this).j(A));if(T(A))return C(this.j(C(A)));if(this.l(v)<0&&A.l(v)<0)return c(this.m()*A.m());const R=this.g.length+A.g.length,D=[];for(var M=0;M<2*R;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(let F=0;F<A.g.length;F++){const $=this.i(M)>>>16,j=this.i(M)&65535,q=A.i(F)>>>16,G=A.i(F)&65535;D[2*M+2*F]+=j*G,I(D,2*M+2*F),D[2*M+2*F+1]+=$*G,I(D,2*M+2*F+1),D[2*M+2*F+1]+=j*q,I(D,2*M+2*F+1),D[2*M+2*F+2]+=$*q,I(D,2*M+2*F+2)}for(A=0;A<R;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=R;A<2*R;A++)D[A]=0;return new a(D,0)};function I(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function N(A,R){this.g=A,this.h=R}function O(A,R){if(w(R))throw Error("division by zero");if(w(A))return new N(h,h);if(T(A))return R=O(C(A),R),new N(C(R.g),C(R.h));if(T(R))return R=O(A,C(R)),new N(C(R.g),R.h);if(A.g.length>30){if(T(A)||T(R))throw Error("slowDivide_ only works with positive integers.");for(var D=m,M=R;M.l(A)<=0;)D=L(D),M=L(M);var F=U(D,1),$=U(M,1);for(M=U(M,2),D=U(D,2);!w(M);){var j=$.add(M);j.l(A)<=0&&(F=F.add(D),$=j),M=U(M,1),D=U(D,1)}return R=b(A,F.j(R)),new N(F,R)}for(F=h;A.l(R)>=0;){for(D=Math.max(1,Math.floor(A.m()/R.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),$=c(D),j=$.j(R);T(j)||j.l(A)>0;)D-=M,$=c(D),j=$.j(R);w($)&&($=m),F=F.add($),A=b(A,j)}return new N(F,A)}n.B=function(A){return O(this,A).h},n.and=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let M=0;M<R;M++)D[M]=this.i(M)&A.i(M);return new a(D,this.h&A.h)},n.or=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let M=0;M<R;M++)D[M]=this.i(M)|A.i(M);return new a(D,this.h|A.h)},n.xor=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let M=0;M<R;M++)D[M]=this.i(M)^A.i(M);return new a(D,this.h^A.h)};function L(A){const R=A.g.length+1,D=[];for(let M=0;M<R;M++)D[M]=A.i(M)<<1|A.i(M-1)>>>31;return new a(D,A.h)}function U(A,R){const D=R>>5;R%=32;const M=A.g.length-D,F=[];for(let $=0;$<M;$++)F[$]=R>0?A.i($+D)>>>R|A.i($+D+1)<<32-R:A.i($+D);return new a(F,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,N2=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=f,bo=a}).apply(typeof Lx<"u"?Lx:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R2,ec,P2,Ff,py,O2,j2,D2;(function(){var n,e=Object.defineProperty;function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var x=0;x<d.length;++x){var S=d[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=r(this);function s(d,x){if(x)e:{var S=i;d=d.split(".");for(var V=0;V<d.length-1;V++){var ie=d[V];if(!(ie in S))break e;S=S[ie]}d=d[d.length-1],V=S[d],x=x(V),x!=V&&x!=null&&e(S,d,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(x){var S=[],V;for(V in x)Object.prototype.hasOwnProperty.call(x,V)&&S.push([V,x[V]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function u(d,x,S){return d.call.apply(d.bind,arguments)}function c(d,x,S){return c=u,c.apply(null,arguments)}function f(d,x){var S=Array.prototype.slice.call(arguments,1);return function(){var V=S.slice();return V.push.apply(V,arguments),d.apply(this,V)}}function h(d,x){function S(){}S.prototype=x.prototype,d.Z=x.prototype,d.prototype=new S,d.prototype.constructor=d,d.Ob=function(V,ie,le){for(var xe=Array(arguments.length-2),He=2;He<arguments.length;He++)xe[He-2]=arguments[He];return x.prototype[ie].apply(V,xe)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function v(d){const x=d.length;if(x>0){const S=Array(x);for(let V=0;V<x;V++)S[V]=d[V];return S}return[]}function w(d,x){for(let V=1;V<arguments.length;V++){const ie=arguments[V];var S=typeof ie;if(S=S!="object"?S:ie?Array.isArray(ie)?"array":S:"null",S=="array"||S=="object"&&typeof ie.length=="number"){S=d.length||0;const le=ie.length||0;d.length=S+le;for(let xe=0;xe<le;xe++)d[S+xe]=ie[xe]}else d.push(ie)}}class T{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function C(d){a.setTimeout(()=>{throw d},0)}function b(){var d=A;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class I{constructor(){this.h=this.g=null}add(x,S){const V=N.get();V.set(x,S),this.h?this.h.next=V:this.g=V,this.h=V}}var N=new T(()=>new O,d=>d.reset());class O{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let L,U=!1,A=new I,R=()=>{const d=Promise.resolve(void 0);L=()=>{d.then(D)}};function D(){for(var d;d=b();){try{d.h.call(d.g)}catch(S){C(S)}var x=N;x.j(d),x.h<100&&(x.h++,d.next=x.g,x.g=d)}U=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};a.addEventListener("test",S,x),a.removeEventListener("test",S,x)}catch{}return d}();function j(d){return/^[\s\xa0]*$/.test(d)}function q(d,x){F.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,x)}h(q,F),q.prototype.init=function(d,x){const S=this.type=d.type,V=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget,x||(S=="mouseover"?x=d.fromElement:S=="mouseout"&&(x=d.toElement)),this.relatedTarget=x,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),Z=0;function de(d,x,S,V,ie){this.listener=d,this.proxy=null,this.src=x,this.type=S,this.capture=!!V,this.ha=ie,this.key=++Z,this.da=this.fa=!1}function ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ae(d,x,S){for(const V in d)x.call(S,d[V],V,d)}function he(d,x){for(const S in d)x.call(void 0,d[S],S,d)}function be(d){const x={};for(const S in d)x[S]=d[S];return x}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(d,x){let S,V;for(let ie=1;ie<arguments.length;ie++){V=arguments[ie];for(S in V)d[S]=V[S];for(let le=0;le<ce.length;le++)S=ce[le],Object.prototype.hasOwnProperty.call(V,S)&&(d[S]=V[S])}}function Pe(d){this.src=d,this.g={},this.h=0}Pe.prototype.add=function(d,x,S,V,ie){const le=d.toString();d=this.g[le],d||(d=this.g[le]=[],this.h++);const xe=Ye(d,x,V,ie);return xe>-1?(x=d[xe],S||(x.fa=!1)):(x=new de(x,this.src,le,!!V,ie),x.fa=S,d.push(x)),x};function Me(d,x){const S=x.type;if(S in d.g){var V=d.g[S],ie=Array.prototype.indexOf.call(V,x,void 0),le;(le=ie>=0)&&Array.prototype.splice.call(V,ie,1),le&&(ee(x),d.g[S].length==0&&(delete d.g[S],d.h--))}}function Ye(d,x,S,V){for(let ie=0;ie<d.length;++ie){const le=d[ie];if(!le.da&&le.listener==x&&le.capture==!!S&&le.ha==V)return ie}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Kt={};function Le(d,x,S,V,ie){if(Array.isArray(x)){for(let le=0;le<x.length;le++)Le(d,x[le],S,V,ie);return null}return S=Qn(S),d&&d[G]?d.J(x,S,l(V)?!!V.capture:!1,ie):wi(d,x,S,!1,V,ie)}function wi(d,x,S,V,ie,le){if(!x)throw Error("Invalid event type");const xe=l(ie)?!!ie.capture:!!ie;let He=Gt(d);if(He||(d[Ge]=He=new Pe(d)),S=He.add(x,S,V,xe,le),S.proxy)return S;if(V=xi(),S.proxy=V,V.src=d,V.listener=S,d.addEventListener)$||(ie=xe),ie===void 0&&(ie=!1),d.addEventListener(x.toString(),V,ie);else if(d.attachEvent)d.attachEvent(Se(x.toString()),V);else if(d.addListener&&d.removeListener)d.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return S}function xi(){function d(S){return x.call(d.src,d.listener,S)}const x=qe;return d}function ot(d,x,S,V,ie){if(Array.isArray(x))for(var le=0;le<x.length;le++)ot(d,x[le],S,V,ie);else V=l(V)?!!V.capture:!!V,S=Qn(S),d&&d[G]?(d=d.i,le=String(x).toString(),le in d.g&&(x=d.g[le],S=Ye(x,S,V,ie),S>-1&&(ee(x[S]),Array.prototype.splice.call(x,S,1),x.length==0&&(delete d.g[le],d.h--)))):d&&(d=Gt(d))&&(x=d.g[x.toString()],d=-1,x&&(d=Ye(x,S,V,ie)),(S=d>-1?x[d]:null)&&Br(S))}function Br(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[G])Me(x.i,d);else{var S=d.type,V=d.proxy;x.removeEventListener?x.removeEventListener(S,V,d.capture):x.detachEvent?x.detachEvent(Se(S),V):x.addListener&&x.removeListener&&x.removeListener(V),(S=Gt(x))?(Me(S,d),S.h==0&&(S.src=null,x[Ge]=null)):ee(d)}}}function Se(d){return d in Kt?Kt[d]:Kt[d]="on"+d}function qe(d,x){if(d.da)d=!0;else{x=new q(x,this);const S=d.listener,V=d.ha||d.src;d.fa&&Br(d),d=S.call(V,x)}return d}function Gt(d){return d=d[Ge],d instanceof Pe?d:null}var Dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qn(d){return typeof d=="function"?d:(d[Dt]||(d[Dt]=function(x){return d.handleEvent(x)}),d[Dt])}function gt(){M.call(this),this.i=new Pe(this),this.M=this,this.G=null}h(gt,M),gt.prototype[G]=!0,gt.prototype.removeEventListener=function(d,x,S,V){ot(this,d,x,S,V)};function Mt(d,x){var S,V=d.G;if(V)for(S=[];V;V=V.G)S.push(V);if(d=d.M,V=x.type||x,typeof x=="string")x=new F(x,d);else if(x instanceof F)x.target=x.target||d;else{var ie=x;x=new F(V,d),Ae(x,ie)}ie=!0;let le,xe;if(S)for(xe=S.length-1;xe>=0;xe--)le=x.g=S[xe],ie=pn(le,V,!0,x)&&ie;if(le=x.g=d,ie=pn(le,V,!0,x)&&ie,ie=pn(le,V,!1,x)&&ie,S)for(xe=0;xe<S.length;xe++)le=x.g=S[xe],ie=pn(le,V,!1,x)&&ie}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var d=this.i;for(const x in d.g){const S=d.g[x];for(let V=0;V<S.length;V++)ee(S[V]);delete d.g[x],d.h--}}this.G=null},gt.prototype.J=function(d,x,S,V){return this.i.add(String(d),x,!1,S,V)},gt.prototype.K=function(d,x,S,V){return this.i.add(String(d),x,!0,S,V)};function pn(d,x,S,V){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();let ie=!0;for(let le=0;le<x.length;++le){const xe=x[le];if(xe&&!xe.da&&xe.capture==S){const He=xe.listener,zt=xe.ha||xe.src;xe.fa&&Me(d.i,xe),ie=He.call(zt,V)!==!1&&ie}}return ie&&!V.defaultPrevented}function qa(d,x){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=c(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:a.setTimeout(d,x||0)}function qr(d){d.g=qa(()=>{d.g=null,d.i&&(d.i=!1,qr(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class an extends M{constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function or(d){M.call(this),this.h=d,this.g={}}h(or,M);var mn=[];function ln(d){ae(d.g,function(x,S){this.g.hasOwnProperty(S)&&Br(x)},d),d.g={}}or.prototype.N=function(){or.Z.N.call(this),ln(this)},or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=a.JSON.stringify,bi=a.JSON.parse,Er=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Ln(){}function En(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vn(){F.call(this,"d")}h(Vn,F);function Wt(){F.call(this,"c")}h(Wt,F);var Oe={},Ei=null;function Tr(){return Ei=Ei||new gt}Oe.Ia="serverreachability";function zo(d){F.call(this,Oe.Ia,d)}h(zo,F);function Ie(d){const x=Tr();Mt(x,new zo(x))}Oe.STAT_EVENT="statevent";function Ha(d,x){F.call(this,Oe.STAT_EVENT,d),this.stat=x}h(Ha,F);function un(d){const x=Tr();Mt(x,new Ha(x,d))}Oe.Ja="timingevent";function Ka(d,x){F.call(this,Oe.Ja,d),this.size=x}h(Ka,F);function Ds(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},x)}function Zi(){this.g=!0}Zi.prototype.ua=function(){this.g=!1};function Zp(d,x,S,V,ie,le){d.info(function(){if(d.g)if(le){var xe="",He=le.split("&");for(let ct=0;ct<He.length;ct++){var zt=He[ct].split("=");if(zt.length>1){const Nt=zt[0];zt=zt[1];const Cr=Nt.split("_");xe=Cr.length>=2&&Cr[1]=="type"?xe+(Nt+"="+zt+"&"):xe+(Nt+"=redacted&")}}}else xe=null;else xe=le;return"XMLHTTP REQ ("+V+") [attempt "+ie+"]: "+x+`
`+S+`
`+xe})}function em(d,x,S,V,ie,le,xe){d.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ie+"]: "+x+`
`+S+`
`+le+" "+xe})}function lr(d,x,S,V){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+_u(d,S)+(V?" "+V:"")})}function Ms(d,x){d.info(function(){return"TIMEOUT: "+x})}Zi.prototype.info=function(){};function _u(d,x){if(!d.g)return x;if(!x)return null;try{const le=JSON.parse(x);if(le){for(d=0;d<le.length;d++)if(Array.isArray(le[d])){var S=le[d];if(!(S.length<2)){var V=S[1];if(Array.isArray(V)&&!(V.length<1)){var ie=V[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let xe=1;xe<V.length;xe++)V[xe]=""}}}}return ar(le)}catch{return x}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ut;function wu(){}h(wu,Ln),wu.prototype.g=function(){return new XMLHttpRequest},Ut=new wu;function Ti(d){return encodeURIComponent(String(d))}function Ga(d){var x=1;d=d.split(":");const S=[];for(;x>0&&d.length;)S.push(d.shift()),x--;return d.length&&S.push(d.join(":")),S}function ur(d,x,S,V){this.j=d,this.i=x,this.l=S,this.S=V||1,this.V=new or(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rh}function Rh(){this.i=null,this.g="",this.h=!1}var Hr={},Ii={};function Ir(d,x,S){d.M=1,d.A=Go(hr(x)),d.u=S,d.R=!0,$o(d,null)}function $o(d,x){d.F=Date.now(),Sr(d),d.B=hr(d.A);var S=d.B,V=d.S;Array.isArray(V)||(V=[String(V)]),Mh(S.i,"t",V),d.C=0,S=d.j.L,d.h=new Rh,d.g=tn(d.j,S?x:null,!d.u),d.P>0&&(d.O=new an(c(d.Y,d,d.g),d.P)),x=d.V,S=d.g,V=d.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(mn[0]=ie.toString()),ie=mn);for(let le=0;le<ie.length;le++){const xe=Le(S,ie[le],V||x.handleEvent,!1,x.h||x);if(!xe)break;x.g[xe.key]=xe}x=d.J?be(d.J):{},d.u?(d.v||(d.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,x)):(d.v="GET",d.g.ea(d.B,d.v,null,x)),Ie(),Zp(d.i,d.v,d.B,d.l,d.S,d.u)}ur.prototype.ba=function(d){d=d.target;const x=this.O;x&&Ni(d)==3?x.j():this.Y(d)},ur.prototype.Y=function(d){try{if(d==this.g)e:{const He=Ni(this.g),zt=this.g.ya(),ct=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Us(this.g)))){this.K||He!=4||zt==7||(zt==8||ct<=0?Ie(3):Ie(2)),Bo(this);var x=this.g.ca();this.X=x;var S=tm(this);if(this.o=x==200,em(this.i,this.v,this.B,this.l,this.S,He,x),this.o){if(this.U&&!this.L){t:{if(this.g){var V,ie=this.g;if((V=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(V)){var le=V;break t}}le=null}if(d=le)lr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cr(this,d);else{this.o=!1,this.m=3,un(12),Fn(this),vt(this);break e}}if(this.R){d=!0;let Nt;for(;!this.K&&this.C<S.length;)if(Nt=Ph(this,S),Nt==Ii){He==4&&(this.m=4,un(14),d=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==Hr){this.m=4,un(15),lr(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else lr(this.i,this.l,Nt,null),cr(this,Nt);if(Kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||S.length!=0||this.h.h||(this.m=1,un(16),d=!1),this.o=this.o&&d,!d)lr(this.i,this.l,S,"[Invalid Chunked Response]"),Fn(this),vt(this);else if(S.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),qs(xe),xe.P=!0,un(11))}}else lr(this.i,this.l,S,null),cr(this,S);He==4&&Fn(this),this.o&&!this.K&&(He==4?ss(this.j,this):(this.o=!1,Sr(this)))}else nm(this.g),x==400&&S.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),Fn(this),vt(this)}}}catch{}finally{}};function tm(d){if(!Kr(d))return d.g.la();const x=Us(d.g);if(x==="")return"";let S="";const V=x.length,ie=Ni(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Fn(d),vt(d),"";d.h.i=new a.TextDecoder}for(let le=0;le<V;le++)d.h.h=!0,S+=d.h.i.decode(x[le],{stream:!(ie&&le==V-1)});return x.length=0,d.h.g+=S,d.C=0,d.h.g}function Kr(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Ph(d,x){var S=d.C,V=x.indexOf(`
`,S);return V==-1?Ii:(S=Number(x.substring(S,V)),isNaN(S)?Hr:(V+=1,V+S>x.length?Ii:(x=x.slice(V,V+S),d.C=V+S,x)))}ur.prototype.cancel=function(){this.K=!0,Fn(this)};function Sr(d){d.T=Date.now()+d.H,xu(d,d.H)}function xu(d,x){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ds(c(d.aa,d),x)}function Bo(d){d.D&&(a.clearTimeout(d.D),d.D=null)}ur.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ms(this.i,this.B),this.M!=2&&(Ie(),un(17)),Fn(this),this.m=2,vt(this)):xu(this,this.T-d)};function vt(d){d.j.I==0||d.K||ss(d.j,d)}function Fn(d){Bo(d);var x=d.O;x&&typeof x.dispose=="function"&&x.dispose(),d.O=null,ln(d.V),d.g&&(x=d.g,d.g=null,x.abort(),x.dispose())}function cr(d,x){try{var S=d.j;if(S.I!=0&&(S.g==d||Ho(S.h,d))){if(!d.L&&Ho(S.h,d)&&S.I==3){try{var V=S.Ba.g.parse(x)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ie=V;if(ie[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<d.F)nl(S),$s(S);else break e;Bs(S),un(18)}}else S.xa=ie[1],0<S.xa-S.K&&ie[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Ds(c(S.Va,S),6e3));Wa(S.h)<=1&&S.ta&&(S.ta=void 0)}else ei(S,11)}else if((d.L||S.g==d)&&nl(S),!j(x))for(ie=S.Ba.g.parse(x),x=0;x<ie.length;x++){let ct=ie[x];const Nt=ct[0];if(!(Nt<=S.K))if(S.K=Nt,ct=ct[1],S.I==2)if(ct[0]=="c"){S.M=ct[1],S.ba=ct[2];const Cr=ct[3];Cr!=null&&(S.ka=Cr,S.j.info("VER="+S.ka));const ti=ct[4];ti!=null&&(S.za=ti,S.j.info("SVER="+S.za));const kr=ct[5];kr!=null&&typeof kr=="number"&&kr>0&&(V=1.5*kr,S.O=V,S.j.info("backChannelRequestTimeoutMs_="+V)),V=S;const Pi=d.g;if(Pi){const ea=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var le=V.h;le.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(Gr(le,le.h),le.h=null))}if(V.G){const Pu=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Pu&&(V.wa=Pu,pt(V.J,V.G,Pu))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-d.F,S.j.info("Handshake RTT: "+S.T+"ms")),V=S;var xe=d;if(V.na=sl(V,V.L?V.ba:null,V.W),xe.L){bu(V.h,xe);var He=xe,zt=V.O;zt&&(He.H=zt),He.D&&(Bo(He),Sr(He)),V.g=xe}else Jo(V);S.i.length>0&&el(S)}else ct[0]!="stop"&&ct[0]!="close"||ei(S,7);else S.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ei(S,7):zs(S):ct[0]!="noop"&&S.l&&S.l.qa(ct),S.A=0)}}Ie(4)}catch{}}var Oh=class{constructor(d,x){this.g=d,this.map=x}};function ts(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Wa(d){return d.h?1:d.g?d.g.size:0}function Ho(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function Gr(d,x){d.g?d.g.add(x):d.h=x}function bu(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}ts.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ko(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const S of d.g.values())x=x.concat(S.G);return x}return v(d.i)}var Eu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(d,x){if(d){d=d.split("&");for(let S=0;S<d.length;S++){const V=d[S].indexOf("=");let ie,le=null;V>=0?(ie=d[S].substring(0,V),le=d[S].substring(V+1)):ie=d[S],x(ie,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Wr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;d instanceof Wr?(this.l=d.l,Si(this,d.j),this.o=d.o,this.g=d.g,Qr(this,d.u),this.h=d.h,Qa(this,Lh(d.i)),this.m=d.m):d&&(x=String(d).match(Eu))?(this.l=!1,Si(this,x[1]||"",!0),this.o=ut(x[2]||""),this.g=ut(x[3]||"",!0),Qr(this,x[4]),this.h=ut(x[5]||"",!0),Qa(this,x[6]||"",!0),this.m=ut(x[7]||"")):(this.l=!1,this.i=new Ci(null,this.l))}Wr.prototype.toString=function(){const d=[];var x=this.j;x&&d.push(Yr(x,ns,!0),":");var S=this.g;return(S||x=="file")&&(d.push("//"),(x=this.o)&&d.push(Yr(x,ns,!0),"@"),d.push(Ti(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&d.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(Yr(S,S.charAt(0)=="/"?Iu:Tu,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",Yr(S,jh)),d.join("")},Wr.prototype.resolve=function(d){const x=hr(this);let S=!!d.j;S?Si(x,d.j):S=!!d.o,S?x.o=d.o:S=!!d.g,S?x.g=d.g:S=d.u!=null;var V=d.h;if(S)Qr(x,d.u);else if(S=!!d.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var ie=x.h.lastIndexOf("/");ie!=-1&&(V=x.h.slice(0,ie+1)+V)}if(ie=V,ie==".."||ie==".")V="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){V=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const le=[];for(let xe=0;xe<ie.length;){const He=ie[xe++];He=="."?V&&xe==ie.length&&le.push(""):He==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),V&&xe==ie.length&&le.push("")):(le.push(He),V=!0)}V=le.join("/")}else V=ie}return S?x.h=V:S=d.i.toString()!=="",S?Qa(x,Lh(d.i)):S=!!d.m,S&&(x.m=d.m),x};function hr(d){return new Wr(d)}function Si(d,x,S){d.j=S?ut(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function Qr(d,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);d.u=x}else d.u=null}function Qa(d,x,S){x instanceof Ci?(d.i=x,Ls(d.i,d.l)):(S||(x=Yr(x,Ya)),d.i=new Ci(x,d.l))}function pt(d,x,S){d.i.set(x,S)}function Go(d){return pt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ut(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Yr(d,x,S){return typeof d=="string"?(d=encodeURI(d).replace(x,Wo),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Wo(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ns=/[#\/\?@]/g,Tu=/[#\?:]/g,Iu=/[#\?]/g,Ya=/[#\?@]/g,jh=/#/g;function Ci(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function ki(d){d.g||(d.g=new Map,d.h=0,d.i&&Je(d.i,function(x,S){d.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}n=Ci.prototype,n.add=function(d,x){ki(this),this.i=null,d=Qt(this,d);let S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(x),this.h+=1,this};function Dh(d,x){ki(d),x=Qt(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function it(d,x){return ki(d),x=Qt(d,x),d.g.has(x)}n.forEach=function(d,x){ki(this),this.g.forEach(function(S,V){S.forEach(function(ie){d.call(x,ie,V,this)},this)},this)};function Su(d,x){ki(d);let S=[];if(typeof x=="string")it(d,x)&&(S=S.concat(d.g.get(Qt(d,x))));else for(d=Array.from(d.g.values()),x=0;x<d.length;x++)S=S.concat(d[x]);return S}n.set=function(d,x){return ki(this),this.i=null,d=Qt(this,d),it(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},n.get=function(d,x){return d?(d=Su(this,d),d.length>0?String(d[0]):x):x};function Mh(d,x,S){Dh(d,x),S.length>0&&(d.i=null,d.g.set(Qt(d,x),v(S)),d.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(let V=0;V<x.length;V++){var S=x[V];const ie=Ti(S);S=Su(this,S);for(let le=0;le<S.length;le++){let xe=ie;S[le]!==""&&(xe+="="+Ti(S[le])),d.push(xe)}}return this.i=d.join("&")};function Lh(d){const x=new Ci;return x.i=d.i,d.g&&(x.g=new Map(d.g),x.h=d.h),x}function Qt(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function Ls(d,x){x&&!d.j&&(ki(d),d.i=null,d.g.forEach(function(S,V){const ie=V.toLowerCase();V!=ie&&(Dh(this,V),Mh(this,ie,S))},d)),d.j=x}function Xa(d,x){const S=new Zi;if(a.Image){const V=new Image;V.onload=f(Xr,S,"TestLoadImage: loaded",!0,x,V),V.onerror=f(Xr,S,"TestLoadImage: error",!1,x,V),V.onabort=f(Xr,S,"TestLoadImage: abort",!1,x,V),V.ontimeout=f(Xr,S,"TestLoadImage: timeout",!1,x,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=d}else x(!1)}function Ai(d,x){const S=new Zi,V=new AbortController,ie=setTimeout(()=>{V.abort(),Xr(S,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:V.signal}).then(le=>{clearTimeout(ie),le.ok?Xr(S,"TestPingServer: ok",!0,x):Xr(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ie),Xr(S,"TestPingServer: error",!1,x)})}function Xr(d,x,S,V,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),V(S)}catch{}}function Vh(){this.g=new Er}function Lt(d){this.i=d.Sb||null,this.h=d.ab||!1}h(Lt,Ln),Lt.prototype.g=function(){return new Un(this.i,this.h)};function Un(d,x){gt.call(this),this.H=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Un,gt),n=Un.prototype,n.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=x,this.readyState=1,rs(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(x.body=d),(this.H||a).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vs(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vs(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?Jr(this):rs(this),this.readyState==3&&Vs(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Jr(this))},n.Na=function(d){this.g&&(this.response=d,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,rs(d)}n.setRequestHeader=function(d,x){this.A.append(d,x)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=x.next();return d.join(`\r
`)};function rs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Un.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zr(d){let x="";return ae(d,function(S,V){x+=V,x+=":",x+=S,x+=`\r
`}),x}function Cu(d,x,S){e:{for(V in S){var V=!1;break e}V=!0}V||(S=Zr(S),typeof d=="string"?S!=null&&Ti(S):pt(d,x,S))}function at(d){gt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(at,gt);var ku=/^https?$/i,Fh=["POST","PUT"];n=at.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,x,S,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ut.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(le){Ja(this,le);return}if(d=S||"",S=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ie in V)S.set(ie,V[ie]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const le of V.keys())S.set(le,V.get(le));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(S.keys()).find(le=>le.toLowerCase()=="content-type"),ie=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(Fh,x,void 0)>=0)||V||ie||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,xe]of S)this.g.setRequestHeader(le,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(le){Ja(this,le)}};function Ja(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.o=5,Fs(d),Qo(d)}function Fs(d){d.A||(d.A=!0,Mt(d,"complete"),Mt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Mt(this,"complete"),Mt(this,"abort"),Qo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qo(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Za(this):this.Xa())},n.Xa=function(){Za(this)};function Za(d){if(d.h&&typeof o<"u"){if(d.v&&Ni(d)==4)setTimeout(d.Ca.bind(d),0);else if(Mt(d,"readystatechange"),Ni(d)==4){d.h=!1;try{const le=d.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var V;if(V=le===0){let xe=String(d.D).match(Eu)[1]||null;!xe&&a.self&&a.self.location&&(xe=a.self.location.protocol.slice(0,-1)),V=!ku.test(xe?xe.toLowerCase():"")}S=V}if(S)Mt(d,"complete"),Mt(d,"success");else{d.o=6;try{var ie=Ni(d)>2?d.g.statusText:""}catch{ie=""}d.l=ie+" ["+d.ca()+"]",Fs(d)}}finally{Qo(d)}}}}function Qo(d,x){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const S=d.g;d.g=null,x||Mt(d,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ni(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),bi(x)}};function Us(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function nm(d){const x={};d=(d.g&&Ni(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<d.length;V++){if(j(d[V]))continue;var S=Ga(d[V]);const ie=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const le=x[ie]||[];x[ie]=le,le.push(S)}he(x,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(d,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||x}function Xo(d){this.za=0,this.i=[],this.j=new Zi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yo("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yo("baseRetryDelayMs",5e3,d),this.Za=Yo("retryDelaySeedMs",1e4,d),this.Ta=Yo("forwardChannelMaxRetries",2,d),this.va=Yo("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ts(d&&d.concurrentRequestLimit),this.Ba=new Vh,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xo.prototype,n.ka=8,n.I=1,n.connect=function(d,x,S,V){un(0),this.W=d,this.H=x||{},S&&V!==void 0&&(this.H.OSID=S,this.H.OAID=V),this.F=this.X,this.J=sl(this,null,this.W),el(this)};function zs(d){if(Uh(d),d.I==3){var x=d.V++,S=hr(d.J);if(pt(S,"SID",d.M),pt(S,"RID",x),pt(S,"TYPE","terminate"),is(d,S),x=new ur(d,d.j,x),x.M=2,x.A=Go(hr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(x.A.toString(),"")}catch{}!S&&a.Image&&(new Image().src=x.A,S=!0),S||(x.g=tn(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Sr(x)}il(d)}function $s(d){d.g&&(qs(d),d.g.cancel(),d.g=null)}function Uh(d){$s(d),d.v&&(a.clearTimeout(d.v),d.v=null),nl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function el(d){if(!qo(d.h)&&!d.m){d.m=!0;var x=d.Ea;L||R(),U||(L(),U=!0),A.add(x,d),d.D=0}}function rm(d,x){return Wa(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=x.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ds(c(d.Ea,d,x),rl(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const ie=new ur(this,this.j,d);let le=this.o;if(this.U&&(le?(le=be(le),Ae(le,this.U)):le=this.U),this.u!==null||this.R||(ie.J=le,le=null),this.S)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var V=this.i[S];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(x+=V,x>4096){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=Au(this,ie,x),S=hr(this.J),pt(S,"RID",d),pt(S,"CVER",22),this.G&&pt(S,"X-HTTP-Session-Id",this.G),is(this,S),le&&(this.R?x="headers="+Ti(Zr(le))+"&"+x:this.u&&Cu(S,this.u,le)),Gr(this.h,ie),this.Ra&&pt(S,"TYPE","init"),this.S?(pt(S,"$req",x),pt(S,"SID","null"),ie.U=!0,Ir(ie,S,null)):Ir(ie,S,x),this.I=2}}else this.I==3&&(d?tl(this,d):this.i.length==0||qo(this.h)||tl(this))};function tl(d,x){var S;x?S=x.l:S=d.V++;const V=hr(d.J);pt(V,"SID",d.M),pt(V,"RID",S),pt(V,"AID",d.K),is(d,V),d.u&&d.o&&Cu(V,d.u,d.o),S=new ur(d,d.j,S,d.D+1),d.u===null&&(S.J=d.o),x&&(d.i=x.G.concat(d.i)),x=Au(d,S,1e3),S.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Gr(d.h,S),Ir(S,V,x)}function is(d,x){d.H&&ae(d.H,function(S,V){pt(x,V,S)}),d.l&&ae({},function(S,V){pt(x,V,S)})}function Au(d,x,S){S=Math.min(d.i.length,S);const V=d.l?c(d.l.Ka,d.l,d):null;e:{var ie=d.i;let He=-1;for(;;){const zt=["count="+S];He==-1?S>0?(He=ie[0].g,zt.push("ofs="+He)):He=0:zt.push("ofs="+He);let ct=!0;for(let Nt=0;Nt<S;Nt++){var le=ie[Nt].g;const Cr=ie[Nt].map;if(le-=He,le<0)He=Math.max(0,ie[Nt].g-100),ct=!1;else try{le="req"+le+"_"||"";try{var xe=Cr instanceof Map?Cr:Object.entries(Cr);for(const[ti,kr]of xe){let Pi=kr;l(kr)&&(Pi=ar(kr)),zt.push(le+ti+"="+encodeURIComponent(Pi))}}catch(ti){throw zt.push(le+"type="+encodeURIComponent("_badmap")),ti}}catch{V&&V(Cr)}}if(ct){xe=zt.join("&");break e}}xe=void 0}return d=d.i.splice(0,S),x.G=d,xe}function Jo(d){if(!d.g&&!d.v){d.Y=1;var x=d.Da;L||R(),U||(L(),U=!0),A.add(x,d),d.A=0}}function Bs(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ds(c(d.Da,d),rl(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ds(c(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),$s(this),Nu(this))};function qs(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function Nu(d){d.g=new ur(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var x=hr(d.na);pt(x,"RID","rpc"),pt(x,"SID",d.M),pt(x,"AID",d.K),pt(x,"CI",d.F?"0":"1"),!d.F&&d.ia&&pt(x,"TO",d.ia),pt(x,"TYPE","xmlhttp"),is(d,x),d.u&&d.o&&Cu(x,d.u,d.o),d.O&&(d.g.H=d.O);var S=d.g;d=d.ba,S.M=1,S.A=Go(hr(x)),S.u=null,S.R=!0,$o(S,d)}n.Va=function(){this.C!=null&&(this.C=null,$s(this),Bs(this),un(19))};function nl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function ss(d,x){var S=null;if(d.g==x){nl(d),qs(d),d.g=null;var V=2}else if(Ho(d.h,x))S=x.G,bu(d.h,x),V=1;else return;if(d.I!=0){if(x.o)if(V==1){S=x.u?x.u.length:0,x=Date.now()-x.F;var ie=d.D;V=Tr(),Mt(V,new Ka(V,S)),el(d)}else Jo(d);else if(ie=x.m,ie==3||ie==0&&x.X>0||!(V==1&&rm(d,x)||V==2&&Bs(d)))switch(S&&S.length>0&&(x=d.h,x.i=x.i.concat(S)),ie){case 1:ei(d,5);break;case 4:ei(d,10);break;case 3:ei(d,6);break;default:ei(d,2)}}}function rl(d,x){let S=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(S*=2),S*x}function ei(d,x){if(d.j.info("Error code "+x),x==2){var S=c(d.bb,d),V=d.Ua;const ie=!V;V=new Wr(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Si(V,"https"),Go(V),ie?Xa(V.toString(),S):Ai(V.toString(),S)}else un(2);d.I=0,d.l&&d.l.pa(x),il(d),Uh(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function il(d){if(d.I=0,d.ja=[],d.l){const x=Ko(d.h);(x.length!=0||d.i.length!=0)&&(w(d.ja,x),w(d.ja,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.oa()}}function sl(d,x,S){var V=S instanceof Wr?hr(S):new Wr(S);if(V.g!="")x&&(V.g=x+"."+V.g),Qr(V,V.u);else{var ie=a.location;V=ie.protocol,x=x?x+"."+ie.hostname:ie.hostname,ie=+ie.port;const le=new Wr(null);V&&Si(le,V),x&&(le.g=x),ie&&Qr(le,ie),S&&(le.h=S),V=le}return S=d.G,x=d.wa,S&&x&&pt(V,S,x),pt(V,"VER",d.ka),is(d,V),V}function tn(d,x,S){if(x&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Aa&&!d.ma?new at(new Lt({ab:S})):new at(d.ma),x.Fa(d.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hs(){}n=Hs.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ri(){}Ri.prototype.g=function(d,x){return new Tn(d,x)};function Tn(d,x){gt.call(this),this.g=new Xo(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(d?d["X-WebChannel-Client-Profile"]=x.sa:d={"X-WebChannel-Client-Profile":x.sa}),this.g.U=d,(d=x&&x.Qb)&&!j(d)&&(this.g.u=d),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!j(x)&&(this.g.G=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new os(this)}h(Tn,gt),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){zs(this.g)},Tn.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.v&&(S={},S.__data__=ar(d),d=S);x.i.push(new Oh(x.Ya++,d)),x.I==3&&el(x)},Tn.prototype.N=function(){this.g.l=null,delete this.j,zs(this.g),delete this.g,Tn.Z.N.call(this)};function Zo(d){Vn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const S in x){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}h(Zo,Vn);function Ru(){Wt.call(this),this.status=1}h(Ru,Wt);function os(d){this.g=d}h(os,Hs),os.prototype.ra=function(){Mt(this.g,"a")},os.prototype.qa=function(d){Mt(this.g,new Zo(d))},os.prototype.pa=function(d){Mt(this.g,new Ru)},os.prototype.oa=function(){Mt(this.g,"b")},Ri.prototype.createWebChannel=Ri.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,D2=function(){return new Ri},j2=function(){return Tr()},O2=Oe,py={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,Ff=es,yt.COMPLETE="complete",P2=yt,En.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",gt.prototype.listen=gt.prototype.J,ec=En,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,R2=at}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu="12.8.0";function X4(n){pu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Tp("@firebase/firestore");function hl(){return Ra.logLevel}function Re(n,...e){if(Ra.logLevel<=tt.DEBUG){const r=e.map(h0);Ra.debug(`Firestore (${pu}): ${n}`,...r)}}function Rs(n,...e){if(Ra.logLevel<=tt.ERROR){const r=e.map(h0);Ra.error(`Firestore (${pu}): ${n}`,...r)}}function Jl(n,...e){if(Ra.logLevel<=tt.WARN){const r=e.map(h0);Ra.warn(`Firestore (${pu}): ${n}`,...r)}}function h0(n){if(typeof n=="string")return n;try{return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,M2(n,i,r)}function M2(n,e,r){let i=`FIRESTORE (${pu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw Rs(i),new Error(i)}function ft(n,e,r,i){let s="Unexpected state";typeof r=="string"?s=r:i=r,n||M2(e,s,i)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends vi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Rn.UNAUTHENTICATED))}shutdown(){}}class Z4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class eM{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ft(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Es,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Es)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new L2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class tM{constructor(e,r,i){this.P=e,this.T=r,this.I=i,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class nM{constructor(e,r,i){this.P=e,this.T=r,this.I=i}getToken(){return Promise.resolve(new tM(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rM{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){ft(this.o===void 0,3512);const i=o=>{o.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ft(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Vx(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<n;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=iM(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function nt(n,e){return n<e?-1:n>e?1:0}function my(n,e){const r=Math.min(n.length,e.length);for(let i=0;i<r;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return $m(s)===$m(o)?nt(s,o):$m(s)?1:-1}return nt(n.length,e.length)}const sM=55296,oM=57343;function $m(n){const e=n.charCodeAt(0);return e>=sM&&e<=oM}function Zl(n,e,r){return n.length===e.length&&n.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="__name__";class Li{constructor(e,r,i){r===void 0?r=0:r>e.length&&Ue(637,{offset:r,range:e.length}),i===void 0?i=e.length-r:i>e.length-r&&Ue(1746,{length:i,range:e.length-r}),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Li.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return nt(e.length,r.length)}static compareSegments(e,r){const i=Li.isNumericId(e),s=Li.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Li.extractNumericId(e).compare(Li.extractNumericId(r)):my(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class xt extends Li{construct(e,r,i){return new xt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new xt(r)}static emptyPath(){return new xt([])}}const aM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Li{construct(e,r,i){return new vn(e,r,i)}static isValidIdentifier(e){return aM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fx}static keyField(){return new vn([Fx])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ne(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ne(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new Ne(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(r)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(xt.fromString(e))}static fromName(e){return new Fe(xt.fromString(e).popFirst(5))}static empty(){return new Fe(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return xt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new xt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(n,e,r){if(!r)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lM(n,e,r,i){if(e===!0&&i===!0)throw new Ne(pe.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function Ux(n){if(!Fe.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zx(n){if(Fe.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function F2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function kp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue(12329,{type:typeof n})}function Co(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=kp(n);throw new Ne(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n,e){const r={typeString:n};return e&&(r.value=e),r}function _h(n,e){if(!F2(n))throw new Ne(pe.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){r=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){r=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${i}' field to equal '${o.value}'`;break}}if(r)throw new Ne(pe.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=-62135596800,Bx=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Bx);return new It(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<$x)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bx}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_h(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:Zt("string",It._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new It(0,0))}static max(){return new $e(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=-1;function uM(n,e){const r=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(i===1e9?new It(r+1,0):new It(r,i));return new ko(s,Fe.empty(),e)}function cM(n){return new ko(n.readTime,n.key,Yc)}class ko{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new ko($e.min(),Fe.empty(),Yc)}static max(){return new ko($e.max(),Fe.empty(),Yc)}}function hM(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(n.documentKey,e.documentKey),r!==0?r:nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==fM)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ge((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ge?r:ge.resolve(r)}catch(r){return ge.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.reject(r)}static resolve(e){return new ge((r,i)=>{r(e)})}static reject(e){return new ge((r,i)=>{i(e)})}static waitFor(e){return new ge((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=ge.resolve(!1);for(const i of e)r=r.next(s=>s?ge.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new ge((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(f=>{a[c]=f,++l,l===o&&i(a)},f=>s(f))}})}static doWhile(e,r){return new ge((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function pM(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function gu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ap.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-1;function Np(n){return n==null}function Rd(n){return n===0&&1/n==-1/0}function mM(n){return typeof n=="number"&&Number.isInteger(n)&&!Rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="";function gM(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e=qx(e)),e=yM(n.get(r),e);return qx(e)}function yM(n,e){let r=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":r+="";break;case U2:r+="";break;default:r+=o}}return r}function qx(n){return n+U2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(n){let e=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function Vo(n,e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function z2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r){this.comparator=e,this.root=r||yn.EMPTY}insert(e,r){return new jt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??yn.RED,this.left=s??yn.EMPTY,this.right=o??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new yn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,r,i,s,o){return this}insert(e,r,i){return new yn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Kx(this.data.getIterator())}getIteratorFrom(e){return new Kx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new on(this.comparator);return r.data=e,r}}class Kx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new gr([])}unionWith(e){let r=new on(vn.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new gr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $2("Invalid base64 string: "+o):o}}(e);return new xn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new xn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const vM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const r=vM.exec(n);if(ft(!!r,46558,{timestamp:n}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(n.seconds),nanos:Bt(n.nanos)}}function Bt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?xn.fromBase64String(n):xn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="server_timestamp",q2="__type__",H2="__previous_value__",K2="__local_write_time__";function p0(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[q2])==null?void 0:i.stringValue)===B2}function Rp(n){const e=n.mapValue.fields[H2];return p0(e)?Rp(e):e}function Xc(n){const e=Ao(n.mapValue.fields[K2].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,r,i,s,o,a,l,u,c,f,h){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=f,this.apiKey=h}}const Pd="(default)";class Jc{constructor(e,r){this.projectId=e,this.database=r||Pd}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}function wM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ne(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="__type__",xM="__max__",hf={mapValue:{}},W2="__vector__",Od="value";function Ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?p0(n)?4:EM(n)?9007199254740991:bM(n)?10:11:Ue(28295,{value:n})}function Yi(n,e){if(n===e)return!0;const r=Ro(n);if(r!==Ro(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xc(n).isEqual(Xc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Ao(s.timestampValue),l=Ao(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return No(s.bytesValue).isEqual(No(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Bt(s.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Bt(s.integerValue)===Bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Bt(s.doubleValue),l=Bt(o.doubleValue);return a===l?Rd(a)===Rd(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Zl(n.arrayValue.values||[],e.arrayValue.values||[],Yi);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Hx(a)!==Hx(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Yi(a[u],l[u])))return!1;return!0}(n,e);default:return Ue(52216,{left:n})}}function Zc(n,e){return(n.values||[]).find(r=>Yi(r,e))!==void 0}function eu(n,e){if(n===e)return 0;const r=Ro(n),i=Ro(e);if(r!==i)return nt(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Bt(o.integerValue||o.doubleValue),u=Bt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return Gx(n.timestampValue,e.timestampValue);case 4:return Gx(Xc(n),Xc(e));case 5:return my(n.stringValue,e.stringValue);case 6:return function(o,a){const l=No(o),u=No(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=nt(l[c],u[c]);if(f!==0)return f}return nt(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const l=nt(Bt(o.latitude),Bt(a.latitude));return l!==0?l:nt(Bt(o.longitude),Bt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Wx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var m,v,w,T;const l=o.fields||{},u=a.fields||{},c=(m=l[Od])==null?void 0:m.arrayValue,f=(v=u[Od])==null?void 0:v.arrayValue,h=nt(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((T=f==null?void 0:f.values)==null?void 0:T.length)||0);return h!==0?h:Wx(c,f)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===hf.mapValue&&a===hf.mapValue)return 0;if(o===hf.mapValue)return 1;if(a===hf.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let h=0;h<u.length&&h<f.length;++h){const m=my(u[h],f[h]);if(m!==0)return m;const v=eu(l[u[h]],c[f[h]]);if(v!==0)return v}return nt(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Ue(23264,{he:r})}}function Gx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nt(n,e);const r=Ao(n),i=Ao(e),s=nt(r.seconds,i.seconds);return s!==0?s:nt(r.nanos,i.nanos)}function Wx(n,e){const r=n.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=eu(r[s],i[s]);if(o)return o}return nt(r.length,i.length)}function tu(n){return gy(n)}function gy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ao(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return No(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return Fe.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=gy(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${gy(r.fields[a])}`;return s+"}"}(n.mapValue):Ue(61005,{value:n})}function Uf(n){switch(Ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rp(n);return e?16+Uf(e):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Uf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Vo(i.fields,(o,a)=>{s+=o.length+Uf(a)}),s}(n.mapValue);default:throw Ue(13486,{value:n})}}function Qx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yy(n){return!!n&&"integerValue"in n}function m0(n){return!!n&&"arrayValue"in n}function Yx(n){return!!n&&"nullValue"in n}function Xx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zf(n){return!!n&&"mapValue"in n}function bM(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[G2])==null?void 0:i.stringValue)===W2}function wc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Vo(n.mapValue.fields,(r,i)=>e.mapValue.fields[r]=wc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=wc(n.arrayValue.values[r]);return e}return{...n}}function EM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!zf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(r)}setAll(e){let r=vn.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=wc(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());zf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Yi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];zf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Vo(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Zn(wc(this.value))}}function Q2(n){const e=[];return Vo(n.fields,(r,i)=>{const s=new vn([r]);if(zf(i)){const o=Q2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new On(e,0,$e.min(),$e.min(),$e.min(),Zn.empty(),0)}static newFoundDocument(e,r,i,s){return new On(e,1,r,$e.min(),i,s,0)}static newNoDocument(e,r){return new On(e,2,r,$e.min(),$e.min(),Zn.empty(),0)}static newUnknownDocument(e,r){return new On(e,3,r,$e.min(),$e.min(),Zn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,r){this.position=e,this.inclusive=r}}function Jx(n,e,r){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?i=Fe.comparator(Fe.fromName(a.referenceValue),r.key):i=eu(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Yi(n.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,r="asc"){this.field=e,this.dir=r}}function TM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{}class Jt extends Y2{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new SM(e,r,i):r==="array-contains"?new AM(e,i):r==="in"?new NM(e,i):r==="not-in"?new RM(e,i):r==="array-contains-any"?new PM(e,i):new Jt(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new CM(e,i):new kM(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(eu(r,this.value)):r!==null&&Ro(this.value)===Ro(r)&&this.matchesComparison(eu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends Y2{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new yi(e,r)}matches(e){return X2(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function X2(n){return n.op==="and"}function J2(n){return IM(n)&&X2(n)}function IM(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function vy(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+tu(n.value);if(J2(n))return n.filters.map(e=>vy(e)).join(",");{const e=n.filters.map(r=>vy(r)).join(",");return`${n.op}(${e})`}}function Z2(n,e){return n instanceof Jt?function(i,s){return s instanceof Jt&&i.op===s.op&&i.field.isEqual(s.field)&&Yi(i.value,s.value)}(n,e):n instanceof yi?function(i,s){return s instanceof yi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&Z2(a,s.filters[l]),!0):!1}(n,e):void Ue(19439)}function eS(n){return n instanceof Jt?function(r){return`${r.field.canonicalString()} ${r.op} ${tu(r.value)}`}(n):n instanceof yi?function(r){return r.op.toString()+" {"+r.getFilters().map(eS).join(" ,")+"}"}(n):"Filter"}class SM extends Jt{constructor(e,r,i){super(e,r,i),this.key=Fe.fromName(i.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class CM extends Jt{constructor(e,r){super(e,"in",r),this.keys=tS("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class kM extends Jt{constructor(e,r){super(e,"not-in",r),this.keys=tS("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function tS(n,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(i=>Fe.fromName(i.referenceValue))}class AM extends Jt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return m0(r)&&Zc(r.arrayValue,this.value)}}class NM extends Jt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Zc(this.value.arrayValue,r)}}class RM extends Jt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Zc(this.value.arrayValue,r)}}class PM extends Jt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!m0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Zc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function e1(n,e=null,r=[],i=[],s=null,o=null,a=null){return new OM(n,e,r,i,s,o,a)}function g0(n){const e=Be(n);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>vy(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Np(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>tu(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>tu(i)).join(",")),e.Te=r}return e.Te}function y0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!TM(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!Z2(n.filters[r],e.filters[r]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zx(n.startAt,e.startAt)&&Zx(n.endAt,e.endAt)}function _y(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function jM(n,e,r,i,s,o,a,l){return new wh(n,e,r,i,s,o,a,l)}function v0(n){return new wh(n)}function t1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DM(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nS(n){return n.collectionGroup!==null}function xc(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new on(vn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Dd(o,i))}),r.has(vn.keyField().canonicalString())||e.Ie.push(new Dd(vn.keyField(),i))}return e.Ie}function qi(n){const e=Be(n);return e.Ee||(e.Ee=MM(e,xc(n))),e.Ee}function MM(n,e){if(n.limitType==="F")return e1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Dd(s.field,o)});const r=n.endAt?new jd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new jd(n.startAt.position,n.startAt.inclusive):null;return e1(n.path,n.collectionGroup,e,n.filters,n.limit,r,i)}}function wy(n,e){const r=n.filters.concat([e]);return new wh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),r,n.limit,n.limitType,n.startAt,n.endAt)}function xy(n,e,r){return new wh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function Pp(n,e){return y0(qi(n),qi(e))&&n.limitType===e.limitType}function rS(n){return`${g0(qi(n))}|lt:${n.limitType}`}function fl(n){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>eS(s)).join(", ")}]`),Np(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>tu(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>tu(s)).join(",")),`Target(${i})`}(qi(n))}; limitType=${n.limitType})`}function Op(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Fe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of xc(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Jx(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,xc(i),s)||i.endAt&&!function(a,l,u){const c=Jx(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,xc(i),s))}(n,e)}function LM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iS(n){return(e,r)=>{let i=!1;for(const s of xc(n)){const o=VM(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function VM(n,e,r){const i=n.field.isKeyField()?Fe.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?eu(u,c):Ue(42886)}(n.field,e,r);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ue(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return z2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new jt(Fe.comparator);function Ps(){return FM}const sS=new jt(Fe.comparator);function tc(...n){let e=sS;for(const r of n)e=e.insert(r.key,r);return e}function oS(n){let e=sS;return n.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function da(){return bc()}function aS(){return bc()}function bc(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const UM=new jt(Fe.comparator),zM=new on(Fe.comparator);function rt(...n){let e=zM;for(const r of n)e=e.add(r);return e}const $M=new on(nt);function BM(){return $M}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function lS(n){return{integerValue:""+n}}function qM(n,e){return mM(e)?lS(e):_0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this._=void 0}}function HM(n,e,r){return n instanceof Md?function(s,o){const a={fields:{[q2]:{stringValue:B2},[K2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&p0(o)&&(o=Rp(o)),o&&(a.fields[H2]=o),{mapValue:a}}(r,e):n instanceof eh?cS(n,e):n instanceof th?hS(n,e):function(s,o){const a=uS(s,o),l=n1(a)+n1(s.Ae);return yy(a)&&yy(s.Ae)?lS(l):_0(s.serializer,l)}(n,e)}function KM(n,e,r){return n instanceof eh?cS(n,e):n instanceof th?hS(n,e):r}function uS(n,e){return n instanceof Ld?function(i){return yy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Md extends jp{}class eh extends jp{constructor(e){super(),this.elements=e}}function cS(n,e){const r=fS(e);for(const i of n.elements)r.some(s=>Yi(s,i))||r.push(i);return{arrayValue:{values:r}}}class th extends jp{constructor(e){super(),this.elements=e}}function hS(n,e){let r=fS(e);for(const i of n.elements)r=r.filter(s=>!Yi(s,i));return{arrayValue:{values:r}}}class Ld extends jp{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function n1(n){return Bt(n.integerValue||n.doubleValue)}function fS(n){return m0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof eh&&s instanceof eh||i instanceof th&&s instanceof th?Zl(i.elements,s.elements,Yi):i instanceof Ld&&s instanceof Ld?Yi(i.Ae,s.Ae):i instanceof Md&&s instanceof Md}(n.transform,e.transform)}class WM{constructor(e,r){this.version=e,this.transformResults=r}}class Ur{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $f(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Dp{}function dS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new w0(n.key,Ur.none()):new xh(n.key,n.data,Ur.none());{const r=n.data,i=Zn.empty();let s=new on(vn.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Fo(n.key,i,new gr(s.toArray()),Ur.none())}}function QM(n,e,r){n instanceof xh?function(s,o,a){const l=s.value.clone(),u=i1(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,r):n instanceof Fo?function(s,o,a){if(!$f(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=i1(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(pS(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Ec(n,e,r,i){return n instanceof xh?function(o,a,l,u){if(!$f(o.precondition,a))return l;const c=o.value.clone(),f=s1(o.fieldTransforms,u,a);return c.setAll(f),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,r,i):n instanceof Fo?function(o,a,l,u){if(!$f(o.precondition,a))return l;const c=s1(o.fieldTransforms,u,a),f=a.data;return f.setAll(pS(o)),f.setAll(c),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,r,i):function(o,a,l){return $f(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,r)}function YM(n,e){let r=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=uS(i.transform,s||null);o!=null&&(r===null&&(r=Zn.empty()),r.set(i.field,o))}return r||null}function r1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Zl(i,s,(o,a)=>GM(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xh extends Dp{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fo extends Dp{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pS(n){const e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=n.data.field(r);e.set(r,i)}}),e}function i1(n,e,r){const i=new Map;ft(n.length===r.length,32656,{Ve:r.length,de:n.length});for(let s=0;s<r.length;s++){const o=n[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,KM(a,l,r[s]))}return i}function s1(n,e,r){const i=new Map;for(const s of n){const o=s.transform,a=r.data.field(s.field);i.set(s.field,HM(o,a,e))}return i}class w0 extends Dp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XM extends Dp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&QM(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=Ec(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=Ec(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=aS();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=dS(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument($e.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),rt())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(r,i)=>r1(r,i))&&Zl(this.baseMutations,e.baseMutations,(r,i)=>r1(r,i))}}class x0{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){ft(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return UM}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new x0(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,st;function t3(n){switch(n){case pe.OK:return Ue(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function mS(n){if(n===void 0)return Rs("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Yt.OK:return pe.OK;case Yt.CANCELLED:return pe.CANCELLED;case Yt.UNKNOWN:return pe.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return pe.INTERNAL;case Yt.UNAVAILABLE:return pe.UNAVAILABLE;case Yt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Yt.NOT_FOUND:return pe.NOT_FOUND;case Yt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Yt.ABORTED:return pe.ABORTED;case Yt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Yt.DATA_LOSS:return pe.DATA_LOSS;default:return Ue(39323,{code:n})}}(st=Yt||(Yt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new bo([4294967295,4294967295],0);function o1(n){const e=n3().encode(n),r=new N2;return r.update(e),new Uint8Array(r.digest())}function a1(n){const e=new DataView(n.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bo([r,i],0),new bo([s,o],0)]}class b0{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new nc(`Invalid padding: ${r}`);if(i<0)throw new nc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new nc(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=bo.fromNumber(this.ge)}ye(e,r,i){let s=e.add(r.multiply(bo.fromNumber(i)));return s.compare(r3)===1&&(s=new bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=o1(e),[i,s]=a1(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new b0(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=o1(e),[i,s]=a1(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.be(a)}}be(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Mp($e.min(),s,new jt(nt),Ps(),rt())}}class bh{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new bh(i,r,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,r,i,s){this.Se=e,this.removedTargetIds=r,this.key=i,this.De=s}}class gS{constructor(e,r){this.targetId=e,this.Ce=r}}class yS{constructor(e,r,i=xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class l1{constructor(){this.ve=0,this.Fe=u1(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),r=rt(),i=rt();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Ue(38017,{changeType:o})}}),new bh(this.Me,this.xe,e,r,i)}Ke(){this.Oe=!1,this.Fe=u1()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class i3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ps(),this.He=ff(),this.Je=ff(),this.Ze=new jt(nt)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const i=this.nt(r);switch(e.state){case 0:this.rt(r)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),i.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((i,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,i=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(_y(o))if(i===0){const a=new Fe(o.path);this.et(r,a,On.newNoDocument(a,$e.min()))}else ft(i===1,20013,{expectedCount:i});else{const a=this._t(r);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=No(i).toUint8Array()}catch(u){if(u instanceof $2)return Jl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new b0(a,s,o)}catch(u){return Jl(u instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,i){return r.Ce.count===i-this.Pt(e,r.targetId)?0:2}Pt(e,r){const i=this.Ge.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&_y(l.target)){const u=new Fe(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,On.newNoDocument(u,e))}o.Be&&(r.set(a,o.ke()),o.Ke())}});let i=rt();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Mp(e,r,this.Ze,this.je,i);return this.je=Ps(),this.He=ff(),this.Je=ff(),this.Ze=new jt(nt),s}Ye(e,r){if(!this.rt(e))return;const i=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,i),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),i&&(this.je=this.je.insert(r,i))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new l1,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new on(nt),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new on(nt),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Re("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new l1),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function ff(){return new jt(Fe.comparator)}function u1(){return new jt(Fe.comparator)}const s3={asc:"ASCENDING",desc:"DESCENDING"},o3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a3={and:"AND",or:"OR"};class l3{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function by(n,e){return n.useProto3Json||Np(e)?e:{value:e}}function Vd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u3(n,e){return Vd(n,e.toTimestamp())}function Hi(n){return ft(!!n,49232),$e.fromTimestamp(function(r){const i=Ao(r);return new It(i.seconds,i.nanos)}(n))}function E0(n,e){return Ey(n,e).canonicalString()}function Ey(n,e){const r=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?r:r.child(e)}function _S(n){const e=xt.fromString(n);return ft(TS(e),10190,{key:e.toString()}),e}function Ty(n,e){return E0(n.databaseId,e.path)}function Bm(n,e){const r=_S(e);if(r.get(1)!==n.databaseId.projectId)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new Fe(xS(r))}function wS(n,e){return E0(n.databaseId,e)}function c3(n){const e=_S(n);return e.length===4?xt.emptyPath():xS(e)}function Iy(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xS(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c1(n,e,r){return{name:Ty(n,e),fields:r.value.mapValue.fields}}function h3(n,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ue(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,f){return c.useProto3Json?(ft(f===void 0||typeof f=="string",58123),xn.fromBase64String(f||"")):(ft(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),xn.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const f=c.code===void 0?pe.UNKNOWN:mS(c.code);return new Ne(f,c.message||"")}(a);r=new yS(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Bm(n,i.document.name),o=Hi(i.document.updateTime),a=i.document.createTime?Hi(i.document.createTime):$e.min(),l=new Zn({mapValue:{fields:i.document.fields}}),u=On.newFoundDocument(s,o,a,l),c=i.targetIds||[],f=i.removedTargetIds||[];r=new Bf(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Bm(n,i.document),o=i.readTime?Hi(i.readTime):$e.min(),a=On.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Bf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Bm(n,i.document),o=i.removedTargetIds||[];r=new Bf([],o,s,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new e3(s,o),l=i.targetId;r=new gS(l,a)}}return r}function f3(n,e){let r;if(e instanceof xh)r={update:c1(n,e.key,e.value)};else if(e instanceof w0)r={delete:Ty(n,e.key)};else if(e instanceof Fo)r={update:c1(n,e.key,e.data),updateMask:x3(e.fieldMask)};else{if(!(e instanceof XM))return Ue(16599,{dt:e.type});r={verify:Ty(n,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Md)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof eh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof th)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ld)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Ue(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:u3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)}(n,e.precondition)),r}function d3(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(r=>function(s,o){let a=s.updateTime?Hi(s.updateTime):Hi(o);return a.isEqual($e.min())&&(a=Hi(o)),new WM(a,s.transformResults||[])}(r,e))):[]}function p3(n,e){return{documents:[wS(n,e.path)]}}function m3(n,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=wS(n,s);const o=function(c){if(c.length!==0)return ES(yi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(f=>function(m){return{field:dl(m.field),direction:v3(m.dir)}}(f))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=by(n,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function g3(n){let e=c3(n.parent);const r=n.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){ft(i===1,65062);const f=r.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let o=[];r.where&&(o=function(h){const m=bS(h);return m instanceof yi&&J2(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(m=>function(w){return new Dd(pl(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,Np(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(h){const m=!!h.before,v=h.values||[];return new jd(v,m)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const m=!h.before,v=h.values||[];return new jd(v,m)}(r.endAt)),jM(e,s,a,o,l,"F",u,c)}function y3(n,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function bS(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=pl(r.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=pl(r.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=pl(r.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pl(r.unaryFilter.field);return Jt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(n):n.fieldFilter!==void 0?function(r){return Jt.create(pl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return yi.create(r.compositeFilter.filters.map(i=>bS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(r.compositeFilter.op))}(n):Ue(30097,{filter:n})}function v3(n){return s3[n]}function _3(n){return o3[n]}function w3(n){return a3[n]}function dl(n){return{fieldPath:n.canonicalString()}}function pl(n){return vn.fromServerFormat(n.fieldPath)}function ES(n){return n instanceof Jt?function(r){if(r.op==="=="){if(Xx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NAN"}};if(Yx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Xx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NOT_NAN"}};if(Yx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(r.field),op:_3(r.op),value:r.value}}}(n):n instanceof yi?function(r){const i=r.getFilters().map(s=>ES(s));return i.length===1?i[0]:{compositeFilter:{op:w3(r.op),filters:i}}}(n):Ue(54877,{filter:n})}function x3(n){const e=[];return n.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function TS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function IS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,r,i,s,o=$e.min(),a=$e.min(),l=xn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.yt=e}}function E3(n){const e=g3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.Sn=new I3}addToCollectionParentIndex(e,r){return this.Sn.add(r),ge.resolve()}getCollectionParents(e,r){return ge.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return ge.resolve()}deleteFieldIndex(e,r){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,r){return ge.resolve()}getDocumentsMatchingTarget(e,r){return ge.resolve(null)}getIndexType(e,r){return ge.resolve(0)}getFieldIndexes(e,r){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,r){return ge.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,r){return ge.resolve(ko.min())}updateCollectionGroup(e,r,i){return ge.resolve()}updateIndexEntries(e,r){return ge.resolve()}}class I3{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new on(xt.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new on(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SS=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(SS,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new nu(0)}static ar(){return new nu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="LruGarbageCollector",S3=1048576;function d1([n,e],[r,i]){const s=nt(n,r);return s===0?nt(e,i):s}class C3{constructor(e){this.Pr=e,this.buffer=new on(d1),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();d1(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class k3{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(f1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){gu(r)?Re(f1,"Ignoring IndexedDB error during garbage collection: ",r):await mu(r)}await this.Ar(3e5)})}}class A3{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return ge.resolve(Ap.ce);const i=new C3(r);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.Vr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(h1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h1):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let i,s,o,a,l,u,c;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,l=Date.now(),this.removeTargets(e,i,r))).next(h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),hl()<=tt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-f}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:h})))}}function N3(n,e){return new A3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.changes=new $a(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?ge.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&Ec(i.mutation,s,gr.empty(),It.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,rt()).next(()=>i))}getLocalViewOfDocuments(e,r,i=rt()){const s=da();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=tc();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=da();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,rt()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=Ps();const a=bc(),l=function(){return bc()}();return r.forEach((u,c)=>{const f=i.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof Fo)?o=o.insert(c.key,c):f!==void 0?(a.set(c.key,f.mutation.getFieldMask()),Ec(f.mutation,c,f.mutation.getFieldMask(),It.now())):a.set(c.key,gr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,f)=>a.set(c,f)),r.forEach((c,f)=>l.set(c,new P3(f,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,r){const i=bc();let s=new jt((a,l)=>a-l),o=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let f=i.get(u)||gr.empty();f=l.applyToLocalView(c,f),i.set(u,f);const h=(s.get(l.batchId)||rt()).add(u);s=s.insert(l.batchId,h)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,h=aS();f.forEach(m=>{if(!o.has(m)){const v=dS(r.get(m),i.get(m));v!==null&&h.set(m,v),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ge.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return DM(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nS(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):ge.resolve(da());let l=Yc,u=o;return a.next(c=>ge.forEach(c,(f,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(f)?ge.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,rt())).next(f=>({batchId:l,changes:oS(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next(i=>{let s=tc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=tc();return this.indexManager.getCollectionParents(e,o).next(l=>ge.forEach(l,u=>{const c=function(h,m){return new wh(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(f=>{f.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const f=c.getKey();a.get(f)===null&&(a=a.insert(f,On.newInvalidDocument(f)))});let l=tc();return a.forEach((u,c)=>{const f=o.get(u);f!==void 0&&Ec(f.mutation,c,gr.empty(),It.now()),Op(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return ge.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Hi(s.createTime)}}(r)),ge.resolve()}getNamedQuery(e,r){return ge.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:E3(s.bundledQuery),readTime:Hi(s.readTime)}}(r)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.overlays=new jt(Fe.comparator),this.Lr=new Map}getOverlay(e,r){return ge.resolve(this.overlays.get(r))}getOverlays(e,r){const i=da();return ge.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.bt(e,r,o)}),ge.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),ge.resolve()}getOverlaysForCollection(e,r,i){const s=da(),o=r.length+1,a=new Fe(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ge.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new jt((c,f)=>c-f);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let f=o.get(c.largestBatchId);f===null&&(f=da(),o=o.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=da(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=s)););return ge.resolve(l)}bt(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new ZM(r,i));let o=this.Lr.get(r);o===void 0&&(o=rt(),this.Lr.set(r,o)),this.Lr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.kr=new on(hn.Kr),this.qr=new on(hn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const i=new hn(e,r);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Wr(new hn(e,r))}Qr(e,r){e.forEach(i=>this.removeReference(i,r))}Gr(e){const r=new Fe(new xt([])),i=new hn(r,e),s=new hn(r,e+1),o=[];return this.qr.forEachInRange([i,s],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new Fe(new xt([])),i=new hn(r,e),s=new hn(r,e+1);let o=rt();return this.qr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new hn(e,0),i=this.kr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class hn{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return Fe.comparator(e.key,r.key)||nt(e.Hr,r.Hr)}static Ur(e,r){return nt(e.Hr,r.Hr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new on(hn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new JM(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new hn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ge.resolve(a)}lookupMutationBatch(e,r){return ge.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Xr(i),o=s<0?0:s;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?d0:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new hn(r,0),s=new hn(r,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],a=>{const l=this.Zr(a.Hr);o.push(l)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new on(nt);return r.forEach(s=>{const o=new hn(s,0),a=new hn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),ge.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;Fe.isDocumentKey(o)||(o=o.child(""));const a=new hn(new Fe(o),0);let l=new on(nt);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},a),ge.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ft(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ge.forEach(r.mutations,s=>{const o=new hn(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,r){const i=new hn(r,0),s=this.Jr.firstAfterOrEqual(i);return ge.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.ti=e,this.docs=function(){return new jt(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return ge.resolve(i?i.document.mutableCopy():On.newInvalidDocument(r))}getEntries(e,r){let i=Ps();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():On.newInvalidDocument(s))}),ge.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=Ps();const a=r.path,l=new Fe(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hM(cM(f),i)<=0||(s.has(f.key)||Op(r,f))&&(o=o.insert(f.key,f.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,r,i,s){Ue(9500)}ni(e,r){return ge.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new F3(this)}getSize(e){return ge.resolve(this.size)}}class F3 extends R3{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),ge.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.persistence=e,this.ri=new $a(r=>g0(r),y0),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new T0,this.targetCount=0,this.oi=nu._r()}forEachTarget(e,r){return this.ri.forEach((i,s)=>r(s)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ii&&(this.ii=r),ge.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new nu(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,ge.resolve()}updateTargetData(e,r){return this.lr(r),ge.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ge.waitFor(o).next(()=>s)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,r){const i=this.ri.get(r)||null;return ge.resolve(i)}addMatchingKeys(e,r,i){return this.si.$r(r,i),ge.resolve()}removeMatchingKeys(e,r,i){this.si.Qr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),ge.resolve()}getMatchingKeysForTargetId(e,r){const i=this.si.jr(r);return ge.resolve(i)}containsKey(e,r){return ge.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,r){this._i={},this.overlays={},this.ai=new Ap(0),this.ui=!1,this.ui=!0,this.ci=new M3,this.referenceDelegate=e(this),this.li=new U3(this),this.indexManager=new T3,this.remoteDocumentCache=function(s){return new V3(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new b3(r),this.Pi=new j3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new D3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this._i[e.toKey()];return i||(i=new L3(r,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,i){Re("MemoryPersistence","Starting transaction:",e);const s=new z3(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,r){return ge.or(Object.values(this._i).map(i=>()=>i.containsKey(e,r)))}}class z3 extends dM{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new T0,this.Ai=null}static Vi(e){return new I0(e)}get di(){if(this.Ai)return this.Ai;throw Ue(60996)}addReference(e,r,i){return this.Ri.addReference(i,r),this.di.delete(i.toString()),ge.resolve()}removeReference(e,r,i){return this.Ri.removeReference(i,r),this.di.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),ge.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,i=>{const s=Fe.fromPath(i);return this.mi(e,s).next(o=>{o||r.removeEntry(s,$e.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(i=>{i?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return ge.or([()=>ge.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class Fd{constructor(e,r){this.persistence=e,this.fi=new $a(i=>gM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=N3(this,r)}static Vi(e,r){return new Fd(e,r)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}pr(e){let r=0;return this.mr(e,i=>{r++}).next(()=>r)}mr(e,r){return ge.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?ge.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(i++,o.removeEntry(a,$e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),ge.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ge.resolve()}removeReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),ge.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Uf(e.data.value)),r}wr(e,r,i){return ge.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return ge.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Ts=i,this.Is=s}static Es(e,r){let i=rt(),s=rt();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new S0(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return kO()?8:pM(Mn())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.gs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new $3;return this.ys(e,r,a).next(l=>{if(o.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>o.result)}ws(e,r,i,s){return i.documentReadCount<this.Vs?(hl()<=tt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",fl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(hl()<=tt.DEBUG&&Re("QueryEngine","Query:",fl(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(hl()<=tt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",fl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(r))):ge.resolve())}gs(e,r){if(t1(r))return ge.resolve(null);let i=qi(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=xy(r,null,"F"),i=qi(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=rt(...o);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.bs(r,l);return this.Ss(r,c,a,u.readTime)?this.gs(e,xy(r,null,"F")):this.Ds(e,c,r,u)}))})))}ps(e,r,i,s){return t1(r)||s.isEqual($e.min())?ge.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(r,o);return this.Ss(r,a,i,s)?ge.resolve(null):(hl()<=tt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fl(r)),this.Ds(e,a,r,uM(s,Yc)).next(l=>l))})}bs(e,r){let i=new on(iS(e));return r.forEach((s,o)=>{Op(e,o)&&(i=i.add(o))}),i}Ss(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,r,i){return hl()<=tt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",fl(r)),this.fs.getDocumentsMatchingQuery(e,r,ko.min(),i)}Ds(e,r,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LocalStore",q3=3e8;class H3{constructor(e,r,i,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new jt(nt),this.Fs=new $a(o=>g0(o),y0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function K3(n,e,r,i){return new H3(n,e,r,i)}async function kS(n,e){const r=Be(n);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.Os(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=rt();for(const c of s){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of o){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function G3(n,e){const r=Be(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const h=c.batch,m=h.keys();let v=ge.resolve();return m.forEach(w=>{v=v.next(()=>f.getEntry(u,w)).next(T=>{const C=c.docVersions.get(w);ft(C!==null,48541),T.version.compareTo(C)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),f.addEntry(T)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=rt();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function AS(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function W3(n,e){const r=Be(n),i=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((f,h)=>{const m=s.get(h);if(!m)return;l.push(r.li.removeMatchingKeys(o,f.removedDocuments,h).next(()=>r.li.addMatchingKeys(o,f.addedDocuments,h)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(xn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,i)),s=s.insert(h,v),function(T,C,b){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=q3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,v,f)&&l.push(r.li.updateTargetData(o,v))});let u=Ps(),c=rt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(Q3(o,a,e.documentUpdates).next(f=>{u=f.Bs,c=f.Ls})),!i.isEqual($e.min())){const f=r.li.getLastRemoteSnapshotVersion(o).next(h=>r.li.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(f)}return ge.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.vs=s,o))}function Q3(n,e,r){let i=rt(),s=rt();return r.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=Ps();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual($e.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Re(C0,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function Y3(n,e){const r=Be(n);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=d0),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function X3(n,e){const r=Be(n);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.li.getTargetData(i,e).next(o=>o?(s=o,ge.resolve(s)):r.li.allocateTargetId(i).next(a=>(s=new uo(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(i.targetId,i),r.Fs.set(e,i.targetId)),i})}async function Sy(n,e,r){const i=Be(n),s=i.vs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!gu(a))throw a;Re(C0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function p1(n,e,r){const i=Be(n);let s=$e.min(),o=rt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,f){const h=Be(u),m=h.Fs.get(f);return m!==void 0?ge.resolve(h.vs.get(m)):h.li.getTargetData(c,f)}(i,a,qi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,r?s:$e.min(),r?o:rt())).next(l=>(J3(i,LM(e),l),{documents:l,ks:o})))}function J3(n,e,r){let i=n.Ms.get(e)||$e.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ms.set(e,i)}class m1{constructor(){this.activeTargetIds=BM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z3{constructor(){this.vo=new m1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,i){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new m1,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="ConnectivityMonitor";class y1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(g1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(g1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function Cy(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="RestConnection",t5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class n5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===Pd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,r,i,s,o){const a=Cy(),l=this.Qo(e,r.toUriEncodedString());Re(qm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,o);const{host:c}=new URL(l),f=hu(c);return this.zo(e,l,u,i,f).then(h=>(Re(qm,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Jl(qm,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}jo(e,r,i,s,o,a){return this.Wo(e,r,i,s,o)}Go(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,r){const i=t5[e];let s=`${this.qo}/v1/${r}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection",zu=(n,e,r)=>{n.listen(e,i=>{try{r(i)}catch(s){setTimeout(()=>{throw s},0)}})};class Ll extends n5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ll.c_){const e=j2();zu(e,O2.STAT_EVENT,r=>{r.stat===py.PROXY?Re(An,"STAT_EVENT: detected buffering proxy"):r.stat===py.NOPROXY&&Re(An,"STAT_EVENT: detected no buffering proxy")}),Ll.c_=!0}}zo(e,r,i,s,o){const a=Cy();return new Promise((l,u)=>{const c=new R2;c.setWithCredentials(!0),c.listenOnce(P2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ff.NO_ERROR:const h=c.getResponseJson();Re(An,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),l(h);break;case Ff.TIMEOUT:Re(An,`RPC '${e}' ${a} timed out`),u(new Ne(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const m=c.getStatus();if(Re(An,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const T=function(b){const I=b.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(I)>=0?I:pe.UNKNOWN}(w.status);u(new Ne(T,w.message))}else u(new Ne(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Ne(pe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Re(An,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);Re(An,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",f,i,15)})}T_(e,r,i){const s=Cy(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,i),l.encodeInitMessageHeaders=!0;const c=o.join("");Re(An,`Creating RPC '${e}' stream ${s}: ${c}`,l);const f=a.createWebChannel(c,l);this.I_(f);let h=!1,m=!1;const v=new r5({Ho:w=>{m?Re(An,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(h||(Re(An,`Opening RPC '${e}' stream ${s} transport.`),f.open(),h=!0),Re(An,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Jo:()=>f.close()});return zu(f,ec.EventType.OPEN,()=>{m||(Re(An,`RPC '${e}' stream ${s} transport opened.`),v.i_())}),zu(f,ec.EventType.CLOSE,()=>{m||(m=!0,Re(An,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(f))}),zu(f,ec.EventType.ERROR,w=>{m||(m=!0,Jl(An,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),v.o_(new Ne(pe.UNAVAILABLE,"The operation could not be completed")))}),zu(f,ec.EventType.MESSAGE,w=>{var T;if(!m){const C=w.data[0];ft(!!C,16349);const b=C,I=(b==null?void 0:b.error)||((T=b[0])==null?void 0:T.error);if(I){Re(An,`RPC '${e}' stream ${s} received error:`,I);const N=I.status;let O=function(A){const R=Yt[A];if(R!==void 0)return mS(R)}(N),L=I.message;O===void 0&&(O=pe.INTERNAL,L="Unknown error status: "+N+" with message "+I.message),m=!0,v.o_(new Ne(O,L)),f.close()}else Re(An,`RPC '${e}' stream ${s} received:`,C),v.__(C)}}),Ll.u_(),setTimeout(()=>{v.s_()},0),v}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,i){super.Go(e,r,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return D2()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(n){return new Ll(n)}function Hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(n){return new l3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ll.c_=!1;class NS{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=r,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-i);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="PersistentStream";class RS{constructor(e,r,i,s,o,a,l,u){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===pe.RESOURCE_EXHAUSTED?(Rs(r.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===r&&this.G_(i,s)},i=>{e(()=>{const s=new Ne(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,r){const i=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Re(v1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Re(v1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s5 extends RS{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=h3(this.serializer,e),i=function(o){if(!("targetChange"in o))return $e.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?$e.min():a.readTime?Hi(a.readTime):$e.min()}(e);return this.listener.J_(r,i)}Z_(e){const r={};r.database=Iy(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=_y(u)?{documents:p3(o,u)}:{query:m3(o,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=vS(o,a.resumeToken);const c=by(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo($e.min())>0){l.readTime=Vd(o,a.snapshotVersion.toTimestamp());const c=by(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=y3(this.serializer,e);i&&(r.labels=i),this.K_(r)}X_(e){const r={};r.database=Iy(this.serializer),r.removeTarget=e,this.K_(r)}}class o5 extends RS{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=d3(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,r)}ra(){const e={};e.database=Iy(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>f3(this.serializer,i))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{}class l5 extends a5{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Ey(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(pe.UNKNOWN,o.toString())})}jo(e,r,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Ey(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(pe.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function u5(n,e,r,i){return new l5(n,e,r,i)}class c5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(r),this.aa=!1):Re("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class h5{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{Ba(this)&&(Re(Pa,"Restarting streams for network reachability change."),await async function(u){const c=Be(u);c.Ea.add(4),await Eh(c),c.Va.set("Unknown"),c.Ea.delete(4),await Vp(c)}(this))})}),this.Va=new c5(i,s)}}async function Vp(n){if(Ba(n))for(const e of n.Ra)await e(!0)}async function Eh(n){for(const e of n.Ra)await e(!1)}function PS(n,e){const r=Be(n);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),R0(r)?N0(r):yu(r).O_()&&A0(r,e))}function k0(n,e){const r=Be(n),i=yu(r);r.Ia.delete(e),i.O_()&&OS(r,e),r.Ia.size===0&&(i.O_()?i.L_():Ba(r)&&r.Va.set("Unknown"))}function A0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yu(n).Z_(e)}function OS(n,e){n.da.$e(e),yu(n).X_(e)}function N0(n){n.da=new i3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),yu(n).start(),n.Va.ua()}function R0(n){return Ba(n)&&!yu(n).x_()&&n.Ia.size>0}function Ba(n){return Be(n).Ea.size===0}function jS(n){n.da=void 0}async function f5(n){n.Va.set("Online")}async function d5(n){n.Ia.forEach((e,r)=>{A0(n,e)})}async function p5(n,e){jS(n),R0(n)?(n.Va.ha(e),N0(n)):n.Va.set("Unknown")}async function m5(n,e,r){if(n.Va.set("Online"),e instanceof yS&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(n,e)}catch(i){Re(Pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(n,i)}else if(e instanceof Bf?n.da.Xe(e):e instanceof gS?n.da.st(e):n.da.tt(e),!r.isEqual($e.min()))try{const i=await AS(n.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.Ia.get(c);f&&o.Ia.set(c,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(xn.EMPTY_BYTE_STRING,f.snapshotVersion)),OS(o,u);const h=new uo(f.target,u,c,f.sequenceNumber);A0(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(n,r)}catch(i){Re(Pa,"Failed to raise snapshot:",i),await Ud(n,i)}}async function Ud(n,e,r){if(!gu(e))throw e;n.Ea.add(1),await Eh(n),n.Va.set("Offline"),r||(r=()=>AS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re(Pa,"Retrying IndexedDB access"),await r(),n.Ea.delete(1),await Vp(n)})}function DS(n,e){return e().catch(r=>Ud(n,r,e))}async function Fp(n){const e=Be(n),r=Po(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:d0;for(;g5(e);)try{const s=await Y3(e.localStore,i);if(s===null){e.Ta.length===0&&r.L_();break}i=s.batchId,y5(e,s)}catch(s){await Ud(e,s)}MS(e)&&LS(e)}function g5(n){return Ba(n)&&n.Ta.length<10}function y5(n,e){n.Ta.push(e);const r=Po(n);r.O_()&&r.Y_&&r.ea(e.mutations)}function MS(n){return Ba(n)&&!Po(n).x_()&&n.Ta.length>0}function LS(n){Po(n).start()}async function v5(n){Po(n).ra()}async function _5(n){const e=Po(n);for(const r of n.Ta)e.ea(r.mutations)}async function w5(n,e,r){const i=n.Ta.shift(),s=x0.from(i,e,r);await DS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Fp(n)}async function x5(n,e){e&&Po(n).Y_&&await async function(i,s){if(function(a){return t3(a)&&a!==pe.ABORTED}(s.code)){const o=i.Ta.shift();Po(i).B_(),await DS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Fp(i)}}(n,e),MS(n)&&LS(n)}async function _1(n,e){const r=Be(n);r.asyncQueue.verifyOperationInProgress(),Re(Pa,"RemoteStore received new credentials");const i=Ba(r);r.Ea.add(3),await Eh(r),i&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Vp(r)}async function b5(n,e){const r=Be(n);e?(r.Ea.delete(2),await Vp(r)):e||(r.Ea.add(2),await Eh(r),r.Va.set("Unknown"))}function yu(n){return n.ma||(n.ma=function(r,i,s){const o=Be(r);return o.sa(),new s5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:f5.bind(null,n),Yo:d5.bind(null,n),t_:p5.bind(null,n),J_:m5.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),R0(n)?N0(n):n.Va.set("Unknown")):(await n.ma.stop(),jS(n))})),n.ma}function Po(n){return n.fa||(n.fa=function(r,i,s){const o=Be(r);return o.sa(),new o5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:v5.bind(null,n),t_:x5.bind(null,n),ta:_5.bind(null,n),na:w5.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await Fp(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(Pa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new P0(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O0(n,e){if(Rs("AsyncQueue",`${e}: ${n}`),gu(n))return new Ne(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{static emptySet(e){return new Vl(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||Fe.comparator(r.key,i.key):(r,i)=>Fe.comparator(r.key,i.key),this.keyedMap=tc(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.ga=new jt(Fe.comparator)}track(e){const r=e.doc.key,i=this.ga.get(r);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(r,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(r):e.type===1&&i.type===2?this.ga=this.ga.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Ue(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,i)=>{e.push(i)}),e}}class ru{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new ru(e,r,Vl.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class T5{constructor(){this.queries=x1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,i){const s=Be(r),o=s.queries;s.queries=x1(),o.forEach((a,l)=>{for(const u of l.ba)u.onError(i)})})(this,new Ne(pe.ABORTED,"Firestore shutting down"))}}function x1(){return new $a(n=>rS(n),Pp)}async function VS(n,e){const r=Be(n);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new E5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=O0(a,`Initialization of query '${fl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ba.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&j0(r)}async function FS(n,e){const r=Be(n),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function I5(n,e){const r=Be(n);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ba)l.Fa(s)&&(i=!0);a.wa=s}}i&&j0(r)}function S5(n,e,r){const i=Be(n),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(r);i.queries.delete(e)}function j0(n){n.Ca.forEach(e=>{e.next()})}var ky,b1;(b1=ky||(ky={})).Ma="default",b1.Cache="cache";class US{constructor(e,r,i){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ru(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const i=r!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ky.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.key=e}}class $S{constructor(e){this.key=e}}class C5{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=rt(),this.mutatedKeys=rt(),this.eu=iS(e),this.tu=new Vl(this.eu)}get nu(){return this.Za}ru(e,r){const i=r?r.iu:new w1,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,h)=>{const m=s.get(f),v=Op(this.query,h)?h:null,w=!!m&&this.mutatedKeys.has(m.key),T=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;m&&v?m.data.isEqual(v.data)?w!==T&&(i.track({type:3,doc:v}),C=!0):this.su(m,v)||(i.track({type:2,doc:v}),C=!0,(u&&this.eu(v,u)>0||c&&this.eu(v,c)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),C=!0):m&&!v&&(i.track({type:1,doc:m}),C=!0,(u||c)&&(l=!0)),C&&(v?(a=a.add(v),o=T?o.add(f):o.delete(f)):(a=a.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),o=o.delete(f.key),i.track({type:1,doc:f})}return{tu:a,iu:i,Ss:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,h)=>function(v,w){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:C})}};return T(v)-T(w)}(f.type,h.type)||this.eu(f.doc,h.doc)),this.ou(i),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new ru(this.query,e.tu,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=rt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const r=[];return e.forEach(i=>{this.Ya.has(i)||r.push(new $S(i))}),this.Ya.forEach(i=>{e.has(i)||r.push(new zS(i))}),r}cu(e){this.Za=e.ks,this.Ya=rt();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ru.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const D0="SyncEngine";class k5{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class A5{constructor(e){this.key=e,this.hu=!1}}class N5{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new $a(l=>rS(l),Pp),this.Iu=new Map,this.Eu=new Set,this.Ru=new jt(Fe.comparator),this.Au=new Map,this.Vu=new T0,this.du={},this.mu=new Map,this.fu=nu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R5(n,e,r=!0){const i=WS(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await BS(i,e,r,!0),s}async function P5(n,e){const r=WS(n);await BS(r,e,!0,!1)}async function BS(n,e,r,i){const s=await X3(n.localStore,qi(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await O5(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&r&&PS(n.remoteStore,s),l}async function O5(n,e,r,i,s){n.pu=(h,m,v)=>async function(T,C,b,I){let N=C.view.ru(b);N.Ss&&(N=await p1(T.localStore,C.query,!1).then(({documents:A})=>C.view.ru(A,N)));const O=I&&I.targetChanges.get(C.targetId),L=I&&I.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(N,T.isPrimaryClient,O,L);return T1(T,C.targetId,U.au),U.snapshot}(n,h,m,v);const o=await p1(n.localStore,e,!0),a=new C5(e,o.ks),l=a.ru(o.documents),u=bh.createSynthesizedTargetChangeForCurrentChange(r,i&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);T1(n,r,c.au);const f=new k5(e,r,a);return n.Tu.set(e,f),n.Iu.has(r)?n.Iu.get(r).push(e):n.Iu.set(r,[e]),c.snapshot}async function j5(n,e,r){const i=Be(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!Pp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Sy(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&k0(i.remoteStore,s.targetId),Ay(i,s.targetId)}).catch(mu)):(Ay(i,s.targetId),await Sy(i.localStore,s.targetId,!0))}async function D5(n,e){const r=Be(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),k0(r.remoteStore,i.targetId))}async function M5(n,e,r){const i=B5(n);try{const s=await function(a,l){const u=Be(a),c=It.now(),f=l.reduce((v,w)=>v.add(w.key),rt());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Ps(),T=rt();return u.xs.getEntries(v,f).next(C=>{w=C,w.forEach((b,I)=>{I.isValidDocument()||(T=T.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,w)).next(C=>{h=C;const b=[];for(const I of l){const N=YM(I,h.get(I.key).overlayedDocument);N!=null&&b.push(new Fo(I.key,N,Q2(N.value.mapValue),Ur.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,b,l)}).next(C=>{m=C;const b=C.applyToLocalDocumentSet(h,T);return u.documentOverlayCache.saveOverlays(v,C.batchId,b)})}).then(()=>({batchId:m.batchId,changes:oS(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new jt(nt)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(i,s.batchId,r),await Th(i,s.changes),await Fp(i.remoteStore)}catch(s){const o=O0(s,"Failed to persist write");r.reject(o)}}async function qS(n,e){const r=Be(n);try{const i=await W3(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ft(a.hu,14607):s.removedDocuments.size>0&&(ft(a.hu,42227),a.hu=!1))}),await Th(r,i,e)}catch(i){await mu(i)}}function E1(n,e,r){const i=Be(n);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=Be(a);u.onlineState=l;let c=!1;u.queries.forEach((f,h)=>{for(const m of h.ba)m.va(l)&&(c=!0)}),c&&j0(u)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function L5(n,e,r){const i=Be(n);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Au.get(e),o=s&&s.key;if(o){let a=new jt(Fe.comparator);a=a.insert(o,On.newNoDocument(o,$e.min()));const l=rt().add(o),u=new Mp($e.min(),new Map,new jt(nt),a,l);await qS(i,u),i.Ru=i.Ru.remove(o),i.Au.delete(e),M0(i)}else await Sy(i.localStore,e,!1).then(()=>Ay(i,e,r)).catch(mu)}async function V5(n,e){const r=Be(n),i=e.batch.batchId;try{const s=await G3(r.localStore,e);KS(r,i,null),HS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await Th(r,s)}catch(s){await mu(s)}}async function F5(n,e,r){const i=Be(n);try{const s=await function(a,l){const u=Be(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(ft(h!==null,37113),f=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(i.localStore,e);KS(i,e,r),HS(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await Th(i,s)}catch(s){await mu(s)}}function HS(n,e){(n.mu.get(e)||[]).forEach(r=>{r.resolve()}),n.mu.delete(e)}function KS(n,e,r){const i=Be(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Ay(n,e,r=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),r&&n.Pu.yu(i,r);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(i=>{n.Vu.containsKey(i)||GS(n,i)})}function GS(n,e){n.Eu.delete(e.path.canonicalString());const r=n.Ru.get(e);r!==null&&(k0(n.remoteStore,r),n.Ru=n.Ru.remove(e),n.Au.delete(r),M0(n))}function T1(n,e,r){for(const i of r)i instanceof zS?(n.Vu.addReference(i.key,e),U5(n,i)):i instanceof $S?(Re(D0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||GS(n,i.key)):Ue(19791,{wu:i})}function U5(n,e){const r=e.key,i=r.path.canonicalString();n.Ru.get(r)||n.Eu.has(i)||(Re(D0,"New document in limbo: "+r),n.Eu.add(i),M0(n))}function M0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const r=new Fe(xt.fromString(e)),i=n.fu.next();n.Au.set(i,new A5(r)),n.Ru=n.Ru.insert(r,i),PS(n.remoteStore,new uo(qi(v0(r.path)),i,"TargetPurposeLimboResolution",Ap.ce))}}async function Th(n,e,r){const i=Be(n),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,r).then(c=>{var f;if((c||r)&&i.isPrimaryClient){const h=c?!c.fromCache:(f=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:f.current;i.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=S0.Es(u.targetId,c);o.push(h)}}))}),await Promise.all(a),i.Pu.J_(s),await async function(u,c){const f=Be(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ge.forEach(c,m=>ge.forEach(m.Ts,v=>f.persistence.referenceDelegate.addReference(h,m.targetId,v)).next(()=>ge.forEach(m.Is,v=>f.persistence.referenceDelegate.removeReference(h,m.targetId,v)))))}catch(h){if(!gu(h))throw h;Re(C0,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const v=f.vs.get(m),w=v.snapshotVersion,T=v.withLastLimboFreeSnapshotVersion(w);f.vs=f.vs.insert(m,T)}}}(i.localStore,o))}async function z5(n,e){const r=Be(n);if(!r.currentUser.isEqual(e)){Re(D0,"User change. New user:",e.toKey());const i=await kS(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new Ne(pe.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Th(r,i.Ns)}}function $5(n,e){const r=Be(n),i=r.Au.get(e);if(i&&i.hu)return rt().add(i.key);{let s=rt();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function WS(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L5.bind(null,e),e.Pu.J_=I5.bind(null,e.eventManager),e.Pu.yu=S5.bind(null,e.eventManager),e}function B5(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F5.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return K3(this.persistence,new B3,e.initialUser,this.serializer)}Cu(e){return new CS(I0.Vi,this.serializer)}Du(e){return new Z3}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class q5 extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){ft(this.persistence.referenceDelegate instanceof Fd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new k3(i,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new CS(i=>Fd.Vi(i,r),this.serializer)}}class Ny{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=z5.bind(null,this.syncEngine),await b5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T5}()}createDatastore(e){const r=Lp(e.databaseInfo.databaseId),i=i5(e.databaseInfo);return u5(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new h5(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>E1(this.syncEngine,r,0),function(){return y1.v()?new y1:new e5}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,f){const h=new N5(s,o,a,l,u,c);return f&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=Be(s);Re(Pa,"RemoteStore shutting down."),o.Ea.add(5),await Eh(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Ny.provider={build:()=>new Ny};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class H5{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this._databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=f0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{Re(Oo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Re(Oo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=O0(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Km(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Oo,"Initializing OfflineComponentProvider");const r=n.configuration;await e.initialize(r);let i=r.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await kS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function I1(n,e){n.asyncQueue.verifyOperationInProgress();const r=await K5(n);Re(Oo,"Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(i=>_1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>_1(e.remoteStore,s)),n._onlineComponents=e}async function K5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Oo,"Using user provided OfflineComponentProvider");try{await Km(n,n._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Jl("Error using user provided cache. Falling back to memory cache: "+r),await Km(n,new zd)}}else Re(Oo,"Using default OfflineComponentProvider"),await Km(n,new q5(void 0));return n._offlineComponents}async function YS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Oo,"Using user provided OnlineComponentProvider"),await I1(n,n._uninitializedComponentsProvider._online)):(Re(Oo,"Using default OnlineComponentProvider"),await I1(n,new Ny))),n._onlineComponents}function G5(n){return YS(n).then(e=>e.syncEngine)}async function XS(n){const e=await YS(n),r=e.eventManager;return r.onListen=R5.bind(null,e.syncEngine),r.onUnlisten=j5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=P5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=D5.bind(null,e.syncEngine),r}function W5(n,e,r={}){const i=new Es;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const f=new QS({next:m=>{f.Nu(),a.enqueueAndForget(()=>FS(o,h));const v=m.docs.has(l);!v&&m.fromCache?c.reject(new Ne(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?c.reject(new Ne(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new US(v0(l.path),f,{includeMetadataChanges:!0,Ka:!0});return VS(o,h)}(await XS(n),n.asyncQueue,e,r,i)),i.promise}function Q5(n,e,r={}){const i=new Es;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const f=new QS({next:m=>{f.Nu(),a.enqueueAndForget(()=>FS(o,h)),m.fromCache&&u.source==="server"?c.reject(new Ne(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new US(l,f,{includeMetadataChanges:!0,Ka:!0});return VS(o,h)}(await XS(n),n.asyncQueue,e,r,i)),i.promise}function Y5(n,e){const r=new Es;return n.asyncQueue.enqueueAndForget(async()=>M5(await G5(n),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="ComponentProvider",S1=new Map;function J5(n,e,r,i,s){return new _M(n,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,JS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firestore.googleapis.com",C1=!0;class k1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZS,this.ssl=C1}else this.host=e.host,this.ssl=e.ssl??C1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S3)throw new Ne(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Up{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new J4;switch(i.type){case"firstParty":return new nM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ne(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=S1.get(r);i&&(Re(X5,"Removing Datastore"),S1.delete(r),i.terminate())}(this),Promise.resolve()}}function Z5(n,e,r,i={}){var c;n=Co(n,Up);const s=hu(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${r}`;s&&(BI(`https://${l}`),qI("Firestore",!0)),o.host!==ZS&&o.host!==l&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:i};if(!So(u,a)&&(n._setSettings(u),i.mockUserToken)){let f,h;if(typeof i.mockUserToken=="string")f=i.mockUserToken,h=Rn.MOCK_USER;else{f=wO(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Ne(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Rn(m)}n._authCredentials=new Z4(new L2(f,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vu(this.firestore,e,this._query)}}class en{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,i){if(_h(r,en._jsonSchema))return new en(e,i||null,new Fe(xt.fromString(r.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:Zt("string",en._jsonSchemaVersion),referencePath:Zt("string")};class Eo extends vu{constructor(e,r,i){super(e,r,v0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Fe(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function qf(n,e,...r){if(n=Ht(n),V2("collection","path",e),n instanceof Up){const i=xt.fromString(e,...r);return zx(i),new Eo(n,null,i)}{if(!(n instanceof en||n instanceof Eo))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(xt.fromString(e,...r));return zx(i),new Eo(n.firestore,null,i)}}function aa(n,e,...r){if(n=Ht(n),arguments.length===1&&(e=f0.newId()),V2("doc","path",e),n instanceof Up){const i=xt.fromString(e,...r);return Ux(i),new en(n,null,new Fe(i))}{if(!(n instanceof en||n instanceof Eo))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(xt.fromString(e,...r));return Ux(i),new en(n.firestore,n instanceof Eo?n.converter:null,new Fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="AsyncQueue";class N1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NS(this,"async_queue_retry"),this._c=()=>{const i=Hm();i&&Re(A1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const r=Hm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Hm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Es;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!gu(e))throw e;Re(A1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",R1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=r,r}enqueueAfterDelay(e,r,i){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=P0.createAndSchedule(this,e,r,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Ue(47125,{Pc:R1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function R1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ih extends Up{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new N1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N1(e),this._firestoreClient=void 0,await e}}}function eL(n,e){const r=typeof n=="object"?n:e0(),i=typeof n=="string"?n:Pd,s=za(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=vO("firestore");o&&Z5(s,...o)}return s}function zp(n){if(n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||tL(n),n._firestoreClient}function tL(n){var i,s,o,a;const e=n._freezeSettings(),r=J5(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new H5(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(xn.fromBase64String(e))}catch(r){throw new Ne(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new jr(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_h(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:Zt("string",jr._jsonSchemaVersion),bytes:Zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ne(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ne(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ne(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(_h(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:Zt("string",Ki._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_h(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new pi(e.vectorValues);throw new Ne(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Zt("string",pi._jsonSchemaVersion),vectorValues:Zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=/^__.*__$/;class rL{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms):new xh(e,this.data,r,this.fieldTransforms)}}class eC{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function tC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{dataSource:n})}}class F0{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new F0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $d(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tC(this.dataSource)&&nL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iL{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Lp(e)}createContext(e,r,i,s=!1){return new F0({dataSource:e,methodName:r,targetDoc:i,path:vn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U0(n){const e=n._freezeSettings(),r=Lp(n._databaseId);return new iL(n._databaseId,!!e.ignoreUndefinedProperties,r)}function nC(n,e,r,i,s,o={}){const a=n.createContext(o.merge||o.mergeFields?2:0,e,r,s);z0("Data must be an object, but it was:",a,i);const l=rC(i,a);let u,c;if(o.merge)u=new gr(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const h of o.mergeFields){const m=iu(e,h,r);if(!a.contains(m))throw new Ne(pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oC(f,m)||f.push(m)}u=new gr(f),c=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=a.fieldTransforms;return new rL(new Zn(l),u,c)}class $p extends V0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $p}}function sL(n,e,r,i){const s=n.createContext(1,e,r);z0("Data must be an object, but it was:",s,i);const o=[],a=Zn.empty();Vo(i,(u,c)=>{const f=sC(e,u,r);c=Ht(c);const h=s.childContextForFieldPath(f);if(c instanceof $p)o.push(f);else{const m=Sh(c,h);m!=null&&(o.push(f),a.set(f,m))}});const l=new gr(o);return new eC(a,l,s.fieldTransforms)}function oL(n,e,r,i,s,o){const a=n.createContext(1,e,r),l=[iu(e,i,r)],u=[s];if(o.length%2!=0)throw new Ne(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(iu(e,o[m])),u.push(o[m+1]);const c=[],f=Zn.empty();for(let m=l.length-1;m>=0;--m)if(!oC(c,l[m])){const v=l[m];let w=u[m];w=Ht(w);const T=a.childContextForFieldPath(v);if(w instanceof $p)c.push(v);else{const C=Sh(w,T);C!=null&&(c.push(v),f.set(v,C))}}const h=new gr(c);return new eC(f,h,a.fieldTransforms)}function aL(n,e,r,i=!1){return Sh(r,n.createContext(i?4:3,e))}function Sh(n,e){if(iC(n=Ht(n)))return z0("Unsupported field value:",e,n),rC(n,e);if(n instanceof V0)return function(i,s){if(!tC(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=Sh(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=It.fromDate(i);return{timestampValue:Vd(s.serializer,o)}}if(i instanceof It){const o=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(s.serializer,o)}}if(i instanceof Ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jr)return{bytesValue:vS(s.serializer,i._byteString)};if(i instanceof en){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:E0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof pi)return function(a,l){const u=a instanceof pi?a.toArray():a;return{mapValue:{fields:{[G2]:{stringValue:W2},[Od]:{arrayValue:{values:u.map(f=>{if(typeof f!="number")throw l.createError("VectorValues must only contain numeric values.");return _0(l.serializer,f)})}}}}}}(i,s);if(IS(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${kp(i)}`)}(n,e)}function rC(n,e){const r={};return z2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(n,(i,s)=>{const o=Sh(s,e.childContextForField(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function iC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof Ki||n instanceof jr||n instanceof en||n instanceof V0||n instanceof pi||IS(n))}function z0(n,e,r){if(!iC(r)||!F2(r)){const i=kp(r);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function iu(n,e,r){if((e=Ht(e))instanceof L0)return e._internalPath;if(typeof e=="string")return sC(n,e);throw $d("Field path arguments must be of type string or ",n,!1,void 0,r)}const lL=new RegExp("[~\\*/\\[\\]]");function sC(n,e,r){if(e.search(lL)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new L0(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function $d(n,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Ne(pe.INVALID_ARGUMENT,l+n+u)}function oC(n,e){return n.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{convertValue(e,r="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Vo(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var i,s,o;const r=(o=(s=(i=e.fields)==null?void 0:i[Od].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Bt(a.doubleValue));return new pi(r)}convertGeoPoint(e){return new Ki(Bt(e.latitude),Bt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=Rp(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const r=Ao(e);return new It(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=xt.fromString(e);ft(TS(i),9688,{name:e});const s=new Jc(i.get(1),i.get(3)),o=new Fe(i.popFirst(5));return s.isEqual(r)||Rs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,r)}}const P1="@firebase/firestore",O1="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(iu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class cL extends lC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $0{}class fL extends $0{}function dL(n,e,...r){let i=[];e instanceof $0&&i.push(e),i=i.concat(r),function(o){const a=o.filter(u=>u instanceof B0).length,l=o.filter(u=>u instanceof Bp).length;if(a>1||a>0&&l>0)throw new Ne(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Bp extends fL{constructor(e,r,i){super(),this._field=e,this._op=r,this._value=i,this.type="where"}static _create(e,r,i){return new Bp(e,r,i)}_apply(e){const r=this._parse(e);return uC(e._query,r),new vu(e.firestore,e.converter,wy(e._query,r))}_parse(e){const r=U0(e.firestore);return function(o,a,l,u,c,f,h){let m;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){D1(h,f);const w=[];for(const T of h)w.push(j1(u,o,T));m={arrayValue:{values:w}}}else m=j1(u,o,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||D1(h,f),m=aL(l,a,h,f==="in"||f==="not-in");return Jt.create(c,f,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function pL(n,e,r){const i=e,s=iu("where",n);return Bp._create(s,i,r)}class B0 extends $0{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new B0(e,r)}_parse(e){const r=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return r.length===1?r[0]:yi.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,o){let a=s;const l=o.getFlattenedFilters();for(const u of l)uC(a,u),a=wy(a,u)}(e._query,r),new vu(e.firestore,e.converter,wy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function j1(n,e,r){if(typeof(r=Ht(r))=="string"){if(r==="")throw new Ne(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nS(e)&&r.indexOf("/")!==-1)throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const i=e.path.child(xt.fromString(r));if(!Fe.isDocumentKey(i))throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qx(n,new Fe(i))}if(r instanceof en)return Qx(n,r._key);throw new Ne(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kp(r)}.`)}function D1(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uC(n,e){const r=function(s,o){for(const a of s)for(const l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ne(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function cC(n,e,r){let i;return i=n?r&&(r.merge||r.mergeFields)?n.toFirestore(e,r):n.toFirestore(e):e,i}class rc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends lC{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(iu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=wa._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Zt("string",wa._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class Hf extends wa{data(e={}){return super.data(e)}}class Fl{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new rc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Hf(this._firestore,this._userDataWriter,i.key,i,new rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ne(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Hf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new rc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Hf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new rc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:mL(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=f0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fl._jsonSchemaVersion="firestore/querySnapshot/1.0",Fl._jsonSchema={type:Zt("string",Fl._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=U0(e)}set(e,r,i){this._verifyNotCommitted();const s=Gm(e,this._firestore),o=cC(s.converter,r,i),a=nC(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Ur.none())),this}update(e,r,i,...s){this._verifyNotCommitted();const o=Gm(e,this._firestore);let a;return a=typeof(r=Ht(r))=="string"||r instanceof L0?oL(this._dataReader,"WriteBatch.update",o._key,r,i,s):sL(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Gm(e,this._firestore);return this._mutations=this._mutations.concat(new w0(r._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gm(n,e){if((n=Ht(n)).firestore!==e)throw new Ne(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){n=Co(n,en);const e=Co(n.firestore,Ih),r=zp(e);return W5(r,n._key).then(i=>yL(e,n,i))}function Kf(n){n=Co(n,vu);const e=Co(n.firestore,Ih),r=zp(e),i=new aC(e);return hL(n._query),Q5(r,n._query).then(s=>new Fl(e,i,n,s))}function M1(n,e,r){n=Co(n,en);const i=Co(n.firestore,Ih),s=cC(n.converter,e,r),o=U0(i);return hC(i,[nC(o,"setDoc",n._key,s,n.converter!==null,r).toMutation(n._key,Ur.none())])}function hC(n,e){const r=zp(n);return Y5(r,e)}function yL(n,e,r){const i=r.docs.get(e._key),s=new aC(n);return new wa(n,s,e._key,i,new rc(r.hasPendingWrites,r.fromCache),e.converter)}function Wm(n){return n=Co(n,Ih),zp(n),new gL(n,e=>hC(n,e))}(function(e,r=!0){X4(fu),Wi(new gi("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new Ih(new eM(i.getProvider("auth-internal")),new rM(a,i.getProvider("app-check-internal")),wM(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Fr(P1,O1,e),Fr(P1,O1,"esm2020")})();const fC="@firebase/installations",q0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1e4,pC=`w:${q0}`,mC="FIS_v2",vL="https://firebaseinstallations.googleapis.com/v1",_L=60*60*1e3,wL="installations",xL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Oa=new Ua(wL,xL,bL);function gC(n){return n instanceof vi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC({projectId:n}){return`${vL}/projects/${n}/installations`}function vC(n){return{token:n.token,requestStatus:2,expiresIn:TL(n.expiresIn),creationTime:Date.now()}}async function _C(n,e){const i=(await e.json()).error;return Oa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function wC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function EL(n,{refreshToken:e}){const r=wC(n);return r.append("Authorization",IL(e)),r}async function xC(n){const e=await n();return e.status>=500&&e.status<600?n():e}function TL(n){return Number(n.replace("s","000"))}function IL(n){return`${mC} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL({appConfig:n,heartbeatServiceProvider:e},{fid:r}){const i=yC(n),s=wC(n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:mC,appId:n.appId,sdkVersion:pC},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await xC(()=>fetch(i,l));if(u.ok){const c=await u.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:vC(c.authToken)}}else throw await _C("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=/^[cdef][\w-]{21}$/,Py="";function AL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=NL(n);return kL.test(r)?r:Py}catch{return Py}}function NL(n){return CL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Map;function TC(n,e){const r=qp(n);IC(r,e),RL(r,e)}function IC(n,e){const r=EC.get(n);if(r)for(const i of r)i(e)}function RL(n,e){const r=PL();r&&r.postMessage({key:n,fid:e}),OL()}let pa=null;function PL(){return!pa&&"BroadcastChannel"in self&&(pa=new BroadcastChannel("[Firebase] FID Change"),pa.onmessage=n=>{IC(n.data.key,n.data.fid)}),pa}function OL(){EC.size===0&&pa&&(pa.close(),pa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="firebase-installations-database",DL=1,ja="firebase-installations-store";let Qm=null;function H0(){return Qm||(Qm=YI(jL,DL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ja)}}})),Qm}async function Bd(n,e){const r=qp(n),s=(await H0()).transaction(ja,"readwrite"),o=s.objectStore(ja),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&TC(n,e.fid),e}async function SC(n){const e=qp(n),i=(await H0()).transaction(ja,"readwrite");await i.objectStore(ja).delete(e),await i.done}async function Hp(n,e){const r=qp(n),s=(await H0()).transaction(ja,"readwrite"),o=s.objectStore(ja),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&TC(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(n){let e;const r=await Hp(n.appConfig,i=>{const s=ML(i),o=LL(n,s);return e=o.registrationPromise,o.installationEntry});return r.fid===Py?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function ML(n){const e=n||{fid:AL(),registrationStatus:0};return CC(e)}function LL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Oa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=VL(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:FL(n)}:{installationEntry:e}}async function VL(n,e){try{const r=await SL(n,e);return Bd(n.appConfig,r)}catch(r){throw gC(r)&&r.customData.serverCode===409?await SC(n.appConfig):await Bd(n.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function FL(n){let e=await L1(n.appConfig);for(;e.registrationStatus===1;)await bC(100),e=await L1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await K0(n);return i||r}return e}function L1(n){return Hp(n,e=>{if(!e)throw Oa.create("installation-not-found");return CC(e)})}function CC(n){return UL(n)?{fid:n.fid,registrationStatus:0}:n}function UL(n){return n.registrationStatus===1&&n.registrationTime+dC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL({appConfig:n,heartbeatServiceProvider:e},r){const i=$L(n,r),s=EL(n,r),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:pC,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await xC(()=>fetch(i,l));if(u.ok){const c=await u.json();return vC(c)}else throw await _C("Generate Auth Token",u)}function $L(n,{fid:e}){return`${yC(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(n,e=!1){let r;const i=await Hp(n.appConfig,o=>{if(!kC(o))throw Oa.create("not-registered");const a=o.authToken;if(!e&&HL(a))return o;if(a.requestStatus===1)return r=BL(n,e),o;{if(!navigator.onLine)throw Oa.create("app-offline");const l=GL(o);return r=qL(n,l),l}});return r?await r:i.authToken}async function BL(n,e){let r=await V1(n.appConfig);for(;r.authToken.requestStatus===1;)await bC(100),r=await V1(n.appConfig);const i=r.authToken;return i.requestStatus===0?G0(n,e):i}function V1(n){return Hp(n,e=>{if(!kC(e))throw Oa.create("not-registered");const r=e.authToken;return WL(r)?{...e,authToken:{requestStatus:0}}:e})}async function qL(n,e){try{const r=await zL(n,e),i={...e,authToken:r};return await Bd(n.appConfig,i),r}catch(r){if(gC(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await SC(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Bd(n.appConfig,i)}throw r}}function kC(n){return n!==void 0&&n.registrationStatus===2}function HL(n){return n.requestStatus===2&&!KL(n)}function KL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+_L}function GL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function WL(n){return n.requestStatus===1&&n.requestTime+dC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(n){const e=n,{installationEntry:r,registrationPromise:i}=await K0(e);return i?i.catch(console.error):G0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n,e=!1){const r=n;return await XL(r),(await G0(r,e)).token}async function XL(n){const{registrationPromise:e}=await K0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(n){if(!n||!n.options)throw Ym("App Configuration");if(!n.name)throw Ym("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!n.options[r])throw Ym(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Ym(n){return Oa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="installations",ZL="installations-internal",e6=n=>{const e=n.getProvider("app").getImmediate(),r=JL(e),i=za(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},t6=n=>{const e=n.getProvider("app").getImmediate(),r=za(e,AC).getImmediate();return{getId:()=>QL(r),getToken:s=>YL(r,s)}};function n6(){Wi(new gi(AC,e6,"PUBLIC")),Wi(new gi(ZL,t6,"PRIVATE"))}n6();Fr(fC,q0);Fr(fC,q0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="analytics",r6="firebase_id",i6="origin",s6=60*1e3,o6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",W0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Tp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},vr=new Ua("analytics","Analytics",a6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(n){if(!n.startsWith(W0)){const e=vr.create("invalid-gtag-resource",{gtagURL:n});return Hn.warn(e.message),""}return n}function NC(n){return Promise.all(n.map(e=>e.catch(r=>r)))}function u6(n,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,e)),r}function c6(n,e){const r=u6("firebase-js-sdk-policy",{createScriptURL:l6}),i=document.createElement("script"),s=`${W0}?l=${n}&id=${e}`;i.src=r?r==null?void 0:r.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function h6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function f6(n,e,r,i,s,o){const a=i[s];try{if(a)await e[a];else{const u=(await NC(r)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(l){Hn.error(l)}n("config",s,o)}async function d6(n,e,r,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await NC(r);for(const u of a){const c=l.find(h=>h.measurementId===u),f=c&&e[c.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,s||{})}catch(o){Hn.error(o)}}function p6(n,e,r,i){async function s(o,...a){try{if(o==="event"){const[l,u]=a;await d6(n,e,r,l,u)}else if(o==="config"){const[l,u]=a;await f6(n,e,r,i,l,u)}else if(o==="consent"){const[l,u]=a;n("consent",l,u)}else if(o==="get"){const[l,u,c]=a;n("get",l,u,c)}else if(o==="set"){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Hn.error(l)}}return s}function m6(n,e,r,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=p6(o,n,e,r),{gtagCore:o,wrappedGtag:window[s]}}function g6(n){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(W0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=30,v6=1e3;class _6{constructor(e={},r=v6){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const RC=new _6;function w6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function x6(n){var a;const{appId:e,apiKey:r}=n,i={method:"GET",headers:w6(r)},s=o6.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw vr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function b6(n,e=RC,r){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw vr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw vr.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new I6;return setTimeout(async()=>{l.abort()},s6),PC({appId:i,apiKey:s,measurementId:o},a,l,e)}async function PC(n,{throttleEndTimeMillis:e,backoffCount:r},i,s=RC){var l;const{appId:o,measurementId:a}=n;try{await E6(i,e)}catch(u){if(a)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await x6(n);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!T6(c)){if(s.deleteThrottleMetadata(o),a)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const f=Number((l=c==null?void 0:c.customData)==null?void 0:l.httpStatus)===503?hx(r,s.intervalMillis,y6):hx(r,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return s.setThrottleMetadata(o,h),Hn.debug(`Calling attemptFetch again in ${f} millis`),PC(n,h,i,s)}}function E6(n,e){return new Promise((r,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);n.addEventListener(()=>{clearTimeout(o),i(vr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function T6(n){if(!(n instanceof vi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class I6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function S6(n,e,r,i,s){if(s&&s.global){n("event",r,i);return}else{const o=await e,a={...i,send_to:o};n("event",r,a)}}async function C6(n,e,r,i){if(i&&i.global){const s={};for(const o of Object.keys(r))s[`user_properties.${o}`]=r[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(){if(KI())try{await GI()}catch(n){return Hn.warn(vr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Hn.warn(vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function A6(n,e,r,i,s,o,a){const l=b6(n);l.then(m=>{r[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Hn.error(m)),e.push(l);const u=k6().then(m=>{if(m)return i.getId()}),[c,f]=await Promise.all([l,u]);g6(o)||c6(o,c.measurementId),s("js",new Date);const h=(a==null?void 0:a.config)??{};return h[i6]="firebase",h.update=!0,f!=null&&(h[r6]=f),s("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.app=e}_delete(){return delete Ul[this.app.options.appId],Promise.resolve()}}let Ul={},F1=[];const U1={};let Xm="dataLayer",R6="gtag",z1,Q0,$1=!1;function P6(){const n=[];if(HI()&&n.push("This is a browser extension environment."),AO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),r=vr.create("invalid-analytics-context",{errorInfo:e});Hn.warn(r.message)}}function O6(n,e,r){P6();const i=n.options.appId;if(!i)throw vr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw vr.create("no-api-key");if(Ul[i]!=null)throw vr.create("already-exists",{id:i});if(!$1){h6(Xm);const{wrappedGtag:o,gtagCore:a}=m6(Ul,F1,U1,Xm,R6);Q0=o,z1=a,$1=!0}return Ul[i]=A6(n,F1,U1,e,z1,Xm,r),new N6(n)}function j6(n=e0()){n=Ht(n);const e=za(n,qd);return e.isInitialized()?e.getImmediate():D6(n)}function D6(n,e={}){const r=za(n,qd);if(r.isInitialized()){const s=r.getImmediate();if(So(e,r.getOptions()))return s;throw vr.create("already-initialized")}return r.initialize({options:e})}function M6(n,e,r){n=Ht(n),C6(Q0,Ul[n.app.options.appId],e,r).catch(i=>Hn.error(i))}function L6(n,e,r,i){n=Ht(n),S6(Q0,Ul[n.app.options.appId],e,r,i).catch(s=>Hn.error(s))}const B1="@firebase/analytics",q1="0.10.19";function V6(){Wi(new gi(qd,(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return O6(i,s,r)},"PUBLIC")),Wi(new gi("analytics-internal",n,"PRIVATE")),Fr(B1,q1),Fr(B1,q1,"esm2020");function n(e){try{const r=e.getProvider(qd).getImmediate();return{logEvent:(i,s,o)=>L6(r,i,s,o),setUserProperties:(i,s)=>M6(r,i,s)}}catch(r){throw vr.create("interop-component-reg-failed",{reason:r})}}}V6();const OC={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"};OC.apiKey||console.warn("Firebase API Key is missing. Cloud sync will not work.");const Y0=XI(OC),Jm=Q4(Y0),F6=new ms,cn=eL(Y0);typeof window<"u"&&j6(Y0);const jC=ue.createContext(),Uo=()=>ue.useContext(jC),U6=({children:n})=>{const e=jf(()=>_t.contacts.orderBy("lastUpdated").reverse().toArray()),r=jf(()=>_t.schedules.orderBy("date").toArray()),i=jf(()=>_t.settings.get("userProfile")),[s,o]=ue.useState(null),[a,l]=ue.useState(null),[u,c]=ue.useState(!1),[f,h]=ue.useState(!1);ue.useEffect(()=>{const j=LD(Jm,q=>{l(q)});return()=>j()},[]);const m=async()=>{try{const q=(await i4(Jm,F6)).user,G=aa(cn,"users",q.uid);return(await Ry(G)).exists()&&await _t.contacts.count()===0&&window.confirm("")&&(l(q),await T()),q}catch(j){throw console.error("Login Error:",j),j}},v=async()=>{try{await VD(Jm)}catch(j){console.error("Logout Error:",j)}},w=async()=>{if(!a){console.error("Sync Error: No user logged in");return}c(!0);try{const j=await _t.contacts.toArray(),q=await _t.schedules.toArray(),G=await _t.settings.get("userProfile")||{},Z=ae=>ae==null?null:ae instanceof Date?ae.toISOString():Array.isArray(ae)?ae.map(he=>Z(he)):typeof ae=="object"?Object.entries(ae).reduce((he,[be,ce])=>(ce!==void 0&&(he[be]=Z(ce)),he),{}):ae,de=aa(cn,"users",a.uid);console.log("Attempting to write profile to:",de.path),await M1(de,{profile:Z(G),lastSynced:new Date().toISOString(),email:a.email||""},{merge:!0}),console.log("Profile sync successful");const ee=async(ae,he)=>{const be=qf(cn,"users",a.uid,ae);console.log(`Syncing ${ae}, items: ${he.length}`);let ce=[];try{ce=(await Kf(be)).docs.map(Kt=>Kt.id)}catch(Ge){throw console.error(`Error fetching existing ${ae}:`,Ge),Ge.code==="permission-denied"?new Error(` ${ae} `):Ge}const Ae=he.map(Ge=>Ge.id).filter(Boolean),Pe=ce.filter(Ge=>!Ae.includes(Ge));let Me=Wm(cn),Ye=0;for(const Ge of Pe)Me.delete(aa(be,Ge)),Ye++,Ye===500&&(await Me.commit(),Me=Wm(cn),Ye=0);for(const Ge of he){if(!Ge.id)continue;const Kt=Z(Ge);Me.set(aa(be,Ge.id),Kt),Ye++,Ye===500&&(await Me.commit(),Me=Wm(cn),Ye=0)}Ye>0&&await Me.commit()};await ee("contacts",j),await ee("schedules",q),console.log("Synced to cloud successfully (Mirror Mode)")}catch(j){throw console.error("Sync Error Detailed:",j),j.code==="permission-denied"||j.message.includes("permission-denied")?new Error(" Firebase Rules "):new Error(`: ${j.message}`)}finally{c(!1)}},T=async()=>{if(a){c(!0);try{const j=aa(cn,"users",a.uid),q=await Ry(j);if(q.exists()){const ce=q.data();ce.profile&&await _t.settings.put({...ce.profile,id:"userProfile"})}const G=ce=>{if(!ce||typeof ce!="object")return ce;const Ae=Array.isArray(ce)?[]:{};for(const[Pe,Me]of Object.entries(ce))typeof Me=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(Me)?Ae[Pe]=new Date(Me):typeof Me=="object"?Ae[Pe]=G(Me):Ae[Pe]=Me;return Ae},Z=qf(cn,"users",a.uid,"contacts"),de=await Kf(Z),ee=[];de.forEach(ce=>{ee.push(G(ce.data()))}),ee.length>0&&(await _t.contacts.clear(),await _t.contacts.bulkPut(ee));const ae=qf(cn,"users",a.uid,"schedules"),he=await Kf(ae),be=[];he.forEach(ce=>{be.push(G(ce.data()))}),be.length>0&&(await _t.schedules.clear(),await _t.schedules.bulkPut(be)),console.log("Synced from cloud successfully (Mirror Mode)")}catch(j){throw console.error("Download Error:",j),j}finally{c(!1)}}};ue.useEffect(()=>{(async()=>{await _t.settings.get("userProfile")||await _t.settings.add({id:"userProfile",name:"",bio:"",avatar:"",themeColor:"#2b6cee",links:[],categories:["","","","",""]})})()},[]),ue.useEffect(()=>{if(i!=null&&i.themeColor){document.documentElement.style.setProperty("--primary-color",i.themeColor);const j=i.themeColor.replace("#",""),q=parseInt(j.substring(0,2),16),G=parseInt(j.substring(2,4),16),Z=parseInt(j.substring(4,6),16);document.documentElement.style.setProperty("--primary-color-rgb",`${q}, ${G}, ${Z}`)}},[i==null?void 0:i.themeColor]);const C=async j=>{const q=crypto.randomUUID();return await _t.contacts.add({...j,id:q,lastUpdated:new Date}),a&&w().catch(console.error),q},b=async(j,q)=>{h(!0),await _t.contacts.update(j,{...q,lastUpdated:new Date}),a&&w().catch(console.error)},I=async(j,q)=>await _t.contacts.update(j,{position:q}),N=async j=>{await _t.settings.update("userProfile",j),a&&w().catch(console.error)},O=async j=>{await _t.contacts.delete(j),a&&w().catch(console.error)},L=async()=>{if(!a)throw new Error("");try{const j=await _t.settings.get("userProfile");if(!j)throw new Error("");const q=aa(cn,"public_profiles",a.uid),G={name:j.name||"",avatar:j.avatar||"",bio:j.bio||"",links:j.links||[],uid:a.uid,updatedAt:new Date().toISOString()};return console.log("Publishing profile to Firestore...",G),await M1(q,G),console.log("Profile published successfully!"),a.uid}catch(j){throw console.error("Failed to publish profile:",j),j}},U=async(j,q)=>{const G=await _t.contacts.get(j);if(G){const Z=[...G.memories||[],{...q,date:q.date||new Date}];await _t.contacts.update(j,{memories:Z,lastUpdated:new Date}),a&&w().catch(console.error)}},[A,R]=ue.useState(null),D=(j,q="")=>new Promise(G=>{R({title:j,placeholder:q,onConfirm:Z=>{R(null),G(Z)},onCancel:()=>{R(null),G(null)}})}),M=async j=>{const q=crypto.randomUUID();return await _t.schedules.add({...j,id:q}),a&&w().catch(console.error),q},F=async(j,q)=>{await _t.schedules.update(j,q),a&&w().catch(console.error)},$=async j=>{await _t.schedules.delete(j),a&&w().catch(console.error)};return y.jsxs(jC.Provider,{value:{contacts:e,schedules:r,currentContactId:s,setCurrentContactId:o,userProfile:i,updateContactPosition:I,updateProfile:N,publishProfile:L,addContact:C,updateContact:b,deleteContact:O,addMemory:U,addSchedule:M,updateSchedule:F,deleteSchedule:$,customPrompt:D,promptConfig:A,setPromptConfig:R,currentUser:a,login:m,logout:v,syncToCloud:w,syncFromCloud:T,isSyncing:u,unsavedChanges:f,setUnsavedChanges:h},children:[n,A&&y.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[y.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:A.title}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:A.placeholder,onKeyDown:j=>{j.key==="Enter"&&A.onConfirm(j.target.value),j.key==="Escape"&&A.onCancel()},id:"custom-prompt-input"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:A.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:()=>{const j=document.getElementById("custom-prompt-input").value;A.onConfirm(j)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},z6=()=>{const n=Lo(),{contacts:e,addContact:r,updateContact:i,addMemory:s,userProfile:o,updateProfile:a,customPrompt:l,schedules:u,currentUser:c,login:f}=Uo(),[h,m]=ue.useState(!1),[v,w]=ue.useState(!1),[T,C]=ue.useState(!1),[b,I]=ue.useState(!1),[N,O]=ue.useState(!1),L=ue.useMemo(()=>c?`${window.location.origin+window.location.pathname.replace(/\/$/,"")}/#/p/${c.uid}`:null,[c]),U=[{icon:"auto_awesome_motion",title:"",desc:"",color:"text-primary"},{icon:"qr_code_2",title:"",desc:" QR  QR Code",color:"text-amber-400"},{icon:"hub",title:"",desc:"",color:"text-indigo-400"},{icon:"search",title:"",desc:"",color:"text-purple-400"},{icon:"calendar_month",title:"",desc:"",color:"text-emerald-400"},{icon:"cloud_sync",title:"100% ",desc:" Google",color:"text-blue-400"}],A=ue.useMemo(()=>{if(!u||!e)return[];const Se=new Date;return Se.setHours(0,0,0,0),u.filter(qe=>{const Gt=new Date(qe.date);Gt.setHours(0,0,0,0);const Dt=Math.ceil((Gt.getTime()-Se.getTime())/(1e3*60*60*24));return Dt>=0&&Dt<=3}).map(qe=>({...qe,diffDays:Math.ceil((new Date(qe.date).getTime()-Se.getTime())/(1e3*60*60*24))}))},[u,e]),[R,D]=ue.useState(!1),[M,F]=ue.useState(""),[$,j]=ue.useState(null),[q,G]=ue.useState(""),[Z,de]=ue.useState(""),[ee,ae]=ue.useState(""),[he,be]=ue.useState(""),[ce,Ae]=ue.useState(""),[Pe,Me]=ue.useState(new Date().toISOString().split("T")[0]),[Ye,Ge]=ue.useState("synced"),[Kt,Le]=ue.useState(!1),wi=ue.useMemo(()=>(o==null?void 0:o.categories)||["","","","",""],[o]);mt.useEffect(()=>{wi.length>0&&!ce&&Ae(wi[0])},[wi]);const xi=ue.useMemo(()=>M.trim()?(e==null?void 0:e.filter(Se=>{var qe,Gt;return Se.name.toLowerCase().includes(M.toLowerCase())||((qe=Se.company)==null?void 0:qe.toLowerCase().includes(M.toLowerCase()))||((Gt=Se.tags)==null?void 0:Gt.some(Dt=>Dt.toLowerCase().includes(M.toLowerCase())))}).sort((Se,qe)=>new Date(qe.lastUpdated).getTime()-new Date(Se.lastUpdated).getTime()))||[]:[],[e,M]),ot=async()=>{let Se=$;if(!Se&&Z.trim())Se=await r({name:Z,phone:he,tags:[ce,""],importance:50,birthday:ee||null,memories:[]});else if(Se&&(ee||he)){const qe={};ee&&(qe.birthday=ee),he&&(qe.phone=he),await i(Se,qe)}Se&&q.trim()&&(await s(Se,{content:q,location:"",date:new Date(Pe)}),D(!1),F(""),j(null),G(""),de(""),ae(""),be(""),Ae(wi[0]||""),Me(new Date().toISOString().split("T")[0]),m(!1),navigator.vibrate&&navigator.vibrate(50))},Br=async Se=>{var Gt;const qe=Se.target.files[0];if(qe){w(!0);try{const Qn=await(mn=>new Promise(ln=>{const ar=new FileReader;ar.readAsDataURL(mn),ar.onload=bi=>{const Er=new Image;Er.src=bi.target.result,Er.onload=()=>{const Ln=document.createElement("canvas"),En=1200,Yn=1200;let Vn=Er.width,Wt=Er.height;Vn>Wt?Vn>En&&(Wt*=En/Vn,Vn=En):Wt>Yn&&(Vn*=Yn/Wt,Wt=Yn),Ln.width=Vn,Ln.height=Wt,Ln.getContext("2d").drawImage(Er,0,0,Vn,Wt);const Ei=Ln.toDataURL("image/jpeg",.8);ln(Ei)}}}))(qe),gt=Qn.replace(/^data:image\/\w+;base64,/,"");console.log("Starting Gemini OCR with Compressed Image...");const Mt=void 0;if(!Mt)throw new Error(" API Key .env  VITE_GEMINI_API_KEY");const pn=new aO(Mt),qa=["gemini-1.5-flash","gemini-1.5-flash-latest"];let qr=null,an=null;for(const mn of qa)try{console.log(`Trying model: ${mn} with standard payload...`);const Ln=(await(await pn.getGenerativeModel({model:mn}).generateContent([' JSON  Markdown JSON {"name":"","phone":"","email":"","company":"","title":"","address":"","website":"","summary":""}',{inlineData:{data:gt,mimeType:"image/jpeg"}}])).response).text();console.log(`${mn} Raw Response:`,Ln);const En=Ln.replace(/```json|```/g,"").trim();an=JSON.parse(En);break}catch(ln){console.error(`Model ${mn} failed. Error Details:`,ln),console.error("Error Message:",ln.message),qr=ln,(Gt=ln.message)!=null&&Gt.includes("429")&&await new Promise(ar=>setTimeout(ar,2e3))}if(!an)throw qr;const or=await r({name:an.name||"",phone:an.phone||"",email:an.email||"",company:an.company||"",address:an.address||"",website:an.website||"",bio:an.title?`${an.title}`:"",cardImage:Qn,ocrText:text,tags:["AI "],memories:[{date:new Date,content:an.summary||` AI ${an.name}${an.company}`,location:""}],importance:50});navigator.vibrate&&navigator.vibrate(50),n(`/profile/${or}`)}catch(Dt){console.error("Gemini OCR Detailed Error:",Dt),console.error("Error Stack:",Dt.stack);let Qn="";const gt=Dt.message+(Dt.stack||"");gt.includes("429")?Qn="API Too Many Requests":gt.includes("403")||gt.includes("401")?Qn="API Key 403 Forbidden":gt.includes("404")?Qn="404 Not Found":gt.includes("400")?Qn="400 Bad Request Prompt ":gt.includes("fetch")&&(Qn=` Google API (generativelanguage.googleapis.com) 
1.  4G/5G 
2.  VPN
3.  API Key `),alert(`${Qn}

${Dt.message.substring(0,150)}`)}finally{w(!1),m(!1)}}};return y.jsxs("div",{className:"w-full h-full",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 mb-2 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>O(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-amber-400 hover:bg-amber-400/10 hover:border-amber-400/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"qr_code_2"})}),y.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>n("/settings"),children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-primary to-primary/60 p-0.5 shadow-lg shadow-primary/20 relative z-10",children:y.jsx("div",{className:"w-full h-full rounded-[14px] bg-[#0a0a0c] flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar?y.jsx("img",{src:o.avatar,className:"w-full h-full object-cover",alt:"avatar"}):y.jsx("span",{className:"material-symbols-outlined text-white/20 text-2xl",children:"person"})})})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-clip-text",children:""}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"size-1.5 rounded-full bg-primary animate-pulse"}),y.jsx("p",{className:"text-[10px] font-black text-white/30 tracking-[0.2em] uppercase",children:"Nexus Core Active"})]})]})]}),y.jsx("button",{onClick:()=>I(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 hover:border-primary/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"help_outline"})})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{type:"text",placeholder:"...",value:M,onChange:Se=>F(Se.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/40 transition-all"})]})]}),A.length>0&&y.jsx("div",{className:"px-6 py-4 animate-in fade-in slide-in-from-top-4 duration-500",children:y.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-[28px] p-5 backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"notification_important"}),y.jsx("h2",{className:"text-xs font-bold text-primary uppercase tracking-widest",children:""})]}),y.jsx("div",{className:"space-y-4",children:A.map(Se=>y.jsxs("div",{className:"flex items-center justify-between group",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 truncate",children:Se.title}),y.jsxs("div",{className:"flex gap-2",children:[Se.contactIds.slice(0,3).map(qe=>{var Gt;return y.jsx("button",{onClick:()=>n(`/profile/${qe}`),className:"text-[10px] text-primary/80 font-bold hover:text-primary transition-colors underline decoration-primary/30 underline-offset-2",children:(Gt=e.find(Dt=>Dt.id===qe))==null?void 0:Gt.name},qe)}),Se.contactIds.length>3&&y.jsx("span",{className:"text-[10px] text-white/30",children:"..."})]})]}),y.jsxs("div",{className:"text-right shrink-0 ml-4",children:[y.jsx("p",{className:"text-[10px] font-black text-primary uppercase",children:Se.diffDays===0?"":`${Se.diffDays} `}),y.jsxs("button",{onClick:()=>n("/vault"),className:"text-[10px] font-bold text-white/30 hover:text-white transition-colors flex items-center gap-1 mt-1",children:["",y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"})]})]})]},Se.id))})]})}),y.jsx("div",{className:"mb-8 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:["","","",""].map((Se,qe)=>y.jsx("button",{className:`px-5 py-2.5 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-300 ${qe===0?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white border border-white/5"}`,children:Se},Se))})}),y.jsxs("main",{className:"flex-1 pb-32",children:[v&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/5 rounded-3xl border border-white/5 border-dashed",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl animate-pulse"}),y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent relative z-10"})]}),y.jsx("span",{className:"mt-4 text-sm font-medium text-white/40 animate-pulse",children:"..."})]}),(e==null?void 0:e.length)===0&&!v&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-white/20",children:[y.jsx("div",{className:"size-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"database_off"})}),y.jsx("p",{className:"text-sm font-medium",children:""})]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:xi.map(Se=>{var qe,Gt,Dt;return y.jsx("div",{onClick:()=>n(`/profile/${Se.id}`),className:"glass-card-modern group p-5 rounded-[24px] cursor-pointer",children:y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"size-16 rounded-2xl overflow-hidden bg-black/40 border border-white/10 group-hover:border-primary/40 transition-all duration-500",children:Se.cardImage?y.jsx("img",{src:Se.cardImage,alt:Se.name,className:"size-full object-cover group-hover:scale-110 transition-transform duration-700"}):y.jsx("div",{className:"size-full flex items-center justify-center text-white/10 text-2xl font-black bg-gradient-to-br from-white/5 to-transparent",children:Se.name[0]})}),Se.importance>80&&y.jsx("div",{className:"absolute -top-1.5 -right-1.5 size-5 bg-primary rounded-full border-2 border-[#030303] flex items-center justify-center shadow-lg shadow-primary/40",children:y.jsx("span",{className:"material-symbols-outlined text-[10px] text-white font-black",children:"priority_high"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[y.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors truncate",children:Se.name}),y.jsx("span",{className:"text-[10px] font-medium text-white/20 tracking-wider uppercase",children:new Date(Se.lastUpdated).toLocaleDateString("zh-TW",{month:"short",day:"numeric"})})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[10px] font-black text-primary px-2.5 py-1 bg-primary/10 rounded-lg border border-primary/20 uppercase tracking-widest",children:((qe=Se.tags)==null?void 0:qe[0])||""}),y.jsx("p",{className:"text-[13px] text-white/40 truncate italic font-medium",children:((Dt=(Gt=Se.memories)==null?void 0:Gt[0])==null?void 0:Dt.content)||"..."})]})]}),y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 -translate-x-2 group-hover:translate-x-0",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary text-xl",children:"chevron_right"})})]})},Se.id)})})]}),y.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:y.jsxs("div",{className:"relative",children:[h&&y.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[y.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Br})]}),y.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>D(!0),children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),y.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${h?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>m(!h),children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),b&&y.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-white/10 rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"px-8 pt-10 pb-6 text-center border-b border-white/5 bg-gradient-to-b from-primary/10 to-transparent",children:[y.jsx("div",{className:"size-16 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"auto_awesome"})}),y.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-bold text-primary/60 uppercase tracking-[0.2em] mt-1",children:"Nexus Mind Guide"})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto no-scrollbar space-y-6",children:U.map((Se,qe)=>y.jsxs("div",{className:"flex gap-4 group",children:[y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0 group-hover:bg-white/10 transition-colors",children:y.jsx("span",{className:`material-symbols-outlined text-[20px] ${Se.color}`,children:Se.icon})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("h4",{className:"text-xs font-bold text-white/90",children:Se.title}),y.jsx("p",{className:"text-[10px] leading-relaxed text-white/40 font-medium",children:Se.desc})]})]},qe))}),y.jsx("div",{className:"p-6 bg-white/5",children:y.jsx("button",{onClick:()=>I(!1),className:"w-full py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 active:scale-95",children:""})})]})}),N&&y.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center px-4 pb-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>O(!1)}),y.jsxs("div",{className:"w-full max-w-[440px] bg-gradient-to-b from-[#1a1c22] to-[#0a0a0c] border border-white/10 rounded-[40px] p-8 relative z-10 animate-in slide-in-from-bottom-full duration-500 shadow-2xl",children:[y.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full mx-auto mb-10"}),y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"size-20 rounded-[28px] bg-amber-400/10 flex items-center justify-center mb-6 ring-1 ring-amber-400/20",children:y.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"qr_code_2"})}),y.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:""}),c?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-white/40 text-sm mb-10 leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),y.jsx("div",{className:"p-6 bg-white rounded-[32px] shadow-2xl relative z-10",children:y.jsx(Xv,{value:L,size:240,level:"H",includeMargin:!0,imageSettings:{src:(o==null?void 0:o.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:48,width:48,excavate:!0}})})]}),y.jsxs("div",{className:"mt-10 w-full p-5 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between group cursor-pointer hover:bg-white/10 transition-all",onClick:()=>{navigator.clipboard.writeText(L),alert("")},children:[y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-1",children:""}),y.jsx("span",{className:"text-xs text-primary font-bold truncate max-w-[200px]",children:L})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors",children:"content_copy"})]})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-white/40 text-sm leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("button",{onClick:f,className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-black font-black text-sm hover:bg-white/90 transition-all active:scale-95 shadow-xl",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})," Google "]})]})]}),y.jsx("button",{onClick:()=>O(!1),className:"w-full h-16 bg-white/5 hover:bg-white/10 text-white font-bold rounded-3xl mt-8 transition-all border border-white/5 active:scale-95",children:""})]})]}),R&&y.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[y.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>D(!1)}),y.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[y.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),y.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),y.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),y.jsx("button",{onClick:()=>D(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:M,onChange:Se=>{F(Se.target.value),$||de(Se.target.value)}}),$&&y.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[y.jsx("span",{children:""}),y.jsx("button",{onClick:()=>{j(null),F(Z)},className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),M&&!$&&y.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:xi.length>0?xi.map(Se=>{var qe;return y.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{j(Se.id),F(Se.name),de(Se.name)},children:[y.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:Se.name}),y.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(qe=Se.tags)==null?void 0:qe[0]})]},Se.id)}):y.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",M,""]})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[wi.map(Se=>y.jsx("button",{onClick:()=>Ae(Se),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${ce===Se?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:Se},Se)),y.jsxs("button",{onClick:async()=>{const Se=await l("","...");if(Se){const qe=(o==null?void 0:o.categories)||["","","","",""];qe.includes(Se)||(a({...o,categories:[...qe,Se]}),Ae(Se))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:q,onChange:Se=>G(Se.target.value)})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"event"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"date",className:"w-1/2 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-white text-[13px] focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:Pe,onChange:Se=>Me(Se.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"call"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-4 text-white text-[14px] focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:he,onChange:Se=>be(Se.target.value)})]})]}),y.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${($||Z)&&q?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!(($||Z)&&q),onClick:ot,children:""})]})]})]})]})},$6=()=>{const n=Lo(),{contacts:e,userProfile:r}=Uo(),[i,s]=ue.useState(""),[o,a]=ue.useState(""),l=ue.useMemo(()=>["",...(r==null?void 0:r.categories)||["","","","",""]],[r]),u=ue.useMemo(()=>{let c=e||[];if(o!==""&&(c=c.filter(f=>{var h;return(h=f.tags)==null?void 0:h.includes(o)})),i.trim()){const f=i.toLowerCase();c=c.filter(h=>{var I,N,O,L,U,A;const m=(I=h.name)==null?void 0:I.toLowerCase().includes(f),v=(N=h.company)==null?void 0:N.toLowerCase().includes(f),w=(O=h.phone)==null?void 0:O.toLowerCase().includes(f),T=(L=h.tags)==null?void 0:L.some(R=>R.toLowerCase().includes(f)),C=(U=h.ocrText)==null?void 0:U.toLowerCase().includes(f),b=(A=h.memories)==null?void 0:A.some(R=>R.content.toLowerCase().includes(f));return m||v||w||T||C||b?(h._matchReason=m?"":v?"":w?"":T?` #${f}`:C?"":"",!0):!1})}else o===""&&(c=c.slice(0,5));return c},[e,i,o]);return y.jsxs("div",{className:"bg-mesh pb-32 overflow-x-hidden",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-12 pb-6 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",onClick:()=>n(-1),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),y.jsx("div",{className:"size-10"})]})]}),y.jsx("div",{className:"px-6 py-6",children:y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 text-[20px] group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{className:"block w-full h-12 pl-12 pr-10 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[14px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:i,onChange:c=>s(c.target.value)}),i&&y.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:y.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>s(""),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),y.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:l.map(c=>y.jsx("button",{onClick:()=>a(c),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${o===c?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:y.jsx("span",{className:"text-xs font-bold tracking-wider",children:c})},c))}),y.jsxs("main",{className:"px-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[y.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:i||o!==""?` (${u.length})`:""}),y.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),y.jsx("div",{className:"grid gap-4",children:u.map(c=>y.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>n(`/profile/${c.id}`),children:y.jsxs("div",{className:"p-5 flex gap-4",children:[y.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:c.cardImage?y.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:c.cardImage,alt:c.name}):y.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[y.jsx("div",{className:"flex items-center gap-2 mb-1",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:c._matchReason||""})}),y.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:c.name}),y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[c.phone&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),y.jsx("span",{className:"text-[11px] font-medium",children:c.phone})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),y.jsx("span",{className:"text-[11px] font-medium",children:new Date(c.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},c.id))}),u.length===0&&y.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),y.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},B6=()=>{var M,F,$,j,q;const{id:n}=gI(),e=Lo(),{updateContact:r,deleteContact:i,userProfile:s,updateProfile:o,customPrompt:a,schedules:l}=Uo(),u=jf(()=>_t.contacts.get(n),[n]),c=ue.useMemo(()=>!l||!n?[]:l.filter(G=>G.contactIds.includes(n)),[l,n]),[f,h]=ue.useState(!1),[m,v]=ue.useState(!1),[w,T]=ue.useState(null),[C,b]=ue.useState(!1),I=(G,Z)=>{const de=G.target.files[0];if(!de)return;const ee=new FileReader;ee.onloadend=()=>{const ae=ee.result;T(he=>({...he,cardImage:ae}))},ee.readAsDataURL(de)};if(!u)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const N=()=>{var G;T({name:u.name,company:u.company||"",birthday:u.birthday||"",phone:u.phone||"",email:u.email||"",tags:((G=u.tags)==null?void 0:G.join(", "))||"",ocrText:u.ocrText||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[],cardImage:u.cardImage||""}),v(!0),h(!1)},O=async()=>{await r(n,{name:w.name,company:w.company,birthday:w.birthday||null,phone:w.phone,email:w.email,tags:w.tags.split(",").map(G=>G.trim()).filter(G=>G),ocrText:w.ocrText,events:w.events,bio:w.bio,links:w.links,gallery:w.gallery,cardImage:w.cardImage}),v(!1)},L=()=>{var Z;const G=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(Z=u.tags)!=null&&Z.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(G),b(!0),setTimeout(()=>b(!1),2e3),h(!1)},U=async()=>{window.confirm(` ${u.name} `)&&(await i(n),e("/"))},A=async G=>{if(window.confirm("")){const Z=[...u.memories];Z.splice(G,1),await r(n,{memories:Z})}},R=async(G,Z)=>{const de=await a("","...",G);if(de&&de!==G){const ee=[...s.categories||["","","","",""]];ee[Z]=de,await o({...s,categories:ee});const ae=w.tags.split(",").map(he=>he.trim()).filter(he=>he);if(ae.includes(G)){const he=ae.map(be=>be===G?de:be);T({...w,tags:he.join(", ")})}}},D=async(G,Z)=>{if(window.confirm(`${G}`)){const de=(s.categories||["","","","",""]).filter((ae,he)=>he!==Z);await o({...s,categories:de});const ee=w.tags.split(",").map(ae=>ae.trim()).filter(ae=>ae);if(ee.includes(G)){const ae=ee.filter(he=>he!==G);T({...w,tags:ae.join(", ")})}}};return y.jsxs("div",{className:"bg-nexus min-h-screen text-white pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-8 pb-4 flex items-center justify-between transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsx("div",{onClick:()=>e(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90 cursor-pointer",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile Analytics"})]}),y.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[y.jsx("button",{onClick:()=>h(!f),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_vert"})}),f&&y.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[y.jsxs("button",{onClick:N,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),y.jsxs("button",{onClick:L,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),y.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),y.jsxs("button",{onClick:U,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),y.jsx("span",{children:""})]})]})]})]}),y.jsx("div",{className:"px-6 py-4",children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((M=u.tags)==null?void 0:M[0])||""})}),y.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),y.jsxs("div",{className:"flex flex-col gap-1",children:[u.company&&y.jsxs("div",{className:"flex items-center gap-2 text-primary/80 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"business"}),y.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:u.company})]}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 text-white/60 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.email&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.email})]})]})]})})]})}),y.jsxs("div",{className:"px-6 pb-2",children:[c.length>0&&y.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary ml-1",children:""}),y.jsx("div",{className:"space-y-3",children:c.map(G=>{const Z=Math.ceil((new Date(G.date)-new Date().setHours(0,0,0,0))/864e5),de=Z>=0&&Z<=3;return y.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${de?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/5":"bg-white/5 border-white/10"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm text-white",children:G.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(G.date).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})})]}),y.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg ${de?"bg-primary text-white":"bg-white/10 text-white/60"}`,children:Z===0?"":Z<0?"":`${Z} `})]}),de&&y.jsxs("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-primary animate-pulse",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"info"}),""]})]},G.id)})})]}),m?y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsxs("div",{onClick:()=>document.getElementById("card-image-input").click(),className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/10 group cursor-pointer hover:border-primary/50 transition-all shadow-2xl",children:[w.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})}):y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-white/20",children:[y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_a_photo"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("input",{id:"card-image-input",type:"file",accept:"image/*",className:"hidden",onChange:G=>I(G)})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:w.name,onChange:G=>T({...w,name:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:w.company,onChange:G=>T({...w,company:G.target.value})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:w.phone,onChange:G=>T({...w,phone:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-1/2 bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-3 text-white text-[14px] font-medium focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:w.birthday,onChange:G=>T({...w,birthday:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"email",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"example@mail.com",value:w.email,onChange:G=>T({...w,email:G.target.value})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:y.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((s==null?void 0:s.categories)||["","","","",""]).map((G,Z)=>{const de=w.tags.split(",").map(ae=>ae.trim()).filter(ae=>ae),ee=de.includes(G);return y.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-1 py-1.5 rounded-xl text-[11px] font-bold transition-all border ${ee?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:[y.jsx("span",{onClick:()=>{let ae;ee?ae=de.filter(he=>he!==G):ae=[...de,G],T({...w,tags:ae.join(", ")})},className:"cursor-pointer",children:G}),y.jsxs("div",{className:"flex items-center gap-0.5 ml-1 border-l border-white/10 pl-1",children:[y.jsx("button",{type:"button",onClick:()=>R(G,Z),className:"p-0.5 text-white/20 hover:text-white transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{type:"button",onClick:()=>D(G,Z),className:"p-0.5 text-white/20 hover:text-red-400 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},G)}),y.jsxs("button",{type:"button",onClick:async()=>{const G=await a("","...");if(G){const Z=(s==null?void 0:s.categories)||["","","","",""];if(!Z.includes(G)){o({...s,categories:[...Z,G]});const de=w.tags.split(",").map(ee=>ee.trim()).filter(ee=>ee);T({...w,tags:[...de,G].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),y.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.bio,onChange:G=>T({...w,bio:G.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>T({...w,links:[...w.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.links.map((G,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-300",children:[y.jsx("input",{className:"w-20 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all shrink-0",placeholder:"",value:G.label,onChange:de=>{const ee=[...w.links];ee[Z].label=de.target.value,T({...w,links:ee})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:G.url,onChange:de=>{const ee=[...w.links];ee[Z].url=de.target.value,T({...w,links:ee})}}),y.jsx("button",{onClick:()=>T({...w,links:w.links.filter((de,ee)=>ee!==Z)}),className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]}),y.jsx("input",{id:"gallery-upload-input",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:G=>{Array.from(G.target.files).forEach(de=>{const ee=new FileReader;ee.onloadend=()=>{T(ae=>({...ae,gallery:[...ae.gallery,ee.result]}))},ee.readAsDataURL(de)})}})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[w.gallery.map((G,Z)=>y.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[y.jsx("img",{src:G,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),y.jsx("button",{onClick:()=>T({...w,gallery:w.gallery.filter((de,ee)=>ee!==Z)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},Z)),y.jsx("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.ocrText,onChange:G=>T({...w,ocrText:G.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),y.jsxs("button",{onClick:()=>T({...w,events:[...w.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.events.map((G,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-200",children:[y.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-2 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-[110px] shrink-0",value:G.date,onChange:de=>{const ee=[...w.events];ee[Z].date=de.target.value,T({...w,events:ee})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:G.title,onChange:de=>{const ee=[...w.events];ee[Z].title=de.target.value,T({...w,events:ee})}}),y.jsx("button",{onClick:()=>{const de=[...w.events];de.splice(Z,1),T({...w,events:de})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"flex gap-3 pt-6",children:[y.jsx("button",{onClick:O,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),y.jsx("button",{onClick:()=>v(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),y.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:((F=u.ocrText)==null?void 0:F.split(`
`)[0])||""}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 mt-2 text-primary/80 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&y.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((G,Z)=>y.jsxs("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),G.label]},Z))}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[($=u.tags)==null?void 0:$.map((G,Z)=>y.jsxs("div",{className:`${Z===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",G]},Z)),u.birthday&&y.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})]}),y.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&y.jsxs("div",{className:"px-4 mb-6",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((G,Z)=>y.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:y.jsx("img",{src:G,className:"w-full h-full object-cover",alt:`gallery-${Z}`})},Z))})]}),y.jsxs("div",{className:"px-4",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),y.jsxs("div",{className:"space-y-8",children:[(j=u.memories)==null?void 0:j.map((G,Z)=>y.jsxs("div",{className:`relative ${Z!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[y.jsx("div",{className:`absolute ${Z===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex flex-col flex-1",children:[y.jsx("span",{className:"text-white font-semibold text-sm",children:G.content}),y.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(G.date).toLocaleDateString("zh-TW"),"  ",G.location]})]}),y.jsx("button",{onClick:()=>A(Z),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},Z)),!((q=u.memories)!=null&&q.length)&&y.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),C&&y.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),y.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},q6=()=>{var I;const n=Lo(),{contacts:e,updateContact:r,addMemory:i}=Uo(),[s,o]=ue.useState(!1),[a,l]=ue.useState(""),[u,c]=ue.useState(65),[f,h]=ue.useState(40),[m,v]=ue.useState(null);ue.useEffect(()=>{e&&e.length>0&&!m&&(v(e[0].id),c(e[0].importance||50))},[e]);const w=N=>{const O=parseInt(N.target.value);c(O),m&&r(m,{importance:O})},T=async()=>{!a.trim()||!m||(await i(m,{content:a,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),l(""),o(!1))},C=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),T())},b=e==null?void 0:e.find(N=>N.id===m);return y.jsxs("div",{className:"text-white overflow-hidden select-none relative h-screen bg-[#030303]",children:[y.jsxs("div",{className:"absolute top-0 w-full z-50 px-8 pt-6 pb-4 flex justify-between items-center transition-all",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none -z-10"}),y.jsx("div",{className:"text-sm font-black tracking-tighter",onClick:()=>n(-1),children:y.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded-md backdrop-blur-md",children:"9:41"})}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),y.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>o(!0),children:[y.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),y.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),y.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>n("/"),children:[y.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[y.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),y.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[y.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),y.jsxs("div",{className:"text-center py-2",children:[y.jsx("div",{className:"text-sm font-bold truncate w-28",children:(b==null?void 0:b.name)||""}),y.jsx("div",{className:"text-xs text-white/50",children:((I=b==null?void 0:b.tags)==null?void 0:I[0])||""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:u,onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${u}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${u>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${u>50?"text-black/40":"text-white/40"}`,children:""})]})]}),y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:N=>h(parseInt(N.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${f}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${f>50?"text-black/40":"text-white/40"}`,children:"speed"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${f>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>n("/search"),children:y.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),y.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),y.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),s&&y.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),y.jsx("button",{onClick:()=>o(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),y.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:a,onChange:N=>l(N.target.value),onKeyDown:C}),y.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),y.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:T,children:" SAVE TO VAULT"})]})]})}),y.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[y.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),y.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},H6=()=>{const n=Lo(),{contacts:e,schedules:r,addSchedule:i,deleteSchedule:s}=Uo(),[o,a]=ue.useState(!1),[l,u]=ue.useState({title:"",date:"",contactIds:[]}),[c,f]=ue.useState(""),h=ue.useMemo(()=>e?e.filter(T=>{var C;return T.name.toLowerCase().includes(c.toLowerCase())||((C=T.tags)==null?void 0:C.some(b=>b.toLowerCase().includes(c.toLowerCase())))}):[],[e,c]),m=ue.useMemo(()=>{if(!e)return[];const T=[],C=new Date;C.setHours(0,0,0,0),r&&r.forEach(I=>{const N=new Date(I.date);N.setHours(0,0,0,0);const O=Math.ceil((N-C)/(1e3*60*60*24));T.push({id:`schedule-${I.id}`,date:N,title:I.title,description:`: ${I.contactIds.map(L=>{var U;return(U=e.find(A=>A.id===L))==null?void 0:U.name}).filter(Boolean).join(", ")}`,type:"schedule",diffDays:O,isUpcoming:O<=30&&O>=0,contactIds:I.contactIds,scheduleId:I.id})});const b=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(I=>{if(I.birthday){const[N,O,L]=I.birthday.split("-").map(Number),U=new Date(C.getFullYear(),O-1,L);U<C&&U.setFullYear(C.getFullYear()+1);const A=Math.ceil((U-C)/(1e3*60*60*24));T.push({id:`birthday-${I.id}`,contactId:I.id,contactName:I.name,date:U,title:"",description:`${I.name} `,type:"birthday",diffDays:A,isUpcoming:A<=30&&A>=0})}if(I.events&&I.events.forEach((N,O)=>{const L=new Date(N.date);L.setHours(0,0,0,0);const U=Math.ceil((L-C)/(1e3*60*60*24));T.push({id:`event-${I.id}-${O}`,contactId:I.id,contactName:I.name,date:L,title:N.title,description:"",type:N.type||"event",diffDays:U,isUpcoming:U<=30&&U>=0})}),I.memories&&I.memories.forEach((N,O)=>{const L=new Date(N.date);L.setHours(0,0,0,0);const U=Math.ceil((L-C)/(1e3*60*60*24));T.push({id:`memory-${I.id}-${O}`,contactId:I.id,contactName:I.name,date:L,title:"",description:N.content.substring(0,20)+(N.content.length>20?"...":""),type:"memory",diffDays:U,isUpcoming:U<=30&&U>=0});let A;for(;(A=b.exec(N.content))!==null;){const[R,D,M,F]=A,$=D?parseInt(D.replace(/[-/]/,"")):C.getFullYear(),j=new Date($,parseInt(M)-1,parseInt(F));if(j.setHours(0,0,0,0),!isNaN(j.getTime())){const q=Math.ceil((j-C)/864e5);T.push({id:`extracted-mem-${I.id}-${O}-${A.index}`,contactId:I.id,contactName:I.name,date:j,title:"",description:`: ${R}`,type:"extracted",diffDays:q,isUpcoming:q<=30&&q>=0})}}}),I.ocrText){let N;for(;(N=b.exec(I.ocrText))!==null;){const[O,L,U,A]=N,R=L?parseInt(L.replace(/[-/]/,"")):C.getFullYear(),D=new Date(R,parseInt(U)-1,parseInt(A));if(D.setHours(0,0,0,0),!isNaN(D.getTime())){const M=Math.ceil((D-C)/864e5);T.push({id:`extracted-ocr-${I.id}-${N.index}`,contactId:I.id,contactName:I.name,date:D,title:"/",description:`: ${O}`,type:"extracted",diffDays:M,isUpcoming:M<=30&&M>=0})}}}}),T.sort((I,N)=>N.date-I.date)},[e]),v=m.filter(T=>T.isUpcoming),w=m.filter(T=>!T.isUpcoming);return y.jsxs("div",{className:"pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>n(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"Important Schedules"})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"size-11 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/20",children:y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})})]})]}),y.jsxs("main",{className:"p-4 space-y-8",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),y.jsx("div",{className:"space-y-3",children:v.length>0?v.map(T=>y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>n(`/profile/${T.contactId}`),children:[y.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${T.type==="birthday"?"bg-pink-500/20 text-pink-500":T.type==="memory"?"bg-blue-500/20 text-blue-500":T.type==="extracted"?"bg-amber-500/20 text-amber-500":T.type==="schedule"?"bg-emerald-500/20 text-emerald-500":"bg-primary/20 text-primary"}`,children:y.jsx("span",{className:"material-symbols-outlined",children:T.type==="birthday"?"cake":T.type==="memory"?"history":T.type==="extracted"?"find_in_page":T.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-bold text-sm text-white/90 truncate",children:T.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-0.5 truncate",children:T.contactName||""})]}),y.jsxs("div",{className:"text-right shrink-0",children:[y.jsx("p",{className:"text-xs font-bold text-white/80",children:T.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),y.jsx("p",{className:`text-[10px] font-bold ${T.diffDays===0?"text-red-500":"text-primary"}`,children:T.diffDays===0?"":`${T.diffDays} `}),T.type==="schedule"&&y.jsx("button",{onClick:C=>{C.stopPropagation(),window.confirm("")&&s(T.scheduleId)},className:"mt-1 text-red-500/40 hover:text-red-500 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"delete"})})]})]}),y.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:T.description})]})]},T.id)):y.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:y.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),y.jsx("div",{className:"space-y-3",children:w.map(T=>y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>n(`/profile/${T.contactId}`),children:[y.jsxs("div",{className:"text-center min-w-[50px]",children:[y.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:T.date.getFullYear()}),y.jsx("p",{className:"text-sm font-black text-white/80",children:T.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),y.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:T.type==="birthday"?"cake":T.type==="memory"?"history":T.type==="extracted"?"find_in_page":T.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[T.title,"  ",T.contactName||""]}),y.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:T.description})]})]},T.id))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-[480px] bg-[#1a1a1a] border-t sm:border border-white/10 rounded-t-[32px] sm:rounded-[32px] p-8 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:""}),y.jsx("button",{onClick:()=>a(!1),className:"material-symbols-outlined text-white/40",children:"close"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all",placeholder:"...",value:l.title,onChange:T=>u({...l,title:T.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all color-scheme-dark",value:l.date,onChange:T=>u({...l,date:T.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center ml-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),l.contactIds.length>0&&y.jsxs("span",{className:"text-[10px] font-bold text-primary/60",children:[" ",l.contactIds.length," "]})]}),y.jsxs("div",{className:"relative mb-3",children:[y.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-[18px]",children:"search"}),y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-white text-xs font-medium outline-none focus:ring-1 ring-primary/50 transition-all",placeholder:"...",value:c,onChange:T=>f(T.target.value)}),c&&y.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 -translate-y-1/2 size-6 flex items-center justify-center text-white/20 hover:text-white/40",children:y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),y.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar p-1",children:h.length>0?h.map(T=>y.jsx("button",{onClick:()=>{const C=l.contactIds.includes(T.id)?l.contactIds.filter(b=>b!==T.id):[...l.contactIds,T.id];u({...l,contactIds:C})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${l.contactIds.includes(T.id)?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:T.name},T.id)):y.jsx("div",{className:"w-full py-4 text-center text-[10px] text-white/20 italic",children:""})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:async()=>{!l.title||!l.date||(await i(l),a(!1),u({title:"",date:"",contactIds:[]}))},disabled:!l.title||!l.date,className:"flex-1 py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none",children:""})]})]})]})})]})},K6=()=>{var he,be;const n=Lo(),{userProfile:e,updateProfile:r,publishProfile:i,customPrompt:s,currentUser:o,login:a,logout:l,syncToCloud:u,syncFromCloud:c,isSyncing:f,setUnsavedChanges:h}=Uo(),[m,v]=ue.useState(!1),[w,T]=ue.useState(!1),[C,b]=ue.useState(!1),[I,N]=ue.useState(null),[O,L]=ue.useState(""),[U,A]=ue.useState({name:"",bio:"",avatar:"",themeColor:"",links:[],categories:[]}),R=JSON.stringify(U)!==JSON.stringify({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",themeColor:(e==null?void 0:e.themeColor)||"#2b6cee",links:(e==null?void 0:e.links)||[],categories:(e==null?void 0:e.categories)||["","","","",""]});ue.useEffect(()=>(h(m&&R),()=>h(!1)),[m,R,h]),ue.useEffect(()=>{const ce=Ae=>{m&&R&&(Ae.preventDefault(),Ae.returnValue="")};return window.addEventListener("beforeunload",ce),()=>{window.removeEventListener("beforeunload",ce)}},[m,R]);const D=()=>{m&&R?window.confirm("")&&(h(!1),n(-1)):n(-1)};ue.useEffect(()=>{e&&A({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",themeColor:e.themeColor||"#2b6cee",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const M=[{name:"Nexus Blue",value:"#2b6cee"},{name:"Cyber Purple",value:"#8b5cf6"},{name:"Neon Pink",value:"#ec4899"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Crimson",value:"#ef4444"},{name:"Midnight",value:"#334155"}],F=async()=>{await r(U),h(!1),v(!1)},$=ce=>{const Ae=ce.target.files[0];if(!Ae)return;const Pe=new FileReader;Pe.onloadend=()=>{A(Me=>({...Me,avatar:Pe.result}))},Pe.readAsDataURL(Ae)},j=async()=>{try{await u(),alert("")}catch(ce){alert(""+ce.message)}},q=async()=>{if(window.confirm(""))try{await c(),alert("")}catch(ce){alert(""+ce.message)}},G=async()=>{const ce=await s("","...");if(ce)if(m)U.categories.includes(ce)||A({...U,categories:[...U.categories,ce]});else{const Ae=e.categories||["","","","",""];Ae.includes(ce)||await r({...e,categories:[...Ae,ce]})}},Z=async(ce,Ae)=>{const Pe=await s("","...",ce);if(Pe&&Pe!==ce)if(m){const Me=[...U.categories];Me[Ae]=Pe,A({...U,categories:Me})}else{const Me=[...e.categories||["","","","",""]];Me[Ae]=Pe,await r({categories:Me})}},de=async ce=>{const Ae=m?U.categories[ce]:e.categories[ce];if(window.confirm(`${Ae}`))if(m)A({...U,categories:U.categories.filter((Pe,Me)=>Me!==ce)});else{const Me=[...e.categories||["","","","",""]].filter((Ye,Ge)=>Ge!==ce);await r({categories:Me})}},ee=async()=>{if(!o){alert(" Google ");return}b(!0),N(null);try{const ce=await i(),Pe=`${window.location.origin+window.location.pathname.replace(/\/$/,"").replace(/\/settings$/,"")}/#/p/${ce}`;L(Pe),N("success"),T(!0),console.log("SUCCESS: Profile published to Firestore. Link:",Pe)}catch(ce){console.error("Share failed:",ce),N("error"),alert(""+ce.message)}finally{b(!1)}},ae=async ce=>{m?A({...U,themeColor:ce}):await r({...e,themeColor:ce})};return e?y.jsxs("div",{className:"text-white pb-24",children:[y.jsxs("div",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:D,className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"v1.0.1  User Preferences"})]})]}),m?y.jsx("button",{onClick:F,className:"text-xs font-black text-white px-6 py-2.5 rounded-xl bg-primary hover:bg-primary-dark transition-all uppercase tracking-widest shadow-lg shadow-primary/20",children:""}):y.jsx("button",{onClick:()=>v(!0),className:"text-xs font-black text-primary px-5 py-2.5 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary hover:text-white transition-all uppercase tracking-widest shadow-lg shadow-primary/10",children:""})]})]}),y.jsxs("main",{className:"px-6 pt-8 space-y-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:U.avatar?y.jsx("img",{src:U.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):y.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),m&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>document.getElementById("avatar-input").click(),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})}),y.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:$})]})]}),y.jsx("div",{className:"text-center space-y-1 w-full",children:m?y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:U.name,onChange:ce=>A({...U,name:ce.target.value}),placeholder:""}):y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})}),!m&&y.jsxs("button",{onClick:ee,disabled:C,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:border-primary/50 hover:bg-primary/10 transition-all group",children:[y.jsx("span",{className:`material-symbols-outlined text-sm ${C?"animate-spin":"text-primary"}`,children:C?"sync":"share"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/60 group-hover:text-primary transition-colors",children:""})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),m?y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px]",value:U.bio,onChange:ce=>A({...U,bio:ce.target.value}),placeholder:"..."}):y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic whitespace-pre-wrap",children:e.bio||""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),m&&y.jsxs("button",{onClick:()=>A({...U,links:[...U.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),y.jsxs("div",{className:"space-y-2",children:[(he=m?U.links:e.links)==null?void 0:he.map((ce,Ae)=>y.jsx("div",{className:"flex gap-2 items-center",children:m?y.jsxs(y.Fragment,{children:[y.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:ce.label,onChange:Pe=>{const Me=[...U.links];Me[Ae].label=Pe.target.value,A({...U,links:Me})}}),y.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:ce.url,onChange:Pe=>{const Me=[...U.links];Me[Ae].url=Pe.target.value,A({...U,links:Me})}}),y.jsx("button",{onClick:()=>A({...U,links:U.links.filter((Pe,Me)=>Me!==Ae)}),className:"text-white/20 hover:text-red-400 p-1",children:y.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):y.jsxs("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[y.jsx("span",{className:"text-sm font-medium text-white/80",children:ce.label}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},Ae)),!m&&((be=e.links)==null?void 0:be.length)===0&&y.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!m&&y.jsxs("div",{className:"pt-8 space-y-4",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:o?y.jsxs("div",{className:"divide-y divide-white/5",children:[y.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[y.jsx("img",{src:o.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-bold truncate",children:o.displayName}),y.jsx("p",{className:"text-[10px] text-white/30 truncate",children:o.email})]}),y.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),y.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:j,disabled:f,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${f?"animate-spin":""}`,children:"cloud_upload"}),f?"...":""]}),y.jsxs("button",{onClick:q,disabled:f,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${f?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):y.jsxs("button",{onClick:a,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[y.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-bold",children:" Google "}),y.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[y.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),y.jsx("span",{className:"text-sm",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),y.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),y.jsx("span",{className:"text-sm",children:""})]})})]}),y.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y.jsxs("button",{onClick:G,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:(m?U.categories:e.categories).map((ce,Ae)=>y.jsxs("div",{className:"group flex items-center gap-2 pl-3 pr-2 py-1.5 rounded-full text-[11px] font-bold transition-all border border-white/10 bg-white/5 text-white/80 hover:border-primary/30",children:[y.jsx("span",{children:ce}),y.jsxs("div",{className:"flex items-center gap-1 border-l border-white/10 ml-1 pl-1",children:[y.jsx("button",{onClick:()=>Z(ce,Ae),className:"text-white/20 hover:text-primary transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{onClick:()=>de(Ae),className:"text-white/20 hover:text-red-400 transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},Ae))}),!(m?U.categories:e.categories).length&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[y.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),y.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),y.jsx("div",{className:"text-center pt-4",children:y.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]}),y.jsxs("div",{className:"space-y-4 pt-8 border-t border-white/5",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 block",children:" ()"}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:y.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-3",children:[M.map(ce=>y.jsx("button",{onClick:()=>ae(ce.value),className:`relative aspect-square rounded-xl transition-all duration-300 ${(m?U.themeColor:e.themeColor)===ce.value?"scale-110 ring-2 ring-white ring-offset-4 ring-offset-[#030303]":"hover:scale-105 opacity-50"} cursor-pointer`,style:{backgroundColor:ce.value},title:ce.name,children:(m?U.themeColor:e.themeColor)===ce.value&&y.jsx("span",{className:"material-symbols-outlined text-white text-sm absolute inset-0 flex items-center justify-center",children:"check"})},ce.value)),y.jsxs("div",{className:"relative aspect-square rounded-xl bg-white/5 border border-dashed border-white/20 flex items-center justify-center group overflow-hidden",children:[y.jsx("input",{type:"color",value:m?U.themeColor:e.themeColor,onChange:ce=>ae(ce.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-white transition-colors",children:"palette"})]})]})})]})]}),w&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-6",children:[y.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>T(!1)}),y.jsx("div",{className:"relative w-full max-w-sm bg-[#1c1f27] border border-white/10 rounded-[32px] p-8 animate-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[y.jsx("div",{className:"size-16 rounded-2xl bg-primary/20 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"qr_code_2"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}),y.jsx("div",{className:"p-5 bg-white rounded-3xl shadow-xl",children:y.jsx(Xv,{value:O,size:200,level:"H",includeMargin:!0,imageSettings:{src:(e==null?void 0:e.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),y.jsxs("div",{className:"w-full space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/5 border border-white/10 rounded-xl",children:[y.jsx("span",{className:"flex-1 text-[10px] text-white/40 truncate",children:O}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(O),alert("")},className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("button",{onClick:()=>T(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all",children:""})]})]})})]})]}):null},G6=()=>{var l,u,c,f;const{uid:n}=gI(),[e,r]=ue.useState(null),[i,s]=ue.useState(!0),[o,a]=ue.useState(null);return ue.useEffect(()=>{(async()=>{const m=n==null?void 0:n.trim();if(!m){a(""),s(!1);return}try{console.log("Fetching profile for UID:",m);const v=aa(cn,"public_profiles",m),w=await Ry(v);if(w.exists()){const T=w.data();console.log("Profile data found by ID:",T),r(T)}else{console.log("Document ID not found, trying query by field 'uid'...");const T=dL(qf(cn,"public_profiles"),pL("uid","==",m)),C=await Kf(T);if(C.empty)console.error("FIREBASE_DATA_MISSING: No document found for UID:",m),a("");else{const b=C.docs[0].data();console.log("Profile data found by field query:",b),r(b)}}}catch(v){console.error("FIREBASE_FETCH_ERROR:",v),v.code==="permission-denied"?a(" Rules  allow read"):a(""+(v.message||""))}finally{s(!1)}})()},[n]),i?y.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o||!e?y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/10 mb-4",children:"person_off"}),y.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:o||""}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/10 text-left max-w-md w-full overflow-hidden",children:[y.jsx("p",{className:"text-[10px] font-mono text-white/30 uppercase mb-2",children:"Diagnostic Tools"}),y.jsxs("div",{className:"space-y-1 text-[11px] font-mono text-white/50 break-all",children:[y.jsxs("p",{children:[y.jsx("span",{className:"text-primary/60",children:"UID:"})," ",n||"None"]}),y.jsxs("p",{children:[y.jsx("span",{className:"text-primary/60",children:"Project:"})," ",((u=(l=cn==null?void 0:cn.app)==null?void 0:l.options)==null?void 0:u.projectId)||"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"text-primary/60",children:"Auth Domain:"})," ",((f=(c=cn==null?void 0:cn.app)==null?void 0:c.options)==null?void 0:f.authDomain)||"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"text-primary/60",children:"Path:"})," ",window.location.hash]}),y.jsxs("p",{children:[y.jsx("span",{className:"text-primary/60",children:"Status:"})," ",o||"No Error"]}),y.jsxs("p",{children:[y.jsx("span",{className:"text-primary/60",children:"Build Time:"})," 2026-01-28 23:30"]})]}),y.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[y.jsx("button",{onClick:()=>window.location.reload(),className:"py-2 bg-primary/20 text-primary text-[10px] font-bold rounded-lg hover:bg-primary/30 transition-all",children:""}),y.jsx("button",{onClick:()=>window.location.href="#/",className:"py-2 bg-white/5 text-white/60 text-[10px] font-bold rounded-lg hover:bg-white/10 transition-all",children:""})]})]})]}):y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white selection:bg-primary/30",children:[y.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none opacity-50",children:[y.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 blur-[120px] rounded-full"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),y.jsxs("main",{className:"relative z-10 max-w-2xl mx-auto px-6 pt-24 pb-32",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-16 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[y.jsxs("div",{className:"relative mb-8 group",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-700 scale-110"}),e.avatar?y.jsx("img",{src:e.avatar,className:"relative size-32 rounded-full object-cover border-4 border-white/10 shadow-2xl",alt:e.name}):y.jsx("div",{className:"relative size-32 rounded-full bg-gradient-to-br from-white/10 to-white/5 border-4 border-white/10 flex items-center justify-center shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-5xl text-white/20",children:"person"})})]}),y.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4 bg-gradient-to-b from-white to-white/60 bg-clip-text text-transparent",children:e.name}),y.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6"}),y.jsx("p",{className:"text-lg text-white/60 leading-relaxed font-medium max-w-md italic whitespace-pre-wrap",children:e.bio})]}),e.links&&e.links.length>0&&y.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[y.jsx("h2",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] text-center mb-8",children:""}),e.links.map((h,m)=>y.jsxs("a",{href:h.url.startsWith("http")?h.url:`https://${h.url}`,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-3xl hover:bg-white/10 hover:border-primary/50 transition-all duration-500 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[y.jsx("div",{className:"size-10 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary transition-colors",children:h.label.toLowerCase().includes("ig")||h.label.toLowerCase().includes("instagram")?"camera":h.label.toLowerCase().includes("fb")||h.label.toLowerCase().includes("facebook")?"facebook":"link"})}),y.jsx("span",{className:"font-bold text-lg text-white/80 group-hover:text-white transition-colors",children:h.label})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary group-hover:translate-x-1 transition-all relative z-10",children:"arrow_forward"})]},m))]}),y.jsxs("footer",{className:"mt-24 flex flex-col items-center gap-6 animate-in fade-in duration-1000 delay-500",children:[y.jsx("div",{className:"h-px w-12 bg-white/10 mb-2"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-bold text-white/90 mb-2",children:" Nexus Mind"}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("a",{href:window.location.origin+"/nexus-mind/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl bg-primary/10 border border-primary/20 text-primary hover:bg-primary hover:text-white transition-all duration-300 font-bold text-sm shadow-lg shadow-primary/5",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"explore"}),""]})]}),y.jsxs("div",{className:"mt-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:[y.jsx("span",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Powered by"}),y.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Nexus Mind"})]})]})]})]})};function W6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function Q6(n,e,r){return e=rV(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function H1(n,e){return J6(n)||W6(n,e)||DC(n,e)||tV()}function Y6(n){return X6(n)||Z6(n)||DC(n)||eV()}function X6(n){if(Array.isArray(n))return Oy(n)}function J6(n){if(Array.isArray(n))return n}function Z6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function DC(n,e){if(n){if(typeof n=="string")return Oy(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(n,e)}}function Oy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function eV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nV(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rV(n){var e=nV(n,"string");return typeof e=="symbol"?e:String(e)}var iV=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(Y6(Object.entries(e).filter(function(s){var o=H1(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=H1(s,2),a=o[0],l=o[1];return Q6({},a,l)}))))};function jy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function sV(n){if(Array.isArray(n))return n}function oV(n){if(Array.isArray(n))return jy(n)}function aV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lV(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function uV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hV(n,e){return sV(n)||lV(n,e)||MC(n,e)||uV()}function K1(n){return oV(n)||aV(n)||MC(n)||cV()}function MC(n,e){if(n){if(typeof n=="string")return jy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jy(n,e):void 0}}function fV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(f){return f}:s,a=e.methodNames,l=a===void 0?[]:a,u=e.initPropNames,c=u===void 0?[]:u;return ue.forwardRef(function(f,h){var m=ue.useRef(),v=ue.useMemo(function(){var C=Object.fromEntries(c.filter(function(b){return f.hasOwnProperty(b)}).map(function(b){return[b,f[b]]}));return n(C)},[]);G1(function(){v(o(m.current))},ue.useLayoutEffect),G1(function(){return v._destructor instanceof Function?v._destructor:void 0});var w=ue.useCallback(function(C){for(var b=arguments.length,I=new Array(b>1?b-1:0),N=1;N<b;N++)I[N-1]=arguments[N];return v[C]instanceof Function?v[C].apply(v,I):void 0},[v]),T=ue.useRef({});return Object.keys(iV(f,[].concat(K1(l),K1(c)))).filter(function(C){return T.current[C]!==f[C]}).forEach(function(C){return w(C,f[C])}),T.current=f,ue.useImperativeHandle(h,function(){return Object.fromEntries(l.map(function(C){return[C,function(){for(var b=arguments.length,I=new Array(b),N=0;N<b;N++)I[N]=arguments[N];return w.apply(void 0,[C].concat(I))}]}))},[w]),mt.createElement(i,{ref:m})})}function G1(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ue.useEffect,r=ue.useRef(),i=ue.useRef(!1),s=ue.useRef(!1),o=ue.useState(0),a=hV(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(u){return u+1}),function(){s.current&&r.current&&r.current()}},[])}var Dy="http://www.w3.org/1999/xhtml";const W1={svg:"http://www.w3.org/2000/svg",xhtml:Dy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kp(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),W1.hasOwnProperty(e)?{space:W1[e],local:n}:n}function dV(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Dy&&e.documentElement.namespaceURI===Dy?e.createElement(n):e.createElementNS(r,n)}}function pV(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function LC(n){var e=Kp(n);return(e.local?pV:dV)(e)}function mV(){}function X0(n){return n==null?mV:function(){return this.querySelector(n)}}function gV(n){typeof n!="function"&&(n=X0(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),u,c,f=0;f<a;++f)(u=o[f])&&(c=n.call(u,u.__data__,f,o))&&("__data__"in u&&(c.__data__=u.__data__),l[f]=c);return new wr(i,this._parents)}function yV(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function vV(){return[]}function VC(n){return n==null?vV:function(){return this.querySelectorAll(n)}}function _V(n){return function(){return yV(n.apply(this,arguments))}}function wV(n){typeof n=="function"?n=_V(n):n=VC(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(i.push(n.call(u,u.__data__,c,a)),s.push(u));return new wr(i,s)}function FC(n){return function(){return this.matches(n)}}function UC(n){return function(e){return e.matches(n)}}var xV=Array.prototype.find;function bV(n){return function(){return xV.call(this.children,n)}}function EV(){return this.firstElementChild}function TV(n){return this.select(n==null?EV:bV(typeof n=="function"?n:UC(n)))}var IV=Array.prototype.filter;function SV(){return Array.from(this.children)}function CV(n){return function(){return IV.call(this.children,n)}}function kV(n){return this.selectAll(n==null?SV:CV(typeof n=="function"?n:UC(n)))}function AV(n){typeof n!="function"&&(n=FC(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new wr(i,this._parents)}function zC(n){return new Array(n.length)}function NV(){return new wr(this._enter||this._groups.map(zC),this._parents)}function Hd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Hd.prototype={constructor:Hd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function RV(n){return function(){return n}}function PV(n,e,r,i,s,o){for(var a=0,l,u=e.length,c=o.length;a<c;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new Hd(n,o[a]);for(;a<u;++a)(l=e[a])&&(s[a]=l)}function OV(n,e,r,i,s,o,a){var l,u,c=new Map,f=e.length,h=o.length,m=new Array(f),v;for(l=0;l<f;++l)(u=e[l])&&(m[l]=v=a.call(u,u.__data__,l,e)+"",c.has(v)?s[l]=u:c.set(v,u));for(l=0;l<h;++l)v=a.call(n,o[l],l,o)+"",(u=c.get(v))?(i[l]=u,u.__data__=o[l],c.delete(v)):r[l]=new Hd(n,o[l]);for(l=0;l<f;++l)(u=e[l])&&c.get(m[l])===u&&(s[l]=u)}function jV(n){return n.__data__}function DV(n,e){if(!arguments.length)return Array.from(this,jV);var r=e?OV:PV,i=this._parents,s=this._groups;typeof n!="function"&&(n=RV(n));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var f=i[c],h=s[c],m=h.length,v=MV(n.call(f,f&&f.__data__,c,i)),w=v.length,T=l[c]=new Array(w),C=a[c]=new Array(w),b=u[c]=new Array(m);r(f,h,T,C,b,v,e);for(var I=0,N=0,O,L;I<w;++I)if(O=T[I]){for(I>=N&&(N=I+1);!(L=C[N])&&++N<w;);O._next=L||null}}return a=new wr(a,i),a._enter=l,a._exit=u,a}function MV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function LV(){return new wr(this._exit||this._groups.map(zC),this._parents)}function VV(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function FV(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=r[u],f=i[u],h=c.length,m=l[u]=new Array(h),v,w=0;w<h;++w)(v=c[w]||f[w])&&(m[w]=v);for(;u<s;++u)l[u]=r[u];return new wr(l,this._parents)}function UV(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function zV(n){n||(n=$V);function e(h,m){return h&&m?n(h.__data__,m.__data__):!h-!m}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,f=0;f<l;++f)(c=a[f])&&(u[f]=c);u.sort(e)}return new wr(s,this._parents).order()}function $V(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function BV(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function qV(){return Array.from(this)}function HV(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function KV(){let n=0;for(const e of this)++n;return n}function GV(){return!this.node()}function WV(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function QV(n){return function(){this.removeAttribute(n)}}function YV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function XV(n,e){return function(){this.setAttribute(n,e)}}function JV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function ZV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function eF(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function tF(n,e){var r=Kp(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?YV:QV:typeof e=="function"?r.local?eF:ZV:r.local?JV:XV)(r,e))}function $C(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function nF(n){return function(){this.style.removeProperty(n)}}function rF(n,e,r){return function(){this.style.setProperty(n,e,r)}}function iF(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function sF(n,e,r){return arguments.length>1?this.each((e==null?nF:typeof e=="function"?iF:rF)(n,e,r??"")):su(this.node(),n)}function su(n,e){return n.style.getPropertyValue(e)||$C(n).getComputedStyle(n,null).getPropertyValue(e)}function oF(n){return function(){delete this[n]}}function aF(n,e){return function(){this[n]=e}}function lF(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function uF(n,e){return arguments.length>1?this.each((e==null?oF:typeof e=="function"?lF:aF)(n,e)):this.node()[n]}function BC(n){return n.trim().split(/^|\s+/)}function J0(n){return n.classList||new qC(n)}function qC(n){this._node=n,this._names=BC(n.getAttribute("class")||"")}qC.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function HC(n,e){for(var r=J0(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function KC(n,e){for(var r=J0(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function cF(n){return function(){HC(this,n)}}function hF(n){return function(){KC(this,n)}}function fF(n,e){return function(){(e.apply(this,arguments)?HC:KC)(this,n)}}function dF(n,e){var r=BC(n+"");if(arguments.length<2){for(var i=J0(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?fF:e?cF:hF)(r,e))}function pF(){this.textContent=""}function mF(n){return function(){this.textContent=n}}function gF(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function yF(n){return arguments.length?this.each(n==null?pF:(typeof n=="function"?gF:mF)(n)):this.node().textContent}function vF(){this.innerHTML=""}function _F(n){return function(){this.innerHTML=n}}function wF(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function xF(n){return arguments.length?this.each(n==null?vF:(typeof n=="function"?wF:_F)(n)):this.node().innerHTML}function bF(){this.nextSibling&&this.parentNode.appendChild(this)}function EF(){return this.each(bF)}function TF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IF(){return this.each(TF)}function SF(n){var e=typeof n=="function"?n:LC(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function CF(){return null}function kF(n,e){var r=typeof n=="function"?n:LC(n),i=e==null?CF:typeof e=="function"?e:X0(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function AF(){var n=this.parentNode;n&&n.removeChild(this)}function NF(){return this.each(AF)}function RF(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function PF(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function OF(n){return this.select(n?PF:RF)}function jF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function DF(n){return function(e){n.call(this,e,this.__data__)}}function MF(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function LF(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function VF(n,e,r){return function(){var i=this.__on,s,o=DF(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function FF(n,e,r){var i=MF(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,f;u<c;++u)for(s=0,f=l[u];s<o;++s)if((a=i[s]).type===f.type&&a.name===f.name)return f.value}return}for(l=e?VF:LF,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function GC(n,e,r){var i=$C(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function UF(n,e){return function(){return GC(this,n,e)}}function zF(n,e){return function(){return GC(this,n,e.apply(this,arguments))}}function $F(n,e){return this.each((typeof e=="function"?zF:UF)(n,e))}function*BF(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var WC=[null];function wr(n,e){this._groups=n,this._parents=e}function Ch(){return new wr([[document.documentElement]],WC)}function qF(){return this}wr.prototype=Ch.prototype={constructor:wr,select:gV,selectAll:wV,selectChild:TV,selectChildren:kV,filter:AV,data:DV,enter:NV,exit:LV,join:VV,merge:FV,selection:qF,order:UV,sort:zV,call:BV,nodes:qV,node:HV,size:KV,empty:GV,each:WV,attr:tF,style:sF,property:uF,classed:dF,text:yF,html:xF,raise:EF,lower:IF,append:SF,insert:kF,remove:NF,clone:OF,datum:jF,on:FF,dispatch:$F,[Symbol.iterator]:BF};function Dr(n){return typeof n=="string"?new wr([[document.querySelector(n)]],[document.documentElement]):new wr([[n]],WC)}function HF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Vi(n,e){if(n=HF(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var KF={value:()=>{}};function kh(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Gf(r)}function Gf(n){this._=n}function GF(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Gf.prototype=kh.prototype={constructor:Gf,on:function(n,e){var r=this._,i=GF(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=WF(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=Q1(r[s],n.name,e);else if(e==null)for(s in r)r[s]=Q1(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new Gf(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function WF(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function Q1(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=KF,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const QF={passive:!1},nh={capture:!0,passive:!1};function Zm(n){n.stopImmediatePropagation()}function zl(n){n.preventDefault(),n.stopImmediatePropagation()}function QC(n){var e=n.document.documentElement,r=Dr(n).on("dragstart.drag",zl,nh);"onselectstart"in e?r.on("selectstart.drag",zl,nh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function YC(n,e){var r=n.document.documentElement,i=Dr(n).on("dragstart.drag",null);e&&(i.on("click.drag",zl,nh),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const pf=n=>()=>n;function My(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}My.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function YF(n){return!n.ctrlKey&&!n.button}function XF(){return this.parentNode}function JF(n,e){return e??{x:n.x,y:n.y}}function ZF(){return navigator.maxTouchPoints||"ontouchstart"in this}function e9(){var n=YF,e=XF,r=JF,i=ZF,s={},o=kh("start","drag","end"),a=0,l,u,c,f,h=0;function m(O){O.on("mousedown.drag",v).filter(i).on("touchstart.drag",C).on("touchmove.drag",b,QF).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(O,L){if(!(f||!n.call(this,O,L))){var U=N(this,e.call(this,O,L),O,L,"mouse");U&&(Dr(O.view).on("mousemove.drag",w,nh).on("mouseup.drag",T,nh),QC(O.view),Zm(O),c=!1,l=O.clientX,u=O.clientY,U("start",O))}}function w(O){if(zl(O),!c){var L=O.clientX-l,U=O.clientY-u;c=L*L+U*U>h}s.mouse("drag",O)}function T(O){Dr(O.view).on("mousemove.drag mouseup.drag",null),YC(O.view,c),zl(O),s.mouse("end",O)}function C(O,L){if(n.call(this,O,L)){var U=O.changedTouches,A=e.call(this,O,L),R=U.length,D,M;for(D=0;D<R;++D)(M=N(this,A,O,L,U[D].identifier,U[D]))&&(Zm(O),M("start",O,U[D]))}}function b(O){var L=O.changedTouches,U=L.length,A,R;for(A=0;A<U;++A)(R=s[L[A].identifier])&&(zl(O),R("drag",O,L[A]))}function I(O){var L=O.changedTouches,U=L.length,A,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A<U;++A)(R=s[L[A].identifier])&&(Zm(O),R("end",O,L[A]))}function N(O,L,U,A,R,D){var M=o.copy(),F=Vi(D||U,L),$,j,q;if((q=r.call(O,new My("beforestart",{sourceEvent:U,target:m,identifier:R,active:a,x:F[0],y:F[1],dx:0,dy:0,dispatch:M}),A))!=null)return $=q.x-F[0]||0,j=q.y-F[1]||0,function G(Z,de,ee){var ae=F,he;switch(Z){case"start":s[R]=G,he=a++;break;case"end":delete s[R],--a;case"drag":F=Vi(ee||de,L),he=a;break}M.call(Z,O,new My(Z,{sourceEvent:de,subject:q,target:m,identifier:R,active:he,x:F[0]+$,y:F[1]+j,dx:F[0]-ae[0],dy:F[1]-ae[1],dispatch:M}),A)}}return m.filter=function(O){return arguments.length?(n=typeof O=="function"?O:pf(!!O),m):n},m.container=function(O){return arguments.length?(e=typeof O=="function"?O:pf(O),m):e},m.subject=function(O){return arguments.length?(r=typeof O=="function"?O:pf(O),m):r},m.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:pf(!!O),m):i},m.on=function(){var O=o.on.apply(o,arguments);return O===o?m:O},m.clickDistance=function(O){return arguments.length?(h=(O=+O)*O,m):Math.sqrt(h)},m}function Z0(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function XC(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function Ah(){}var rh=.7,Kd=1/rh,$l="\\s*([+-]?\\d+)\\s*",ih="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t9=/^#([0-9a-f]{3,8})$/,n9=new RegExp(`^rgb\\(${$l},${$l},${$l}\\)$`),r9=new RegExp(`^rgb\\(${Gi},${Gi},${Gi}\\)$`),i9=new RegExp(`^rgba\\(${$l},${$l},${$l},${ih}\\)$`),s9=new RegExp(`^rgba\\(${Gi},${Gi},${Gi},${ih}\\)$`),o9=new RegExp(`^hsl\\(${ih},${Gi},${Gi}\\)$`),a9=new RegExp(`^hsla\\(${ih},${Gi},${Gi},${ih}\\)$`),Y1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Z0(Ah,sh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:X1,formatHex:X1,formatHex8:l9,formatHsl:u9,formatRgb:J1,toString:J1});function X1(){return this.rgb().formatHex()}function l9(){return this.rgb().formatHex8()}function u9(){return JC(this).formatHsl()}function J1(){return this.rgb().formatRgb()}function sh(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=t9.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?Z1(e):r===3?new tr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?mf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?mf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=n9.exec(n))?new tr(e[1],e[2],e[3],1):(e=r9.exec(n))?new tr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=i9.exec(n))?mf(e[1],e[2],e[3],e[4]):(e=s9.exec(n))?mf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=o9.exec(n))?nb(e[1],e[2]/100,e[3]/100,1):(e=a9.exec(n))?nb(e[1],e[2]/100,e[3]/100,e[4]):Y1.hasOwnProperty(n)?Z1(Y1[n]):n==="transparent"?new tr(NaN,NaN,NaN,0):null}function Z1(n){return new tr(n>>16&255,n>>8&255,n&255,1)}function mf(n,e,r,i){return i<=0&&(n=e=r=NaN),new tr(n,e,r,i)}function c9(n){return n instanceof Ah||(n=sh(n)),n?(n=n.rgb(),new tr(n.r,n.g,n.b,n.opacity)):new tr}function Ly(n,e,r,i){return arguments.length===1?c9(n):new tr(n,e,r,i??1)}function tr(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}Z0(tr,Ly,XC(Ah,{brighter(n){return n=n==null?Kd:Math.pow(Kd,n),new tr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?rh:Math.pow(rh,n),new tr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new tr(xa(this.r),xa(this.g),xa(this.b),Gd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eb,formatHex:eb,formatHex8:h9,formatRgb:tb,toString:tb}));function eb(){return`#${ma(this.r)}${ma(this.g)}${ma(this.b)}`}function h9(){return`#${ma(this.r)}${ma(this.g)}${ma(this.b)}${ma((isNaN(this.opacity)?1:this.opacity)*255)}`}function tb(){const n=Gd(this.opacity);return`${n===1?"rgb(":"rgba("}${xa(this.r)}, ${xa(this.g)}, ${xa(this.b)}${n===1?")":`, ${n})`}`}function Gd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function xa(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ma(n){return n=xa(n),(n<16?"0":"")+n.toString(16)}function nb(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new li(n,e,r,i)}function JC(n){if(n instanceof li)return new li(n.h,n.s,n.l,n.opacity);if(n instanceof Ah||(n=sh(n)),!n)return new li;if(n instanceof li)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,u=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new li(a,l,u,n.opacity)}function f9(n,e,r,i){return arguments.length===1?JC(n):new li(n,e,r,i??1)}function li(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}Z0(li,f9,XC(Ah,{brighter(n){return n=n==null?Kd:Math.pow(Kd,n),new li(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?rh:Math.pow(rh,n),new li(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new tr(eg(n>=240?n-240:n+120,s,i),eg(n,s,i),eg(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new li(rb(this.h),gf(this.s),gf(this.l),Gd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Gd(this.opacity);return`${n===1?"hsl(":"hsla("}${rb(this.h)}, ${gf(this.s)*100}%, ${gf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function rb(n){return n=(n||0)%360,n<0?n+360:n}function gf(n){return Math.max(0,Math.min(1,n||0))}function eg(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const ZC=n=>()=>n;function d9(n,e){return function(r){return n+r*e}}function p9(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function m9(n){return(n=+n)==1?ek:function(e,r){return r-e?p9(e,r,n):ZC(isNaN(e)?r:e)}}function ek(n,e){var r=e-n;return r?d9(n,r):ZC(isNaN(n)?e:n)}const ib=function n(e){var r=m9(e);function i(s,o){var a=r((s=Ly(s)).r,(o=Ly(o)).r),l=r(s.g,o.g),u=r(s.b,o.b),c=ek(s.opacity,o.opacity);return function(f){return s.r=a(f),s.g=l(f),s.b=u(f),s.opacity=c(f),s+""}}return i.gamma=n,i}(1);function eo(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var Vy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tg=new RegExp(Vy.source,"g");function g9(n){return function(){return n}}function y9(n){return function(e){return n(e)+""}}function v9(n,e){var r=Vy.lastIndex=tg.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(n=n+"",e=e+"";(i=Vy.exec(n))&&(s=tg.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:eo(i,s)})),r=tg.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?y9(u[0].x):g9(e):(e=u.length,function(c){for(var f=0,h;f<e;++f)l[(h=u[f]).i]=h.x(c);return l.join("")})}var sb=180/Math.PI,Fy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tk(n,e,r,i,s,o){var a,l,u;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(u=n*r+e*i)&&(r-=n*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),n*i<e*r&&(n=-n,e=-e,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*sb,skewX:Math.atan(u)*sb,scaleX:a,scaleY:l}}var yf;function _9(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Fy:tk(e.a,e.b,e.c,e.d,e.e,e.f)}function w9(n){return n==null||(yf||(yf=document.createElementNS("http://www.w3.org/2000/svg","g")),yf.setAttribute("transform",n),!(n=yf.transform.baseVal.consolidate()))?Fy:(n=n.matrix,tk(n.a,n.b,n.c,n.d,n.e,n.f))}function nk(n,e,r,i){function s(c){return c.length?c.pop()+" ":""}function o(c,f,h,m,v,w){if(c!==h||f!==m){var T=v.push("translate(",null,e,null,r);w.push({i:T-4,x:eo(c,h)},{i:T-2,x:eo(f,m)})}else(h||m)&&v.push("translate("+h+e+m+r)}function a(c,f,h,m){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),m.push({i:h.push(s(h)+"rotate(",null,i)-2,x:eo(c,f)})):f&&h.push(s(h)+"rotate("+f+i)}function l(c,f,h,m){c!==f?m.push({i:h.push(s(h)+"skewX(",null,i)-2,x:eo(c,f)}):f&&h.push(s(h)+"skewX("+f+i)}function u(c,f,h,m,v,w){if(c!==h||f!==m){var T=v.push(s(v)+"scale(",null,",",null,")");w.push({i:T-4,x:eo(c,h)},{i:T-2,x:eo(f,m)})}else(h!==1||m!==1)&&v.push(s(v)+"scale("+h+","+m+")")}return function(c,f){var h=[],m=[];return c=n(c),f=n(f),o(c.translateX,c.translateY,f.translateX,f.translateY,h,m),a(c.rotate,f.rotate,h,m),l(c.skewX,f.skewX,h,m),u(c.scaleX,c.scaleY,f.scaleX,f.scaleY,h,m),c=f=null,function(v){for(var w=-1,T=m.length,C;++w<T;)h[(C=m[w]).i]=C.x(v);return h.join("")}}}var x9=nk(_9,"px, ","px)","deg)"),b9=nk(w9,", ",")",")"),E9=1e-12;function ob(n){return((n=Math.exp(n))+1/n)/2}function T9(n){return((n=Math.exp(n))-1/n)/2}function I9(n){return((n=Math.exp(2*n))-1)/(n+1)}const S9=function n(e,r,i){function s(o,a){var l=o[0],u=o[1],c=o[2],f=a[0],h=a[1],m=a[2],v=f-l,w=h-u,T=v*v+w*w,C,b;if(T<E9)b=Math.log(m/c)/e,C=function(A){return[l+A*v,u+A*w,c*Math.exp(e*A*b)]};else{var I=Math.sqrt(T),N=(m*m-c*c+i*T)/(2*c*r*I),O=(m*m-c*c-i*T)/(2*m*r*I),L=Math.log(Math.sqrt(N*N+1)-N),U=Math.log(Math.sqrt(O*O+1)-O);b=(U-L)/e,C=function(A){var R=A*b,D=ob(L),M=c/(r*I)*(D*I9(e*R+L)-T9(L));return[l+M*v,u+M*w,c*D/ob(e*R+L)]}}return C.duration=b*1e3*e/Math.SQRT2,C}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return n(a,l,u)},s}(Math.SQRT2,2,4);var ou=0,ic=0,$u=0,rk=1e3,Wd,sc,Qd=0,Da=0,Gp=0,oh=typeof performance=="object"&&performance.now?performance:Date,ik=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function e_(){return Da||(ik(C9),Da=oh.now()+Gp)}function C9(){Da=0}function Yd(){this._call=this._time=this._next=null}Yd.prototype=t_.prototype={constructor:Yd,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?e_():+r)+(e==null?0:+e),!this._next&&sc!==this&&(sc?sc._next=this:Wd=this,sc=this),this._call=n,this._time=r,Uy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uy())}};function t_(n,e,r){var i=new Yd;return i.restart(n,e,r),i}function k9(){e_(),++ou;for(var n=Wd,e;n;)(e=Da-n._time)>=0&&n._call.call(void 0,e),n=n._next;--ou}function ab(){Da=(Qd=oh.now())+Gp,ou=ic=0;try{k9()}finally{ou=0,N9(),Da=0}}function A9(){var n=oh.now(),e=n-Qd;e>rk&&(Gp-=e,Qd=n)}function N9(){for(var n,e=Wd,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Wd=r);sc=n,Uy(i)}function Uy(n){if(!ou){ic&&(ic=clearTimeout(ic));var e=n-Da;e>24?(n<1/0&&(ic=setTimeout(ab,n-oh.now()-Gp)),$u&&($u=clearInterval($u))):($u||(Qd=oh.now(),$u=setInterval(A9,rk)),ou=1,ik(ab))}}function lb(n,e,r){var i=new Yd;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var R9=kh("start","end","cancel","interrupt"),P9=[],sk=0,ub=1,zy=2,Wf=3,cb=4,$y=5,Qf=6;function Wp(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;O9(n,r,{name:e,index:i,group:s,on:R9,tween:P9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:sk})}function n_(n,e){var r=_i(n,e);if(r.state>sk)throw new Error("too late; already scheduled");return r}function Ji(n,e){var r=_i(n,e);if(r.state>Wf)throw new Error("too late; already running");return r}function _i(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function O9(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=t_(o,0,r.time);function o(c){r.state=ub,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var f,h,m,v;if(r.state!==ub)return u();for(f in i)if(v=i[f],v.name===r.name){if(v.state===Wf)return lb(a);v.state===cb?(v.state=Qf,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[f]):+f<e&&(v.state=Qf,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[f])}if(lb(function(){r.state===Wf&&(r.state=cb,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=zy,r.on.call("start",n,n.__data__,r.index,r.group),r.state===zy){for(r.state=Wf,s=new Array(m=r.tween.length),f=0,h=-1;f<m;++f)(v=r.tween[f].value.call(n,n.__data__,r.index,r.group))&&(s[++h]=v);s.length=h+1}}function l(c){for(var f=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=$y,1),h=-1,m=s.length;++h<m;)s[h].call(n,f);r.state===$y&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=Qf,r.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function Yf(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>zy&&i.state<$y,i.state=Qf,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function j9(n){return this.each(function(){Yf(this,n)})}function D9(n,e){var r,i;return function(){var s=Ji(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function M9(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Ji(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function L9(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=_i(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?D9:M9)(r,n,e))}function r_(n,e,r){var i=n._id;return n.each(function(){var s=Ji(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return _i(s,i).value[e]}}function ok(n,e){var r;return(typeof e=="number"?eo:e instanceof sh?ib:(r=sh(e))?(e=r,ib):v9)(n,e)}function V9(n){return function(){this.removeAttribute(n)}}function F9(n){return function(){this.removeAttributeNS(n.space,n.local)}}function U9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function z9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function $9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function B9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function q9(n,e){var r=Kp(n),i=r==="transform"?b9:ok;return this.attrTween(n,typeof e=="function"?(r.local?B9:$9)(r,i,r_(this,"attr."+n,e)):e==null?(r.local?F9:V9)(r):(r.local?z9:U9)(r,i,e))}function H9(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function K9(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function G9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&K9(n,o)),r}return s._value=e,s}function W9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&H9(n,o)),r}return s._value=e,s}function Q9(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Kp(n);return this.tween(r,(i.local?G9:W9)(i,e))}function Y9(n,e){return function(){n_(this,n).delay=+e.apply(this,arguments)}}function X9(n,e){return e=+e,function(){n_(this,n).delay=e}}function J9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Y9:X9)(e,n)):_i(this.node(),e).delay}function Z9(n,e){return function(){Ji(this,n).duration=+e.apply(this,arguments)}}function e8(n,e){return e=+e,function(){Ji(this,n).duration=e}}function t8(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Z9:e8)(e,n)):_i(this.node(),e).duration}function n8(n,e){if(typeof e!="function")throw new Error;return function(){Ji(this,n).ease=e}}function r8(n){var e=this._id;return arguments.length?this.each(n8(e,n)):_i(this.node(),e).ease}function i8(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ji(this,n).ease=r}}function s8(n){if(typeof n!="function")throw new Error;return this.each(i8(this._id,n))}function o8(n){typeof n!="function"&&(n=FC(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new Os(i,this._parents,this._name,this._id)}function a8(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],f=u.length,h=a[l]=new Array(f),m,v=0;v<f;++v)(m=u[v]||c[v])&&(h[v]=m);for(;l<i;++l)a[l]=e[l];return new Os(a,this._parents,this._name,this._id)}function l8(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function u8(n,e,r){var i,s,o=l8(e)?n_:Ji;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function c8(n,e){var r=this._id;return arguments.length<2?_i(this.node(),r).on.on(n):this.each(u8(r,n,e))}function h8(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function f8(){return this.on("end.remove",h8(this._id))}function d8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=X0(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],u=l.length,c=o[a]=new Array(u),f,h,m=0;m<u;++m)(f=l[m])&&(h=n.call(f,f.__data__,m,l))&&("__data__"in f&&(h.__data__=f.__data__),c[m]=h,Wp(c[m],e,r,m,c,_i(f,r)));return new Os(o,this._parents,e,r)}function p8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=VC(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var u=i[l],c=u.length,f,h=0;h<c;++h)if(f=u[h]){for(var m=n.call(f,f.__data__,h,u),v,w=_i(f,r),T=0,C=m.length;T<C;++T)(v=m[T])&&Wp(v,e,r,T,m,w);o.push(m),a.push(f)}return new Os(o,a,e,r)}var m8=Ch.prototype.constructor;function g8(){return new m8(this._groups,this._parents)}function y8(n,e){var r,i,s;return function(){var o=su(this,n),a=(this.style.removeProperty(n),su(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function ak(n){return function(){this.style.removeProperty(n)}}function v8(n,e,r){var i,s=r+"",o;return function(){var a=su(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function _8(n,e,r){var i,s,o;return function(){var a=su(this,n),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(n),su(this,n))),a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l))}}function w8(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var u=Ji(this,n),c=u.on,f=u.value[o]==null?l||(l=ak(e)):void 0;(c!==r||s!==f)&&(i=(r=c).copy()).on(a,s=f),u.on=i}}function x8(n,e,r){var i=(n+="")=="transform"?x9:ok;return e==null?this.styleTween(n,y8(n,i)).on("end.style."+n,ak(n)):typeof e=="function"?this.styleTween(n,_8(n,i,r_(this,"style."+n,e))).each(w8(this._id,n)):this.styleTween(n,v8(n,i,e),r).on("end.style."+n,null)}function b8(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function E8(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&b8(n,a,r)),i}return o._value=e,o}function T8(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,E8(n,e,r??""))}function I8(n){return function(){this.textContent=n}}function S8(n){return function(){var e=n(this);this.textContent=e??""}}function C8(n){return this.tween("text",typeof n=="function"?S8(r_(this,"text",n)):I8(n==null?"":n+""))}function k8(n){return function(e){this.textContent=n.call(this,e)}}function A8(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&k8(s)),e}return i._value=n,i}function N8(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,A8(n))}function R8(){for(var n=this._name,e=this._id,r=lk(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var f=_i(u,e);Wp(u,n,r,c,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Os(i,this._parents,n,r)}function P8(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};r.each(function(){var c=Ji(this,i),f=c.on;f!==n&&(e=(n=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&o()})}var O8=0;function Os(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function lk(){return++O8}var ls=Ch.prototype;Os.prototype={constructor:Os,select:d8,selectAll:p8,selectChild:ls.selectChild,selectChildren:ls.selectChildren,filter:o8,merge:a8,selection:g8,transition:R8,call:ls.call,nodes:ls.nodes,node:ls.node,size:ls.size,empty:ls.empty,each:ls.each,on:c8,attr:q9,attrTween:Q9,style:x8,styleTween:T8,text:C8,textTween:N8,remove:f8,tween:L9,delay:J9,duration:t8,ease:r8,easeVarying:s8,end:P8,[Symbol.iterator]:ls[Symbol.iterator]};function j8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var D8={time:null,delay:0,duration:250,ease:j8};function M8(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function L8(n){var e,r;n instanceof Os?(e=n._id,n=n._name):(e=lk(),(r=D8).time=e_(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&Wp(u,n,e,c,a,r||M8(u,e));return new Os(i,this._parents,n,e)}Ch.prototype.interrupt=j9;Ch.prototype.transition=L8;const vf=n=>()=>n;function V8(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ws(n,e,r){this.k=n,this.x=e,this.y=r}ws.prototype={constructor:ws,scale:function(n){return n===1?this:new ws(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ws(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i_=new ws(1,0,0);Mi.prototype=ws.prototype;function Mi(n){for(;!n.__zoom;)if(!(n=n.parentNode))return i_;return n.__zoom}function ng(n){n.stopImmediatePropagation()}function Bu(n){n.preventDefault(),n.stopImmediatePropagation()}function F8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function U8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function hb(){return this.__zoom||i_}function z8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function $8(){return navigator.maxTouchPoints||"ontouchstart"in this}function B8(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function q8(){var n=F8,e=U8,r=B8,i=z8,s=$8,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=S9,c=kh("start","zoom","end"),f,h,m,v=500,w=150,T=0,C=10;function b(q){q.property("__zoom",hb).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(q,G,Z,de){var ee=q.selection?q.selection():q;ee.property("__zoom",hb),q!==ee?L(q,G,Z,de):ee.interrupt().each(function(){U(this,arguments).event(de).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},b.scaleBy=function(q,G,Z,de){b.scaleTo(q,function(){var ee=this.__zoom.k,ae=typeof G=="function"?G.apply(this,arguments):G;return ee*ae},Z,de)},b.scaleTo=function(q,G,Z,de){b.transform(q,function(){var ee=e.apply(this,arguments),ae=this.__zoom,he=Z==null?O(ee):typeof Z=="function"?Z.apply(this,arguments):Z,be=ae.invert(he),ce=typeof G=="function"?G.apply(this,arguments):G;return r(N(I(ae,ce),he,be),ee,a)},Z,de)},b.translateBy=function(q,G,Z,de){b.transform(q,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),a)},null,de)},b.translateTo=function(q,G,Z,de,ee){b.transform(q,function(){var ae=e.apply(this,arguments),he=this.__zoom,be=de==null?O(ae):typeof de=="function"?de.apply(this,arguments):de;return r(i_.translate(be[0],be[1]).scale(he.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof Z=="function"?-Z.apply(this,arguments):-Z),ae,a)},de,ee)};function I(q,G){return G=Math.max(o[0],Math.min(o[1],G)),G===q.k?q:new ws(G,q.x,q.y)}function N(q,G,Z){var de=G[0]-Z[0]*q.k,ee=G[1]-Z[1]*q.k;return de===q.x&&ee===q.y?q:new ws(q.k,de,ee)}function O(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function L(q,G,Z,de){q.on("start.zoom",function(){U(this,arguments).event(de).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(de).end()}).tween("zoom",function(){var ee=this,ae=arguments,he=U(ee,ae).event(de),be=e.apply(ee,ae),ce=Z==null?O(be):typeof Z=="function"?Z.apply(ee,ae):Z,Ae=Math.max(be[1][0]-be[0][0],be[1][1]-be[0][1]),Pe=ee.__zoom,Me=typeof G=="function"?G.apply(ee,ae):G,Ye=u(Pe.invert(ce).concat(Ae/Pe.k),Me.invert(ce).concat(Ae/Me.k));return function(Ge){if(Ge===1)Ge=Me;else{var Kt=Ye(Ge),Le=Ae/Kt[2];Ge=new ws(Le,ce[0]-Kt[0]*Le,ce[1]-Kt[1]*Le)}he.zoom(null,Ge)}})}function U(q,G,Z){return!Z&&q.__zooming||new A(q,G)}function A(q,G){this.that=q,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(q,G),this.taps=0}A.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,G){return this.mouse&&q!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var G=Dr(this.that).datum();c.call(q,this.that,new V8(q,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),G)}};function R(q,...G){if(!n.apply(this,arguments))return;var Z=U(this,G).event(q),de=this.__zoom,ee=Math.max(o[0],Math.min(o[1],de.k*Math.pow(2,i.apply(this,arguments)))),ae=Vi(q);if(Z.wheel)(Z.mouse[0][0]!==ae[0]||Z.mouse[0][1]!==ae[1])&&(Z.mouse[1]=de.invert(Z.mouse[0]=ae)),clearTimeout(Z.wheel);else{if(de.k===ee)return;Z.mouse=[ae,de.invert(ae)],Yf(this),Z.start()}Bu(q),Z.wheel=setTimeout(he,w),Z.zoom("mouse",r(N(I(de,ee),Z.mouse[0],Z.mouse[1]),Z.extent,a));function he(){Z.wheel=null,Z.end()}}function D(q,...G){if(m||!n.apply(this,arguments))return;var Z=q.currentTarget,de=U(this,G,!0).event(q),ee=Dr(q.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",Ae,!0),ae=Vi(q,Z),he=q.clientX,be=q.clientY;QC(q.view),ng(q),de.mouse=[ae,this.__zoom.invert(ae)],Yf(this),de.start();function ce(Pe){if(Bu(Pe),!de.moved){var Me=Pe.clientX-he,Ye=Pe.clientY-be;de.moved=Me*Me+Ye*Ye>T}de.event(Pe).zoom("mouse",r(N(de.that.__zoom,de.mouse[0]=Vi(Pe,Z),de.mouse[1]),de.extent,a))}function Ae(Pe){ee.on("mousemove.zoom mouseup.zoom",null),YC(Pe.view,de.moved),Bu(Pe),de.event(Pe).end()}}function M(q,...G){if(n.apply(this,arguments)){var Z=this.__zoom,de=Vi(q.changedTouches?q.changedTouches[0]:q,this),ee=Z.invert(de),ae=Z.k*(q.shiftKey?.5:2),he=r(N(I(Z,ae),de,ee),e.apply(this,G),a);Bu(q),l>0?Dr(this).transition().duration(l).call(L,he,de,q):Dr(this).call(b.transform,he,de,q)}}function F(q,...G){if(n.apply(this,arguments)){var Z=q.touches,de=Z.length,ee=U(this,G,q.changedTouches.length===de).event(q),ae,he,be,ce;for(ng(q),he=0;he<de;++he)be=Z[he],ce=Vi(be,this),ce=[ce,this.__zoom.invert(ce),be.identifier],ee.touch0?!ee.touch1&&ee.touch0[2]!==ce[2]&&(ee.touch1=ce,ee.taps=0):(ee.touch0=ce,ae=!0,ee.taps=1+!!f);f&&(f=clearTimeout(f)),ae&&(ee.taps<2&&(h=ce[0],f=setTimeout(function(){f=null},v)),Yf(this),ee.start())}}function $(q,...G){if(this.__zooming){var Z=U(this,G).event(q),de=q.changedTouches,ee=de.length,ae,he,be,ce;for(Bu(q),ae=0;ae<ee;++ae)he=de[ae],be=Vi(he,this),Z.touch0&&Z.touch0[2]===he.identifier?Z.touch0[0]=be:Z.touch1&&Z.touch1[2]===he.identifier&&(Z.touch1[0]=be);if(he=Z.that.__zoom,Z.touch1){var Ae=Z.touch0[0],Pe=Z.touch0[1],Me=Z.touch1[0],Ye=Z.touch1[1],Ge=(Ge=Me[0]-Ae[0])*Ge+(Ge=Me[1]-Ae[1])*Ge,Kt=(Kt=Ye[0]-Pe[0])*Kt+(Kt=Ye[1]-Pe[1])*Kt;he=I(he,Math.sqrt(Ge/Kt)),be=[(Ae[0]+Me[0])/2,(Ae[1]+Me[1])/2],ce=[(Pe[0]+Ye[0])/2,(Pe[1]+Ye[1])/2]}else if(Z.touch0)be=Z.touch0[0],ce=Z.touch0[1];else return;Z.zoom("touch",r(N(he,be,ce),Z.extent,a))}}function j(q,...G){if(this.__zooming){var Z=U(this,G).event(q),de=q.changedTouches,ee=de.length,ae,he;for(ng(q),m&&clearTimeout(m),m=setTimeout(function(){m=null},v),ae=0;ae<ee;++ae)he=de[ae],Z.touch0&&Z.touch0[2]===he.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===he.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(he=Vi(he,this),Math.hypot(h[0]-he[0],h[1]-he[1])<C)){var be=Dr(this).on("dblclick.zoom");be&&be.apply(this,arguments)}}}return b.wheelDelta=function(q){return arguments.length?(i=typeof q=="function"?q:vf(+q),b):i},b.filter=function(q){return arguments.length?(n=typeof q=="function"?q:vf(!!q),b):n},b.touchable=function(q){return arguments.length?(s=typeof q=="function"?q:vf(!!q),b):s},b.extent=function(q){return arguments.length?(e=typeof q=="function"?q:vf([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),b):e},b.scaleExtent=function(q){return arguments.length?(o[0]=+q[0],o[1]=+q[1],b):[o[0],o[1]]},b.translateExtent=function(q){return arguments.length?(a[0][0]=+q[0][0],a[1][0]=+q[1][0],a[0][1]=+q[0][1],a[1][1]=+q[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(q){return arguments.length?(r=q,b):r},b.duration=function(q){return arguments.length?(l=+q,b):l},b.interpolate=function(q){return arguments.length?(u=q,b):u},b.on=function(){var q=c.on.apply(c,arguments);return q===c?b:q},b.clickDistance=function(q){return arguments.length?(T=(q=+q)*q,b):Math.sqrt(T)},b.tapDistance=function(q){return arguments.length?(C=+q,b):C},b}class fb extends Map{constructor(e,r=G8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(db(this,e))}has(e){return super.has(db(this,e))}set(e,r){return super.set(H8(this,e),r)}delete(e){return super.delete(K8(this,e))}}function db({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function H8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function K8({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function G8(n){return n!==null&&typeof n=="object"?n.valueOf():n}function pb(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function mb(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function W8(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var Q8=typeof global=="object"&&global&&global.Object===Object&&global,Y8=typeof self=="object"&&self&&self.Object===Object&&self,uk=Q8||Y8||Function("return this")(),Xd=uk.Symbol,ck=Object.prototype,X8=ck.hasOwnProperty,J8=ck.toString,qu=Xd?Xd.toStringTag:void 0;function Z8(n){var e=X8.call(n,qu),r=n[qu];try{n[qu]=void 0;var i=!0}catch{}var s=J8.call(n);return i&&(e?n[qu]=r:delete n[qu]),s}var eU=Object.prototype,tU=eU.toString;function nU(n){return tU.call(n)}var rU="[object Null]",iU="[object Undefined]",gb=Xd?Xd.toStringTag:void 0;function sU(n){return n==null?n===void 0?iU:rU:gb&&gb in Object(n)?Z8(n):nU(n)}function oU(n){return n!=null&&typeof n=="object"}var aU="[object Symbol]";function lU(n){return typeof n=="symbol"||oU(n)&&sU(n)==aU}var uU=/\s/;function cU(n){for(var e=n.length;e--&&uU.test(n.charAt(e)););return e}var hU=/^\s+/;function fU(n){return n&&n.slice(0,cU(n)+1).replace(hU,"")}function Jd(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var yb=NaN,dU=/^[-+]0x[0-9a-f]+$/i,pU=/^0b[01]+$/i,mU=/^0o[0-7]+$/i,gU=parseInt;function vb(n){if(typeof n=="number")return n;if(lU(n))return yb;if(Jd(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Jd(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=fU(n);var r=pU.test(n);return r||mU.test(n)?gU(n.slice(2),r?2:8):dU.test(n)?yb:+n}var rg=function(){return uk.Date.now()},yU="Expected a function",vU=Math.max,_U=Math.min;function hk(n,e,r){var i,s,o,a,l,u,c=0,f=!1,h=!1,m=!0;if(typeof n!="function")throw new TypeError(yU);e=vb(e)||0,Jd(r)&&(f=!!r.leading,h="maxWait"in r,o=h?vU(vb(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function v(U){var A=i,R=s;return i=s=void 0,c=U,a=n.apply(R,A),a}function w(U){return c=U,l=setTimeout(b,e),f?v(U):a}function T(U){var A=U-u,R=U-c,D=e-A;return h?_U(D,o-R):D}function C(U){var A=U-u,R=U-c;return u===void 0||A>=e||A<0||h&&R>=o}function b(){var U=rg();if(C(U))return I(U);l=setTimeout(b,T(U))}function I(U){return l=void 0,m&&i?v(U):(i=s=void 0,a)}function N(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function O(){return l===void 0?a:I(rg())}function L(){var U=rg(),A=C(U);if(i=arguments,s=this,u=U,A){if(l===void 0)return w(u);if(h)return clearTimeout(l),l=setTimeout(b,e),v(u)}return l===void 0&&(l=setTimeout(b,e)),a}return L.cancel=N,L.flush=O,L}var wU="Expected a function";function xU(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(wU);return Jd(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),hk(n,e,{leading:i,maxWait:e,trailing:s})}var ba=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-ba.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?ba.Bounce.In(n*2)*.5:ba.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),oc=function(){return performance.now()},fk=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=oc()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),By={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=By.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},dk=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),qy=new fk,_b=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ba.Linear.None,this._interpolationFunction=By.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=dk.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=qy,qy.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=oc()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],u=Array.isArray(l),c=u?"array":typeof l,f=!u&&Array.isArray(i[a]);if(!(c==="undefined"||c==="function")){if(f){var h=i[a];if(h.length===0)continue;for(var m=[l],v=0,w=h.length;v<w;v+=1){var T=this._handleRelativeValue(l,h[v]);if(isNaN(T)){f=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(T)}f&&(i[a]=m)}if((c==="object"||u)&&l&&!f){r[a]=u?[]:{};var C=l;for(var b in C)r[a][b]=C[b];s[a]=u?[]:{};var h=i[a];if(!this._isDynamic){var I={};for(var b in h)I[b]=h[b];i[a]=h=I}this._setupProperties(C,r[a],h,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),u||(r[a]*=1),f?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=oc()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=oc()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=ba.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=By.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=oc()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(i._duration===0||a>u)return 1;var T=Math.trunc(a/l),C=a-T*l,b=Math.min(C/i._duration,1);return b===0&&a===i._duration?1:b},f=c(),h=this._easingFunction(f);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,f),this._duration===0||a>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var v=0,w=this._chainedTweens.length;v<w;v++)this._chainedTweens[v].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],u=Array.isArray(e[o]),c=Array.isArray(l),f=!u&&c;f?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();dk.nextId;var Xi=qy;Xi.getAll.bind(Xi);Xi.removeAll.bind(Xi);Xi.add.bind(Xi);Xi.remove.bind(Xi);Xi.update.bind(Xi);function wb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function bU(n){if(Array.isArray(n))return n}function EU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function IU(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function SU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CU(n,e){return bU(n)||IU(n,e)||kU(n,e)||SU()}function kU(n,e){if(n){if(typeof n=="string")return wb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wb(n,e):void 0}}var AU=TU(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,u=l===void 0?function(c,f){}:l;EU(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=u});function s_(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,u=l===void 0?{}:l,c=n.init,f=c===void 0?function(){}:c,h=n.update,m=h===void 0?function(){}:h,v=Object.keys(s).map(function(w){return new AU(w,s[w])});return function w(){for(var T=arguments.length,C=new Array(T),b=0;b<T;b++)C[b]=arguments[b];var I=!!(this instanceof w&&this.constructor),N=I?C.shift():void 0,O=C[0],L=O===void 0?{}:O,U=Object.assign({},r instanceof Function?r(L):r,{initialised:!1}),A={};function R(F){return D(F,L),M(),R}var D=function($,j){f.call(R,$,U,j),U.initialised=!0},M=hk(function(){U.initialised&&(m.call(R,U,A),A={})},1);return v.forEach(function(F){R[F.name]=$(F);function $(j){var q=j.name,G=j.triggerUpdate,Z=G===void 0?!1:G,de=j.onChange,ee=de===void 0?function(be,ce){}:de,ae=j.defaultVal,he=ae===void 0?null:ae;return function(be){var ce=U[q];if(!arguments.length)return ce;var Ae=be===void 0?he:be;return U[q]=Ae,ee.call(R,Ae,U,ce),!A.hasOwnProperty(q)&&(A[q]=ce),Z&&M(),R}}}),Object.keys(a).forEach(function(F){R[F]=function(){for(var $,j=arguments.length,q=new Array(j),G=0;G<j;G++)q[G]=arguments[G];return($=a[F]).call.apply($,[R,U].concat(q))}}),Object.entries(u).forEach(function(F){var $=CU(F,2),j=$[0],q=$[1];return R[j]=R[q]}),R.resetProps=function(){return v.forEach(function(F){R[F.name](F.defaultVal)}),R},R.resetProps(),U._rerender=M,I&&N&&R(N),R}}var ht=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function Zd(n){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(n)}var NU=/^\s+/,RU=/\s+$/;function Ve(n,e){if(n=n||"",e=e||{},n instanceof Ve)return n;if(!(this instanceof Ve))return new Ve(n,e);var r=PU(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ve.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=pk(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=bb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=bb(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=xb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=xb(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return Eb(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return MU(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ct(this._r,255)*100)+"%",g:Math.round(Ct(this._g,255)*100)+"%",b:Math.round(Ct(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ct(this._r,255)*100)+"%, "+Math.round(Ct(this._g,255)*100)+"%, "+Math.round(Ct(this._b,255)*100)+"%)":"rgba("+Math.round(Ct(this._r,255)*100)+"%, "+Math.round(Ct(this._g,255)*100)+"%, "+Math.round(Ct(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:WU[Eb(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+Tb(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=Ve(e);i="#"+Tb(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Ve(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(UU,arguments)},brighten:function(){return this._applyModification(zU,arguments)},darken:function(){return this._applyModification($U,arguments)},desaturate:function(){return this._applyModification(LU,arguments)},saturate:function(){return this._applyModification(VU,arguments)},greyscale:function(){return this._applyModification(FU,arguments)},spin:function(){return this._applyModification(BU,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(KU,arguments)},complement:function(){return this._applyCombination(qU,arguments)},monochromatic:function(){return this._applyCombination(GU,arguments)},splitcomplement:function(){return this._applyCombination(HU,arguments)},triad:function(){return this._applyCombination(Ib,[3])},tetrad:function(){return this._applyCombination(Ib,[4])}};Ve.fromRatio=function(n,e){if(Zd(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=ac(n[i]));n=r}return Ve(n,e)};function PU(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=JU(n)),Zd(n)=="object"&&(us(n.r)&&us(n.g)&&us(n.b)?(e=OU(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):us(n.h)&&us(n.s)&&us(n.v)?(i=ac(n.s),s=ac(n.v),e=DU(n.h,i,s),a=!0,l="hsv"):us(n.h)&&us(n.s)&&us(n.l)&&(i=ac(n.s),o=ac(n.l),e=jU(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=pk(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function OU(n,e,r){return{r:Ct(n,255)*255,g:Ct(e,255)*255,b:Ct(r,255)*255}}function xb(n,e,r){n=Ct(n,255),e=Ct(e,255),r=Ct(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,l}}function jU(n,e,r){var i,s,o;n=Ct(n,360),e=Ct(e,100),r=Ct(r,100);function a(c,f,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(f-c)*6*h:h<1/2?f:h<2/3?c+(f-c)*(2/3-h)*6:c}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;i=a(u,l,n+1/3),s=a(u,l,n),o=a(u,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function bb(n,e,r){n=Ct(n,255),e=Ct(e,255),r=Ct(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,u=i-s;if(a=i===0?0:u/i,i==s)o=0;else{switch(i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,v:l}}function DU(n,e,r){n=Ct(n,360)*6,e=Ct(e,100),r=Ct(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),u=i%6,c=[r,a,o,o,l,r][u],f=[l,r,r,a,o,o][u],h=[o,o,l,r,r,a][u];return{r:c*255,g:f*255,b:h*255}}function Eb(n,e,r,i){var s=[ci(Math.round(n).toString(16)),ci(Math.round(e).toString(16)),ci(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function MU(n,e,r,i,s){var o=[ci(Math.round(n).toString(16)),ci(Math.round(e).toString(16)),ci(Math.round(r).toString(16)),ci(mk(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Tb(n,e,r,i){var s=[ci(mk(i)),ci(Math.round(n).toString(16)),ci(Math.round(e).toString(16)),ci(Math.round(r).toString(16))];return s.join("")}Ve.equals=function(n,e){return!n||!e?!1:Ve(n).toRgbString()==Ve(e).toRgbString()};Ve.random=function(){return Ve.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function LU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.s-=e/100,r.s=Qp(r.s),Ve(r)}function VU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.s+=e/100,r.s=Qp(r.s),Ve(r)}function FU(n){return Ve(n).desaturate(100)}function UU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.l+=e/100,r.l=Qp(r.l),Ve(r)}function zU(n,e){e=e===0?0:e||10;var r=Ve(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Ve(r)}function $U(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.l-=e/100,r.l=Qp(r.l),Ve(r)}function BU(n,e){var r=Ve(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Ve(r)}function qU(n){var e=Ve(n).toHsl();return e.h=(e.h+180)%360,Ve(e)}function Ib(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ve(n).toHsl(),i=[Ve(n)],s=360/e,o=1;o<e;o++)i.push(Ve({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function HU(n){var e=Ve(n).toHsl(),r=e.h;return[Ve(n),Ve({h:(r+72)%360,s:e.s,l:e.l}),Ve({h:(r+216)%360,s:e.s,l:e.l})]}function KU(n,e,r){e=e||6,r=r||30;var i=Ve(n).toHsl(),s=360/r,o=[Ve(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(Ve(i));return o}function GU(n,e){e=e||6;for(var r=Ve(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(Ve({h:i,s,v:o})),o=(o+l)%1;return a}Ve.mix=function(n,e,r){r=r===0?0:r||50;var i=Ve(n).toRgb(),s=Ve(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return Ve(a)};Ve.readability=function(n,e){var r=Ve(n),i=Ve(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Ve.isReadable=function(n,e,r){var i=Ve.readability(n,e),s,o;switch(o=!1,s=ZU(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};Ve.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,u;r=r||{},a=r.includeFallbackColors,l=r.level,u=r.size;for(var c=0;c<e.length;c++)o=Ve.readability(n,e[c]),o>s&&(s=o,i=Ve(e[c]));return Ve.isReadable(n,i,{level:l,size:u})||!a?i:(r.includeFallbackColors=!1,Ve.mostReadable(n,["#fff","#000"],r))};var Hy=Ve.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},WU=Ve.hexNames=QU(Hy);function QU(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function pk(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Ct(n,e){YU(n)&&(n="100%");var r=XU(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Qp(n){return Math.min(1,Math.max(0,n))}function dr(n){return parseInt(n,16)}function YU(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function XU(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ci(n){return n.length==1?"0"+n:""+n}function ac(n){return n<=1&&(n=n*100+"%"),n}function mk(n){return Math.round(parseFloat(n)*255).toString(16)}function Sb(n){return dr(n)/255}var ri=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function us(n){return!!ri.CSS_UNIT.exec(n)}function JU(n){n=n.replace(NU,"").replace(RU,"").toLowerCase();var e=!1;if(Hy[n])n=Hy[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=ri.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=ri.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ri.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=ri.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ri.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=ri.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ri.hex8.exec(n))?{r:dr(r[1]),g:dr(r[2]),b:dr(r[3]),a:Sb(r[4]),format:e?"name":"hex8"}:(r=ri.hex6.exec(n))?{r:dr(r[1]),g:dr(r[2]),b:dr(r[3]),format:e?"name":"hex"}:(r=ri.hex4.exec(n))?{r:dr(r[1]+""+r[1]),g:dr(r[2]+""+r[2]),b:dr(r[3]+""+r[3]),a:Sb(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=ri.hex3.exec(n))?{r:dr(r[1]+""+r[1]),g:dr(r[2]+""+r[2]),b:dr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function ZU(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function Ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ez(n){if(Array.isArray(n))return Ky(n)}function gk(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function tz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nz(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Nr(n,e){return n.get(gk(n,e))}function Cb(n,e,r){tz(n,e),e.set(n,r)}function kb(n,e,r){return n.set(gk(n,e),r),r}function rz(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,uz(i.key),i)}}function iz(n,e,r){return e&&rz(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function sz(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function az(n){return ez(n)||sz(n)||cz(n)||oz()}function lz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function uz(n){var e=lz(n,"string");return typeof e=="symbol"?e:e+""}function cz(n,e){if(n){if(typeof n=="string")return Ky(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ky(n,e):void 0}}var hz=123,fz=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},yk=function(e,r,i){return(e<<16)+(r<<8)+i},dz=function(e){var r=Ve(e).toRgb(),i=r.r,s=r.g,o=r.b;return yk(i,s,o)},Ab=function(e,r){return e*hz%Math.pow(2,r)},ra=new WeakMap,cs=new WeakMap,pz=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;nz(this,n),Cb(this,ra,void 0),Cb(this,cs,void 0),kb(cs,this,e),this.reset()}return iz(n,[{key:"reset",value:function(){kb(ra,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Nr(ra,this).length>=Math.pow(2,24-Nr(cs,this)))return null;var i=Nr(ra,this).length,s=Ab(i,Nr(cs,this)),o=fz(i+(s<<24-Nr(cs,this)));return Nr(ra,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?dz(r):yk.apply(void 0,az(r));if(!i)return null;var s=i&Math.pow(2,24-Nr(cs,this))-1,o=i>>24-Nr(cs,this)&Math.pow(2,Nr(cs,this))-1;return Ab(s,Nr(cs,this))!==o||s>=Nr(ra,this).length?null:Nr(ra,this)[s]}}])}(),Nh,At,vk,_k,la,Nb,wk,xk,bk,o_,Gy,Wy,ah={},Ek=[],mz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Yp=Array.isArray;function Ui(n,e){for(var r in e)n[r]=e[r];return n}function a_(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function gz(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Nh.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return Tc(n,a,i,s,null)}function Tc(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++vk,__i:-1,__u:0};return s==null&&At.vnode!=null&&At.vnode(o),o}function Xp(n){return n.children}function Xf(n,e){this.props=n,this.context=e}function au(n,e){if(e==null)return n.__?au(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?au(n):null}function Tk(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Tk(n)}}function Rb(n){(!n.__d&&(n.__d=!0)&&la.push(n)&&!ep.__r++||Nb!=At.debounceRendering)&&((Nb=At.debounceRendering)||wk)(ep)}function ep(){for(var n,e,r,i,s,o,a,l=1;la.length;)la.length>l&&la.sort(xk),n=la.shift(),l=la.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=Ui({},i)).__v=i.__v+1,At.vnode&&At.vnode(r),l_(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??au(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,Ck(o,r,a),i.__e=i.__=null,r.__e!=s&&Tk(r)));ep.__r=0}function Ik(n,e,r,i,s,o,a,l,u,c,f){var h,m,v,w,T,C,b,I=i&&i.__k||Ek,N=e.length;for(u=yz(r,e,I,u,N),h=0;h<N;h++)(v=r.__k[h])!=null&&(m=v.__i==-1?ah:I[v.__i]||ah,v.__i=h,C=l_(n,v,m,s,o,a,l,u,c,f),w=v.__e,v.ref&&m.ref!=v.ref&&(m.ref&&u_(m.ref,null,v),f.push(v.ref,v.__c||w,v)),T==null&&w!=null&&(T=w),(b=!!(4&v.__u))||m.__k===v.__k?u=Sk(v,u,n,b):typeof v.type=="function"&&C!==void 0?u=C:w&&(u=w.nextSibling),v.__u&=-7);return r.__e=T,u}function yz(n,e,r,i,s){var o,a,l,u,c,f=r.length,h=f,m=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=Tc(null,a,null,null,null):Yp(a)?a=n.__k[o]=Tc(Xp,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=Tc(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,u=o+m,a.__=n,a.__b=n.__b+1,l=null,(c=a.__i=vz(a,r,u,h))!=-1&&(h--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>f?m--:s<f&&m++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,a.__u|=4))):n.__k[o]=null;if(h)for(o=0;o<f;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=au(l)),Ak(l,l));return i}function Sk(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=Sk(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=au(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function vz(n,e,r,i){var s,o,a,l=n.key,u=n.type,c=e[r],f=c!=null&&(2&c.__u)==0;if(c===null&&l==null||f&&l==c.key&&u==c.type)return r;if(i>(f?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((c=e[a=s>=0?s--:o++])!=null&&!(2&c.__u)&&l==c.key&&u==c.type)return a}return-1}function Pb(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||mz.test(e)?r:r+"px"}function _f(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||Pb(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||Pb(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(bk,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=o_,n.addEventListener(e,o?Wy:Gy,o)):n.removeEventListener(e,o?Wy:Gy,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function Ob(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=o_++;else if(e.t<r.u)return;return r(At.event?At.event(e):e)}}}function l_(n,e,r,i,s,o,a,l,u,c){var f,h,m,v,w,T,C,b,I,N,O,L,U,A,R,D,M,F=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(f=At.__b)&&f(e);e:if(typeof F=="function")try{if(b=e.props,I="prototype"in F&&F.prototype.render,N=(f=F.contextType)&&i[f.__c],O=f?N?N.props.value:f.__:i,r.__c?C=(h=e.__c=r.__c).__=h.__E:(I?e.__c=h=new F(b,O):(e.__c=h=new Xf(b,O),h.constructor=F,h.render=wz),N&&N.sub(h),h.state||(h.state={}),h.__n=i,m=h.__d=!0,h.__h=[],h._sb=[]),I&&h.__s==null&&(h.__s=h.state),I&&F.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Ui({},h.__s)),Ui(h.__s,F.getDerivedStateFromProps(b,h.__s))),v=h.props,w=h.state,h.__v=e,m)I&&F.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),I&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(I&&F.getDerivedStateFromProps==null&&b!==v&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,O),e.__v==r.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,O)===!1){for(e.__v!=r.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function($){$&&($.__=e)}),L=0;L<h._sb.length;L++)h.__h.push(h._sb[L]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,O),I&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(v,w,T)})}if(h.context=O,h.props=b,h.__P=n,h.__e=!1,U=At.__r,A=0,I){for(h.state=h.__s,h.__d=!1,U&&U(e),f=h.render(h.props,h.state,h.context),R=0;R<h._sb.length;R++)h.__h.push(h._sb[R]);h._sb=[]}else do h.__d=!1,U&&U(e),f=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++A<25);h.state=h.__s,h.getChildContext!=null&&(i=Ui(Ui({},i),h.getChildContext())),I&&!m&&h.getSnapshotBeforeUpdate!=null&&(T=h.getSnapshotBeforeUpdate(v,w)),D=f,f!=null&&f.type===Xp&&f.key==null&&(D=kk(f.props.children)),l=Ik(n,Yp(D)?D:[D],e,r,i,s,o,a,l,u,c),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),C&&(h.__E=h.__=null)}catch($){if(e.__v=null,u||o!=null)if($.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(M=o.length;M--;)a_(o[M]);Qy(e)}else e.__e=r.__e,e.__k=r.__k,$.then||Qy(e);At.__e($,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=_z(r.__e,e,r,i,s,o,a,u,c);return(f=At.diffed)&&f(e),128&e.__u?void 0:l}function Qy(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Qy)}function Ck(n,e,r){for(var i=0;i<r.length;i++)u_(r[i],r[++i],r[++i]);At.__c&&At.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){At.__e(o,s.__v)}})}function kk(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Yp(n)?n.map(kk):Ui({},n)}function _z(n,e,r,i,s,o,a,l,u){var c,f,h,m,v,w,T,C=r.props||ah,b=e.props,I=e.type;if(I=="svg"?s="http://www.w3.org/2000/svg":I=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((v=o[c])&&"setAttribute"in v==!!I&&(I?v.localName==I:v.nodeType==3)){n=v,o[c]=null;break}}if(n==null){if(I==null)return document.createTextNode(b);n=document.createElementNS(s,I,b.is&&b),l&&(At.__m&&At.__m(e,o),l=!1),o=null}if(I==null)C===b||l&&n.data==b||(n.data=b);else{if(o=o&&Nh.call(n.childNodes),!l&&o!=null)for(C={},c=0;c<n.attributes.length;c++)C[(v=n.attributes[c]).name]=v.value;for(c in C)if(v=C[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=v;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;_f(n,c,null,v,s)}}for(c in b)v=b[c],c=="children"?m=v:c=="dangerouslySetInnerHTML"?f=v:c=="value"?w=v:c=="checked"?T=v:l&&typeof v!="function"||C[c]===v||_f(n,c,v,C[c],s);if(f)l||h&&(f.__html==h.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),e.__k=[];else if(h&&(n.innerHTML=""),Ik(e.type=="template"?n.content:n,Yp(m)?m:[m],e,r,i,I=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&au(r,0),l,u),o!=null)for(c=o.length;c--;)a_(o[c]);l||(c="value",I=="progress"&&w==null?n.removeAttribute("value"):w!=null&&(w!==n[c]||I=="progress"&&!w||I=="option"&&w!=C[c])&&_f(n,c,w,C[c],s),c="checked",T!=null&&T!=n[c]&&_f(n,c,T,C[c],s))}return n}function u_(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){At.__e(s,r)}}function Ak(n,e,r){var i,s;if(At.unmount&&At.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||u_(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){At.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&Ak(i[s],e,r||typeof n.type!="function");r||a_(n.__e),n.__c=n.__=n.__e=void 0}function wz(n,e,r){return this.constructor(n,r)}function xz(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),At.__&&At.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],l_(e,n=e.__k=gz(Xp,null,[n]),s||ah,ah,e.namespaceURI,s?null:e.firstChild?Nh.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),Ck(o,n,a)}function Nk(n,e,r){var i,s,o,a,l=Ui({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Nh.call(arguments,2):r),Tc(n.type,l,i||n.key,s||n.ref,null)}Nh=Ek.slice,At={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},vk=0,_k=function(n){return n!=null&&n.constructor===void 0},Xf.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ui({},this.state),typeof n=="function"&&(n=n(Ui({},r),this.props)),n&&Ui(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),Rb(this))},Xf.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Rb(this))},Xf.prototype.render=Xp,la=[],wk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xk=function(n,e){return n.__v.__b-e.__v.__b},ep.__r=0,bk=/(PointerCapture)$|Capture$/i,o_=0,Gy=Ob(!1),Wy=Ob(!0);function jb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function bz(n){if(Array.isArray(n))return n}function Ez(n,e,r){return(e=Az(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Tz(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function Iz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Db(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function Sz(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Db(Object(r),!0).forEach(function(i){Ez(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Db(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Cz(n,e){return bz(n)||Tz(n,e)||Nz(n,e)||Iz()}function kz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Az(n){var e=kz(n,"string");return typeof e=="symbol"?e:e+""}function tp(n){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(n)}function Nz(n,e){if(n){if(typeof n=="string")return jb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jb(n,e):void 0}}var Yy=function(e){if(tp(e)!=="object")return e;var r=Nk(e);if(r.props){var i;r.props=Sz({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(Yy):Yy(r.props.children))}return r},Rz=function(e){return _k(Nk(e))},Pz=function(e,r){delete r.__k,xz(Yy(e),r)};function Oz(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var jz=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Oz(jz);var Dz=s_({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&tp(e)==="object"&&!!e.node&&typeof e.node=="function",l=Dr(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(c){var f=Cz(c,2),h=f[0],m=f[1];return r.tooltipEl.style(h,m)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(c){r.mouseInside=!0;var f=Vi(c),h=l.node(),m=h.offsetWidth,v=h.offsetHeight,w=[r.offsetX===null||r.offsetX===void 0?"-".concat(f[0]/m*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?v>130&&v-f[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",f[0]+"px").style("top",f[1]+"px").style("transform","translate(".concat(w.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):Rz(e.content)?(e.tooltipEl.text(""),Pz(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function Mz(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,u,c=0,f=0,h=0;for(a=0;a<l;++a)u=i[a],c+=u.x||0,f+=u.y||0,h+=u.z||0;for(c=(c/l-n)*s,f=(f/l-e)*s,h=(h/l-r)*s,a=0;a<l;++a)u=i[a],c&&(u.x-=c),f&&(u.y-=f),h&&(u.z-=h)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function Lz(n){const e=+this._x.call(null,n);return Rk(this.cover(e),e,n)}function Rk(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,u,c,f,h,m;if(!s)return n._root=o,n;for(;s.length;)if((f=e>=(u=(a+l)/2))?a=u:l=u,i=s,!(s=s[h=+f]))return i[h]=o,n;if(c=+n._x.call(null,s.data),e===c)return o.next=s,i?i[h]=o:n._root=o,n;do i=i?i[h]=new Array(2):n._root=new Array(2),(f=e>=(u=(a+l)/2))?a=u:l=u;while((h=+f)==(m=+(c>=u)));return i[m]=s,i[h]=o,n}function Vz(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)Rk(this,r[o],n[o]);return this}function Fz(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function Uz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function zz(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ts(n,e,r){this.node=n,this.x0=e,this.x1=r}function $z(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],u=this._root,c,f;for(u&&l.push(new Ts(u,i,a)),e==null?e=1/0:(i=n-e,a=n+e);c=l.pop();)if(!(!(u=c.node)||(s=c.x0)>a||(o=c.x1)<i))if(u.length){var h=(s+o)/2;l.push(new Ts(u[1],h,o),new Ts(u[0],s,h)),(f=+(n>=h))&&(c=l[l.length-1],l[l.length-1]=l[l.length-1-f],l[l.length-1-f]=c)}else{var m=Math.abs(n-+this._x.call(null,u.data));m<e&&(e=m,i=n-m,a=n+m,r=u.data)}return r}function Bz(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,u,c,f,h,m;if(!r)return this;if(r.length)for(;;){if((f=u>=(c=(a+l)/2))?a=c:l=c,e=r,!(r=r[h=+f]))return this;if(!r.length)break;e[h+1&1]&&(i=e,m=h)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[h]=o:delete e[h],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=o,this)}function qz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Hz(){return this._root}function Kz(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Gz(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new Ts(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new Ts(s,l,a)),(s=i[0])&&e.push(new Ts(s,o,l))}return this}function Wz(n){var e=[],r=[],i;for(this._root&&e.push(new Ts(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,u=(a+l)/2;(o=s[0])&&e.push(new Ts(o,a,u)),(o=s[1])&&e.push(new Ts(o,u,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function Qz(n){return n[0]}function Yz(n){return arguments.length?(this._x=n,this):this._x}function Pk(n,e){var r=new c_(e??Qz,NaN,NaN);return n==null?r:r.addAll(n)}function c_(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function Mb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var sr=Pk.prototype=c_.prototype;sr.copy=function(){var n=new c_(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Mb(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=Mb(i));return n};sr.add=Lz;sr.addAll=Vz;sr.cover=Fz;sr.data=Uz;sr.extent=zz;sr.find=$z;sr.remove=Bz;sr.removeAll=qz;sr.root=Hz;sr.size=Kz;sr.visit=Gz;sr.visitAfter=Wz;sr.x=Yz;function Xz(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return Ok(this.cover(e,r),e,r,n)}function Ok(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._x1,f=n._y1,h,m,v,w,T,C,b,I;if(!o)return n._root=a,n;for(;o.length;)if((T=e>=(h=(l+c)/2))?l=h:c=h,(C=r>=(m=(u+f)/2))?u=m:f=m,s=o,!(o=o[b=C<<1|T]))return s[b]=a,n;if(v=+n._x.call(null,o.data),w=+n._y.call(null,o.data),e===v&&r===w)return a.next=o,s?s[b]=a:n._root=a,n;do s=s?s[b]=new Array(4):n._root=new Array(4),(T=e>=(h=(l+c)/2))?l=h:c=h,(C=r>=(m=(u+f)/2))?u=m:f=m;while((b=C<<1|T)===(I=(w>=m)<<1|v>=h));return s[I]=o,s[b]=a,n}function Jz(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),u=1/0,c=1/0,f=-1/0,h=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<u&&(u=s),s>f&&(f=s),o<c&&(c=o),o>h&&(h=o));if(u>f||c>h)return this;for(this.cover(u,c).cover(f,h),r=0;r<i;++r)Ok(this,a[r],l[r],n[r]);return this}function Zz(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,u,c;r>n||n>=s||i>e||e>=o;)switch(c=(e<i)<<1|n<r,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function e$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function t$(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Bn(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function n$(n,e,r){var i,s=this._x0,o=this._y0,a,l,u,c,f=this._x1,h=this._y1,m=[],v=this._root,w,T;for(v&&m.push(new Bn(v,s,o,f,h)),r==null?r=1/0:(s=n-r,o=e-r,f=n+r,h=e+r,r*=r);w=m.pop();)if(!(!(v=w.node)||(a=w.x0)>f||(l=w.y0)>h||(u=w.x1)<s||(c=w.y1)<o))if(v.length){var C=(a+u)/2,b=(l+c)/2;m.push(new Bn(v[3],C,b,u,c),new Bn(v[2],a,b,C,c),new Bn(v[1],C,l,u,b),new Bn(v[0],a,l,C,b)),(T=(e>=b)<<1|n>=C)&&(w=m[m.length-1],m[m.length-1]=m[m.length-1-T],m[m.length-1-T]=w)}else{var I=n-+this._x.call(null,v.data),N=e-+this._y.call(null,v.data),O=I*I+N*N;if(O<r){var L=Math.sqrt(r=O);s=n-L,o=e-L,f=n+L,h=e+L,i=v.data}}return i}function r$(n){if(isNaN(f=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,c=this._y1,f,h,m,v,w,T,C,b;if(!r)return this;if(r.length)for(;;){if((w=f>=(m=(a+u)/2))?a=m:u=m,(T=h>=(v=(l+c)/2))?l=v:c=v,e=r,!(r=r[C=T<<1|w]))return this;if(!r.length)break;(e[C+1&3]||e[C+2&3]||e[C+3&3])&&(i=e,b=C)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[C]=o:delete e[C],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[b]=r:this._root=r),this):(this._root=o,this)}function i$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function s$(){return this._root}function o$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function a$(n){var e=[],r,i=this._root,s,o,a,l,u;for(i&&e.push(new Bn(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,u=r.y1)&&i.length){var c=(o+l)/2,f=(a+u)/2;(s=i[3])&&e.push(new Bn(s,c,f,l,u)),(s=i[2])&&e.push(new Bn(s,o,f,c,u)),(s=i[1])&&e.push(new Bn(s,c,a,l,f)),(s=i[0])&&e.push(new Bn(s,o,a,c,f))}return this}function l$(n){var e=[],r=[],i;for(this._root&&e.push(new Bn(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,c=i.y1,f=(a+u)/2,h=(l+c)/2;(o=s[0])&&e.push(new Bn(o,a,l,f,h)),(o=s[1])&&e.push(new Bn(o,f,l,u,h)),(o=s[2])&&e.push(new Bn(o,a,h,f,c)),(o=s[3])&&e.push(new Bn(o,f,h,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function u$(n){return n[0]}function c$(n){return arguments.length?(this._x=n,this):this._x}function h$(n){return n[1]}function f$(n){return arguments.length?(this._y=n,this):this._y}function jk(n,e,r){var i=new h_(e??u$,r??h$,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function h_(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function Lb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Wn=jk.prototype=h_.prototype;Wn.copy=function(){var n=new h_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Lb(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=Lb(i));return n};Wn.add=Xz;Wn.addAll=Jz;Wn.cover=Zz;Wn.data=e$;Wn.extent=t$;Wn.find=n$;Wn.remove=r$;Wn.removeAll=i$;Wn.root=s$;Wn.size=o$;Wn.visit=a$;Wn.visitAfter=l$;Wn.x=c$;Wn.y=f$;function d$(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return Dk(this.cover(e,r,i),e,r,i,n)}function Dk(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},u=n._x0,c=n._y0,f=n._z0,h=n._x1,m=n._y1,v=n._z1,w,T,C,b,I,N,O,L,U,A,R;if(!a)return n._root=l,n;for(;a.length;)if((O=e>=(w=(u+h)/2))?u=w:h=w,(L=r>=(T=(c+m)/2))?c=T:m=T,(U=i>=(C=(f+v)/2))?f=C:v=C,o=a,!(a=a[A=U<<2|L<<1|O]))return o[A]=l,n;if(b=+n._x.call(null,a.data),I=+n._y.call(null,a.data),N=+n._z.call(null,a.data),e===b&&r===I&&i===N)return l.next=a,o?o[A]=l:n._root=l,n;do o=o?o[A]=new Array(8):n._root=new Array(8),(O=e>=(w=(u+h)/2))?u=w:h=w,(L=r>=(T=(c+m)/2))?c=T:m=T,(U=i>=(C=(f+v)/2))?f=C:v=C;while((A=U<<2|L<<1|O)===(R=(N>=C)<<2|(I>=T)<<1|b>=w));return o[R]=a,o[A]=l,n}function p$(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,f=-1/0;for(let h=0,m,v,w,T;h<e;++h)isNaN(v=+this._x.call(null,m=n[h]))||isNaN(w=+this._y.call(null,m))||isNaN(T=+this._z.call(null,m))||(r[h]=v,i[h]=w,s[h]=T,v<o&&(o=v),v>u&&(u=v),w<a&&(a=w),w>c&&(c=w),T<l&&(l=T),T>f&&(f=T));if(o>u||a>c||l>f)return this;this.cover(o,a,l).cover(u,c,f);for(let h=0;h<e;++h)Dk(this,r[h],i[h],s[h],n[h]);return this}function m$(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,u=(o=Math.floor(r))+1;else{for(var c=a-i||1,f=this._root,h,m;i>n||n>=a||s>e||e>=l||o>r||r>=u;)switch(m=(r<o)<<2|(e<s)<<1|n<i,h=new Array(8),h[m]=f,f=h,c*=2,m){case 0:a=i+c,l=s+c,u=o+c;break;case 1:i=a-c,l=s+c,u=o+c;break;case 2:a=i+c,s=l-c,u=o+c;break;case 3:i=a-c,s=l-c,u=o+c;break;case 4:a=i+c,l=s+c,o=u-c;break;case 5:i=a-c,l=s+c,o=u-c;break;case 6:a=i+c,s=l-c,o=u-c;break;case 7:i=a-c,s=l-c,o=u-c;break}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this}function g$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function y$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function wt(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function v$(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,u,c,f,h,m,v,w=this._x1,T=this._y1,C=this._z1,b=[],I=this._root,N,O;for(I&&b.push(new wt(I,o,a,l,w,T,C)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,w=n+i,T=e+i,C=r+i,i*=i);N=b.pop();)if(!(!(I=N.node)||(u=N.x0)>w||(c=N.y0)>T||(f=N.z0)>C||(h=N.x1)<o||(m=N.y1)<a||(v=N.z1)<l))if(I.length){var L=(u+h)/2,U=(c+m)/2,A=(f+v)/2;b.push(new wt(I[7],L,U,A,h,m,v),new wt(I[6],u,U,A,L,m,v),new wt(I[5],L,c,A,h,U,v),new wt(I[4],u,c,A,L,U,v),new wt(I[3],L,U,f,h,m,A),new wt(I[2],u,U,f,L,m,A),new wt(I[1],L,c,f,h,U,A),new wt(I[0],u,c,f,L,U,A)),(O=(r>=A)<<2|(e>=U)<<1|n>=L)&&(N=b[b.length-1],b[b.length-1]=b[b.length-1-O],b[b.length-1-O]=N)}else{var R=n-+this._x.call(null,I.data),D=e-+this._y.call(null,I.data),M=r-+this._z.call(null,I.data),F=R*R+D*D+M*M;if(F<i){var $=Math.sqrt(i=F);o=n-$,a=e-$,l=r-$,w=n+$,T=e+$,C=r+$,s=I.data}}return s}const _$=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function w$(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,u=n+i,c=e+i,f=r+i;return this.visit((h,m,v,w,T,C,b)=>{if(!h.length)do{const I=h.data;_$(n,e,r,this._x(I),this._y(I),this._z(I))<=i&&s.push(I)}while(h=h.next);return m>u||v>c||w>f||T<o||C<a||b<l}),s}function x$(n){if(isNaN(m=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n))||isNaN(w=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._z0,c=this._x1,f=this._y1,h=this._z1,m,v,w,T,C,b,I,N,O,L,U;if(!r)return this;if(r.length)for(;;){if((I=m>=(T=(a+c)/2))?a=T:c=T,(N=v>=(C=(l+f)/2))?l=C:f=C,(O=w>=(b=(u+h)/2))?u=b:h=b,e=r,!(r=r[L=O<<2|N<<1|I]))return this;if(!r.length)break;(e[L+1&7]||e[L+2&7]||e[L+3&7]||e[L+4&7]||e[L+5&7]||e[L+6&7]||e[L+7&7])&&(i=e,U=L)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[L]=o:delete e[L],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[U]=r:this._root=r),this):(this._root=o,this)}function b$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function E$(){return this._root}function T$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function I$(n){var e=[],r,i=this._root,s,o,a,l,u,c,f;for(i&&e.push(new wt(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,f=r.z1)&&i.length){var h=(o+u)/2,m=(a+c)/2,v=(l+f)/2;(s=i[7])&&e.push(new wt(s,h,m,v,u,c,f)),(s=i[6])&&e.push(new wt(s,o,m,v,h,c,f)),(s=i[5])&&e.push(new wt(s,h,a,v,u,m,f)),(s=i[4])&&e.push(new wt(s,o,a,v,h,m,f)),(s=i[3])&&e.push(new wt(s,h,m,l,u,c,v)),(s=i[2])&&e.push(new wt(s,o,m,l,h,c,v)),(s=i[1])&&e.push(new wt(s,h,a,l,u,m,v)),(s=i[0])&&e.push(new wt(s,o,a,l,h,m,v))}return this}function S$(n){var e=[],r=[],i;for(this._root&&e.push(new wt(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.z0,c=i.x1,f=i.y1,h=i.z1,m=(a+c)/2,v=(l+f)/2,w=(u+h)/2;(o=s[0])&&e.push(new wt(o,a,l,u,m,v,w)),(o=s[1])&&e.push(new wt(o,m,l,u,c,v,w)),(o=s[2])&&e.push(new wt(o,a,v,u,m,f,w)),(o=s[3])&&e.push(new wt(o,m,v,u,c,f,w)),(o=s[4])&&e.push(new wt(o,a,l,w,m,v,h)),(o=s[5])&&e.push(new wt(o,m,l,w,c,v,h)),(o=s[6])&&e.push(new wt(o,a,v,w,m,f,h)),(o=s[7])&&e.push(new wt(o,m,v,w,c,f,h))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function C$(n){return n[0]}function k$(n){return arguments.length?(this._x=n,this):this._x}function A$(n){return n[1]}function N$(n){return arguments.length?(this._y=n,this):this._y}function R$(n){return n[2]}function P$(n){return arguments.length?(this._z=n,this):this._z}function Mk(n,e,r,i){var s=new f_(e??C$,r??A$,i??R$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function f_(n,e,r,i,s,o,a,l,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function Vb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var bn=Mk.prototype=f_.prototype;bn.copy=function(){var n=new f_(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Vb(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=Vb(i));return n};bn.add=d$;bn.addAll=p$;bn.cover=m$;bn.data=g$;bn.extent=y$;bn.find=v$;bn.findAllWithinRadius=w$;bn.remove=x$;bn.removeAll=b$;bn.root=E$;bn.size=T$;bn.visit=I$;bn.visitAfter=S$;bn.x=k$;bn.y=N$;bn.z=P$;function xs(n){return function(){return n}}function ps(n){return(n()-.5)*1e-6}function O$(n){return n.index}function Fb(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function j$(n){var e=O$,r=m,i,s=xs(30),o,a,l,u,c,f,h=1;n==null&&(n=[]);function m(b){return 1/Math.min(u[b.source.index],u[b.target.index])}function v(b){for(var I=0,N=n.length;I<h;++I)for(var O=0,L,U,A,R=0,D=0,M=0,F,$;O<N;++O)L=n[O],U=L.source,A=L.target,R=A.x+A.vx-U.x-U.vx||ps(f),l>1&&(D=A.y+A.vy-U.y-U.vy||ps(f)),l>2&&(M=A.z+A.vz-U.z-U.vz||ps(f)),F=Math.sqrt(R*R+D*D+M*M),F=(F-o[O])/F*b*i[O],R*=F,D*=F,M*=F,A.vx-=R*($=c[O]),l>1&&(A.vy-=D*$),l>2&&(A.vz-=M*$),U.vx+=R*($=1-$),l>1&&(U.vy+=D*$),l>2&&(U.vz+=M*$)}function w(){if(a){var b,I=a.length,N=n.length,O=new Map(a.map((U,A)=>[e(U,A,a),U])),L;for(b=0,u=new Array(I);b<N;++b)L=n[b],L.index=b,typeof L.source!="object"&&(L.source=Fb(O,L.source)),typeof L.target!="object"&&(L.target=Fb(O,L.target)),u[L.source.index]=(u[L.source.index]||0)+1,u[L.target.index]=(u[L.target.index]||0)+1;for(b=0,c=new Array(N);b<N;++b)L=n[b],c[b]=u[L.source.index]/(u[L.source.index]+u[L.target.index]);i=new Array(N),T(),o=new Array(N),C()}}function T(){if(a)for(var b=0,I=n.length;b<I;++b)i[b]=+r(n[b],b,n)}function C(){if(a)for(var b=0,I=n.length;b<I;++b)o[b]=+s(n[b],b,n)}return v.initialize=function(b,...I){a=b,f=I.find(N=>typeof N=="function")||Math.random,l=I.find(N=>[1,2,3].includes(N))||2,w()},v.links=function(b){return arguments.length?(n=b,w(),v):n},v.id=function(b){return arguments.length?(e=b,v):e},v.iterations=function(b){return arguments.length?(h=+b,v):h},v.strength=function(b){return arguments.length?(r=typeof b=="function"?b:xs(+b),T(),v):r},v.distance=function(b){return arguments.length?(s=typeof b=="function"?b:xs(+b),C(),v):s},v}const D$=1664525,M$=1013904223,Ub=4294967296;function L$(){let n=1;return()=>(n=(D$*n+M$)%Ub)/Ub}var zb=3;function ig(n){return n.x}function $b(n){return n.y}function V$(n){return n.z}var F$=10,U$=Math.PI*(3-Math.sqrt(5)),z$=Math.PI*20/(9+Math.sqrt(221));function $$(n,e){e=e||2;var r=Math.min(zb,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,u=.6,c=new Map,f=t_(v),h=kh("tick","end"),m=L$();n==null&&(n=[]);function v(){w(),h.call("tick",i),s<o&&(f.stop(),h.call("end",i))}function w(b){var I,N=n.length,O;b===void 0&&(b=1);for(var L=0;L<b;++L)for(s+=(l-s)*a,c.forEach(function(U){U(s)}),I=0;I<N;++I)O=n[I],O.fx==null?O.x+=O.vx*=u:(O.x=O.fx,O.vx=0),r>1&&(O.fy==null?O.y+=O.vy*=u:(O.y=O.fy,O.vy=0)),r>2&&(O.fz==null?O.z+=O.vz*=u:(O.z=O.fz,O.vz=0));return i}function T(){for(var b=0,I=n.length,N;b<I;++b){if(N=n[b],N.index=b,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),N.fz!=null&&(N.z=N.fz),isNaN(N.x)||r>1&&isNaN(N.y)||r>2&&isNaN(N.z)){var O=F$*(r>2?Math.cbrt(.5+b):r>1?Math.sqrt(.5+b):b),L=b*U$,U=b*z$;r===1?N.x=O:r===2?(N.x=O*Math.cos(L),N.y=O*Math.sin(L)):(N.x=O*Math.sin(L)*Math.cos(U),N.y=O*Math.cos(L),N.z=O*Math.sin(L)*Math.sin(U))}(isNaN(N.vx)||r>1&&isNaN(N.vy)||r>2&&isNaN(N.vz))&&(N.vx=0,r>1&&(N.vy=0),r>2&&(N.vz=0))}}function C(b){return b.initialize&&b.initialize(n,m,r),b}return T(),i={tick:w,restart:function(){return f.restart(v),i},stop:function(){return f.stop(),i},numDimensions:function(b){return arguments.length?(r=Math.min(zb,Math.max(1,Math.round(b))),c.forEach(C),i):r},nodes:function(b){return arguments.length?(n=b,T(),c.forEach(C),i):n},alpha:function(b){return arguments.length?(s=+b,i):s},alphaMin:function(b){return arguments.length?(o=+b,i):o},alphaDecay:function(b){return arguments.length?(a=+b,i):+a},alphaTarget:function(b){return arguments.length?(l=+b,i):l},velocityDecay:function(b){return arguments.length?(u=1-b,i):1-u},randomSource:function(b){return arguments.length?(m=b,c.forEach(C),i):m},force:function(b,I){return arguments.length>1?(I==null?c.delete(b):c.set(b,C(I)),i):c.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),I=b.shift()||0,N=(r>1?b.shift():null)||0,O=(r>2?b.shift():null)||0,L=b.shift()||1/0,U=0,A=n.length,R,D,M,F,$,j;for(L*=L,U=0;U<A;++U)$=n[U],R=I-$.x,D=N-($.y||0),M=O-($.z||0),F=R*R+D*D+M*M,F<L&&(j=$,L=F);return j},on:function(b,I){return arguments.length>1?(h.on(b,I),i):h.on(b)}}}function B$(){var n,e,r,i,s,o=xs(-30),a,l=1,u=1/0,c=.81;function f(w){var T,C=n.length,b=(e===1?Pk(n,ig):e===2?jk(n,ig,$b):e===3?Mk(n,ig,$b,V$):null).visitAfter(m);for(s=w,T=0;T<C;++T)r=n[T],b.visit(v)}function h(){if(n){var w,T=n.length,C;for(a=new Array(T),w=0;w<T;++w)C=n[w],a[C.index]=+o(C,w,n)}}function m(w){var T=0,C,b,I=0,N,O,L,U,A=w.length;if(A){for(N=O=L=U=0;U<A;++U)(C=w[U])&&(b=Math.abs(C.value))&&(T+=C.value,I+=b,N+=b*(C.x||0),O+=b*(C.y||0),L+=b*(C.z||0));T*=Math.sqrt(4/A),w.x=N/I,e>1&&(w.y=O/I),e>2&&(w.z=L/I)}else{C=w,C.x=C.data.x,e>1&&(C.y=C.data.y),e>2&&(C.z=C.data.z);do T+=a[C.data.index];while(C=C.next)}w.value=T}function v(w,T,C,b,I){if(!w.value)return!0;var N=[C,b,I][e-1],O=w.x-r.x,L=e>1?w.y-r.y:0,U=e>2?w.z-r.z:0,A=N-T,R=O*O+L*L+U*U;if(A*A/c<R)return R<u&&(O===0&&(O=ps(i),R+=O*O),e>1&&L===0&&(L=ps(i),R+=L*L),e>2&&U===0&&(U=ps(i),R+=U*U),R<l&&(R=Math.sqrt(l*R)),r.vx+=O*w.value*s/R,e>1&&(r.vy+=L*w.value*s/R),e>2&&(r.vz+=U*w.value*s/R)),!0;if(w.length||R>=u)return;(w.data!==r||w.next)&&(O===0&&(O=ps(i),R+=O*O),e>1&&L===0&&(L=ps(i),R+=L*L),e>2&&U===0&&(U=ps(i),R+=U*U),R<l&&(R=Math.sqrt(l*R)));do w.data!==r&&(A=a[w.data.index]*s/R,r.vx+=O*A,e>1&&(r.vy+=L*A),e>2&&(r.vz+=U*A));while(w=w.next)}return f.initialize=function(w,...T){n=w,i=T.find(C=>typeof C=="function")||Math.random,e=T.find(C=>[1,2,3].includes(C))||2,h()},f.strength=function(w){return arguments.length?(o=typeof w=="function"?w:xs(+w),h(),f):o},f.distanceMin=function(w){return arguments.length?(l=w*w,f):Math.sqrt(l)},f.distanceMax=function(w){return arguments.length?(u=w*w,f):Math.sqrt(u)},f.theta=function(w){return arguments.length?(c=w*w,f):Math.sqrt(c)},f}function q$(n,e,r,i){var s,o,a=xs(.1),l,u;typeof n!="function"&&(n=xs(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function c(h){for(var m=0,v=s.length;m<v;++m){var w=s[m],T=w.x-e||1e-6,C=(w.y||0)-r||1e-6,b=(w.z||0)-i||1e-6,I=Math.sqrt(T*T+C*C+b*b),N=(u[m]-I)*l[m]*h/I;w.vx+=T*N,o>1&&(w.vy+=C*N),o>2&&(w.vz+=b*N)}}function f(){if(s){var h,m=s.length;for(l=new Array(m),u=new Array(m),h=0;h<m;++h)u[h]=+n(s[h],h,s),l[h]=isNaN(u[h])?0:+a(s[h],h,s)}}return c.initialize=function(h,...m){s=h,o=m.find(v=>[1,2,3].includes(v))||2,f()},c.strength=function(h){return arguments.length?(a=typeof h=="function"?h:xs(+h),f(),c):a},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:xs(+h),f(),c):n},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(r=+h,c):r},c.z=function(h){return arguments.length?(i=+h,c):i},c}const{abs:Hu,cos:hs,sin:ul,acos:H$,atan2:Ku,sqrt:Qs,pow:Rr}=Math;function Gu(n){return n<0?-Rr(-n,1/3):Rr(n,1/3)}const Lk=Math.PI,wf=2*Lk,Ys=Lk/2,K$=1e-6,sg=Number.MAX_SAFE_INTEGER||9007199254740991,og=Number.MIN_SAFE_INTEGER||-9007199254740991,G$={x:0,y:0,z:0},_e={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Qs(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,u=n*n,c,f,h,m=0;i===2?(o=[o[0],o[1],o[2],G$],c=l,f=s*n*2,h=u):i===3&&(c=l*s,f=l*n*3,h=s*u*3,m=n*u);const v={x:c*o[0].x+f*o[1].x+h*o[2].x+m*o[3].x,y:c*o[0].y+f*o[1].y+h*o[2].y+m*o[3].y,t:n};return r&&(v.z=c*o[0].z+f*o[1].z+h*o[2].z+m*o[3].z),v}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],u=o[1],c=o[2],f=o[3],h;if(l*=s,u*=n,a.length===2)return h=l+u,{x:(l*a[0].x+u*a[1].x)/h,y:(l*a[0].y+u*a[1].y)/h,z:i?(l*a[0].z+u*a[1].z)/h:!1,t:n};if(l*=s,u*=2*s,c*=n*n,a.length===3)return h=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z)/h:!1,t:n};if(l*=s,u*=1.5*s,c*=3*s,f*=n*n*n,a.length===4)return h=l+u+c+f,{x:(l*a[0].x+u*a[1].x+c*a[2].x+f*a[3].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y+f*a[3].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z+f*a[3].z)/h:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,u;l<o;l++)u={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(u.z=o*(i[l+1].z-i[l].z)),a.push(u);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||_e.approximately(n,e)||_e.approximately(n,r)},approximately:function(n,e,r){return Hu(n-e)<=(r||K$)},length:function(n){const r=_e.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*_e.Tvalues[s]+.5,i+=_e.Cvalues[s]*_e.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,u=l/o;return i+a*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(_e.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,u=i*o+s*a;return Ku(l,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return Qs(r*r+i*i)},closest:function(n,e){let r=Rr(2,63),i,s;return n.forEach(function(o,a){s=_e.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Rr(n,e)+Rr(1-n,e),i=r-1;return Hu(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Rr(1-n,e),i=Rr(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const u=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),c=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),f=(n-r)*(o-l)-(e-i)*(s-a);return f==0?!1:{x:u/f,y:c/f}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,u=r.x,c=r.y,f=i.x,h=i.y;return _e.lli8(s,o,a,l,u,c,f,h)},lli:function(n,e){return _e.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new Tt(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=sg,r=sg,i=og,s=og;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!_e.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(u){u.virtual||l.forEach(function(c){if(c.virtual)return;const f=u.intersects(c,s);f.length>0&&(f.c1=u,f.c2=c,f.s1=n,f.s2=r,o.push(f))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=_e.makeline(e.points[i-1],n.points[0]),a=_e.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:_e.findbbox([o,n,e,a])};return l.intersections=function(u){return _e.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=sg,s=og,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-Ku(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*hs(s)-(a.y-i)*ul(s),y:(a.x-r)*ul(s)+(a.y-i)*hs(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=_e.align(n,e),s=function(A){return 0<=A&&A<=1};if(r===2){const A=i[0].y,R=i[1].y,D=i[2].y,M=A-2*R+D;if(M!==0){const F=-Qs(R*R-A*D),$=-A+R,j=-(F+$)/M,q=-(-F+$)/M;return[j,q].filter(s)}else if(R!==D&&M===0)return[(2*R-D)/(2*R-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,u=i[3].y;let c=-o+3*a-3*l+u,f=3*o-6*a+3*l,h=-3*o+3*a,m=o;if(_e.approximately(c,0)){if(_e.approximately(f,0))return _e.approximately(h,0)?[]:[-m/h].filter(s);const A=Qs(h*h-4*f*m),R=2*f;return[(A-h)/R,(-h-A)/R].filter(s)}f/=c,h/=c,m/=c;const v=(3*h-f*f)/3,w=v/3,T=(2*f*f*f-9*f*h+27*m)/27,C=T/2,b=C*C+w*w*w;let I,N,O,L,U;if(b<0){const A=-v/3,R=A*A*A,D=Qs(R),M=-T/(2*D),F=M<-1?-1:M>1?1:M,$=H$(F),j=Gu(D),q=2*j;return O=q*hs($/3)-f/3,L=q*hs(($+wf)/3)-f/3,U=q*hs(($+2*wf)/3)-f/3,[O,L,U].filter(s)}else{if(b===0)return I=C<0?Gu(-C):-Gu(C),O=2*I-f/3,L=-I-f/3,[O,L].filter(s);{const A=Qs(b);return I=Gu(-C+A),N=Gu(C+A),[I-N-f/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-Qs(r*r-e*i),a=-e+r,l=-(o+a)/s,u=-(-o+a)/s;return[l,u]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,u,c=0,f=0;const h=_e.compute(n,e),m=_e.compute(n,r),v=h.x*h.x+h.y*h.y;if(i?(o=Qs(Rr(h.y*m.z-m.y*h.z,2)+Rr(h.z*m.x-m.z*h.x,2)+Rr(h.x*m.y-m.x*h.y,2)),a=Rr(v+h.z*h.z,3/2)):(o=h.x*m.y-h.y*m.x,a=Rr(v,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,f=a/o,!s){const w=_e.curvature(n-.001,e,r,i,!0).k,T=_e.curvature(n+.001,e,r,i,!0).k;u=(T-c+(c-w))/2,l=(Hu(T-c)+Hu(c-w))/2}return{k:c,r:f,dk:u,adk:l}},inflections:function(n){if(n.length<4)return[];const e=_e.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),u=18*(s-r);if(_e.approximately(a,0)){if(!_e.approximately(l,0)){let m=-u/l;if(0<=m&&m<=1)return[m]}return[]}const c=2*a;if(_e.approximately(c,0))return[];const f=l*l-4*a*u;if(f<0)return[];const h=Math.sqrt(f);return[(h-l)/c,-(l+h)/c].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,u;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,u=(n[o].size+e[o].size)/2,Hu(a-l)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),u=e.split(.5),c=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];c=c.filter(function(h){return _e.bboxoverlap(h.left.bbox(),h.right.bbox())});let f=[];return c.length===0||(c.forEach(function(h){f=f.concat(_e.pairiteration(h.left,h.right,a))}),f=f.filter(function(h,m){return f.indexOf(h)===m})),f},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*hs(Ys)-s*ul(Ys),u=i*ul(Ys)+s*hs(Ys),c=o*hs(Ys)-a*ul(Ys),f=o*ul(Ys)+a*hs(Ys),h=(n.x+e.x)/2,m=(n.y+e.y)/2,v=(e.x+r.x)/2,w=(e.y+r.y)/2,T=h+l,C=m+u,b=v+c,I=w+f,N=_e.lli8(h,m,T,C,v,w,b,I),O=_e.dist(N,n);let L=Ku(n.y-N.y,n.x-N.x),U=Ku(e.y-N.y,e.x-N.x),A=Ku(r.y-N.y,r.x-N.x),R;return L<A?((L>U||U>A)&&(L+=wf),L>A&&(R=A,A=L,L=R)):A<U&&U<L?(R=A,A=L,L=R):A+=wf,N.s=L,N.e=A,N.r=O,N},numberSort:function(n,e){return n-e}};class Ic{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return _e.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)_e.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Ic(r)}}const{abs:Wu,min:Bb,max:qb,cos:W$,sin:Q$,acos:Y$,sqrt:Qu}=Math,X$=Math.PI;class Tt{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const v=[];r.forEach(function(w){["x","y","z"].forEach(function(T){typeof w[T]<"u"&&v.push(w[T])})}),r=v}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let v=0,w=a?3:2;v<o;v+=w){var u={x:r[v],y:r[v+1]};a&&(u.z=r[v+2]),l.push(u)}const c=this.order=l.length-1,f=this.dims=["x","y"];a&&f.push("z"),this.dimlen=f.length;const h=_e.align(l,{p1:l[0],p2:l[c]}),m=_e.dist(l[0],l[c]);this._linear=h.reduce((v,w)=>v+Wu(w.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new Tt(r,r,i);if(s===1)return new Tt(e,r,r);const o=Tt.getABC(2,e,r,i,s);return new Tt(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=Tt.getABC(3,e,r,i,s);typeof o>"u"&&(o=_e.dist(r,a.C));const l=o*(1-s)/s,u=_e.dist(e,i),c=(i.x-e.x)/u,f=(i.y-e.y)/u,h=o*c,m=o*f,v=l*c,w=l*f,T={x:r.x-h,y:r.y-m},C={x:r.x+v,y:r.y+w},b=a.A,I={x:b.x+(T.x-b.x)/(1-s),y:b.y+(T.y-b.y)/(1-s)},N={x:b.x+(C.x-b.x)/s,y:b.y+(C.y-b.y)/s},O={x:e.x+(I.x-e.x)/s,y:e.y+(I.y-e.y)/s},L={x:i.x+(N.x-i.x)/(1-s),y:i.y+(N.y-i.y)/(1-s)};return new Tt(e,O,L,i)}static getUtils(){return _e}getUtils(){return Tt.getUtils()}static get PolyBezier(){return Ic}valueOf(){return this.toString()}toString(){return _e.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=_e.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=_e.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return _e.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=_e.projectionratio(o,e),l=1-a,u={x:a*r.x+l*s.x,y:a*r.y+l*s.y},c=_e.abcratio(o,e);return{A:{x:i.x+(i.x-u.x)/c,y:i.y+(i.y-u.y)/c},B:i,C:u,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return Tt.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],_e.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=_e.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,u=.1/i;let c=s.mdist,f=a,h=f,m;c+=1;for(let v;f<l+u;f+=u)m=this.compute(f),v=_e.dist(e,m),v<c&&(c=v,h=f);return h=h<0?0:h>1?1:h,m=this.compute(h),m.t=h,m.d=c,m}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?_e.computeWithRatios(e,this.points,this.ratios,this._3d):_e.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new Tt(r)}derivative(e){return _e.compute(e,this.dpoints[0],this._3d)}dderivative(e){return _e.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Tt(_e.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return _e.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return _e.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Qu(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Qu(r.x*r.x+r.y*r.y+r.z*r.z),o=Qu(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Qu(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const u=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,u=r.length-1;a<u;a++)l=_e.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new Tt([i[0],i[3],i[5]]):new Tt([i[0],i[4],i[7],i[9]]),right:this.order===2?new Tt([i[5],i[4],i[2]]):new Tt([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=_e.map(0,0,1,this._t1,this._t2),s.left._t2=_e.map(e,0,1,this._t1,this._t2),s.right._t1=_e.map(e,0,1,this._t1,this._t2),s.right._t2=_e.map(1,0,1,this._t1,this._t2),r?(r=_e.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=_e.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(_e.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(_e.numberSort))}).bind(this)),e.values=r.sort(_e.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=_e.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return _e.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new Tt(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=_e.angle(this.points[0],this.points[3],this.points[1]),o=_e.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Wu(Y$(i))<X$/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=c.split(r,i),!o.simple()){if(i-=s,Wu(r-i)<s)return[];o=c.split(r,i),o._t1=_e.map(r,0,1,c._t1,c._t2),o._t2=_e.map(i,0,1,c._t1,c._t2),l.push(o),r=i;break}r<1&&(o=c.split(r,1),o._t1=_e.map(r,0,1,c._t1,c._t2),o._t2=c._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new Tt(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],c=[],f=_e.lli4(u[0],u[0].c,u[1],u[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const m=c[h*r]=_e.copy(o[h*r]);m.x+=(h?l:a)*u[h].n.x,m.y+=(h?l:a)*u[h].n.y}),i?([0,1].forEach(function(h){if(!(r===2&&h)){var m=o[h+1],v={x:m.x-f.x,y:m.y-f.y},w=i?i((h+1)/r):e;i&&!s&&(w=-w);var T=Qu(v.x*v.x+v.y*v.y);v.x/=T,v.y/=T,c[h+1]={x:m.x+w*v.x,y:m.y+w*v.y}}}),new Tt(c)):([0,1].forEach(h=>{if(r===2&&h)return;const m=c[h*r],v=this.derivative(h),w={x:m.x+v.x,y:m.y+v.y};c[h+1]=_e.lli4(m,w,f,o[h+1])}),new Tt(c))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const L=this.normal(0),U=this.points[0],A=this.points[this.points.length-1];let R,D,M;i===void 0&&(i=e,s=r),R={x:U.x+L.x*e,y:U.y+L.y*e},M={x:A.x+L.x*i,y:A.y+L.y*i},D={x:(R.x+M.x)/2,y:(R.y+M.y)/2};const F=[R,D,M];R={x:U.x-L.x*r,y:U.y-L.y*r},M={x:A.x-L.x*s,y:A.y-L.y*s},D={x:(R.x+M.x)/2,y:(R.y+M.y)/2};const $=[M,D,R],j=_e.makeline($[2],F[0]),q=_e.makeline(F[2],$[0]),G=[j,new Tt(F),q,new Tt($)];return new Ic(G)}const o=this.reduce(),a=o.length,l=[];let u=[],c,f=0,h=this.length();const m=typeof i<"u"&&typeof s<"u";function v(L,U,A,R,D){return function(M){const F=R/A,$=(R+D)/A,j=U-L;return _e.map(M,0,1,L+F*j,L+$*j)}}o.forEach(function(L){const U=L.length();m?(l.push(L.scale(v(e,i,h,f,U))),u.push(L.scale(v(-r,-s,h,f,U)))):(l.push(L.scale(e)),u.push(L.scale(-r))),f+=U}),u=u.map(function(L){return c=L.points,c[3]?L.points=[c[3],c[2],c[1],c[0]]:L.points=[c[2],c[1],c[0]],L}).reverse();const w=l[0].points[0],T=l[a-1].points[l[a-1].points.length-1],C=u[a-1].points[u[a-1].points.length-1],b=u[0].points[0],I=_e.makeline(C,w),N=_e.makeline(T,b),O=[I].concat(l).concat([N]).concat(u);return new Ic(O)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const u=_e.makeshape(s[a],s[l-a],i);u.startcap.virtual=a>1,u.endcap.virtual=a<l/2-1,o.push(u)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Tt&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=Bb(e.p1.x,e.p2.x),i=Bb(e.p1.y,e.p2.y),s=qb(e.p1.x,e.p2.x),o=qb(e.p1.y,e.p2.y);return _e.roots(this.points,e).filter(a=>{var l=this.get(a);return _e.between(l.x,r,s)&&_e.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,u;o<i;o++)l=r.slice(o,o+1),u=r.slice(o+2),a=this.curveintersects(l,u,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=_e.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),u=_e.dist(e,r),c=_e.dist(e,a),f=_e.dist(e,l);return Wu(c-u)+Wu(f-u)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,u,c,f,h=!1,m=!1,v,w=s,T=1;do if(m=h,f=c,w=(i+s)/2,l=this.get(w),u=this.get(s),c=_e.getccenter(a,l,u),c.interval={start:i,end:s},h=this._error(c,a,i,s)<=e,v=m&&!h,v||(T=s),h){if(s>=1){if(c.interval.end=T=1,f=c,s>1){let b={x:c.x+c.r*W$(c.e),y:c.y+c.r*Q$(c.e)};c.e+=_e.angle({x:c.x,y:c.y},b,this.get(1))}break}s=s+(s-i)/2}else s=w;while(!v&&o++<100);if(o>=100)break;f=f||c,r.push(f),i=T}while(s<1);return r}}function Xy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function J$(n){if(Array.isArray(n))return n}function Z$(n){if(Array.isArray(n))return Xy(n)}function e7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function t7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function n7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i7(n,e){if(n==null)return{};var r,i,s=s7(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function s7(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function o7(n,e){return J$(n)||t7(n,e)||Vk(n,e)||n7()}function a7(n){return Z$(n)||e7(n)||Vk(n)||r7()}function l7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function u7(n){var e=l7(n,"string");return typeof e=="symbol"?e:e+""}function Vk(n,e){if(n){if(typeof n=="string")return Xy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xy(n,e):void 0}}var c7=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,u){var c=l,f=u;return s.forEach(function(h,m){var v=h.keyAccessor,w=h.isProp,T;if(w){var C=f,b=C[v],I=i7(C,[v].map(u7));T=b,f=I}else T=v(f,m);m+1<s.length?(c.hasOwnProperty(T)||(c[T]={}),c=c[T]):r?(c.hasOwnProperty(T)||(c[T]=[]),c[T].push(f)):c[T]=f}),l},{});r instanceof Function&&function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===s.length?Object.keys(u).forEach(function(f){return u[f]=r(u[f])}):Object.values(u).forEach(function(f){return l(f,c+1)})}(o);var a=o;return i&&(a=[],function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===s.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(f){var h=o7(f,2),m=h[0],v=h[1];return l(v,[].concat(a7(c),[m]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function h7(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const Hb=Symbol("implicit");function Fk(){var n=new fb,e=[],r=[],i=Hb;function s(o){let a=n.get(o);if(a===void 0){if(i!==Hb)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new fb;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return Fk(e,r).unknown(i)},h7.apply(s,arguments),s}function f7(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const d7=f7("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function p7(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var m7=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;p7(m7);function Jy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function g7(n){if(Array.isArray(n))return n}function y7(n){if(Array.isArray(n))return Jy(n)}function Kb(n,e,r){if(Uk())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function lh(n,e,r){return(e=E7(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Uk(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uk=function(){return!!n})()}function v7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(f){c=!0,s=f}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function w7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function cl(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gb(Object(r),!0).forEach(function(i){lh(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Gb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Sc(n,e){return g7(n)||_7(n,e)||zk(n,e)||w7()}function Mr(n){return y7(n)||v7(n)||zk(n)||x7()}function b7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function E7(n){var e=b7(n,"string");return typeof e=="symbol"?e:e+""}function Zy(n){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(n)}function zk(n,e){if(n){if(typeof n=="string")return Jy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jy(n,e):void 0}}var T7=Fk(d7);function Wb(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=T7(e(i))})}function I7(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,u=l===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:l,c={};r.forEach(function(v){return c[e(v)]={data:v,out:[],depth:-1,skip:!a(v)}}),i.forEach(function(v){var w=v.source,T=v.target,C=O(w),b=O(T);if(!c.hasOwnProperty(C))throw"Missing source node with id: ".concat(C);if(!c.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var I=c[C],N=c[b];I.out.push(N);function O(L){return Zy(L)==="object"?e(L):L}});var f=[];m(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(Mr(Object.entries(c).filter(function(v){var w=Sc(v,2),T=w[1];return!T.skip}).map(function(v){var w=Sc(v,2),T=w[0],C=w[1];return lh({},T,C.depth)}))));return h;function m(v){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,C=function(){var O=v[b];if(w.indexOf(O)!==-1){var L=[].concat(Mr(w.slice(w.indexOf(O))),[O]).map(function(U){return e(U.data)});return f.some(function(U){return U.length===L.length&&U.every(function(A,R){return A===L[R]})})||(f.push(L),u(L)),1}T>O.depth&&(O.depth=T,m(O.out,[].concat(Mr(w),[O]),T+(O.skip?0:1)))},b=0,I=v.length;b<I;b++)C()}}var S7=2,Nn=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Qb=function(e,r){if(!r.isShadow){var i=ht(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=Mr(Array(o)).map(function(){return{}}):delete s.__photons})}},np=s_({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Qb(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Nn},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Nn},nodeColor:{default:"color",triggerUpdate:!1,onChange:Nn},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Nn},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Nn},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Nn},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Nn},linkColor:{default:"color",triggerUpdate:!1,onChange:Nn},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Nn},linkWidth:{default:1,triggerUpdate:!1,onChange:Nn},linkCurvature:{default:0,triggerUpdate:!1,onChange:Nn},linkCanvasObject:{triggerUpdate:!1,onChange:Nn},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Nn},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Nn},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Nn},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Nn},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Qb},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=ht(e.nodeVisibility),u=ht(e.nodeVal),c=ht(e.nodeColor),f=ht(e.nodeCanvasObjectMode),h=e.ctx,m=e.isShadow/e.globalScale,v=e.graphData.nodes.filter(l);h.save(),v.forEach(function(w){var T=f(w);if(e.nodeCanvasObject&&(T==="before"||T==="replace")&&(e.nodeCanvasObject(w,h,e.globalScale),T==="replace")){h.restore();return}var C=Math.sqrt(Math.max(0,u(w)||1))*e.nodeRelSize+m;h.beginPath(),h.arc(w.x,w.y,C,0,2*Math.PI,!1),h.fillStyle=c(w)||"rgba(31, 120, 180, 0.92)",h.fill(),e.nodeCanvasObject&&T==="after"&&e.nodeCanvasObject(w,e.ctx,e.globalScale)}),h.restore()}function s(){var l=ht(e.linkVisibility),u=ht(e.linkColor),c=ht(e.linkWidth),f=ht(e.linkLineDash),h=ht(e.linkCurvature),m=ht(e.linkCanvasObjectMode),v=e.ctx,w=e.isShadow*2,T=e.graphData.links.filter(l);T.forEach(U);var C=[],b=[],I=T;if(e.linkCanvasObject){var N=[],O=[];T.forEach(function(A){return({before:C,after:b,replace:N}[m(A)]||O).push(A)}),I=[].concat(Mr(C),b,O),C=C.concat(N)}v.save(),C.forEach(function(A){return e.linkCanvasObject(A,v,e.globalScale)}),v.restore();var L=c7(I,[u,c,f]);v.save(),Object.entries(L).forEach(function(A){var R=Sc(A,2),D=R[0],M=R[1],F=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(M).forEach(function($){var j=Sc($,2),q=j[0],G=j[1],Z=(q||1)/e.globalScale+w;Object.entries(G).forEach(function(de){var ee=Sc(de,2);ee[0];var ae=ee[1],he=f(ae[0]);v.beginPath(),ae.forEach(function(be){var ce=be.source,Ae=be.target;if(!(!ce||!Ae||!ce.hasOwnProperty("x")||!Ae.hasOwnProperty("x"))){v.moveTo(ce.x,ce.y);var Pe=be.__controlPoints;Pe?v[Pe.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(v,Mr(Pe).concat([Ae.x,Ae.y])):v.lineTo(Ae.x,Ae.y)}}),v.strokeStyle=F,v.lineWidth=Z,v.setLineDash(he||[]),v.stroke()})})}),v.restore(),v.save(),b.forEach(function(A){return e.linkCanvasObject(A,v,e.globalScale)}),v.restore();function U(A){var R=h(A);if(!R){A.__controlPoints=null;return}var D=A.source,M=A.target;if(!(!D||!M||!D.hasOwnProperty("x")||!M.hasOwnProperty("x"))){var F=Math.sqrt(Math.pow(M.x-D.x,2)+Math.pow(M.y-D.y,2));if(F>0){var $=Math.atan2(M.y-D.y,M.x-D.x),j=F*R,q={x:(D.x+M.x)/2+j*Math.cos($-Math.PI/2),y:(D.y+M.y)/2+j*Math.sin($-Math.PI/2)};A.__controlPoints=[q.x,q.y]}else{var G=R*70;A.__controlPoints=[M.x,M.y-G,M.x+G,M.y]}}}}function o(){var l=1.6,u=.2,c=ht(e.linkDirectionalArrowLength),f=ht(e.linkDirectionalArrowRelPos),h=ht(e.linkVisibility),m=ht(e.linkDirectionalArrowColor||e.linkColor),v=ht(e.nodeVal),w=e.ctx;w.save(),e.graphData.links.filter(h).forEach(function(T){var C=c(T);if(!(!C||C<0)){var b=T.source,I=T.target;if(!(!b||!I||!b.hasOwnProperty("x")||!I.hasOwnProperty("x"))){var N=Math.sqrt(Math.max(0,v(b)||1))*e.nodeRelSize,O=Math.sqrt(Math.max(0,v(I)||1))*e.nodeRelSize,L=Math.min(1,Math.max(0,f(T))),U=m(T)||"rgba(0,0,0,0.28)",A=C/l/2,R=T.__controlPoints&&Kb(Tt,[b.x,b.y].concat(Mr(T.__controlPoints),[I.x,I.y])),D=R?function(Z){return R.get(Z)}:function(Z){return{x:b.x+(I.x-b.x)*Z||0,y:b.y+(I.y-b.y)*Z||0}},M=R?R.length():Math.sqrt(Math.pow(I.x-b.x,2)+Math.pow(I.y-b.y,2)),F=N+C+(M-N-O-C)*L,$=D(F/M),j=D((F-C)/M),q=D((F-C*(1-u))/M),G=Math.atan2($.y-j.y,$.x-j.x)-Math.PI/2;w.beginPath(),w.moveTo($.x,$.y),w.lineTo(j.x+A*Math.cos(G),j.y+A*Math.sin(G)),w.lineTo(q.x,q.y),w.lineTo(j.x-A*Math.cos(G),j.y-A*Math.sin(G)),w.fillStyle=U,w.fill()}}}),w.restore()}function a(){var l=ht(e.linkDirectionalParticles),u=ht(e.linkDirectionalParticleSpeed),c=ht(e.linkDirectionalParticleOffset),f=ht(e.linkDirectionalParticleWidth),h=ht(e.linkVisibility),m=ht(e.linkDirectionalParticleColor||e.linkColor),v=e.ctx;v.save(),e.graphData.links.filter(h).forEach(function(w){var T=l(w);if(!(!w.hasOwnProperty("__photons")||!w.__photons.length)){var C=w.source,b=w.target;if(!(!C||!b||!C.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var I=u(w),N=Math.abs(c(w)),O=w.__photons||[],L=Math.max(0,f(w)/2)/Math.sqrt(e.globalScale),U=m(w)||"rgba(0,0,0,0.28)";v.fillStyle=U;var A=w.__controlPoints?Kb(Tt,[C.x,C.y].concat(Mr(w.__controlPoints),[b.x,b.y])):null,R=0,D=!1;O.forEach(function(M){var F=!!M.__singleHop;if(M.hasOwnProperty("__progressRatio")||(M.__progressRatio=F?0:(R+N)/T),!F&&R++,M.__progressRatio+=I,M.__progressRatio>=1)if(!F)M.__progressRatio=M.__progressRatio%1;else{D=!0;return}var $=M.__progressRatio,j=A?A.get($):{x:C.x+(b.x-C.x)*$||0,y:C.y+(b.y-C.y)*$||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(j.x,j.y,w,v,e.globalScale):(v.beginPath(),v.arc(j.x,j.y,L,0,2*Math.PI,!1),v.fill())}),D&&(w.__photons=w.__photons.filter(function(M){return!M.__singleHop||M.__progressRatio<=1}))}}}),v.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:$$().force("link",j$()).force("charge",B$()).force("center",Mz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Wb(e.graphData.nodes,ht(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Wb(e.graphData.links,ht(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(m){m.source=m[e.linkSource],m.target=m[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(m){return m[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&I7(e.graphData,function(m){return m[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,Mr(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*S7*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return delete m[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),c=function(v){return(s[v[e.nodeId]]-o/2)*a*(u?-1:1)},f=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return m[f]=c(m)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?q$(function(m){var v=s[m[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-v:v)*a}).strength(function(m){return e.dagNodeFilter(m)?1:0}):null);for(var h=0;h<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);h++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function $k(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,u){r.forEach(function(c){return u[c][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var f=[];return r.forEach(function(h){var m=a[h],v=m[o].apply(m,u);v!==m&&f.push(v)}),f.length?f[0]:this}}}}var C7=800,k7=4,A7=5,Bk=$k("forceGraph",np),N7=$k(["forceGraph","shadowGraph"],np),R7=Object.assign.apply(Object,Mr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return lh({},n,Bk.linkProp(n))})).concat(Mr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return lh({},n,N7.linkProp(n))})))),P7=Object.assign.apply(Object,Mr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return lh({},n,Bk.linkMethod(n))})));function ag(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Mi(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function qk(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function Yb(n,e,r){n.save(),qk(n),n.clearRect(0,0,e,r),n.restore()}var O7=s_({props:cl({width:{default:window.innerWidth,onChange:function(e,r){return ag(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return ag(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},R7),aliases:{stopAnimation:"pauseAnimation"},methods:cl({graph2ScreenCoords:function(e,r,i){var s=Mi(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Mi(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new _b(a()).to(o,s).easing(ba.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var u=Mi(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var c=u.x,f=u.y;e.zoom.translateTo(e.zoom.__baseElem,c===void 0?a().x:c,f===void 0?a().y:f),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new _b({k:s()}).to({k:r},i).easing(ba.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Mi(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(c,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=ht(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[mb(o,function(a){return a.x-a.r}),pb(o,function(a){return a.x+a.r})],y:[mb(o,function(a){return a.y-a.r}),pb(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},P7),stateInit:function(){return{lastSetZoom:1,zoom:q8(),forceGraph:new np,shadowGraph:new np().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new pz,tweenGroup:new fk}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var h=null,m=window.devicePixelRatio,v=l.x>0&&l.y>0?a.getImageData(l.x*m,l.y*m,1,1):null;return v&&(h=r.colorTracker.lookup(v.data)),h};Dr(r.canvas).call(e9().subject(function(){if(!r.enableNodeDrag)return null;var f=u();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var h=f.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},f.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(f){var h=f.subject,m=h.__initialDragPos,v=f,w=Mi(r.canvas).k,T={x:m.x+(v.x-m.x)/w-h.x,y:m.y+(v.y-m.y)/w-h.y};["x","y"].forEach(function(C){return h["f".concat(C)]=h[C]=m[C]+(v[C]-m[C])/w}),!(!h.__dragged&&A7>=Math.sqrt(W8(["x","y"].map(function(C){return Math.pow(f[C]-m[C],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,T))}).on("end",function(f){var h=f.subject,m=h.__initialDragPos,v={x:h.x-m.x,y:h.y-m.y};m.fx===void 0&&(h.fx=void 0),m.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,v))})),r.zoom(r.zoom.__baseElem=Dr(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(f){return!f.button&&r.enableZoomPanInteraction&&(f.type!=="wheel"||ht(r.enableZoomInteraction)(f))&&(f.type==="wheel"||ht(r.enablePanInteraction)(f))}).on("zoom",function(f){var h=f.transform;[o,a].forEach(function(m){qk(m),m.translate(h.x,h.y),m.scale(h.k,h.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(cl(cl({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(f){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(cl(cl({},f.transform),i.centerAt()))}),ag(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Mi(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=k7/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Dz(s),["pointermove","pointerdown"].forEach(function(f){return s.addEventListener(f,function(h){f==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(w){return Math.abs(w)>1}))&&(r.isPointerDragging=!0);var m=v(s);l.x=h.pageX-m.left,l.y=h.pageY-m.top;function v(w){var T=w.getBoundingClientRect(),C=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:T.top+b,left:T.left+C}}},{passive:!0})}),s.addEventListener("pointerup",function(f){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[f,r.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"Click")];m&&m.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(f.button===2)if(r.hoverObj){var v=r["on".concat(r.hoverObj.type,"RightClick")];v&&v.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})}},{passive:!0}),s.addEventListener("contextmenu",function(f){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(f.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var c=xU(function(){Yb(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return ht(r.linkWidth)(h)+r.linkHoverPrecision});var f=Mi(r.canvas);r.shadowGraph.globalScale(f.k).tickFrame()},C7);r.flushShadowCanvas=c.flush,(this._animationCycle=function f(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(N){return N.__photons&&N.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var m=r.isPointerDragging?null:u();if(m!==r.hoverObj){var v=r.hoverObj,w=v?v.type:null,T=m?m.type:null;if(w&&w!==T){var C=r["on".concat(w,"Hover")];C&&C(null,v.d)}if(T){var b=r["on".concat(T,"Hover")];b&&b(m.d,w===T?v.d:null)}r.tooltip.content(m&&ht(r["".concat(m.type.toLowerCase(),"Label")])(m.d)||null),r.canvas.classList[(m&&r["on".concat(T,"Click")]||!m&&r.onBackgroundClick)&&ht(r.showPointerCursor)(m==null?void 0:m.d)?"add":"remove"]("clickable"),r.hoverObj=m}h&&c()}if(h){Yb(o,r.width,r.height);var I=Mi(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,I),r.forceGraph.globalScale(I).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,I)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(e){}}),Hk={exports:{}},j7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",D7=j7,M7=D7;function Kk(){}function Gk(){}Gk.resetWarningCache=Kk;var L7=function(){function n(i,s,o,a,l,u){if(u!==M7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Gk,resetWarningCache:Kk};return r.PropTypes=r,r};Hk.exports=L7();var V7=Hk.exports;const Y=ev(V7),Jp={width:Y.number,height:Y.number,graphData:Y.shape({nodes:Y.arrayOf(Y.object).isRequired,links:Y.arrayOf(Y.object).isRequired}),backgroundColor:Y.string,nodeRelSize:Y.number,nodeId:Y.string,nodeLabel:Y.oneOfType([Y.string,Y.func]),nodeVal:Y.oneOfType([Y.number,Y.string,Y.func]),nodeVisibility:Y.oneOfType([Y.bool,Y.string,Y.func]),nodeColor:Y.oneOfType([Y.string,Y.func]),nodeAutoColorBy:Y.oneOfType([Y.string,Y.func]),onNodeHover:Y.func,onNodeClick:Y.func,linkSource:Y.string,linkTarget:Y.string,linkLabel:Y.oneOfType([Y.string,Y.func]),linkVisibility:Y.oneOfType([Y.bool,Y.string,Y.func]),linkColor:Y.oneOfType([Y.string,Y.func]),linkAutoColorBy:Y.oneOfType([Y.string,Y.func]),linkWidth:Y.oneOfType([Y.number,Y.string,Y.func]),linkCurvature:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalArrowLength:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalArrowColor:Y.oneOfType([Y.string,Y.func]),linkDirectionalArrowRelPos:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticles:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleSpeed:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleOffset:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleWidth:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleColor:Y.oneOfType([Y.string,Y.func]),onLinkHover:Y.func,onLinkClick:Y.func,dagMode:Y.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:Y.number,dagNodeFilter:Y.func,onDagError:Y.func,d3AlphaMin:Y.number,d3AlphaDecay:Y.number,d3VelocityDecay:Y.number,warmupTicks:Y.number,cooldownTicks:Y.number,cooldownTime:Y.number,onEngineTick:Y.func,onEngineStop:Y.func,getGraphBbox:Y.func},Wk={zoomToFit:Y.func,onNodeRightClick:Y.func,onNodeDrag:Y.func,onNodeDragEnd:Y.func,onLinkRightClick:Y.func,linkHoverPrecision:Y.number,onBackgroundClick:Y.func,onBackgroundRightClick:Y.func,showPointerCursor:Y.oneOfType([Y.bool,Y.func]),enablePointerInteraction:Y.bool,enableNodeDrag:Y.bool},d_={showNavInfo:Y.bool,nodeOpacity:Y.number,nodeResolution:Y.number,nodeThreeObject:Y.oneOfType([Y.object,Y.string,Y.func]),nodeThreeObjectExtend:Y.oneOfType([Y.bool,Y.string,Y.func]),nodePositionUpdate:Y.func,linkOpacity:Y.number,linkResolution:Y.number,linkCurveRotation:Y.oneOfType([Y.number,Y.string,Y.func]),linkMaterial:Y.oneOfType([Y.object,Y.string,Y.func]),linkThreeObject:Y.oneOfType([Y.object,Y.string,Y.func]),linkThreeObjectExtend:Y.oneOfType([Y.bool,Y.string,Y.func]),linkPositionUpdate:Y.func,linkDirectionalArrowResolution:Y.number,linkDirectionalParticleResolution:Y.number,linkDirectionalParticleThreeObject:Y.oneOfType([Y.object,Y.string,Y.func]),forceEngine:Y.oneOf(["d3","ngraph"]),ngraphPhysics:Y.object,numDimensions:Y.oneOf([1,2,3])},F7=Object.assign({},Jp,Wk,{linkLineDash:Y.oneOfType([Y.arrayOf(Y.number),Y.string,Y.func]),nodeCanvasObjectMode:Y.oneOfType([Y.string,Y.func]),nodeCanvasObject:Y.func,nodePointerAreaPaint:Y.func,linkCanvasObjectMode:Y.oneOfType([Y.string,Y.func]),linkCanvasObject:Y.func,linkPointerAreaPaint:Y.func,linkDirectionalParticleCanvasObject:Y.func,autoPauseRedraw:Y.bool,minZoom:Y.number,maxZoom:Y.number,enableZoomInteraction:Y.oneOfType([Y.bool,Y.func]),enablePanInteraction:Y.oneOfType([Y.bool,Y.func]),onZoom:Y.func,onZoomEnd:Y.func,onRenderFramePre:Y.func,onRenderFramePost:Y.func});Object.assign({},Jp,Wk,d_,{enableNavigationControls:Y.bool,controlType:Y.oneOf(["trackball","orbit","fly"]),rendererConfig:Y.object,extraRenderers:Y.arrayOf(Y.shape({render:Y.func.isRequired}))});Object.assign({},Jp,d_,{nodeDesc:Y.oneOfType([Y.string,Y.func]),linkDesc:Y.oneOfType([Y.string,Y.func])});Object.assign({},Jp,d_,{markerAttrs:Y.object,yOffset:Y.number,glScale:Y.number});const p_=fV(O7,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});p_.displayName="ForceGraph2D";p_.propTypes=F7;const U7=()=>{const{contacts:n,userProfile:e,updateContactPosition:r}=Uo(),i=Lo(),s=ue.useRef(),[o,a]=ue.useState({width:window.innerWidth,height:window.innerHeight}),[l,u]=ue.useState(""),c=ue.useMemo(()=>["",...(e==null?void 0:e.categories)||["","","","",""]],[e]);ue.useEffect(()=>{const h=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const f=ue.useMemo(()=>{if(!n)return{nodes:[],links:[]};const h=[],m=[],v=new Map,w=l===""?n:n.filter(C=>(C.tags||[]).includes(l));(l===""?c.filter(C=>C!==""):[l]).forEach(C=>{const b=`cat-${C}`;let I="#ffffff20";C===""?I="#fbbf24":C===""?I="#f87171":C===""?I="#60a5fa":C===""&&(I="#a78bfa");const N={id:b,name:C,isCategory:!0,val:15,color:I};h.push(N),v.set(C,N)}),w.forEach(C=>{let b="#10b981";C.importance>80||(C.tags||[]).includes("")?b="#fbbf24":(C.tags||[]).includes("")?b="#f87171":(C.tags||[]).includes("")?b="#60a5fa":(C.tags||[]).includes("")&&(b="#a78bfa");const I={id:C.id,name:C.name,val:(C.importance||50)/4+5,tags:C.tags||[],color:b,isContact:!0,avatar:C.avatar};C.position&&(I.fx=C.position.x,I.fy=C.position.y),h.push(I),(C.tags||[]).forEach(N=>{v.has(N)&&m.push({source:I.id,target:`cat-${N}`,value:1,color:"rgba(255, 255, 255, 0.05)",isHubLink:!0})})});for(let C=0;C<w.length;C++)for(let b=C+1;b<w.length;b++){const I=w[C],N=w[b],O=(I.tags||[]).filter(L=>(N.tags||[]).includes(L));(O.length>1||O.length===1&&O.includes(""))&&m.push({source:I.id,target:N.id,value:O.length*2,color:"rgba(255, 255, 255, 0.1)",isDirectLink:!0})}return{nodes:h,links:m}},[n,l,c]);return y.jsxs("div",{className:"w-full h-full bg-[#0a0a0c] relative overflow-hidden",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 px-6 pt-12 pb-8 bg-gradient-to-b from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black text-white",children:""}),y.jsx("p",{className:"text-white/40 text-[10px] font-black tracking-[0.2em] uppercase mt-0.5",children:"Social Network Analysis"})]}),y.jsx("button",{onClick:()=>i(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}),y.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:c.map(h=>y.jsx("button",{onClick:()=>u(h),className:`flex h-8 shrink-0 items-center justify-center rounded-lg px-4 transition-all duration-300 border text-[10px] font-black uppercase tracking-wider ${l===h?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:border-white/10"}`,children:h},h))})]}),y.jsx("div",{className:"w-full h-full",children:y.jsx(p_,{ref:s,graphData:f,width:o.width,height:o.height,backgroundColor:"#0a0a0c",nodeLabel:"name",nodeRelSize:4,linkColor:h=>h.color,linkWidth:h=>h.value,onNodeClick:h=>{h.isCategory?u(h.name):i(`/profile/${h.id}`)},onNodeDragEnd:h=>{h.fx=h.x,h.fy=h.y,r(h.id,{x:h.x,y:h.y})},enableNodeDrag:!0,cooldownTicks:100,d3AlphaDecay:.01,d3VelocityDecay:.1,d3Force:(h,m)=>{h==="charge"&&m.strength(v=>v.isCategory?-1e3:-150),h==="link"&&(m.distance(v=>v.isHubLink?100:50),m.strength(v=>v.isHubLink?.5:.1))},linkCanvasObject:(h,m,v)=>{const T=h.target.x-h.source.x,C=h.target.y-h.source.y;Math.sqrt(T*T+C*C)>150||(m.beginPath(),m.strokeStyle=h.color,m.lineWidth=h.value/v,m.moveTo(h.source.x,h.source.y),m.lineTo(h.target.x,h.target.y),m.stroke())},nodeCanvasObject:(h,m,v)=>{const w=h.name,T=h.isCategory?14/v:11/v;m.font=`${h.isCategory?"900":"bold"} ${T}px "Inter", sans-serif`,h.isCategory?(m.shadowColor=h.color,m.shadowBlur=20/v,m.fillStyle=h.color,m.beginPath(),m.arc(h.x,h.y,8/v,0,2*Math.PI,!1),m.fill(),m.strokeStyle=h.color,m.lineWidth=2/v,m.beginPath(),m.arc(h.x,h.y,12/v,0,2*Math.PI,!1),m.stroke(),m.shadowBlur=0,m.textAlign="center",m.textBaseline="middle",m.fillStyle="#ffffff",m.fillText(w,h.x,h.y)):(m.shadowColor=h.color,m.shadowBlur=10/v,m.fillStyle=h.color,m.beginPath(),m.arc(h.x,h.y,5/v,0,2*Math.PI,!1),m.fill(),m.shadowBlur=0,m.textAlign="center",m.textBaseline="middle",m.fillStyle="rgba(255, 255, 255, 0.8)",m.fillText(w,h.x,h.y+12/v))}})}),y.jsx("div",{className:"absolute bottom-32 left-6 right-6 p-4 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md z-10",children:y.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-[9px] font-black text-white/30 uppercase tracking-[0.15em]",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#fbbf24] shadow-[0_0_8px_rgba(251,191,36,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#f87171] shadow-[0_0_8px_rgba(248,113,113,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#60a5fa] shadow-[0_0_8px_rgba(96,149,250,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#a78bfa] shadow-[0_0_8px_rgba(167,139,250,0.5)]"}),y.jsx("span",{children:" / "})]})]})}),y.jsx("div",{className:"absolute bottom-44 right-6 flex flex-col gap-2 z-10",children:y.jsx("button",{onClick:()=>s.current.zoomToFit(400),className:"size-12 rounded-2xl bg-white/5 border border-white/10 text-white/40 flex items-center justify-center hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"zoom_in_map"})})})]})},z7=()=>{const n=Lo(),e=Yv(),{unsavedChanges:r,setUnsavedChanges:i}=Uo(),s=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"graph",icon:"hub",label:"",path:"/graph"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}],o=a=>{e.pathname!==a&&(r?window.confirm("")&&(i(!1),n(a),navigator.vibrate&&navigator.vibrate(5)):(n(a),navigator.vibrate&&navigator.vibrate(5)))};return y.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-4 pb-6 pointer-events-none",children:y.jsx("div",{className:"glass-panel rounded-[28px] h-20 flex items-center justify-around px-2 pointer-events-auto",children:s.map(a=>{const l=e.pathname===a.path;return y.jsxs("button",{onClick:()=>o(a.path),className:`flex flex-col items-center justify-center gap-1.5 transition-all duration-500 relative group w-16 ${l?"text-primary":"text-white/20 hover:text-white/40"}`,children:[y.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${l?"scale-110 -translate-y-1":"scale-100"}`,children:[l&&y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150"}),y.jsx("span",{className:`material-symbols-outlined text-[26px] relative z-10 ${l?"font-black":""}`,children:a.icon})]}),y.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.15em] transition-all duration-500 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.label}),l&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary-color-rgb),0.8)]"})]},a.id)})})})},$7=({children:n})=>y.jsxs("div",{className:"bg-nexus min-h-screen text-white font-sans selection:bg-primary/30 overflow-x-hidden",children:[y.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative",children:y.jsx("div",{className:"flex-1 px-4 pt-6 pb-32",children:n})}),y.jsx(z7,{})]});function B7(){return y.jsx(U6,{children:y.jsx(bP,{children:y.jsxs(Vw,{children:[y.jsx(ji,{path:"/p/:uid",element:y.jsx(G6,{})}),y.jsx(ji,{path:"/*",element:y.jsx($7,{children:y.jsxs(Vw,{children:[y.jsx(ji,{path:"/",element:y.jsx(z6,{})}),y.jsx(ji,{path:"/search",element:y.jsx($6,{})}),y.jsx(ji,{path:"/profile/:id",element:y.jsx(B6,{})}),y.jsx(ji,{path:"/stealth",element:y.jsx(q6,{})}),y.jsx(ji,{path:"/settings",element:y.jsx(K6,{})}),y.jsx(ji,{path:"/vault",element:y.jsx(H6,{})}),y.jsx(ji,{path:"/graph",element:y.jsx(U7,{})})]})})})]})})})}lg.createRoot(document.getElementById("root")).render(y.jsx(mt.StrictMode,{children:y.jsx(B7,{})}));
