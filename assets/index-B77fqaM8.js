function Hk(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bb={exports:{}},Jd={},qb={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=Symbol.for("react.element"),Kk=Symbol.for("react.portal"),Wk=Symbol.for("react.fragment"),Gk=Symbol.for("react.strict_mode"),Qk=Symbol.for("react.profiler"),Yk=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Jk=Symbol.for("react.forward_ref"),Zk=Symbol.for("react.suspense"),eA=Symbol.for("react.memo"),tA=Symbol.for("react.lazy"),v_=Symbol.iterator;function nA(n){return n===null||typeof n!="object"?null:(n=v_&&n[v_]||n["@@iterator"],typeof n=="function"?n:null)}var Hb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kb=Object.assign,Wb={};function iu(n,e,r){this.props=n,this.context=e,this.refs=Wb,this.updater=r||Hb}iu.prototype.isReactComponent={};iu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};iu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Gb(){}Gb.prototype=iu.prototype;function Jy(n,e,r){this.props=n,this.context=e,this.refs=Wb,this.updater=r||Hb}var Zy=Jy.prototype=new Gb;Zy.constructor=Jy;Kb(Zy,iu.prototype);Zy.isPureReactComponent=!0;var __=Array.isArray,Qb=Object.prototype.hasOwnProperty,ev={current:null},Yb={key:!0,ref:!0,__self:!0,__source:!0};function Xb(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Qb.call(e,i)&&!Yb.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:lh,type:n,key:o,ref:a,props:s,_owner:ev.current}}function rA(n,e){return{$$typeof:lh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function tv(n){return typeof n=="object"&&n!==null&&n.$$typeof===lh}function iA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var w_=/\/+/g;function im(n,e){return typeof n=="object"&&n!==null&&n.key!=null?iA(""+n.key):e.toString(36)}function vf(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case lh:case Kk:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+im(a,0):i,__(s)?(r="",n!=null&&(r=n.replace(w_,"$&/")+"/"),vf(s,e,r,"",function(c){return c})):s!=null&&(tv(s)&&(s=rA(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(w_,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",__(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+im(o,l);a+=vf(o,e,r,u,s)}else if(u=nA(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+im(o,l++),a+=vf(o,e,r,u,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function zh(n,e,r){if(n==null)return n;var i=[],s=0;return vf(n,i,"","",function(o){return e.call(r,o,s++)}),i}function sA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Un={current:null},_f={transition:null},oA={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:_f,ReactCurrentOwner:ev};function Jb(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:zh,forEach:function(n,e,r){zh(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return zh(n,function(){e++}),e},toArray:function(n){return zh(n,function(e){return e})||[]},only:function(n){if(!tv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};et.Component=iu;et.Fragment=Wk;et.Profiler=Qk;et.PureComponent=Jy;et.StrictMode=Gk;et.Suspense=Zk;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oA;et.act=Jb;et.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Kb({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ev.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)Qb.call(e,u)&&!Yb.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:lh,type:n.type,key:s,ref:o,props:i,_owner:a}};et.createContext=function(n){return n={$$typeof:Xk,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Yk,_context:n},n.Consumer=n};et.createElement=Xb;et.createFactory=function(n){var e=Xb.bind(null,n);return e.type=n,e};et.createRef=function(){return{current:null}};et.forwardRef=function(n){return{$$typeof:Jk,render:n}};et.isValidElement=tv;et.lazy=function(n){return{$$typeof:tA,_payload:{_status:-1,_result:n},_init:sA}};et.memo=function(n,e){return{$$typeof:eA,type:n,compare:e===void 0?null:e}};et.startTransition=function(n){var e=_f.transition;_f.transition={};try{n()}finally{_f.transition=e}};et.unstable_act=Jb;et.useCallback=function(n,e){return Un.current.useCallback(n,e)};et.useContext=function(n){return Un.current.useContext(n)};et.useDebugValue=function(){};et.useDeferredValue=function(n){return Un.current.useDeferredValue(n)};et.useEffect=function(n,e){return Un.current.useEffect(n,e)};et.useId=function(){return Un.current.useId()};et.useImperativeHandle=function(n,e,r){return Un.current.useImperativeHandle(n,e,r)};et.useInsertionEffect=function(n,e){return Un.current.useInsertionEffect(n,e)};et.useLayoutEffect=function(n,e){return Un.current.useLayoutEffect(n,e)};et.useMemo=function(n,e){return Un.current.useMemo(n,e)};et.useReducer=function(n,e,r){return Un.current.useReducer(n,e,r)};et.useRef=function(n){return Un.current.useRef(n)};et.useState=function(n){return Un.current.useState(n)};et.useSyncExternalStore=function(n,e,r){return Un.current.useSyncExternalStore(n,e,r)};et.useTransition=function(){return Un.current.useTransition()};et.version="18.3.1";qb.exports=et;var ue=qb.exports;const mt=Xy(ue),aA=Hk({__proto__:null,default:mt},[ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA=ue,uA=Symbol.for("react.element"),cA=Symbol.for("react.fragment"),hA=Object.prototype.hasOwnProperty,fA=lA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dA={key:!0,ref:!0,__self:!0,__source:!0};function Zb(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)hA.call(e,i)&&!dA.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:uA,type:n,key:o,ref:a,props:s,_owner:fA.current}}Jd.Fragment=cA;Jd.jsx=Zb;Jd.jsxs=Zb;Bb.exports=Jd;var y=Bb.exports,og={},eE={exports:{}},hr={},tE={exports:{}},nE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ee,ae){var he=ee.length;ee.push(ae);e:for(;0<he;){var be=he-1>>>1,ce=ee[be];if(0<s(ce,ae))ee[be]=ae,ee[he]=ce,he=be;else break e}}function r(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ae=ee[0],he=ee.pop();if(he!==ae){ee[0]=he;e:for(var be=0,ce=ee.length,Ae=ce>>>1;be<Ae;){var Pe=2*(be+1)-1,Me=ee[Pe],Ye=Pe+1,We=ee[Ye];if(0>s(Me,he))Ye<ce&&0>s(We,Me)?(ee[be]=We,ee[Ye]=he,be=Ye):(ee[be]=Me,ee[Pe]=he,be=Pe);else if(Ye<ce&&0>s(We,he))ee[be]=We,ee[Ye]=he,be=Ye;else break e}}return ae}function s(ee,ae){var he=ee.sortIndex-ae.sortIndex;return he!==0?he:ee.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,m=3,v=!1,w=!1,I=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ee){for(var ae=r(c);ae!==null;){if(ae.callback===null)i(c);else if(ae.startTime<=ee)i(c),ae.sortIndex=ae.expirationTime,e(u,ae);else break;ae=r(c)}}function O(ee){if(I=!1,N(ee),!w)if(r(u)!==null)w=!0,Z(L);else{var ae=r(c);ae!==null&&de(O,ae.startTime-ee)}}function L(ee,ae){w=!1,I&&(I=!1,b(R),R=-1),v=!0;var he=m;try{for(N(ae),h=r(u);h!==null&&(!(h.expirationTime>ae)||ee&&!F());){var be=h.callback;if(typeof be=="function"){h.callback=null,m=h.priorityLevel;var ce=be(h.expirationTime<=ae);ae=n.unstable_now(),typeof ce=="function"?h.callback=ce:h===r(u)&&i(u),N(ae)}else i(u);h=r(u)}if(h!==null)var Ae=!0;else{var Pe=r(c);Pe!==null&&de(O,Pe.startTime-ae),Ae=!1}return Ae}finally{h=null,m=he,v=!1}}var U=!1,A=null,R=-1,D=5,M=-1;function F(){return!(n.unstable_now()-M<D)}function $(){if(A!==null){var ee=n.unstable_now();M=ee;var ae=!0;try{ae=A(!0,ee)}finally{ae?j():(U=!1,A=null)}}else U=!1}var j;if(typeof T=="function")j=function(){T($)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,W=q.port2;q.port1.onmessage=$,j=function(){W.postMessage(null)}}else j=function(){C($,0)};function Z(ee){A=ee,U||(U=!0,j())}function de(ee,ae){R=C(function(){ee(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,Z(L))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(ee){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var he=m;m=ae;try{return ee()}finally{m=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var he=m;m=ee;try{return ae()}finally{m=he}},n.unstable_scheduleCallback=function(ee,ae,he){var be=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?be+he:be):he=be,ee){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=he+ce,ee={id:d++,callback:ae,priorityLevel:ee,startTime:he,expirationTime:ce,sortIndex:-1},he>be?(ee.sortIndex=he,e(c,ee),r(u)===null&&ee===r(c)&&(I?(b(R),R=-1):I=!0,de(O,he-be))):(ee.sortIndex=ce,e(u,ee),w||v||(w=!0,Z(L))),ee},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ee){var ae=m;return function(){var he=m;m=ae;try{return ee.apply(this,arguments)}finally{m=he}}}})(nE);tE.exports=nE;var pA=tE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=ue,ur=pA;function ye(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rE=new Set,Ic={};function ja(n,e){Ul(n,e),Ul(n+"Capture",e)}function Ul(n,e){for(Ic[n]=e,n=0;n<e.length;n++)rE.add(e[n])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ag=Object.prototype.hasOwnProperty,gA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x_={},b_={};function yA(n){return ag.call(b_,n)?!0:ag.call(x_,n)?!1:gA.test(n)?b_[n]=!0:(x_[n]=!0,!1)}function vA(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _A(n,e,r,i){if(e===null||typeof e>"u"||vA(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){pn[n]=new zn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];pn[e]=new zn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){pn[n]=new zn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){pn[n]=new zn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){pn[n]=new zn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){pn[n]=new zn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){pn[n]=new zn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){pn[n]=new zn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){pn[n]=new zn(n,5,!1,n.toLowerCase(),null,!1,!1)});var nv=/[\-:]([a-z])/g;function rv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(nv,rv);pn[e]=new zn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(nv,rv);pn[e]=new zn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(nv,rv);pn[e]=new zn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){pn[n]=new zn(n,1,!1,n.toLowerCase(),null,!1,!1)});pn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){pn[n]=new zn(n,1,!1,n.toLowerCase(),null,!0,!0)});function iv(n,e,r,i){var s=pn.hasOwnProperty(e)?pn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_A(e,r,s,i)&&(r=null),i||s===null?yA(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Cs=mA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$h=Symbol.for("react.element"),fl=Symbol.for("react.portal"),dl=Symbol.for("react.fragment"),sv=Symbol.for("react.strict_mode"),lg=Symbol.for("react.profiler"),iE=Symbol.for("react.provider"),sE=Symbol.for("react.context"),ov=Symbol.for("react.forward_ref"),ug=Symbol.for("react.suspense"),cg=Symbol.for("react.suspense_list"),av=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),oE=Symbol.for("react.offscreen"),E_=Symbol.iterator;function Ru(n){return n===null||typeof n!="object"?null:(n=E_&&n[E_]||n["@@iterator"],typeof n=="function"?n:null)}var Ot=Object.assign,sm;function Gu(n){if(sm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);sm=e&&e[1]||""}return`
`+sm+n}var om=!1;function am(n,e){if(!n||om)return"";om=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{om=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Gu(n):""}function wA(n){switch(n.tag){case 5:return Gu(n.type);case 16:return Gu("Lazy");case 13:return Gu("Suspense");case 19:return Gu("SuspenseList");case 0:case 2:case 15:return n=am(n.type,!1),n;case 11:return n=am(n.type.render,!1),n;case 1:return n=am(n.type,!0),n;default:return""}}function hg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case dl:return"Fragment";case fl:return"Portal";case lg:return"Profiler";case sv:return"StrictMode";case ug:return"Suspense";case cg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case sE:return(n.displayName||"Context")+".Consumer";case iE:return(n._context.displayName||"Context")+".Provider";case ov:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case av:return e=n.displayName||null,e!==null?e:hg(n.type)||"Memo";case Hs:e=n._payload,n=n._init;try{return hg(n(e))}catch{}}return null}function xA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hg(e);case 8:return e===sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function aE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bA(n){var e=aE(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Bh(n){n._valueTracker||(n._valueTracker=bA(n))}function lE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=aE(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function Wf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fg(n,e){var r=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function T_(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=vo(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uE(n,e){e=e.checked,e!=null&&iv(n,"checked",e,!1)}function dg(n,e){uE(n,e);var r=vo(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pg(n,e.type,r):e.hasOwnProperty("defaultValue")&&pg(n,e.type,vo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function I_(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function pg(n,e,r){(e!=="number"||Wf(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Qu=Array.isArray;function Il(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+vo(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function mg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function S_(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ye(92));if(Qu(r)){if(1<r.length)throw Error(ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:vo(r)}}function cE(n,e){var r=vo(e.value),i=vo(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function C_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function hE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?hE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qh,fE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(qh=qh||document.createElement("div"),qh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Sc(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var oc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EA=["Webkit","ms","Moz","O"];Object.keys(oc).forEach(function(n){EA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),oc[e]=oc[n]})});function dE(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||oc.hasOwnProperty(n)&&oc[n]?(""+e).trim():e+"px"}function pE(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=dE(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var TA=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yg(n,e){if(e){if(TA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function vg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _g=null;function lv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wg=null,Sl=null,Cl=null;function k_(n){if(n=hh(n)){if(typeof wg!="function")throw Error(ye(280));var e=n.stateNode;e&&(e=rp(e),wg(n.stateNode,n.type,e))}}function mE(n){Sl?Cl?Cl.push(n):Cl=[n]:Sl=n}function gE(){if(Sl){var n=Sl,e=Cl;if(Cl=Sl=null,k_(n),e)for(n=0;n<e.length;n++)k_(e[n])}}function yE(n,e){return n(e)}function vE(){}var lm=!1;function _E(n,e,r){if(lm)return n(e,r);lm=!0;try{return yE(n,e,r)}finally{lm=!1,(Sl!==null||Cl!==null)&&(vE(),gE())}}function Cc(n,e){var r=n.stateNode;if(r===null)return null;var i=rp(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(ye(231,e,typeof r));return r}var xg=!1;if(vs)try{var Pu={};Object.defineProperty(Pu,"passive",{get:function(){xg=!0}}),window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{xg=!1}function IA(n,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var ac=!1,Gf=null,Qf=!1,bg=null,SA={onError:function(n){ac=!0,Gf=n}};function CA(n,e,r,i,s,o,a,l,u){ac=!1,Gf=null,IA.apply(SA,arguments)}function kA(n,e,r,i,s,o,a,l,u){if(CA.apply(this,arguments),ac){if(ac){var c=Gf;ac=!1,Gf=null}else throw Error(ye(198));Qf||(Qf=!0,bg=c)}}function Da(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function wE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function A_(n){if(Da(n)!==n)throw Error(ye(188))}function AA(n){var e=n.alternate;if(!e){if(e=Da(n),e===null)throw Error(ye(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return A_(s),n;if(o===i)return A_(s),e;o=o.sibling}throw Error(ye(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(ye(189))}}if(r.alternate!==i)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?n:e}function xE(n){return n=AA(n),n!==null?bE(n):null}function bE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=bE(n);if(e!==null)return e;n=n.sibling}return null}var EE=ur.unstable_scheduleCallback,N_=ur.unstable_cancelCallback,NA=ur.unstable_shouldYield,RA=ur.unstable_requestPaint,Bt=ur.unstable_now,PA=ur.unstable_getCurrentPriorityLevel,uv=ur.unstable_ImmediatePriority,TE=ur.unstable_UserBlockingPriority,Yf=ur.unstable_NormalPriority,OA=ur.unstable_LowPriority,IE=ur.unstable_IdlePriority,Zd=null,Ri=null;function jA(n){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(Zd,n,void 0,(n.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:LA,DA=Math.log,MA=Math.LN2;function LA(n){return n>>>=0,n===0?32:31-(DA(n)/MA|0)|0}var Hh=64,Kh=4194304;function Yu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xf(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Yu(l):(o&=a,o!==0&&(i=Yu(o)))}else a=r&~s,a!==0?i=Yu(a):o!==0&&(i=Yu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-ni(e),s=1<<r,i|=n[r],e&=~s;return i}function VA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FA(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-ni(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=VA(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function Eg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function SE(){var n=Hh;return Hh<<=1,!(Hh&4194240)&&(Hh=64),n}function um(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function uh(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ni(e),n[e]=r}function UA(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-ni(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function cv(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-ni(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var dt=0;function CE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var kE,hv,AE,NE,RE,Tg=!1,Wh=[],io=null,so=null,oo=null,kc=new Map,Ac=new Map,Qs=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R_(n,e){switch(n){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":kc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(e.pointerId)}}function Ou(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=hh(e),e!==null&&hv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function $A(n,e,r,i,s){switch(e){case"focusin":return io=Ou(io,n,e,r,i,s),!0;case"dragenter":return so=Ou(so,n,e,r,i,s),!0;case"mouseover":return oo=Ou(oo,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return kc.set(o,Ou(kc.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Ac.set(o,Ou(Ac.get(o)||null,n,e,r,i,s)),!0}return!1}function PE(n){var e=aa(n.target);if(e!==null){var r=Da(e);if(r!==null){if(e=r.tag,e===13){if(e=wE(r),e!==null){n.blockedOn=e,RE(n.priority,function(){AE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=Ig(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);_g=i,r.target.dispatchEvent(i),_g=null}else return e=hh(r),e!==null&&hv(e),n.blockedOn=r,!1;e.shift()}return!0}function P_(n,e,r){wf(n)&&r.delete(e)}function BA(){Tg=!1,io!==null&&wf(io)&&(io=null),so!==null&&wf(so)&&(so=null),oo!==null&&wf(oo)&&(oo=null),kc.forEach(P_),Ac.forEach(P_)}function ju(n,e){n.blockedOn===e&&(n.blockedOn=null,Tg||(Tg=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,BA)))}function Nc(n){function e(s){return ju(s,n)}if(0<Wh.length){ju(Wh[0],n);for(var r=1;r<Wh.length;r++){var i=Wh[r];i.blockedOn===n&&(i.blockedOn=null)}}for(io!==null&&ju(io,n),so!==null&&ju(so,n),oo!==null&&ju(oo,n),kc.forEach(e),Ac.forEach(e),r=0;r<Qs.length;r++)i=Qs[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<Qs.length&&(r=Qs[0],r.blockedOn===null);)PE(r),r.blockedOn===null&&Qs.shift()}var kl=Cs.ReactCurrentBatchConfig,Jf=!0;function qA(n,e,r,i){var s=dt,o=kl.transition;kl.transition=null;try{dt=1,fv(n,e,r,i)}finally{dt=s,kl.transition=o}}function HA(n,e,r,i){var s=dt,o=kl.transition;kl.transition=null;try{dt=4,fv(n,e,r,i)}finally{dt=s,kl.transition=o}}function fv(n,e,r,i){if(Jf){var s=Ig(n,e,r,i);if(s===null)_m(n,e,i,Zf,r),R_(n,i);else if($A(s,n,e,r,i))i.stopPropagation();else if(R_(n,i),e&4&&-1<zA.indexOf(n)){for(;s!==null;){var o=hh(s);if(o!==null&&kE(o),o=Ig(n,e,r,i),o===null&&_m(n,e,i,Zf,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else _m(n,e,i,null,r)}}var Zf=null;function Ig(n,e,r,i){if(Zf=null,n=lv(i),n=aa(n),n!==null)if(e=Da(n),e===null)n=null;else if(r=e.tag,r===13){if(n=wE(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Zf=n,null}function OE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PA()){case uv:return 1;case TE:return 4;case Yf:case OA:return 16;case IE:return 536870912;default:return 16}default:return 16}}var eo=null,dv=null,xf=null;function jE(){if(xf)return xf;var n,e=dv,r=e.length,i,s="value"in eo?eo.value:eo.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return xf=s.slice(n,1<i?1-i:void 0)}function bf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Gh(){return!0}function O_(){return!1}function fr(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Gh:O_,this.isPropagationStopped=O_,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gh)},persist:function(){},isPersistent:Gh}),e}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pv=fr(su),ch=Ot({},su,{view:0,detail:0}),KA=fr(ch),cm,hm,Du,ep=Ot({},ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Du&&(Du&&n.type==="mousemove"?(cm=n.screenX-Du.screenX,hm=n.screenY-Du.screenY):hm=cm=0,Du=n),cm)},movementY:function(n){return"movementY"in n?n.movementY:hm}}),j_=fr(ep),WA=Ot({},ep,{dataTransfer:0}),GA=fr(WA),QA=Ot({},ch,{relatedTarget:0}),fm=fr(QA),YA=Ot({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),XA=fr(YA),JA=Ot({},su,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ZA=fr(JA),eN=Ot({},su,{data:0}),D_=fr(eN),tN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=rN[n])?!!e[n]:!1}function mv(){return iN}var sN=Ot({},ch,{key:function(n){if(n.key){var e=tN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=bf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mv,charCode:function(n){return n.type==="keypress"?bf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oN=fr(sN),aN=Ot({},ep,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M_=fr(aN),lN=Ot({},ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mv}),uN=fr(lN),cN=Ot({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),hN=fr(cN),fN=Ot({},ep,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dN=fr(fN),pN=[9,13,27,32],gv=vs&&"CompositionEvent"in window,lc=null;vs&&"documentMode"in document&&(lc=document.documentMode);var mN=vs&&"TextEvent"in window&&!lc,DE=vs&&(!gv||lc&&8<lc&&11>=lc),L_=" ",V_=!1;function ME(n,e){switch(n){case"keyup":return pN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pl=!1;function gN(n,e){switch(n){case"compositionend":return LE(e);case"keypress":return e.which!==32?null:(V_=!0,L_);case"textInput":return n=e.data,n===L_&&V_?null:n;default:return null}}function yN(n,e){if(pl)return n==="compositionend"||!gv&&ME(n,e)?(n=jE(),xf=dv=eo=null,pl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DE&&e.locale!=="ko"?null:e.data;default:return null}}var vN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!vN[n.type]:e==="textarea"}function VE(n,e,r,i){mE(i),e=ed(e,"onChange"),0<e.length&&(r=new pv("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var uc=null,Rc=null;function _N(n){QE(n,0)}function tp(n){var e=yl(n);if(lE(e))return n}function wN(n,e){if(n==="change")return e}var FE=!1;if(vs){var dm;if(vs){var pm="oninput"in document;if(!pm){var U_=document.createElement("div");U_.setAttribute("oninput","return;"),pm=typeof U_.oninput=="function"}dm=pm}else dm=!1;FE=dm&&(!document.documentMode||9<document.documentMode)}function z_(){uc&&(uc.detachEvent("onpropertychange",UE),Rc=uc=null)}function UE(n){if(n.propertyName==="value"&&tp(Rc)){var e=[];VE(e,Rc,n,lv(n)),_E(_N,e)}}function xN(n,e,r){n==="focusin"?(z_(),uc=e,Rc=r,uc.attachEvent("onpropertychange",UE)):n==="focusout"&&z_()}function bN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return tp(Rc)}function EN(n,e){if(n==="click")return tp(e)}function TN(n,e){if(n==="input"||n==="change")return tp(e)}function IN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var oi=typeof Object.is=="function"?Object.is:IN;function Pc(n,e){if(oi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!ag.call(e,s)||!oi(n[s],e[s]))return!1}return!0}function $_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function B_(n,e){var r=$_(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$_(r)}}function zE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?zE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function $E(){for(var n=window,e=Wf();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=Wf(n.document)}return e}function yv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function SN(n){var e=$E(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&zE(r.ownerDocument.documentElement,r)){if(i!==null&&yv(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=B_(r,o);var a=B_(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var CN=vs&&"documentMode"in document&&11>=document.documentMode,ml=null,Sg=null,cc=null,Cg=!1;function q_(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cg||ml==null||ml!==Wf(i)||(i=ml,"selectionStart"in i&&yv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cc&&Pc(cc,i)||(cc=i,i=ed(Sg,"onSelect"),0<i.length&&(e=new pv("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=ml)))}function Qh(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var gl={animationend:Qh("Animation","AnimationEnd"),animationiteration:Qh("Animation","AnimationIteration"),animationstart:Qh("Animation","AnimationStart"),transitionend:Qh("Transition","TransitionEnd")},mm={},BE={};vs&&(BE=document.createElement("div").style,"AnimationEvent"in window||(delete gl.animationend.animation,delete gl.animationiteration.animation,delete gl.animationstart.animation),"TransitionEvent"in window||delete gl.transitionend.transition);function np(n){if(mm[n])return mm[n];if(!gl[n])return n;var e=gl[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in BE)return mm[n]=e[r];return n}var qE=np("animationend"),HE=np("animationiteration"),KE=np("animationstart"),WE=np("transitionend"),GE=new Map,H_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ko(n,e){GE.set(n,e),ja(e,[n])}for(var gm=0;gm<H_.length;gm++){var ym=H_[gm],kN=ym.toLowerCase(),AN=ym[0].toUpperCase()+ym.slice(1);ko(kN,"on"+AN)}ko(qE,"onAnimationEnd");ko(HE,"onAnimationIteration");ko(KE,"onAnimationStart");ko("dblclick","onDoubleClick");ko("focusin","onFocus");ko("focusout","onBlur");ko(WE,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function K_(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,kA(i,e,void 0,n),n.currentTarget=null}function QE(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;K_(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;K_(s,l,c),o=u}}}if(Qf)throw n=bg,Qf=!1,bg=null,n}function xt(n,e){var r=e[Pg];r===void 0&&(r=e[Pg]=new Set);var i=n+"__bubble";r.has(i)||(YE(e,n,2,!1),r.add(i))}function vm(n,e,r){var i=0;e&&(i|=4),YE(r,n,i,e)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function Oc(n){if(!n[Yh]){n[Yh]=!0,rE.forEach(function(r){r!=="selectionchange"&&(NN.has(r)||vm(r,!1,n),vm(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yh]||(e[Yh]=!0,vm("selectionchange",!1,e))}}function YE(n,e,r,i){switch(OE(e)){case 1:var s=qA;break;case 4:s=HA;break;default:s=fv}r=s.bind(null,e,r,n),s=void 0,!xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function _m(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=aa(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}_E(function(){var c=o,d=lv(r),h=[];e:{var m=GE.get(n);if(m!==void 0){var v=pv,w=n;switch(n){case"keypress":if(bf(r)===0)break e;case"keydown":case"keyup":v=oN;break;case"focusin":w="focus",v=fm;break;case"focusout":w="blur",v=fm;break;case"beforeblur":case"afterblur":v=fm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=j_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=GA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=uN;break;case qE:case HE:case KE:v=XA;break;case WE:v=hN;break;case"scroll":v=KA;break;case"wheel":v=dN;break;case"copy":case"cut":case"paste":v=ZA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=M_}var I=(e&4)!==0,C=!I&&n==="scroll",b=I?m!==null?m+"Capture":null:m;I=[];for(var T=c,N;T!==null;){N=T;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,b!==null&&(O=Cc(T,b),O!=null&&I.push(jc(T,O,N)))),C)break;T=T.return}0<I.length&&(m=new v(m,w,null,r,d),h.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&r!==_g&&(w=r.relatedTarget||r.fromElement)&&(aa(w)||w[_s]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=c,w=w?aa(w):null,w!==null&&(C=Da(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(I=j_,O="onMouseLeave",b="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(I=M_,O="onPointerLeave",b="onPointerEnter",T="pointer"),C=v==null?m:yl(v),N=w==null?m:yl(w),m=new I(O,T+"leave",v,r,d),m.target=C,m.relatedTarget=N,O=null,aa(d)===c&&(I=new I(b,T+"enter",w,r,d),I.target=N,I.relatedTarget=C,O=I),C=O,v&&w)t:{for(I=v,b=w,T=0,N=I;N;N=il(N))T++;for(N=0,O=b;O;O=il(O))N++;for(;0<T-N;)I=il(I),T--;for(;0<N-T;)b=il(b),N--;for(;T--;){if(I===b||b!==null&&I===b.alternate)break t;I=il(I),b=il(b)}I=null}else I=null;v!==null&&W_(h,m,v,I,!1),w!==null&&C!==null&&W_(h,C,w,I,!0)}}e:{if(m=c?yl(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=wN;else if(F_(m))if(FE)L=TN;else{L=bN;var U=xN}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=EN);if(L&&(L=L(n,c))){VE(h,L,r,d);break e}U&&U(n,m,c),n==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&pg(m,"number",m.value)}switch(U=c?yl(c):window,n){case"focusin":(F_(U)||U.contentEditable==="true")&&(ml=U,Sg=c,cc=null);break;case"focusout":cc=Sg=ml=null;break;case"mousedown":Cg=!0;break;case"contextmenu":case"mouseup":case"dragend":Cg=!1,q_(h,r,d);break;case"selectionchange":if(CN)break;case"keydown":case"keyup":q_(h,r,d)}var A;if(gv)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else pl?ME(n,r)&&(R="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(DE&&r.locale!=="ko"&&(pl||R!=="onCompositionStart"?R==="onCompositionEnd"&&pl&&(A=jE()):(eo=d,dv="value"in eo?eo.value:eo.textContent,pl=!0)),U=ed(c,R),0<U.length&&(R=new D_(R,n,null,r,d),h.push({event:R,listeners:U}),A?R.data=A:(A=LE(r),A!==null&&(R.data=A)))),(A=mN?gN(n,r):yN(n,r))&&(c=ed(c,"onBeforeInput"),0<c.length&&(d=new D_("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=A))}QE(h,e)})}function jc(n,e,r){return{instance:n,listener:e,currentTarget:r}}function ed(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Cc(n,r),o!=null&&i.unshift(jc(n,o,s)),o=Cc(n,e),o!=null&&i.push(jc(n,o,s))),n=n.return}return i}function il(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function W_(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=Cc(r,o),u!=null&&a.unshift(jc(r,u,l))):s||(u=Cc(r,o),u!=null&&a.push(jc(r,u,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var RN=/\r\n?/g,PN=/\u0000|\uFFFD/g;function G_(n){return(typeof n=="string"?n:""+n).replace(RN,`
`).replace(PN,"")}function Xh(n,e,r){if(e=G_(e),G_(n)!==e&&r)throw Error(ye(425))}function td(){}var kg=null,Ag=null;function Ng(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rg=typeof setTimeout=="function"?setTimeout:void 0,ON=typeof clearTimeout=="function"?clearTimeout:void 0,Q_=typeof Promise=="function"?Promise:void 0,jN=typeof queueMicrotask=="function"?queueMicrotask:typeof Q_<"u"?function(n){return Q_.resolve(null).then(n).catch(DN)}:Rg;function DN(n){setTimeout(function(){throw n})}function wm(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),Nc(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Nc(e)}function ao(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Y_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var ou=Math.random().toString(36).slice(2),Ai="__reactFiber$"+ou,Dc="__reactProps$"+ou,_s="__reactContainer$"+ou,Pg="__reactEvents$"+ou,MN="__reactListeners$"+ou,LN="__reactHandles$"+ou;function aa(n){var e=n[Ai];if(e)return e;for(var r=n.parentNode;r;){if(e=r[_s]||r[Ai]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=Y_(n);n!==null;){if(r=n[Ai])return r;n=Y_(n)}return e}n=r,r=n.parentNode}return null}function hh(n){return n=n[Ai]||n[_s],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function yl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ye(33))}function rp(n){return n[Dc]||null}var Og=[],vl=-1;function Ao(n){return{current:n}}function It(n){0>vl||(n.current=Og[vl],Og[vl]=null,vl--)}function wt(n,e){vl++,Og[vl]=n.current,n.current=e}var _o={},Rn=Ao(_o),Gn=Ao(!1),xa=_o;function zl(n,e){var r=n.type.contextTypes;if(!r)return _o;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Qn(n){return n=n.childContextTypes,n!=null}function nd(){It(Gn),It(Rn)}function X_(n,e,r){if(Rn.current!==_o)throw Error(ye(168));wt(Rn,e),wt(Gn,r)}function XE(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ye(108,xA(n)||"Unknown",s));return Ot({},r,i)}function rd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_o,xa=Rn.current,wt(Rn,n),wt(Gn,Gn.current),!0}function J_(n,e,r){var i=n.stateNode;if(!i)throw Error(ye(169));r?(n=XE(n,e,xa),i.__reactInternalMemoizedMergedChildContext=n,It(Gn),It(Rn),wt(Rn,n)):It(Gn),wt(Gn,r)}var os=null,ip=!1,xm=!1;function JE(n){os===null?os=[n]:os.push(n)}function VN(n){ip=!0,JE(n)}function No(){if(!xm&&os!==null){xm=!0;var n=0,e=dt;try{var r=os;for(dt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}os=null,ip=!1}catch(s){throw os!==null&&(os=os.slice(n+1)),EE(uv,No),s}finally{dt=e,xm=!1}}return null}var _l=[],wl=0,id=null,sd=0,Er=[],Tr=0,ba=null,us=1,cs="";function na(n,e){_l[wl++]=sd,_l[wl++]=id,id=n,sd=e}function ZE(n,e,r){Er[Tr++]=us,Er[Tr++]=cs,Er[Tr++]=ba,ba=n;var i=us;n=cs;var s=32-ni(i)-1;i&=~(1<<s),r+=1;var o=32-ni(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,us=1<<32-ni(e)+s|r<<s|i,cs=o+n}else us=1<<o|r<<s|i,cs=n}function vv(n){n.return!==null&&(na(n,1),ZE(n,1,0))}function _v(n){for(;n===id;)id=_l[--wl],_l[wl]=null,sd=_l[--wl],_l[wl]=null;for(;n===ba;)ba=Er[--Tr],Er[Tr]=null,cs=Er[--Tr],Er[Tr]=null,us=Er[--Tr],Er[Tr]=null}var ar=null,sr=null,Ct=!1,Xr=null;function eT(n,e){var r=kr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function Z_(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ar=n,sr=ao(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ar=n,sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ba!==null?{id:us,overflow:cs}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=kr(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,ar=n,sr=null,!0):!1;default:return!1}}function jg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dg(n){if(Ct){var e=sr;if(e){var r=e;if(!Z_(n,e)){if(jg(n))throw Error(ye(418));e=ao(r.nextSibling);var i=ar;e&&Z_(n,e)?eT(i,r):(n.flags=n.flags&-4097|2,Ct=!1,ar=n)}}else{if(jg(n))throw Error(ye(418));n.flags=n.flags&-4097|2,Ct=!1,ar=n}}}function ew(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function Jh(n){if(n!==ar)return!1;if(!Ct)return ew(n),Ct=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ng(n.type,n.memoizedProps)),e&&(e=sr)){if(jg(n))throw tT(),Error(ye(418));for(;e;)eT(n,e),e=ao(e.nextSibling)}if(ew(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ye(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){sr=ao(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}sr=null}}else sr=ar?ao(n.stateNode.nextSibling):null;return!0}function tT(){for(var n=sr;n;)n=ao(n.nextSibling)}function $l(){sr=ar=null,Ct=!1}function wv(n){Xr===null?Xr=[n]:Xr.push(n)}var FN=Cs.ReactCurrentBatchConfig;function Mu(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var i=r.stateNode}if(!i)throw Error(ye(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,n))}return n}function Zh(n,e){throw n=Object.prototype.toString.call(e),Error(ye(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function tw(n){var e=n._init;return e(n._payload)}function nT(n){function e(b,T){if(n){var N=b.deletions;N===null?(b.deletions=[T],b.flags|=16):N.push(T)}}function r(b,T){if(!n)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function i(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function s(b,T){return b=ho(b,T),b.index=0,b.sibling=null,b}function o(b,T,N){return b.index=N,n?(N=b.alternate,N!==null?(N=N.index,N<T?(b.flags|=2,T):N):(b.flags|=2,T)):(b.flags|=1048576,T)}function a(b){return n&&b.alternate===null&&(b.flags|=2),b}function l(b,T,N,O){return T===null||T.tag!==6?(T=km(N,b.mode,O),T.return=b,T):(T=s(T,N),T.return=b,T)}function u(b,T,N,O){var L=N.type;return L===dl?d(b,T,N.props.children,O,N.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hs&&tw(L)===T.type)?(O=s(T,N.props),O.ref=Mu(b,T,N),O.return=b,O):(O=Af(N.type,N.key,N.props,null,b.mode,O),O.ref=Mu(b,T,N),O.return=b,O)}function c(b,T,N,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=Am(N,b.mode,O),T.return=b,T):(T=s(T,N.children||[]),T.return=b,T)}function d(b,T,N,O,L){return T===null||T.tag!==7?(T=ma(N,b.mode,O,L),T.return=b,T):(T=s(T,N),T.return=b,T)}function h(b,T,N){if(typeof T=="string"&&T!==""||typeof T=="number")return T=km(""+T,b.mode,N),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $h:return N=Af(T.type,T.key,T.props,null,b.mode,N),N.ref=Mu(b,null,T),N.return=b,N;case fl:return T=Am(T,b.mode,N),T.return=b,T;case Hs:var O=T._init;return h(b,O(T._payload),N)}if(Qu(T)||Ru(T))return T=ma(T,b.mode,N,null),T.return=b,T;Zh(b,T)}return null}function m(b,T,N,O){var L=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:l(b,T,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $h:return N.key===L?u(b,T,N,O):null;case fl:return N.key===L?c(b,T,N,O):null;case Hs:return L=N._init,m(b,T,L(N._payload),O)}if(Qu(N)||Ru(N))return L!==null?null:d(b,T,N,O,null);Zh(b,N)}return null}function v(b,T,N,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return b=b.get(N)||null,l(T,b,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $h:return b=b.get(O.key===null?N:O.key)||null,u(T,b,O,L);case fl:return b=b.get(O.key===null?N:O.key)||null,c(T,b,O,L);case Hs:var U=O._init;return v(b,T,N,U(O._payload),L)}if(Qu(O)||Ru(O))return b=b.get(N)||null,d(T,b,O,L,null);Zh(T,O)}return null}function w(b,T,N,O){for(var L=null,U=null,A=T,R=T=0,D=null;A!==null&&R<N.length;R++){A.index>R?(D=A,A=null):D=A.sibling;var M=m(b,A,N[R],O);if(M===null){A===null&&(A=D);break}n&&A&&M.alternate===null&&e(b,A),T=o(M,T,R),U===null?L=M:U.sibling=M,U=M,A=D}if(R===N.length)return r(b,A),Ct&&na(b,R),L;if(A===null){for(;R<N.length;R++)A=h(b,N[R],O),A!==null&&(T=o(A,T,R),U===null?L=A:U.sibling=A,U=A);return Ct&&na(b,R),L}for(A=i(b,A);R<N.length;R++)D=v(A,b,R,N[R],O),D!==null&&(n&&D.alternate!==null&&A.delete(D.key===null?R:D.key),T=o(D,T,R),U===null?L=D:U.sibling=D,U=D);return n&&A.forEach(function(F){return e(b,F)}),Ct&&na(b,R),L}function I(b,T,N,O){var L=Ru(N);if(typeof L!="function")throw Error(ye(150));if(N=L.call(N),N==null)throw Error(ye(151));for(var U=L=null,A=T,R=T=0,D=null,M=N.next();A!==null&&!M.done;R++,M=N.next()){A.index>R?(D=A,A=null):D=A.sibling;var F=m(b,A,M.value,O);if(F===null){A===null&&(A=D);break}n&&A&&F.alternate===null&&e(b,A),T=o(F,T,R),U===null?L=F:U.sibling=F,U=F,A=D}if(M.done)return r(b,A),Ct&&na(b,R),L;if(A===null){for(;!M.done;R++,M=N.next())M=h(b,M.value,O),M!==null&&(T=o(M,T,R),U===null?L=M:U.sibling=M,U=M);return Ct&&na(b,R),L}for(A=i(b,A);!M.done;R++,M=N.next())M=v(A,b,R,M.value,O),M!==null&&(n&&M.alternate!==null&&A.delete(M.key===null?R:M.key),T=o(M,T,R),U===null?L=M:U.sibling=M,U=M);return n&&A.forEach(function($){return e(b,$)}),Ct&&na(b,R),L}function C(b,T,N,O){if(typeof N=="object"&&N!==null&&N.type===dl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case $h:e:{for(var L=N.key,U=T;U!==null;){if(U.key===L){if(L=N.type,L===dl){if(U.tag===7){r(b,U.sibling),T=s(U,N.props.children),T.return=b,b=T;break e}}else if(U.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Hs&&tw(L)===U.type){r(b,U.sibling),T=s(U,N.props),T.ref=Mu(b,U,N),T.return=b,b=T;break e}r(b,U);break}else e(b,U);U=U.sibling}N.type===dl?(T=ma(N.props.children,b.mode,O,N.key),T.return=b,b=T):(O=Af(N.type,N.key,N.props,null,b.mode,O),O.ref=Mu(b,T,N),O.return=b,b=O)}return a(b);case fl:e:{for(U=N.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){r(b,T.sibling),T=s(T,N.children||[]),T.return=b,b=T;break e}else{r(b,T);break}else e(b,T);T=T.sibling}T=Am(N,b.mode,O),T.return=b,b=T}return a(b);case Hs:return U=N._init,C(b,T,U(N._payload),O)}if(Qu(N))return w(b,T,N,O);if(Ru(N))return I(b,T,N,O);Zh(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,T!==null&&T.tag===6?(r(b,T.sibling),T=s(T,N),T.return=b,b=T):(r(b,T),T=km(N,b.mode,O),T.return=b,b=T),a(b)):r(b,T)}return C}var Bl=nT(!0),rT=nT(!1),od=Ao(null),ad=null,xl=null,xv=null;function bv(){xv=xl=ad=null}function Ev(n){var e=od.current;It(od),n._currentValue=e}function Mg(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Al(n,e){ad=n,xv=xl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Kn=!0),n.firstContext=null)}function Pr(n){var e=n._currentValue;if(xv!==n)if(n={context:n,memoizedValue:e,next:null},xl===null){if(ad===null)throw Error(ye(308));xl=n,ad.dependencies={lanes:0,firstContext:n}}else xl=xl.next=n;return e}var la=null;function Tv(n){la===null?la=[n]:la.push(n)}function iT(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Tv(e)):(r.next=s.next,s.next=r),e.interleaved=r,ws(n,i)}function ws(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var Ks=!1;function Iv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ms(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function lo(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,lt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ws(n,r)}return s=i.interleaved,s===null?(e.next=e,Tv(i)):(e.next=s.next,s.next=e),i.interleaved=e,ws(n,r)}function Ef(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,cv(n,r)}}function nw(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function ld(n,e,r,i){var s=n.updateQueue;Ks=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(o!==null){var h=s.baseState;a=0,d=c=u=null,l=o;do{var m=l.lane,v=l.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=n,I=l;switch(m=e,v=r,I.tag){case 1:if(w=I.payload,typeof w=="function"){h=w.call(v,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,m=typeof w=="function"?w.call(v,h,m):w,m==null)break e;h=Ot({},h,m);break e;case 2:Ks=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=v,u=h):d=d.next=v,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ta|=a,n.lanes=a,n.memoizedState=h}}function rw(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ye(191,s));s.call(i)}}}var fh={},Pi=Ao(fh),Mc=Ao(fh),Lc=Ao(fh);function ua(n){if(n===fh)throw Error(ye(174));return n}function Sv(n,e){switch(wt(Lc,e),wt(Mc,n),wt(Pi,fh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=gg(e,n)}It(Pi),wt(Pi,e)}function ql(){It(Pi),It(Mc),It(Lc)}function oT(n){ua(Lc.current);var e=ua(Pi.current),r=gg(e,n.type);e!==r&&(wt(Mc,n),wt(Pi,r))}function Cv(n){Mc.current===n&&(It(Pi),It(Mc))}var Rt=Ao(0);function ud(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bm=[];function kv(){for(var n=0;n<bm.length;n++)bm[n]._workInProgressVersionPrimary=null;bm.length=0}var Tf=Cs.ReactCurrentDispatcher,Em=Cs.ReactCurrentBatchConfig,Ea=0,Pt=null,Zt=null,ln=null,cd=!1,hc=!1,Vc=0,UN=0;function En(){throw Error(ye(321))}function Av(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!oi(n[r],e[r]))return!1;return!0}function Nv(n,e,r,i,s,o){if(Ea=o,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tf.current=n===null||n.memoizedState===null?qN:HN,n=r(i,s),hc){o=0;do{if(hc=!1,Vc=0,25<=o)throw Error(ye(301));o+=1,ln=Zt=null,e.updateQueue=null,Tf.current=KN,n=r(i,s)}while(hc)}if(Tf.current=hd,e=Zt!==null&&Zt.next!==null,Ea=0,ln=Zt=Pt=null,cd=!1,e)throw Error(ye(300));return n}function Rv(){var n=Vc!==0;return Vc=0,n}function Ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Pt.memoizedState=ln=n:ln=ln.next=n,ln}function Or(){if(Zt===null){var n=Pt.alternate;n=n!==null?n.memoizedState:null}else n=Zt.next;var e=ln===null?Pt.memoizedState:ln.next;if(e!==null)ln=e,Zt=n;else{if(n===null)throw Error(ye(310));Zt=n,n={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},ln===null?Pt.memoizedState=ln=n:ln=ln.next=n}return ln}function Fc(n,e){return typeof e=="function"?e(n):e}function Tm(n){var e=Or(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=n;var i=Zt,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var d=c.lane;if((Ea&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,a=i):u=u.next=h,Pt.lanes|=d,Ta|=d}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,oi(i,e.memoizedState)||(Kn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Pt.lanes|=o,Ta|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Im(n){var e=Or(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);oi(o,e.memoizedState)||(Kn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function aT(){}function lT(n,e){var r=Pt,i=Or(),s=e(),o=!oi(i.memoizedState,s);if(o&&(i.memoizedState=s,Kn=!0),i=i.queue,Pv(hT.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||ln!==null&&ln.memoizedState.tag&1){if(r.flags|=2048,Uc(9,cT.bind(null,r,i,s,e),void 0,null),un===null)throw Error(ye(349));Ea&30||uT(r,e,s)}return s}function uT(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function cT(n,e,r,i){e.value=r,e.getSnapshot=i,fT(e)&&dT(n)}function hT(n,e,r){return r(function(){fT(e)&&dT(n)})}function fT(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!oi(n,r)}catch{return!0}}function dT(n){var e=ws(n,1);e!==null&&ri(e,n,1,-1)}function iw(n){var e=Ii();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:n},e.queue=n,n=n.dispatch=BN.bind(null,Pt,n),[e.memoizedState,n]}function Uc(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function pT(){return Or().memoizedState}function If(n,e,r,i){var s=Ii();Pt.flags|=n,s.memoizedState=Uc(1|e,r,void 0,i===void 0?null:i)}function sp(n,e,r,i){var s=Or();i=i===void 0?null:i;var o=void 0;if(Zt!==null){var a=Zt.memoizedState;if(o=a.destroy,i!==null&&Av(i,a.deps)){s.memoizedState=Uc(e,r,o,i);return}}Pt.flags|=n,s.memoizedState=Uc(1|e,r,o,i)}function sw(n,e){return If(8390656,8,n,e)}function Pv(n,e){return sp(2048,8,n,e)}function mT(n,e){return sp(4,2,n,e)}function gT(n,e){return sp(4,4,n,e)}function yT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function vT(n,e,r){return r=r!=null?r.concat([n]):null,sp(4,4,yT.bind(null,e,n),r)}function Ov(){}function _T(n,e){var r=Or();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Av(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function wT(n,e){var r=Or();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Av(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function xT(n,e,r){return Ea&21?(oi(r,e)||(r=SE(),Pt.lanes|=r,Ta|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Kn=!0),n.memoizedState=r)}function zN(n,e){var r=dt;dt=r!==0&&4>r?r:4,n(!0);var i=Em.transition;Em.transition={};try{n(!1),e()}finally{dt=r,Em.transition=i}}function bT(){return Or().memoizedState}function $N(n,e,r){var i=co(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},ET(n))TT(e,r);else if(r=iT(n,e,r,i),r!==null){var s=Vn();ri(r,n,i,s),IT(r,e,i)}}function BN(n,e,r){var i=co(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(ET(n))TT(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,oi(l,a)){var u=e.interleaved;u===null?(s.next=s,Tv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=iT(n,e,s,i),r!==null&&(s=Vn(),ri(r,n,i,s),IT(r,e,i))}}function ET(n){var e=n.alternate;return n===Pt||e!==null&&e===Pt}function TT(n,e){hc=cd=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function IT(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,cv(n,r)}}var hd={readContext:Pr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},qN={readContext:Pr,useCallback:function(n,e){return Ii().memoizedState=[n,e===void 0?null:e],n},useContext:Pr,useEffect:sw,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,If(4194308,4,yT.bind(null,e,n),r)},useLayoutEffect:function(n,e){return If(4194308,4,n,e)},useInsertionEffect:function(n,e){return If(4,2,n,e)},useMemo:function(n,e){var r=Ii();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Ii();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=$N.bind(null,Pt,n),[i.memoizedState,n]},useRef:function(n){var e=Ii();return n={current:n},e.memoizedState=n},useState:iw,useDebugValue:Ov,useDeferredValue:function(n){return Ii().memoizedState=n},useTransition:function(){var n=iw(!1),e=n[0];return n=zN.bind(null,n[1]),Ii().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Pt,s=Ii();if(Ct){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=e(),un===null)throw Error(ye(349));Ea&30||uT(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,sw(hT.bind(null,i,o,n),[n]),i.flags|=2048,Uc(9,cT.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=Ii(),e=un.identifierPrefix;if(Ct){var r=cs,i=us;r=(i&~(1<<32-ni(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Vc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=UN++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},HN={readContext:Pr,useCallback:_T,useContext:Pr,useEffect:Pv,useImperativeHandle:vT,useInsertionEffect:mT,useLayoutEffect:gT,useMemo:wT,useReducer:Tm,useRef:pT,useState:function(){return Tm(Fc)},useDebugValue:Ov,useDeferredValue:function(n){var e=Or();return xT(e,Zt.memoizedState,n)},useTransition:function(){var n=Tm(Fc)[0],e=Or().memoizedState;return[n,e]},useMutableSource:aT,useSyncExternalStore:lT,useId:bT,unstable_isNewReconciler:!1},KN={readContext:Pr,useCallback:_T,useContext:Pr,useEffect:Pv,useImperativeHandle:vT,useInsertionEffect:mT,useLayoutEffect:gT,useMemo:wT,useReducer:Im,useRef:pT,useState:function(){return Im(Fc)},useDebugValue:Ov,useDeferredValue:function(n){var e=Or();return Zt===null?e.memoizedState=n:xT(e,Zt.memoizedState,n)},useTransition:function(){var n=Im(Fc)[0],e=Or().memoizedState;return[n,e]},useMutableSource:aT,useSyncExternalStore:lT,useId:bT,unstable_isNewReconciler:!1};function Qr(n,e){if(n&&n.defaultProps){e=Ot({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Lg(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Ot({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var op={isMounted:function(n){return(n=n._reactInternals)?Da(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Vn(),s=co(n),o=ms(i,s);o.payload=e,r!=null&&(o.callback=r),e=lo(n,o,s),e!==null&&(ri(e,n,s,i),Ef(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Vn(),s=co(n),o=ms(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=lo(n,o,s),e!==null&&(ri(e,n,s,i),Ef(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Vn(),i=co(n),s=ms(r,i);s.tag=2,e!=null&&(s.callback=e),e=lo(n,s,i),e!==null&&(ri(e,n,i,r),Ef(e,n,i))}};function ow(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Pc(r,i)||!Pc(s,o):!0}function ST(n,e,r){var i=!1,s=_o,o=e.contextType;return typeof o=="object"&&o!==null?o=Pr(o):(s=Qn(e)?xa:Rn.current,i=e.contextTypes,o=(i=i!=null)?zl(n,s):_o),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=op,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function aw(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&op.enqueueReplaceState(e,e.state,null)}function Vg(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},Iv(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Pr(o):(o=Qn(e)?xa:Rn.current,s.context=zl(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Lg(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&op.enqueueReplaceState(s,s.state,null),ld(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Hl(n,e){try{var r="",i=e;do r+=wA(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Sm(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function Fg(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var WN=typeof WeakMap=="function"?WeakMap:Map;function CT(n,e,r){r=ms(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){dd||(dd=!0,Qg=i),Fg(n,e)},r}function kT(n,e,r){r=ms(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){Fg(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Fg(n,e),typeof i!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function lw(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new WN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=aR.bind(null,n,e,r),e.then(n,n))}function uw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function cw(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ms(-1,1),e.tag=2,lo(r,e,1))),r.lanes|=1),n)}var GN=Cs.ReactCurrentOwner,Kn=!1;function Mn(n,e,r,i){e.child=n===null?rT(e,null,r,i):Bl(e,n.child,r,i)}function hw(n,e,r,i,s){r=r.render;var o=e.ref;return Al(e,s),i=Nv(n,e,r,i,o,s),r=Rv(),n!==null&&!Kn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,xs(n,e,s)):(Ct&&r&&vv(e),e.flags|=1,Mn(n,e,i,s),e.child)}function fw(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!zv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,AT(n,e,o,i,s)):(n=Af(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Pc,r(a,i)&&n.ref===e.ref)return xs(n,e,s)}return e.flags|=1,n=ho(o,i),n.ref=e.ref,n.return=e,e.child=n}function AT(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(Pc(o,i)&&n.ref===e.ref)if(Kn=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Kn=!0);else return e.lanes=n.lanes,xs(n,e,s)}return Ug(n,e,r,i,s)}function NT(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(El,ir),ir|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,wt(El,ir),ir|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,wt(El,ir),ir|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,wt(El,ir),ir|=i;return Mn(n,e,s,r),e.child}function RT(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ug(n,e,r,i,s){var o=Qn(r)?xa:Rn.current;return o=zl(e,o),Al(e,s),r=Nv(n,e,r,i,o,s),i=Rv(),n!==null&&!Kn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,xs(n,e,s)):(Ct&&i&&vv(e),e.flags|=1,Mn(n,e,r,s),e.child)}function dw(n,e,r,i,s){if(Qn(r)){var o=!0;rd(e)}else o=!1;if(Al(e,s),e.stateNode===null)Sf(n,e),ST(e,r,i),Vg(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Pr(c):(c=Qn(r)?xa:Rn.current,c=zl(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&aw(e,a,i,c),Ks=!1;var m=e.memoizedState;a.state=m,ld(e,i,a,s),u=e.memoizedState,l!==i||m!==u||Gn.current||Ks?(typeof d=="function"&&(Lg(e,r,d,i),u=e.memoizedState),(l=Ks||ow(e,r,l,i,m,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,sT(n,e),l=e.memoizedProps,c=e.type===e.elementType?l:Qr(e.type,l),a.props=c,h=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Pr(u):(u=Qn(r)?xa:Rn.current,u=zl(e,u));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==u)&&aw(e,a,i,u),Ks=!1,m=e.memoizedState,a.state=m,ld(e,i,a,s);var w=e.memoizedState;l!==h||m!==w||Gn.current||Ks?(typeof v=="function"&&(Lg(e,r,v,i),w=e.memoizedState),(c=Ks||ow(e,r,c,i,m,w,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,w,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,w,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),a.props=i,a.state=w,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return zg(n,e,r,i,o,s)}function zg(n,e,r,i,s,o){RT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&J_(e,r,!1),xs(n,e,o);i=e.stateNode,GN.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Bl(e,n.child,null,o),e.child=Bl(e,null,l,o)):Mn(n,e,l,o),e.memoizedState=i.state,s&&J_(e,r,!0),e.child}function PT(n){var e=n.stateNode;e.pendingContext?X_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&X_(n,e.context,!1),Sv(n,e.containerInfo)}function pw(n,e,r,i,s){return $l(),wv(s),e.flags|=256,Mn(n,e,r,i),e.child}var $g={dehydrated:null,treeContext:null,retryLane:0};function Bg(n){return{baseLanes:n,cachePool:null,transitions:null}}function OT(n,e,r){var i=e.pendingProps,s=Rt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),wt(Rt,s&1),n===null)return Dg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=up(a,i,0,null),n=ma(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Bg(r),e.memoizedState=$g,n):jv(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return QN(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=ho(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ho(l,o):(o=ma(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?Bg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=$g,i}return o=n.child,n=o.sibling,i=ho(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function jv(n,e){return e=up({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ef(n,e,r,i){return i!==null&&wv(i),Bl(e,n.child,null,r),n=jv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function QN(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=Sm(Error(ye(422))),ef(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=up({mode:"visible",children:i.children},s,0,null),o=ma(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Bl(e,n.child,null,a),e.child.memoizedState=Bg(a),e.memoizedState=$g,o);if(!(e.mode&1))return ef(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(ye(419)),i=Sm(o,i,void 0),ef(n,e,a,i)}if(l=(a&n.childLanes)!==0,Kn||l){if(i=un,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ws(n,s),ri(i,n,s,-1))}return Uv(),i=Sm(Error(ye(421))),ef(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=lR.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,sr=ao(s.nextSibling),ar=e,Ct=!0,Xr=null,n!==null&&(Er[Tr++]=us,Er[Tr++]=cs,Er[Tr++]=ba,us=n.id,cs=n.overflow,ba=e),e=jv(e,i.children),e.flags|=4096,e)}function mw(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Mg(n.return,e,r)}function Cm(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function jT(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Mn(n,e,i.children,r),i=Rt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mw(n,r,e);else if(n.tag===19)mw(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(wt(Rt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&ud(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Cm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&ud(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}Cm(e,!0,r,null,o);break;case"together":Cm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function xs(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Ta|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ye(153));if(e.child!==null){for(n=e.child,r=ho(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=ho(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function YN(n,e,r){switch(e.tag){case 3:PT(e),$l();break;case 5:oT(e);break;case 1:Qn(e.type)&&rd(e);break;case 4:Sv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;wt(od,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(wt(Rt,Rt.current&1),e.flags|=128,null):r&e.child.childLanes?OT(n,e,r):(wt(Rt,Rt.current&1),n=xs(n,e,r),n!==null?n.sibling:null);wt(Rt,Rt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return jT(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),wt(Rt,Rt.current),i)break;return null;case 22:case 23:return e.lanes=0,NT(n,e,r)}return xs(n,e,r)}var DT,qg,MT,LT;DT=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};qg=function(){};MT=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,ua(Pi.current);var o=null;switch(r){case"input":s=fg(n,s),i=fg(n,i),o=[];break;case"select":s=Ot({},s,{value:void 0}),i=Ot({},i,{value:void 0}),o=[];break;case"textarea":s=mg(n,s),i=mg(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=td)}yg(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ic.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ic.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&xt("scroll",n),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};LT=function(n,e,r,i){r!==i&&(e.flags|=4)};function Lu(n,e){if(!Ct)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Tn(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function XN(n,e,r){var i=e.pendingProps;switch(_v(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(e),null;case 1:return Qn(e.type)&&nd(),Tn(e),null;case 3:return i=e.stateNode,ql(),It(Gn),It(Rn),kv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Jh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xr!==null&&(Jg(Xr),Xr=null))),qg(n,e),Tn(e),null;case 5:Cv(e);var s=ua(Lc.current);if(r=e.type,n!==null&&e.stateNode!=null)MT(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ye(166));return Tn(e),null}if(n=ua(Pi.current),Jh(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Ai]=e,i[Dc]=o,n=(e.mode&1)!==0,r){case"dialog":xt("cancel",i),xt("close",i);break;case"iframe":case"object":case"embed":xt("load",i);break;case"video":case"audio":for(s=0;s<Xu.length;s++)xt(Xu[s],i);break;case"source":xt("error",i);break;case"img":case"image":case"link":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"input":T_(i,o),xt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},xt("invalid",i);break;case"textarea":S_(i,o),xt("invalid",i)}yg(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Xh(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Xh(i.textContent,l,n),s=["children",""+l]):Ic.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xt("scroll",i)}switch(r){case"input":Bh(i),I_(i,o,!0);break;case"textarea":Bh(i),C_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=td)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=hE(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Ai]=e,n[Dc]=i,DT(n,e,!1,!1),e.stateNode=n;e:{switch(a=vg(r,i),r){case"dialog":xt("cancel",n),xt("close",n),s=i;break;case"iframe":case"object":case"embed":xt("load",n),s=i;break;case"video":case"audio":for(s=0;s<Xu.length;s++)xt(Xu[s],n);s=i;break;case"source":xt("error",n),s=i;break;case"img":case"image":case"link":xt("error",n),xt("load",n),s=i;break;case"details":xt("toggle",n),s=i;break;case"input":T_(n,i),s=fg(n,i),xt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ot({},i,{value:void 0}),xt("invalid",n);break;case"textarea":S_(n,i),s=mg(n,i),xt("invalid",n);break;default:s=i}yg(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?pE(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&fE(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Sc(n,u):typeof u=="number"&&Sc(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ic.hasOwnProperty(o)?u!=null&&o==="onScroll"&&xt("scroll",n):u!=null&&iv(n,o,u,a))}switch(r){case"input":Bh(n),I_(n,i,!1);break;case"textarea":Bh(n),C_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+vo(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Il(n,!!i.multiple,o,!1):i.defaultValue!=null&&Il(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=td)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tn(e),null;case 6:if(n&&e.stateNode!=null)LT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ye(166));if(r=ua(Lc.current),ua(Pi.current),Jh(e)){if(i=e.stateNode,r=e.memoizedProps,i[Ai]=e,(o=i.nodeValue!==r)&&(n=ar,n!==null))switch(n.tag){case 3:Xh(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xh(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ai]=e,e.stateNode=i}return Tn(e),null;case 13:if(It(Rt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ct&&sr!==null&&e.mode&1&&!(e.flags&128))tT(),$l(),e.flags|=98560,o=!1;else if(o=Jh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(ye(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ye(317));o[Ai]=e}else $l(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tn(e),o=!1}else Xr!==null&&(Jg(Xr),Xr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Rt.current&1?tn===0&&(tn=3):Uv())),e.updateQueue!==null&&(e.flags|=4),Tn(e),null);case 4:return ql(),qg(n,e),n===null&&Oc(e.stateNode.containerInfo),Tn(e),null;case 10:return Ev(e.type._context),Tn(e),null;case 17:return Qn(e.type)&&nd(),Tn(e),null;case 19:if(It(Rt),o=e.memoizedState,o===null)return Tn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Lu(o,!1);else{if(tn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=ud(n),a!==null){for(e.flags|=128,Lu(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return wt(Rt,Rt.current&1|2),e.child}n=n.sibling}o.tail!==null&&Bt()>Kl&&(e.flags|=128,i=!0,Lu(o,!1),e.lanes=4194304)}else{if(!i)if(n=ud(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Lu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ct)return Tn(e),null}else 2*Bt()-o.renderingStartTime>Kl&&r!==1073741824&&(e.flags|=128,i=!0,Lu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Bt(),e.sibling=null,r=Rt.current,wt(Rt,i?r&1|2:r&1),e):(Tn(e),null);case 22:case 23:return Fv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ir&1073741824&&(Tn(e),e.subtreeFlags&6&&(e.flags|=8192)):Tn(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function JN(n,e){switch(_v(e),e.tag){case 1:return Qn(e.type)&&nd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ql(),It(Gn),It(Rn),kv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Cv(e),null;case 13:if(It(Rt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));$l()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return It(Rt),null;case 4:return ql(),null;case 10:return Ev(e.type._context),null;case 22:case 23:return Fv(),null;case 24:return null;default:return null}}var tf=!1,kn=!1,ZN=typeof WeakSet=="function"?WeakSet:Set,je=null;function bl(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Vt(n,e,i)}else r.current=null}function Hg(n,e,r){try{r()}catch(i){Vt(n,e,i)}}var gw=!1;function eR(n,e){if(kg=Jf,n=$E(),yv(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||i!==0&&h.nodeType!==3||(u=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)m=h,h=v;for(;;){if(h===n)break t;if(m===r&&++c===s&&(l=a),m===o&&++d===i&&(u=a),(v=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=v}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ag={focusedElem:n,selectionRange:r},Jf=!1,je=e;je!==null;)if(e=je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,je=n;else for(;je!==null;){e=je;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,C=w.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?I:Qr(e.type,I),C);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(O){Vt(e,e.return,O)}if(n=e.sibling,n!==null){n.return=e.return,je=n;break}je=e.return}return w=gw,gw=!1,w}function fc(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&Hg(e,r,o)}s=s.next}while(s!==i)}}function ap(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Kg(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function VT(n){var e=n.alternate;e!==null&&(n.alternate=null,VT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ai],delete e[Dc],delete e[Pg],delete e[MN],delete e[LN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function FT(n){return n.tag===5||n.tag===3||n.tag===4}function yw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||FT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=td));else if(i!==4&&(n=n.child,n!==null))for(Wg(n,e,r),n=n.sibling;n!==null;)Wg(n,e,r),n=n.sibling}function Gg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Gg(n,e,r),n=n.sibling;n!==null;)Gg(n,e,r),n=n.sibling}var cn=null,Yr=!1;function zs(n,e,r){for(r=r.child;r!==null;)UT(n,e,r),r=r.sibling}function UT(n,e,r){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(Zd,r)}catch{}switch(r.tag){case 5:kn||bl(r,e);case 6:var i=cn,s=Yr;cn=null,zs(n,e,r),cn=i,Yr=s,cn!==null&&(Yr?(n=cn,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):cn.removeChild(r.stateNode));break;case 18:cn!==null&&(Yr?(n=cn,r=r.stateNode,n.nodeType===8?wm(n.parentNode,r):n.nodeType===1&&wm(n,r),Nc(n)):wm(cn,r.stateNode));break;case 4:i=cn,s=Yr,cn=r.stateNode.containerInfo,Yr=!0,zs(n,e,r),cn=i,Yr=s;break;case 0:case 11:case 14:case 15:if(!kn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Hg(r,e,a),s=s.next}while(s!==i)}zs(n,e,r);break;case 1:if(!kn&&(bl(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Vt(r,e,l)}zs(n,e,r);break;case 21:zs(n,e,r);break;case 22:r.mode&1?(kn=(i=kn)||r.memoizedState!==null,zs(n,e,r),kn=i):zs(n,e,r);break;default:zs(n,e,r)}}function vw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new ZN),e.forEach(function(i){var s=uR.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Kr(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:cn=l.stateNode,Yr=!1;break e;case 3:cn=l.stateNode.containerInfo,Yr=!0;break e;case 4:cn=l.stateNode.containerInfo,Yr=!0;break e}l=l.return}if(cn===null)throw Error(ye(160));UT(o,a,s),cn=null,Yr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Vt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zT(e,n),e=e.sibling}function zT(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Kr(e,n),Ei(n),i&4){try{fc(3,n,n.return),ap(3,n)}catch(I){Vt(n,n.return,I)}try{fc(5,n,n.return)}catch(I){Vt(n,n.return,I)}}break;case 1:Kr(e,n),Ei(n),i&512&&r!==null&&bl(r,r.return);break;case 5:if(Kr(e,n),Ei(n),i&512&&r!==null&&bl(r,r.return),n.flags&32){var s=n.stateNode;try{Sc(s,"")}catch(I){Vt(n,n.return,I)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&uE(s,o),vg(l,a);var c=vg(l,o);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];d==="style"?pE(s,h):d==="dangerouslySetInnerHTML"?fE(s,h):d==="children"?Sc(s,h):iv(s,d,h,c)}switch(l){case"input":dg(s,o);break;case"textarea":cE(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Il(s,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?Il(s,!!o.multiple,o.defaultValue,!0):Il(s,!!o.multiple,o.multiple?[]:"",!1))}s[Dc]=o}catch(I){Vt(n,n.return,I)}}break;case 6:if(Kr(e,n),Ei(n),i&4){if(n.stateNode===null)throw Error(ye(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(I){Vt(n,n.return,I)}}break;case 3:if(Kr(e,n),Ei(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Nc(e.containerInfo)}catch(I){Vt(n,n.return,I)}break;case 4:Kr(e,n),Ei(n);break;case 13:Kr(e,n),Ei(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Lv=Bt())),i&4&&vw(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(kn=(c=kn)||d,Kr(e,n),kn=c):Kr(e,n),Ei(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(je=n,d=n.child;d!==null;){for(h=je=d;je!==null;){switch(m=je,v=m.child,m.tag){case 0:case 11:case 14:case 15:fc(4,m,m.return);break;case 1:bl(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){i=m,r=m.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){Vt(i,r,I)}}break;case 5:bl(m,m.return);break;case 22:if(m.memoizedState!==null){ww(h);continue}}v!==null?(v.return=m,je=v):ww(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=dE("display",a))}catch(I){Vt(n,n.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(I){Vt(n,n.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kr(e,n),Ei(n),i&4&&vw(n);break;case 21:break;default:Kr(e,n),Ei(n)}}function Ei(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(FT(r)){var i=r;break e}r=r.return}throw Error(ye(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Sc(s,""),i.flags&=-33);var o=yw(n);Gg(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=yw(n);Wg(n,l,a);break;default:throw Error(ye(161))}}catch(u){Vt(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function tR(n,e,r){je=n,$T(n)}function $T(n,e,r){for(var i=(n.mode&1)!==0;je!==null;){var s=je,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||tf;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||kn;l=tf;var c=kn;if(tf=a,(kn=u)&&!c)for(je=s;je!==null;)a=je,u=a.child,a.tag===22&&a.memoizedState!==null?xw(s):u!==null?(u.return=a,je=u):xw(s);for(;o!==null;)je=o,$T(o),o=o.sibling;je=s,tf=l,kn=c}_w(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,je=o):_w(n)}}function _w(n){for(;je!==null;){var e=je;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||ap(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!kn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Qr(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&rw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}rw(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Nc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}kn||e.flags&512&&Kg(e)}catch(m){Vt(e,e.return,m)}}if(e===n){je=null;break}if(r=e.sibling,r!==null){r.return=e.return,je=r;break}je=e.return}}function ww(n){for(;je!==null;){var e=je;if(e===n){je=null;break}var r=e.sibling;if(r!==null){r.return=e.return,je=r;break}je=e.return}}function xw(n){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ap(4,e)}catch(u){Vt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Vt(e,s,u)}}var o=e.return;try{Kg(e)}catch(u){Vt(e,o,u)}break;case 5:var a=e.return;try{Kg(e)}catch(u){Vt(e,a,u)}}}catch(u){Vt(e,e.return,u)}if(e===n){je=null;break}var l=e.sibling;if(l!==null){l.return=e.return,je=l;break}je=e.return}}var nR=Math.ceil,fd=Cs.ReactCurrentDispatcher,Dv=Cs.ReactCurrentOwner,Ar=Cs.ReactCurrentBatchConfig,lt=0,un=null,Qt=null,dn=0,ir=0,El=Ao(0),tn=0,zc=null,Ta=0,lp=0,Mv=0,dc=null,qn=null,Lv=0,Kl=1/0,ss=null,dd=!1,Qg=null,uo=null,nf=!1,to=null,pd=0,pc=0,Yg=null,Cf=-1,kf=0;function Vn(){return lt&6?Bt():Cf!==-1?Cf:Cf=Bt()}function co(n){return n.mode&1?lt&2&&dn!==0?dn&-dn:FN.transition!==null?(kf===0&&(kf=SE()),kf):(n=dt,n!==0||(n=window.event,n=n===void 0?16:OE(n.type)),n):1}function ri(n,e,r,i){if(50<pc)throw pc=0,Yg=null,Error(ye(185));uh(n,r,i),(!(lt&2)||n!==un)&&(n===un&&(!(lt&2)&&(lp|=r),tn===4&&Ys(n,dn)),Yn(n,i),r===1&&lt===0&&!(e.mode&1)&&(Kl=Bt()+500,ip&&No()))}function Yn(n,e){var r=n.callbackNode;FA(n,e);var i=Xf(n,n===un?dn:0);if(i===0)r!==null&&N_(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&N_(r),e===1)n.tag===0?VN(bw.bind(null,n)):JE(bw.bind(null,n)),jN(function(){!(lt&6)&&No()}),r=null;else{switch(CE(i)){case 1:r=uv;break;case 4:r=TE;break;case 16:r=Yf;break;case 536870912:r=IE;break;default:r=Yf}r=YT(r,BT.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function BT(n,e){if(Cf=-1,kf=0,lt&6)throw Error(ye(327));var r=n.callbackNode;if(Nl()&&n.callbackNode!==r)return null;var i=Xf(n,n===un?dn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=md(n,i);else{e=i;var s=lt;lt|=2;var o=HT();(un!==n||dn!==e)&&(ss=null,Kl=Bt()+500,pa(n,e));do try{sR();break}catch(l){qT(n,l)}while(!0);bv(),fd.current=o,lt=s,Qt!==null?e=0:(un=null,dn=0,e=tn)}if(e!==0){if(e===2&&(s=Eg(n),s!==0&&(i=s,e=Xg(n,s))),e===1)throw r=zc,pa(n,0),Ys(n,i),Yn(n,Bt()),r;if(e===6)Ys(n,i);else{if(s=n.current.alternate,!(i&30)&&!rR(s)&&(e=md(n,i),e===2&&(o=Eg(n),o!==0&&(i=o,e=Xg(n,o))),e===1))throw r=zc,pa(n,0),Ys(n,i),Yn(n,Bt()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(ye(345));case 2:ra(n,qn,ss);break;case 3:if(Ys(n,i),(i&130023424)===i&&(e=Lv+500-Bt(),10<e)){if(Xf(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Vn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Rg(ra.bind(null,n,qn,ss),e);break}ra(n,qn,ss);break;case 4:if(Ys(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-ni(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Bt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nR(i/1960))-i,10<i){n.timeoutHandle=Rg(ra.bind(null,n,qn,ss),i);break}ra(n,qn,ss);break;case 5:ra(n,qn,ss);break;default:throw Error(ye(329))}}}return Yn(n,Bt()),n.callbackNode===r?BT.bind(null,n):null}function Xg(n,e){var r=dc;return n.current.memoizedState.isDehydrated&&(pa(n,e).flags|=256),n=md(n,e),n!==2&&(e=qn,qn=r,e!==null&&Jg(e)),n}function Jg(n){qn===null?qn=n:qn.push.apply(qn,n)}function rR(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!oi(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ys(n,e){for(e&=~Mv,e&=~lp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-ni(e),i=1<<r;n[r]=-1,e&=~i}}function bw(n){if(lt&6)throw Error(ye(327));Nl();var e=Xf(n,0);if(!(e&1))return Yn(n,Bt()),null;var r=md(n,e);if(n.tag!==0&&r===2){var i=Eg(n);i!==0&&(e=i,r=Xg(n,i))}if(r===1)throw r=zc,pa(n,0),Ys(n,e),Yn(n,Bt()),r;if(r===6)throw Error(ye(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ra(n,qn,ss),Yn(n,Bt()),null}function Vv(n,e){var r=lt;lt|=1;try{return n(e)}finally{lt=r,lt===0&&(Kl=Bt()+500,ip&&No())}}function Ia(n){to!==null&&to.tag===0&&!(lt&6)&&Nl();var e=lt;lt|=1;var r=Ar.transition,i=dt;try{if(Ar.transition=null,dt=1,n)return n()}finally{dt=i,Ar.transition=r,lt=e,!(lt&6)&&No()}}function Fv(){ir=El.current,It(El)}function pa(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,ON(r)),Qt!==null)for(r=Qt.return;r!==null;){var i=r;switch(_v(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nd();break;case 3:ql(),It(Gn),It(Rn),kv();break;case 5:Cv(i);break;case 4:ql();break;case 13:It(Rt);break;case 19:It(Rt);break;case 10:Ev(i.type._context);break;case 22:case 23:Fv()}r=r.return}if(un=n,Qt=n=ho(n.current,null),dn=ir=e,tn=0,zc=null,Mv=lp=Ta=0,qn=dc=null,la!==null){for(e=0;e<la.length;e++)if(r=la[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}la=null}return n}function qT(n,e){do{var r=Qt;try{if(bv(),Tf.current=hd,cd){for(var i=Pt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}cd=!1}if(Ea=0,ln=Zt=Pt=null,hc=!1,Vc=0,Dv.current=null,r===null||r.return===null){tn=1,zc=e,Qt=null;break}e:{var o=n,a=r.return,l=r,u=e;if(e=dn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=uw(a);if(v!==null){v.flags&=-257,cw(v,a,l,o,e),v.mode&1&&lw(o,c,e),e=v,u=c;var w=e.updateQueue;if(w===null){var I=new Set;I.add(u),e.updateQueue=I}else w.add(u);break e}else{if(!(e&1)){lw(o,c,e),Uv();break e}u=Error(ye(426))}}else if(Ct&&l.mode&1){var C=uw(a);if(C!==null){!(C.flags&65536)&&(C.flags|=256),cw(C,a,l,o,e),wv(Hl(u,l));break e}}o=u=Hl(u,l),tn!==4&&(tn=2),dc===null?dc=[o]:dc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=CT(o,u,e);nw(o,b);break e;case 1:l=u;var T=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(uo===null||!uo.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var O=kT(o,l,e);nw(o,O);break e}}o=o.return}while(o!==null)}WT(r)}catch(L){e=L,Qt===r&&r!==null&&(Qt=r=r.return);continue}break}while(!0)}function HT(){var n=fd.current;return fd.current=hd,n===null?hd:n}function Uv(){(tn===0||tn===3||tn===2)&&(tn=4),un===null||!(Ta&268435455)&&!(lp&268435455)||Ys(un,dn)}function md(n,e){var r=lt;lt|=2;var i=HT();(un!==n||dn!==e)&&(ss=null,pa(n,e));do try{iR();break}catch(s){qT(n,s)}while(!0);if(bv(),lt=r,fd.current=i,Qt!==null)throw Error(ye(261));return un=null,dn=0,tn}function iR(){for(;Qt!==null;)KT(Qt)}function sR(){for(;Qt!==null&&!NA();)KT(Qt)}function KT(n){var e=QT(n.alternate,n,ir);n.memoizedProps=n.pendingProps,e===null?WT(n):Qt=e,Dv.current=null}function WT(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=JN(r,e),r!==null){r.flags&=32767,Qt=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{tn=6,Qt=null;return}}else if(r=XN(r,e,ir),r!==null){Qt=r;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=n}while(e!==null);tn===0&&(tn=5)}function ra(n,e,r){var i=dt,s=Ar.transition;try{Ar.transition=null,dt=1,oR(n,e,r,i)}finally{Ar.transition=s,dt=i}return null}function oR(n,e,r,i){do Nl();while(to!==null);if(lt&6)throw Error(ye(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(ye(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(UA(n,o),n===un&&(Qt=un=null,dn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nf||(nf=!0,YT(Yf,function(){return Nl(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ar.transition,Ar.transition=null;var a=dt;dt=1;var l=lt;lt|=4,Dv.current=null,eR(n,r),zT(r,n),SN(Ag),Jf=!!kg,Ag=kg=null,n.current=r,tR(r),RA(),lt=l,dt=a,Ar.transition=o}else n.current=r;if(nf&&(nf=!1,to=n,pd=s),o=n.pendingLanes,o===0&&(uo=null),jA(r.stateNode),Yn(n,Bt()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(dd)throw dd=!1,n=Qg,Qg=null,n;return pd&1&&n.tag!==0&&Nl(),o=n.pendingLanes,o&1?n===Yg?pc++:(pc=0,Yg=n):pc=0,No(),null}function Nl(){if(to!==null){var n=CE(pd),e=Ar.transition,r=dt;try{if(Ar.transition=null,dt=16>n?16:n,to===null)var i=!1;else{if(n=to,to=null,pd=0,lt&6)throw Error(ye(331));var s=lt;for(lt|=4,je=n.current;je!==null;){var o=je,a=o.child;if(je.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(je=c;je!==null;){var d=je;switch(d.tag){case 0:case 11:case 15:fc(8,d,o)}var h=d.child;if(h!==null)h.return=d,je=h;else for(;je!==null;){d=je;var m=d.sibling,v=d.return;if(VT(d),d===c){je=null;break}if(m!==null){m.return=v,je=m;break}je=v}}}var w=o.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var C=I.sibling;I.sibling=null,I=C}while(I!==null)}}je=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,je=a;else e:for(;je!==null;){if(o=je,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fc(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,je=b;break e}je=o.return}}var T=n.current;for(je=T;je!==null;){a=je;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,je=N;else e:for(a=T;je!==null;){if(l=je,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ap(9,l)}}catch(L){Vt(l,l.return,L)}if(l===a){je=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,je=O;break e}je=l.return}}if(lt=s,No(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(Zd,n)}catch{}i=!0}return i}finally{dt=r,Ar.transition=e}}return!1}function Ew(n,e,r){e=Hl(r,e),e=CT(n,e,1),n=lo(n,e,1),e=Vn(),n!==null&&(uh(n,1,e),Yn(n,e))}function Vt(n,e,r){if(n.tag===3)Ew(n,n,r);else for(;e!==null;){if(e.tag===3){Ew(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(uo===null||!uo.has(i))){n=Hl(r,n),n=kT(e,n,1),e=lo(e,n,1),n=Vn(),e!==null&&(uh(e,1,n),Yn(e,n));break}}e=e.return}}function aR(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Vn(),n.pingedLanes|=n.suspendedLanes&r,un===n&&(dn&r)===r&&(tn===4||tn===3&&(dn&130023424)===dn&&500>Bt()-Lv?pa(n,0):Mv|=r),Yn(n,e)}function GT(n,e){e===0&&(n.mode&1?(e=Kh,Kh<<=1,!(Kh&130023424)&&(Kh=4194304)):e=1);var r=Vn();n=ws(n,e),n!==null&&(uh(n,e,r),Yn(n,r))}function lR(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),GT(n,r)}function uR(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ye(314))}i!==null&&i.delete(e),GT(n,r)}var QT;QT=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gn.current)Kn=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return Kn=!1,YN(n,e,r);Kn=!!(n.flags&131072)}else Kn=!1,Ct&&e.flags&1048576&&ZE(e,sd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Sf(n,e),n=e.pendingProps;var s=zl(e,Rn.current);Al(e,r),s=Nv(null,e,i,n,s,r);var o=Rv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(i)?(o=!0,rd(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Iv(e),s.updater=op,e.stateNode=s,s._reactInternals=e,Vg(e,i,n,r),e=zg(null,e,i,!0,o,r)):(e.tag=0,Ct&&o&&vv(e),Mn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Sf(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=hR(i),n=Qr(i,n),s){case 0:e=Ug(null,e,i,n,r);break e;case 1:e=dw(null,e,i,n,r);break e;case 11:e=hw(null,e,i,n,r);break e;case 14:e=fw(null,e,i,Qr(i.type,n),r);break e}throw Error(ye(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Qr(i,s),Ug(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Qr(i,s),dw(n,e,i,s,r);case 3:e:{if(PT(e),n===null)throw Error(ye(387));i=e.pendingProps,o=e.memoizedState,s=o.element,sT(n,e),ld(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Hl(Error(ye(423)),e),e=pw(n,e,i,r,s);break e}else if(i!==s){s=Hl(Error(ye(424)),e),e=pw(n,e,i,r,s);break e}else for(sr=ao(e.stateNode.containerInfo.firstChild),ar=e,Ct=!0,Xr=null,r=rT(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if($l(),i===s){e=xs(n,e,r);break e}Mn(n,e,i,r)}e=e.child}return e;case 5:return oT(e),n===null&&Dg(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,Ng(i,s)?a=null:o!==null&&Ng(i,o)&&(e.flags|=32),RT(n,e),Mn(n,e,a,r),e.child;case 6:return n===null&&Dg(e),null;case 13:return OT(n,e,r);case 4:return Sv(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Bl(e,null,i,r):Mn(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Qr(i,s),hw(n,e,i,s,r);case 7:return Mn(n,e,e.pendingProps,r),e.child;case 8:return Mn(n,e,e.pendingProps.children,r),e.child;case 12:return Mn(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,wt(od,i._currentValue),i._currentValue=a,o!==null)if(oi(o.value,a)){if(o.children===s.children&&!Gn.current){e=xs(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=ms(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Mg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ye(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Mg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Mn(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Al(e,r),s=Pr(s),i=i(s),e.flags|=1,Mn(n,e,i,r),e.child;case 14:return i=e.type,s=Qr(i,e.pendingProps),s=Qr(i.type,s),fw(n,e,i,s,r);case 15:return AT(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Qr(i,s),Sf(n,e),e.tag=1,Qn(i)?(n=!0,rd(e)):n=!1,Al(e,r),ST(e,i,s),Vg(e,i,s,r),zg(null,e,i,!0,n,r);case 19:return jT(n,e,r);case 22:return NT(n,e,r)}throw Error(ye(156,e.tag))};function YT(n,e){return EE(n,e)}function cR(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(n,e,r,i){return new cR(n,e,r,i)}function zv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hR(n){if(typeof n=="function")return zv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ov)return 11;if(n===av)return 14}return 2}function ho(n,e){var r=n.alternate;return r===null?(r=kr(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Af(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")zv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case dl:return ma(r.children,s,o,e);case sv:a=8,s|=8;break;case lg:return n=kr(12,r,e,s|2),n.elementType=lg,n.lanes=o,n;case ug:return n=kr(13,r,e,s),n.elementType=ug,n.lanes=o,n;case cg:return n=kr(19,r,e,s),n.elementType=cg,n.lanes=o,n;case oE:return up(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case iE:a=10;break e;case sE:a=9;break e;case ov:a=11;break e;case av:a=14;break e;case Hs:a=16,i=null;break e}throw Error(ye(130,n==null?n:typeof n,""))}return e=kr(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function ma(n,e,r,i){return n=kr(7,n,i,e),n.lanes=r,n}function up(n,e,r,i){return n=kr(22,n,i,e),n.elementType=oE,n.lanes=r,n.stateNode={isHidden:!1},n}function km(n,e,r){return n=kr(6,n,null,e),n.lanes=r,n}function Am(n,e,r){return e=kr(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function fR(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=um(0),this.expirationTimes=um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=um(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $v(n,e,r,i,s,o,a,l,u){return n=new fR(n,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=kr(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iv(o),n}function dR(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function XT(n){if(!n)return _o;n=n._reactInternals;e:{if(Da(n)!==n||n.tag!==1)throw Error(ye(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(n.tag===1){var r=n.type;if(Qn(r))return XE(n,r,e)}return e}function JT(n,e,r,i,s,o,a,l,u){return n=$v(r,i,!0,n,s,o,a,l,u),n.context=XT(null),r=n.current,i=Vn(),s=co(r),o=ms(i,s),o.callback=e??null,lo(r,o,s),n.current.lanes=s,uh(n,s,i),Yn(n,i),n}function cp(n,e,r,i){var s=e.current,o=Vn(),a=co(s);return r=XT(r),e.context===null?e.context=r:e.pendingContext=r,e=ms(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=lo(s,e,a),n!==null&&(ri(n,s,a,o),Ef(n,s,a)),a}function gd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Tw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Bv(n,e){Tw(n,e),(n=n.alternate)&&Tw(n,e)}function pR(){return null}var ZT=typeof reportError=="function"?reportError:function(n){console.error(n)};function qv(n){this._internalRoot=n}hp.prototype.render=qv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ye(409));cp(n,e,null,null)};hp.prototype.unmount=qv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ia(function(){cp(null,n,null,null)}),e[_s]=null}};function hp(n){this._internalRoot=n}hp.prototype.unstable_scheduleHydration=function(n){if(n){var e=NE();n={blockedOn:null,target:n,priority:e};for(var r=0;r<Qs.length&&e!==0&&e<Qs[r].priority;r++);Qs.splice(r,0,n),r===0&&PE(n)}};function Hv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Iw(){}function mR(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=gd(a);o.call(c)}}var a=JT(e,i,n,0,null,!1,!1,"",Iw);return n._reactRootContainer=a,n[_s]=a.current,Oc(n.nodeType===8?n.parentNode:n),Ia(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=gd(u);l.call(c)}}var u=$v(n,0,!1,null,null,!1,!1,"",Iw);return n._reactRootContainer=u,n[_s]=u.current,Oc(n.nodeType===8?n.parentNode:n),Ia(function(){cp(e,u,r,i)}),u}function dp(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=gd(a);l.call(u)}}cp(e,a,n,s)}else a=mR(r,e,n,s,i);return gd(a)}kE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Yu(e.pendingLanes);r!==0&&(cv(e,r|1),Yn(e,Bt()),!(lt&6)&&(Kl=Bt()+500,No()))}break;case 13:Ia(function(){var i=ws(n,1);if(i!==null){var s=Vn();ri(i,n,1,s)}}),Bv(n,1)}};hv=function(n){if(n.tag===13){var e=ws(n,134217728);if(e!==null){var r=Vn();ri(e,n,134217728,r)}Bv(n,134217728)}};AE=function(n){if(n.tag===13){var e=co(n),r=ws(n,e);if(r!==null){var i=Vn();ri(r,n,e,i)}Bv(n,e)}};NE=function(){return dt};RE=function(n,e){var r=dt;try{return dt=n,e()}finally{dt=r}};wg=function(n,e,r){switch(e){case"input":if(dg(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=rp(i);if(!s)throw Error(ye(90));lE(i),dg(i,s)}}}break;case"textarea":cE(n,r);break;case"select":e=r.value,e!=null&&Il(n,!!r.multiple,e,!1)}};yE=Vv;vE=Ia;var gR={usingClientEntryPoint:!1,Events:[hh,yl,rp,mE,gE,Vv]},Vu={findFiberByHostInstance:aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yR={bundleType:Vu.bundleType,version:Vu.version,rendererPackageName:Vu.rendererPackageName,rendererConfig:Vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=xE(n),n===null?null:n.stateNode},findFiberByHostInstance:Vu.findFiberByHostInstance||pR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{Zd=rf.inject(yR),Ri=rf}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gR;hr.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hv(e))throw Error(ye(200));return dR(n,e,null,r)};hr.createRoot=function(n,e){if(!Hv(n))throw Error(ye(299));var r=!1,i="",s=ZT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$v(n,1,!1,null,null,r,!1,i,s),n[_s]=e.current,Oc(n.nodeType===8?n.parentNode:n),new qv(e)};hr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ye(188)):(n=Object.keys(n).join(","),Error(ye(268,n)));return n=xE(e),n=n===null?null:n.stateNode,n};hr.flushSync=function(n){return Ia(n)};hr.hydrate=function(n,e,r){if(!fp(e))throw Error(ye(200));return dp(null,n,e,!0,r)};hr.hydrateRoot=function(n,e,r){if(!Hv(n))throw Error(ye(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=ZT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=JT(e,null,n,1,r??null,s,!1,o,a),n[_s]=e.current,Oc(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new hp(e)};hr.render=function(n,e,r){if(!fp(e))throw Error(ye(200));return dp(null,n,e,!1,r)};hr.unmountComponentAtNode=function(n){if(!fp(n))throw Error(ye(40));return n._reactRootContainer?(Ia(function(){dp(null,null,n,!1,function(){n._reactRootContainer=null,n[_s]=null})}),!0):!1};hr.unstable_batchedUpdates=Vv;hr.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!fp(r))throw Error(ye(200));if(n==null||n._reactInternals===void 0)throw Error(ye(38));return dp(n,e,r,!1,i)};hr.version="18.3.1-next-f1338f8080-20240426";function eI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eI)}catch(n){console.error(n)}}eI(),eE.exports=hr;var vR=eE.exports,Sw=vR;og.createRoot=Sw.createRoot,og.hydrateRoot=Sw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},$c.apply(this,arguments)}var no;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(no||(no={}));const Cw="popstate";function _R(n){n===void 0&&(n={});function e(s,o){let{pathname:a="/",search:l="",hash:u=""}=Ma(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Zg("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:tI(o))}function i(s,o){pp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return xR(e,r,i,n)}function rn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wR(){return Math.random().toString(36).substr(2,8)}function kw(n,e){return{usr:n.state,key:n.key,idx:e}}function Zg(n,e,r,i){return r===void 0&&(r=null),$c({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ma(e):e,{state:r,key:e&&e.key||i||wR()})}function tI(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ma(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function xR(n,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=no.Pop,u=null,c=d();c==null&&(c=0,a.replaceState($c({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=no.Pop;let C=d(),b=C==null?null:C-c;c=C,u&&u({action:l,location:I.location,delta:b})}function m(C,b){l=no.Push;let T=Zg(I.location,C,b);r&&r(T,C),c=d()+1;let N=kw(T,c),O=I.createHref(T);try{a.pushState(N,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(O)}o&&u&&u({action:l,location:I.location,delta:1})}function v(C,b){l=no.Replace;let T=Zg(I.location,C,b);r&&r(T,C),c=d();let N=kw(T,c),O=I.createHref(T);a.replaceState(N,"",O),o&&u&&u({action:l,location:I.location,delta:0})}function w(C){let b=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof C=="string"?C:tI(C);return T=T.replace(/ $/,"%20"),rn(b,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,b)}let I={get action(){return l},get location(){return n(s,a)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Cw,h),u=C,()=>{s.removeEventListener(Cw,h),u=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let b=w(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:v,go(C){return a.go(C)}};return I}var Aw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Aw||(Aw={}));function bR(n,e,r){return r===void 0&&(r="/"),ER(n,e,r)}function ER(n,e,r,i){let s=typeof e=="string"?Ma(e):e,o=iI(s.pathname||"/",r);if(o==null)return null;let a=nI(n);TR(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=MR(o);l=OR(a[u],c)}return l}function nI(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(rn(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=ga([i,u.relativePath]),d=r.concat(u);o.children&&o.children.length>0&&(rn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nI(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:RR(c,o.index),routesMeta:d})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of rI(o.path))s(o,a,u)}),e}function rI(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=rI(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function TR(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:PR(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const IR=/^:[\w-]+$/,SR=3,CR=2,kR=1,AR=10,NR=-2,Nw=n=>n==="*";function RR(n,e){let r=n.split("/"),i=r.length;return r.some(Nw)&&(i+=NR),e&&(i+=CR),r.filter(s=>!Nw(s)).reduce((s,o)=>s+(IR.test(o)?SR:o===""?kR:AR),i)}function PR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function OR(n,e,r){let{routesMeta:i}=n,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=jR({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:ga([o,h.pathname]),pathnameBase:BR(ga([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=ga([o,h.pathnameBase]))}return a}function jR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=DR(n.path,n.caseSensitive,n.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,d,h)=>{let{paramName:m,isOptional:v}=d;if(m==="*"){let I=l[h]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const w=l[h];return v&&!w?c[m]=void 0:c[m]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:n}}function DR(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),pp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function MR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function iI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}const LR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VR=n=>LR.test(n);function FR(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof n=="string"?Ma(n):n,o;if(r)if(VR(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),pp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Rw(r.substring(1),"/"):o=Rw(r,e)}else o=e;return{pathname:o,search:qR(i),hash:HR(s)}}function Rw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Nm(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UR(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function zR(n,e){let r=UR(n);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function $R(n,e,r,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Ma(n):(s=$c({},n),rn(!s.pathname||!s.pathname.includes("?"),Nm("?","pathname","search",s)),rn(!s.pathname||!s.pathname.includes("#"),Nm("#","pathname","hash",s)),rn(!s.search||!s.search.includes("#"),Nm("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let u=FR(s,l),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const ga=n=>n.join("/").replace(/\/\/+/g,"/"),BR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function KR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const sI=["post","put","patch","delete"];new Set(sI);const WR=["get",...sI];new Set(WR);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bc(){return Bc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Bc.apply(this,arguments)}const Kv=ue.createContext(null),GR=ue.createContext(null),mp=ue.createContext(null),gp=ue.createContext(null),La=ue.createContext({outlet:null,matches:[],isDataRoute:!1}),oI=ue.createContext(null);function yp(){return ue.useContext(gp)!=null}function Wv(){return yp()||rn(!1),ue.useContext(gp).location}function aI(n){ue.useContext(mp).static||ue.useLayoutEffect(n)}function Ro(){let{isDataRoute:n}=ue.useContext(La);return n?aP():QR()}function QR(){yp()||rn(!1);let n=ue.useContext(Kv),{basename:e,future:r,navigator:i}=ue.useContext(mp),{matches:s}=ue.useContext(La),{pathname:o}=Wv(),a=JSON.stringify(zR(s,r.v7_relativeSplatPath)),l=ue.useRef(!1);return aI(()=>{l.current=!0}),ue.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let h=$R(c,JSON.parse(a),o,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ga([e,h.pathname])),(d.replace?i.replace:i.push)(h,d.state,d)},[e,i,a,o,n])}function lI(){let{matches:n}=ue.useContext(La),e=n[n.length-1];return e?e.params:{}}function YR(n,e){return XR(n,e)}function XR(n,e,r,i){yp()||rn(!1);let{navigator:s}=ue.useContext(mp),{matches:o}=ue.useContext(La),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Wv(),d;if(e){var h;let C=typeof e=="string"?Ma(e):e;u==="/"||(h=C.pathname)!=null&&h.startsWith(u)||rn(!1),d=C}else d=c;let m=d.pathname||"/",v=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=bR(n,{pathname:v}),I=nP(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:ga([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:ga([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,r,i);return e&&I?ue.createElement(gp.Provider,{value:{location:Bc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:no.Pop}},I):I}function JR(){let n=oP(),e=KR(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},e),r?ue.createElement("pre",{style:s},r):null,null)}const ZR=ue.createElement(JR,null);class eP extends ue.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ue.createElement(La.Provider,{value:this.props.routeContext},ue.createElement(oI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tP(n){let{routeContext:e,match:r,children:i}=n,s=ue.useContext(Kv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),ue.createElement(La.Provider,{value:e},i)}function nP(n,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let a=n,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||rn(!1),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:v}=r,w=h.route.loader&&m[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let v,w=!1,I=null,C=null;r&&(v=l&&h.route.id?l[h.route.id]:void 0,I=h.route.errorElement||ZR,u&&(c<0&&m===0?(lP("route-fallback"),w=!0,C=null):c===m&&(w=!0,C=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),T=()=>{let N;return v?N=I:w?N=C:h.route.Component?N=ue.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=d,ue.createElement(tP,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:N})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?ue.createElement(eP,{location:r.location,revalidation:r.revalidation,component:I,error:v,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}var uI=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(uI||{}),cI=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(cI||{});function rP(n){let e=ue.useContext(Kv);return e||rn(!1),e}function iP(n){let e=ue.useContext(GR);return e||rn(!1),e}function sP(n){let e=ue.useContext(La);return e||rn(!1),e}function hI(n){let e=sP(),r=e.matches[e.matches.length-1];return r.route.id||rn(!1),r.route.id}function oP(){var n;let e=ue.useContext(oI),r=iP(),i=hI();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function aP(){let{router:n}=rP(uI.UseNavigateStable),e=hI(cI.UseNavigateStable),r=ue.useRef(!1);return aI(()=>{r.current=!0}),ue.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Bc({fromRouteId:e},o)))},[n,e])}const Pw={};function lP(n,e,r){Pw[n]||(Pw[n]=!0)}function uP(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ti(n){rn(!1)}function cP(n){let{basename:e="/",children:r=null,location:i,navigationType:s=no.Pop,navigator:o,static:a=!1,future:l}=n;yp()&&rn(!1);let u=e.replace(/^\/*/,"/"),c=ue.useMemo(()=>({basename:u,navigator:o,static:a,future:Bc({v7_relativeSplatPath:!1},l)}),[u,l,o,a]);typeof i=="string"&&(i=Ma(i));let{pathname:d="/",search:h="",hash:m="",state:v=null,key:w="default"}=i,I=ue.useMemo(()=>{let C=iI(d,u);return C==null?null:{location:{pathname:C,search:h,hash:m,state:v,key:w},navigationType:s}},[u,d,h,m,v,w,s]);return I==null?null:ue.createElement(mp.Provider,{value:c},ue.createElement(gp.Provider,{children:r,value:I}))}function Ow(n){let{children:e,location:r}=n;return YR(ey(e),r)}new Promise(()=>{});function ey(n,e){e===void 0&&(e=[]);let r=[];return ue.Children.forEach(n,(i,s)=>{if(!ue.isValidElement(i))return;let o=[...e,s];if(i.type===ue.Fragment){r.push.apply(r,ey(i.props.children,o));return}i.type!==Ti&&rn(!1),!i.props.index||!i.props.children||rn(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ey(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const hP="6";try{window.__reactRouterVersion=hP}catch{}const fP="startTransition",jw=aA[fP];function dP(n){let{basename:e,children:r,future:i,window:s}=n,o=ue.useRef();o.current==null&&(o.current=_R({window:s,v5Compat:!0}));let a=o.current,[l,u]=ue.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},d=ue.useCallback(h=>{c&&jw?jw(()=>u(h)):u(h)},[u,c]);return ue.useLayoutEffect(()=>a.listen(d),[a,d]),ue.useEffect(()=>uP(i),[i]),ue.createElement(cP,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:i})}var Dw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Dw||(Dw={}));var Mw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Mw||(Mw={}));var pP=Object.defineProperty,yd=Object.getOwnPropertySymbols,fI=Object.prototype.hasOwnProperty,dI=Object.prototype.propertyIsEnumerable,Lw=(n,e,r)=>e in n?pP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ty=(n,e)=>{for(var r in e||(e={}))fI.call(e,r)&&Lw(n,r,e[r]);if(yd)for(var r of yd(e))dI.call(e,r)&&Lw(n,r,e[r]);return n},ny=(n,e)=>{var r={};for(var i in n)fI.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&yd)for(var i of yd(n))e.indexOf(i)<0&&dI.call(n,i)&&(r[i]=n[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Sa;(n=>{const e=class Ze{constructor(u,c,d,h){if(this.version=u,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],u<Ze.MIN_VERSION||u>Ze.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let m=[];for(let w=0;w<this.size;w++)m.push(!1);for(let w=0;w<this.size;w++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(d);if(this.drawCodewords(v),h==-1){let w=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const C=this.getPenaltyScore();C<w&&(h=I,w=C),this.applyMask(I)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(u,c){const d=n.QrSegment.makeSegments(u);return Ze.encodeSegments(d,c)}static encodeBinary(u,c){const d=n.QrSegment.makeBytes(u);return Ze.encodeSegments([d],c)}static encodeSegments(u,c,d=1,h=40,m=-1,v=!0){if(!(Ze.MIN_VERSION<=d&&d<=h&&h<=Ze.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let w,I;for(w=d;;w++){const N=Ze.getNumDataCodewords(w,c)*8,O=a.getTotalBits(u,w);if(O<=N){I=O;break}if(w>=h)throw new RangeError("Data too long")}for(const N of[Ze.Ecc.MEDIUM,Ze.Ecc.QUARTILE,Ze.Ecc.HIGH])v&&I<=Ze.getNumDataCodewords(w,N)*8&&(c=N);let C=[];for(const N of u){r(N.mode.modeBits,4,C),r(N.numChars,N.mode.numCharCountBits(w),C);for(const O of N.getData())C.push(O)}s(C.length==I);const b=Ze.getNumDataCodewords(w,c)*8;s(C.length<=b),r(0,Math.min(4,b-C.length),C),r(0,(8-C.length%8)%8,C),s(C.length%8==0);for(let N=236;C.length<b;N^=253)r(N,8,C);let T=[];for(;T.length*8<C.length;)T.push(0);return C.forEach((N,O)=>T[O>>>3]|=N<<7-(O&7)),new Ze(w,c,T,m)}getModule(u,c){return 0<=u&&u<this.size&&0<=c&&c<this.size&&this.modules[c][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),c=u.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(u[d],u[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const c=this.errorCorrectionLevel.formatBits<<3|u;let d=c;for(let m=0;m<10;m++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(h,m));this.setFunctionModule(8,7,i(h,6)),this.setFunctionModule(8,8,i(h,7)),this.setFunctionModule(7,8,i(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let d=0;d<12;d++)u=u<<1^(u>>>11)*7973;const c=this.version<<12|u;s(c>>>18==0);for(let d=0;d<18;d++){const h=i(c,d),m=this.size-11+d%3,v=Math.floor(d/3);this.setFunctionModule(m,v,h),this.setFunctionModule(v,m,h)}}drawFinderPattern(u,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(d)),v=u+h,w=c+d;0<=v&&v<this.size&&0<=w&&w<this.size&&this.setFunctionModule(v,w,m!=2&&m!=4)}}drawAlignmentPattern(u,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(u+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(u,c,d){this.modules[c][u]=d,this.isFunction[c][u]=!0}addEccAndInterleave(u){const c=this.version,d=this.errorCorrectionLevel;if(u.length!=Ze.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=Ze.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],m=Ze.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],v=Math.floor(Ze.getNumRawDataModules(c)/8),w=h-v%h,I=Math.floor(v/h);let C=[];const b=Ze.reedSolomonComputeDivisor(m);for(let N=0,O=0;N<h;N++){let L=u.slice(O,O+I-m+(N<w?0:1));O+=L.length;const U=Ze.reedSolomonComputeRemainder(L,b);N<w&&L.push(0),C.push(L.concat(U))}let T=[];for(let N=0;N<C[0].length;N++)C.forEach((O,L)=>{(N!=I-m||L>=w)&&T.push(O[N])});return s(T.length==v),T}drawCodewords(u){if(u.length!=Math.floor(Ze.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const v=d-m,I=(d+1&2)==0?this.size-1-h:h;!this.isFunction[I][v]&&c<u.length*8&&(this.modules[I][v]=i(u[c>>>3],7-(c&7)),c++)}}s(c==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(u){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let u=0;for(let m=0;m<this.size;m++){let v=!1,w=0,I=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[m][C]==v?(w++,w==5?u+=Ze.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,I),v||(u+=this.finderPenaltyCountPatterns(I)*Ze.PENALTY_N3),v=this.modules[m][C],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,I)*Ze.PENALTY_N3}for(let m=0;m<this.size;m++){let v=!1,w=0,I=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][m]==v?(w++,w==5?u+=Ze.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,I),v||(u+=this.finderPenaltyCountPatterns(I)*Ze.PENALTY_N3),v=this.modules[C][m],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,I)*Ze.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let v=0;v<this.size-1;v++){const w=this.modules[m][v];w==this.modules[m][v+1]&&w==this.modules[m+1][v]&&w==this.modules[m+1][v+1]&&(u+=Ze.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((v,w)=>v+(w?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),u+=h*Ze.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let d=[6];for(let h=this.size-7;d.length<u;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(u){if(u<Ze.MIN_VERSION||u>Ze.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*u+128)*u+64;if(u>=2){const d=Math.floor(u/7)+2;c-=(25*d-10)*d-55,u>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(u,c){return Math.floor(Ze.getNumRawDataModules(u)/8)-Ze.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u]*Ze.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<u-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<u;h++){for(let m=0;m<c.length;m++)c[m]=Ze.reedSolomonMultiply(c[m],d),m+1<c.length&&(c[m]^=c[m+1]);d=Ze.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(u,c){let d=c.map(h=>0);for(const h of u){const m=h^d.shift();d.push(0),c.forEach((v,w)=>d[w]^=Ze.reedSolomonMultiply(v,m))}return d}static reedSolomonMultiply(u,c){if(u>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*u;return s(d>>>8==0),d}finderPenaltyCountPatterns(u){const c=u[1];s(c<=this.size*3);const d=c>0&&u[2]==c&&u[3]==c*3&&u[4]==c&&u[5]==c;return(d&&u[0]>=c*4&&u[6]>=c?1:0)+(d&&u[6]>=c*4&&u[0]>=c?1:0)}finderPenaltyTerminateAndCount(u,c,d){return u&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(u,c){c[0]==0&&(u+=this.size),c.pop(),c.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function r(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let d=u-1;d>=0;d--)c.push(l>>>d&1)}function i(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class Lt{constructor(u,c,d){if(this.mode=u,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(u){let c=[];for(const d of u)r(d,8,c);return new Lt(Lt.Mode.BYTE,u.length,c)}static makeNumeric(u){if(!Lt.isNumeric(u))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<u.length;){const h=Math.min(u.length-d,3);r(parseInt(u.substring(d,d+h),10),h*3+1,c),d+=h}return new Lt(Lt.Mode.NUMERIC,u.length,c)}static makeAlphanumeric(u){if(!Lt.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=u.length;d+=2){let h=Lt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d))*45;h+=Lt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d+1)),r(h,11,c)}return d<u.length&&r(Lt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d)),6,c),new Lt(Lt.Mode.ALPHANUMERIC,u.length,c)}static makeSegments(u){return u==""?[]:Lt.isNumeric(u)?[Lt.makeNumeric(u)]:Lt.isAlphanumeric(u)?[Lt.makeAlphanumeric(u)]:[Lt.makeBytes(Lt.toUtf8ByteArray(u))]}static makeEci(u){let c=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,c);else if(u<16384)r(2,2,c),r(u,14,c);else if(u<1e6)r(6,3,c),r(u,21,c);else throw new RangeError("ECI assignment value out of range");return new Lt(Lt.Mode.ECI,0,c)}static isNumeric(u){return Lt.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Lt.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,c){let d=0;for(const h of u){const m=h.mode.numCharCountBits(c);if(h.numChars>=1<<m)return 1/0;d+=4+m+h.bitData.length}return d}static toUtf8ByteArray(u){u=encodeURI(u);let c=[];for(let d=0;d<u.length;d++)u.charAt(d)!="%"?c.push(u.charCodeAt(d)):(c.push(parseInt(u.substring(d+1,d+3),16)),d+=2);return c}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;n.QrSegment=o})(Sa||(Sa={}));(n=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(Sa||(Sa={}));(n=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(Sa||(Sa={}));var Tl=Sa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var mP={L:Tl.QrCode.Ecc.LOW,M:Tl.QrCode.Ecc.MEDIUM,Q:Tl.QrCode.Ecc.QUARTILE,H:Tl.QrCode.Ecc.HIGH},pI=128,mI="L",gI="#FFFFFF",yI="#000000",vI=!1,_I=1,gP=4,yP=0,vP=.1;function wI(n,e=0){const r=[];return n.forEach(function(i,s){let o=null;i.forEach(function(a,l){if(!a&&o!==null){r.push(`M${o+e} ${s+e}h${l-o}v1H${o+e}z`),o=null;return}if(l===i.length-1){if(!a)return;o===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${o+e},${s+e} h${l+1-o}v1H${o+e}z`);return}a&&o===null&&(o=l)})}),r.join("")}function xI(n,e){return n.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function _P(n,e,r,i){if(i==null)return null;const s=n.length+r*2,o=Math.floor(e*vP),a=s/e,l=(i.width||o)*a,u=(i.height||o)*a,c=i.x==null?n.length/2-l/2:i.x*a,d=i.y==null?n.length/2-u/2:i.y*a,h=i.opacity==null?1:i.opacity;let m=null;if(i.excavate){let w=Math.floor(c),I=Math.floor(d),C=Math.ceil(l+c-w),b=Math.ceil(u+d-I);m={x:w,y:I,w:C,h:b}}const v=i.crossOrigin;return{x:c,y:d,h:u,w:l,excavation:m,opacity:h,crossOrigin:v}}function wP(n,e){return e!=null?Math.max(Math.floor(e),0):n?gP:yP}function bI({value:n,level:e,minVersion:r,includeMargin:i,marginSize:s,imageSettings:o,size:a,boostLevel:l}){let u=mt.useMemo(()=>{const w=(Array.isArray(n)?n:[n]).reduce((I,C)=>(I.push(...Tl.QrSegment.makeSegments(C)),I),[]);return Tl.QrCode.encodeSegments(w,mP[e],r,void 0,void 0,l)},[n,e,r,l]);const{cells:c,margin:d,numCells:h,calculatedImageSettings:m}=mt.useMemo(()=>{let v=u.getModules();const w=wP(i,s),I=v.length+w*2,C=_P(v,a,w,o);return{cells:v,margin:w,numCells:I,calculatedImageSettings:C}},[u,a,o,i,s]);return{qrcode:u,margin:d,cells:c,numCells:h,calculatedImageSettings:m}}var xP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),bP=mt.forwardRef(function(e,r){const i=e,{value:s,size:o=pI,level:a=mI,bgColor:l=gI,fgColor:u=yI,includeMargin:c=vI,minVersion:d=_I,boostLevel:h,marginSize:m,imageSettings:v}=i,I=ny(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=I,b=ny(I,["style"]),T=v==null?void 0:v.src,N=mt.useRef(null),O=mt.useRef(null),L=mt.useCallback(q=>{N.current=q,typeof r=="function"?r(q):r&&(r.current=q)},[r]),[U,A]=mt.useState(!1),{margin:R,cells:D,numCells:M,calculatedImageSettings:F}=bI({value:s,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:m,imageSettings:v,size:o});mt.useEffect(()=>{if(N.current!=null){const q=N.current,W=q.getContext("2d");if(!W)return;let Z=D;const de=O.current,ee=F!=null&&de!==null&&de.complete&&de.naturalHeight!==0&&de.naturalWidth!==0;ee&&F.excavation!=null&&(Z=xI(D,F.excavation));const ae=window.devicePixelRatio||1;q.height=q.width=o*ae;const he=o/M*ae;W.scale(he,he),W.fillStyle=l,W.fillRect(0,0,M,M),W.fillStyle=u,xP?W.fill(new Path2D(wI(Z,R))):D.forEach(function(be,ce){be.forEach(function(Ae,Pe){Ae&&W.fillRect(Pe+R,ce+R,1,1)})}),F&&(W.globalAlpha=F.opacity),ee&&W.drawImage(de,F.x+R,F.y+R,F.w,F.h)}}),mt.useEffect(()=>{A(!1)},[T]);const $=ty({height:o,width:o},C);let j=null;return T!=null&&(j=mt.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{A(!0)},ref:O,crossOrigin:F==null?void 0:F.crossOrigin})),mt.createElement(mt.Fragment,null,mt.createElement("canvas",ty({style:$,height:o,width:o,ref:L,role:"img"},b)),j)});bP.displayName="QRCodeCanvas";var Gv=mt.forwardRef(function(e,r){const i=e,{value:s,size:o=pI,level:a=mI,bgColor:l=gI,fgColor:u=yI,includeMargin:c=vI,minVersion:d=_I,boostLevel:h,title:m,marginSize:v,imageSettings:w}=i,I=ny(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:b,numCells:T,calculatedImageSettings:N}=bI({value:s,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:v,imageSettings:w,size:o});let O=b,L=null;w!=null&&N!=null&&(N.excavation!=null&&(O=xI(b,N.excavation)),L=mt.createElement("image",{href:w.src,height:N.h,width:N.w,x:N.x+C,y:N.y+C,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const U=wI(O,C);return mt.createElement("svg",ty({height:o,width:o,viewBox:`0 0 ${T} ${T}`,ref:r,role:"img"},I),!!m&&mt.createElement("title",null,m),mt.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),mt.createElement("path",{fill:u,d:U,shapeRendering:"crispEdges"}),L)});Gv.displayName="QRCodeSVG";var Vw;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(Vw||(Vw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fw;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(Fw||(Fw={}));var Uw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Uw||(Uw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=["user","model","function","system"];var $w;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($w||($w={}));var Bw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Bw||(Bw={}));var qw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(qw||(qw={}));var Hw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Hw||(Hw={}));var mc;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(mc||(mc={}));var Kw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Kw||(Kw={}));var Ww;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Ww||(Ww={}));var Gw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Gw||(Gw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class sl extends Nn{constructor(e,r){super(e),this.response=r}}class EI extends Nn{constructor(e,r,i,s){super(e),this.status=r,this.statusText=i,this.errorDetails=s}}class fo extends Nn{}class TI extends Nn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="https://generativelanguage.googleapis.com",TP="v1beta",IP="0.24.1",SP="genai-js";var Ca;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ca||(Ca={}));class CP{constructor(e,r,i,s,o){this.model=e,this.task=r,this.apiKey=i,this.stream=s,this.requestOptions=o}toString(){var e,r;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||TP;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||EP}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function kP(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${SP}/${IP}`),e.join(" ")}async function AP(n){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",kP(n.requestOptions)),r.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new fo(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,o]of i.entries()){if(s==="x-goog-api-key")throw new fo(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new fo(`Header name ${s} can only be set using the apiClient field`);r.append(s,o)}}return r}async function NP(n,e,r,i,s,o){const a=new CP(n,e,r,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},jP(o)),{method:"POST",headers:await AP(a),body:s})}}async function dh(n,e,r,i,s,o={},a=fetch){const{url:l,fetchOptions:u}=await NP(n,e,r,i,s,o);return RP(l,u,a)}async function RP(n,e,r=fetch){let i;try{i=await r(n,e)}catch(s){PP(s,n)}return i.ok||await OP(i,n),i}function PP(n,e){let r=n;throw r.name==="AbortError"?(r=new TI(`Request aborted when fetching ${e.toString()}: ${n.message}`),r.stack=n.stack):n instanceof EI||n instanceof fo||(r=new Nn(`Error fetching from ${e.toString()}: ${n.message}`),r.stack=n.stack),r}async function OP(n,e){let r="",i;try{const s=await n.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new EI(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${r}`,n.status,n.statusText,i)}function jP(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const r=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>r.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Nf(n.candidates[0]))throw new sl(`${Ws(n)}`,n);return DP(n)}else if(n.promptFeedback)throw new sl(`Text not available. ${Ws(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Nf(n.candidates[0]))throw new sl(`${Ws(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Qw(n)[0]}else if(n.promptFeedback)throw new sl(`Function call not available. ${Ws(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Nf(n.candidates[0]))throw new sl(`${Ws(n)}`,n);return Qw(n)}else if(n.promptFeedback)throw new sl(`Function call not available. ${Ws(n)}`,n)},n}function DP(n){var e,r,i,s;const o=[];if(!((r=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Qw(n){var e,r,i,s;const o=[];if(!((r=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const MP=[mc.RECITATION,mc.SAFETY,mc.LANGUAGE];function Nf(n){return!!n.finishReason&&MP.includes(n.finishReason)}function Ws(n){var e,r,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((r=n.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const o=n.candidates[0];Nf(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function qc(n){return this instanceof qc?(this.v=n,this):new qc(n)}function LP(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(m){i[m]&&(s[m]=function(v){return new Promise(function(w,I){o.push([m,v,w,I])>1||l(m,v)})})}function l(m,v){try{u(i[m](v))}catch(w){h(o[0][3],w)}}function u(m){m.value instanceof qc?Promise.resolve(m.value.v).then(c,d):h(o[0][2],m)}function c(m){l("next",m)}function d(m){l("throw",m)}function h(m,v){m(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function VP(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=zP(e),[i,s]=r.tee();return{stream:UP(i),response:FP(s)}}async function FP(n){const e=[],r=n.getReader();for(;;){const{done:i,value:s}=await r.read();if(i)return Qv($P(e));e.push(s)}}function UP(n){return LP(this,arguments,function*(){const r=n.getReader();for(;;){const{value:i,done:s}=yield qc(r.read());if(s)break;yield yield qc(Qv(i))}})}function zP(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return o();function o(){return e.read().then(({value:a,done:l})=>{if(l){if(s.trim()){i.error(new Nn("Failed to parse stream"));return}i.close();return}s+=a;let u=s.match(Yw),c;for(;u;){try{c=JSON.parse(u[1])}catch{i.error(new Nn(`Error parsing JSON response: "${u[1]}"`));return}i.enqueue(c),s=s.substring(u[0].length),u=s.match(Yw)}return o()}).catch(a=>{let l=a;throw l.stack=a.stack,l.name==="AbortError"?l=new TI("Request aborted when reading from the stream"):l=new Nn("Error reading from the stream"),l})}}})}function $P(n){const e=n[n.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const o of i.candidates)if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:s}),r.candidates[s].citationMetadata=o.citationMetadata,r.candidates[s].groundingMetadata=o.groundingMetadata,r.candidates[s].finishReason=o.finishReason,r.candidates[s].finishMessage=o.finishMessage,r.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[s].content||(r.candidates[s].content={role:o.content.role||"user",parts:[]});const a={};for(const l of o.content.parts)l.text&&(a.text=l.text),l.functionCall&&(a.functionCall=l.functionCall),l.executableCode&&(a.executableCode=l.executableCode),l.codeExecutionResult&&(a.codeExecutionResult=l.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[s].content.parts.push(a)}s++}i.usageMetadata&&(r.usageMetadata=i.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(n,e,r,i){const s=await dh(e,Ca.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(r),i);return VP(s)}async function SI(n,e,r,i){const o=await(await dh(e,Ca.GENERATE_CONTENT,n,!1,JSON.stringify(r),i)).json();return{response:Qv(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Hc(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const r of n)typeof r=="string"?e.push({text:r}):e.push(r);return BP(e)}function BP(n){const e={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,s=!1;for(const o of n)"functionResponse"in o?(r.parts.push(o),s=!0):(e.parts.push(o),i=!0);if(i&&s)throw new Nn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new Nn("No content is provided for sending chat message.");return i?e:r}function qP(n,e){var r;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new fo("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const o=Hc(n);i.contents=[o]}return{generateContentRequest:i}}function Xw(n){let e;return n.contents?e=n:e={contents:[Hc(n)]},n.systemInstruction&&(e.systemInstruction=CI(n.systemInstruction)),e}function HP(n){return typeof n=="string"||Array.isArray(n)?{content:Hc(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],KP={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function WP(n){let e=!1;for(const r of n){const{role:i,parts:s}=r;if(!e&&i!=="user")throw new Nn(`First content should be with role 'user', got ${i}`);if(!zw.includes(i))throw new Nn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(zw)}`);if(!Array.isArray(s))throw new Nn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Nn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of s)for(const u of Jw)u in l&&(o[u]+=1);const a=KP[i];for(const l of Jw)if(!a.includes(l)&&o[l]>0)throw new Nn(`Content with role '${i}' can't contain '${l}' part`);e=!0}}function Zw(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const r=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const i of r.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="SILENT_ERROR";class GP{constructor(e,r,i,s={}){this.model=r,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(WP(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var i,s,o,a,l,u;await this._sendPromise;const c=Hc(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>SI(this._apiKey,this.model,d,h)).then(v=>{var w;if(Zw(v.response)){this._history.push(c);const I=Object.assign({parts:[],role:"model"},(w=v.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(I)}else{const I=Ws(v.response);I&&console.warn(`sendMessage() was unsuccessful. ${I}. Inspect response object for details.`)}m=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,m}async sendMessageStream(e,r={}){var i,s,o,a,l,u;await this._sendPromise;const c=Hc(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),r),m=II(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(v=>{throw new Error(ex)}).then(v=>v.response).then(v=>{if(Zw(v)){this._history.push(c);const w=Object.assign({},v.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=Ws(v);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(v=>{v.message!==ex&&console.error(v)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(n,e,r,i){return(await dh(e,Ca.COUNT_TOKENS,n,!1,JSON.stringify(r),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,e,r,i){return(await dh(e,Ca.EMBED_CONTENT,n,!1,JSON.stringify(r),i)).json()}async function XP(n,e,r,i){const s=r.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await dh(e,Ca.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,r,i={}){this.apiKey=e,this._requestOptions=i,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=CI(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var i;const s=Xw(e),o=Object.assign(Object.assign({},this._requestOptions),r);return SI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}async generateContentStream(e,r={}){var i;const s=Xw(e),o=Object.assign(Object.assign({},this._requestOptions),r);return II(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}startChat(e){var r;return new GP(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const i=qP(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return QP(this.apiKey,this.model,i,s)}async embedContent(e,r={}){const i=HP(e),s=Object.assign(Object.assign({},this._requestOptions),r);return YP(this.apiKey,this.model,i,s)}async batchEmbedContents(e,r={}){const i=Object.assign(Object.assign({},this._requestOptions),r);return XP(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Nn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new tx(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,i){if(!e.name)throw new fo("Cached content must contain a `name` field.");if(!e.model)throw new fo("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(r!=null&&r[a]&&e[a]&&(r==null?void 0:r[a])!==e[a]){if(a==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(l===u)continue}throw new fo(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new tx(this.apiKey,o,i)}}var kI={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(y_,function(){var r=function(p,g){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(_[k]=E[k])})(p,g)},i=function(){return(i=Object.assign||function(p){for(var g,_=1,E=arguments.length;_<E;_++)for(var k in g=arguments[_])Object.prototype.hasOwnProperty.call(g,k)&&(p[k]=g[k]);return p}).apply(this,arguments)};function s(p,g,_){for(var E,k=0,P=g.length;k<P;k++)!E&&k in g||((E=E||Array.prototype.slice.call(g,0,k))[k]=g[k]);return p.concat(E||Array.prototype.slice.call(g))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:y_,a=Object.keys,l=Array.isArray;function u(p,g){return typeof g!="object"||a(g).forEach(function(_){p[_]=g[_]}),p}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function h(p,g){return d.call(p,g)}function m(p,g){typeof g=="function"&&(g=g(c(p))),(typeof Reflect>"u"?a:Reflect.ownKeys)(g).forEach(function(_){w(p,_,g[_])})}var v=Object.defineProperty;function w(p,g,_,E){v(p,g,u(_&&h(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},E))}function I(p){return{from:function(g){return p.prototype=Object.create(g.prototype),w(p.prototype,"constructor",p),{extend:m.bind(null,p.prototype)}}}}var C=Object.getOwnPropertyDescriptor,b=[].slice;function T(p,g,_){return b.call(p,g,_)}function N(p,g){return g(p)}function O(p){if(!p)throw new Error("Assertion Failed")}function L(p){o.setImmediate?setImmediate(p):setTimeout(p,0)}function U(p,g){if(typeof g=="string"&&h(p,g))return p[g];if(!g)return p;if(typeof g!="string"){for(var _=[],E=0,k=g.length;E<k;++E){var P=U(p,g[E]);_.push(P)}return _}var z=g.indexOf(".");if(z!==-1){var B=p[g.substr(0,z)];return B==null?void 0:U(B,g.substr(z+1))}}function A(p,g,_){if(p&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof g!="string"&&"length"in g){O(typeof _!="string"&&"length"in _);for(var E=0,k=g.length;E<k;++E)A(p,g[E],_[E])}else{var P,z,B=g.indexOf(".");B!==-1?(P=g.substr(0,B),(z=g.substr(B+1))===""?_===void 0?l(p)&&!isNaN(parseInt(P))?p.splice(P,1):delete p[P]:p[P]=_:A(B=!(B=p[P])||!h(p,P)?p[P]={}:B,z,_)):_===void 0?l(p)&&!isNaN(parseInt(g))?p.splice(g,1):delete p[g]:p[g]=_}}function R(p){var g,_={};for(g in p)h(p,g)&&(_[g]=p[g]);return _}var D=[].concat;function M(p){return D.apply([],p)}var Dt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(M([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(g){return g+p+"Array"})}))).filter(function(p){return o[p]}),F=new Set(Dt.map(function(p){return o[p]})),$=null;function j(p){return $=new WeakMap,p=function g(_){if(!_||typeof _!="object")return _;var E=$.get(_);if(E)return E;if(l(_)){E=[],$.set(_,E);for(var k=0,P=_.length;k<P;++k)E.push(g(_[k]))}else if(F.has(_.constructor))E=_;else{var z,B=c(_);for(z in E=B===Object.prototype?{}:Object.create(B),$.set(_,E),_)h(_,z)&&(E[z]=g(_[z]))}return E}(p),$=null,p}var q={}.toString;function W(p){return q.call(p).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof Z=="symbol"?function(p){var g;return p!=null&&(g=p[Z])&&g.apply(p)}:function(){return null};function ee(p,g){return g=p.indexOf(g),0<=g&&p.splice(g,1),0<=g}var ae={};function he(p){var g,_,E,k;if(arguments.length===1){if(l(p))return p.slice();if(this===ae&&typeof p=="string")return[p];if(k=de(p)){for(_=[];!(E=k.next()).done;)_.push(E.value);return _}if(p==null)return[p];if(typeof(g=p.length)!="number")return[p];for(_=new Array(g);g--;)_[g]=p[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var be=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},_n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(_n),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ae(p,g){this.name=p,this.message=g}function Pe(p,g){return p+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,E,k){return k.indexOf(_)===E}).join(`
`)}function Me(p,g,_,E){this.failures=g,this.failedKeys=E,this.successCount=_,this.message=Pe(p,g)}function Ye(p,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=Pe(p,this.failures)}I(Ae).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(Me).from(Ae),I(Ye).from(Ae);var We=wr.reduce(function(p,g){return p[g]=g+"Error",p},{}),qt=Ae,Le=wr.reduce(function(p,g){var _=g+"Error";function E(k,P){this.name=_,k?typeof k=="string"?(this.message="".concat(k).concat(P?`
 `+P:""),this.inner=P||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=ce[g]||_,this.inner=null)}return I(E).from(qt),p[g]=E,p},{});Le.Syntax=SyntaxError,Le.Type=TypeError,Le.Range=RangeError;var ci=_n.reduce(function(p,g){return p[g+"Error"]=Le[g],p},{}),hi=wr.reduce(function(p,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(p[g+"Error"]=Le[g]),p},{});function ot(){}function jr(p){return p}function Se(p,g){return p==null||p===jr?g:function(_){return g(p(_))}}function Be(p,g){return function(){p.apply(this,arguments),g.apply(this,arguments)}}function At(p,g){return p===ot?g:function(){var _=p.apply(this,arguments);_!==void 0&&(arguments[0]=_);var E=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var P=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?Be(E,this.onsuccess):E),k&&(this.onerror=this.onerror?Be(k,this.onerror):k),P!==void 0?P:_}}function yn(p,g){return p===ot?g:function(){p.apply(this,arguments);var _=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?Be(_,this.onsuccess):_),E&&(this.onerror=this.onerror?Be(E,this.onerror):E)}}function Do(p,g){return p===ot?g:function(_){var E=p.apply(this,arguments);u(_,E);var k=this.onsuccess,P=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?Be(k,this.onsuccess):k),P&&(this.onerror=this.onerror?Be(P,this.onerror):P),E===void 0?_===void 0?void 0:_:u(E,_)}}function Ht(p,g){return p===ot?g:function(){return g.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Kt(p,g){return p===ot?g:function(){var _=p.apply(this,arguments);if(_&&typeof _.then=="function"){for(var E=this,k=arguments.length,P=new Array(k);k--;)P[k]=arguments[k];return _.then(function(){return g.apply(E,P)})}return g.apply(this,arguments)}}hi.ModifyError=Me,hi.DexieError=Ae,hi.BulkError=Ye;var vn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pu(p){vn=p}var qi={},mu=100,Dt=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,c(p),p];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,c(g),p]}(),_n=Dt[0],wr=Dt[1],Dt=Dt[2],wr=wr&&wr.then,dr=_n&&_n.constructor,Hi=!!Dt,Mo=function(p,g){ks.push([p,g]),Lo&&(queueMicrotask(Yp),Lo=!1)},gu=!0,Lo=!0,fi=[],di=[],Vo=jr,pr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ot,pgp:!1,env:{},finalize:ot},Oe=pr,ks=[],mr=0,Fo=[];function Ie(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=Oe;if(typeof p!="function"){if(p!==qi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ba(this,this._value))}this._state=null,this._value=null,++g.ref,function _(E,k){try{k(function(P){if(E._state===null){if(P===E)throw new TypeError("A promise cannot be resolved with itself.");var z=E._lib&&Jn();P&&typeof P.then=="function"?_(E,function(B,K){P instanceof Ie?P._then(B,K):P.then(B,K)}):(E._state=!0,E._value=P,As(E)),z&&Ns()}},Ba.bind(null,E))}catch(P){Ba(E,P)}}(this,p)}var $a={get:function(){var p=Oe,g=Zn;function _(E,k){var P=this,z=!p.global&&(p!==Oe||g!==Zn),B=z&&!gr(),K=new Ie(function(G,te){Ki(P,new on(_u(E,p,z,B),_u(k,p,z,B),G,te,p))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return _.prototype=qi,_},set:function(p){w(this,"then",p&&p.prototype===qi?$a:{get:function(){return p},set:$a.set})}};function on(p,g,_,E,k){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=E,this.psd=k}function Ba(p,g){var _,E;di.push(g),p._state===null&&(_=p._lib&&Jn(),g=Vo(g),p._state=!1,p._value=g,E=p,fi.some(function(k){return k._value===E._value})||fi.push(E),As(p),_&&Ns())}function As(p){var g=p._listeners;p._listeners=[];for(var _=0,E=g.length;_<E;++_)Ki(p,g[_]);var k=p._PSD;--k.ref||k.finalize(),mr===0&&(++mr,Mo(function(){--mr==0&&yu()},[]))}function Ki(p,g){if(p._state!==null){var _=p._state?g.onFulfilled:g.onRejected;if(_===null)return(p._state?g.resolve:g.reject)(p._value);++g.psd.ref,++mr,Mo(Qp,[_,p,g])}else p._listeners.push(g)}function Qp(p,g,_){try{var E,k=g._value;!g._state&&di.length&&(di=[]),E=vn&&g._consoleTask?g._consoleTask.run(function(){return p(k)}):p(k),g._state||di.indexOf(k)!==-1||function(P){for(var z=fi.length;z;)if(fi[--z]._value===P._value)return fi.splice(z,1)}(g),_.resolve(E)}catch(P){_.reject(P)}finally{--mr==0&&yu(),--_.psd.ref||_.psd.finalize()}}function Yp(){yr(pr,function(){Jn()&&Ns()})}function Jn(){var p=gu;return Lo=gu=!1,p}function Ns(){var p,g,_;do for(;0<ks.length;)for(p=ks,ks=[],_=p.length,g=0;g<_;++g){var E=p[g];E[0].apply(null,E[1])}while(0<ks.length);Lo=gu=!0}function yu(){var p=fi;fi=[],p.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var g=Fo.slice(0),_=g.length;_;)g[--_]()}function Wi(p){return new Ie(qi,!1,p)}function gt(p,g){var _=Oe;return function(){var E=Jn(),k=Oe;try{return Mr(_,!0),p.apply(this,arguments)}catch(P){g&&g(P)}finally{Mr(k,!1),E&&Ns()}}}m(Ie.prototype,{then:$a,_then:function(p,g){Ki(this,new on(null,null,p,g,Oe))},catch:function(p){if(arguments.length===1)return this.then(null,p);var g=p,_=arguments[1];return typeof g=="function"?this.then(null,function(E){return(E instanceof g?_:Wi)(E)}):this.then(null,function(E){return(E&&E.name===g?_:Wi)(E)})},finally:function(p){return this.then(function(g){return Ie.resolve(p()).then(function(){return g})},function(g){return Ie.resolve(p()).then(function(){return Wi(g)})})},timeout:function(p,g){var _=this;return p<1/0?new Ie(function(E,k){var P=setTimeout(function(){return k(new Le.Timeout(g))},p);_.then(E,k).finally(clearTimeout.bind(null,P))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),pr.env=Ah(),m(Ie,{all:function(){var p=he.apply(null,arguments).map(Uo);return new Ie(function(g,_){p.length===0&&g([]);var E=p.length;p.forEach(function(k,P){return Ie.resolve(k).then(function(z){p[P]=z,--E||g(p)},_)})})},resolve:function(p){return p instanceof Ie?p:p&&typeof p.then=="function"?new Ie(function(g,_){p.then(g,_)}):new Ie(qi,!0,p)},reject:Wi,race:function(){var p=he.apply(null,arguments).map(Uo);return new Ie(function(g,_){p.map(function(E){return Ie.resolve(E).then(g,_)})})},PSD:{get:function(){return Oe},set:function(p){return Oe=p}},totalEchoes:{get:function(){return Zn}},newPSD:Dr,usePSD:yr,scheduler:{get:function(){return Mo},set:function(p){Mo=p}},rejectionMapper:{get:function(){return Vo},set:function(p){Vo=p}},follow:function(p,g){return new Ie(function(_,E){return Dr(function(k,P){var z=Oe;z.unhandleds=[],z.onunhandled=P,z.finalize=Be(function(){var B,K=this;B=function(){K.unhandleds.length===0?k():P(K.unhandleds[0])},Fo.push(function G(){B(),Fo.splice(Fo.indexOf(G),1)}),++mr,Mo(function(){--mr==0&&yu()},[])},z.finalize),p()},g,_,E)})}}),dr&&(dr.allSettled&&w(Ie,"allSettled",function(){var p=he.apply(null,arguments).map(Uo);return new Ie(function(g){p.length===0&&g([]);var _=p.length,E=new Array(_);p.forEach(function(k,P){return Ie.resolve(k).then(function(z){return E[P]={status:"fulfilled",value:z}},function(z){return E[P]={status:"rejected",reason:z}}).then(function(){return--_||g(E)})})})}),dr.any&&typeof AggregateError<"u"&&w(Ie,"any",function(){var p=he.apply(null,arguments).map(Uo);return new Ie(function(g,_){p.length===0&&_(new AggregateError([]));var E=p.length,k=new Array(E);p.forEach(function(P,z){return Ie.resolve(P).then(function(B){return g(B)},function(B){k[z]=B,--E||_(new AggregateError(k))})})})}),dr.withResolvers&&(Ie.withResolvers=dr.withResolvers));var Ft={awaits:0,echoes:0,id:0},vu=0,pi=[],qa=0,Zn=0,kh=0;function Dr(p,g,_,E){var k=Oe,P=Object.create(k);return P.parent=k,P.ref=0,P.global=!1,P.id=++kh,pr.env,P.env=Hi?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},g&&u(P,g),++k.ref,P.finalize=function(){--this.parent.ref||this.parent.finalize()},E=yr(P,p,_,E),P.ref===0&&P.finalize(),E}function mi(){return Ft.id||(Ft.id=++vu),++Ft.awaits,Ft.echoes+=mu,Ft.id}function gr(){return!!Ft.awaits&&(--Ft.awaits==0&&(Ft.id=0),Ft.echoes=Ft.awaits*mu,!0)}function Uo(p){return Ft.echoes&&p&&p.constructor===dr?(mi(),p.then(function(g){return gr(),g},function(g){return gr(),yt(g)})):p}function Xp(){var p=pi[pi.length-1];pi.pop(),Mr(p,!1)}function Mr(p,g){var _,E=Oe;(g?!Ft.echoes||qa++&&p===Oe:!qa||--qa&&p===Oe)||queueMicrotask(g?(function(k){++Zn,Ft.echoes&&--Ft.echoes!=0||(Ft.echoes=Ft.awaits=Ft.id=0),pi.push(Oe),Mr(k,!0)}).bind(null,p):Xp),p!==Oe&&(Oe=p,E===pr&&(pr.env=Ah()),Hi&&(_=pr.env.Promise,g=p.env,(E.global||p.global)&&(Object.defineProperty(o,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function Ah(){var p=o.Promise;return Hi?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function yr(p,g,_,E,k){var P=Oe;try{return Mr(p,!0),g(_,E,k)}finally{Mr(P,!1)}}function _u(p,g,_,E){return typeof p!="function"?p:function(){var k=Oe;_&&mi(),Mr(g,!0);try{return p.apply(this,arguments)}finally{Mr(k,!1),E&&queueMicrotask(gr)}}}function zo(p){Promise===dr&&Ft.echoes===0?qa===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+wr).indexOf("[native code]")===-1&&(mi=gr=ot);var yt=Ie.reject,On="",er="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Nh="String expected.",Gi=[],$o="__dbnames",Ha="readonly",Bo="readwrite";function Lr(p,g){return p?g?function(){return p.apply(this,arguments)&&g.apply(this,arguments)}:p:g}var wu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function qo(p){return typeof p!="string"||/\./.test(p)?function(g){return g}:function(g){return g[p]===void 0&&p in g&&delete(g=j(g))[p],g}}function xu(){throw Le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Je(p,g){try{var _=Vr(p),E=Vr(g);if(_!==E)return _==="Array"?1:E==="Array"?-1:_==="binary"?1:E==="binary"?-1:_==="string"?1:E==="string"?-1:_==="Date"?1:E!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<p?1:p<g?-1:0;case"binary":return function(k,P){for(var z=k.length,B=P.length,K=z<B?z:B,G=0;G<K;++G)if(k[G]!==P[G])return k[G]<P[G]?-1:1;return z===B?0:z<B?-1:1}(tr(p),tr(g));case"Array":return function(k,P){for(var z=k.length,B=P.length,K=z<B?z:B,G=0;G<K;++G){var te=Je(k[G],P[G]);if(te!==0)return te}return z===B?0:z<B?-1:1}(p,g)}}catch{}return NaN}function Vr(p){var g=typeof p;return g!="object"?g:ArrayBuffer.isView(p)?"binary":(p=W(p),p==="ArrayBuffer"?"binary":p)}function tr(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function gi(p,g,_){var E=p.schema.yProps;return E?(g&&0<_.numFailures&&(g=g.filter(function(k,P){return!_.failures[P]})),Promise.all(E.map(function(k){return k=k.updatesTable,g?p.db.table(k).where("k").anyOf(g).delete():p.db.table(k).clear()})).then(function(){return _})):_}var Fr=(Ka.prototype.execute=function(p){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(l(_))return s(s([],l(p)?p:[],!0),_).sort();if(typeof _=="number")return(Number(p)||0)+_;if(typeof _=="bigint")try{return BigInt(p)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var E=g.remove;if(l(E))return l(p)?p.filter(function(k){return!E.includes(k)}).sort():[];if(typeof E=="number")return Number(p)-E;if(typeof E=="bigint")try{return BigInt(p)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof p=="string"&&p.startsWith(_)?g.replacePrefix[1]+p.substring(_.length):p},Ka);function Ka(p){this["@@propmod"]=p}function pt(p,g){for(var _=a(g),E=_.length,k=!1,P=0;P<E;++P){var z=_[P],B=g[z],K=U(p,z);B instanceof Fr?(A(p,z,B.execute(K)),k=!0):K!==B&&(A(p,z,B),k=!0)}return k}var Ho=(ut.prototype._trans=function(p,g,_){var E=this._tx||Oe.trans,k=this.name,P=vn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function z(G,te,H){if(!H.schema[k])throw new Le.NotFound("Table "+k+" not part of transaction");return g(H.idbtrans,H)}var B=Jn();try{var K=E&&E.db._novip===this.db._novip?E===Oe.trans?E._promise(p,z,_):Dr(function(){return E._promise(p,z,_)},{trans:E,transless:Oe.transless||Oe}):function G(te,H,re,Q){if(te.idbdb&&(te._state.openComplete||Oe.letThrough||te._vip)){var X=te._createTransaction(H,re,te._dbSchema);try{X.create(),te._state.PR1398_maxLoop=3}catch(J){return J.name===We.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return G(te,H,re,Q)})):yt(J)}return X._promise(H,function(J,ne){return Dr(function(){return Oe.trans=X,Q(J,ne,X)})}).then(function(J){if(H==="readwrite")try{X.idbtrans.commit()}catch{}return H==="readonly"?J:X._completion.then(function(){return J})})}if(te._state.openComplete)return yt(new Le.DatabaseClosed(te._state.dbOpenError));if(!te._state.isBeingOpened){if(!te._state.autoOpen)return yt(new Le.DatabaseClosed);te.open().catch(ot)}return te._state.dbReadyPromise.then(function(){return G(te,H,re,Q)})}(this.db,p,[this.name],z);return P&&(K._consoleTask=P,K=K.catch(function(G){return console.trace(G),yt(G)})),K}finally{B&&Ns()}},ut.prototype.get=function(p,g){var _=this;return p&&p.constructor===Object?this.where(p).first(g):p==null?yt(new Le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return _.core.get({trans:E,key:p}).then(function(k){return _.hook.reading.fire(k)})}).then(g)},ut.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(l(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var g=a(p);if(g.length===1)return this.where(g[0]).equals(p[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(B){if(B.compound&&g.every(function(G){return 0<=B.keyPath.indexOf(G)})){for(var K=0;K<g.length;++K)if(g.indexOf(B.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(B,K){return B.keyPath.length-K.keyPath.length})[0];if(_&&this.db._maxKey!==On){var P=_.keyPath.slice(0,g.length);return this.where(P).equals(P.map(function(K){return p[K]}))}!_&&vn&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var E=this.schema.idxByName;function k(B,K){return Je(B,K)===0}var z=g.reduce(function(H,K){var G=H[0],te=H[1],H=E[K],re=p[K];return[G||H,G||!H?Lr(te,H&&H.multi?function(Q){return Q=U(Q,K),l(Q)&&Q.some(function(X){return k(re,X)})}:function(Q){return k(re,U(Q,K))}):te]},[null,null]),P=z[0],z=z[1];return P?this.where(P.name).equals(p[P.keyPath]).filter(z):_?this.filter(z):this.where(g).equals("")},ut.prototype.filter=function(p){return this.toCollection().and(p)},ut.prototype.count=function(p){return this.toCollection().count(p)},ut.prototype.offset=function(p){return this.toCollection().offset(p)},ut.prototype.limit=function(p){return this.toCollection().limit(p)},ut.prototype.each=function(p){return this.toCollection().each(p)},ut.prototype.toArray=function(p){return this.toCollection().toArray(p)},ut.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ut.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,l(p)?"[".concat(p.join("+"),"]"):p))},ut.prototype.reverse=function(){return this.toCollection().reverse()},ut.prototype.mapToClass=function(p){var g,_=this.db,E=this.name;function k(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof xu&&(function(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function te(){this.constructor=K}r(K,G),K.prototype=G===null?Object.create(G):(te.prototype=G.prototype,new te)}(k,g=p),Object.defineProperty(k.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),k.prototype.table=function(){return E},p=k);for(var P=new Set,z=p.prototype;z;z=c(z))Object.getOwnPropertyNames(z).forEach(function(K){return P.add(K)});function B(K){if(!K)return K;var G,te=Object.create(p.prototype);for(G in K)if(!P.has(G))try{te[G]=K[G]}catch{}return te}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=B,this.hook("reading",B),p},ut.prototype.defineClass=function(){return this.mapToClass(function(p){u(this,p)})},ut.prototype.add=function(p,g){var _=this,E=this.schema.primKey,k=E.auto,P=E.keyPath,z=p;return P&&k&&(z=qo(P)(p)),this._trans("readwrite",function(B){return _.core.mutate({trans:B,type:"add",keys:g!=null?[g]:null,values:[z]})}).then(function(B){return B.numFailures?Ie.reject(B.failures[0]):B.lastResult}).then(function(B){if(P)try{A(p,P,B)}catch{}return B})},ut.prototype.upsert=function(p,g){var _=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return _.core.get({trans:k,key:p}).then(function(P){var z=P??{};return pt(z,g),E&&A(z,E,p),_.core.mutate({trans:k,type:"put",values:[z],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[g]}}).then(function(B){return B.numFailures?Ie.reject(B.failures[0]):!!P})})})},ut.prototype.update=function(p,g){return typeof p!="object"||l(p)?this.where(":id").equals(p).modify(g):(p=U(p,this.schema.primKey.keyPath),p===void 0?yt(new Le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(g))},ut.prototype.put=function(p,g){var _=this,E=this.schema.primKey,k=E.auto,P=E.keyPath,z=p;return P&&k&&(z=qo(P)(p)),this._trans("readwrite",function(B){return _.core.mutate({trans:B,type:"put",values:[z],keys:g!=null?[g]:null})}).then(function(B){return B.numFailures?Ie.reject(B.failures[0]):B.lastResult}).then(function(B){if(P)try{A(p,P,B)}catch{}return B})},ut.prototype.delete=function(p){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[p]}).then(function(E){return gi(g,[p],E)}).then(function(E){return E.numFailures?Ie.reject(E.failures[0]):void 0})})},ut.prototype.clear=function(){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"deleteRange",range:wu}).then(function(_){return gi(p,null,_)})}).then(function(g){return g.numFailures?Ie.reject(g.failures[0]):void 0})},ut.prototype.bulkGet=function(p){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:p,trans:_}).then(function(E){return E.map(function(k){return g.hook.reading.fire(k)})})})},ut.prototype.bulkAdd=function(p,g,_){var E=this,k=Array.isArray(g)?g:void 0,P=(_=_||(k?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(z){var G=E.schema.primKey,B=G.auto,G=G.keyPath;if(G&&k)throw new Le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var K=p.length,G=G&&B?p.map(qo(G)):p;return E.core.mutate({trans:z,type:"add",keys:k,values:G,wantResults:P}).then(function(X){var H=X.numFailures,re=X.results,Q=X.lastResult,X=X.failures;if(H===0)return P?re:Q;throw new Ye("".concat(E.name,".bulkAdd(): ").concat(H," of ").concat(K," operations failed"),X)})})},ut.prototype.bulkPut=function(p,g,_){var E=this,k=Array.isArray(g)?g:void 0,P=(_=_||(k?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function(z){var G=E.schema.primKey,B=G.auto,G=G.keyPath;if(G&&k)throw new Le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var K=p.length,G=G&&B?p.map(qo(G)):p;return E.core.mutate({trans:z,type:"put",keys:k,values:G,wantResults:P}).then(function(X){var H=X.numFailures,re=X.results,Q=X.lastResult,X=X.failures;if(H===0)return P?re:Q;throw new Ye("".concat(E.name,".bulkPut(): ").concat(H," of ").concat(K," operations failed"),X)})})},ut.prototype.bulkUpdate=function(p){var g=this,_=this.core,E=p.map(function(z){return z.key}),k=p.map(function(z){return z.changes}),P=[];return this._trans("readwrite",function(z){return _.getMany({trans:z,keys:E,cache:"clone"}).then(function(B){var K=[],G=[];p.forEach(function(H,re){var Q=H.key,X=H.changes,J=B[re];if(J){for(var ne=0,se=Object.keys(X);ne<se.length;ne++){var oe=se[ne],fe=X[oe];if(oe===g.schema.primKey.keyPath){if(Je(fe,Q)!==0)throw new Le.Constraint("Cannot update primary key in bulkUpdate()")}else A(J,oe,fe)}P.push(re),K.push(Q),G.push(J)}});var te=K.length;return _.mutate({trans:z,type:"put",keys:K,values:G,updates:{keys:E,changeSpecs:k}}).then(function(H){var re=H.numFailures,Q=H.failures;if(re===0)return te;for(var X=0,J=Object.keys(Q);X<J.length;X++){var ne,se=J[X],oe=P[Number(se)];oe!=null&&(ne=Q[se],delete Q[se],Q[oe]=ne)}throw new Ye("".concat(g.name,".bulkUpdate(): ").concat(re," of ").concat(te," operations failed"),Q)})})})},ut.prototype.bulkDelete=function(p){var g=this,_=p.length;return this._trans("readwrite",function(E){return g.core.mutate({trans:E,type:"delete",keys:p}).then(function(k){return gi(g,p,k)})}).then(function(z){var k=z.numFailures,P=z.lastResult,z=z.failures;if(k===0)return P;throw new Ye("".concat(g.name,".bulkDelete(): ").concat(k," of ").concat(_," operations failed"),z)})},ut);function ut(){}function Ur(p){function g(z,B){if(B){for(var K=arguments.length,G=new Array(K-1);--K;)G[K-1]=arguments[K];return _[z].subscribe.apply(null,G),p}if(typeof z=="string")return _[z]}var _={};g.addEventType=P;for(var E=1,k=arguments.length;E<k;++E)P(arguments[E]);return g;function P(z,B,K){if(typeof z!="object"){var G;B=B||Ht;var te={subscribers:[],fire:K=K||ot,subscribe:function(H){te.subscribers.indexOf(H)===-1&&(te.subscribers.push(H),te.fire=B(te.fire,H))},unsubscribe:function(H){te.subscribers=te.subscribers.filter(function(re){return re!==H}),te.fire=te.subscribers.reduce(B,K)}};return _[z]=g[z]=te}a(G=z).forEach(function(H){var re=G[H];if(l(re))P(H,G[H][0],G[H][1]);else{if(re!=="asap")throw new Le.InvalidArgument("Invalid event config");var Q=P(H,jr,function(){for(var X=arguments.length,J=new Array(X);X--;)J[X]=arguments[X];Q.subscribers.forEach(function(ne){L(function(){ne.apply(null,J)})})})}})}}function Ko(p,g){return I(g).from({prototype:p}),g}function Qi(p,g){return!(p.filter||p.algorithm||p.or)&&(g?p.justLimit:!p.replayFilter)}function bu(p,g){p.filter=Lr(p.filter,g)}function Eu(p,g,_){var E=p.replayFilter;p.replayFilter=E?function(){return Lr(E(),g())}:g,p.justLimit=_&&!E}function Wa(p,g){if(p.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(p.index);if(!_)throw new Le.Schema("KeyPath "+p.index+" on object store "+g.name+" is not indexed");return _}function Rh(p,g,_){var E=Wa(p,g.schema);return g.openCursor({trans:_,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:E,range:p.range}})}function yi(p,g,_,E){var k=p.replayFilter?Lr(p.filter,p.replayFilter()):p.filter;if(p.or){var P={},z=function(B,K,G){var te,H;k&&!k(K,G,function(re){return K.stop(re)},function(re){return K.fail(re)})||((H=""+(te=K.primaryKey))=="[object ArrayBuffer]"&&(H=""+new Uint8Array(te)),h(P,H)||(P[H]=!0,g(B,K,G)))};return Promise.all([p.or._iterate(z,_),vi(Rh(p,E,_),p.algorithm,z,!p.keysOnly&&p.valueMapper)])}return vi(Rh(p,E,_),Lr(p.algorithm,k),g,!p.keysOnly&&p.valueMapper)}function vi(p,g,_,E){var k=gt(E?function(P,z,B){return _(E(P),z,B)}:_);return p.then(function(P){if(P)return P.start(function(){var z=function(){return P.continue()};g&&!g(P,function(B){return z=B},function(B){P.stop(B),z=ot},function(B){P.fail(B),z=ot})||k(P.value,P,function(B){return z=B}),z()})})}var Ph=(it.prototype._read=function(p,g){var _=this._ctx;return _.error?_.table._trans(null,yt.bind(null,_.error)):_.table._trans("readonly",p).then(g)},it.prototype._write=function(p){var g=this._ctx;return g.error?g.table._trans(null,yt.bind(null,g.error)):g.table._trans("readwrite",p,"locked")},it.prototype._addAlgorithm=function(p){var g=this._ctx;g.algorithm=Lr(g.algorithm,p)},it.prototype._iterate=function(p,g){return yi(this._ctx,p,g,this._ctx.table.core)},it.prototype.clone=function(p){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return p&&u(_,p),g._ctx=_,g},it.prototype.raw=function(){return this._ctx.valueMapper=null,this},it.prototype.each=function(p){var g=this._ctx;return this._read(function(_){return yi(g,p,_,g.table.core)})},it.prototype.count=function(p){var g=this;return this._read(function(_){var E=g._ctx,k=E.table.core;if(Qi(E,!0))return k.count({trans:_,query:{index:Wa(E,k.schema),range:E.range}}).then(function(z){return Math.min(z,E.limit)});var P=0;return yi(E,function(){return++P,!1},_,k).then(function(){return P})}).then(p)},it.prototype.sortBy=function(p,g){var _=p.split(".").reverse(),E=_[0],k=_.length-1;function P(K,G){return G?P(K[_[G]],G-1):K[E]}var z=this._ctx.dir==="next"?1:-1;function B(K,G){return Je(P(K,k),P(G,k))*z}return this.toArray(function(K){return K.sort(B)}).then(g)},it.prototype.toArray=function(p){var g=this;return this._read(function(_){var E=g._ctx;if(E.dir==="next"&&Qi(E,!0)&&0<E.limit){var k=E.valueMapper,P=Wa(E,E.table.core.schema);return E.table.core.query({trans:_,limit:E.limit,values:!0,query:{index:P,range:E.range}}).then(function(B){return B=B.result,k?B.map(k):B})}var z=[];return yi(E,function(B){return z.push(B)},_,E.table.core).then(function(){return z})},p)},it.prototype.offset=function(p){var g=this._ctx;return p<=0||(g.offset+=p,Qi(g)?Eu(g,function(){var _=p;return function(E,k){return _===0||(_===1?--_:k(function(){E.advance(_),_=0}),!1)}}):Eu(g,function(){var _=p;return function(){return--_<0}})),this},it.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),Eu(this._ctx,function(){var g=p;return function(_,E,k){return--g<=0&&E(k),0<=g}},!0),this},it.prototype.until=function(p,g){return bu(this._ctx,function(_,E,k){return!p(_.value)||(E(k),g)}),this},it.prototype.first=function(p){return this.limit(1).toArray(function(g){return g[0]}).then(p)},it.prototype.last=function(p){return this.reverse().first(p)},it.prototype.filter=function(p){var g;return bu(this._ctx,function(_){return p(_.value)}),(g=this._ctx).isMatch=Lr(g.isMatch,p),this},it.prototype.and=function(p){return this.filter(p)},it.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},it.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},it.prototype.desc=function(){return this.reverse()},it.prototype.eachKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){p(E.key,E)})},it.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},it.prototype.eachPrimaryKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,E){p(E.primaryKey,E)})},it.prototype.keys=function(p){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,k){_.push(k.key)}).then(function(){return _}).then(p)},it.prototype.primaryKeys=function(p){var g=this._ctx;if(g.dir==="next"&&Qi(g,!0)&&0<g.limit)return this._read(function(E){var k=Wa(g,g.table.core.schema);return g.table.core.query({trans:E,values:!1,limit:g.limit,query:{index:k,range:g.range}})}).then(function(E){return E.result}).then(p);g.keysOnly=!g.isMatch;var _=[];return this.each(function(E,k){_.push(k.primaryKey)}).then(function(){return _}).then(p)},it.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},it.prototype.firstKey=function(p){return this.limit(1).keys(function(g){return g[0]}).then(p)},it.prototype.lastKey=function(p){return this.reverse().firstKey(p)},it.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var g={};return bu(this._ctx,function(k){var E=k.primaryKey.toString(),k=h(g,E);return g[E]=!0,!k}),this},it.prototype.modify=function(p){var g=this,_=this._ctx;return this._write(function(E){var k=typeof p=="function"?p:function(J){return pt(J,p)},P=_.table.core,G=P.schema.primaryKey,z=G.outbound,B=G.extractKey,K=200,G=g.db._options.modifyChunkSize;G&&(K=typeof G=="object"?G[P.name]||G["*"]||200:G);function te(J,oe){var se=oe.failures,oe=oe.numFailures;re+=J-oe;for(var fe=0,pe=a(se);fe<pe.length;fe++){var we=pe[fe];H.push(se[we])}}var H=[],re=0,Q=[],X=p===Tu;return g.clone().primaryKeys().then(function(J){function ne(oe){var fe=Math.min(K,J.length-oe),pe=J.slice(oe,oe+fe);return(X?Promise.resolve([]):P.getMany({trans:E,keys:pe,cache:"immutable"})).then(function(we){var Ce=[],ve=[],Ee=z?[]:null,ke=X?pe:[];if(!X)for(var Te=0;Te<fe;++Te){var Re=we[Te],Ge={value:j(Re),primKey:J[oe+Te]};k.call(Ge,Ge.value,Ge)!==!1&&(Ge.value==null?ke.push(J[oe+Te]):z||Je(B(Re),B(Ge.value))===0?(ve.push(Ge.value),z&&Ee.push(J[oe+Te])):(ke.push(J[oe+Te]),Ce.push(Ge.value)))}return Promise.resolve(0<Ce.length&&P.mutate({trans:E,type:"add",values:Ce}).then(function(Qe){for(var Xe in Qe.failures)ke.splice(parseInt(Xe),1);te(Ce.length,Qe)})).then(function(){return(0<ve.length||se&&typeof p=="object")&&P.mutate({trans:E,type:"put",keys:Ee,values:ve,criteria:se,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<oe}).then(function(Qe){return te(ve.length,Qe)})}).then(function(){return(0<ke.length||se&&X)&&P.mutate({trans:E,type:"delete",keys:ke,criteria:se,isAdditionalChunk:0<oe}).then(function(Qe){return gi(_.table,ke,Qe)}).then(function(Qe){return te(ke.length,Qe)})}).then(function(){return J.length>oe+fe&&ne(oe+K)})})}var se=Qi(_)&&_.limit===1/0&&(typeof p!="function"||X)&&{index:_.index,range:_.range};return ne(0).then(function(){if(0<H.length)throw new Me("Error modifying one or more objects",H,re,Q);return J.length})})})},it.prototype.delete=function(){var p=this._ctx,g=p.range;return!Qi(p)||p.table.schema.yProps||!p.isPrimKey&&g.type!==3?this.modify(Tu):this._write(function(_){var E=p.table.core.schema.primaryKey,k=g;return p.table.core.count({trans:_,query:{index:E,range:k}}).then(function(P){return p.table.core.mutate({trans:_,type:"deleteRange",range:k}).then(function(K){var B=K.failures,K=K.numFailures;if(K)throw new Me("Could not delete some values",Object.keys(B).map(function(G){return B[G]}),P-K);return P-K})})})},it);function it(){}var Tu=function(p,g){return g.value=null};function Oh(p,g){return p<g?-1:p===g?0:1}function jh(p,g){return g<p?-1:p===g?0:1}function Wt(p,g,_){return p=p instanceof Dh?new p.Collection(p):p,p._ctx.error=new(_||TypeError)(g),p}function Rs(p){return new p.Collection(p,function(){return zr("")}).limit(0)}function Ga(p,g,_,E){var k,P,z,B,K,G,te,H=_.length;if(!_.every(function(X){return typeof X=="string"}))return Wt(p,Nh);function re(X){k=X==="next"?function(ne){return ne.toUpperCase()}:function(ne){return ne.toLowerCase()},P=X==="next"?function(ne){return ne.toLowerCase()}:function(ne){return ne.toUpperCase()},z=X==="next"?Oh:jh;var J=_.map(function(ne){return{lower:P(ne),upper:k(ne)}}).sort(function(ne,se){return z(ne.lower,se.lower)});B=J.map(function(ne){return ne.upper}),K=J.map(function(ne){return ne.lower}),te=(G=X)==="next"?"":E}re("next"),p=new p.Collection(p,function(){return _i(B[0],K[H-1]+E)}),p._ondirectionchange=function(X){re(X)};var Q=0;return p._addAlgorithm(function(X,J,ne){var se=X.key;if(typeof se!="string")return!1;var oe=P(se);if(g(oe,K,Q))return!0;for(var fe=null,pe=Q;pe<H;++pe){var we=function(Ce,ve,Ee,ke,Te,Re){for(var Ge=Math.min(Ce.length,ke.length),Qe=-1,Xe=0;Xe<Ge;++Xe){var nr=ve[Xe];if(nr!==ke[Xe])return Te(Ce[Xe],Ee[Xe])<0?Ce.substr(0,Xe)+Ee[Xe]+Ee.substr(Xe+1):Te(Ce[Xe],ke[Xe])<0?Ce.substr(0,Xe)+ke[Xe]+Ee.substr(Xe+1):0<=Qe?Ce.substr(0,Qe)+ve[Qe]+Ee.substr(Qe+1):null;Te(Ce[Xe],nr)<0&&(Qe=Xe)}return Ge<ke.length&&Re==="next"?Ce+Ee.substr(Ce.length):Ge<Ce.length&&Re==="prev"?Ce.substr(0,Ee.length):Qe<0?null:Ce.substr(0,Qe)+ke[Qe]+Ee.substr(Qe+1)}(se,oe,B[pe],K[pe],z,G);we===null&&fe===null?Q=pe+1:(fe===null||0<z(fe,we))&&(fe=we)}return J(fe!==null?function(){X.continue(fe+te)}:ne),!1}),p}function _i(p,g,_,E){return{type:2,lower:p,upper:g,lowerOpen:_,upperOpen:E}}function zr(p){return{type:1,lower:p,upper:p}}var Dh=(Object.defineProperty(Mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mt.prototype.between=function(p,g,_,E){_=_!==!1,E=E===!0;try{return 0<this._cmp(p,g)||this._cmp(p,g)===0&&(_||E)&&(!_||!E)?Rs(this):new this.Collection(this,function(){return _i(p,g,!_,!E)})}catch{return Wt(this,er)}},Mt.prototype.equals=function(p){return p==null?Wt(this,er):new this.Collection(this,function(){return zr(p)})},Mt.prototype.above=function(p){return p==null?Wt(this,er):new this.Collection(this,function(){return _i(p,void 0,!0)})},Mt.prototype.aboveOrEqual=function(p){return p==null?Wt(this,er):new this.Collection(this,function(){return _i(p,void 0,!1)})},Mt.prototype.below=function(p){return p==null?Wt(this,er):new this.Collection(this,function(){return _i(void 0,p,!1,!0)})},Mt.prototype.belowOrEqual=function(p){return p==null?Wt(this,er):new this.Collection(this,function(){return _i(void 0,p)})},Mt.prototype.startsWith=function(p){return typeof p!="string"?Wt(this,Nh):this.between(p,p+On,!0,!0)},Mt.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):Ga(this,function(g,_){return g.indexOf(_[0])===0},[p],On)},Mt.prototype.equalsIgnoreCase=function(p){return Ga(this,function(g,_){return g===_[0]},[p],"")},Mt.prototype.anyOfIgnoreCase=function(){var p=he.apply(ae,arguments);return p.length===0?Rs(this):Ga(this,function(g,_){return _.indexOf(g)!==-1},p,"")},Mt.prototype.startsWithAnyOfIgnoreCase=function(){var p=he.apply(ae,arguments);return p.length===0?Rs(this):Ga(this,function(g,_){return _.some(function(E){return g.indexOf(E)===0})},p,On)},Mt.prototype.anyOf=function(){var p=this,g=he.apply(ae,arguments),_=this._cmp;try{g.sort(_)}catch{return Wt(this,er)}if(g.length===0)return Rs(this);var E=new this.Collection(this,function(){return _i(g[0],g[g.length-1])});E._ondirectionchange=function(P){_=P==="next"?p._ascending:p._descending,g.sort(_)};var k=0;return E._addAlgorithm(function(P,z,B){for(var K=P.key;0<_(K,g[k]);)if(++k===g.length)return z(B),!1;return _(K,g[k])===0||(z(function(){P.continue(g[k])}),!1)}),E},Mt.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mt.prototype.noneOf=function(){var p=he.apply(ae,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return Wt(this,er)}var g=p.reduce(function(_,E){return _?_.concat([[_[_.length-1][1],E]]):[[-1/0,E]]},null);return g.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},Mt.prototype.inAnyRange=function(se,g){var _=this,E=this._cmp,k=this._ascending,P=this._descending,z=this._min,B=this._max;if(se.length===0)return Rs(this);if(!se.every(function(oe){return oe[0]!==void 0&&oe[1]!==void 0&&k(oe[0],oe[1])<=0}))return Wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Le.InvalidArgument);var K=!g||g.includeLowers!==!1,G=g&&g.includeUppers===!0,te,H=k;function re(oe,fe){return H(oe[0],fe[0])}try{(te=se.reduce(function(oe,fe){for(var pe=0,we=oe.length;pe<we;++pe){var Ce=oe[pe];if(E(fe[0],Ce[1])<0&&0<E(fe[1],Ce[0])){Ce[0]=z(Ce[0],fe[0]),Ce[1]=B(Ce[1],fe[1]);break}}return pe===we&&oe.push(fe),oe},[])).sort(re)}catch{return Wt(this,er)}var Q=0,X=G?function(oe){return 0<k(oe,te[Q][1])}:function(oe){return 0<=k(oe,te[Q][1])},J=K?function(oe){return 0<P(oe,te[Q][0])}:function(oe){return 0<=P(oe,te[Q][0])},ne=X,se=new this.Collection(this,function(){return _i(te[0][0],te[te.length-1][1],!K,!G)});return se._ondirectionchange=function(oe){H=oe==="next"?(ne=X,k):(ne=J,P),te.sort(re)},se._addAlgorithm(function(oe,fe,pe){for(var we,Ce=oe.key;ne(Ce);)if(++Q===te.length)return fe(pe),!1;return!X(we=Ce)&&!J(we)||(_._cmp(Ce,te[Q][1])===0||_._cmp(Ce,te[Q][0])===0||fe(function(){H===k?oe.continue(te[Q][0]):oe.continue(te[Q][1])}),!1)}),se},Mt.prototype.startsWithAnyOf=function(){var p=he.apply(ae,arguments);return p.every(function(g){return typeof g=="string"})?p.length===0?Rs(this):this.inAnyRange(p.map(function(g){return[g,g+On]})):Wt(this,"startsWithAnyOf() only works with strings")},Mt);function Mt(){}function jn(p){return gt(function(g){return Ps(g),p(g.target.error),!1})}function Ps(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var $r="storagemutated",Yi="x-storagemutated-1",Br=Ur(null,$r),Iu=(at.prototype._lock=function(){return O(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this},at.prototype._unlock=function(){if(O(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{yr(p[1],p[0])}catch{}}return this},at.prototype._locked=function(){return this._reculock&&Oe.lockOwnerFor!==this},at.prototype.create=function(p){var g=this;if(!this.mode)return this;var _=this.db.idbdb,E=this.db._state.dbOpenError;if(O(!this.idbtrans),!p&&!_)switch(E&&E.name){case"DatabaseClosedError":throw new Le.DatabaseClosed(E);case"MissingAPIError":throw new Le.MissingAPI(E.message,E);default:throw new Le.OpenFailed(E)}if(!this.active)throw new Le.TransactionInactive;return O(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=gt(function(k){Ps(k),g._reject(p.error)}),p.onabort=gt(function(k){Ps(k),g.active&&g._reject(new Le.Abort(p.error)),g.active=!1,g.on("abort").fire(k)}),p.oncomplete=gt(function(){g.active=!1,g._resolve(),"mutatedParts"in p&&Br.storagemutated.fire(p.mutatedParts)}),this},at.prototype._promise=function(p,g,_){var E=this;if(p==="readwrite"&&this.mode!=="readwrite")return yt(new Le.ReadOnly("Transaction is readonly"));if(!this.active)return yt(new Le.TransactionInactive);if(this._locked())return new Ie(function(P,z){E._blockedFuncs.push([function(){E._promise(p,g,_).then(P,z)},Oe])});if(_)return Dr(function(){var P=new Ie(function(z,B){E._lock();var K=g(z,B,E);K&&K.then&&K.then(z,B)});return P.finally(function(){return E._unlock()}),P._lib=!0,P});var k=new Ie(function(P,z){var B=g(P,z,E);B&&B.then&&B.then(P,z)});return k._lib=!0,k},at.prototype._root=function(){return this.parent?this.parent._root():this},at.prototype.waitFor=function(p){var g,_=this._root(),E=Ie.resolve(p);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return E}):(_._waitingFor=E,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function P(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=P)}());var k=_._waitingFor;return new Ie(function(P,z){E.then(function(B){return _._waitingQueue.push(gt(P.bind(null,B)))},function(B){return _._waitingQueue.push(gt(z.bind(null,B)))}).finally(function(){_._waitingFor===k&&(_._waitingFor=null)})})},at.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Le.Abort))},at.prototype.table=function(p){var g=this._memoizedTables||(this._memoizedTables={});if(h(g,p))return g[p];var _=this.schema[p];if(!_)throw new Le.NotFound("Table "+p+" not part of transaction");return _=new this.db.Table(p,_,this),_.core=this.db.core.table(p),g[p]=_},at);function at(){}function Su(p,g,_,E,k,P,z,B){return{name:p,keyPath:g,unique:_,multi:E,auto:k,compound:P,src:(_&&!z?"&":"")+(E?"*":"")+(k?"++":"")+Mh(g),type:B}}function Mh(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Qa(p,g,_){return{name:p,primKey:g,indexes:_,mappedClass:null,idxByName:(E=function(k){return[k.name,k]},_.reduce(function(k,P,z){return z=E(P,z),z&&(k[z[0]]=z[1]),k},{}))};var E}var Os=function(p){try{return p.only([[]]),Os=function(){return[[]]},[[]]}catch{return Os=function(){return On},On}};function Ya(p){return p==null?function(){}:typeof p=="string"?(g=p).split(".").length===1?function(_){return _[g]}:function(_){return U(_,g)}:function(_){return U(_,p)};var g}function Wo(p){return[].slice.call(p)}var wi=0;function js(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function Jp(p,g,K){function E(ne){if(ne.type===3)return null;if(ne.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=ne.lower,X=ne.upper,J=ne.lowerOpen,ne=ne.upperOpen;return Q===void 0?X===void 0?null:g.upperBound(X,!!ne):X===void 0?g.lowerBound(Q,!!J):g.bound(Q,X,!!J,!!ne)}function k(re){var Q,X=re.name;return{name:X,schema:re,mutate:function(J){var ne=J.trans,se=J.type,oe=J.keys,fe=J.values,pe=J.range;return new Promise(function(we,Ce){we=gt(we);var ve=ne.objectStore(X),Ee=ve.keyPath==null,ke=se==="put"||se==="add";if(!ke&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var Te,Re=(oe||fe||{length:1}).length;if(oe&&fe&&oe.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(Re===0)return we({numFailures:0,failures:{},results:[],lastResult:void 0});function Ge(Dn){++nr,Ps(Dn)}var Qe=[],Xe=[],nr=0;if(se==="deleteRange"){if(pe.type===4)return we({numFailures:nr,failures:Xe,results:[],lastResult:void 0});pe.type===3?Qe.push(Te=ve.clear()):Qe.push(Te=ve.delete(E(pe)))}else{var Ee=ke?Ee?[fe,oe]:[fe,null]:[oe,null],Ke=Ee[0],xn=Ee[1];if(ke)for(var bn=0;bn<Re;++bn)Qe.push(Te=xn&&xn[bn]!==void 0?ve[se](Ke[bn],xn[bn]):ve[se](Ke[bn])),Te.onerror=Ge;else for(bn=0;bn<Re;++bn)Qe.push(Te=ve[se](Ke[bn])),Te.onerror=Ge}function Uh(Dn){Dn=Dn.target.result,Qe.forEach(function(ea,rm){return ea.error!=null&&(Xe[rm]=ea.error)}),we({numFailures:nr,failures:Xe,results:se==="delete"?oe:Qe.map(function(ea){return ea.result}),lastResult:Dn})}Te.onerror=function(Dn){Ge(Dn),Uh(Dn)},Te.onsuccess=Uh})},getMany:function(J){var ne=J.trans,se=J.keys;return new Promise(function(oe,fe){oe=gt(oe);for(var pe,we=ne.objectStore(X),Ce=se.length,ve=new Array(Ce),Ee=0,ke=0,Te=function(Qe){Qe=Qe.target,ve[Qe._pos]=Qe.result,++ke===Ee&&oe(ve)},Re=jn(fe),Ge=0;Ge<Ce;++Ge)se[Ge]!=null&&((pe=we.get(se[Ge]))._pos=Ge,pe.onsuccess=Te,pe.onerror=Re,++Ee);Ee===0&&oe(ve)})},get:function(J){var ne=J.trans,se=J.key;return new Promise(function(oe,fe){oe=gt(oe);var pe=ne.objectStore(X).get(se);pe.onsuccess=function(we){return oe(we.target.result)},pe.onerror=jn(fe)})},query:(Q=G,function(J){return new Promise(function(ne,se){ne=gt(ne);var oe,fe,pe,Ee=J.trans,we=J.values,Ce=J.limit,Te=J.query,ve=Ce===1/0?void 0:Ce,ke=Te.index,Te=Te.range,Ee=Ee.objectStore(X),ke=ke.isPrimaryKey?Ee:Ee.index(ke.name),Te=E(Te);if(Ce===0)return ne({result:[]});Q?((ve=we?ke.getAll(Te,ve):ke.getAllKeys(Te,ve)).onsuccess=function(Re){return ne({result:Re.target.result})},ve.onerror=jn(se)):(oe=0,fe=!we&&"openKeyCursor"in ke?ke.openKeyCursor(Te):ke.openCursor(Te),pe=[],fe.onsuccess=function(Re){var Ge=fe.result;return Ge?(pe.push(we?Ge.value:Ge.primaryKey),++oe===Ce?ne({result:pe}):void Ge.continue()):ne({result:pe})},fe.onerror=jn(se))})}),openCursor:function(J){var ne=J.trans,se=J.values,oe=J.query,fe=J.reverse,pe=J.unique;return new Promise(function(we,Ce){we=gt(we);var ke=oe.index,ve=oe.range,Ee=ne.objectStore(X),Ee=ke.isPrimaryKey?Ee:Ee.index(ke.name),ke=fe?pe?"prevunique":"prev":pe?"nextunique":"next",Te=!se&&"openKeyCursor"in Ee?Ee.openKeyCursor(E(ve),ke):Ee.openCursor(E(ve),ke);Te.onerror=jn(Ce),Te.onsuccess=gt(function(Re){var Ge,Qe,Xe,nr,Ke=Te.result;Ke?(Ke.___id=++wi,Ke.done=!1,Ge=Ke.continue.bind(Ke),Qe=(Qe=Ke.continuePrimaryKey)&&Qe.bind(Ke),Xe=Ke.advance.bind(Ke),nr=function(){throw new Error("Cursor not stopped")},Ke.trans=ne,Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=function(){throw new Error("Cursor not started")},Ke.fail=gt(Ce),Ke.next=function(){var xn=this,bn=1;return this.start(function(){return bn--?xn.continue():xn.stop()}).then(function(){return xn})},Ke.start=function(xn){function bn(){if(Te.result)try{xn()}catch(Dn){Ke.fail(Dn)}else Ke.done=!0,Ke.start=function(){throw new Error("Cursor behind last entry")},Ke.stop()}var Uh=new Promise(function(Dn,ea){Dn=gt(Dn),Te.onerror=jn(ea),Ke.fail=ea,Ke.stop=function(rm){Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=nr,Dn(rm)}});return Te.onsuccess=gt(function(Dn){Te.onsuccess=bn,bn()}),Ke.continue=Ge,Ke.continuePrimaryKey=Qe,Ke.advance=Xe,bn(),Uh},we(Ke)):we(null)},Ce)})},count:function(J){var ne=J.query,se=J.trans,oe=ne.index,fe=ne.range;return new Promise(function(pe,we){var Ce=se.objectStore(X),ve=oe.isPrimaryKey?Ce:Ce.index(oe.name),Ce=E(fe),ve=Ce?ve.count(Ce):ve.count();ve.onsuccess=gt(function(Ee){return pe(Ee.target.result)}),ve.onerror=jn(we)})}}}var P,z,B,te=(z=K,B=Wo((P=p).objectStoreNames),{schema:{name:P.name,tables:B.map(function(re){return z.objectStore(re)}).map(function(re){var Q=re.keyPath,ne=re.autoIncrement,X=l(Q),J={},ne={name:re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:X,keyPath:Q,autoIncrement:ne,unique:!0,extractKey:Ya(Q)},indexes:Wo(re.indexNames).map(function(se){return re.index(se)}).map(function(pe){var oe=pe.name,fe=pe.unique,we=pe.multiEntry,pe=pe.keyPath,we={name:oe,compound:l(pe),keyPath:pe,unique:fe,multiEntry:we,extractKey:Ya(pe)};return J[js(pe)]=we}),getIndexByKeyPath:function(se){return J[js(se)]}};return J[":id"]=ne.primaryKey,Q!=null&&(J[js(Q)]=ne.primaryKey),ne})},hasGetAll:0<B.length&&"getAll"in z.objectStore(B[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=te.schema,G=te.hasGetAll,te=K.tables.map(k),H={};return te.forEach(function(re){return H[re.name]=re}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(re){if(!H[re])throw new Error("Table '".concat(re,"' not found"));return H[re]},MIN_KEY:-1/0,MAX_KEY:Os(g),schema:K}}function Go(p,g,_,E){var k=_.IDBKeyRange;return _.indexedDB,{dbcore:(E=Jp(g,k,E),p.dbcore.reduce(function(P,z){return z=z.create,i(i({},P),z(P))},E))}}function Qo(p,E){var _=E.db,E=Go(p._middlewares,_,p._deps,E);p.core=E.dbcore,p.tables.forEach(function(k){var P=k.name;p.core.schema.tables.some(function(z){return z.name===P})&&(k.core=p.core.table(P),p[P]instanceof p.Table&&(p[P].core=k.core))})}function Ds(p,g,_,E){_.forEach(function(k){var P=E[k];g.forEach(function(z){var B=function K(G,te){return C(G,te)||(G=c(G))&&K(G,te)}(z,k);(!B||"value"in B&&B.value===void 0)&&(z===p.Transaction.prototype||z instanceof p.Transaction?w(z,k,{get:function(){return this.table(k)},set:function(K){v(this,k,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):z[k]=new p.Table(k,P))})})}function Ms(p,g){g.forEach(function(_){for(var E in _)_[E]instanceof p.Table&&delete _[E]})}function Lh(p,g){return p._cfg.version-g._cfg.version}function Xa(p,g,_,E){var k=p._dbSchema;_.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=Qa("$meta",ku("")[0],[]),p._storeNames.push("$meta"));var P=p._createTransaction("readwrite",p._storeNames,k);P.create(_),P._completion.catch(E);var z=P._reject.bind(P),B=Oe.transless||Oe;Dr(function(){return Oe.trans=P,Oe.transless=B,g!==0?(Qo(p,_),G=g,((K=P).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(te){return te??G}):Ie.resolve(G)).then(function(te){return re=te,Q=P,X=_,J=[],te=(H=p)._versions,ne=H._dbSchema=Ls(0,H.idbdb,X),(te=te.filter(function(se){return se._cfg.version>=re})).length!==0?(te.forEach(function(se){J.push(function(){var oe=ne,fe=se._cfg.dbschema;Vs(H,oe,X),Vs(H,fe,X),ne=H._dbSchema=fe;var pe=Ja(oe,fe);pe.add.forEach(function(ke){Xi(X,ke[0],ke[1].primKey,ke[1].indexes)}),pe.change.forEach(function(ke){if(ke.recreate)throw new Le.Upgrade("Not yet support for changing primary key");var Te=X.objectStore(ke.name);ke.add.forEach(function(Re){return Yo(Te,Re)}),ke.change.forEach(function(Re){Te.deleteIndex(Re.name),Yo(Te,Re)}),ke.del.forEach(function(Re){return Te.deleteIndex(Re)})});var we=se._cfg.contentUpgrade;if(we&&se._cfg.version>re){Qo(H,X),Q._memoizedTables={};var Ce=R(fe);pe.del.forEach(function(ke){Ce[ke]=oe[ke]}),Ms(H,[H.Transaction.prototype]),Ds(H,[H.Transaction.prototype],a(Ce),Ce),Q.schema=Ce;var ve,Ee=be(we);return Ee&&mi(),pe=Ie.follow(function(){var ke;(ve=we(Q))&&Ee&&(ke=gr.bind(null,null),ve.then(ke,ke))}),ve&&typeof ve.then=="function"?Ie.resolve(ve):pe.then(function(){return ve})}}),J.push(function(oe){var fe,pe,we=se._cfg.dbschema;fe=we,pe=oe,[].slice.call(pe.db.objectStoreNames).forEach(function(Ce){return fe[Ce]==null&&pe.db.deleteObjectStore(Ce)}),Ms(H,[H.Transaction.prototype]),Ds(H,[H.Transaction.prototype],H._storeNames,H._dbSchema),Q.schema=H._dbSchema}),J.push(function(oe){H.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(H.idbdb.version/10)===se._cfg.version?(H.idbdb.deleteObjectStore("$meta"),delete H._dbSchema.$meta,H._storeNames=H._storeNames.filter(function(fe){return fe!=="$meta"})):oe.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return J.length?Ie.resolve(J.shift()(Q.idbtrans)).then(se):Ie.resolve()}().then(function(){Cu(ne,X)})):Ie.resolve();var H,re,Q,X,J,ne}).catch(z)):(a(k).forEach(function(te){Xi(_,te,k[te].primKey,k[te].indexes)}),Qo(p,_),void Ie.follow(function(){return p.on.populate.fire(P)}).catch(z));var K,G})}function Zp(p,g){Cu(p._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=Ls(0,p.idbdb,g);Vs(p,p._dbSchema,g);for(var E=0,k=Ja(_,p._dbSchema).change;E<k.length;E++){var P=function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var B=g.objectStore(z.name);z.add.forEach(function(K){vn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(K.src)),Yo(B,K)})}(k[E]);if(typeof P=="object")return P.value}}function Ja(p,g){var _,E={del:[],add:[],change:[]};for(_ in p)g[_]||E.del.push(_);for(_ in g){var k=p[_],P=g[_];if(k){var z={name:_,def:P,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(P.primKey.keyPath||"")||k.primKey.auto!==P.primKey.auto)z.recreate=!0,E.change.push(z);else{var B=k.idxByName,K=P.idxByName,G=void 0;for(G in B)K[G]||z.del.push(G);for(G in K){var te=B[G],H=K[G];te?te.src!==H.src&&z.change.push(H):z.add.push(H)}(0<z.del.length||0<z.add.length||0<z.change.length)&&E.change.push(z)}}else E.add.push([_,P])}return E}function Xi(p,g,_,E){var k=p.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return E.forEach(function(P){return Yo(k,P)}),k}function Cu(p,g){a(p).forEach(function(_){g.db.objectStoreNames.contains(_)||(vn&&console.debug("Dexie: Creating missing table",_),Xi(g,_,p[_].primKey,p[_].indexes))})}function Yo(p,g){p.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Ls(p,g,_){var E={};return T(g.objectStoreNames,0).forEach(function(k){for(var P=_.objectStore(k),z=Su(Mh(G=P.keyPath),G||"",!0,!1,!!P.autoIncrement,G&&typeof G!="string",!0),B=[],K=0;K<P.indexNames.length;++K){var te=P.index(P.indexNames[K]),G=te.keyPath,te=Su(te.name,G,!!te.unique,!!te.multiEntry,!1,G&&typeof G!="string",!1);B.push(te)}E[k]=Qa(k,z,B)}),E}function Vs(p,g,_){for(var E=_.db.objectStoreNames,k=0;k<E.length;++k){var P=E[k],z=_.objectStore(P);p._hasGetAll="getAll"in z;for(var B=0;B<z.indexNames.length;++B){var K=z.indexNames[B],G=z.index(K).keyPath,te=typeof G=="string"?G:"["+T(G).join("+")+"]";!g[P]||(G=g[P].idxByName[te])&&(G.name=K,delete g[P].idxByName[te],g[P].idxByName[K]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function ku(p){return p.split(",").map(function(g,_){var P=g.split(":"),E=(k=P[1])===null||k===void 0?void 0:k.trim(),k=(g=P[0].trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Su(k,P||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),l(P),_===0,E)})}var Za=(Ji.prototype._createTableSchema=Qa,Ji.prototype._parseIndexSyntax=ku,Ji.prototype._parseStoresSpec=function(p,g){var _=this;a(p).forEach(function(E){if(p[E]!==null){var k=_._parseIndexSyntax(p[E]),P=k.shift();if(!P)throw new Le.Schema("Invalid schema for table "+E+": "+p[E]);if(P.unique=!0,P.multi)throw new Le.Schema("Primary key cannot be multiEntry*");k.forEach(function(z){if(z.auto)throw new Le.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new Le.Schema("Index must have a name and cannot be an empty string")}),k=_._createTableSchema(E,P,k),g[E]=k}})},Ji.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,_):_;var _=g._versions,E={},k={};return _.forEach(function(P){u(E,P._cfg.storesSource),k=P._cfg.dbschema={},P._parseStoresSpec(E,k)}),g._dbSchema=k,Ms(g,[g._allTables,g,g.Transaction.prototype]),Ds(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],a(k),k),g._storeNames=a(k),this},Ji.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Kt(this._cfg.contentUpgrade||ot,p),this},Ji);function Ji(){}function el(p,g){var _=p._dbNamesDB;return _||(_=p._dbNamesDB=new es($o,{addons:[],indexedDB:p,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function qr(p){return p&&typeof p.databases=="function"}function tl(p){return Dr(function(){return Oe.letThrough=!0,p()})}function nl(p){return!("from"in p)}var Jt=function(p,g){if(!this){var _=new Jt;return p&&"d"in p&&u(_,p),_}u(this,arguments.length?{d:1,from:p,to:1<arguments.length?g:p}:{d:0})};function Fs(p,g,_){var E=Je(g,_);if(!isNaN(E)){if(0<E)throw RangeError();if(nl(p))return u(p,{from:g,to:_,d:1});var k=p.l,E=p.r;if(Je(_,p.from)<0)return k?Fs(k,g,_):p.l={from:g,to:_,d:1,l:null,r:null},Au(p);if(0<Je(g,p.to))return E?Fs(E,g,_):p.r={from:g,to:_,d:1,l:null,r:null},Au(p);Je(g,p.from)<0&&(p.from=g,p.l=null,p.d=E?E.d+1:1),0<Je(_,p.to)&&(p.to=_,p.r=null,p.d=p.l?p.l.d+1:1),_=!p.r,k&&!p.l&&xi(p,k),E&&_&&xi(p,E)}}function xi(p,g){nl(g)||function _(E,K){var P=K.from,z=K.to,B=K.l,K=K.r;Fs(E,P,z),B&&_(E,B),K&&_(E,K)}(p,g)}function wn(p,g){var _=Xo(g),E=_.next();if(E.done)return!1;for(var k=E.value,P=Xo(p),z=P.next(k.from),B=z.value;!E.done&&!z.done;){if(Je(B.from,k.to)<=0&&0<=Je(B.to,k.from))return!0;Je(k.from,B.from)<0?k=(E=_.next(B.from)).value:B=(z=P.next(k.from)).value}return!1}function Xo(p){var g=nl(p)?null:{s:0,n:p};return{next:function(_){for(var E=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,E)for(;g.n.l&&Je(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!E||Je(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Au(p){var g,_,E=(((g=p.r)===null||g===void 0?void 0:g.d)||0)-(((_=p.l)===null||_===void 0?void 0:_.d)||0),k=1<E?"r":E<-1?"l":"";k&&(g=k=="r"?"l":"r",_=i({},p),E=p[k],p.from=E.from,p.to=E.to,p[k]=E[k],_[k]=E[g],(p[g]=_).d=Zi(_)),p.d=Zi(p)}function Zi(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function f(p,g){return a(g).forEach(function(_){p[_]?xi(p[_],g[_]):p[_]=function E(k){var P,z,B={};for(P in k)h(k,P)&&(z=k[P],B[P]=!z||typeof z!="object"||F.has(z.constructor)?z:E(z));return B}(g[_])}),p}function x(p,g){return p.all||g.all||Object.keys(p).some(function(_){return g[_]&&wn(g[_],p[_])})}m(Jt.prototype,((wr={add:function(p){return xi(this,p),this},addKey:function(p){return Fs(this,p,p),this},addKeys:function(p){var g=this;return p.forEach(function(_){return Fs(g,_,_)}),this},hasKey:function(p){var g=Xo(this).next(p).value;return g&&Je(g.from,p)<=0&&0<=Je(g.to,p)}})[Z]=function(){return Xo(this)},wr));var S={},V={},ie=!1;function le(p){f(V,p),ie||(ie=!0,setTimeout(function(){ie=!1,xe(V,!(V={}))},0))}function xe(p,g){g===void 0&&(g=!1);var _=new Set;if(p.all)for(var E=0,k=Object.values(S);E<k.length;E++)He(z=k[E],p,_,g);else for(var P in p){var z,B=/^idb\:\/\/(.*)\/(.*)\//.exec(P);B&&(P=B[1],B=B[2],(z=S["idb://".concat(P,"/").concat(B)])&&He(z,p,_,g))}_.forEach(function(K){return K()})}function He(p,g,_,E){for(var k=[],P=0,z=Object.entries(p.queries.query);P<z.length;P++){for(var B=z[P],K=B[0],G=[],te=0,H=B[1];te<H.length;te++){var re=H[te];x(g,re.obsSet)?re.subscribers.forEach(function(ne){return _.add(ne)}):E&&G.push(re)}E&&k.push([K,G])}if(E)for(var Q=0,X=k;Q<X.length;Q++){var J=X[Q],K=J[0],G=J[1];p.queries.query[K]=G}}function Ut(p){var g=p._state,_=p._deps.indexedDB;if(g.isBeingOpened||p.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?yt(g.dbOpenError):p});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var E=g.openCanceller,k=Math.round(10*p.verno),P=!1;function z(){if(g.openCanceller!==E)throw new Le.DatabaseClosed("db.open() was cancelled")}function B(){return new Ie(function(re,Q){if(z(),!_)throw new Le.MissingAPI;var X=p.name,J=g.autoSchema||!k?_.open(X):_.open(X,k);if(!J)throw new Le.MissingAPI;J.onerror=jn(Q),J.onblocked=gt(p._fireOnBlocked),J.onupgradeneeded=gt(function(ne){var se;te=J.transaction,g.autoSchema&&!p._options.allowEmptyDB?(J.onerror=Ps,te.abort(),J.result.close(),(se=_.deleteDatabase(X)).onsuccess=se.onerror=gt(function(){Q(new Le.NoSuchDatabase("Database ".concat(X," doesnt exist")))})):(te.onerror=jn(Q),ne=ne.oldVersion>Math.pow(2,62)?0:ne.oldVersion,H=ne<1,p.idbdb=J.result,P&&Zp(p,te),Xa(p,ne/10,te,Q))},Q),J.onsuccess=gt(function(){te=null;var ne,se,oe,fe,pe,we=p.idbdb=J.result,Ce=T(we.objectStoreNames);if(0<Ce.length)try{var ve=we.transaction((fe=Ce).length===1?fe[0]:fe,"readonly");if(g.autoSchema)se=we,oe=ve,(ne=p).verno=se.version/10,oe=ne._dbSchema=Ls(0,se,oe),ne._storeNames=T(se.objectStoreNames,0),Ds(ne,[ne._allTables],a(oe),oe);else if(Vs(p,p._dbSchema,ve),((pe=Ja(Ls(0,(pe=p).idbdb,ve),pe._dbSchema)).add.length||pe.change.some(function(Ee){return Ee.add.length||Ee.change.length}))&&!P)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),we.close(),k=we.version+1,P=!0,re(B());Qo(p,ve)}catch{}Gi.push(p),we.onversionchange=gt(function(Ee){g.vcFired=!0,p.on("versionchange").fire(Ee)}),we.onclose=gt(function(){p.close({disableAutoOpen:!1})}),H&&(pe=p._deps,ve=X,we=pe.indexedDB,pe=pe.IDBKeyRange,qr(we)||ve===$o||el(we,pe).put({name:ve}).catch(ot)),re()},Q)}).catch(function(re){switch(re==null?void 0:re.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),B();break;case"VersionError":if(0<k)return k=0,B()}return Ie.reject(re)})}var K,G=g.dbReadyResolve,te=null,H=!1;return Ie.race([E,(typeof navigator>"u"?Ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(re){function Q(){return indexedDB.databases().finally(re)}K=setInterval(Q,100),Q()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(B)]).then(function(){return z(),g.onReadyBeingFired=[],Ie.resolve(tl(function(){return p.on.ready.fire(p.vip)})).then(function re(){if(0<g.onReadyBeingFired.length){var Q=g.onReadyBeingFired.reduce(Kt,ot);return g.onReadyBeingFired=[],Ie.resolve(tl(function(){return Q(p.vip)})).then(re)}})}).finally(function(){g.openCanceller===E&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(re){g.dbOpenError=re;try{te&&te.abort()}catch{}return E===g.openCanceller&&p._close(),yt(re)}).finally(function(){g.openComplete=!0,G()}).then(function(){var re;return H&&(re={},p.tables.forEach(function(Q){Q.schema.indexes.forEach(function(X){X.name&&(re["idb://".concat(p.name,"/").concat(Q.name,"/").concat(X.name)]=new Jt(-1/0,[[[]]]))}),re["idb://".concat(p.name,"/").concat(Q.name,"/")]=re["idb://".concat(p.name,"/").concat(Q.name,"/:dels")]=new Jt(-1/0,[[[]]])}),Br($r).fire(re),xe(re,!0)),p})}function ct(p){function g(P){return p.next(P)}var _=k(g),E=k(function(P){return p.throw(P)});function k(P){return function(K){var B=P(K),K=B.value;return B.done?K:K&&typeof K.then=="function"?K.then(_,E):l(K)?Promise.all(K).then(_,E):_(K)}}return k(g)()}function Nt(p,g,_){for(var E=l(p)?p.slice():[p],k=0;k<_;++k)E.push(g);return E}var vr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return i(i({},p),{table:function(g){var _=p.table(g),E=_.schema,k={},P=[];function z(H,re,Q){var X=js(H),J=k[X]=k[X]||[],ne=H==null?0:typeof H=="string"?1:H.length,se=0<re,se=i(i({},Q),{name:se?"".concat(X,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:se,keyTail:re,keyLength:ne,extractKey:Ya(H),unique:!se&&Q.unique});return J.push(se),se.isPrimaryKey||P.push(se),1<ne&&z(ne===2?H[0]:H.slice(0,ne-1),re+1,Q),J.sort(function(oe,fe){return oe.keyTail-fe.keyTail}),se}g=z(E.primaryKey.keyPath,0,E.primaryKey),k[":id"]=[g];for(var B=0,K=E.indexes;B<K.length;B++){var G=K[B];z(G.keyPath,0,G)}function te(H){var re,Q=H.query.index;return Q.isVirtual?i(i({},H),{query:{index:Q.lowLevelIndex,range:(re=H.query.range,Q=Q.keyTail,{type:re.type===1?2:re.type,lower:Nt(re.lower,re.lowerOpen?p.MAX_KEY:p.MIN_KEY,Q),lowerOpen:!0,upper:Nt(re.upper,re.upperOpen?p.MIN_KEY:p.MAX_KEY,Q),upperOpen:!0})}}):H}return i(i({},_),{schema:i(i({},E),{primaryKey:g,indexes:P,getIndexByKeyPath:function(H){return(H=k[js(H)])&&H[0]}}),count:function(H){return _.count(te(H))},query:function(H){return _.query(te(H))},openCursor:function(H){var re=H.query.index,Q=re.keyTail,X=re.isVirtual,J=re.keyLength;return X?_.openCursor(te(H)).then(function(se){return se&&ne(se)}):_.openCursor(H);function ne(se){return Object.create(se,{continue:{value:function(oe){oe!=null?se.continue(Nt(oe,H.reverse?p.MAX_KEY:p.MIN_KEY,Q)):H.unique?se.continue(se.key.slice(0,J).concat(H.reverse?p.MIN_KEY:p.MAX_KEY,Q)):se.continue()}},continuePrimaryKey:{value:function(oe,fe){se.continuePrimaryKey(Nt(oe,p.MAX_KEY,Q),fe)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var oe=se.key;return J===1?oe[0]:oe.slice(0,J)}},value:{get:function(){return se.value}}})}}})}})}};function Hr(p,g,_,E){return _=_||{},E=E||"",a(p).forEach(function(k){var P,z,B;h(g,k)?(P=p[k],z=g[k],typeof P=="object"&&typeof z=="object"&&P&&z?(B=W(P))!==W(z)?_[E+k]=g[k]:B==="Object"?Hr(P,z,_,E+k+"."):P!==z&&(_[E+k]=g[k]):P!==z&&(_[E+k]=g[k])):_[E+k]=void 0}),a(g).forEach(function(k){h(p,k)||(_[E+k]=g[k])}),_}function _r(p,g){return g.type==="delete"?g.keys:g.keys||g.values.map(p.extractKey)}var bi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return i(i({},p),{table:function(g){var _=p.table(g),E=_.schema.primaryKey;return i(i({},_),{mutate:function(k){var P=Oe.trans,z=P.table(g).hook,B=z.deleting,K=z.creating,G=z.updating;switch(k.type){case"add":if(K.fire===ot)break;return P._promise("readwrite",function(){return te(k)},!0);case"put":if(K.fire===ot&&G.fire===ot)break;return P._promise("readwrite",function(){return te(k)},!0);case"delete":if(B.fire===ot)break;return P._promise("readwrite",function(){return te(k)},!0);case"deleteRange":if(B.fire===ot)break;return P._promise("readwrite",function(){return function H(re,Q,X){return _.query({trans:re,values:!1,query:{index:E,range:Q},limit:X}).then(function(J){var ne=J.result;return te({type:"delete",keys:ne,trans:re}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):ne.length<X?{failures:[],numFailures:0,lastResult:void 0}:H(re,i(i({},Q),{lower:ne[ne.length-1],lowerOpen:!0}),X)})})}(k.trans,k.range,1e4)},!0)}return _.mutate(k);function te(H){var re,Q,X,J=Oe.trans,ne=H.keys||_r(E,H);if(!ne)throw new Error("Keys missing");return(H=H.type==="add"||H.type==="put"?i(i({},H),{keys:ne}):i({},H)).type!=="delete"&&(H.values=s([],H.values)),H.keys&&(H.keys=s([],H.keys)),re=_,X=ne,((Q=H).type==="add"?Promise.resolve([]):re.getMany({trans:Q.trans,keys:X,cache:"immutable"})).then(function(se){var oe=ne.map(function(fe,pe){var we,Ce,ve,Ee=se[pe],ke={onerror:null,onsuccess:null};return H.type==="delete"?B.fire.call(ke,fe,Ee,J):H.type==="add"||Ee===void 0?(we=K.fire.call(ke,fe,H.values[pe],J),fe==null&&we!=null&&(H.keys[pe]=fe=we,E.outbound||A(H.values[pe],E.keyPath,fe))):(we=Hr(Ee,H.values[pe]),(Ce=G.fire.call(ke,we,fe,Ee,J))&&(ve=H.values[pe],Object.keys(Ce).forEach(function(Te){h(ve,Te)?ve[Te]=Ce[Te]:A(ve,Te,Ce[Te])}))),ke});return _.mutate(H).then(function(fe){for(var pe=fe.failures,we=fe.results,Ce=fe.numFailures,fe=fe.lastResult,ve=0;ve<ne.length;++ve){var Ee=(we||ne)[ve],ke=oe[ve];Ee==null?ke.onerror&&ke.onerror(pe[ve]):ke.onsuccess&&ke.onsuccess(H.type==="put"&&se[ve]?H.values[ve]:Ee)}return{failures:pe,results:we,numFailures:Ce,lastResult:fe}}).catch(function(fe){return oe.forEach(function(pe){return pe.onerror&&pe.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function Jo(p,g,_){try{if(!g||g.keys.length<p.length)return null;for(var E=[],k=0,P=0;k<g.keys.length&&P<p.length;++k)Je(g.keys[k],p[P])===0&&(E.push(_?j(g.values[k]):g.values[k]),++P);return E.length===p.length?E:null}catch{return null}}var Nu={stack:"dbcore",level:-1,create:function(p){return{table:function(g){var _=p.table(g);return i(i({},_),{getMany:function(E){if(!E.cache)return _.getMany(E);var k=Jo(E.keys,E.trans._cache,E.cache==="clone");return k?Ie.resolve(k):_.getMany(E).then(function(P){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?j(P):P},P})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),_.mutate(E)}})}}}};function c_(p,g){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function h_(p,g){switch(p){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Uk={stack:"dbcore",level:0,name:"Observability",create:function(p){var g=p.schema.name,_=new Jt(p.MIN_KEY,p.MAX_KEY);return i(i({},p),{transaction:function(E,k,P){if(Oe.subscr&&k!=="readonly")throw new Le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Oe.querier));return p.transaction(E,k,P)},table:function(E){var k=p.table(E),P=k.schema,z=P.primaryKey,H=P.indexes,B=z.extractKey,K=z.outbound,G=z.autoIncrement&&H.filter(function(Q){return Q.compound&&Q.keyPath.includes(z.keyPath)}),te=i(i({},k),{mutate:function(Q){function X(Te){return Te="idb://".concat(g,"/").concat(E,"/").concat(Te),fe[Te]||(fe[Te]=new Jt)}var J,ne,se,oe=Q.trans,fe=Q.mutatedParts||(Q.mutatedParts={}),pe=X(""),we=X(":dels"),Ce=Q.type,ke=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[_r(z,Q).filter(function(Te){return Te}),Q.values]:[],ve=ke[0],Ee=ke[1],ke=Q.trans._cache;return l(ve)?(pe.addKeys(ve),(ke=Ce==="delete"||ve.length===Ee.length?Jo(ve,ke):null)||we.addKeys(ve),(ke||Ee)&&(J=X,ne=ke,se=Ee,P.indexes.forEach(function(Te){var Re=J(Te.name||"");function Ge(Xe){return Xe!=null?Te.extractKey(Xe):null}function Qe(Xe){return Te.multiEntry&&l(Xe)?Xe.forEach(function(nr){return Re.addKey(nr)}):Re.addKey(Xe)}(ne||se).forEach(function(Xe,xn){var Ke=ne&&Ge(ne[xn]),xn=se&&Ge(se[xn]);Je(Ke,xn)!==0&&(Ke!=null&&Qe(Ke),xn!=null&&Qe(xn))})}))):ve?(Ee={from:(Ee=ve.lower)!==null&&Ee!==void 0?Ee:p.MIN_KEY,to:(Ee=ve.upper)!==null&&Ee!==void 0?Ee:p.MAX_KEY},we.add(Ee),pe.add(Ee)):(pe.add(_),we.add(_),P.indexes.forEach(function(Te){return X(Te.name).add(_)})),k.mutate(Q).then(function(Te){return!ve||Q.type!=="add"&&Q.type!=="put"||(pe.addKeys(Te.results),G&&G.forEach(function(Re){for(var Ge=Q.values.map(function(Ke){return Re.extractKey(Ke)}),Qe=Re.keyPath.findIndex(function(Ke){return Ke===z.keyPath}),Xe=0,nr=Te.results.length;Xe<nr;++Xe)Ge[Xe][Qe]=Te.results[Xe];X(Re.name).addKeys(Ge)})),oe.mutatedParts=f(oe.mutatedParts||{},fe),Te})}}),H=function(X){var J=X.query,X=J.index,J=J.range;return[X,new Jt((X=J.lower)!==null&&X!==void 0?X:p.MIN_KEY,(J=J.upper)!==null&&J!==void 0?J:p.MAX_KEY)]},re={get:function(Q){return[z,new Jt(Q.key)]},getMany:function(Q){return[z,new Jt().addKeys(Q.keys)]},count:H,query:H,openCursor:H};return a(re).forEach(function(Q){te[Q]=function(X){var J=Oe.subscr,ne=!!J,se=c_(Oe,k)&&h_(Q,X)?X.obsSet={}:J;if(ne){var oe=function(Ee){return Ee="idb://".concat(g,"/").concat(E,"/").concat(Ee),se[Ee]||(se[Ee]=new Jt)},fe=oe(""),pe=oe(":dels"),J=re[Q](X),ne=J[0],J=J[1];if((Q==="query"&&ne.isPrimaryKey&&!X.values?pe:oe(ne.name||"")).add(J),!ne.isPrimaryKey){if(Q!=="count"){var we=Q==="query"&&K&&X.values&&k.query(i(i({},X),{values:!1}));return k[Q].apply(this,arguments).then(function(Ee){if(Q==="query"){if(K&&X.values)return we.then(function(Ge){return Ge=Ge.result,fe.addKeys(Ge),Ee});var ke=X.values?Ee.result.map(B):Ee.result;(X.values?fe:pe).addKeys(ke)}else if(Q==="openCursor"){var Te=Ee,Re=X.values;return Te&&Object.create(Te,{key:{get:function(){return pe.addKey(Te.primaryKey),Te.key}},primaryKey:{get:function(){var Ge=Te.primaryKey;return pe.addKey(Ge),Ge}},value:{get:function(){return Re&&fe.addKey(Te.primaryKey),Te.value}}})}return Ee})}pe.add(_)}}return k[Q].apply(this,arguments)}}),te}})}};function f_(p,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var E=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===E?null:(g=i({},g),l(g.keys)&&(g.keys=g.keys.filter(function(k,P){return!(P in _.failures)})),"values"in g&&l(g.values)&&(g.values=g.values.filter(function(k,P){return!(P in _.failures)})),g)}function em(p,g){return _=p,((E=g).lower===void 0||(E.lowerOpen?0<Je(_,E.lower):0<=Je(_,E.lower)))&&(p=p,(g=g).upper===void 0||(g.upperOpen?Je(p,g.upper)<0:Je(p,g.upper)<=0));var _,E}function d_(p,g,re,E,k,P){if(!re||re.length===0)return p;var z=g.query.index,B=z.multiEntry,K=g.query.range,G=E.schema.primaryKey.extractKey,te=z.extractKey,H=(z.lowLevelIndex||z).extractKey,re=re.reduce(function(Q,X){var J=Q,ne=[];if(X.type==="add"||X.type==="put")for(var se=new Jt,oe=X.values.length-1;0<=oe;--oe){var fe,pe=X.values[oe],we=G(pe);se.hasKey(we)||(fe=te(pe),(B&&l(fe)?fe.some(function(Te){return em(Te,K)}):em(fe,K))&&(se.addKey(we),ne.push(pe)))}switch(X.type){case"add":var Ce=new Jt().addKeys(g.values?Q.map(function(Re){return G(Re)}):Q),J=Q.concat(g.values?ne.filter(function(Re){return Re=G(Re),!Ce.hasKey(Re)&&(Ce.addKey(Re),!0)}):ne.map(function(Re){return G(Re)}).filter(function(Re){return!Ce.hasKey(Re)&&(Ce.addKey(Re),!0)}));break;case"put":var ve=new Jt().addKeys(X.values.map(function(Re){return G(Re)}));J=Q.filter(function(Re){return!ve.hasKey(g.values?G(Re):Re)}).concat(g.values?ne:ne.map(function(Re){return G(Re)}));break;case"delete":var Ee=new Jt().addKeys(X.keys);J=Q.filter(function(Re){return!Ee.hasKey(g.values?G(Re):Re)});break;case"deleteRange":var ke=X.range;J=Q.filter(function(Re){return!em(G(Re),ke)})}return J},p);return re===p?p:(re.sort(function(Q,X){return Je(H(Q),H(X))||Je(G(Q),G(X))}),g.limit&&g.limit<1/0&&(re.length>g.limit?re.length=g.limit:p.length===g.limit&&re.length<g.limit&&(k.dirty=!0)),P?Object.freeze(re):re)}function p_(p,g){return Je(p.lower,g.lower)===0&&Je(p.upper,g.upper)===0&&!!p.lowerOpen==!!g.lowerOpen&&!!p.upperOpen==!!g.upperOpen}function zk(p,g){return function(_,E,k,P){if(_===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=Je(_,E))===0){if(k&&P)return 0;if(k)return 1;if(P)return-1}return E}(p.lower,g.lower,p.lowerOpen,g.lowerOpen)<=0&&0<=function(_,E,k,P){if(_===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=Je(_,E))===0){if(k&&P)return 0;if(k)return-1;if(P)return 1}return E}(p.upper,g.upper,p.upperOpen,g.upperOpen)}function $k(p,g,_,E){p.subscribers.add(_),E.addEventListener("abort",function(){var k,P;p.subscribers.delete(_),p.subscribers.size===0&&(k=p,P=g,setTimeout(function(){k.subscribers.size===0&&ee(P,k)},3e3))})}var Bk={stack:"dbcore",level:0,name:"Cache",create:function(p){var g=p.schema.name;return i(i({},p),{transaction:function(_,E,k){var P,z,B=p.transaction(_,E,k);return E==="readwrite"&&(z=(P=new AbortController).signal,k=function(K){return function(){if(P.abort(),E==="readwrite"){for(var G=new Set,te=0,H=_;te<H.length;te++){var re=H[te],Q=S["idb://".concat(g,"/").concat(re)];if(Q){var X=p.table(re),J=Q.optimisticOps.filter(function(Re){return Re.trans===B});if(B._explicit&&K&&B.mutatedParts)for(var ne=0,se=Object.values(Q.queries.query);ne<se.length;ne++)for(var oe=0,fe=(Ce=se[ne]).slice();oe<fe.length;oe++)x((ve=fe[oe]).obsSet,B.mutatedParts)&&(ee(Ce,ve),ve.subscribers.forEach(function(Re){return G.add(Re)}));else if(0<J.length){Q.optimisticOps=Q.optimisticOps.filter(function(Re){return Re.trans!==B});for(var pe=0,we=Object.values(Q.queries.query);pe<we.length;pe++)for(var Ce,ve,Ee,ke=0,Te=(Ce=we[pe]).slice();ke<Te.length;ke++)(ve=Te[ke]).res!=null&&B.mutatedParts&&(K&&!ve.dirty?(Ee=Object.isFrozen(ve.res),Ee=d_(ve.res,ve.req,J,X,ve,Ee),ve.dirty?(ee(Ce,ve),ve.subscribers.forEach(function(Re){return G.add(Re)})):Ee!==ve.res&&(ve.res=Ee,ve.promise=Ie.resolve({result:Ee}))):(ve.dirty&&ee(Ce,ve),ve.subscribers.forEach(function(Re){return G.add(Re)})))}}}G.forEach(function(Re){return Re()})}}},B.addEventListener("abort",k(!1),{signal:z}),B.addEventListener("error",k(!1),{signal:z}),B.addEventListener("complete",k(!0),{signal:z})),B},table:function(_){var E=p.table(_),k=E.schema.primaryKey;return i(i({},E),{mutate:function(P){var z=Oe.trans;if(k.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return E.mutate(P);var B=S["idb://".concat(g,"/").concat(_)];return B?(z=E.mutate(P),P.type!=="add"&&P.type!=="put"||!(50<=P.values.length||_r(k,P).some(function(K){return K==null}))?(B.optimisticOps.push(P),P.mutatedParts&&le(P.mutatedParts),z.then(function(K){0<K.numFailures&&(ee(B.optimisticOps,P),(K=f_(0,P,K))&&B.optimisticOps.push(K),P.mutatedParts&&le(P.mutatedParts))}),z.catch(function(){ee(B.optimisticOps,P),P.mutatedParts&&le(P.mutatedParts)})):z.then(function(K){var G=f_(0,i(i({},P),{values:P.values.map(function(te,H){var re;return K.failures[H]?te:(te=(re=k.keyPath)!==null&&re!==void 0&&re.includes(".")?j(te):i({},te),A(te,k.keyPath,K.results[H]),te)})}),K);B.optimisticOps.push(G),queueMicrotask(function(){return P.mutatedParts&&le(P.mutatedParts)})}),z):E.mutate(P)},query:function(P){if(!c_(Oe,E)||!h_("query",P))return E.query(P);var z=((G=Oe.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",H=Oe,B=H.requery,K=H.signal,G=function(X,J,ne,se){var oe=S["idb://".concat(X,"/").concat(J)];if(!oe)return[];if(!(J=oe.queries[ne]))return[null,!1,oe,null];var fe=J[(se.query?se.query.index.name:null)||""];if(!fe)return[null,!1,oe,null];switch(ne){case"query":var pe=fe.find(function(we){return we.req.limit===se.limit&&we.req.values===se.values&&p_(we.req.query.range,se.query.range)});return pe?[pe,!0,oe,fe]:[fe.find(function(we){return("limit"in we.req?we.req.limit:1/0)>=se.limit&&(!se.values||we.req.values)&&zk(we.req.query.range,se.query.range)}),!1,oe,fe];case"count":return pe=fe.find(function(we){return p_(we.req.query.range,se.query.range)}),[pe,!!pe,oe,fe]}}(g,_,"query",P),te=G[0],H=G[1],re=G[2],Q=G[3];return te&&H?te.obsSet=P.obsSet:(H=E.query(P).then(function(X){var J=X.result;if(te&&(te.res=J),z){for(var ne=0,se=J.length;ne<se;++ne)Object.freeze(J[ne]);Object.freeze(J)}else X.result=j(J);return X}).catch(function(X){return Q&&te&&ee(Q,te),Promise.reject(X)}),te={obsSet:P.obsSet,promise:H,subscribers:new Set,type:"query",req:P,dirty:!1},Q?Q.push(te):(Q=[te],(re=re||(S["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[P.query.index.name||""]=Q)),$k(te,Q,B,K),te.promise.then(function(X){return{result:d_(X.result,P,re==null?void 0:re.optimisticOps,E,te,z)}})}})}})}};function Vh(p,g){return new Proxy(p,{get:function(_,E,k){return E==="db"?g:Reflect.get(_,E,k)}})}var es=(zt.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Le.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var g=this._versions,_=g.filter(function(E){return E._cfg.version===p})[0];return _||(_=new this.Version(p),g.push(_),g.sort(Lh),_.stores({}),this._state.autoSchema=!1,_)},zt.prototype._whenReady=function(p){var g=this;return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?p():new Ie(function(_,E){if(g._state.openComplete)return E(new Le.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void E(new Le.DatabaseClosed);g.open().catch(ot)}g._state.dbReadyPromise.then(_,E)}).then(p)},zt.prototype.use=function(p){var g=p.stack,_=p.create,E=p.level,k=p.name;return k&&this.unuse({stack:g,name:k}),p=this._middlewares[g]||(this._middlewares[g]=[]),p.push({stack:g,create:_,level:E??10,name:k}),p.sort(function(P,z){return P.level-z.level}),this},zt.prototype.unuse=function(p){var g=p.stack,_=p.name,E=p.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(k){return E?k.create!==E:!!_&&k.name!==_})),this},zt.prototype.open=function(){var p=this;return yr(pr,function(){return Ut(p)})},zt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,g=Gi.indexOf(this);if(0<=g&&Gi.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new Ie(function(_){p.dbReadyResolve=_}),p.openCanceller=new Ie(function(_,E){p.cancelOpen=E}))},zt.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new Le.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Le.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},zt.prototype.delete=function(p){var g=this;p===void 0&&(p={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new Ie(function(k,P){function z(){g.close(p);var B=g._deps.indexedDB.deleteDatabase(g.name);B.onsuccess=gt(function(){var K,G,te;K=g._deps,G=g.name,te=K.indexedDB,K=K.IDBKeyRange,qr(te)||G===$o||el(te,K).delete(G).catch(ot),k()}),B.onerror=jn(P),B.onblocked=g._fireOnBlocked}if(_)throw new Le.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(z):z()})},zt.prototype.backendDB=function(){return this.idbdb},zt.prototype.isOpen=function(){return this.idbdb!==null},zt.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},zt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zt.prototype,"tables",{get:function(){var p=this;return a(this._allTables).map(function(g){return p._allTables[g]})},enumerable:!1,configurable:!0}),zt.prototype.transaction=function(){var p=(function(g,_,E){var k=arguments.length;if(k<2)throw new Le.InvalidArgument("Too few arguments");for(var P=new Array(k-1);--k;)P[k-1]=arguments[k];return E=P.pop(),[g,M(P),E]}).apply(this,arguments);return this._transaction.apply(this,p)},zt.prototype._transaction=function(p,g,_){var E=this,k=Oe.trans;k&&k.db===this&&p.indexOf("!")===-1||(k=null);var P,z,B=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(z=g.map(function(G){if(G=G instanceof E.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),p=="r"||p===Ha)P=Ha;else{if(p!="rw"&&p!=Bo)throw new Le.InvalidArgument("Invalid transaction mode: "+p);P=Bo}if(k){if(k.mode===Ha&&P===Bo){if(!B)throw new Le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&z.forEach(function(G){if(k&&k.storeNames.indexOf(G)===-1){if(!B)throw new Le.SubTransaction("Table "+G+" not included in parent transaction.");k=null}}),B&&k&&!k.active&&(k=null)}}catch(G){return k?k._promise(null,function(te,H){H(G)}):yt(G)}var K=(function G(te,H,re,Q,X){return Ie.resolve().then(function(){var J=Oe.transless||Oe,ne=te._createTransaction(H,re,te._dbSchema,Q);if(ne.explicit=!0,J={trans:ne,transless:J},Q)ne.idbtrans=Q.idbtrans;else try{ne.create(),ne.idbtrans._explicit=!0,te._state.PR1398_maxLoop=3}catch(fe){return fe.name===We.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return G(te,H,re,null,X)})):yt(fe)}var se,oe=be(X);return oe&&mi(),J=Ie.follow(function(){var fe;(se=X.call(ne,ne))&&(oe?(fe=gr.bind(null,null),se.then(fe,fe)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=ct(se)))},J),(se&&typeof se.then=="function"?Ie.resolve(se).then(function(fe){return ne.active?fe:yt(new Le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):J.then(function(){return se})).then(function(fe){return Q&&ne._resolve(),ne._completion.then(function(){return fe})}).catch(function(fe){return ne._reject(fe),yt(fe)})})}).bind(null,this,P,z,k,_);return k?k._promise(P,K,"lock"):Oe.trans?yr(Oe.transless,function(){return E._whenReady(K)}):this._whenReady(K)},zt.prototype.table=function(p){if(!h(this._allTables,p))throw new Le.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},zt);function zt(p,g){var _=this;this._middlewares={},this.verno=0;var E=zt.dependencies;this._options=g=i({addons:zt.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},E=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var k,P,z,B,K,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ot,dbReadyPromise:null,cancelOpen:ot,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};G.dbReadyPromise=new Ie(function(H){G.dbReadyResolve=H}),G.openCanceller=new Ie(function(H,re){G.cancelOpen=re}),this._state=G,this.name=p,this.on=Ur(this,"populate","blocked","versionchange","close",{ready:[Kt,ot]}),this.once=function(H,re){var Q=function(){for(var X=[],J=0;J<arguments.length;J++)X[J]=arguments[J];_.on(H).unsubscribe(Q),re.apply(_,X)};return _.on(H,Q)},this.on.ready.subscribe=N(this.on.ready.subscribe,function(H){return function(re,Q){zt.vip(function(){var X,J=_._state;J.openComplete?(J.dbOpenError||Ie.resolve().then(re),Q&&H(re)):J.onReadyBeingFired?(J.onReadyBeingFired.push(re),Q&&H(re)):(H(re),X=_,Q||H(function ne(){X.on.ready.unsubscribe(re),X.on.ready.unsubscribe(ne)}))})}}),this.Collection=(k=this,Ko(Ph.prototype,function(se,ne){this.db=k;var Q=wu,X=null;if(ne)try{Q=ne()}catch(oe){X=oe}var J=se._ctx,ne=J.table,se=ne.hook.reading.fire;this._ctx={table:ne,index:J.index,isPrimKey:!J.index||ne.schema.primKey.keyPath&&J.index===ne.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:X,or:J.or,valueMapper:se!==jr?se:null}})),this.Table=(P=this,Ko(Ho.prototype,function(H,re,Q){this.db=P,this._tx=Q,this.name=H,this.schema=re,this.hook=P._allTables[H]?P._allTables[H].hook:Ur(null,{creating:[At,ot],reading:[Se,jr],updating:[Do,ot],deleting:[yn,ot]})})),this.Transaction=(z=this,Ko(Iu.prototype,function(H,re,Q,X,J){var ne=this;H!=="readonly"&&re.forEach(function(se){se=(se=Q[se])===null||se===void 0?void 0:se.yProps,se&&(re=re.concat(se.map(function(oe){return oe.updatesTable})))}),this.db=z,this.mode=H,this.storeNames=re,this.schema=Q,this.chromeTransactionDurability=X,this.idbtrans=null,this.on=Ur(this,"complete","error","abort"),this.parent=J||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie(function(se,oe){ne._resolve=se,ne._reject=oe}),this._completion.then(function(){ne.active=!1,ne.on.complete.fire()},function(se){var oe=ne.active;return ne.active=!1,ne.on.error.fire(se),ne.parent?ne.parent._reject(se):oe&&ne.idbtrans&&ne.idbtrans.abort(),yt(se)})})),this.Version=(B=this,Ko(Za.prototype,function(H){this.db=B,this._cfg={version:H,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,Ko(Dh.prototype,function(H,re,Q){if(this.db=K,this._ctx={table:H,index:re===":id"?null:re,or:Q},this._cmp=this._ascending=Je,this._descending=function(X,J){return Je(J,X)},this._max=function(X,J){return 0<Je(X,J)?X:J},this._min=function(X,J){return Je(X,J)<0?X:J},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new Le.MissingAPI})),this.on("versionchange",function(H){0<H.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(H){!H.newVersion||H.newVersion<H.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(H.oldVersion/10))}),this._maxKey=Os(g.IDBKeyRange),this._createTransaction=function(H,re,Q,X){return new _.Transaction(H,re,Q,_._options.chromeTransactionDurability,X)},this._fireOnBlocked=function(H){_.on("blocked").fire(H),Gi.filter(function(re){return re.name===_.name&&re!==_&&!re._state.vcFired}).map(function(re){return re.on("versionchange").fire(H)})},this.use(Nu),this.use(Bk),this.use(Uk),this.use(vr),this.use(bi);var te=new Proxy(this,{get:function(H,re,Q){if(re==="_vip")return!0;if(re==="table")return function(J){return Vh(_.table(J),te)};var X=Reflect.get(H,re,Q);return X instanceof Ho?Vh(X,te):re==="tables"?X.map(function(J){return Vh(J,te)}):re==="_createTransaction"?function(){return Vh(X.apply(this,arguments),te)}:X}});this.vip=te,E.forEach(function(H){return H(_)})}var Fh,wr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",qk=(tm.prototype.subscribe=function(p,g,_){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:g,complete:_})},tm.prototype[wr]=function(){return this},tm);function tm(p){this._subscribe=p}try{Fh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Fh={indexedDB:null,IDBKeyRange:null}}function m_(p){var g,_=!1,E=new qk(function(k){var P=be(p),z,B=!1,K={},G={},te={get closed(){return B},unsubscribe:function(){B||(B=!0,z&&z.abort(),H&&Br.storagemutated.unsubscribe(Q))}};k.start&&k.start(te);var H=!1,re=function(){return zo(X)},Q=function(J){f(K,J),x(G,K)&&re()},X=function(){var J,ne,se;!B&&Fh.indexedDB&&(K={},J={},z&&z.abort(),z=new AbortController,se=function(oe){var fe=Jn();try{P&&mi();var pe=Dr(p,oe);return pe=P?pe.finally(gr):pe}finally{fe&&Ns()}}(ne={subscr:J,signal:z.signal,requery:re,querier:p,trans:null}),Promise.resolve(se).then(function(oe){_=!0,g=oe,B||ne.signal.aborted||(K={},function(fe){for(var pe in fe)if(h(fe,pe))return;return 1}(G=J)||H||(Br($r,Q),H=!0),zo(function(){return!B&&k.next&&k.next(oe)}))},function(oe){_=!1,["DatabaseClosedError","AbortError"].includes(oe==null?void 0:oe.name)||B||zo(function(){B||k.error&&k.error(oe)})}))};return setTimeout(re,0),te});return E.hasValue=function(){return _},E.getValue=function(){return g},E}var Zo=es;function nm(p){var g=Us;try{Us=!0,Br.storagemutated.fire(p),xe(p,!0)}finally{Us=g}}m(Zo,i(i({},hi),{delete:function(p){return new Zo(p,{addons:[]}).delete()},exists:function(p){return new Zo(p,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return g=Zo.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(qr(_)?Promise.resolve(_.databases()).then(function(E){return E.map(function(k){return k.name}).filter(function(k){return k!==$o})}):el(_,g).toCollection().primaryKeys()).then(p)}catch{return yt(new Le.MissingAPI)}var g,_},defineClass:function(){return function(p){u(this,p)}},ignoreTransaction:function(p){return Oe.trans?yr(Oe.transless,p):p()},vip:tl,async:function(p){return function(){try{var g=ct(p.apply(this,arguments));return g&&typeof g.then=="function"?g:Ie.resolve(g)}catch(_){return yt(_)}}},spawn:function(p,g,_){try{var E=ct(p.apply(_,g||[]));return E&&typeof E.then=="function"?E:Ie.resolve(E)}catch(k){return yt(k)}},currentTransaction:{get:function(){return Oe.trans||null}},waitFor:function(p,g){return g=Ie.resolve(typeof p=="function"?Zo.ignoreTransaction(p):p).timeout(g||6e4),Oe.trans?Oe.trans.waitFor(g):g},Promise:Ie,debug:{get:function(){return vn},set:function(p){pu(p)}},derive:I,extend:u,props:m,override:N,Events:Ur,on:Br,liveQuery:m_,extendObservabilitySet:f,getByKeyPath:U,setByKeyPath:A,delByKeyPath:function(p,g){typeof g=="string"?A(p,g,void 0):"length"in g&&[].map.call(g,function(_){A(p,_,void 0)})},shallowClone:R,deepClone:j,getObjectDiff:Hr,cmp:Je,asap:L,minKey:-1/0,addons:[],connections:Gi,errnames:We,dependencies:Fh,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(p){return parseInt(p)}).reduce(function(p,g,_){return p+g/Math.pow(10,2*_)})})),Zo.maxKey=Os(Zo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Br($r,function(p){Us||(p=new CustomEvent(Yi,{detail:p}),Us=!0,dispatchEvent(p),Us=!1)}),addEventListener(Yi,function(p){p=p.detail,Us||nm(p)}));var rl,Us=!1,g_=function(){};return typeof BroadcastChannel<"u"&&((g_=function(){(rl=new BroadcastChannel(Yi)).onmessage=function(p){return p.data&&nm(p.data)}})(),typeof rl.unref=="function"&&rl.unref(),Br($r,function(p){Us||rl.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!es.disableBfCache&&p.persisted){vn&&console.debug("Dexie: handling persisted pagehide"),rl!=null&&rl.close();for(var g=0,_=Gi;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!es.disableBfCache&&p.persisted&&(vn&&console.debug("Dexie: handling persisted pageshow"),g_(),nm({all:new Jt(-1/0,[[]])}))})),Ie.rejectionMapper=function(p,g){return!p||p instanceof Ae||p instanceof TypeError||p instanceof SyntaxError||!p.name||!ci[p.name]?p:(g=new ci[p.name](g||p.message,p),"stack"in p&&w(g,"stack",{get:function(){return this.inner.stack}}),g)},pu(vn),i(es,Object.freeze({__proto__:null,Dexie:es,liveQuery:m_,Entity:xu,cmp:Je,PropModification:Fr,replacePrefix:function(p,g){return new Fr({replacePrefix:[p,g]})},add:function(p){return new Fr({add:p})},remove:function(p){return new Fr({remove:p})},default:es,RangeSet:Jt,mergeRanges:xi,rangesOverlap:wn}),{default:es}),es})})(kI);var ZP=kI.exports;const ry=Xy(ZP),nx=Symbol.for("Dexie"),Wl=globalThis[nx]||(globalThis[nx]=ry);if(ry.semVer!==Wl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ry.semVer} and ${Wl.semVer}`);const{liveQuery:j7,mergeRanges:D7,rangesOverlap:M7,RangeSet:L7,cmp:V7,Entity:F7,PropModification:U7,replacePrefix:z7,add:$7,remove:B7,DexieYProvider:q7}=Wl,vt=new Wl("NexusMindDB");vt.version(4).stores({contacts:"id, name, ocrText, phone, email, company, *tags, lastUpdated",settings:"id",schedules:"id, title, date, *contactIds, type"});function eO(n,e,r){var i,s;typeof n=="function"?(i=e||[],s=r):(i=[],s=e);var o=mt.useRef({hasResult:!1,result:s,error:null}),a=mt.useReducer(function(c){return c+1},0);a[0];var l=a[1],u=mt.useMemo(function(){var c=typeof n=="function"?n():n;if(!c||typeof c.subscribe!="function")throw n===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")o.current.result=c.getValue(),o.current.hasResult=!0;else{var d=c.subscribe(function(h){o.current.result=h,o.current.hasResult=!0});typeof d=="function"?d():d.unsubscribe()}return c},i);if(mt.useDebugValue(o.current.result),mt.useEffect(function(){var c=u.subscribe(function(d){var h=o.current;(h.error!==null||h.result!==d)&&(h.error=null,h.result=d,h.hasResult=!0,l())},function(d){var h=o.current;h.error!==d&&(h.error=d,l())});return typeof c=="function"?c:c.unsubscribe.bind(c)},i),o.current.error)throw o.current.error;return o.current.result}function Rf(n,e,r){return eO(function(){return Wl.liveQuery(n)},e||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=Wl.DexieYProvider;e&&e.release(n)});const tO=()=>{};var rx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=function(n){const e=[];let r=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},nO=function(n){const e=[];let r=0,i=0;for(;r<n.length;){const s=n[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[r++],a=n[r++],l=n[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],a=n[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},NI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,d=o>>2,h=(o&3)<<4|l>>4;let m=(l&15)<<2|c>>6,v=c&63;u||(v=64,a||(m=64)),i.push(r[d],r[h],r[m],r[v])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=r[n.charAt(s++)],l=s<n.length?r[n.charAt(s)]:0;++s;const c=s<n.length?r[n.charAt(s)]:64;++s;const h=s<n.length?r[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||h==null)throw new rO;const m=o<<2|l>>4;if(i.push(m),c!==64){const v=l<<4&240|c>>2;if(i.push(v),h!==64){const w=c<<6&192|h;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iO=function(n){const e=AI(n);return NI.encodeByteArray(e,!0)},vd=function(n){return iO(n).replace(/\./g,"")},RI=function(n){try{return NI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=()=>sO().__FIREBASE_DEFAULTS__,aO=()=>{if(typeof process>"u"||typeof rx>"u")return;const n=rx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RI(n[1]);return e&&JSON.parse(e)},vp=()=>{try{return tO()||oO()||aO()||lO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PI=n=>{var e,r;return(r=(e=vp())==null?void 0:e.emulatorHosts)==null?void 0:r[n]},uO=n=>{const e=PI(n);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},OI=()=>{var n;return(n=vp())==null?void 0:n.config},jI=n=>{var e;return(e=vp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[vd(JSON.stringify(r)),vd(JSON.stringify(a)),""].join(".")}const gc={};function fO(){const n={prod:[],emulator:[]};for(const e of Object.keys(gc))gc[e]?n.emulator.push(e):n.prod.push(e);return n}function dO(n){let e=document.getElementById(n),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),r=!0),{created:r,element:e}}let ix=!1;function MI(n,e){if(typeof window>"u"||typeof document>"u"||!au(window.location.host)||gc[n]===e||gc[n]||ix)return;gc[n]=e;function r(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=fO().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ix=!0,a()},m}function d(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=dO(i),v=r("text"),w=document.getElementById(v)||document.createElement("span"),I=r("learnmore"),C=document.getElementById(I)||document.createElement("a"),b=r("preprendIcon"),T=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),d(C,I);const O=c();u(T,b),N.append(T,w,C,O),document.body.appendChild(N)}o?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function mO(){var e;const n=(e=vp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vO(){const n=Pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _O(){return!mO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VI(){try{return typeof indexedDB=="object"}catch{return!1}}function FI(){return new Promise((n,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function wO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="FirebaseError";class li extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=xO,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Va.prototype.create)}}class Va{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?bO(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new li(s,l,i)}}function bO(n,e){return n.replace(EO,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const EO=/\{\$([^}]+)}/g;function TO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wo(n,e){if(n===e)return!0;const r=Object.keys(n),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(sx(o)&&sx(a)){if(!wo(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function sx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(n){const e=[];for(const[r,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function IO(n,e){const r=new SO(n,e);return r.subscribe.bind(r)}class SO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");CO(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Rm),s.error===void 0&&(s.error=Rm),s.complete===void 0&&(s.complete=Rm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CO(n,e){if(typeof n!="object"||n===null)return!1;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1e3,AO=2,NO=4*60*60*1e3,RO=.5;function ox(n,e=kO,r=AO){const i=e*Math.pow(r,n),s=Math.round(RO*i*(Math.random()-.5)*2);return Math.min(NO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n){return n&&n._delegate?n._delegate:n}class ai{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new cO;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jO(e))try{this.getOrInitializeService({instanceIdentifier:ia})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ia){return this.instances.has(e)}getOptions(e=ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){const i=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:OO(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ia){return this.component?this.component.multipleInstances?e:ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OO(n){return n===ia?void 0:n}function jO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new PO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(tt||(tt={}));const MO={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},LO=tt.INFO,VO={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},FO=(n,e,...r)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=VO[e];if(s)console[s](`[${i}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=LO,this._logHandler=FO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const UO=(n,e)=>e.some(r=>n instanceof r);let ax,lx;function zO(){return ax||(ax=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $O(){return lx||(lx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UI=new WeakMap,iy=new WeakMap,zI=new WeakMap,Pm=new WeakMap,Yv=new WeakMap;function BO(n){const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(po(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&UI.set(r,n)}).catch(()=>{}),Yv.set(e,n),e}function qO(n){if(iy.has(n))return;const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});iy.set(n,e)}let sy={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return iy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zI.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return po(n[e])},set(n,e,r){return n[e]=r,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HO(n){sy=n(sy)}function KO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=n.call(Om(this),e,...r);return zI.set(i,e.sort?e.sort():[e]),po(i)}:$O().includes(n)?function(...e){return n.apply(Om(this),e),po(UI.get(this))}:function(...e){return po(n.apply(Om(this),e))}}function WO(n){return typeof n=="function"?KO(n):(n instanceof IDBTransaction&&qO(n),UO(n,zO())?new Proxy(n,sy):n)}function po(n){if(n instanceof IDBRequest)return BO(n);if(Pm.has(n))return Pm.get(n);const e=WO(n);return e!==n&&(Pm.set(n,e),Yv.set(e,n)),e}const Om=n=>Yv.get(n);function $I(n,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=po(a);return i&&a.addEventListener("upgradeneeded",u=>{i(po(a.result),u.oldVersion,u.newVersion,po(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const GO=["get","getKey","getAll","getAllKeys","count"],QO=["put","add","delete","clear"],jm=new Map;function ux(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jm.get(e))return jm.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=QO.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||GO.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return jm.set(e,o),o}HO(n=>({...n,get:(e,r,i)=>ux(e,r)||n.get(e,r,i),has:(e,r)=>!!ux(e,r)||n.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(XO(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function XO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oy="@firebase/app",cx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new _p("@firebase/app"),JO="@firebase/app-compat",ZO="@firebase/analytics-compat",ej="@firebase/analytics",tj="@firebase/app-check-compat",nj="@firebase/app-check",rj="@firebase/auth",ij="@firebase/auth-compat",sj="@firebase/database",oj="@firebase/data-connect",aj="@firebase/database-compat",lj="@firebase/functions",uj="@firebase/functions-compat",cj="@firebase/installations",hj="@firebase/installations-compat",fj="@firebase/messaging",dj="@firebase/messaging-compat",pj="@firebase/performance",mj="@firebase/performance-compat",gj="@firebase/remote-config",yj="@firebase/remote-config-compat",vj="@firebase/storage",_j="@firebase/storage-compat",wj="@firebase/firestore",xj="@firebase/ai",bj="@firebase/firestore-compat",Ej="firebase",Tj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="[DEFAULT]",Ij={[oy]:"fire-core",[JO]:"fire-core-compat",[ej]:"fire-analytics",[ZO]:"fire-analytics-compat",[nj]:"fire-app-check",[tj]:"fire-app-check-compat",[rj]:"fire-auth",[ij]:"fire-auth-compat",[sj]:"fire-rtdb",[oj]:"fire-data-connect",[aj]:"fire-rtdb-compat",[lj]:"fire-fn",[uj]:"fire-fn-compat",[cj]:"fire-iid",[hj]:"fire-iid-compat",[fj]:"fire-fcm",[dj]:"fire-fcm-compat",[pj]:"fire-perf",[mj]:"fire-perf-compat",[gj]:"fire-rc",[yj]:"fire-rc-compat",[vj]:"fire-gcs",[_j]:"fire-gcs-compat",[wj]:"fire-fst",[bj]:"fire-fst-compat",[xj]:"fire-vertex","fire-js":"fire-js",[Ej]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,Sj=new Map,ly=new Map;function hx(n,e){try{n.container.addComponent(e)}catch(r){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function Vi(n){const e=n.name;if(ly.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;ly.set(e,n);for(const r of _d.values())hx(r,n);for(const r of Sj.values())hx(r,n);return!0}function Fa(n,e){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function Jr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Va("app","Firebase",Cj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,r,i){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=Tj;function BI(n,e={}){let r=n;typeof e!="object"&&(e={name:e});const i={name:ay,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw mo.create("bad-app-name",{appName:String(s)});if(r||(r=OI()),!r)throw mo.create("no-options");const o=_d.get(s);if(o){if(wo(r,o.options)&&wo(i,o.config))return o;throw mo.create("duplicate-app",{appName:s})}const a=new DO(s);for(const u of ly.values())a.addComponent(u);const l=new kj(r,i,a);return _d.set(s,l),l}function Xv(n=ay){const e=_d.get(n);if(!e&&n===ay&&OI())return BI();if(!e)throw mo.create("no-app",{appName:n});return e}function Nr(n,e,r){let i=Ij[n]??n;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(a.join(" "));return}Vi(new ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="firebase-heartbeat-database",Nj=1,Kc="firebase-heartbeat-store";let Dm=null;function qI(){return Dm||(Dm=$I(Aj,Nj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Kc)}catch(r){console.warn(r)}}}}).catch(n=>{throw mo.create("idb-open",{originalErrorMessage:n.message})})),Dm}async function Rj(n){try{const r=(await qI()).transaction(Kc),i=await r.objectStore(Kc).get(HI(n));return await r.done,i}catch(e){if(e instanceof li)bs.warn(e.message);else{const r=mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(r.message)}}}async function fx(n,e){try{const i=(await qI()).transaction(Kc,"readwrite");await i.objectStore(Kc).put(e,HI(n)),await i.done}catch(r){if(r instanceof li)bs.warn(r.message);else{const i=mo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});bs.warn(i.message)}}}function HI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=1024,Oj=30;class jj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Mj(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=dx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Oj){const a=Lj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){bs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=dx(),{heartbeatsToSend:i,unsentEntries:s}=Dj(this._heartbeatsCache.heartbeats),o=vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return bs.warn(r),""}}}function dx(){return new Date().toISOString().substring(0,10)}function Dj(n,e=Pj){const r=[];let i=n.slice();for(const s of n){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),px(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),px(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class Mj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VI()?FI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Rj(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return fx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return fx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function px(n){return vd(JSON.stringify({version:2,heartbeats:n})).length}function Lj(n){if(n.length===0)return-1;let e=0,r=n[0].date;for(let i=1;i<n.length;i++)n[i].date<r&&(r=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(n){Vi(new ai("platform-logger",e=>new YO(e),"PRIVATE")),Vi(new ai("heartbeat",e=>new jj(e),"PRIVATE")),Nr(oy,cx,n),Nr(oy,cx,"esm2020"),Nr("fire-js","")}Vj("");var Fj="firebase",Uj="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr(Fj,Uj,"app");function KI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zj=KI,WI=new Va("auth","Firebase",KI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new _p("@firebase/auth");function $j(n,...e){wd.logLevel<=tt.WARN&&wd.warn(`Auth (${lu}): ${n}`,...e)}function Pf(n,...e){wd.logLevel<=tt.ERROR&&wd.error(`Auth (${lu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n,...e){throw Zv(n,...e)}function ii(n,...e){return Zv(n,...e)}function Jv(n,e,r){const i={...zj(),[e]:r};return new Va("auth","Firebase",i).create(e,{appName:n.name})}function ya(n){return Jv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bj(n,e,r){const i=r;if(!(e instanceof i))throw i.name!==e.constructor.name&&Fi(n,"argument-error"),Jv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zv(n,...e){if(typeof n!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(r,...i)}return WI.create(n,...e)}function ze(n,e,...r){if(!n)throw Zv(e,...r)}function hs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function Es(n,e){n||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function qj(){return mx()==="http:"||mx()==="https:"}function mx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qj()||LI()||"connection"in navigator)?navigator.onLine:!0}function Kj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Es(r>e,"Short delay should be less than long delay!"),this.isMobile=pO()||yO()}get(){return Hj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(n,e){Es(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qj=new mh(3e4,6e4);function t0(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function uu(n,e,r,i,s={}){return QI(n,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=ph({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:u,...o};return gO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&au(n.emulatorConfig.host)&&(c.credentials="include"),GI.fetch()(await YI(n,n.config.apiHost,r,l),c)})}async function QI(n,e,r){n._canInitEmulator=!1;const i={...Wj,...e};try{const s=new Xj(n),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw sf(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw sf(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw sf(n,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Jv(n,d,c);Fi(n,d)}}catch(s){if(s instanceof li)throw s;Fi(n,"network-request-failed",{message:String(s)})}}async function Yj(n,e,r,i,s={}){const o=await uu(n,e,r,i,s);return"mfaPendingCredential"in o&&Fi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function YI(n,e,r,i){const s=`${e}${r}?${i}`,o=n,a=o.config.emulator?e0(n.config,s):`${n.config.apiScheme}://${s}`;return Gj.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class Xj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(ii(this.auth,"network-request-failed")),Qj.get())})}}function sf(n,e,r){const i={appName:n.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=ii(n,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jj(n,e){return uu(n,"POST","/v1/accounts:delete",e)}async function xd(n,e){return uu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Zj(n,e=!1){const r=Xt(n),i=await r.getIdToken(e),s=n0(i);ze(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:yc(Mm(s.auth_time)),issuedAtTime:yc(Mm(s.iat)),expirationTime:yc(Mm(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Mm(n){return Number(n)*1e3}function n0(n){const[e,r,i]=n.split(".");if(e===void 0||r===void 0||i===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=RI(r);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function gx(n){const e=n0(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wc(n,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof li&&e4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function e4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bd(n){var h;const e=n.auth,r=await n.getIdToken(),i=await Wc(n,xd(e,{idToken:r}));ze(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(h=s.providerUserInfo)!=null&&h.length?XI(s.providerUserInfo):[],a=r4(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function n4(n){const e=Xt(n);await bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r4(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function XI(n){return n.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(n,e){const r=await QI(n,{},async()=>{const i=ph({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await YI(n,s,"/v1/token",`key=${o}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return n.emulatorConfig&&au(n.emulatorConfig.host)&&(u.credentials="include"),GI.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function s4(n,e){return uu(n,"POST","/v2/accounts:revokeToken",t0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const r=gx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await i4(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new Rl;return i&&(ze(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(ze(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(ze(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:r,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new t4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Wc(this,this.stsTokenManager.getToken(this.auth,e));return ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Zj(this,e)}reload(){return n4(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await bd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jr(this.auth.app))return Promise.reject(ya(this.auth));const e=await this.getIdToken();return await Wc(this,Jj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const i=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,c=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:v,providerData:w,stsTokenManager:I}=r;ze(h&&I,e,"internal-error");const C=Rl.fromJSON(this.name,I);ze(typeof h=="string",e,"internal-error"),$s(i,e.name),$s(s,e.name),ze(typeof m=="boolean",e,"internal-error"),ze(typeof v=="boolean",e,"internal-error"),$s(o,e.name),$s(a,e.name),$s(l,e.name),$s(u,e.name),$s(c,e.name),$s(d,e.name);const b=new ei({uid:h,auth:e,email:s,emailVerified:m,displayName:i,isAnonymous:v,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:C,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(b.providerData=w.map(T=>({...T}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,r,i=!1){const s=new Rl;s.updateFromServerResponse(r);const o=new ei({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bd(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];ze(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?XI(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Rl;l.updateFromIdToken(i);const u=new ei({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new cy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new Map;function fs(n){Es(n instanceof Function,"Expected a class definition");let e=yx.get(n);return e?(Es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}JI.type="NONE";const vx=JI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n,e,r){return`firebase:${n}:${e}:${r}`}class Pl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Of(this.userKey,s.apiKey,o),this.fullPersistenceKey=Of("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await xd(this.auth,{idToken:e}).catch(()=>{});return r?ei._fromGetAccountInfoResponse(this.auth,r,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Pl(fs(vx),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||fs(vx);const a=Of(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(a);if(d){let h;if(typeof d=="string"){const m=await xd(e,{idToken:d}).catch(()=>{});if(!m)break;h=await ei._fromGetAccountInfoResponse(e,m,d)}else h=ei._fromJSON(e,d);c!==o&&(l=h),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Pl(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Pl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i2(e))return"Blackberry";if(s2(e))return"Webos";if(e2(e))return"Safari";if((e.includes("chrome/")||t2(e))&&!e.includes("edge/"))return"Chrome";if(r2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ZI(n=Pn()){return/firefox\//i.test(n)}function e2(n=Pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t2(n=Pn()){return/crios\//i.test(n)}function n2(n=Pn()){return/iemobile/i.test(n)}function r2(n=Pn()){return/android/i.test(n)}function i2(n=Pn()){return/blackberry/i.test(n)}function s2(n=Pn()){return/webos/i.test(n)}function r0(n=Pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function o4(n=Pn()){var e;return r0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function a4(){return vO()&&document.documentMode===10}function o2(n=Pn()){return r0(n)||r2(n)||s2(n)||i2(n)||/windows phone/i.test(n)||n2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n,e=[]){let r;switch(n){case"Browser":r=_x(Pn());break;case"Worker":r=`${_x(Pn())}-${n}`;break;default:r=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${lu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(n,e={}){return uu(n,"GET","/v2/passwordPolicy",t0(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=6;class h4{constructor(e){var i;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??c4,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wx(this),this.idTokenSubscription=new wx(this),this.beforeStateQueue=new l4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=fs(r)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await xd(this,{idToken:e}),i=await ei._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Jr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jr(this.app))return Promise.reject(ya(this));const r=e?Xt(e):null;return r&&ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jr(this.app)?Promise.reject(ya(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jr(this.app)?Promise.reject(ya(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u4(this),r=new h4(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Va("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await s4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&fs(e)||this._popupRedirectResolver;ze(r,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[fs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var r;if(Jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&$j(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wp(n){return Xt(n)}class wx{constructor(e){this.auth=e,this.observer=null,this.addObserver=IO(r=>this.observer=r)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d4(n){i0=n}function p4(n){return i0.loadJS(n)}function m4(){return i0.gapiScript}function g4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(n,e){const r=Fa(n,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(wo(o,e??{}))return s;Fi(s,"already-initialized")}return r.initialize({options:e})}function v4(n,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _4(n,e,r){const i=wp(n);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=l2(e),{host:a,port:l}=w4(e),u=l===null?"":`:${l}`,c={url:`${o}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(wo(c,i.config.emulator)&&wo(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,au(a)?(DI(`${o}//${a}${u}`),MI("Auth",!0)):x4()}function l2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w4(n){const e=l2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:xx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:xx(a)}}}function xx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function x4(){function n(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,r){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n,e){return Yj(n,"POST","/v1/accounts:signInWithIdp",t0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="http://localhost";class ka extends u2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Fi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=r;if(!i||!s)return null;const a=new ka(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ol(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Ol(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ol(e,r)}buildRequest(){const e={requestUri:b4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ph(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends s0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends gh{constructor(){super("facebook.com")}static credential(e){return ka._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends gh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ka._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return ls.credential(r,i)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends gh{constructor(){super("github.com")}static credential(e){return ka._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.GITHUB_SIGN_IN_METHOD="github.com";Js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends gh{constructor(){super("twitter.com")}static credential(e,r){return ka._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return Zs.credential(r,i)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await ei._fromIdTokenResponse(e,i,s),a=bx(i);return new Gl({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=bx(i);return new Gl({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function bx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends li{constructor(e,r,i,s){super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new Ed(e,r,i,s)}}function c2(n,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(n,o,e,i):o})}async function E4(n,e,r=!1){const i=await Wc(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Gl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e,r=!1){const{auth:i}=n;if(Jr(i.app))return Promise.reject(ya(i));const s="reauthenticate";try{const o=await Wc(n,c2(i,s,e,n),r);ze(o.idToken,i,"internal-error");const a=n0(o.idToken);ze(a,i,"internal-error");const{sub:l}=a;return ze(n.uid===l,i,"user-mismatch"),Gl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Fi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(n,e,r=!1){if(Jr(n.app))return Promise.reject(ya(n));const i="signIn",s=await c2(n,i,e),o=await Gl._fromIdTokenResponse(n,i,s);return r||await n._updateCurrentUser(o.user),o}function S4(n,e,r,i){return Xt(n).onIdTokenChanged(e,r,i)}function C4(n,e,r){return Xt(n).beforeAuthStateChanged(e,r)}function k4(n,e,r,i){return Xt(n).onAuthStateChanged(e,r,i)}function A4(n){return Xt(n).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=1e3,R4=10;class f2 extends h2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);a4()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,R4):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},N4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}f2.type="LOCAL";const P4=f2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2 extends h2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}d2.type="SESSION";const p2=d2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new xp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await O4(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(n="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=o0("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function D4(n){Oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function M4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function V4(){return m2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="firebaseLocalStorageDb",F4=1,Id="firebaseLocalStorage",y2="fbase_key";class yh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function bp(n,e){return n.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function U4(){const n=indexedDB.deleteDatabase(g2);return new yh(n).toPromise()}function hy(){const n=indexedDB.open(g2,F4);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Id,{keyPath:y2})}catch(s){r(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await U4(),e(await hy()))})})}async function Ex(n,e,r){const i=bp(n,!0).put({[y2]:e,value:r});return new yh(i).toPromise()}async function z4(n,e){const r=bp(n,!1).get(e),i=await new yh(r).toPromise();return i===void 0?null:i.value}function Tx(n,e){const r=bp(n,!0).delete(e);return new yh(r).toPromise()}const $4=800,B4=3;class v2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hy(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>B4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xp._getInstance(V4()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await M4(),!this.activeServiceWorker)return;this.sender=new j4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hy();return await Ex(e,Td,"1"),await Tx(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ex(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>z4(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=bp(s,!1).getAll();return new yh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v2.type="LOCAL";const q4=v2;new mh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(n,e){return e?fs(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends u2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ol(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ol(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function H4(n){return I4(n.auth,new a0(n),n.bypassAuthState)}function K4(n){const{auth:e,user:r}=n;return ze(r,e,"internal-error"),T4(r,new a0(n),n.bypassAuthState)}async function W4(n){const{auth:e,user:r}=n;return ze(r,e,"internal-error"),E4(r,new a0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H4;case"linkViaPopup":case"linkViaRedirect":return W4;case"reauthViaPopup":case"reauthViaRedirect":return K4;default:Fi(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new mh(2e3,1e4);async function Q4(n,e,r){if(Jr(n.app))return Promise.reject(ii(n,"operation-not-supported-in-this-environment"));const i=wp(n);Bj(n,e,s0);const s=_2(i,r);return new ca(i,"signInViaPopup",e,s).executeNotNull()}class ca extends w2{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=o0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G4.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="pendingRedirect",jf=new Map;class X4 extends w2{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=jf.get(this.auth._key());if(!e){try{const i=await J4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}jf.set(this.auth._key(),e)}return this.bypassAuthState||jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J4(n,e){const r=tD(e),i=eD(n);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function Z4(n,e){jf.set(n._key(),e)}function eD(n){return fs(n._redirectPersistence)}function tD(n){return Of(Y4,n.config.apiKey,n.name)}async function nD(n,e,r=!1){if(Jr(n.app))return Promise.reject(ya(n));const i=wp(n),s=_2(i,e),a=await new X4(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=10*60*1e3;class iD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!x2(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(ii(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ix(e))}saveEventToCache(e){this.cachedEventUids.add(Ix(e)),this.lastProcessedEventTime=Date.now()}}function Ix(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function x2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(n,e={}){return uu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lD=/^https?/;async function uD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oD(n);for(const r of e)try{if(cD(r))return}catch{}Fi(n,"unauthorized-domain")}function cD(n){const e=uy(),{protocol:r,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!lD.test(r))return!1;if(aD.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new mh(3e4,6e4);function Sx(){const n=Oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function fD(n){return new Promise((e,r)=>{var s,o,a;function i(){Sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sx(),r(ii(n,"network-request-failed"))},timeout:hD.get()})}if((o=(s=Oi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Oi().gapi)!=null&&a.load)i();else{const l=g4("iframefcb");return Oi()[l]=()=>{gapi.load?i():r(ii(n,"network-request-failed"))},p4(`${m4()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Df=null,e})}let Df=null;function dD(n){return Df=Df||fD(n),Df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=new mh(5e3,15e3),mD="__/auth/iframe",gD="emulator/auth/iframe",yD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _D(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const r=e.emulator?e0(e,gD):`https://${n.config.authDomain}/${mD}`,i={apiKey:e.apiKey,appName:n.name,v:lu},s=vD.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${ph(i).slice(1)}`}async function wD(n){const e=await dD(n),r=Oi().gapi;return ze(r,n,"internal-error"),e.open({where:document.body,url:_D(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yD,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=ii(n,"network-request-failed"),l=Oi().setTimeout(()=>{o(a)},pD.get());function u(){Oi().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bD=500,ED=600,TD="_blank",ID="http://localhost";class Cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SD(n,e,r,i=bD,s=ED){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...xD,width:i.toString(),height:s.toString(),top:o,left:a},c=Pn().toLowerCase();r&&(l=t2(c)?TD:r),ZI(c)&&(e=e||ID,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(o4(c)&&l!=="_self")return CD(e||"",l),new Cx(null);const h=window.open(e||"",l,d);ze(h,n,"popup-blocked");try{h.focus()}catch{}return new Cx(h)}function CD(n,e){const r=document.createElement("a");r.href=n,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="__/auth/handler",AD="emulator/auth/handler",ND=encodeURIComponent("fac");async function kx(n,e,r,i,s,o){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:i,v:lu,eventId:s};if(e instanceof s0){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",TO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))a[d]=h}if(e instanceof gh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await n._getAppCheckToken(),c=u?`#${ND}=${encodeURIComponent(u)}`:"";return`${RD(n)}?${ph(l).slice(1)}${c}`}function RD({config:n}){return n.emulator?e0(n,AD):`https://${n.authDomain}/${kD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="webStorageSupport";class PD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p2,this._completeRedirectFn=nD,this._overrideRedirectResult=Z4}async _openPopup(e,r,i,s){var a;Es((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await kx(e,r,i,uy(),s);return SD(e,o,o0())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await kx(e,r,i,uy(),s);return D4(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Es(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await wD(e),i=new iD(e);return r.register("authEvent",s=>(ze(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Lm,{type:Lm},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[Lm];o!==void 0&&r(!!o),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=uD(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return o2()||e2()||r0()}}const OD=PD;var Ax="@firebase/auth",Nx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MD(n){Vi(new ai("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;ze(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a2(n)},c=new f4(i,s,o,u);return v4(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Vi(new ai("auth-internal",e=>{const r=wp(e.getProvider("auth").getImmediate());return(i=>new jD(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nr(Ax,Nx,DD(n)),Nr(Ax,Nx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=5*60,VD=jI("authIdTokenMaxAge")||LD;let Rx=null;const FD=n=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>VD)return;const s=r==null?void 0:r.token;Rx!==s&&(Rx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UD(n=Xv()){const e=Fa(n,"auth");if(e.isInitialized())return e.getImmediate();const r=y4(n,{popupRedirectResolver:OD,persistence:[q4,P4,p2]}),i=jI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=FD(o.toString());C4(r,a,()=>a(r.currentUser)),S4(r,l=>a(l))}}const s=PI("auth");return s&&_4(r,`http://${s}`),r}function zD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}d4({loadJS(n){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=ii("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",zD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MD("Browser");var Px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var go,b2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,R){function D(){}D.prototype=R.prototype,A.F=R.prototype,A.prototype=new D,A.prototype.constructor=A,A.D=function(M,F,$){for(var j=Array(arguments.length-2),q=2;q<arguments.length;q++)j[q-2]=arguments[q];return R.prototype[F].apply(M,j)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,R,D){D||(D=0);const M=Array(16);if(typeof R=="string")for(var F=0;F<16;++F)M[F]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(F=0;F<16;++F)M[F]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=A.g[0],D=A.g[1],F=A.g[2];let $=A.g[3],j;j=R+($^D&(F^$))+M[0]+3614090360&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[1]+3905402710&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[2]+606105819&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[3]+3250441966&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+($^D&(F^$))+M[4]+4118548399&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[5]+1200080426&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[6]+2821735955&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[7]+4249261313&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+($^D&(F^$))+M[8]+1770035416&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[9]+2336552879&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[10]+4294925233&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[11]+2304563134&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+($^D&(F^$))+M[12]+1804603682&4294967295,R=D+(j<<7&4294967295|j>>>25),j=$+(F^R&(D^F))+M[13]+4254626195&4294967295,$=R+(j<<12&4294967295|j>>>20),j=F+(D^$&(R^D))+M[14]+2792965006&4294967295,F=$+(j<<17&4294967295|j>>>15),j=D+(R^F&($^R))+M[15]+1236535329&4294967295,D=F+(j<<22&4294967295|j>>>10),j=R+(F^$&(D^F))+M[1]+4129170786&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[6]+3225465664&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[11]+643717713&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[0]+3921069994&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(F^$&(D^F))+M[5]+3593408605&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[10]+38016083&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[15]+3634488961&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[4]+3889429448&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(F^$&(D^F))+M[9]+568446438&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[14]+3275163606&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[3]+4107603335&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[8]+1163531501&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(F^$&(D^F))+M[13]+2850285829&4294967295,R=D+(j<<5&4294967295|j>>>27),j=$+(D^F&(R^D))+M[2]+4243563512&4294967295,$=R+(j<<9&4294967295|j>>>23),j=F+(R^D&($^R))+M[7]+1735328473&4294967295,F=$+(j<<14&4294967295|j>>>18),j=D+($^R&(F^$))+M[12]+2368359562&4294967295,D=F+(j<<20&4294967295|j>>>12),j=R+(D^F^$)+M[5]+4294588738&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[8]+2272392833&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[11]+1839030562&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[14]+4259657740&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(D^F^$)+M[1]+2763975236&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[4]+1272893353&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[7]+4139469664&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[10]+3200236656&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(D^F^$)+M[13]+681279174&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[0]+3936430074&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[3]+3572445317&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[6]+76029189&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(D^F^$)+M[9]+3654602809&4294967295,R=D+(j<<4&4294967295|j>>>28),j=$+(R^D^F)+M[12]+3873151461&4294967295,$=R+(j<<11&4294967295|j>>>21),j=F+($^R^D)+M[15]+530742520&4294967295,F=$+(j<<16&4294967295|j>>>16),j=D+(F^$^R)+M[2]+3299628645&4294967295,D=F+(j<<23&4294967295|j>>>9),j=R+(F^(D|~$))+M[0]+4096336452&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[7]+1126891415&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[14]+2878612391&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[5]+4237533241&4294967295,D=F+(j<<21&4294967295|j>>>11),j=R+(F^(D|~$))+M[12]+1700485571&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[3]+2399980690&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[10]+4293915773&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[1]+2240044497&4294967295,D=F+(j<<21&4294967295|j>>>11),j=R+(F^(D|~$))+M[8]+1873313359&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[15]+4264355552&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[6]+2734768916&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[13]+1309151649&4294967295,D=F+(j<<21&4294967295|j>>>11),j=R+(F^(D|~$))+M[4]+4149444226&4294967295,R=D+(j<<6&4294967295|j>>>26),j=$+(D^(R|~F))+M[11]+3174756917&4294967295,$=R+(j<<10&4294967295|j>>>22),j=F+(R^($|~D))+M[2]+718787259&4294967295,F=$+(j<<15&4294967295|j>>>17),j=D+($^(F|~R))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+R&4294967295,A.g[1]=A.g[1]+(F+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+F&4294967295,A.g[3]=A.g[3]+$&4294967295}i.prototype.v=function(A,R){R===void 0&&(R=A.length);const D=R-this.blockSize,M=this.C;let F=this.h,$=0;for(;$<R;){if(F==0)for(;$<=D;)s(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<R;)if(M[F++]=A.charCodeAt($++),F==this.blockSize){s(this,M),F=0;break}}else for(;$<R;)if(M[F++]=A[$++],F==this.blockSize){s(this,M),F=0;break}}this.h=F,this.o+=R},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var R=1;R<A.length-8;++R)A[R]=0;R=this.o*8;for(var D=A.length-8;D<A.length;++D)A[D]=R&255,R/=256;for(this.v(A),A=Array(16),R=0,D=0;D<4;++D)for(let M=0;M<32;M+=8)A[R++]=this.g[D]>>>M&255;return A};function o(A,R){var D=l;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=R(A)}function a(A,R){this.h=R;const D=[];let M=!0;for(let F=A.length-1;F>=0;F--){const $=A[F]|0;M&&$==R||(D[F]=$,M=!1)}this.g=D}var l={};function u(A){return-128<=A&&A<128?o(A,function(R){return new a([R|0],R<0?-1:0)}):new a([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(A<0)return C(c(-A));const R=[];let D=1;for(let M=0;A>=D;M++)R[M]=A/D|0,D*=4294967296;return new a(R,0)}function d(A,R){if(A.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A.charAt(0)=="-")return C(d(A.substring(1),R));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=c(Math.pow(R,8));let M=h;for(let $=0;$<A.length;$+=8){var F=Math.min(8,A.length-$);const j=parseInt(A.substring($,$+F),R);F<8?(F=c(Math.pow(R,F)),M=M.j(F).add(c(j))):(M=M.j(D),M=M.add(c(j)))}return M}var h=u(0),m=u(1),v=u(16777216);n=a.prototype,n.m=function(){if(I(this))return-C(this).m();let A=0,R=1;for(let D=0;D<this.g.length;D++){const M=this.i(D);A+=(M>=0?M:4294967296+M)*R,R*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(I(this))return"-"+C(this).toString(A);const R=c(Math.pow(A,6));var D=this;let M="";for(;;){const F=O(D,R).g;D=b(D,F.j(R));let $=((D.g.length>0?D.g[0]:D.h)>>>0).toString(A);if(D=F,w(D))return $+M;for(;$.length<6;)$="0"+$;M=$+M}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let R=0;R<A.g.length;R++)if(A.g[R]!=0)return!1;return!0}function I(A){return A.h==-1}n.l=function(A){return A=b(this,A),I(A)?-1:w(A)?0:1};function C(A){const R=A.g.length,D=[];for(let M=0;M<R;M++)D[M]=~A.g[M];return new a(D,~A.h).add(m)}n.abs=function(){return I(this)?C(this):this},n.add=function(A){const R=Math.max(this.g.length,A.g.length),D=[];let M=0;for(let F=0;F<=R;F++){let $=M+(this.i(F)&65535)+(A.i(F)&65535),j=($>>>16)+(this.i(F)>>>16)+(A.i(F)>>>16);M=j>>>16,$&=65535,j&=65535,D[F]=j<<16|$}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(A,R){return A.add(C(R))}n.j=function(A){if(w(this)||w(A))return h;if(I(this))return I(A)?C(this).j(C(A)):C(C(this).j(A));if(I(A))return C(this.j(C(A)));if(this.l(v)<0&&A.l(v)<0)return c(this.m()*A.m());const R=this.g.length+A.g.length,D=[];for(var M=0;M<2*R;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(let F=0;F<A.g.length;F++){const $=this.i(M)>>>16,j=this.i(M)&65535,q=A.i(F)>>>16,W=A.i(F)&65535;D[2*M+2*F]+=j*W,T(D,2*M+2*F),D[2*M+2*F+1]+=$*W,T(D,2*M+2*F+1),D[2*M+2*F+1]+=j*q,T(D,2*M+2*F+1),D[2*M+2*F+2]+=$*q,T(D,2*M+2*F+2)}for(A=0;A<R;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=R;A<2*R;A++)D[A]=0;return new a(D,0)};function T(A,R){for(;(A[R]&65535)!=A[R];)A[R+1]+=A[R]>>>16,A[R]&=65535,R++}function N(A,R){this.g=A,this.h=R}function O(A,R){if(w(R))throw Error("division by zero");if(w(A))return new N(h,h);if(I(A))return R=O(C(A),R),new N(C(R.g),C(R.h));if(I(R))return R=O(A,C(R)),new N(C(R.g),R.h);if(A.g.length>30){if(I(A)||I(R))throw Error("slowDivide_ only works with positive integers.");for(var D=m,M=R;M.l(A)<=0;)D=L(D),M=L(M);var F=U(D,1),$=U(M,1);for(M=U(M,2),D=U(D,2);!w(M);){var j=$.add(M);j.l(A)<=0&&(F=F.add(D),$=j),M=U(M,1),D=U(D,1)}return R=b(A,F.j(R)),new N(F,R)}for(F=h;A.l(R)>=0;){for(D=Math.max(1,Math.floor(A.m()/R.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),$=c(D),j=$.j(R);I(j)||j.l(A)>0;)D-=M,$=c(D),j=$.j(R);w($)&&($=m),F=F.add($),A=b(A,j)}return new N(F,A)}n.B=function(A){return O(this,A).h},n.and=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let M=0;M<R;M++)D[M]=this.i(M)&A.i(M);return new a(D,this.h&A.h)},n.or=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let M=0;M<R;M++)D[M]=this.i(M)|A.i(M);return new a(D,this.h|A.h)},n.xor=function(A){const R=Math.max(this.g.length,A.g.length),D=[];for(let M=0;M<R;M++)D[M]=this.i(M)^A.i(M);return new a(D,this.h^A.h)};function L(A){const R=A.g.length+1,D=[];for(let M=0;M<R;M++)D[M]=A.i(M)<<1|A.i(M-1)>>>31;return new a(D,A.h)}function U(A,R){const D=R>>5;R%=32;const M=A.g.length-D,F=[];for(let $=0;$<M;$++)F[$]=R>0?A.i($+D)>>>R|A.i($+D+1)<<32-R:A.i($+D);return new a(F,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,b2=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,go=a}).apply(typeof Px<"u"?Px:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E2,Ju,T2,Mf,fy,I2,S2,C2;(function(){var n,e=Object.defineProperty;function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var x=0;x<f.length;++x){var S=f[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=r(this);function s(f,x){if(x)e:{var S=i;f=f.split(".");for(var V=0;V<f.length-1;V++){var ie=f[V];if(!(ie in S))break e;S=S[ie]}f=f[f.length-1],V=S[f],x=x(V),x!=V&&x!=null&&e(S,f,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(x){var S=[],V;for(V in x)Object.prototype.hasOwnProperty.call(x,V)&&S.push([V,x[V]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function u(f,x,S){return f.call.apply(f.bind,arguments)}function c(f,x,S){return c=u,c.apply(null,arguments)}function d(f,x){var S=Array.prototype.slice.call(arguments,1);return function(){var V=S.slice();return V.push.apply(V,arguments),f.apply(this,V)}}function h(f,x){function S(){}S.prototype=x.prototype,f.Z=x.prototype,f.prototype=new S,f.prototype.constructor=f,f.Ob=function(V,ie,le){for(var xe=Array(arguments.length-2),He=2;He<arguments.length;He++)xe[He-2]=arguments[He];return x.prototype[ie].apply(V,xe)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function v(f){const x=f.length;if(x>0){const S=Array(x);for(let V=0;V<x;V++)S[V]=f[V];return S}return[]}function w(f,x){for(let V=1;V<arguments.length;V++){const ie=arguments[V];var S=typeof ie;if(S=S!="object"?S:ie?Array.isArray(ie)?"array":S:"null",S=="array"||S=="object"&&typeof ie.length=="number"){S=f.length||0;const le=ie.length||0;f.length=S+le;for(let xe=0;xe<le;xe++)f[S+xe]=ie[xe]}else f.push(ie)}}class I{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function C(f){a.setTimeout(()=>{throw f},0)}function b(){var f=A;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class T{constructor(){this.h=this.g=null}add(x,S){const V=N.get();V.set(x,S),this.h?this.h.next=V:this.g=V,this.h=V}}var N=new I(()=>new O,f=>f.reset());class O{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let L,U=!1,A=new T,R=()=>{const f=Promise.resolve(void 0);L=()=>{f.then(D)}};function D(){for(var f;f=b();){try{f.h.call(f.g)}catch(S){C(S)}var x=N;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}U=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};a.addEventListener("test",S,x),a.removeEventListener("test",S,x)}catch{}return f}();function j(f){return/^[\s\xa0]*$/.test(f)}function q(f,x){F.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}h(q,F),q.prototype.init=function(f,x){const S=this.type=f.type,V=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(S=="mouseover"?x=f.fromElement:S=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var W="closure_listenable_"+(Math.random()*1e6|0),Z=0;function de(f,x,S,V,ie){this.listener=f,this.proxy=null,this.src=x,this.type=S,this.capture=!!V,this.ha=ie,this.key=++Z,this.da=this.fa=!1}function ee(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ae(f,x,S){for(const V in f)x.call(S,f[V],V,f)}function he(f,x){for(const S in f)x.call(void 0,f[S],S,f)}function be(f){const x={};for(const S in f)x[S]=f[S];return x}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(f,x){let S,V;for(let ie=1;ie<arguments.length;ie++){V=arguments[ie];for(S in V)f[S]=V[S];for(let le=0;le<ce.length;le++)S=ce[le],Object.prototype.hasOwnProperty.call(V,S)&&(f[S]=V[S])}}function Pe(f){this.src=f,this.g={},this.h=0}Pe.prototype.add=function(f,x,S,V,ie){const le=f.toString();f=this.g[le],f||(f=this.g[le]=[],this.h++);const xe=Ye(f,x,V,ie);return xe>-1?(x=f[xe],S||(x.fa=!1)):(x=new de(x,this.src,le,!!V,ie),x.fa=S,f.push(x)),x};function Me(f,x){const S=x.type;if(S in f.g){var V=f.g[S],ie=Array.prototype.indexOf.call(V,x,void 0),le;(le=ie>=0)&&Array.prototype.splice.call(V,ie,1),le&&(ee(x),f.g[S].length==0&&(delete f.g[S],f.h--))}}function Ye(f,x,S,V){for(let ie=0;ie<f.length;++ie){const le=f[ie];if(!le.da&&le.listener==x&&le.capture==!!S&&le.ha==V)return ie}return-1}var We="closure_lm_"+(Math.random()*1e6|0),qt={};function Le(f,x,S,V,ie){if(Array.isArray(x)){for(let le=0;le<x.length;le++)Le(f,x[le],S,V,ie);return null}return S=Do(S),f&&f[W]?f.J(x,S,l(V)?!!V.capture:!1,ie):ci(f,x,S,!1,V,ie)}function ci(f,x,S,V,ie,le){if(!x)throw Error("Invalid event type");const xe=l(ie)?!!ie.capture:!!ie;let He=At(f);if(He||(f[We]=He=new Pe(f)),S=He.add(x,S,V,xe,le),S.proxy)return S;if(V=hi(),S.proxy=V,V.src=f,V.listener=S,f.addEventListener)$||(ie=xe),ie===void 0&&(ie=!1),f.addEventListener(x.toString(),V,ie);else if(f.attachEvent)f.attachEvent(Se(x.toString()),V);else if(f.addListener&&f.removeListener)f.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return S}function hi(){function f(S){return x.call(f.src,f.listener,S)}const x=Be;return f}function ot(f,x,S,V,ie){if(Array.isArray(x))for(var le=0;le<x.length;le++)ot(f,x[le],S,V,ie);else V=l(V)?!!V.capture:!!V,S=Do(S),f&&f[W]?(f=f.i,le=String(x).toString(),le in f.g&&(x=f.g[le],S=Ye(x,S,V,ie),S>-1&&(ee(x[S]),Array.prototype.splice.call(x,S,1),x.length==0&&(delete f.g[le],f.h--)))):f&&(f=At(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Ye(x,S,V,ie)),(S=f>-1?x[f]:null)&&jr(S))}function jr(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[W])Me(x.i,f);else{var S=f.type,V=f.proxy;x.removeEventListener?x.removeEventListener(S,V,f.capture):x.detachEvent?x.detachEvent(Se(S),V):x.addListener&&x.removeListener&&x.removeListener(V),(S=At(x))?(Me(S,f),S.h==0&&(S.src=null,x[We]=null)):ee(f)}}}function Se(f){return f in qt?qt[f]:qt[f]="on"+f}function Be(f,x){if(f.da)f=!0;else{x=new q(x,this);const S=f.listener,V=f.ha||f.src;f.fa&&jr(f),f=S.call(V,x)}return f}function At(f){return f=f[We],f instanceof Pe?f:null}var yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Do(f){return typeof f=="function"?f:(f[yn]||(f[yn]=function(x){return f.handleEvent(x)}),f[yn])}function Ht(){M.call(this),this.i=new Pe(this),this.M=this,this.G=null}h(Ht,M),Ht.prototype[W]=!0,Ht.prototype.removeEventListener=function(f,x,S,V){ot(this,f,x,S,V)};function Kt(f,x){var S,V=f.G;if(V)for(S=[];V;V=V.G)S.push(V);if(f=f.M,V=x.type||x,typeof x=="string")x=new F(x,f);else if(x instanceof F)x.target=x.target||f;else{var ie=x;x=new F(V,f),Ae(x,ie)}ie=!0;let le,xe;if(S)for(xe=S.length-1;xe>=0;xe--)le=x.g=S[xe],ie=vn(le,V,!0,x)&&ie;if(le=x.g=f,ie=vn(le,V,!0,x)&&ie,ie=vn(le,V,!1,x)&&ie,S)for(xe=0;xe<S.length;xe++)le=x.g=S[xe],ie=vn(le,V,!1,x)&&ie}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const S=f.g[x];for(let V=0;V<S.length;V++)ee(S[V]);delete f.g[x],f.h--}}this.G=null},Ht.prototype.J=function(f,x,S,V){return this.i.add(String(f),x,!1,S,V)},Ht.prototype.K=function(f,x,S,V){return this.i.add(String(f),x,!0,S,V)};function vn(f,x,S,V){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let ie=!0;for(let le=0;le<x.length;++le){const xe=x[le];if(xe&&!xe.da&&xe.capture==S){const He=xe.listener,Ut=xe.ha||xe.src;xe.fa&&Me(f.i,xe),ie=He.call(Ut,V)!==!1&&ie}}return ie&&!V.defaultPrevented}function pu(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:a.setTimeout(f,x||0)}function qi(f){f.g=pu(()=>{f.g=null,f.i&&(f.i=!1,qi(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class mu extends M{constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:qi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(f){M.call(this),this.h=f,this.g={}}h(_n,M);var Dt=[];function dr(f){ae(f.g,function(x,S){this.g.hasOwnProperty(S)&&jr(x)},f),f.g={}}_n.prototype.N=function(){_n.Z.N.call(this),dr(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hi=a.JSON.stringify,Mo=a.JSON.parse,gu=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Lo(){}function fi(){}var di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vo(){F.call(this,"d")}h(Vo,F);function pr(){F.call(this,"c")}h(pr,F);var Oe={},ks=null;function mr(){return ks=ks||new Ht}Oe.Ia="serverreachability";function Fo(f){F.call(this,Oe.Ia,f)}h(Fo,F);function Ie(f){const x=mr();Kt(x,new Fo(x))}Oe.STAT_EVENT="statevent";function $a(f,x){F.call(this,Oe.STAT_EVENT,f),this.stat=x}h($a,F);function on(f){const x=mr();Kt(x,new $a(x,f))}Oe.Ja="timingevent";function Ba(f,x){F.call(this,Oe.Ja,f),this.size=x}h(Ba,F);function As(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},x)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function Qp(f,x,S,V,ie,le){f.info(function(){if(f.g)if(le){var xe="",He=le.split("&");for(let ct=0;ct<He.length;ct++){var Ut=He[ct].split("=");if(Ut.length>1){const Nt=Ut[0];Ut=Ut[1];const vr=Nt.split("_");xe=vr.length>=2&&vr[1]=="type"?xe+(Nt+"="+Ut+"&"):xe+(Nt+"=redacted&")}}}else xe=null;else xe=le;return"XMLHTTP REQ ("+V+") [attempt "+ie+"]: "+x+`
`+S+`
`+xe})}function Yp(f,x,S,V,ie,le,xe){f.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ie+"]: "+x+`
`+S+`
`+le+" "+xe})}function Jn(f,x,S,V){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+yu(f,S)+(V?" "+V:"")})}function Ns(f,x){f.info(function(){return"TIMEOUT: "+x})}Ki.prototype.info=function(){};function yu(f,x){if(!f.g)return x;if(!x)return null;try{const le=JSON.parse(x);if(le){for(f=0;f<le.length;f++)if(Array.isArray(le[f])){var S=le[f];if(!(S.length<2)){var V=S[1];if(Array.isArray(V)&&!(V.length<1)){var ie=V[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let xe=1;xe<V.length;xe++)V[xe]=""}}}}return Hi(le)}catch{return x}}var Wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ft;function vu(){}h(vu,Lo),vu.prototype.g=function(){return new XMLHttpRequest},Ft=new vu;function pi(f){return encodeURIComponent(String(f))}function qa(f){var x=1;f=f.split(":");const S=[];for(;x>0&&f.length;)S.push(f.shift()),x--;return f.length&&S.push(f.join(":")),S}function Zn(f,x,S,V){this.j=f,this.i=x,this.l=S,this.S=V||1,this.V=new _n(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kh}function kh(){this.i=null,this.g="",this.h=!1}var Dr={},mi={};function gr(f,x,S){f.M=1,f.A=Ho(tr(x)),f.u=S,f.R=!0,Uo(f,null)}function Uo(f,x){f.F=Date.now(),yr(f),f.B=tr(f.A);var S=f.B,V=f.S;Array.isArray(V)||(V=[String(V)]),Oh(S.i,"t",V),f.C=0,S=f.j.L,f.h=new kh,f.g=Jt(f.j,S?x:null,!f.u),f.P>0&&(f.O=new mu(c(f.Y,f,f.g),f.P)),x=f.V,S=f.g,V=f.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(Dt[0]=ie.toString()),ie=Dt);for(let le=0;le<ie.length;le++){const xe=Le(S,ie[le],V||x.handleEvent,!1,x.h||x);if(!xe)break;x.g[xe.key]=xe}x=f.J?be(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),Ie(),Qp(f.i,f.v,f.B,f.l,f.S,f.u)}Zn.prototype.ba=function(f){f=f.target;const x=this.O;x&&wi(f)==3?x.j():this.Y(f)},Zn.prototype.Y=function(f){try{if(f==this.g)e:{const He=wi(this.g),Ut=this.g.ya(),ct=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||js(this.g)))){this.K||He!=4||Ut==7||(Ut==8||ct<=0?Ie(3):Ie(2)),zo(this);var x=this.g.ca();this.X=x;var S=Xp(this);if(this.o=x==200,Yp(this.i,this.v,this.B,this.l,this.S,He,x),this.o){if(this.U&&!this.L){t:{if(this.g){var V,ie=this.g;if((V=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(V)){var le=V;break t}}le=null}if(f=le)Jn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,er(this,f);else{this.o=!1,this.m=3,on(12),On(this),yt(this);break e}}if(this.R){f=!0;let Nt;for(;!this.K&&this.C<S.length;)if(Nt=Ah(this,S),Nt==mi){He==4&&(this.m=4,on(14),f=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==Dr){this.m=4,on(15),Jn(this.i,this.l,S,"[Invalid Chunk]"),f=!1;break}else Jn(this.i,this.l,Nt,null),er(this,Nt);if(Mr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||S.length!=0||this.h.h||(this.m=1,on(16),f=!1),this.o=this.o&&f,!f)Jn(this.i,this.l,S,"[Invalid Chunked Response]"),On(this),yt(this);else if(S.length>0&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.aa&&!xe.P&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Vs(xe),xe.P=!0,on(11))}}else Jn(this.i,this.l,S,null),er(this,S);He==4&&On(this),this.o&&!this.K&&(He==4?Ji(this.j,this):(this.o=!1,yr(this)))}else Jp(this.g),x==400&&S.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),On(this),yt(this)}}}catch{}finally{}};function Xp(f){if(!Mr(f))return f.g.la();const x=js(f.g);if(x==="")return"";let S="";const V=x.length,ie=wi(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return On(f),yt(f),"";f.h.i=new a.TextDecoder}for(let le=0;le<V;le++)f.h.h=!0,S+=f.h.i.decode(x[le],{stream:!(ie&&le==V-1)});return x.length=0,f.h.g+=S,f.C=0,f.h.g}function Mr(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Ah(f,x){var S=f.C,V=x.indexOf(`
`,S);return V==-1?mi:(S=Number(x.substring(S,V)),isNaN(S)?Dr:(V+=1,V+S>x.length?mi:(x=x.slice(V,V+S),f.C=V+S,x)))}Zn.prototype.cancel=function(){this.K=!0,On(this)};function yr(f){f.T=Date.now()+f.H,_u(f,f.H)}function _u(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=As(c(f.aa,f),x)}function zo(f){f.D&&(a.clearTimeout(f.D),f.D=null)}Zn.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ns(this.i,this.B),this.M!=2&&(Ie(),on(17)),On(this),this.m=2,yt(this)):_u(this,this.T-f)};function yt(f){f.j.I==0||f.K||Ji(f.j,f)}function On(f){zo(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,dr(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function er(f,x){try{var S=f.j;if(S.I!=0&&(S.g==f||Bo(S.h,f))){if(!f.L&&Bo(S.h,f)&&S.I==3){try{var V=S.Ba.g.parse(x)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ie=V;if(ie[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<f.F)Za(S),Ms(S);else break e;Ls(S),on(18)}}else S.xa=ie[1],0<S.xa-S.K&&ie[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=As(c(S.Va,S),6e3));Ha(S.h)<=1&&S.ta&&(S.ta=void 0)}else qr(S,11)}else if((f.L||S.g==f)&&Za(S),!j(x))for(ie=S.Ba.g.parse(x),x=0;x<ie.length;x++){let ct=ie[x];const Nt=ct[0];if(!(Nt<=S.K))if(S.K=Nt,ct=ct[1],S.I==2)if(ct[0]=="c"){S.M=ct[1],S.ba=ct[2];const vr=ct[3];vr!=null&&(S.ka=vr,S.j.info("VER="+S.ka));const Hr=ct[4];Hr!=null&&(S.za=Hr,S.j.info("SVER="+S.za));const _r=ct[5];_r!=null&&typeof _r=="number"&&_r>0&&(V=1.5*_r,S.O=V,S.j.info("backChannelRequestTimeoutMs_="+V)),V=S;const bi=f.g;if(bi){const Jo=bi.g?bi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var le=V.h;le.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(Lr(le,le.h),le.h=null))}if(V.G){const Nu=bi.g?bi.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(V.wa=Nu,pt(V.J,V.G,Nu))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-f.F,S.j.info("Handshake RTT: "+S.T+"ms")),V=S;var xe=f;if(V.na=nl(V,V.L?V.ba:null,V.W),xe.L){wu(V.h,xe);var He=xe,Ut=V.O;Ut&&(He.H=Ut),He.D&&(zo(He),yr(He)),V.g=xe}else Yo(V);S.i.length>0&&Xa(S)}else ct[0]!="stop"&&ct[0]!="close"||qr(S,7);else S.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?qr(S,7):Ds(S):ct[0]!="noop"&&S.l&&S.l.qa(ct),S.A=0)}}Ie(4)}catch{}}var Nh=class{constructor(f,x){this.g=f,this.map=x}};function Gi(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ha(f){return f.h?1:f.g?f.g.size:0}function Bo(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Lr(f,x){f.g?f.g.add(x):f.h=x}function wu(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Gi.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function qo(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const S of f.g.values())x=x.concat(S.G);return x}return v(f.i)}var xu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(f,x){if(f){f=f.split("&");for(let S=0;S<f.length;S++){const V=f[S].indexOf("=");let ie,le=null;V>=0?(ie=f[S].substring(0,V),le=f[S].substring(V+1)):ie=f[S],x(ie,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Vr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof Vr?(this.l=f.l,gi(this,f.j),this.o=f.o,this.g=f.g,Fr(this,f.u),this.h=f.h,Ka(this,jh(f.i)),this.m=f.m):f&&(x=String(f).match(xu))?(this.l=!1,gi(this,x[1]||"",!0),this.o=ut(x[2]||""),this.g=ut(x[3]||"",!0),Fr(this,x[4]),this.h=ut(x[5]||"",!0),Ka(this,x[6]||"",!0),this.m=ut(x[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}Vr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Ur(x,Qi,!0),":");var S=this.g;return(S||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Ur(x,Qi,!0),"@"),f.push(pi(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&f.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Ur(S,S.charAt(0)=="/"?Eu:bu,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Ur(S,Rh)),f.join("")},Vr.prototype.resolve=function(f){const x=tr(this);let S=!!f.j;S?gi(x,f.j):S=!!f.o,S?x.o=f.o:S=!!f.g,S?x.g=f.g:S=f.u!=null;var V=f.h;if(S)Fr(x,f.u);else if(S=!!f.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var ie=x.h.lastIndexOf("/");ie!=-1&&(V=x.h.slice(0,ie+1)+V)}if(ie=V,ie==".."||ie==".")V="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){V=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const le=[];for(let xe=0;xe<ie.length;){const He=ie[xe++];He=="."?V&&xe==ie.length&&le.push(""):He==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),V&&xe==ie.length&&le.push("")):(le.push(He),V=!0)}V=le.join("/")}else V=ie}return S?x.h=V:S=f.i.toString()!=="",S?Ka(x,jh(f.i)):S=!!f.m,S&&(x.m=f.m),x};function tr(f){return new Vr(f)}function gi(f,x,S){f.j=S?ut(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Fr(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Ka(f,x,S){x instanceof yi?(f.i=x,Rs(f.i,f.l)):(S||(x=Ur(x,Wa)),f.i=new yi(x,f.l))}function pt(f,x,S){f.i.set(x,S)}function Ho(f){return pt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ut(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ur(f,x,S){return typeof f=="string"?(f=encodeURI(f).replace(x,Ko),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ko(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Qi=/[#\/\?@]/g,bu=/[#\?:]/g,Eu=/[#\?]/g,Wa=/[#\?@]/g,Rh=/#/g;function yi(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function vi(f){f.g||(f.g=new Map,f.h=0,f.i&&Je(f.i,function(x,S){f.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}n=yi.prototype,n.add=function(f,x){vi(this),this.i=null,f=Wt(this,f);let S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(x),this.h+=1,this};function Ph(f,x){vi(f),x=Wt(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function it(f,x){return vi(f),x=Wt(f,x),f.g.has(x)}n.forEach=function(f,x){vi(this),this.g.forEach(function(S,V){S.forEach(function(ie){f.call(x,ie,V,this)},this)},this)};function Tu(f,x){vi(f);let S=[];if(typeof x=="string")it(f,x)&&(S=S.concat(f.g.get(Wt(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)S=S.concat(f[x]);return S}n.set=function(f,x){return vi(this),this.i=null,f=Wt(this,f),it(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=Tu(this,f),f.length>0?String(f[0]):x):x};function Oh(f,x,S){Ph(f,x),S.length>0&&(f.i=null,f.g.set(Wt(f,x),v(S)),f.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let V=0;V<x.length;V++){var S=x[V];const ie=pi(S);S=Tu(this,S);for(let le=0;le<S.length;le++){let xe=ie;S[le]!==""&&(xe+="="+pi(S[le])),f.push(xe)}}return this.i=f.join("&")};function jh(f){const x=new yi;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Wt(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Rs(f,x){x&&!f.j&&(vi(f),f.i=null,f.g.forEach(function(S,V){const ie=V.toLowerCase();V!=ie&&(Ph(this,V),Oh(this,ie,S))},f)),f.j=x}function Ga(f,x){const S=new Ki;if(a.Image){const V=new Image;V.onload=d(zr,S,"TestLoadImage: loaded",!0,x,V),V.onerror=d(zr,S,"TestLoadImage: error",!1,x,V),V.onabort=d(zr,S,"TestLoadImage: abort",!1,x,V),V.ontimeout=d(zr,S,"TestLoadImage: timeout",!1,x,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=f}else x(!1)}function _i(f,x){const S=new Ki,V=new AbortController,ie=setTimeout(()=>{V.abort(),zr(S,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:V.signal}).then(le=>{clearTimeout(ie),le.ok?zr(S,"TestPingServer: ok",!0,x):zr(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ie),zr(S,"TestPingServer: error",!1,x)})}function zr(f,x,S,V,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),V(S)}catch{}}function Dh(){this.g=new gu}function Mt(f){this.i=f.Sb||null,this.h=f.ab||!1}h(Mt,Lo),Mt.prototype.g=function(){return new jn(this.i,this.h)};function jn(f,x){Ht.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(jn,Ht),n=jn.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,Yi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||a).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$r(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ps(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ps(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?$r(this):Yi(this),this.readyState==3&&Ps(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,$r(this))},n.Na=function(f){this.g&&(this.response=f,$r(this))},n.ga=function(){this.g&&$r(this)};function $r(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Yi(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=x.next();return f.join(`\r
`)};function Yi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Br(f){let x="";return ae(f,function(S,V){x+=V,x+=":",x+=S,x+=`\r
`}),x}function Iu(f,x,S){e:{for(V in S){var V=!1;break e}V=!0}V||(S=Br(S),typeof f=="string"?S!=null&&pi(S):pt(f,x,S))}function at(f){Ht.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(at,Ht);var Su=/^https?$/i,Mh=["POST","PUT"];n=at.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,S,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ft.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(le){Qa(this,le);return}if(f=S||"",S=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ie in V)S.set(ie,V[ie]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const le of V.keys())S.set(le,V.get(le));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(S.keys()).find(le=>le.toLowerCase()=="content-type"),ie=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Mh,x,void 0)>=0)||V||ie||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,xe]of S)this.g.setRequestHeader(le,xe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(le){Qa(this,le)}};function Qa(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Os(f),Wo(f)}function Os(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Kt(this,"complete"),Kt(this,"abort"),Wo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wo(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ya(this):this.Xa())},n.Xa=function(){Ya(this)};function Ya(f){if(f.h&&typeof o<"u"){if(f.v&&wi(f)==4)setTimeout(f.Ca.bind(f),0);else if(Kt(f,"readystatechange"),wi(f)==4){f.h=!1;try{const le=f.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var V;if(V=le===0){let xe=String(f.D).match(xu)[1]||null;!xe&&a.self&&a.self.location&&(xe=a.self.location.protocol.slice(0,-1)),V=!Su.test(xe?xe.toLowerCase():"")}S=V}if(S)Kt(f,"complete"),Kt(f,"success");else{f.o=6;try{var ie=wi(f)>2?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.ca()+"]",Os(f)}}finally{Wo(f)}}}}function Wo(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const S=f.g;f.g=null,x||Kt(f,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function wi(f){return f.g?f.g.readyState:0}n.ca=function(){try{return wi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Mo(x)}};function js(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Jp(f){const x={};f=(f.g&&wi(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<f.length;V++){if(j(f[V]))continue;var S=qa(f[V]);const ie=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const le=x[ie]||[];x[ie]=le,le.push(S)}he(x,function(V){return V.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Go(f,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||x}function Qo(f){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Go("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Go("baseRetryDelayMs",5e3,f),this.Za=Go("retryDelaySeedMs",1e4,f),this.Ta=Go("forwardChannelMaxRetries",2,f),this.va=Go("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Gi(f&&f.concurrentRequestLimit),this.Ba=new Dh,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Qo.prototype,n.ka=8,n.I=1,n.connect=function(f,x,S,V){on(0),this.W=f,this.H=x||{},S&&V!==void 0&&(this.H.OSID=S,this.H.OAID=V),this.F=this.X,this.J=nl(this,null,this.W),Xa(this)};function Ds(f){if(Lh(f),f.I==3){var x=f.V++,S=tr(f.J);if(pt(S,"SID",f.M),pt(S,"RID",x),pt(S,"TYPE","terminate"),Xi(f,S),x=new Zn(f,f.j,x),x.M=2,x.A=Ho(tr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(x.A.toString(),"")}catch{}!S&&a.Image&&(new Image().src=x.A,S=!0),S||(x.g=Jt(x.j,null),x.g.ea(x.A)),x.F=Date.now(),yr(x)}tl(f)}function Ms(f){f.g&&(Vs(f),f.g.cancel(),f.g=null)}function Lh(f){Ms(f),f.v&&(a.clearTimeout(f.v),f.v=null),Za(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Xa(f){if(!$o(f.h)&&!f.m){f.m=!0;var x=f.Ea;L||R(),U||(L(),U=!0),A.add(x,f),f.D=0}}function Zp(f,x){return Ha(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=As(c(f.Ea,f,x),el(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const ie=new Zn(this,this.j,f);let le=this.o;if(this.U&&(le?(le=be(le),Ae(le,this.U)):le=this.U),this.u!==null||this.R||(ie.J=le,le=null),this.S)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var V=this.i[S];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(x+=V,x>4096){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=Cu(this,ie,x),S=tr(this.J),pt(S,"RID",f),pt(S,"CVER",22),this.G&&pt(S,"X-HTTP-Session-Id",this.G),Xi(this,S),le&&(this.R?x="headers="+pi(Br(le))+"&"+x:this.u&&Iu(S,this.u,le)),Lr(this.h,ie),this.Ra&&pt(S,"TYPE","init"),this.S?(pt(S,"$req",x),pt(S,"SID","null"),ie.U=!0,gr(ie,S,null)):gr(ie,S,x),this.I=2}}else this.I==3&&(f?Ja(this,f):this.i.length==0||$o(this.h)||Ja(this))};function Ja(f,x){var S;x?S=x.l:S=f.V++;const V=tr(f.J);pt(V,"SID",f.M),pt(V,"RID",S),pt(V,"AID",f.K),Xi(f,V),f.u&&f.o&&Iu(V,f.u,f.o),S=new Zn(f,f.j,S,f.D+1),f.u===null&&(S.J=f.o),x&&(f.i=x.G.concat(f.i)),x=Cu(f,S,1e3),S.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Lr(f.h,S),gr(S,V,x)}function Xi(f,x){f.H&&ae(f.H,function(S,V){pt(x,V,S)}),f.l&&ae({},function(S,V){pt(x,V,S)})}function Cu(f,x,S){S=Math.min(f.i.length,S);const V=f.l?c(f.l.Ka,f.l,f):null;e:{var ie=f.i;let He=-1;for(;;){const Ut=["count="+S];He==-1?S>0?(He=ie[0].g,Ut.push("ofs="+He)):He=0:Ut.push("ofs="+He);let ct=!0;for(let Nt=0;Nt<S;Nt++){var le=ie[Nt].g;const vr=ie[Nt].map;if(le-=He,le<0)He=Math.max(0,ie[Nt].g-100),ct=!1;else try{le="req"+le+"_"||"";try{var xe=vr instanceof Map?vr:Object.entries(vr);for(const[Hr,_r]of xe){let bi=_r;l(_r)&&(bi=Hi(_r)),Ut.push(le+Hr+"="+encodeURIComponent(bi))}}catch(Hr){throw Ut.push(le+"type="+encodeURIComponent("_badmap")),Hr}}catch{V&&V(vr)}}if(ct){xe=Ut.join("&");break e}}xe=void 0}return f=f.i.splice(0,S),x.G=f,xe}function Yo(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;L||R(),U||(L(),U=!0),A.add(x,f),f.A=0}}function Ls(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=As(c(f.Da,f),el(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=As(c(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),Ms(this),ku(this))};function Vs(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function ku(f){f.g=new Zn(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=tr(f.na);pt(x,"RID","rpc"),pt(x,"SID",f.M),pt(x,"AID",f.K),pt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&pt(x,"TO",f.ia),pt(x,"TYPE","xmlhttp"),Xi(f,x),f.u&&f.o&&Iu(x,f.u,f.o),f.O&&(f.g.H=f.O);var S=f.g;f=f.ba,S.M=1,S.A=Ho(tr(x)),S.u=null,S.R=!0,Uo(S,f)}n.Va=function(){this.C!=null&&(this.C=null,Ms(this),Ls(this),on(19))};function Za(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Ji(f,x){var S=null;if(f.g==x){Za(f),Vs(f),f.g=null;var V=2}else if(Bo(f.h,x))S=x.G,wu(f.h,x),V=1;else return;if(f.I!=0){if(x.o)if(V==1){S=x.u?x.u.length:0,x=Date.now()-x.F;var ie=f.D;V=mr(),Kt(V,new Ba(V,S)),Xa(f)}else Yo(f);else if(ie=x.m,ie==3||ie==0&&x.X>0||!(V==1&&Zp(f,x)||V==2&&Ls(f)))switch(S&&S.length>0&&(x=f.h,x.i=x.i.concat(S)),ie){case 1:qr(f,5);break;case 4:qr(f,10);break;case 3:qr(f,6);break;default:qr(f,2)}}}function el(f,x){let S=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(S*=2),S*x}function qr(f,x){if(f.j.info("Error code "+x),x==2){var S=c(f.bb,f),V=f.Ua;const ie=!V;V=new Vr(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gi(V,"https"),Ho(V),ie?Ga(V.toString(),S):_i(V.toString(),S)}else on(2);f.I=0,f.l&&f.l.pa(x),tl(f),Lh(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function tl(f){if(f.I=0,f.ja=[],f.l){const x=qo(f.h);(x.length!=0||f.i.length!=0)&&(w(f.ja,x),w(f.ja,f.i),f.h.i.length=0,v(f.i),f.i.length=0),f.l.oa()}}function nl(f,x,S){var V=S instanceof Vr?tr(S):new Vr(S);if(V.g!="")x&&(V.g=x+"."+V.g),Fr(V,V.u);else{var ie=a.location;V=ie.protocol,x=x?x+"."+ie.hostname:ie.hostname,ie=+ie.port;const le=new Vr(null);V&&gi(le,V),x&&(le.g=x),ie&&Fr(le,ie),S&&(le.h=S),V=le}return S=f.G,x=f.wa,S&&x&&pt(V,S,x),pt(V,"VER",f.ka),Xi(f,V),V}function Jt(f,x,S){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new at(new Mt({ab:S})):new at(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fs(){}n=Fs.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function xi(){}xi.prototype.g=function(f,x){return new wn(f,x)};function wn(f,x){Ht.call(this),this.g=new Qo(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!j(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!j(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Zi(this)}h(wn,Ht),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Ds(this.g)},wn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.v&&(S={},S.__data__=Hi(f),f=S);x.i.push(new Nh(x.Ya++,f)),x.I==3&&Xa(x)},wn.prototype.N=function(){this.g.l=null,delete this.j,Ds(this.g),delete this.g,wn.Z.N.call(this)};function Xo(f){Vo.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const S in x){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}h(Xo,Vo);function Au(){pr.call(this),this.status=1}h(Au,pr);function Zi(f){this.g=f}h(Zi,Fs),Zi.prototype.ra=function(){Kt(this.g,"a")},Zi.prototype.qa=function(f){Kt(this.g,new Xo(f))},Zi.prototype.pa=function(f){Kt(this.g,new Au)},Zi.prototype.oa=function(){Kt(this.g,"b")},xi.prototype.createWebChannel=xi.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,C2=function(){return new xi},S2=function(){return mr()},I2=Oe,fy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Mf=Wi,gt.COMPLETE="complete",T2=gt,fi.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Ju=fi,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,E2=at}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu="12.8.0";function $D(n){cu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new _p("@firebase/firestore");function ll(){return Aa.logLevel}function Ne(n,...e){if(Aa.logLevel<=tt.DEBUG){const r=e.map(l0);Aa.debug(`Firestore (${cu}): ${n}`,...r)}}function Ts(n,...e){if(Aa.logLevel<=tt.ERROR){const r=e.map(l0);Aa.error(`Firestore (${cu}): ${n}`,...r)}}function Ql(n,...e){if(Aa.logLevel<=tt.WARN){const r=e.map(l0);Aa.warn(`Firestore (${cu}): ${n}`,...r)}}function l0(n){if(typeof n=="string")return n;try{return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,k2(n,i,r)}function k2(n,e,r){let i=`FIRESTORE (${cu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw Ts(i),new Error(i)}function ft(n,e,r,i){let s="Unexpected state";typeof r=="string"?s=r:i=r,n||k2(e,s,i)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends li{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Cn.UNAUTHENTICATED))}shutdown(){}}class qD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class HD{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ft(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ft(typeof i.accessToken=="string",31837,{l:i}),new A2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class KD{constructor(e,r,i){this.P=e,this.T=r,this.I=i,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class WD{constructor(e,r,i){this.P=e,this.T=r,this.I=i}getToken(){return Promise.resolve(new KD(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ox{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GD{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){ft(this.o===void 0,3512);const i=o=>{o.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Ne("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ox(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ft(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Ox(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<n;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=QD(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function nt(n,e){return n<e?-1:n>e?1:0}function dy(n,e){const r=Math.min(n.length,e.length);for(let i=0;i<r;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return Vm(s)===Vm(o)?nt(s,o):Vm(s)?1:-1}return nt(n.length,e.length)}const YD=55296,XD=57343;function Vm(n){const e=n.charCodeAt(0);return e>=YD&&e<=XD}function Yl(n,e,r){return n.length===e.length&&n.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__name__";class Ci{constructor(e,r,i){r===void 0?r=0:r>e.length&&Ue(637,{offset:r,range:e.length}),i===void 0?i=e.length-r:i>e.length-r&&Ue(1746,{length:i,range:e.length-r}),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Ci.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return nt(e.length,r.length)}static compareSegments(e,r){const i=Ci.isNumericId(e),s=Ci.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Ci.extractNumericId(e).compare(Ci.extractNumericId(r)):dy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return go.fromString(e.substring(4,e.length-2))}}class Et extends Ci{construct(e,r,i){return new Et(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new De(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new Et(r)}static emptyPath(){return new Et([])}}const JD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Ci{construct(e,r,i){return new fn(e,r,i)}static isValidIdentifier(e){return JD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jx}static keyField(){return new fn([jx])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new De(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new De(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new De(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new De(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(r)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Et.fromString(e))}static fromName(e){return new Fe(Et.fromString(e).popFirst(5))}static empty(){return new Fe(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Et.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n,e,r){if(!r)throw new De(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZD(n,e,r,i){if(e===!0&&i===!0)throw new De(ge.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function Dx(n){if(!Fe.isDocumentKey(n))throw new De(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mx(n){if(Fe.isDocumentKey(n))throw new De(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function R2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function c0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue(12329,{type:typeof n})}function xo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=c0(n);throw new De(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n,e){const r={typeString:n};return e&&(r.value=e),r}function vh(n,e){if(!R2(n))throw new De(ge.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){r=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){r=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${i}' field to equal '${o.value}'`;break}}if(r)throw new De(ge.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=-62135596800,Vx=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Vx);return new Tt(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new De(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new De(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Lx)throw new De(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vx}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vh(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Yt("string",Tt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Tt(0,0))}static max(){return new $e(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function eM(n,e){const r=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(i===1e9?new Tt(r+1,0):new Tt(r,i));return new bo(s,Fe.empty(),e)}function tM(n){return new bo(n.readTime,n.key,Gc)}class bo{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new bo($e.min(),Fe.empty(),Gc)}static max(){return new bo($e.max(),Fe.empty(),Gc)}}function nM(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(n.documentKey,e.documentKey),r!==0?r:nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==rM)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new me((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof me?r:me.resolve(r)}catch(r){return me.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):me.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):me.reject(r)}static resolve(e){return new me((r,i)=>{r(e)})}static reject(e){return new me((r,i)=>{i(e)})}static waitFor(e){return new me((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=me.resolve(!1);for(const i of e)r=r.next(s=>s?me.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new me((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(d=>{a[c]=d,++l,l===o&&i(a)},d=>s(d))}})}static doWhile(e,r){return new me((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function sM(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function fu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ep.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=-1;function Tp(n){return n==null}function Sd(n){return n===0&&1/n==-1/0}function oM(n){return typeof n=="number"&&Number.isInteger(n)&&!Sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="";function aM(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e=Fx(e)),e=lM(n.get(r),e);return Fx(e)}function lM(n,e){let r=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":r+="";break;case P2:r+="";break;default:r+=o}}return r}function Fx(n){return n+P2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(n){let e=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function Po(n,e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function O2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r){this.comparator=e,this.root=r||hn.EMPTY}insert(e,r){return new jt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??hn.RED,this.left=s??hn.EMPTY,this.right=o??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new hn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return hn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,r,i,s,o){return this}insert(e,r,i){return new hn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new zx(this.data.getIterator())}getIteratorFrom(e){return new zx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new sn(this.comparator);return r.data=e,r}}class zx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new or([])}unionWith(e){let r=new sn(fn.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new or(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new j2("Invalid base64 string: "+o):o}}(e);return new mn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new mn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const uM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const r=uM.exec(n);if(ft(!!r,46558,{timestamp:n}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$t(n.seconds),nanos:$t(n.nanos)}}function $t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function To(n){return typeof n=="string"?mn.fromBase64String(n):mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="server_timestamp",M2="__type__",L2="__previous_value__",V2="__local_write_time__";function f0(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[M2])==null?void 0:i.stringValue)===D2}function Ip(n){const e=n.mapValue.fields[L2];return f0(e)?Ip(e):e}function Qc(n){const e=Eo(n.mapValue.fields[V2].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,r,i,s,o,a,l,u,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=h}}const Cd="(default)";class Yc{constructor(e,r){this.projectId=e,this.database=r||Cd}static empty(){return new Yc("","")}get isDefaultDatabase(){return this.database===Cd}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}function hM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new De(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="__type__",fM="__max__",lf={mapValue:{}},U2="__vector__",kd="value";function Io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?f0(n)?4:pM(n)?9007199254740991:dM(n)?10:11:Ue(28295,{value:n})}function Ui(n,e){if(n===e)return!0;const r=Io(n);if(r!==Io(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Eo(s.timestampValue),l=Eo(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return To(s.bytesValue).isEqual(To(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return $t(s.geoPointValue.latitude)===$t(o.geoPointValue.latitude)&&$t(s.geoPointValue.longitude)===$t(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return $t(s.integerValue)===$t(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=$t(s.doubleValue),l=$t(o.doubleValue);return a===l?Sd(a)===Sd(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Ux(a)!==Ux(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Ui(a[u],l[u])))return!1;return!0}(n,e);default:return Ue(52216,{left:n})}}function Xc(n,e){return(n.values||[]).find(r=>Ui(r,e))!==void 0}function Xl(n,e){if(n===e)return 0;const r=Io(n),i=Io(e);if(r!==i)return nt(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return function(o,a){const l=$t(o.integerValue||o.doubleValue),u=$t(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return $x(n.timestampValue,e.timestampValue);case 4:return $x(Qc(n),Qc(e));case 5:return dy(n.stringValue,e.stringValue);case 6:return function(o,a){const l=To(o),u=To(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=nt(l[c],u[c]);if(d!==0)return d}return nt(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const l=nt($t(o.latitude),$t(a.latitude));return l!==0?l:nt($t(o.longitude),$t(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Bx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var m,v,w,I;const l=o.fields||{},u=a.fields||{},c=(m=l[kd])==null?void 0:m.arrayValue,d=(v=u[kd])==null?void 0:v.arrayValue,h=nt(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((I=d==null?void 0:d.values)==null?void 0:I.length)||0);return h!==0?h:Bx(c,d)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===lf.mapValue&&a===lf.mapValue)return 0;if(o===lf.mapValue)return 1;if(a===lf.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const m=dy(u[h],d[h]);if(m!==0)return m;const v=Xl(l[u[h]],c[d[h]]);if(v!==0)return v}return nt(u.length,d.length)}(n.mapValue,e.mapValue);default:throw Ue(23264,{he:r})}}function $x(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nt(n,e);const r=Eo(n),i=Eo(e),s=nt(r.seconds,i.seconds);return s!==0?s:nt(r.nanos,i.nanos)}function Bx(n,e){const r=n.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=Xl(r[s],i[s]);if(o)return o}return nt(r.length,i.length)}function Jl(n){return py(n)}function py(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Eo(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return To(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return Fe.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=py(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${py(r.fields[a])}`;return s+"}"}(n.mapValue):Ue(61005,{value:n})}function Lf(n){switch(Io(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ip(n);return e?16+Lf(e):16;case 5:return 2*n.stringValue.length;case 6:return To(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Lf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Po(i.fields,(o,a)=>{s+=o.length+Lf(a)}),s}(n.mapValue);default:throw Ue(13486,{value:n})}}function my(n){return!!n&&"integerValue"in n}function d0(n){return!!n&&"arrayValue"in n}function qx(n){return!!n&&"nullValue"in n}function Hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vf(n){return!!n&&"mapValue"in n}function dM(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[F2])==null?void 0:i.stringValue)===U2}function vc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Po(n.mapValue.fields,(r,i)=>e.mapValue.fields[r]=vc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=vc(n.arrayValue.values[r]);return e}return{...n}}function pM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Vf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(r)}setAll(e){let r=fn.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=vc(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());Vf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Po(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Hn(vc(this.value))}}function z2(n){const e=[];return Po(n.fields,(r,i)=>{const s=new fn([r]);if(Vf(i)){const o=z2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new An(e,0,$e.min(),$e.min(),$e.min(),Hn.empty(),0)}static newFoundDocument(e,r,i,s){return new An(e,1,r,$e.min(),i,s,0)}static newNoDocument(e,r){return new An(e,2,r,$e.min(),$e.min(),Hn.empty(),0)}static newUnknownDocument(e,r){return new An(e,3,r,$e.min(),$e.min(),Hn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,r){this.position=e,this.inclusive=r}}function Kx(n,e,r){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?i=Fe.comparator(Fe.fromName(a.referenceValue),r.key):i=Xl(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Wx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Ui(n.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,r="asc"){this.field=e,this.dir=r}}function mM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{}class en extends $2{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new yM(e,r,i):r==="array-contains"?new wM(e,i):r==="in"?new xM(e,i):r==="not-in"?new bM(e,i):r==="array-contains-any"?new EM(e,i):new en(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new vM(e,i):new _M(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Xl(r,this.value)):r!==null&&Io(this.value)===Io(r)&&this.matchesComparison(Xl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends $2{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new zi(e,r)}matches(e){return B2(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B2(n){return n.op==="and"}function q2(n){return gM(n)&&B2(n)}function gM(n){for(const e of n.filters)if(e instanceof zi)return!1;return!0}function gy(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+Jl(n.value);if(q2(n))return n.filters.map(e=>gy(e)).join(",");{const e=n.filters.map(r=>gy(r)).join(",");return`${n.op}(${e})`}}function H2(n,e){return n instanceof en?function(i,s){return s instanceof en&&i.op===s.op&&i.field.isEqual(s.field)&&Ui(i.value,s.value)}(n,e):n instanceof zi?function(i,s){return s instanceof zi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&H2(a,s.filters[l]),!0):!1}(n,e):void Ue(19439)}function K2(n){return n instanceof en?function(r){return`${r.field.canonicalString()} ${r.op} ${Jl(r.value)}`}(n):n instanceof zi?function(r){return r.op.toString()+" {"+r.getFilters().map(K2).join(" ,")+"}"}(n):"Filter"}class yM extends en{constructor(e,r,i){super(e,r,i),this.key=Fe.fromName(i.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class vM extends en{constructor(e,r){super(e,"in",r),this.keys=W2("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class _M extends en{constructor(e,r){super(e,"not-in",r),this.keys=W2("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function W2(n,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(i=>Fe.fromName(i.referenceValue))}class wM extends en{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return d0(r)&&Xc(r.arrayValue,this.value)}}class xM extends en{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Xc(this.value.arrayValue,r)}}class bM extends en{constructor(e,r){super(e,"not-in",r)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Xc(this.value.arrayValue,r)}}class EM extends en{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!d0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Xc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function Gx(n,e=null,r=[],i=[],s=null,o=null,a=null){return new TM(n,e,r,i,s,o,a)}function p0(n){const e=qe(n);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>gy(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Tp(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Jl(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Jl(i)).join(",")),e.Te=r}return e.Te}function m0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!mM(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!H2(n.filters[r],e.filters[r]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wx(n.startAt,e.startAt)&&Wx(n.endAt,e.endAt)}function yy(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function IM(n,e,r,i,s,o,a,l){return new Sp(n,e,r,i,s,o,a,l)}function g0(n){return new Sp(n)}function Qx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function SM(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function CM(n){return n.collectionGroup!==null}function _c(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new sn(fn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Nd(o,i))}),r.has(fn.keyField().canonicalString())||e.Ie.push(new Nd(fn.keyField(),i))}return e.Ie}function ji(n){const e=qe(n);return e.Ee||(e.Ee=kM(e,_c(n))),e.Ee}function kM(n,e){if(n.limitType==="F")return Gx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Nd(s.field,o)});const r=n.endAt?new Ad(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ad(n.startAt.position,n.startAt.inclusive):null;return Gx(n.path,n.collectionGroup,e,n.filters,n.limit,r,i)}}function vy(n,e,r){return new Sp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function Cp(n,e){return m0(ji(n),ji(e))&&n.limitType===e.limitType}function G2(n){return`${p0(ji(n))}|lt:${n.limitType}`}function ul(n){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>K2(s)).join(", ")}]`),Tp(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>Jl(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>Jl(s)).join(",")),`Target(${i})`}(ji(n))}; limitType=${n.limitType})`}function kp(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Fe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of _c(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Kx(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,_c(i),s)||i.endAt&&!function(a,l,u){const c=Kx(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,_c(i),s))}(n,e)}function AM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Q2(n){return(e,r)=>{let i=!1;for(const s of _c(n)){const o=NM(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function NM(n,e,r){const i=n.field.isKeyField()?Fe.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Xl(u,c):Ue(42886)}(n.field,e,r);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ue(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return O2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=new jt(Fe.comparator);function Is(){return RM}const Y2=new jt(Fe.comparator);function Zu(...n){let e=Y2;for(const r of n)e=e.insert(r.key,r);return e}function X2(n){let e=Y2;return n.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function ha(){return wc()}function J2(){return wc()}function wc(){return new Ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const PM=new jt(Fe.comparator),OM=new sn(Fe.comparator);function rt(...n){let e=OM;for(const r of n)e=e.add(r);return e}const jM=new sn(nt);function DM(){return jM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function Z2(n){return{integerValue:""+n}}function MM(n,e){return oM(e)?Z2(e):y0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this._=void 0}}function LM(n,e,r){return n instanceof Rd?function(s,o){const a={fields:{[M2]:{stringValue:D2},[V2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&f0(o)&&(o=Ip(o)),o&&(a.fields[L2]=o),{mapValue:a}}(r,e):n instanceof Jc?tS(n,e):n instanceof Zc?nS(n,e):function(s,o){const a=eS(s,o),l=Yx(a)+Yx(s.Ae);return my(a)&&my(s.Ae)?Z2(l):y0(s.serializer,l)}(n,e)}function VM(n,e,r){return n instanceof Jc?tS(n,e):n instanceof Zc?nS(n,e):r}function eS(n,e){return n instanceof Pd?function(i){return my(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Rd extends Ap{}class Jc extends Ap{constructor(e){super(),this.elements=e}}function tS(n,e){const r=rS(e);for(const i of n.elements)r.some(s=>Ui(s,i))||r.push(i);return{arrayValue:{values:r}}}class Zc extends Ap{constructor(e){super(),this.elements=e}}function nS(n,e){let r=rS(e);for(const i of n.elements)r=r.filter(s=>!Ui(s,i));return{arrayValue:{values:r}}}class Pd extends Ap{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Yx(n){return $t(n.integerValue||n.doubleValue)}function rS(n){return d0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function FM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Jc&&s instanceof Jc||i instanceof Zc&&s instanceof Zc?Yl(i.elements,s.elements,Ui):i instanceof Pd&&s instanceof Pd?Ui(i.Ae,s.Ae):i instanceof Rd&&s instanceof Rd}(n.transform,e.transform)}class UM{constructor(e,r){this.version=e,this.transformResults=r}}class Rr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ff(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Np{}function iS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new v0(n.key,Rr.none()):new _h(n.key,n.data,Rr.none());{const r=n.data,i=Hn.empty();let s=new sn(fn.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Oo(n.key,i,new or(s.toArray()),Rr.none())}}function zM(n,e,r){n instanceof _h?function(s,o,a){const l=s.value.clone(),u=Jx(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,r):n instanceof Oo?function(s,o,a){if(!Ff(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Jx(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(sS(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function xc(n,e,r,i){return n instanceof _h?function(o,a,l,u){if(!Ff(o.precondition,a))return l;const c=o.value.clone(),d=Zx(o.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,r,i):n instanceof Oo?function(o,a,l,u){if(!Ff(o.precondition,a))return l;const c=Zx(o.fieldTransforms,u,a),d=a.data;return d.setAll(sS(o)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,r,i):function(o,a,l){return Ff(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,r)}function $M(n,e){let r=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=eS(i.transform,s||null);o!=null&&(r===null&&(r=Hn.empty()),r.set(i.field,o))}return r||null}function Xx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Yl(i,s,(o,a)=>FM(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _h extends Np{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oo extends Np{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function sS(n){const e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=n.data.field(r);e.set(r,i)}}),e}function Jx(n,e,r){const i=new Map;ft(n.length===r.length,32656,{Ve:r.length,de:n.length});for(let s=0;s<r.length;s++){const o=n[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,VM(a,l,r[s]))}return i}function Zx(n,e,r){const i=new Map;for(const s of n){const o=s.transform,a=r.data.field(s.field);i.set(s.field,LM(o,a,e))}return i}class v0 extends Np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BM extends Np{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&zM(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=xc(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=xc(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=J2();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=iS(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument($e.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),rt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(r,i)=>Xx(r,i))&&Yl(this.baseMutations,e.baseMutations,(r,i)=>Xx(r,i))}}class _0{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){ft(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return PM}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new _0(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,st;function WM(n){switch(n){case ge.OK:return Ue(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function oS(n){if(n===void 0)return Ts("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Gt.OK:return ge.OK;case Gt.CANCELLED:return ge.CANCELLED;case Gt.UNKNOWN:return ge.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ge.INTERNAL;case Gt.UNAVAILABLE:return ge.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ge.NOT_FOUND;case Gt.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Gt.ABORTED:return ge.ABORTED;case Gt.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Gt.DATA_LOSS:return ge.DATA_LOSS;default:return Ue(39323,{code:n})}}(st=Gt||(Gt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new go([4294967295,4294967295],0);function e1(n){const e=GM().encode(n),r=new b2;return r.update(e),new Uint8Array(r.digest())}function t1(n){const e=new DataView(n.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new go([r,i],0),new go([s,o],0)]}class w0{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new ec(`Invalid padding: ${r}`);if(i<0)throw new ec(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new ec(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=go.fromNumber(this.ge)}ye(e,r,i){let s=e.add(r.multiply(go.fromNumber(i)));return s.compare(QM)===1&&(s=new go([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=e1(e),[i,s]=t1(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new w0(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=e1(e),[i,s]=t1(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.be(a)}}be(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,wh.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Rp($e.min(),s,new jt(nt),Is(),rt())}}class wh{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new wh(i,r,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,r,i,s){this.Se=e,this.removedTargetIds=r,this.key=i,this.De=s}}class aS{constructor(e,r){this.targetId=e,this.Ce=r}}class lS{constructor(e,r,i=mn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class n1{constructor(){this.ve=0,this.Fe=r1(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),r=rt(),i=rt();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Ue(38017,{changeType:o})}}),new wh(this.Me,this.xe,e,r,i)}Ke(){this.Oe=!1,this.Fe=r1()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class YM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.He=uf(),this.Je=uf(),this.Ze=new jt(nt)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const i=this.nt(r);switch(e.state){case 0:this.rt(r)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),i.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((i,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,i=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(yy(o))if(i===0){const a=new Fe(o.path);this.et(r,a,An.newNoDocument(a,$e.min()))}else ft(i===1,20013,{expectedCount:i});else{const a=this._t(r);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=To(i).toUint8Array()}catch(u){if(u instanceof j2)return Ql("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new w0(a,s,o)}catch(u){return Ql(u instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,i){return r.Ce.count===i-this.Pt(e,r.targetId)?0:2}Pt(e,r){const i=this.Ge.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&yy(l.target)){const u=new Fe(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,An.newNoDocument(u,e))}o.Be&&(r.set(a,o.ke()),o.Ke())}});let i=rt();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Rp(e,r,this.Ze,this.je,i);return this.je=Is(),this.He=uf(),this.Je=uf(),this.Ze=new jt(nt),s}Ye(e,r){if(!this.rt(e))return;const i=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,i),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),i&&(this.je=this.je.insert(r,i))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new n1,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new sn(nt),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new sn(nt),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ne("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new n1),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function uf(){return new jt(Fe.comparator)}function r1(){return new jt(Fe.comparator)}const XM={asc:"ASCENDING",desc:"DESCENDING"},JM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZM={and:"AND",or:"OR"};class e3{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function _y(n,e){return n.useProto3Json||Tp(e)?e:{value:e}}function Od(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function t3(n,e){return Od(n,e.toTimestamp())}function Di(n){return ft(!!n,49232),$e.fromTimestamp(function(r){const i=Eo(r);return new Tt(i.seconds,i.nanos)}(n))}function x0(n,e){return wy(n,e).canonicalString()}function wy(n,e){const r=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?r:r.child(e)}function cS(n){const e=Et.fromString(n);return ft(mS(e),10190,{key:e.toString()}),e}function xy(n,e){return x0(n.databaseId,e.path)}function Fm(n,e){const r=cS(e);if(r.get(1)!==n.databaseId.projectId)throw new De(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new De(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new Fe(fS(r))}function hS(n,e){return x0(n.databaseId,e)}function n3(n){const e=cS(n);return e.length===4?Et.emptyPath():fS(e)}function by(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fS(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function i1(n,e,r){return{name:xy(n,e),fields:r.value.mapValue.fields}}function r3(n,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ue(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(ft(d===void 0||typeof d=="string",58123),mn.fromBase64String(d||"")):(ft(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),mn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const d=c.code===void 0?ge.UNKNOWN:oS(c.code);return new De(d,c.message||"")}(a);r=new lS(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Fm(n,i.document.name),o=Di(i.document.updateTime),a=i.document.createTime?Di(i.document.createTime):$e.min(),l=new Hn({mapValue:{fields:i.document.fields}}),u=An.newFoundDocument(s,o,a,l),c=i.targetIds||[],d=i.removedTargetIds||[];r=new Uf(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Fm(n,i.document),o=i.readTime?Di(i.readTime):$e.min(),a=An.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Uf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Fm(n,i.document),o=i.removedTargetIds||[];r=new Uf([],o,s,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new KM(s,o),l=i.targetId;r=new aS(l,a)}}return r}function i3(n,e){let r;if(e instanceof _h)r={update:i1(n,e.key,e.value)};else if(e instanceof v0)r={delete:xy(n,e.key)};else if(e instanceof Oo)r={update:i1(n,e.key,e.data),updateMask:d3(e.fieldMask)};else{if(!(e instanceof BM))return Ue(16599,{dt:e.type});r={verify:xy(n,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Rd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pd)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Ue(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:t3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)}(n,e.precondition)),r}function s3(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(r=>function(s,o){let a=s.updateTime?Di(s.updateTime):Di(o);return a.isEqual($e.min())&&(a=Di(o)),new UM(a,s.transformResults||[])}(r,e))):[]}function o3(n,e){return{documents:[hS(n,e.path)]}}function a3(n,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=hS(n,s);const o=function(c){if(c.length!==0)return pS(zi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:cl(m.field),direction:c3(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=_y(n,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function l3(n){let e=n3(n.parent);const r=n.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){ft(i===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];r.where&&(o=function(h){const m=dS(h);return m instanceof zi&&q2(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(m=>function(w){return new Nd(hl(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,Tp(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(h){const m=!!h.before,v=h.values||[];return new Ad(v,m)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const m=!h.before,v=h.values||[];return new Ad(v,m)}(r.endAt)),IM(e,s,a,o,l,"F",u,c)}function u3(n,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function dS(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=hl(r.unaryFilter.field);return en.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=hl(r.unaryFilter.field);return en.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hl(r.unaryFilter.field);return en.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=hl(r.unaryFilter.field);return en.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(n):n.fieldFilter!==void 0?function(r){return en.create(hl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return zi.create(r.compositeFilter.filters.map(i=>dS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(r.compositeFilter.op))}(n):Ue(30097,{filter:n})}function c3(n){return XM[n]}function h3(n){return JM[n]}function f3(n){return ZM[n]}function cl(n){return{fieldPath:n.canonicalString()}}function hl(n){return fn.fromServerFormat(n.fieldPath)}function pS(n){return n instanceof en?function(r){if(r.op==="=="){if(Hx(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NAN"}};if(qx(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Hx(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NOT_NAN"}};if(qx(r.value))return{unaryFilter:{field:cl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(r.field),op:h3(r.op),value:r.value}}}(n):n instanceof zi?function(r){const i=r.getFilters().map(s=>pS(s));return i.length===1?i[0]:{compositeFilter:{op:f3(r.op),filters:i}}}(n):Ue(54877,{filter:n})}function d3(n){const e=[];return n.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function mS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function gS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,r,i,s,o=$e.min(),a=$e.min(),l=mn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.yt=e}}function m3(n){const e=l3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.Sn=new y3}addToCollectionParentIndex(e,r){return this.Sn.add(r),me.resolve()}getCollectionParents(e,r){return me.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return me.resolve()}deleteFieldIndex(e,r){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,r){return me.resolve()}getDocumentsMatchingTarget(e,r){return me.resolve(null)}getIndexType(e,r){return me.resolve(0)}getFieldIndexes(e,r){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,r){return me.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,r){return me.resolve(bo.min())}updateCollectionGroup(e,r,i){return me.resolve()}updateIndexEntries(e,r){return me.resolve()}}class y3{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new sn(Et.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new sn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yS=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(yS,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Zl(0)}static ar(){return new Zl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="LruGarbageCollector",v3=1048576;function a1([n,e],[r,i]){const s=nt(n,r);return s===0?nt(e,i):s}class _3{constructor(e){this.Pr=e,this.buffer=new sn(a1),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();a1(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class w3{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ne(o1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){fu(r)?Ne(o1,"Ignoring IndexedDB error during garbage collection: ",r):await hu(r)}await this.Ar(3e5)})}}class x3{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return me.resolve(Ep.ce);const i=new _3(r);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.Vr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(s1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s1):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let i,s,o,a,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,l=Date.now(),this.removeTargets(e,i,r))).next(h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),ll()<=tt.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:h})))}}function b3(n,e){return new x3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.changes=new Ua(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?me.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&xc(i.mutation,s,or.empty(),Tt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,rt()).next(()=>i))}getLocalViewOfDocuments(e,r,i=rt()){const s=ha();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=Zu();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=ha();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,rt()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=Is();const a=wc(),l=function(){return wc()}();return r.forEach((u,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Oo)?o=o.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),xc(d.mutation,c,d.mutation.getFieldMask(),Tt.now())):a.set(c.key,or.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,d)=>a.set(c,d)),r.forEach((c,d)=>l.set(c,new T3(d,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,r){const i=wc();let s=new jt((a,l)=>a-l),o=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let d=i.get(u)||or.empty();d=l.applyToLocalView(c,d),i.set(u,d);const h=(s.get(l.batchId)||rt()).add(u);s=s.insert(l.batchId,h)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,h=J2();d.forEach(m=>{if(!o.has(m)){const v=iS(r.get(m),i.get(m));v!==null&&h.set(m,v),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return me.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return SM(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):CM(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):me.resolve(ha());let l=Gc,u=o;return a.next(c=>me.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(d)?me.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,rt())).next(d=>({batchId:l,changes:X2(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next(i=>{let s=Zu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=Zu();return this.indexManager.getCollectionParents(e,o).next(l=>me.forEach(l,u=>{const c=function(h,m){return new Sp(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(d=>{d.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,An.newInvalidDocument(d)))});let l=Zu();return a.forEach((u,c)=>{const d=o.get(u);d!==void 0&&xc(d.mutation,c,or.empty(),Tt.now()),kp(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return me.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Di(s.createTime)}}(r)),me.resolve()}getNamedQuery(e,r){return me.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:m3(s.bundledQuery),readTime:Di(s.readTime)}}(r)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.overlays=new jt(Fe.comparator),this.Lr=new Map}getOverlay(e,r){return me.resolve(this.overlays.get(r))}getOverlays(e,r){const i=ha();return me.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.bt(e,r,o)}),me.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),me.resolve()}getOverlaysForCollection(e,r,i){const s=ha(),o=r.length+1,a=new Fe(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return me.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new jt((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let d=o.get(c.largestBatchId);d===null&&(d=ha(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=ha(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return me.resolve(l)}bt(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new HM(r,i));let o=this.Lr.get(r);o===void 0&&(o=rt(),this.Lr.set(r,o)),this.Lr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.kr=new sn(an.Kr),this.qr=new sn(an.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const i=new an(e,r);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Wr(new an(e,r))}Qr(e,r){e.forEach(i=>this.removeReference(i,r))}Gr(e){const r=new Fe(new Et([])),i=new an(r,e),s=new an(r,e+1),o=[];return this.qr.forEachInRange([i,s],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new Fe(new Et([])),i=new an(r,e),s=new an(r,e+1);let o=rt();return this.qr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new an(e,0),i=this.kr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return Fe.comparator(e.key,r.key)||nt(e.Hr,r.Hr)}static Ur(e,r){return nt(e.Hr,r.Hr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new sn(an.Kr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qM(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new an(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return me.resolve(a)}lookupMutationBatch(e,r){return me.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Xr(i),o=s<0?0:s;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?h0:this.Yn-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new an(r,0),s=new an(r,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],a=>{const l=this.Zr(a.Hr);o.push(l)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new sn(nt);return r.forEach(s=>{const o=new an(s,0),a=new an(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),me.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;Fe.isDocumentKey(o)||(o=o.child(""));const a=new an(new Fe(o),0);let l=new sn(nt);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},a),me.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){ft(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return me.forEach(r.mutations,s=>{const o=new an(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,r){const i=new an(r,0),s=this.Jr.firstAfterOrEqual(i);return me.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.ti=e,this.docs=function(){return new jt(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return me.resolve(i?i.document.mutableCopy():An.newInvalidDocument(r))}getEntries(e,r){let i=Is();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():An.newInvalidDocument(s))}),me.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=Is();const a=r.path,l=new Fe(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||nM(tM(d),i)<=0||(s.has(d.key)||kp(r,d))&&(o=o.insert(d.key,d.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,r,i,s){Ue(9500)}ni(e,r){return me.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new R3(this)}getSize(e){return me.resolve(this.size)}}class R3 extends E3{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),me.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.persistence=e,this.ri=new Ua(r=>p0(r),m0),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new b0,this.targetCount=0,this.oi=Zl._r()}forEachTarget(e,r){return this.ri.forEach((i,s)=>r(s)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ii&&(this.ii=r),me.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new Zl(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,me.resolve()}updateTargetData(e,r){return this.lr(r),me.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),me.waitFor(o).next(()=>s)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,r){const i=this.ri.get(r)||null;return me.resolve(i)}addMatchingKeys(e,r,i){return this.si.$r(r,i),me.resolve()}removeMatchingKeys(e,r,i){this.si.Qr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),me.resolve()}getMatchingKeysForTargetId(e,r){const i=this.si.jr(r);return me.resolve(i)}containsKey(e,r){return me.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,r){this._i={},this.overlays={},this.ai=new Ep(0),this.ui=!1,this.ui=!0,this.ci=new k3,this.referenceDelegate=e(this),this.li=new P3(this),this.indexManager=new g3,this.remoteDocumentCache=function(s){return new N3(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new p3(r),this.Pi=new S3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new C3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this._i[e.toKey()];return i||(i=new A3(r,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,i){Ne("MemoryPersistence","Starting transaction:",e);const s=new O3(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,r){return me.or(Object.values(this._i).map(i=>()=>i.containsKey(e,r)))}}class O3 extends iM{constructor(e){super(),this.currentSequenceNumber=e}}class E0{constructor(e){this.persistence=e,this.Ri=new b0,this.Ai=null}static Vi(e){return new E0(e)}get di(){if(this.Ai)return this.Ai;throw Ue(60996)}addReference(e,r,i){return this.Ri.addReference(i,r),this.di.delete(i.toString()),me.resolve()}removeReference(e,r,i){return this.Ri.removeReference(i,r),this.di.add(i.toString()),me.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),me.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.di,i=>{const s=Fe.fromPath(i);return this.mi(e,s).next(o=>{o||r.removeEntry(s,$e.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(i=>{i?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return me.or([()=>me.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class jd{constructor(e,r){this.persistence=e,this.fi=new Ua(i=>aM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=b3(this,r)}static Vi(e,r){return new jd(e,r)}Ti(){}Ii(e){return me.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}pr(e){let r=0;return this.mr(e,i=>{r++}).next(()=>r)}mr(e,r){return me.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?me.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(i++,o.removeEntry(a,$e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),me.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),me.resolve()}removeReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),me.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Lf(e.data.value)),r}wr(e,r,i){return me.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return me.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Ts=i,this.Is=s}static Es(e,r){let i=rt(),s=rt();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new T0(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return _O()?8:sM(Pn())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.gs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new j3;return this.ys(e,r,a).next(l=>{if(o.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>o.result)}ws(e,r,i,s){return i.documentReadCount<this.Vs?(ll()<=tt.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",ul(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(ll()<=tt.DEBUG&&Ne("QueryEngine","Query:",ul(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(ll()<=tt.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",ul(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(r))):me.resolve())}gs(e,r){if(Qx(r))return me.resolve(null);let i=ji(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=vy(r,null,"F"),i=ji(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=rt(...o);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.bs(r,l);return this.Ss(r,c,a,u.readTime)?this.gs(e,vy(r,null,"F")):this.Ds(e,c,r,u)}))})))}ps(e,r,i,s){return Qx(r)||s.isEqual($e.min())?me.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(r,o);return this.Ss(r,a,i,s)?me.resolve(null):(ll()<=tt.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ul(r)),this.Ds(e,a,r,eM(s,Gc)).next(l=>l))})}bs(e,r){let i=new sn(Q2(e));return r.forEach((s,o)=>{kp(e,o)&&(i=i.add(o))}),i}Ss(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,r,i){return ll()<=tt.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",ul(r)),this.fs.getDocumentsMatchingQuery(e,r,bo.min(),i)}Ds(e,r,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="LocalStore",M3=3e8;class L3{constructor(e,r,i,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new jt(nt),this.Fs=new Ua(o=>p0(o),m0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function V3(n,e,r,i){return new L3(n,e,r,i)}async function _S(n,e){const r=qe(n);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.Os(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=rt();for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function F3(n,e){const r=qe(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const h=c.batch,m=h.keys();let v=me.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(u,w)).next(I=>{const C=c.docVersions.get(w);ft(C!==null,48541),I.version.compareTo(C)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=rt();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function wS(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function U3(n,e){const r=qe(n),i=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;l.push(r.li.removeMatchingKeys(o,d.removedDocuments,h).next(()=>r.li.addMatchingKeys(o,d.addedDocuments,h)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?v=v.withResumeToken(mn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),s=s.insert(h,v),function(I,C,b){return I.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=M3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,v,d)&&l.push(r.li.updateTargetData(o,v))});let u=Is(),c=rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,d))}),l.push(z3(o,a,e.documentUpdates).next(d=>{u=d.Bs,c=d.Ls})),!i.isEqual($e.min())){const d=r.li.getLastRemoteSnapshotVersion(o).next(h=>r.li.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(d)}return me.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.vs=s,o))}function z3(n,e,r){let i=rt(),s=rt();return r.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=Is();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual($e.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Ne(I0,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function $3(n,e){const r=qe(n);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=h0),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function B3(n,e){const r=qe(n);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.li.getTargetData(i,e).next(o=>o?(s=o,me.resolve(s)):r.li.allocateTargetId(i).next(a=>(s=new ro(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(i.targetId,i),r.Fs.set(e,i.targetId)),i})}async function Ey(n,e,r){const i=qe(n),s=i.vs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!fu(a))throw a;Ne(I0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function l1(n,e,r){const i=qe(n);let s=$e.min(),o=rt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const h=qe(u),m=h.Fs.get(d);return m!==void 0?me.resolve(h.vs.get(m)):h.li.getTargetData(c,d)}(i,a,ji(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,r?s:$e.min(),r?o:rt())).next(l=>(q3(i,AM(e),l),{documents:l,ks:o})))}function q3(n,e,r){let i=n.Ms.get(e)||$e.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ms.set(e,i)}class u1{constructor(){this.activeTargetIds=DM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H3{constructor(){this.vo=new u1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,i){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new u1,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="ConnectivityMonitor";class h1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ne(c1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ne(c1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf=null;function Ty(){return cf===null?cf=function(){return 268435456+Math.round(2147483648*Math.random())}():cf++,"0x"+cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="RestConnection",W3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class G3{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===Cd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,r,i,s,o){const a=Ty(),l=this.Qo(e,r.toUriEncodedString());Ne(Um,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,o);const{host:c}=new URL(l),d=au(c);return this.zo(e,l,u,i,d).then(h=>(Ne(Um,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Ql(Um,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}jo(e,r,i,s,o,a){return this.Wo(e,r,i,s,o)}Go(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,r){const i=W3[e];let s=`${this.qo}/v1/${r}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection",Fu=(n,e,r)=>{n.listen(e,i=>{try{r(i)}catch(s){setTimeout(()=>{throw s},0)}})};class jl extends G3{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!jl.c_){const e=S2();Fu(e,I2.STAT_EVENT,r=>{r.stat===fy.PROXY?Ne(In,"STAT_EVENT: detected buffering proxy"):r.stat===fy.NOPROXY&&Ne(In,"STAT_EVENT: detected no buffering proxy")}),jl.c_=!0}}zo(e,r,i,s,o){const a=Ty();return new Promise((l,u)=>{const c=new E2;c.setWithCredentials(!0),c.listenOnce(T2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mf.NO_ERROR:const h=c.getResponseJson();Ne(In,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),l(h);break;case Mf.TIMEOUT:Ne(In,`RPC '${e}' ${a} timed out`),u(new De(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Mf.HTTP_ERROR:const m=c.getStatus();if(Ne(In,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const I=function(b){const T=b.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(T)>=0?T:ge.UNKNOWN}(w.status);u(new De(I,w.message))}else u(new De(ge.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new De(ge.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Ne(In,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);Ne(In,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",d,i,15)})}T_(e,r,i){const s=Ty(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,i),l.encodeInitMessageHeaders=!0;const c=o.join("");Ne(In,`Creating RPC '${e}' stream ${s}: ${c}`,l);const d=a.createWebChannel(c,l);this.I_(d);let h=!1,m=!1;const v=new Q3({Ho:w=>{m?Ne(In,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(h||(Ne(In,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Ne(In,`RPC '${e}' stream ${s} sending:`,w),d.send(w))},Jo:()=>d.close()});return Fu(d,Ju.EventType.OPEN,()=>{m||(Ne(In,`RPC '${e}' stream ${s} transport opened.`),v.i_())}),Fu(d,Ju.EventType.CLOSE,()=>{m||(m=!0,Ne(In,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(d))}),Fu(d,Ju.EventType.ERROR,w=>{m||(m=!0,Ql(In,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),v.o_(new De(ge.UNAVAILABLE,"The operation could not be completed")))}),Fu(d,Ju.EventType.MESSAGE,w=>{var I;if(!m){const C=w.data[0];ft(!!C,16349);const b=C,T=(b==null?void 0:b.error)||((I=b[0])==null?void 0:I.error);if(T){Ne(In,`RPC '${e}' stream ${s} received error:`,T);const N=T.status;let O=function(A){const R=Gt[A];if(R!==void 0)return oS(R)}(N),L=T.message;O===void 0&&(O=ge.INTERNAL,L="Unknown error status: "+N+" with message "+T.message),m=!0,v.o_(new De(O,L)),d.close()}else Ne(In,`RPC '${e}' stream ${s} received:`,C),v.__(C)}}),jl.u_(),setTimeout(()=>{v.s_()},0),v}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,i){super.Go(e,r,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return C2()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n){return new jl(n)}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n){return new e3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jl.c_=!1;class xS{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=r,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-i);s>0&&Ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="PersistentStream";class bS{constructor(e,r,i,s,o,a,l,u){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ge.RESOURCE_EXHAUSTED?(Ts(r.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===r&&this.G_(i,s)},i=>{e(()=>{const s=new De(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,r){const i=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ne(f1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Ne(f1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class X3 extends bS{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=r3(this.serializer,e),i=function(o){if(!("targetChange"in o))return $e.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?$e.min():a.readTime?Di(a.readTime):$e.min()}(e);return this.listener.J_(r,i)}Z_(e){const r={};r.database=by(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=yy(u)?{documents:o3(o,u)}:{query:a3(o,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=uS(o,a.resumeToken);const c=_y(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo($e.min())>0){l.readTime=Od(o,a.snapshotVersion.toTimestamp());const c=_y(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=u3(this.serializer,e);i&&(r.labels=i),this.K_(r)}X_(e){const r={};r.database=by(this.serializer),r.removeTarget=e,this.K_(r)}}class J3 extends bS{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=s3(e.writeResults,e.commitTime),i=Di(e.commitTime);return this.listener.na(i,r)}ra(){const e={};e.database=by(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>i3(this.serializer,i))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{}class e5 extends Z3{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new De(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,wy(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(ge.UNKNOWN,o.toString())})}jo(e,r,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,wy(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new De(ge.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function t5(n,e,r,i){return new e5(n,e,r,i)}class n5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(r),this.aa=!1):Ne("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class r5{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{za(this)&&(Ne(Na,"Restarting streams for network reachability change."),await async function(u){const c=qe(u);c.Ea.add(4),await xh(c),c.Va.set("Unknown"),c.Ea.delete(4),await Op(c)}(this))})}),this.Va=new n5(i,s)}}async function Op(n){if(za(n))for(const e of n.Ra)await e(!0)}async function xh(n){for(const e of n.Ra)await e(!1)}function ES(n,e){const r=qe(n);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),A0(r)?k0(r):du(r).O_()&&C0(r,e))}function S0(n,e){const r=qe(n),i=du(r);r.Ia.delete(e),i.O_()&&TS(r,e),r.Ia.size===0&&(i.O_()?i.L_():za(r)&&r.Va.set("Unknown"))}function C0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}du(n).Z_(e)}function TS(n,e){n.da.$e(e),du(n).X_(e)}function k0(n){n.da=new YM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),du(n).start(),n.Va.ua()}function A0(n){return za(n)&&!du(n).x_()&&n.Ia.size>0}function za(n){return qe(n).Ea.size===0}function IS(n){n.da=void 0}async function i5(n){n.Va.set("Online")}async function s5(n){n.Ia.forEach((e,r)=>{C0(n,e)})}async function o5(n,e){IS(n),A0(n)?(n.Va.ha(e),k0(n)):n.Va.set("Unknown")}async function a5(n,e,r){if(n.Va.set("Online"),e instanceof lS&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(n,e)}catch(i){Ne(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dd(n,i)}else if(e instanceof Uf?n.da.Xe(e):e instanceof aS?n.da.st(e):n.da.tt(e),!r.isEqual($e.min()))try{const i=await wS(n.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.Ia.get(c);d&&o.Ia.set(c,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const d=o.Ia.get(u);if(!d)return;o.Ia.set(u,d.withResumeToken(mn.EMPTY_BYTE_STRING,d.snapshotVersion)),TS(o,u);const h=new ro(d.target,u,c,d.sequenceNumber);C0(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(n,r)}catch(i){Ne(Na,"Failed to raise snapshot:",i),await Dd(n,i)}}async function Dd(n,e,r){if(!fu(e))throw e;n.Ea.add(1),await xh(n),n.Va.set("Offline"),r||(r=()=>wS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ne(Na,"Retrying IndexedDB access"),await r(),n.Ea.delete(1),await Op(n)})}function SS(n,e){return e().catch(r=>Dd(n,r,e))}async function jp(n){const e=qe(n),r=So(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:h0;for(;l5(e);)try{const s=await $3(e.localStore,i);if(s===null){e.Ta.length===0&&r.L_();break}i=s.batchId,u5(e,s)}catch(s){await Dd(e,s)}CS(e)&&kS(e)}function l5(n){return za(n)&&n.Ta.length<10}function u5(n,e){n.Ta.push(e);const r=So(n);r.O_()&&r.Y_&&r.ea(e.mutations)}function CS(n){return za(n)&&!So(n).x_()&&n.Ta.length>0}function kS(n){So(n).start()}async function c5(n){So(n).ra()}async function h5(n){const e=So(n);for(const r of n.Ta)e.ea(r.mutations)}async function f5(n,e,r){const i=n.Ta.shift(),s=_0.from(i,e,r);await SS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await jp(n)}async function d5(n,e){e&&So(n).Y_&&await async function(i,s){if(function(a){return WM(a)&&a!==ge.ABORTED}(s.code)){const o=i.Ta.shift();So(i).B_(),await SS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await jp(i)}}(n,e),CS(n)&&kS(n)}async function d1(n,e){const r=qe(n);r.asyncQueue.verifyOperationInProgress(),Ne(Na,"RemoteStore received new credentials");const i=za(r);r.Ea.add(3),await xh(r),i&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Op(r)}async function p5(n,e){const r=qe(n);e?(r.Ea.delete(2),await Op(r)):e||(r.Ea.add(2),await xh(r),r.Va.set("Unknown"))}function du(n){return n.ma||(n.ma=function(r,i,s){const o=qe(r);return o.sa(),new X3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:i5.bind(null,n),Yo:s5.bind(null,n),t_:o5.bind(null,n),J_:a5.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),A0(n)?k0(n):n.Va.set("Unknown")):(await n.ma.stop(),IS(n))})),n.ma}function So(n){return n.fa||(n.fa=function(r,i,s){const o=qe(r);return o.sa(),new J3(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:c5.bind(null,n),t_:d5.bind(null,n),ta:h5.bind(null,n),na:f5.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await jp(n)):(await n.fa.stop(),n.Ta.length>0&&(Ne(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new N0(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new De(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R0(n,e){if(Ts("AsyncQueue",`${e}: ${n}`),fu(n))return new De(ge.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{static emptySet(e){return new Dl(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||Fe.comparator(r.key,i.key):(r,i)=>Fe.comparator(r.key,i.key),this.keyedMap=Zu(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Dl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.ga=new jt(Fe.comparator)}track(e){const r=e.doc.key,i=this.ga.get(r);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(r,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(r):e.type===1&&i.type===2?this.ga=this.ga.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Ue(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,i)=>{e.push(i)}),e}}class eu{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new eu(e,r,Dl.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class g5{constructor(){this.queries=m1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,i){const s=qe(r),o=s.queries;s.queries=m1(),o.forEach((a,l)=>{for(const u of l.ba)u.onError(i)})})(this,new De(ge.ABORTED,"Firestore shutting down"))}}function m1(){return new Ua(n=>G2(n),Cp)}async function AS(n,e){const r=qe(n);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new m5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=R0(a,`Initialization of query '${ul(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ba.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&P0(r)}async function NS(n,e){const r=qe(n),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function y5(n,e){const r=qe(n);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ba)l.Fa(s)&&(i=!0);a.wa=s}}i&&P0(r)}function v5(n,e,r){const i=qe(n),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(r);i.queries.delete(e)}function P0(n){n.Ca.forEach(e=>{e.next()})}var Iy,g1;(g1=Iy||(Iy={})).Ma="default",g1.Cache="cache";class RS{constructor(e,r,i){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new eu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const i=r!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Iy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class _5{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=rt(),this.mutatedKeys=rt(),this.eu=Q2(e),this.tu=new Dl(this.eu)}get nu(){return this.Za}ru(e,r){const i=r?r.iu:new p1,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),v=kp(this.query,h)?h:null,w=!!m&&this.mutatedKeys.has(m.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;m&&v?m.data.isEqual(v.data)?w!==I&&(i.track({type:3,doc:v}),C=!0):this.su(m,v)||(i.track({type:2,doc:v}),C=!0,(u&&this.eu(v,u)>0||c&&this.eu(v,c)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),C=!0):m&&!v&&(i.track({type:1,doc:m}),C=!0,(u||c)&&(l=!0)),C&&(v?(a=a.add(v),o=I?o.add(d):o.delete(d)):(a=a.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Ss:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,h)=>function(v,w){const I=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:C})}};return I(v)-I(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(i),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new eu(this.query,e.tu,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new p1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=rt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const r=[];return e.forEach(i=>{this.Ya.has(i)||r.push(new OS(i))}),this.Ya.forEach(i=>{e.has(i)||r.push(new PS(i))}),r}cu(e){this.Za=e.ks,this.Ya=rt();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return eu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const O0="SyncEngine";class w5{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class x5{constructor(e){this.key=e,this.hu=!1}}class b5{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ua(l=>G2(l),Cp),this.Iu=new Map,this.Eu=new Set,this.Ru=new jt(Fe.comparator),this.Au=new Map,this.Vu=new b0,this.du={},this.mu=new Map,this.fu=Zl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E5(n,e,r=!0){const i=FS(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await jS(i,e,r,!0),s}async function T5(n,e){const r=FS(n);await jS(r,e,!0,!1)}async function jS(n,e,r,i){const s=await B3(n.localStore,ji(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await I5(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&r&&ES(n.remoteStore,s),l}async function I5(n,e,r,i,s){n.pu=(h,m,v)=>async function(I,C,b,T){let N=C.view.ru(b);N.Ss&&(N=await l1(I.localStore,C.query,!1).then(({documents:A})=>C.view.ru(A,N)));const O=T&&T.targetChanges.get(C.targetId),L=T&&T.targetMismatches.get(C.targetId)!=null,U=C.view.applyChanges(N,I.isPrimaryClient,O,L);return v1(I,C.targetId,U.au),U.snapshot}(n,h,m,v);const o=await l1(n.localStore,e,!0),a=new _5(e,o.ks),l=a.ru(o.documents),u=wh.createSynthesizedTargetChangeForCurrentChange(r,i&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);v1(n,r,c.au);const d=new w5(e,r,a);return n.Tu.set(e,d),n.Iu.has(r)?n.Iu.get(r).push(e):n.Iu.set(r,[e]),c.snapshot}async function S5(n,e,r){const i=qe(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!Cp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Ey(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&S0(i.remoteStore,s.targetId),Sy(i,s.targetId)}).catch(hu)):(Sy(i,s.targetId),await Ey(i.localStore,s.targetId,!0))}async function C5(n,e){const r=qe(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),S0(r.remoteStore,i.targetId))}async function k5(n,e,r){const i=D5(n);try{const s=await function(a,l){const u=qe(a),c=Tt.now(),d=l.reduce((v,w)=>v.add(w.key),rt());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Is(),I=rt();return u.xs.getEntries(v,d).next(C=>{w=C,w.forEach((b,T)=>{T.isValidDocument()||(I=I.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,w)).next(C=>{h=C;const b=[];for(const T of l){const N=$M(T,h.get(T.key).overlayedDocument);N!=null&&b.push(new Oo(T.key,N,z2(N.value.mapValue),Rr.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,b,l)}).next(C=>{m=C;const b=C.applyToLocalDocumentSet(h,I);return u.documentOverlayCache.saveOverlays(v,C.batchId,b)})}).then(()=>({batchId:m.batchId,changes:X2(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new jt(nt)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(i,s.batchId,r),await bh(i,s.changes),await jp(i.remoteStore)}catch(s){const o=R0(s,"Failed to persist write");r.reject(o)}}async function DS(n,e){const r=qe(n);try{const i=await U3(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(ft(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ft(a.hu,14607):s.removedDocuments.size>0&&(ft(a.hu,42227),a.hu=!1))}),await bh(r,i,e)}catch(i){await hu(i)}}function y1(n,e,r){const i=qe(n);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=qe(a);u.onlineState=l;let c=!1;u.queries.forEach((d,h)=>{for(const m of h.ba)m.va(l)&&(c=!0)}),c&&P0(u)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function A5(n,e,r){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Au.get(e),o=s&&s.key;if(o){let a=new jt(Fe.comparator);a=a.insert(o,An.newNoDocument(o,$e.min()));const l=rt().add(o),u=new Rp($e.min(),new Map,new jt(nt),a,l);await DS(i,u),i.Ru=i.Ru.remove(o),i.Au.delete(e),j0(i)}else await Ey(i.localStore,e,!1).then(()=>Sy(i,e,r)).catch(hu)}async function N5(n,e){const r=qe(n),i=e.batch.batchId;try{const s=await F3(r.localStore,e);LS(r,i,null),MS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await bh(r,s)}catch(s){await hu(s)}}async function R5(n,e,r){const i=qe(n);try{const s=await function(a,l){const u=qe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(ft(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,e);LS(i,e,r),MS(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await bh(i,s)}catch(s){await hu(s)}}function MS(n,e){(n.mu.get(e)||[]).forEach(r=>{r.resolve()}),n.mu.delete(e)}function LS(n,e,r){const i=qe(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Sy(n,e,r=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),r&&n.Pu.yu(i,r);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(i=>{n.Vu.containsKey(i)||VS(n,i)})}function VS(n,e){n.Eu.delete(e.path.canonicalString());const r=n.Ru.get(e);r!==null&&(S0(n.remoteStore,r),n.Ru=n.Ru.remove(e),n.Au.delete(r),j0(n))}function v1(n,e,r){for(const i of r)i instanceof PS?(n.Vu.addReference(i.key,e),P5(n,i)):i instanceof OS?(Ne(O0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||VS(n,i.key)):Ue(19791,{wu:i})}function P5(n,e){const r=e.key,i=r.path.canonicalString();n.Ru.get(r)||n.Eu.has(i)||(Ne(O0,"New document in limbo: "+r),n.Eu.add(i),j0(n))}function j0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const r=new Fe(Et.fromString(e)),i=n.fu.next();n.Au.set(i,new x5(r)),n.Ru=n.Ru.insert(r,i),ES(n.remoteStore,new ro(ji(g0(r.path)),i,"TargetPurposeLimboResolution",Ep.ce))}}async function bh(n,e,r){const i=qe(n),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,r).then(c=>{var d;if((c||r)&&i.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=T0.Es(u.targetId,c);o.push(h)}}))}),await Promise.all(a),i.Pu.J_(s),await async function(u,c){const d=qe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>me.forEach(c,m=>me.forEach(m.Ts,v=>d.persistence.referenceDelegate.addReference(h,m.targetId,v)).next(()=>me.forEach(m.Is,v=>d.persistence.referenceDelegate.removeReference(h,m.targetId,v)))))}catch(h){if(!fu(h))throw h;Ne(I0,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const v=d.vs.get(m),w=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(w);d.vs=d.vs.insert(m,I)}}}(i.localStore,o))}async function O5(n,e){const r=qe(n);if(!r.currentUser.isEqual(e)){Ne(O0,"User change. New user:",e.toKey());const i=await _S(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new De(ge.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bh(r,i.Ns)}}function j5(n,e){const r=qe(n),i=r.Au.get(e);if(i&&i.hu)return rt().add(i.key);{let s=rt();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function FS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A5.bind(null,e),e.Pu.J_=y5.bind(null,e.eventManager),e.Pu.yu=v5.bind(null,e.eventManager),e}function D5(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R5.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return V3(this.persistence,new D3,e.initialUser,this.serializer)}Cu(e){return new vS(E0.Vi,this.serializer)}Du(e){return new H3}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class M5 extends Md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){ft(this.persistence.referenceDelegate instanceof jd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new w3(i,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new vS(i=>jd.Vi(i,r),this.serializer)}}class Cy{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>y1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=O5.bind(null,this.syncEngine),await p5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g5}()}createDatastore(e){const r=Pp(e.databaseInfo.databaseId),i=Y3(e.databaseInfo);return t5(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new r5(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>y1(this.syncEngine,r,0),function(){return h1.v()?new h1:new K3}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,d){const h=new b5(s,o,a,l,u,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=qe(s);Ne(Na,"RemoteStore shutting down."),o.Ea.add(5),await xh(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Cy.provider={build:()=>new Cy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="FirestoreClient";class L5{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this._databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=u0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{Ne(Co,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Ne(Co,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=R0(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function $m(n,e){n.asyncQueue.verifyOperationInProgress(),Ne(Co,"Initializing OfflineComponentProvider");const r=n.configuration;await e.initialize(r);let i=r.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await _S(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function _1(n,e){n.asyncQueue.verifyOperationInProgress();const r=await V5(n);Ne(Co,"Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(i=>d1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>d1(e.remoteStore,s)),n._onlineComponents=e}async function V5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ne(Co,"Using user provided OfflineComponentProvider");try{await $m(n,n._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ge.FAILED_PRECONDITION||s.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Ql("Error using user provided cache. Falling back to memory cache: "+r),await $m(n,new Md)}}else Ne(Co,"Using default OfflineComponentProvider"),await $m(n,new M5(void 0));return n._offlineComponents}async function zS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ne(Co,"Using user provided OnlineComponentProvider"),await _1(n,n._uninitializedComponentsProvider._online)):(Ne(Co,"Using default OnlineComponentProvider"),await _1(n,new Cy))),n._onlineComponents}function F5(n){return zS(n).then(e=>e.syncEngine)}async function $S(n){const e=await zS(n),r=e.eventManager;return r.onListen=E5.bind(null,e.syncEngine),r.onUnlisten=S5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=T5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=C5.bind(null,e.syncEngine),r}function U5(n,e,r={}){const i=new gs;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const d=new US({next:m=>{d.Nu(),a.enqueueAndForget(()=>NS(o,h));const v=m.docs.has(l);!v&&m.fromCache?c.reject(new De(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?c.reject(new De(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new RS(g0(l.path),d,{includeMetadataChanges:!0,Ka:!0});return AS(o,h)}(await $S(n),n.asyncQueue,e,r,i)),i.promise}function z5(n,e,r={}){const i=new gs;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const d=new US({next:m=>{d.Nu(),a.enqueueAndForget(()=>NS(o,h)),m.fromCache&&u.source==="server"?c.reject(new De(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new RS(l,d,{includeMetadataChanges:!0,Ka:!0});return AS(o,h)}(await $S(n),n.asyncQueue,e,r,i)),i.promise}function $5(n,e){const r=new gs;return n.asyncQueue.enqueueAndForget(async()=>k5(await F5(n),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5="ComponentProvider",w1=new Map;function q5(n,e,r,i,s){return new cM(n,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,BS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firestore.googleapis.com",x1=!0;class b1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new De(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qS,this.ssl=x1}else this.host=e.host,this.ssl=e.ssl??x1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<v3)throw new De(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new De(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dp{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new De(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new De(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new BD;switch(i.type){case"firstParty":return new WD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new De(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=w1.get(r);i&&(Ne(B5,"Removing Datastore"),w1.delete(r),i.terminate())}(this),Promise.resolve()}}function H5(n,e,r,i={}){var c;n=xo(n,Dp);const s=au(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${r}`;s&&(DI(`https://${l}`),MI("Firestore",!0)),o.host!==qS&&o.host!==l&&Ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:i};if(!wo(u,a)&&(n._setSettings(u),i.mockUserToken)){let d,h;if(typeof i.mockUserToken=="string")d=i.mockUserToken,h=Cn.MOCK_USER;else{d=hO(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new De(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Cn(m)}n._authCredentials=new qD(new A2(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mp(this.firestore,e,this._query)}}class nn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,i){if(vh(r,nn._jsonSchema))return new nn(e,i||null,new Fe(Et.fromString(r.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:Yt("string",nn._jsonSchemaVersion),referencePath:Yt("string")};class yo extends Mp{constructor(e,r,i){super(e,r,g0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Fe(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function Bm(n,e,...r){if(n=Xt(n),N2("collection","path",e),n instanceof Dp){const i=Et.fromString(e,...r);return Mx(i),new yo(n,null,i)}{if(!(n instanceof nn||n instanceof yo))throw new De(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Et.fromString(e,...r));return Mx(i),new yo(n.firestore,null,i)}}function sa(n,e,...r){if(n=Xt(n),arguments.length===1&&(e=u0.newId()),N2("doc","path",e),n instanceof Dp){const i=Et.fromString(e,...r);return Dx(i),new nn(n,null,new Fe(i))}{if(!(n instanceof nn||n instanceof yo))throw new De(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Et.fromString(e,...r));return Dx(i),new nn(n.firestore,n instanceof yo?n.converter:null,new Fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="AsyncQueue";class T1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xS(this,"async_queue_retry"),this._c=()=>{const i=zm();i&&Ne(E1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const r=zm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=zm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new gs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!fu(e))throw e;Ne(E1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",I1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=r,r}enqueueAfterDelay(e,r,i){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=N0.createAndSchedule(this,e,r,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Ue(47125,{Pc:I1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function I1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Eh extends Dp{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new T1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T1(e),this._firestoreClient=void 0,await e}}}function K5(n,e){const r=typeof n=="object"?n:Xv(),i=typeof n=="string"?n:Cd,s=Fa(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=uO("firestore");o&&H5(s,...o)}return s}function Lp(n){if(n._terminated)throw new De(ge.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||W5(n),n._firestoreClient}function W5(n){var i,s,o,a;const e=n._freezeSettings(),r=q5(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new L5(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ir(mn.fromBase64String(e))}catch(r){throw new De(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ir(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vh(e,Ir._jsonSchema))return Ir.fromBase64String(e.bytes)}}Ir._jsonSchemaVersion="firestore/bytes/1.0",Ir._jsonSchema={type:Yt("string",Ir._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new De(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new De(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new De(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mi._jsonSchemaVersion}}static fromJSON(e){if(vh(e,Mi._jsonSchema))return new Mi(e.latitude,e.longitude)}}Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:Yt("string",Mi._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vh(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new si(e.vectorValues);throw new De(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:Yt("string",si._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=/^__.*__$/;class Q5{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Oo(e,this.data,this.fieldMask,r,this.fieldTransforms):new _h(e,this.data,r,this.fieldTransforms)}}class HS{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Oo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function KS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{dataSource:n})}}class L0{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new L0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ld(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(KS(this.dataSource)&&G5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Y5{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Pp(e)}createContext(e,r,i,s=!1){return new L0({dataSource:e,methodName:r,targetDoc:i,path:fn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function WS(n){const e=n._freezeSettings(),r=Pp(n._databaseId);return new Y5(n._databaseId,!!e.ignoreUndefinedProperties,r)}function GS(n,e,r,i,s,o={}){const a=n.createContext(o.merge||o.mergeFields?2:0,e,r,s);V0("Data must be an object, but it was:",a,i);const l=QS(i,a);let u,c;if(o.merge)u=new or(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const m=eh(e,h,r);if(!a.contains(m))throw new De(ge.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);JS(d,m)||d.push(m)}u=new or(d),c=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=a.fieldTransforms;return new Q5(new Hn(l),u,c)}class Vp extends M0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vp}}function X5(n,e,r,i){const s=n.createContext(1,e,r);V0("Data must be an object, but it was:",s,i);const o=[],a=Hn.empty();Po(i,(u,c)=>{const d=XS(e,u,r);c=Xt(c);const h=s.childContextForFieldPath(d);if(c instanceof Vp)o.push(d);else{const m=Fp(c,h);m!=null&&(o.push(d),a.set(d,m))}});const l=new or(o);return new HS(a,l,s.fieldTransforms)}function J5(n,e,r,i,s,o){const a=n.createContext(1,e,r),l=[eh(e,i,r)],u=[s];if(o.length%2!=0)throw new De(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(eh(e,o[m])),u.push(o[m+1]);const c=[],d=Hn.empty();for(let m=l.length-1;m>=0;--m)if(!JS(c,l[m])){const v=l[m];let w=u[m];w=Xt(w);const I=a.childContextForFieldPath(v);if(w instanceof Vp)c.push(v);else{const C=Fp(w,I);C!=null&&(c.push(v),d.set(v,C))}}const h=new or(c);return new HS(d,h,a.fieldTransforms)}function Fp(n,e){if(YS(n=Xt(n)))return V0("Unsupported field value:",e,n),QS(n,e);if(n instanceof M0)return function(i,s){if(!KS(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=Fp(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=Xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return MM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Tt.fromDate(i);return{timestampValue:Od(s.serializer,o)}}if(i instanceof Tt){const o=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(s.serializer,o)}}if(i instanceof Mi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ir)return{bytesValue:uS(s.serializer,i._byteString)};if(i instanceof nn){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:x0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof si)return function(a,l){const u=a instanceof si?a.toArray():a;return{mapValue:{fields:{[F2]:{stringValue:U2},[kd]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return y0(l.serializer,d)})}}}}}}(i,s);if(gS(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${c0(i)}`)}(n,e)}function QS(n,e){const r={};return O2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,(i,s)=>{const o=Fp(s,e.childContextForField(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function YS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof Mi||n instanceof Ir||n instanceof nn||n instanceof M0||n instanceof si||gS(n))}function V0(n,e,r){if(!YS(r)||!R2(r)){const i=c0(r);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function eh(n,e,r){if((e=Xt(e))instanceof D0)return e._internalPath;if(typeof e=="string")return XS(n,e);throw Ld("Field path arguments must be of type string or ",n,!1,void 0,r)}const Z5=new RegExp("[~\\*/\\[\\]]");function XS(n,e,r){if(e.search(Z5)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new D0(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Ld(n,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new De(ge.INVALID_ARGUMENT,l+n+u)}function JS(n,e){return n.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{convertValue(e,r="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(To(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Po(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var i,s,o;const r=(o=(s=(i=e.fields)==null?void 0:i[kd].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>$t(a.doubleValue));return new si(r)}convertGeoPoint(e){return new Mi($t(e.latitude),$t(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=Ip(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const r=Eo(e);return new Tt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=Et.fromString(e);ft(mS(i),9688,{name:e});const s=new Yc(i.get(1),i.get(3)),o=new Fe(i.popFirst(5));return s.isEqual(r)||Ts(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends eL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ir(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,r)}}const S1="@firebase/firestore",C1="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(eh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tL extends eC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new De(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function tC(n,e,r){let i;return i=n?r&&(r.merge||r.mergeFields)?n.toFirestore(e,r):n.toFirestore(e):e,i}class tc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class va extends eC{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(eh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=va._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}va._jsonSchemaVersion="firestore/documentSnapshot/1.0",va._jsonSchema={type:Yt("string",va._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class zf extends va{data(e={}){return super.data(e)}}class Ml{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new tc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new zf(this._firestore,this._userDataWriter,i.key,i,new tc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new De(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new zf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new tc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new zf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new tc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:rL(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new De(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ml._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=u0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml._jsonSchemaVersion="firestore/querySnapshot/1.0",Ml._jsonSchema={type:Yt("string",Ml._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=WS(e)}set(e,r,i){this._verifyNotCommitted();const s=qm(e,this._firestore),o=tC(s.converter,r,i),a=GS(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Rr.none())),this}update(e,r,i,...s){this._verifyNotCommitted();const o=qm(e,this._firestore);let a;return a=typeof(r=Xt(r))=="string"||r instanceof D0?J5(this._dataReader,"WriteBatch.update",o._key,r,i,s):X5(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=qm(e,this._firestore);return this._mutations=this._mutations.concat(new v0(r._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qm(n,e){if((n=Xt(n)).firestore!==e)throw new De(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n){n=xo(n,nn);const e=xo(n.firestore,Eh),r=Lp(e);return U5(r,n._key).then(i=>sL(e,n,i))}function Hm(n){n=xo(n,Mp);const e=xo(n.firestore,Eh),r=Lp(e),i=new ZS(e);return nL(n._query),z5(r,n._query).then(s=>new Ml(e,i,n,s))}function k1(n,e,r){n=xo(n,nn);const i=xo(n.firestore,Eh),s=tC(n.converter,e,r),o=WS(i);return nC(i,[GS(o,"setDoc",n._key,s,n.converter!==null,r).toMutation(n._key,Rr.none())])}function nC(n,e){const r=Lp(n);return $5(r,e)}function sL(n,e,r){const i=r.docs.get(e._key),s=new ZS(n);return new va(n,s,e._key,i,new tc(r.hasPendingWrites,r.fromCache),e.converter)}function Km(n){return n=xo(n,Eh),Lp(n),new iL(n,e=>nC(n,e))}(function(e,r=!0){$D(lu),Vi(new ai("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new Eh(new HD(i.getProvider("auth-internal")),new GD(a,i.getProvider("app-check-internal")),hM(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Nr(S1,C1,e),Nr(S1,C1,"esm2020")})();const rC="@firebase/installations",F0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1e4,sC=`w:${F0}`,oC="FIS_v2",oL="https://firebaseinstallations.googleapis.com/v1",aL=60*60*1e3,lL="installations",uL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ra=new Va(lL,uL,cL);function aC(n){return n instanceof li&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC({projectId:n}){return`${oL}/projects/${n}/installations`}function uC(n){return{token:n.token,requestStatus:2,expiresIn:fL(n.expiresIn),creationTime:Date.now()}}async function cC(n,e){const i=(await e.json()).error;return Ra.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function hC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function hL(n,{refreshToken:e}){const r=hC(n);return r.append("Authorization",dL(e)),r}async function fC(n){const e=await n();return e.status>=500&&e.status<600?n():e}function fL(n){return Number(n.replace("s","000"))}function dL(n){return`${oC} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL({appConfig:n,heartbeatServiceProvider:e},{fid:r}){const i=lC(n),s=hC(n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:oC,appId:n.appId,sdkVersion:sC},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await fC(()=>fetch(i,l));if(u.ok){const c=await u.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:uC(c.authToken)}}else throw await cC("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^[cdef][\w-]{21}$/,Ay="";function yL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=vL(n);return gL.test(r)?r:Ay}catch{return Ay}}function vL(n){return mL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Map;function mC(n,e){const r=Up(n);gC(r,e),_L(r,e)}function gC(n,e){const r=pC.get(n);if(r)for(const i of r)i(e)}function _L(n,e){const r=wL();r&&r.postMessage({key:n,fid:e}),xL()}let fa=null;function wL(){return!fa&&"BroadcastChannel"in self&&(fa=new BroadcastChannel("[Firebase] FID Change"),fa.onmessage=n=>{gC(n.data.key,n.data.fid)}),fa}function xL(){pC.size===0&&fa&&(fa.close(),fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="firebase-installations-database",EL=1,Pa="firebase-installations-store";let Wm=null;function U0(){return Wm||(Wm=$I(bL,EL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Pa)}}})),Wm}async function Vd(n,e){const r=Up(n),s=(await U0()).transaction(Pa,"readwrite"),o=s.objectStore(Pa),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&mC(n,e.fid),e}async function yC(n){const e=Up(n),i=(await U0()).transaction(Pa,"readwrite");await i.objectStore(Pa).delete(e),await i.done}async function zp(n,e){const r=Up(n),s=(await U0()).transaction(Pa,"readwrite"),o=s.objectStore(Pa),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&mC(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0(n){let e;const r=await zp(n.appConfig,i=>{const s=TL(i),o=IL(n,s);return e=o.registrationPromise,o.installationEntry});return r.fid===Ay?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function TL(n){const e=n||{fid:yL(),registrationStatus:0};return vC(e)}function IL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ra.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=SL(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:CL(n)}:{installationEntry:e}}async function SL(n,e){try{const r=await pL(n,e);return Vd(n.appConfig,r)}catch(r){throw aC(r)&&r.customData.serverCode===409?await yC(n.appConfig):await Vd(n.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function CL(n){let e=await A1(n.appConfig);for(;e.registrationStatus===1;)await dC(100),e=await A1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await z0(n);return i||r}return e}function A1(n){return zp(n,e=>{if(!e)throw Ra.create("installation-not-found");return vC(e)})}function vC(n){return kL(n)?{fid:n.fid,registrationStatus:0}:n}function kL(n){return n.registrationStatus===1&&n.registrationTime+iC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL({appConfig:n,heartbeatServiceProvider:e},r){const i=NL(n,r),s=hL(n,r),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:sC,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await fC(()=>fetch(i,l));if(u.ok){const c=await u.json();return uC(c)}else throw await cC("Generate Auth Token",u)}function NL(n,{fid:e}){return`${lC(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(n,e=!1){let r;const i=await zp(n.appConfig,o=>{if(!_C(o))throw Ra.create("not-registered");const a=o.authToken;if(!e&&OL(a))return o;if(a.requestStatus===1)return r=RL(n,e),o;{if(!navigator.onLine)throw Ra.create("app-offline");const l=DL(o);return r=PL(n,l),l}});return r?await r:i.authToken}async function RL(n,e){let r=await N1(n.appConfig);for(;r.authToken.requestStatus===1;)await dC(100),r=await N1(n.appConfig);const i=r.authToken;return i.requestStatus===0?$0(n,e):i}function N1(n){return zp(n,e=>{if(!_C(e))throw Ra.create("not-registered");const r=e.authToken;return ML(r)?{...e,authToken:{requestStatus:0}}:e})}async function PL(n,e){try{const r=await AL(n,e),i={...e,authToken:r};return await Vd(n.appConfig,i),r}catch(r){if(aC(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await yC(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Vd(n.appConfig,i)}throw r}}function _C(n){return n!==void 0&&n.registrationStatus===2}function OL(n){return n.requestStatus===2&&!jL(n)}function jL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+aL}function DL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function ML(n){return n.requestStatus===1&&n.requestTime+iC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(n){const e=n,{installationEntry:r,registrationPromise:i}=await z0(e);return i?i.catch(console.error):$0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(n,e=!1){const r=n;return await FL(r),(await $0(r,e)).token}async function FL(n){const{registrationPromise:e}=await z0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(n){if(!n||!n.options)throw Gm("App Configuration");if(!n.name)throw Gm("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!n.options[r])throw Gm(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Gm(n){return Ra.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="installations",zL="installations-internal",$L=n=>{const e=n.getProvider("app").getImmediate(),r=UL(e),i=Fa(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},BL=n=>{const e=n.getProvider("app").getImmediate(),r=Fa(e,wC).getImmediate();return{getId:()=>LL(r),getToken:s=>VL(r,s)}};function qL(){Vi(new ai(wC,$L,"PUBLIC")),Vi(new ai(zL,BL,"PRIVATE"))}qL();Nr(rC,F0);Nr(rC,F0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="analytics",HL="firebase_id",KL="origin",WL=60*1e3,GL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",B0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new _p("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},lr=new Va("analytics","Analytics",QL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(n){if(!n.startsWith(B0)){const e=lr.create("invalid-gtag-resource",{gtagURL:n});return Fn.warn(e.message),""}return n}function xC(n){return Promise.all(n.map(e=>e.catch(r=>r)))}function XL(n,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,e)),r}function JL(n,e){const r=XL("firebase-js-sdk-policy",{createScriptURL:YL}),i=document.createElement("script"),s=`${B0}?l=${n}&id=${e}`;i.src=r?r==null?void 0:r.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function ZL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function e6(n,e,r,i,s,o){const a=i[s];try{if(a)await e[a];else{const u=(await xC(r)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(l){Fn.error(l)}n("config",s,o)}async function t6(n,e,r,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await xC(r);for(const u of a){const c=l.find(h=>h.measurementId===u),d=c&&e[c.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,s||{})}catch(o){Fn.error(o)}}function n6(n,e,r,i){async function s(o,...a){try{if(o==="event"){const[l,u]=a;await t6(n,e,r,l,u)}else if(o==="config"){const[l,u]=a;await e6(n,e,r,i,l,u)}else if(o==="consent"){const[l,u]=a;n("consent",l,u)}else if(o==="get"){const[l,u,c]=a;n("get",l,u,c)}else if(o==="set"){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Fn.error(l)}}return s}function r6(n,e,r,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=n6(o,n,e,r),{gtagCore:o,wrappedGtag:window[s]}}function i6(n){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(B0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=30,o6=1e3;class a6{constructor(e={},r=o6){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const bC=new a6;function l6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function u6(n){var a;const{appId:e,apiKey:r}=n,i={method:"GET",headers:l6(r)},s=GL.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw lr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function c6(n,e=bC,r){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw lr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw lr.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new d6;return setTimeout(async()=>{l.abort()},WL),EC({appId:i,apiKey:s,measurementId:o},a,l,e)}async function EC(n,{throttleEndTimeMillis:e,backoffCount:r},i,s=bC){var l;const{appId:o,measurementId:a}=n;try{await h6(i,e)}catch(u){if(a)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await u6(n);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!f6(c)){if(s.deleteThrottleMetadata(o),a)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const d=Number((l=c==null?void 0:c.customData)==null?void 0:l.httpStatus)===503?ox(r,s.intervalMillis,s6):ox(r,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return s.setThrottleMetadata(o,h),Fn.debug(`Calling attemptFetch again in ${d} millis`),EC(n,h,i,s)}}function h6(n,e){return new Promise((r,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);n.addEventListener(()=>{clearTimeout(o),i(lr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function f6(n){if(!(n instanceof li)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class d6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function p6(n,e,r,i,s){if(s&&s.global){n("event",r,i);return}else{const o=await e,a={...i,send_to:o};n("event",r,a)}}async function m6(n,e,r,i){if(i&&i.global){const s={};for(const o of Object.keys(r))s[`user_properties.${o}`]=r[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(){if(VI())try{await FI()}catch(n){return Fn.warn(lr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Fn.warn(lr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function y6(n,e,r,i,s,o,a){const l=c6(n);l.then(m=>{r[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Fn.error(m)),e.push(l);const u=g6().then(m=>{if(m)return i.getId()}),[c,d]=await Promise.all([l,u]);i6(o)||JL(o,c.measurementId),s("js",new Date);const h=(a==null?void 0:a.config)??{};return h[KL]="firebase",h.update=!0,d!=null&&(h[HL]=d),s("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.app=e}_delete(){return delete Ll[this.app.options.appId],Promise.resolve()}}let Ll={},R1=[];const P1={};let Qm="dataLayer",_6="gtag",O1,q0,j1=!1;function w6(){const n=[];if(LI()&&n.push("This is a browser extension environment."),wO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),r=lr.create("invalid-analytics-context",{errorInfo:e});Fn.warn(r.message)}}function x6(n,e,r){w6();const i=n.options.appId;if(!i)throw lr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw lr.create("no-api-key");if(Ll[i]!=null)throw lr.create("already-exists",{id:i});if(!j1){ZL(Qm);const{wrappedGtag:o,gtagCore:a}=r6(Ll,R1,P1,Qm,_6);q0=o,O1=a,j1=!0}return Ll[i]=y6(n,R1,P1,e,O1,Qm,r),new v6(n)}function b6(n=Xv()){n=Xt(n);const e=Fa(n,Fd);return e.isInitialized()?e.getImmediate():E6(n)}function E6(n,e={}){const r=Fa(n,Fd);if(r.isInitialized()){const s=r.getImmediate();if(wo(e,r.getOptions()))return s;throw lr.create("already-initialized")}return r.initialize({options:e})}function T6(n,e,r){n=Xt(n),m6(q0,Ll[n.app.options.appId],e,r).catch(i=>Fn.error(i))}function I6(n,e,r,i){n=Xt(n),p6(q0,Ll[n.app.options.appId],e,r,i).catch(s=>Fn.error(s))}const D1="@firebase/analytics",M1="0.10.19";function S6(){Vi(new ai(Fd,(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return x6(i,s,r)},"PUBLIC")),Vi(new ai("analytics-internal",n,"PRIVATE")),Nr(D1,M1),Nr(D1,M1,"esm2020");function n(e){try{const r=e.getProvider(Fd).getImmediate();return{logEvent:(i,s,o)=>I6(r,i,s,o),setUserProperties:(i,s)=>T6(r,i,s)}}catch(r){throw lr.create("interop-component-reg-failed",{reason:r})}}}S6();const TC={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"};TC.apiKey||console.warn("Firebase API Key is missing. Cloud sync will not work.");const H0=BI(TC),Ym=UD(H0),C6=new ls,Wr=K5(H0);typeof window<"u"&&b6(H0);const IC=ue.createContext(),jo=()=>ue.useContext(IC),k6=({children:n})=>{const e=Rf(()=>vt.contacts.orderBy("lastUpdated").reverse().toArray()),r=Rf(()=>vt.schedules.orderBy("date").toArray()),i=Rf(()=>vt.settings.get("userProfile")),[s,o]=ue.useState(null),[a,l]=ue.useState(null),[u,c]=ue.useState(!1),[d,h]=ue.useState(!1);ue.useEffect(()=>{const j=k4(Ym,q=>{l(q)});return()=>j()},[]);const m=async()=>{try{const q=(await Q4(Ym,C6)).user,W=sa(Wr,"users",q.uid);return(await ky(W)).exists()&&await vt.contacts.count()===0&&window.confirm("")&&(l(q),await I()),q}catch(j){throw console.error("Login Error:",j),j}},v=async()=>{try{await A4(Ym)}catch(j){console.error("Logout Error:",j)}},w=async()=>{if(!a){console.error("Sync Error: No user logged in");return}c(!0);try{const j=await vt.contacts.toArray(),q=await vt.schedules.toArray(),W=await vt.settings.get("userProfile")||{},Z=ae=>ae==null?null:ae instanceof Date?ae.toISOString():Array.isArray(ae)?ae.map(he=>Z(he)):typeof ae=="object"?Object.entries(ae).reduce((he,[be,ce])=>(ce!==void 0&&(he[be]=Z(ce)),he),{}):ae,de=sa(Wr,"users",a.uid);console.log("Attempting to write profile to:",de.path),await k1(de,{profile:Z(W),lastSynced:new Date().toISOString(),email:a.email||""},{merge:!0}),console.log("Profile sync successful");const ee=async(ae,he)=>{const be=Bm(Wr,"users",a.uid,ae);console.log(`Syncing ${ae}, items: ${he.length}`);let ce=[];try{ce=(await Hm(be)).docs.map(qt=>qt.id)}catch(We){throw console.error(`Error fetching existing ${ae}:`,We),We.code==="permission-denied"?new Error(` ${ae} `):We}const Ae=he.map(We=>We.id).filter(Boolean),Pe=ce.filter(We=>!Ae.includes(We));let Me=Km(Wr),Ye=0;for(const We of Pe)Me.delete(sa(be,We)),Ye++,Ye===500&&(await Me.commit(),Me=Km(Wr),Ye=0);for(const We of he){if(!We.id)continue;const qt=Z(We);Me.set(sa(be,We.id),qt),Ye++,Ye===500&&(await Me.commit(),Me=Km(Wr),Ye=0)}Ye>0&&await Me.commit()};await ee("contacts",j),await ee("schedules",q),console.log("Synced to cloud successfully (Mirror Mode)")}catch(j){throw console.error("Sync Error Detailed:",j),j.code==="permission-denied"||j.message.includes("permission-denied")?new Error(" Firebase Rules "):new Error(`: ${j.message}`)}finally{c(!1)}},I=async()=>{if(a){c(!0);try{const j=sa(Wr,"users",a.uid),q=await ky(j);if(q.exists()){const ce=q.data();ce.profile&&await vt.settings.put({...ce.profile,id:"userProfile"})}const W=ce=>{if(!ce||typeof ce!="object")return ce;const Ae=Array.isArray(ce)?[]:{};for(const[Pe,Me]of Object.entries(ce))typeof Me=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(Me)?Ae[Pe]=new Date(Me):typeof Me=="object"?Ae[Pe]=W(Me):Ae[Pe]=Me;return Ae},Z=Bm(Wr,"users",a.uid,"contacts"),de=await Hm(Z),ee=[];de.forEach(ce=>{ee.push(W(ce.data()))}),ee.length>0&&(await vt.contacts.clear(),await vt.contacts.bulkPut(ee));const ae=Bm(Wr,"users",a.uid,"schedules"),he=await Hm(ae),be=[];he.forEach(ce=>{be.push(W(ce.data()))}),be.length>0&&(await vt.schedules.clear(),await vt.schedules.bulkPut(be)),console.log("Synced from cloud successfully (Mirror Mode)")}catch(j){throw console.error("Download Error:",j),j}finally{c(!1)}}};ue.useEffect(()=>{(async()=>{await vt.settings.get("userProfile")||await vt.settings.add({id:"userProfile",name:"",bio:"",avatar:"",themeColor:"#2b6cee",links:[],categories:["","","","",""]})})()},[]),ue.useEffect(()=>{if(i!=null&&i.themeColor){document.documentElement.style.setProperty("--primary-color",i.themeColor);const j=i.themeColor.replace("#",""),q=parseInt(j.substring(0,2),16),W=parseInt(j.substring(2,4),16),Z=parseInt(j.substring(4,6),16);document.documentElement.style.setProperty("--primary-color-rgb",`${q}, ${W}, ${Z}`)}},[i==null?void 0:i.themeColor]);const C=async j=>{const q=crypto.randomUUID();return await vt.contacts.add({...j,id:q,lastUpdated:new Date}),a&&w().catch(console.error),q},b=async(j,q)=>{h(!0),await vt.contacts.update(j,{...q,lastUpdated:new Date}),a&&w().catch(console.error)},T=async(j,q)=>await vt.contacts.update(j,{position:q}),N=async j=>{await vt.settings.update("userProfile",j),a&&w().catch(console.error)},O=async j=>{await vt.contacts.delete(j),a&&w().catch(console.error)},L=async()=>{if(!a)throw new Error("");try{const j=await vt.settings.get("userProfile");if(!j)throw new Error("");const q=sa(Wr,"public_profiles",a.uid),W={name:j.name||"",avatar:j.avatar||"",bio:j.bio||"",links:j.links||[],uid:a.uid,updatedAt:new Date().toISOString()};return console.log("Publishing profile to Firestore...",W),await k1(q,W),console.log("Profile published successfully!"),a.uid}catch(j){throw console.error("Failed to publish profile:",j),j}},U=async(j,q)=>{const W=await vt.contacts.get(j);if(W){const Z=[...W.memories||[],{...q,date:q.date||new Date}];await vt.contacts.update(j,{memories:Z,lastUpdated:new Date}),a&&w().catch(console.error)}},[A,R]=ue.useState(null),D=(j,q="")=>new Promise(W=>{R({title:j,placeholder:q,onConfirm:Z=>{R(null),W(Z)},onCancel:()=>{R(null),W(null)}})}),M=async j=>{const q=crypto.randomUUID();return await vt.schedules.add({...j,id:q}),a&&w().catch(console.error),q},F=async(j,q)=>{await vt.schedules.update(j,q),a&&w().catch(console.error)},$=async j=>{await vt.schedules.delete(j),a&&w().catch(console.error)};return y.jsxs(IC.Provider,{value:{contacts:e,schedules:r,currentContactId:s,setCurrentContactId:o,userProfile:i,updateContactPosition:T,updateProfile:N,publishProfile:L,addContact:C,updateContact:b,deleteContact:O,addMemory:U,addSchedule:M,updateSchedule:F,deleteSchedule:$,customPrompt:D,promptConfig:A,setPromptConfig:R,currentUser:a,login:m,logout:v,syncToCloud:w,syncFromCloud:I,isSyncing:u,unsavedChanges:d,setUnsavedChanges:h},children:[n,A&&y.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[y.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:A.title}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:A.placeholder,onKeyDown:j=>{j.key==="Enter"&&A.onConfirm(j.target.value),j.key==="Escape"&&A.onCancel()},id:"custom-prompt-input"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:A.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:()=>{const j=document.getElementById("custom-prompt-input").value;A.onConfirm(j)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},A6=()=>{const n=Ro(),{contacts:e,addContact:r,updateContact:i,addMemory:s,userProfile:o,updateProfile:a,customPrompt:l,schedules:u,currentUser:c,login:d}=jo(),[h,m]=ue.useState(!1),[v,w]=ue.useState(!1),[I,C]=ue.useState(!1),[b,T]=ue.useState(!1),[N,O]=ue.useState(!1),L=ue.useMemo(()=>c?`${window.location.origin+window.location.pathname.replace(/\/$/,"")}/#/p/${c.uid}`:null,[c]),U=[{icon:"auto_awesome_motion",title:"",desc:"",color:"text-primary"},{icon:"qr_code_2",title:"",desc:" QR  QR Code",color:"text-amber-400"},{icon:"hub",title:"",desc:"",color:"text-indigo-400"},{icon:"search",title:"",desc:"",color:"text-purple-400"},{icon:"calendar_month",title:"",desc:"",color:"text-emerald-400"},{icon:"cloud_sync",title:"100% ",desc:" Google",color:"text-blue-400"}],A=ue.useMemo(()=>{if(!u||!e)return[];const Se=new Date;return Se.setHours(0,0,0,0),u.filter(Be=>{const At=new Date(Be.date);At.setHours(0,0,0,0);const yn=Math.ceil((At.getTime()-Se.getTime())/(1e3*60*60*24));return yn>=0&&yn<=3}).map(Be=>({...Be,diffDays:Math.ceil((new Date(Be.date).getTime()-Se.getTime())/(1e3*60*60*24))}))},[u,e]),[R,D]=ue.useState(!1),[M,F]=ue.useState(""),[$,j]=ue.useState(null),[q,W]=ue.useState(""),[Z,de]=ue.useState(""),[ee,ae]=ue.useState(""),[he,be]=ue.useState(""),[ce,Ae]=ue.useState(""),[Pe,Me]=ue.useState(new Date().toISOString().split("T")[0]),[Ye,We]=ue.useState("synced"),[qt,Le]=ue.useState(!1),ci=ue.useMemo(()=>(o==null?void 0:o.categories)||["","","","",""],[o]);mt.useEffect(()=>{ci.length>0&&!ce&&Ae(ci[0])},[ci]);const hi=ue.useMemo(()=>M.trim()?(e==null?void 0:e.filter(Se=>{var Be,At;return Se.name.toLowerCase().includes(M.toLowerCase())||((Be=Se.company)==null?void 0:Be.toLowerCase().includes(M.toLowerCase()))||((At=Se.tags)==null?void 0:At.some(yn=>yn.toLowerCase().includes(M.toLowerCase())))}).sort((Se,Be)=>new Date(Be.lastUpdated).getTime()-new Date(Se.lastUpdated).getTime()))||[]:[],[e,M]),ot=async()=>{let Se=$;if(!Se&&Z.trim())Se=await r({name:Z,phone:he,tags:[ce,""],importance:50,birthday:ee||null,memories:[]});else if(Se&&(ee||he)){const Be={};ee&&(Be.birthday=ee),he&&(Be.phone=he),await i(Se,Be)}Se&&q.trim()&&(await s(Se,{content:q,location:"",date:new Date(Pe)}),D(!1),F(""),j(null),W(""),de(""),ae(""),be(""),Ae(ci[0]||""),Me(new Date().toISOString().split("T")[0]),m(!1),navigator.vibrate&&navigator.vibrate(50))},jr=async Se=>{const Be=Se.target.files[0];if(Be){w(!0);try{const At=new FileReader,Do=await new Promise(Hi=>{At.onloadend=()=>Hi(At.result),At.readAsDataURL(Be)}),Ht=Do.split(",")[1];let _n=(await(await new JP(void 0).getGenerativeModel({model:"gemini-1.5-flash"}).generateContent([`
         JSON 
        {
          "name": "",
          "phone": " ( 09xxxxxxxx )",
          "email": "",
          "company": "",
          "title": "",
          "address": "",
          "website": "",
          "summary": ""
        }
        
        1. 
        2. 
        3. 
        4.  JSON 
      `,{inlineData:{data:Ht,mimeType:Be.type}}])).response).text();_n=_n.replace(/```json/g,"").replace(/```/g,"").trim();const Dt=JSON.parse(_n),dr=await r({name:Dt.name||"",phone:Dt.phone||"",email:Dt.email||"",company:Dt.company||"",address:Dt.address||"",website:Dt.website||"",bio:Dt.title?`${Dt.title}`:"",cardImage:Do,ocrText:_n,tags:["AI "],memories:[{date:new Date,content:Dt.summary||` AI ${Dt.name}${Dt.company}`,location:""}],importance:50});navigator.vibrate&&navigator.vibrate(50),n(`/profile/${dr}`)}catch(At){console.error("Gemini OCR failed:",At),alert(" API Key ")}finally{w(!1),m(!1)}}};return y.jsxs("div",{className:"w-full h-full",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 mb-2 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>O(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-amber-400 hover:bg-amber-400/10 hover:border-amber-400/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"qr_code_2"})}),y.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>n("/settings"),children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-primary to-primary/60 p-0.5 shadow-lg shadow-primary/20 relative z-10",children:y.jsx("div",{className:"w-full h-full rounded-[14px] bg-[#0a0a0c] flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar?y.jsx("img",{src:o.avatar,className:"w-full h-full object-cover",alt:"avatar"}):y.jsx("span",{className:"material-symbols-outlined text-white/20 text-2xl",children:"person"})})})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-clip-text",children:""}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"size-1.5 rounded-full bg-primary animate-pulse"}),y.jsx("p",{className:"text-[10px] font-black text-white/30 tracking-[0.2em] uppercase",children:"Nexus Core Active"})]})]})]}),y.jsx("button",{onClick:()=>T(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 hover:border-primary/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"help_outline"})})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{type:"text",placeholder:"...",value:M,onChange:Se=>F(Se.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/40 transition-all"})]})]}),A.length>0&&y.jsx("div",{className:"px-6 py-4 animate-in fade-in slide-in-from-top-4 duration-500",children:y.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-[28px] p-5 backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"notification_important"}),y.jsx("h2",{className:"text-xs font-bold text-primary uppercase tracking-widest",children:""})]}),y.jsx("div",{className:"space-y-4",children:A.map(Se=>y.jsxs("div",{className:"flex items-center justify-between group",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 truncate",children:Se.title}),y.jsxs("div",{className:"flex gap-2",children:[Se.contactIds.slice(0,3).map(Be=>{var At;return y.jsx("button",{onClick:()=>n(`/profile/${Be}`),className:"text-[10px] text-primary/80 font-bold hover:text-primary transition-colors underline decoration-primary/30 underline-offset-2",children:(At=e.find(yn=>yn.id===Be))==null?void 0:At.name},Be)}),Se.contactIds.length>3&&y.jsx("span",{className:"text-[10px] text-white/30",children:"..."})]})]}),y.jsxs("div",{className:"text-right shrink-0 ml-4",children:[y.jsx("p",{className:"text-[10px] font-black text-primary uppercase",children:Se.diffDays===0?"":`${Se.diffDays} `}),y.jsxs("button",{onClick:()=>n("/vault"),className:"text-[10px] font-bold text-white/30 hover:text-white transition-colors flex items-center gap-1 mt-1",children:["",y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"})]})]})]},Se.id))})]})}),y.jsx("div",{className:"mb-8 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:["","","",""].map((Se,Be)=>y.jsx("button",{className:`px-5 py-2.5 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-300 ${Be===0?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white border border-white/5"}`,children:Se},Se))})}),y.jsxs("main",{className:"flex-1 pb-32",children:[v&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/5 rounded-3xl border border-white/5 border-dashed",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl animate-pulse"}),y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent relative z-10"})]}),y.jsx("span",{className:"mt-4 text-sm font-medium text-white/40 animate-pulse",children:"..."})]}),(e==null?void 0:e.length)===0&&!v&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-white/20",children:[y.jsx("div",{className:"size-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"database_off"})}),y.jsx("p",{className:"text-sm font-medium",children:""})]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:hi.map(Se=>{var Be,At,yn;return y.jsx("div",{onClick:()=>n(`/profile/${Se.id}`),className:"glass-card-modern group p-5 rounded-[24px] cursor-pointer",children:y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"size-16 rounded-2xl overflow-hidden bg-black/40 border border-white/10 group-hover:border-primary/40 transition-all duration-500",children:Se.cardImage?y.jsx("img",{src:Se.cardImage,alt:Se.name,className:"size-full object-cover group-hover:scale-110 transition-transform duration-700"}):y.jsx("div",{className:"size-full flex items-center justify-center text-white/10 text-2xl font-black bg-gradient-to-br from-white/5 to-transparent",children:Se.name[0]})}),Se.importance>80&&y.jsx("div",{className:"absolute -top-1.5 -right-1.5 size-5 bg-primary rounded-full border-2 border-[#030303] flex items-center justify-center shadow-lg shadow-primary/40",children:y.jsx("span",{className:"material-symbols-outlined text-[10px] text-white font-black",children:"priority_high"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[y.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors truncate",children:Se.name}),y.jsx("span",{className:"text-[10px] font-medium text-white/20 tracking-wider uppercase",children:new Date(Se.lastUpdated).toLocaleDateString("zh-TW",{month:"short",day:"numeric"})})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[10px] font-black text-primary px-2.5 py-1 bg-primary/10 rounded-lg border border-primary/20 uppercase tracking-widest",children:((Be=Se.tags)==null?void 0:Be[0])||""}),y.jsx("p",{className:"text-[13px] text-white/40 truncate italic font-medium",children:((yn=(At=Se.memories)==null?void 0:At[0])==null?void 0:yn.content)||"..."})]})]}),y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 -translate-x-2 group-hover:translate-x-0",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary text-xl",children:"chevron_right"})})]})},Se.id)})})]}),y.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:y.jsxs("div",{className:"relative",children:[h&&y.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[y.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:jr})]}),y.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>D(!0),children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),y.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${h?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>m(!h),children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),b&&y.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-white/10 rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"px-8 pt-10 pb-6 text-center border-b border-white/5 bg-gradient-to-b from-primary/10 to-transparent",children:[y.jsx("div",{className:"size-16 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"auto_awesome"})}),y.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-bold text-primary/60 uppercase tracking-[0.2em] mt-1",children:"Nexus Mind Guide"})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto no-scrollbar space-y-6",children:U.map((Se,Be)=>y.jsxs("div",{className:"flex gap-4 group",children:[y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0 group-hover:bg-white/10 transition-colors",children:y.jsx("span",{className:`material-symbols-outlined text-[20px] ${Se.color}`,children:Se.icon})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("h4",{className:"text-xs font-bold text-white/90",children:Se.title}),y.jsx("p",{className:"text-[10px] leading-relaxed text-white/40 font-medium",children:Se.desc})]})]},Be))}),y.jsx("div",{className:"p-6 bg-white/5",children:y.jsx("button",{onClick:()=>T(!1),className:"w-full py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 active:scale-95",children:""})})]})}),N&&y.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center px-4 pb-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>O(!1)}),y.jsxs("div",{className:"w-full max-w-[440px] bg-gradient-to-b from-[#1a1c22] to-[#0a0a0c] border border-white/10 rounded-[40px] p-8 relative z-10 animate-in slide-in-from-bottom-full duration-500 shadow-2xl",children:[y.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full mx-auto mb-10"}),y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"size-20 rounded-[28px] bg-amber-400/10 flex items-center justify-center mb-6 ring-1 ring-amber-400/20",children:y.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"qr_code_2"})}),y.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:""}),c?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-white/40 text-sm mb-10 leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),y.jsx("div",{className:"p-6 bg-white rounded-[32px] shadow-2xl relative z-10",children:y.jsx(Gv,{value:L,size:240,level:"H",includeMargin:!0,imageSettings:{src:(o==null?void 0:o.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:48,width:48,excavate:!0}})})]}),y.jsxs("div",{className:"mt-10 w-full p-5 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between group cursor-pointer hover:bg-white/10 transition-all",onClick:()=>{navigator.clipboard.writeText(L),alert("")},children:[y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-1",children:""}),y.jsx("span",{className:"text-xs text-primary font-bold truncate max-w-[200px]",children:L})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors",children:"content_copy"})]})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-white/40 text-sm leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("button",{onClick:d,className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-black font-black text-sm hover:bg-white/90 transition-all active:scale-95 shadow-xl",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})," Google "]})]})]}),y.jsx("button",{onClick:()=>O(!1),className:"w-full h-16 bg-white/5 hover:bg-white/10 text-white font-bold rounded-3xl mt-8 transition-all border border-white/5 active:scale-95",children:""})]})]}),R&&y.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[y.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>D(!1)}),y.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[y.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),y.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),y.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),y.jsx("button",{onClick:()=>D(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:M,onChange:Se=>{F(Se.target.value),$||de(Se.target.value)}}),$&&y.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[y.jsx("span",{children:""}),y.jsx("button",{onClick:()=>{j(null),F(Z)},className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),M&&!$&&y.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:hi.length>0?hi.map(Se=>{var Be;return y.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{j(Se.id),F(Se.name),de(Se.name)},children:[y.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:Se.name}),y.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(Be=Se.tags)==null?void 0:Be[0]})]},Se.id)}):y.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",M,""]})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[ci.map(Se=>y.jsx("button",{onClick:()=>Ae(Se),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${ce===Se?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:Se},Se)),y.jsxs("button",{onClick:async()=>{const Se=await l("","...");if(Se){const Be=(o==null?void 0:o.categories)||["","","","",""];Be.includes(Se)||(a({...o,categories:[...Be,Se]}),Ae(Se))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:q,onChange:Se=>W(Se.target.value)})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"event"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"date",className:"w-1/2 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-white text-[13px] focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:Pe,onChange:Se=>Me(Se.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"call"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-4 text-white text-[14px] focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:he,onChange:Se=>be(Se.target.value)})]})]}),y.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${($||Z)&&q?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!(($||Z)&&q),onClick:ot,children:""})]})]})]})]})},N6=()=>{const n=Ro(),{contacts:e,userProfile:r}=jo(),[i,s]=ue.useState(""),[o,a]=ue.useState(""),l=ue.useMemo(()=>["",...(r==null?void 0:r.categories)||["","","","",""]],[r]),u=ue.useMemo(()=>{let c=e||[];if(o!==""&&(c=c.filter(d=>{var h;return(h=d.tags)==null?void 0:h.includes(o)})),i.trim()){const d=i.toLowerCase();c=c.filter(h=>{var T,N,O,L,U,A;const m=(T=h.name)==null?void 0:T.toLowerCase().includes(d),v=(N=h.company)==null?void 0:N.toLowerCase().includes(d),w=(O=h.phone)==null?void 0:O.toLowerCase().includes(d),I=(L=h.tags)==null?void 0:L.some(R=>R.toLowerCase().includes(d)),C=(U=h.ocrText)==null?void 0:U.toLowerCase().includes(d),b=(A=h.memories)==null?void 0:A.some(R=>R.content.toLowerCase().includes(d));return m||v||w||I||C||b?(h._matchReason=m?"":v?"":w?"":I?` #${d}`:C?"":"",!0):!1})}else o===""&&(c=c.slice(0,5));return c},[e,i,o]);return y.jsxs("div",{className:"bg-mesh pb-32 overflow-x-hidden",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-12 pb-6 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",onClick:()=>n(-1),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),y.jsx("div",{className:"size-10"})]})]}),y.jsx("div",{className:"px-6 py-6",children:y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 text-[20px] group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{className:"block w-full h-12 pl-12 pr-10 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[14px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:i,onChange:c=>s(c.target.value)}),i&&y.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:y.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>s(""),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),y.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:l.map(c=>y.jsx("button",{onClick:()=>a(c),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${o===c?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:y.jsx("span",{className:"text-xs font-bold tracking-wider",children:c})},c))}),y.jsxs("main",{className:"px-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[y.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:i||o!==""?` (${u.length})`:""}),y.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),y.jsx("div",{className:"grid gap-4",children:u.map(c=>y.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>n(`/profile/${c.id}`),children:y.jsxs("div",{className:"p-5 flex gap-4",children:[y.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:c.cardImage?y.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:c.cardImage,alt:c.name}):y.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[y.jsx("div",{className:"flex items-center gap-2 mb-1",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:c._matchReason||""})}),y.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:c.name}),y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[c.phone&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),y.jsx("span",{className:"text-[11px] font-medium",children:c.phone})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),y.jsx("span",{className:"text-[11px] font-medium",children:new Date(c.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},c.id))}),u.length===0&&y.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),y.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},R6=()=>{var M,F,$,j,q;const{id:n}=lI(),e=Ro(),{updateContact:r,deleteContact:i,userProfile:s,updateProfile:o,customPrompt:a,schedules:l}=jo(),u=Rf(()=>vt.contacts.get(n),[n]),c=ue.useMemo(()=>!l||!n?[]:l.filter(W=>W.contactIds.includes(n)),[l,n]),[d,h]=ue.useState(!1),[m,v]=ue.useState(!1),[w,I]=ue.useState(null),[C,b]=ue.useState(!1),T=(W,Z)=>{const de=W.target.files[0];if(!de)return;const ee=new FileReader;ee.onloadend=()=>{const ae=ee.result;I(he=>({...he,cardImage:ae}))},ee.readAsDataURL(de)};if(!u)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const N=()=>{var W;I({name:u.name,company:u.company||"",birthday:u.birthday||"",phone:u.phone||"",email:u.email||"",tags:((W=u.tags)==null?void 0:W.join(", "))||"",ocrText:u.ocrText||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[],cardImage:u.cardImage||""}),v(!0),h(!1)},O=async()=>{await r(n,{name:w.name,company:w.company,birthday:w.birthday||null,phone:w.phone,email:w.email,tags:w.tags.split(",").map(W=>W.trim()).filter(W=>W),ocrText:w.ocrText,events:w.events,bio:w.bio,links:w.links,gallery:w.gallery,cardImage:w.cardImage}),v(!1)},L=()=>{var Z;const W=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(Z=u.tags)!=null&&Z.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(W),b(!0),setTimeout(()=>b(!1),2e3),h(!1)},U=async()=>{window.confirm(` ${u.name} `)&&(await i(n),e("/"))},A=async W=>{if(window.confirm("")){const Z=[...u.memories];Z.splice(W,1),await r(n,{memories:Z})}},R=async(W,Z)=>{const de=await a("","...",W);if(de&&de!==W){const ee=[...s.categories||["","","","",""]];ee[Z]=de,await o({...s,categories:ee});const ae=w.tags.split(",").map(he=>he.trim()).filter(he=>he);if(ae.includes(W)){const he=ae.map(be=>be===W?de:be);I({...w,tags:he.join(", ")})}}},D=async(W,Z)=>{if(window.confirm(`${W}`)){const de=(s.categories||["","","","",""]).filter((ae,he)=>he!==Z);await o({...s,categories:de});const ee=w.tags.split(",").map(ae=>ae.trim()).filter(ae=>ae);if(ee.includes(W)){const ae=ee.filter(he=>he!==W);I({...w,tags:ae.join(", ")})}}};return y.jsxs("div",{className:"bg-nexus min-h-screen text-white pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-8 pb-4 flex items-center justify-between transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsx("div",{onClick:()=>e(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90 cursor-pointer",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile Analytics"})]}),y.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[y.jsx("button",{onClick:()=>h(!d),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_vert"})}),d&&y.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[y.jsxs("button",{onClick:N,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),y.jsxs("button",{onClick:L,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),y.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),y.jsxs("button",{onClick:U,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),y.jsx("span",{children:""})]})]})]})]}),y.jsx("div",{className:"px-6 py-4",children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((M=u.tags)==null?void 0:M[0])||""})}),y.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),y.jsxs("div",{className:"flex flex-col gap-1",children:[u.company&&y.jsxs("div",{className:"flex items-center gap-2 text-primary/80 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"business"}),y.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:u.company})]}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 text-white/60 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.email&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.email})]})]})]})})]})}),y.jsxs("div",{className:"px-6 pb-2",children:[c.length>0&&y.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary ml-1",children:""}),y.jsx("div",{className:"space-y-3",children:c.map(W=>{const Z=Math.ceil((new Date(W.date)-new Date().setHours(0,0,0,0))/864e5),de=Z>=0&&Z<=3;return y.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${de?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/5":"bg-white/5 border-white/10"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm text-white",children:W.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(W.date).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})})]}),y.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg ${de?"bg-primary text-white":"bg-white/10 text-white/60"}`,children:Z===0?"":Z<0?"":`${Z} `})]}),de&&y.jsxs("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-primary animate-pulse",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"info"}),""]})]},W.id)})})]}),m?y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsxs("div",{onClick:()=>document.getElementById("card-image-input").click(),className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/10 group cursor-pointer hover:border-primary/50 transition-all shadow-2xl",children:[w.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})}):y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-white/20",children:[y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_a_photo"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("input",{id:"card-image-input",type:"file",accept:"image/*",className:"hidden",onChange:W=>T(W)})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:w.name,onChange:W=>I({...w,name:W.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:w.company,onChange:W=>I({...w,company:W.target.value})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:w.phone,onChange:W=>I({...w,phone:W.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-1/2 bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-3 text-white text-[14px] font-medium focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:w.birthday,onChange:W=>I({...w,birthday:W.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"email",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"example@mail.com",value:w.email,onChange:W=>I({...w,email:W.target.value})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:y.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((s==null?void 0:s.categories)||["","","","",""]).map((W,Z)=>{const de=w.tags.split(",").map(ae=>ae.trim()).filter(ae=>ae),ee=de.includes(W);return y.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-1 py-1.5 rounded-xl text-[11px] font-bold transition-all border ${ee?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:[y.jsx("span",{onClick:()=>{let ae;ee?ae=de.filter(he=>he!==W):ae=[...de,W],I({...w,tags:ae.join(", ")})},className:"cursor-pointer",children:W}),y.jsxs("div",{className:"flex items-center gap-0.5 ml-1 border-l border-white/10 pl-1",children:[y.jsx("button",{type:"button",onClick:()=>R(W,Z),className:"p-0.5 text-white/20 hover:text-white transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{type:"button",onClick:()=>D(W,Z),className:"p-0.5 text-white/20 hover:text-red-400 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},W)}),y.jsxs("button",{type:"button",onClick:async()=>{const W=await a("","...");if(W){const Z=(s==null?void 0:s.categories)||["","","","",""];if(!Z.includes(W)){o({...s,categories:[...Z,W]});const de=w.tags.split(",").map(ee=>ee.trim()).filter(ee=>ee);I({...w,tags:[...de,W].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),y.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.bio,onChange:W=>I({...w,bio:W.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>I({...w,links:[...w.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.links.map((W,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-300",children:[y.jsx("input",{className:"w-20 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all shrink-0",placeholder:"",value:W.label,onChange:de=>{const ee=[...w.links];ee[Z].label=de.target.value,I({...w,links:ee})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:W.url,onChange:de=>{const ee=[...w.links];ee[Z].url=de.target.value,I({...w,links:ee})}}),y.jsx("button",{onClick:()=>I({...w,links:w.links.filter((de,ee)=>ee!==Z)}),className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]}),y.jsx("input",{id:"gallery-upload-input",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:W=>{Array.from(W.target.files).forEach(de=>{const ee=new FileReader;ee.onloadend=()=>{I(ae=>({...ae,gallery:[...ae.gallery,ee.result]}))},ee.readAsDataURL(de)})}})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[w.gallery.map((W,Z)=>y.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[y.jsx("img",{src:W,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),y.jsx("button",{onClick:()=>I({...w,gallery:w.gallery.filter((de,ee)=>ee!==Z)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},Z)),y.jsx("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.ocrText,onChange:W=>I({...w,ocrText:W.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),y.jsxs("button",{onClick:()=>I({...w,events:[...w.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.events.map((W,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-200",children:[y.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-2 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-[110px] shrink-0",value:W.date,onChange:de=>{const ee=[...w.events];ee[Z].date=de.target.value,I({...w,events:ee})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:W.title,onChange:de=>{const ee=[...w.events];ee[Z].title=de.target.value,I({...w,events:ee})}}),y.jsx("button",{onClick:()=>{const de=[...w.events];de.splice(Z,1),I({...w,events:de})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"flex gap-3 pt-6",children:[y.jsx("button",{onClick:O,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),y.jsx("button",{onClick:()=>v(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),y.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:((F=u.ocrText)==null?void 0:F.split(`
`)[0])||""}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 mt-2 text-primary/80 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&y.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((W,Z)=>y.jsxs("a",{href:W.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),W.label]},Z))}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[($=u.tags)==null?void 0:$.map((W,Z)=>y.jsxs("div",{className:`${Z===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",W]},Z)),u.birthday&&y.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})]}),y.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&y.jsxs("div",{className:"px-4 mb-6",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((W,Z)=>y.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:y.jsx("img",{src:W,className:"w-full h-full object-cover",alt:`gallery-${Z}`})},Z))})]}),y.jsxs("div",{className:"px-4",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),y.jsxs("div",{className:"space-y-8",children:[(j=u.memories)==null?void 0:j.map((W,Z)=>y.jsxs("div",{className:`relative ${Z!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[y.jsx("div",{className:`absolute ${Z===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex flex-col flex-1",children:[y.jsx("span",{className:"text-white font-semibold text-sm",children:W.content}),y.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(W.date).toLocaleDateString("zh-TW"),"  ",W.location]})]}),y.jsx("button",{onClick:()=>A(Z),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},Z)),!((q=u.memories)!=null&&q.length)&&y.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),C&&y.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),y.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},P6=()=>{var T;const n=Ro(),{contacts:e,updateContact:r,addMemory:i}=jo(),[s,o]=ue.useState(!1),[a,l]=ue.useState(""),[u,c]=ue.useState(65),[d,h]=ue.useState(40),[m,v]=ue.useState(null);ue.useEffect(()=>{e&&e.length>0&&!m&&(v(e[0].id),c(e[0].importance||50))},[e]);const w=N=>{const O=parseInt(N.target.value);c(O),m&&r(m,{importance:O})},I=async()=>{!a.trim()||!m||(await i(m,{content:a,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),l(""),o(!1))},C=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),I())},b=e==null?void 0:e.find(N=>N.id===m);return y.jsxs("div",{className:"text-white overflow-hidden select-none relative h-screen bg-[#030303]",children:[y.jsxs("div",{className:"absolute top-0 w-full z-50 px-8 pt-6 pb-4 flex justify-between items-center transition-all",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none -z-10"}),y.jsx("div",{className:"text-sm font-black tracking-tighter",onClick:()=>n(-1),children:y.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded-md backdrop-blur-md",children:"9:41"})}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),y.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>o(!0),children:[y.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),y.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),y.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>n("/"),children:[y.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[y.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),y.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[y.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),y.jsxs("div",{className:"text-center py-2",children:[y.jsx("div",{className:"text-sm font-bold truncate w-28",children:(b==null?void 0:b.name)||""}),y.jsx("div",{className:"text-xs text-white/50",children:((T=b==null?void 0:b.tags)==null?void 0:T[0])||""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:u,onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${u}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${u>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${u>50?"text-black/40":"text-white/40"}`,children:""})]})]}),y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:N=>h(parseInt(N.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${d}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${d>50?"text-black/40":"text-white/40"}`,children:"speed"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${d>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>n("/search"),children:y.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),y.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),y.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),s&&y.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),y.jsx("button",{onClick:()=>o(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),y.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:a,onChange:N=>l(N.target.value),onKeyDown:C}),y.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),y.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:I,children:" SAVE TO VAULT"})]})]})}),y.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[y.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),y.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},O6=()=>{const n=Ro(),{contacts:e,schedules:r,addSchedule:i,deleteSchedule:s}=jo(),[o,a]=ue.useState(!1),[l,u]=ue.useState({title:"",date:"",contactIds:[]}),[c,d]=ue.useState(""),h=ue.useMemo(()=>e?e.filter(I=>{var C;return I.name.toLowerCase().includes(c.toLowerCase())||((C=I.tags)==null?void 0:C.some(b=>b.toLowerCase().includes(c.toLowerCase())))}):[],[e,c]),m=ue.useMemo(()=>{if(!e)return[];const I=[],C=new Date;C.setHours(0,0,0,0),r&&r.forEach(T=>{const N=new Date(T.date);N.setHours(0,0,0,0);const O=Math.ceil((N-C)/(1e3*60*60*24));I.push({id:`schedule-${T.id}`,date:N,title:T.title,description:`: ${T.contactIds.map(L=>{var U;return(U=e.find(A=>A.id===L))==null?void 0:U.name}).filter(Boolean).join(", ")}`,type:"schedule",diffDays:O,isUpcoming:O<=30&&O>=0,contactIds:T.contactIds,scheduleId:T.id})});const b=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(T=>{if(T.birthday){const[N,O,L]=T.birthday.split("-").map(Number),U=new Date(C.getFullYear(),O-1,L);U<C&&U.setFullYear(C.getFullYear()+1);const A=Math.ceil((U-C)/(1e3*60*60*24));I.push({id:`birthday-${T.id}`,contactId:T.id,contactName:T.name,date:U,title:"",description:`${T.name} `,type:"birthday",diffDays:A,isUpcoming:A<=30&&A>=0})}if(T.events&&T.events.forEach((N,O)=>{const L=new Date(N.date);L.setHours(0,0,0,0);const U=Math.ceil((L-C)/(1e3*60*60*24));I.push({id:`event-${T.id}-${O}`,contactId:T.id,contactName:T.name,date:L,title:N.title,description:"",type:N.type||"event",diffDays:U,isUpcoming:U<=30&&U>=0})}),T.memories&&T.memories.forEach((N,O)=>{const L=new Date(N.date);L.setHours(0,0,0,0);const U=Math.ceil((L-C)/(1e3*60*60*24));I.push({id:`memory-${T.id}-${O}`,contactId:T.id,contactName:T.name,date:L,title:"",description:N.content.substring(0,20)+(N.content.length>20?"...":""),type:"memory",diffDays:U,isUpcoming:U<=30&&U>=0});let A;for(;(A=b.exec(N.content))!==null;){const[R,D,M,F]=A,$=D?parseInt(D.replace(/[-/]/,"")):C.getFullYear(),j=new Date($,parseInt(M)-1,parseInt(F));if(j.setHours(0,0,0,0),!isNaN(j.getTime())){const q=Math.ceil((j-C)/864e5);I.push({id:`extracted-mem-${T.id}-${O}-${A.index}`,contactId:T.id,contactName:T.name,date:j,title:"",description:`: ${R}`,type:"extracted",diffDays:q,isUpcoming:q<=30&&q>=0})}}}),T.ocrText){let N;for(;(N=b.exec(T.ocrText))!==null;){const[O,L,U,A]=N,R=L?parseInt(L.replace(/[-/]/,"")):C.getFullYear(),D=new Date(R,parseInt(U)-1,parseInt(A));if(D.setHours(0,0,0,0),!isNaN(D.getTime())){const M=Math.ceil((D-C)/864e5);I.push({id:`extracted-ocr-${T.id}-${N.index}`,contactId:T.id,contactName:T.name,date:D,title:"/",description:`: ${O}`,type:"extracted",diffDays:M,isUpcoming:M<=30&&M>=0})}}}}),I.sort((T,N)=>N.date-T.date)},[e]),v=m.filter(I=>I.isUpcoming),w=m.filter(I=>!I.isUpcoming);return y.jsxs("div",{className:"pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>n(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"Important Schedules"})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"size-11 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/20",children:y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})})]})]}),y.jsxs("main",{className:"p-4 space-y-8",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),y.jsx("div",{className:"space-y-3",children:v.length>0?v.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${I.type==="birthday"?"bg-pink-500/20 text-pink-500":I.type==="memory"?"bg-blue-500/20 text-blue-500":I.type==="extracted"?"bg-amber-500/20 text-amber-500":I.type==="schedule"?"bg-emerald-500/20 text-emerald-500":"bg-primary/20 text-primary"}`,children:y.jsx("span",{className:"material-symbols-outlined",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-bold text-sm text-white/90 truncate",children:I.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-0.5 truncate",children:I.contactName||""})]}),y.jsxs("div",{className:"text-right shrink-0",children:[y.jsx("p",{className:"text-xs font-bold text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),y.jsx("p",{className:`text-[10px] font-bold ${I.diffDays===0?"text-red-500":"text-primary"}`,children:I.diffDays===0?"":`${I.diffDays} `}),I.type==="schedule"&&y.jsx("button",{onClick:C=>{C.stopPropagation(),window.confirm("")&&s(I.scheduleId)},className:"mt-1 text-red-500/40 hover:text-red-500 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"delete"})})]})]}),y.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:I.description})]})]},I.id)):y.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:y.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),y.jsx("div",{className:"space-y-3",children:w.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsxs("div",{className:"text-center min-w-[50px]",children:[y.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:I.date.getFullYear()}),y.jsx("p",{className:"text-sm font-black text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),y.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[I.title,"  ",I.contactName||""]}),y.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:I.description})]})]},I.id))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-[480px] bg-[#1a1a1a] border-t sm:border border-white/10 rounded-t-[32px] sm:rounded-[32px] p-8 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:""}),y.jsx("button",{onClick:()=>a(!1),className:"material-symbols-outlined text-white/40",children:"close"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all",placeholder:"...",value:l.title,onChange:I=>u({...l,title:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all color-scheme-dark",value:l.date,onChange:I=>u({...l,date:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center ml-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),l.contactIds.length>0&&y.jsxs("span",{className:"text-[10px] font-bold text-primary/60",children:[" ",l.contactIds.length," "]})]}),y.jsxs("div",{className:"relative mb-3",children:[y.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-[18px]",children:"search"}),y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-white text-xs font-medium outline-none focus:ring-1 ring-primary/50 transition-all",placeholder:"...",value:c,onChange:I=>d(I.target.value)}),c&&y.jsx("button",{onClick:()=>d(""),className:"absolute right-3 top-1/2 -translate-y-1/2 size-6 flex items-center justify-center text-white/20 hover:text-white/40",children:y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),y.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar p-1",children:h.length>0?h.map(I=>y.jsx("button",{onClick:()=>{const C=l.contactIds.includes(I.id)?l.contactIds.filter(b=>b!==I.id):[...l.contactIds,I.id];u({...l,contactIds:C})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${l.contactIds.includes(I.id)?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:I.name},I.id)):y.jsx("div",{className:"w-full py-4 text-center text-[10px] text-white/20 italic",children:""})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:async()=>{!l.title||!l.date||(await i(l),a(!1),u({title:"",date:"",contactIds:[]}))},disabled:!l.title||!l.date,className:"flex-1 py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none",children:""})]})]})]})})]})},j6=()=>{var he,be;const n=Ro(),{userProfile:e,updateProfile:r,publishProfile:i,customPrompt:s,currentUser:o,login:a,logout:l,syncToCloud:u,syncFromCloud:c,isSyncing:d,setUnsavedChanges:h}=jo(),[m,v]=ue.useState(!1),[w,I]=ue.useState(!1),[C,b]=ue.useState(!1),[T,N]=ue.useState(null),[O,L]=ue.useState(""),[U,A]=ue.useState({name:"",bio:"",avatar:"",themeColor:"",links:[],categories:[]}),R=JSON.stringify(U)!==JSON.stringify({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",themeColor:(e==null?void 0:e.themeColor)||"#2b6cee",links:(e==null?void 0:e.links)||[],categories:(e==null?void 0:e.categories)||["","","","",""]});ue.useEffect(()=>(h(m&&R),()=>h(!1)),[m,R,h]),ue.useEffect(()=>{const ce=Ae=>{m&&R&&(Ae.preventDefault(),Ae.returnValue="")};return window.addEventListener("beforeunload",ce),()=>{window.removeEventListener("beforeunload",ce)}},[m,R]);const D=()=>{m&&R?window.confirm("")&&(h(!1),n(-1)):n(-1)};ue.useEffect(()=>{e&&A({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",themeColor:e.themeColor||"#2b6cee",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const M=[{name:"Nexus Blue",value:"#2b6cee"},{name:"Cyber Purple",value:"#8b5cf6"},{name:"Neon Pink",value:"#ec4899"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Crimson",value:"#ef4444"},{name:"Midnight",value:"#334155"}],F=async()=>{await r(U),h(!1),v(!1)},$=ce=>{const Ae=ce.target.files[0];if(!Ae)return;const Pe=new FileReader;Pe.onloadend=()=>{A(Me=>({...Me,avatar:Pe.result}))},Pe.readAsDataURL(Ae)},j=async()=>{try{await u(),alert("")}catch(ce){alert(""+ce.message)}},q=async()=>{if(window.confirm(""))try{await c(),alert("")}catch(ce){alert(""+ce.message)}},W=async()=>{const ce=await s("","...");if(ce)if(m)U.categories.includes(ce)||A({...U,categories:[...U.categories,ce]});else{const Ae=e.categories||["","","","",""];Ae.includes(ce)||await r({...e,categories:[...Ae,ce]})}},Z=async(ce,Ae)=>{const Pe=await s("","...",ce);if(Pe&&Pe!==ce)if(m){const Me=[...U.categories];Me[Ae]=Pe,A({...U,categories:Me})}else{const Me=[...e.categories||["","","","",""]];Me[Ae]=Pe,await r({categories:Me})}},de=async ce=>{const Ae=m?U.categories[ce]:e.categories[ce];if(window.confirm(`${Ae}`))if(m)A({...U,categories:U.categories.filter((Pe,Me)=>Me!==ce)});else{const Me=[...e.categories||["","","","",""]].filter((Ye,We)=>We!==ce);await r({categories:Me})}},ee=async()=>{if(!o){alert(" Google ");return}b(!0),N(null);try{const ce=await i(),Pe=`${window.location.origin+window.location.pathname.replace(/\/$/,"").replace(/\/settings$/,"")}/#/p/${ce}`;L(Pe),N("success"),I(!0)}catch(ce){console.error("Share failed:",ce),N("error"),alert(""+ce.message)}finally{b(!1)}},ae=async ce=>{m?A({...U,themeColor:ce}):await r({...e,themeColor:ce})};return e?y.jsxs("div",{className:"text-white pb-24",children:[y.jsxs("div",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:D,className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"v1.0.1  User Preferences"})]})]}),m?y.jsx("button",{onClick:F,className:"text-xs font-black text-white px-6 py-2.5 rounded-xl bg-primary hover:bg-primary-dark transition-all uppercase tracking-widest shadow-lg shadow-primary/20",children:""}):y.jsx("button",{onClick:()=>v(!0),className:"text-xs font-black text-primary px-5 py-2.5 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary hover:text-white transition-all uppercase tracking-widest shadow-lg shadow-primary/10",children:""})]})]}),y.jsxs("main",{className:"px-6 pt-8 space-y-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:U.avatar?y.jsx("img",{src:U.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):y.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),m&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>document.getElementById("avatar-input").click(),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})}),y.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:$})]})]}),y.jsx("div",{className:"text-center space-y-1 w-full",children:m?y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:U.name,onChange:ce=>A({...U,name:ce.target.value}),placeholder:""}):y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})}),!m&&y.jsxs("button",{onClick:ee,disabled:C,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:border-primary/50 hover:bg-primary/10 transition-all group",children:[y.jsx("span",{className:`material-symbols-outlined text-sm ${C?"animate-spin":"text-primary"}`,children:C?"sync":"share"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/60 group-hover:text-primary transition-colors",children:""})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),m?y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px]",value:U.bio,onChange:ce=>A({...U,bio:ce.target.value}),placeholder:"..."}):y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic whitespace-pre-wrap",children:e.bio||""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),m&&y.jsxs("button",{onClick:()=>A({...U,links:[...U.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),y.jsxs("div",{className:"space-y-2",children:[(he=m?U.links:e.links)==null?void 0:he.map((ce,Ae)=>y.jsx("div",{className:"flex gap-2 items-center",children:m?y.jsxs(y.Fragment,{children:[y.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:ce.label,onChange:Pe=>{const Me=[...U.links];Me[Ae].label=Pe.target.value,A({...U,links:Me})}}),y.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:ce.url,onChange:Pe=>{const Me=[...U.links];Me[Ae].url=Pe.target.value,A({...U,links:Me})}}),y.jsx("button",{onClick:()=>A({...U,links:U.links.filter((Pe,Me)=>Me!==Ae)}),className:"text-white/20 hover:text-red-400 p-1",children:y.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):y.jsxs("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[y.jsx("span",{className:"text-sm font-medium text-white/80",children:ce.label}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},Ae)),!m&&((be=e.links)==null?void 0:be.length)===0&&y.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!m&&y.jsxs("div",{className:"pt-8 space-y-4",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:o?y.jsxs("div",{className:"divide-y divide-white/5",children:[y.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[y.jsx("img",{src:o.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-bold truncate",children:o.displayName}),y.jsx("p",{className:"text-[10px] text-white/30 truncate",children:o.email})]}),y.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),y.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:j,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_upload"}),d?"...":""]}),y.jsxs("button",{onClick:q,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):y.jsxs("button",{onClick:a,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[y.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-bold",children:" Google "}),y.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[y.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),y.jsx("span",{className:"text-sm",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),y.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),y.jsx("span",{className:"text-sm",children:""})]})})]}),y.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y.jsxs("button",{onClick:W,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:(m?U.categories:e.categories).map((ce,Ae)=>y.jsxs("div",{className:"group flex items-center gap-2 pl-3 pr-2 py-1.5 rounded-full text-[11px] font-bold transition-all border border-white/10 bg-white/5 text-white/80 hover:border-primary/30",children:[y.jsx("span",{children:ce}),y.jsxs("div",{className:"flex items-center gap-1 border-l border-white/10 ml-1 pl-1",children:[y.jsx("button",{onClick:()=>Z(ce,Ae),className:"text-white/20 hover:text-primary transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{onClick:()=>de(Ae),className:"text-white/20 hover:text-red-400 transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},Ae))}),!(m?U.categories:e.categories).length&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[y.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),y.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),y.jsx("div",{className:"text-center pt-4",children:y.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]}),y.jsxs("div",{className:"space-y-4 pt-8 border-t border-white/5",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 block",children:" ()"}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:y.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-3",children:[M.map(ce=>y.jsx("button",{onClick:()=>ae(ce.value),className:`relative aspect-square rounded-xl transition-all duration-300 ${(m?U.themeColor:e.themeColor)===ce.value?"scale-110 ring-2 ring-white ring-offset-4 ring-offset-[#030303]":"hover:scale-105 opacity-50"} cursor-pointer`,style:{backgroundColor:ce.value},title:ce.name,children:(m?U.themeColor:e.themeColor)===ce.value&&y.jsx("span",{className:"material-symbols-outlined text-white text-sm absolute inset-0 flex items-center justify-center",children:"check"})},ce.value)),y.jsxs("div",{className:"relative aspect-square rounded-xl bg-white/5 border border-dashed border-white/20 flex items-center justify-center group overflow-hidden",children:[y.jsx("input",{type:"color",value:m?U.themeColor:e.themeColor,onChange:ce=>ae(ce.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-white transition-colors",children:"palette"})]})]})})]})]}),w&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-6",children:[y.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>I(!1)}),y.jsx("div",{className:"relative w-full max-w-sm bg-[#1c1f27] border border-white/10 rounded-[32px] p-8 animate-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[y.jsx("div",{className:"size-16 rounded-2xl bg-primary/20 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"qr_code_2"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}),y.jsx("div",{className:"p-5 bg-white rounded-3xl shadow-xl",children:y.jsx(Gv,{value:O,size:200,level:"H",includeMargin:!0,imageSettings:{src:(e==null?void 0:e.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),y.jsxs("div",{className:"w-full space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/5 border border-white/10 rounded-xl",children:[y.jsx("span",{className:"flex-1 text-[10px] text-white/40 truncate",children:O}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(O),alert("")},className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("button",{onClick:()=>I(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all",children:""})]})]})})]})]}):null},D6=()=>{const{uid:n}=lI(),[e,r]=ue.useState(null),[i,s]=ue.useState(!0),[o,a]=ue.useState(null);return ue.useEffect(()=>{(async()=>{if(!n){a(""),s(!1);return}try{console.log("Fetching profile for UID:",n);const u=sa(Wr,"public_profiles",n),c=await ky(u);if(c.exists()){const d=c.data();console.log("Profile data found:",d),r(d)}else console.warn("No such profile document in 'public_profiles' for UID:",n),console.log("Current window location:",window.location.href),console.log("UID from params:",n),a("")}catch(u){console.error("Error fetching public profile:",u),u.code==="permission-denied"?a(""):a(""+(u.message||""))}finally{s(!1)}})()},[n]),i?y.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o||!e?y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/10 mb-4",children:"person_off"}),y.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:o||""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}):y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white selection:bg-primary/30",children:[y.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none opacity-50",children:[y.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 blur-[120px] rounded-full"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),y.jsxs("main",{className:"relative z-10 max-w-2xl mx-auto px-6 pt-24 pb-32",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-16 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[y.jsxs("div",{className:"relative mb-8 group",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-700 scale-110"}),e.avatar?y.jsx("img",{src:e.avatar,className:"relative size-32 rounded-full object-cover border-4 border-white/10 shadow-2xl",alt:e.name}):y.jsx("div",{className:"relative size-32 rounded-full bg-gradient-to-br from-white/10 to-white/5 border-4 border-white/10 flex items-center justify-center shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-5xl text-white/20",children:"person"})})]}),y.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4 bg-gradient-to-b from-white to-white/60 bg-clip-text text-transparent",children:e.name}),y.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6"}),y.jsx("p",{className:"text-lg text-white/60 leading-relaxed font-medium max-w-md italic whitespace-pre-wrap",children:e.bio})]}),e.links&&e.links.length>0&&y.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[y.jsx("h2",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] text-center mb-8",children:""}),e.links.map((l,u)=>y.jsxs("a",{href:l.url.startsWith("http")?l.url:`https://${l.url}`,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-3xl hover:bg-white/10 hover:border-primary/50 transition-all duration-500 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[y.jsx("div",{className:"size-10 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary transition-colors",children:l.label.toLowerCase().includes("ig")||l.label.toLowerCase().includes("instagram")?"camera":l.label.toLowerCase().includes("fb")||l.label.toLowerCase().includes("facebook")?"facebook":"link"})}),y.jsx("span",{className:"font-bold text-lg text-white/80 group-hover:text-white transition-colors",children:l.label})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary group-hover:translate-x-1 transition-all relative z-10",children:"arrow_forward"})]},u))]}),y.jsxs("footer",{className:"mt-24 flex flex-col items-center gap-6 animate-in fade-in duration-1000 delay-500",children:[y.jsx("div",{className:"h-px w-12 bg-white/10 mb-2"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-bold text-white/90 mb-2",children:" Nexus Mind"}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("a",{href:window.location.origin+"/nexus-mind/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl bg-primary/10 border border-primary/20 text-primary hover:bg-primary hover:text-white transition-all duration-300 font-bold text-sm shadow-lg shadow-primary/5",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"explore"}),""]})]}),y.jsxs("div",{className:"mt-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:[y.jsx("span",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Powered by"}),y.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Nexus Mind"})]})]})]})]})};function M6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function L6(n,e,r){return e=H6(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function L1(n,e){return U6(n)||M6(n,e)||SC(n,e)||B6()}function V6(n){return F6(n)||z6(n)||SC(n)||$6()}function F6(n){if(Array.isArray(n))return Ny(n)}function U6(n){if(Array.isArray(n))return n}function z6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function SC(n,e){if(n){if(typeof n=="string")return Ny(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ny(n,e)}}function Ny(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function $6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q6(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function H6(n){var e=q6(n,"string");return typeof e=="symbol"?e:String(e)}var K6=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(V6(Object.entries(e).filter(function(s){var o=L1(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=L1(s,2),a=o[0],l=o[1];return L6({},a,l)}))))};function Ry(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function W6(n){if(Array.isArray(n))return n}function G6(n){if(Array.isArray(n))return Ry(n)}function Q6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Y6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function X6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z6(n,e){return W6(n)||Y6(n,e)||CC(n,e)||X6()}function V1(n){return G6(n)||Q6(n)||CC(n)||J6()}function CC(n,e){if(n){if(typeof n=="string")return Ry(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ry(n,e):void 0}}function eV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(d){return d}:s,a=e.methodNames,l=a===void 0?[]:a,u=e.initPropNames,c=u===void 0?[]:u;return ue.forwardRef(function(d,h){var m=ue.useRef(),v=ue.useMemo(function(){var C=Object.fromEntries(c.filter(function(b){return d.hasOwnProperty(b)}).map(function(b){return[b,d[b]]}));return n(C)},[]);F1(function(){v(o(m.current))},ue.useLayoutEffect),F1(function(){return v._destructor instanceof Function?v._destructor:void 0});var w=ue.useCallback(function(C){for(var b=arguments.length,T=new Array(b>1?b-1:0),N=1;N<b;N++)T[N-1]=arguments[N];return v[C]instanceof Function?v[C].apply(v,T):void 0},[v]),I=ue.useRef({});return Object.keys(K6(d,[].concat(V1(l),V1(c)))).filter(function(C){return I.current[C]!==d[C]}).forEach(function(C){return w(C,d[C])}),I.current=d,ue.useImperativeHandle(h,function(){return Object.fromEntries(l.map(function(C){return[C,function(){for(var b=arguments.length,T=new Array(b),N=0;N<b;N++)T[N]=arguments[N];return w.apply(void 0,[C].concat(T))}]}))},[w]),mt.createElement(i,{ref:m})})}function F1(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ue.useEffect,r=ue.useRef(),i=ue.useRef(!1),s=ue.useRef(!1),o=ue.useState(0),a=Z6(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(u){return u+1}),function(){s.current&&r.current&&r.current()}},[])}var Py="http://www.w3.org/1999/xhtml";const U1={svg:"http://www.w3.org/2000/svg",xhtml:Py,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $p(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),U1.hasOwnProperty(e)?{space:U1[e],local:n}:n}function tV(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Py&&e.documentElement.namespaceURI===Py?e.createElement(n):e.createElementNS(r,n)}}function nV(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function kC(n){var e=$p(n);return(e.local?nV:tV)(e)}function rV(){}function K0(n){return n==null?rV:function(){return this.querySelector(n)}}function iV(n){typeof n!="function"&&(n=K0(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),u,c,d=0;d<a;++d)(u=o[d])&&(c=n.call(u,u.__data__,d,o))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new cr(i,this._parents)}function sV(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function oV(){return[]}function AC(n){return n==null?oV:function(){return this.querySelectorAll(n)}}function aV(n){return function(){return sV(n.apply(this,arguments))}}function lV(n){typeof n=="function"?n=aV(n):n=AC(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(i.push(n.call(u,u.__data__,c,a)),s.push(u));return new cr(i,s)}function NC(n){return function(){return this.matches(n)}}function RC(n){return function(e){return e.matches(n)}}var uV=Array.prototype.find;function cV(n){return function(){return uV.call(this.children,n)}}function hV(){return this.firstElementChild}function fV(n){return this.select(n==null?hV:cV(typeof n=="function"?n:RC(n)))}var dV=Array.prototype.filter;function pV(){return Array.from(this.children)}function mV(n){return function(){return dV.call(this.children,n)}}function gV(n){return this.selectAll(n==null?pV:mV(typeof n=="function"?n:RC(n)))}function yV(n){typeof n!="function"&&(n=NC(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new cr(i,this._parents)}function PC(n){return new Array(n.length)}function vV(){return new cr(this._enter||this._groups.map(PC),this._parents)}function Ud(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Ud.prototype={constructor:Ud,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function _V(n){return function(){return n}}function wV(n,e,r,i,s,o){for(var a=0,l,u=e.length,c=o.length;a<c;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new Ud(n,o[a]);for(;a<u;++a)(l=e[a])&&(s[a]=l)}function xV(n,e,r,i,s,o,a){var l,u,c=new Map,d=e.length,h=o.length,m=new Array(d),v;for(l=0;l<d;++l)(u=e[l])&&(m[l]=v=a.call(u,u.__data__,l,e)+"",c.has(v)?s[l]=u:c.set(v,u));for(l=0;l<h;++l)v=a.call(n,o[l],l,o)+"",(u=c.get(v))?(i[l]=u,u.__data__=o[l],c.delete(v)):r[l]=new Ud(n,o[l]);for(l=0;l<d;++l)(u=e[l])&&c.get(m[l])===u&&(s[l]=u)}function bV(n){return n.__data__}function EV(n,e){if(!arguments.length)return Array.from(this,bV);var r=e?xV:wV,i=this._parents,s=this._groups;typeof n!="function"&&(n=_V(n));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var d=i[c],h=s[c],m=h.length,v=TV(n.call(d,d&&d.__data__,c,i)),w=v.length,I=l[c]=new Array(w),C=a[c]=new Array(w),b=u[c]=new Array(m);r(d,h,I,C,b,v,e);for(var T=0,N=0,O,L;T<w;++T)if(O=I[T]){for(T>=N&&(N=T+1);!(L=C[N])&&++N<w;);O._next=L||null}}return a=new cr(a,i),a._enter=l,a._exit=u,a}function TV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function IV(){return new cr(this._exit||this._groups.map(PC),this._parents)}function SV(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function CV(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=r[u],d=i[u],h=c.length,m=l[u]=new Array(h),v,w=0;w<h;++w)(v=c[w]||d[w])&&(m[w]=v);for(;u<s;++u)l[u]=r[u];return new cr(l,this._parents)}function kV(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function AV(n){n||(n=NV);function e(h,m){return h&&m?n(h.__data__,m.__data__):!h-!m}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d=0;d<l;++d)(c=a[d])&&(u[d]=c);u.sort(e)}return new cr(s,this._parents).order()}function NV(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function RV(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function PV(){return Array.from(this)}function OV(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function jV(){let n=0;for(const e of this)++n;return n}function DV(){return!this.node()}function MV(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function LV(n){return function(){this.removeAttribute(n)}}function VV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function FV(n,e){return function(){this.setAttribute(n,e)}}function UV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function zV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function $V(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function BV(n,e){var r=$p(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?VV:LV:typeof e=="function"?r.local?$V:zV:r.local?UV:FV)(r,e))}function OC(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function qV(n){return function(){this.style.removeProperty(n)}}function HV(n,e,r){return function(){this.style.setProperty(n,e,r)}}function KV(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function WV(n,e,r){return arguments.length>1?this.each((e==null?qV:typeof e=="function"?KV:HV)(n,e,r??"")):tu(this.node(),n)}function tu(n,e){return n.style.getPropertyValue(e)||OC(n).getComputedStyle(n,null).getPropertyValue(e)}function GV(n){return function(){delete this[n]}}function QV(n,e){return function(){this[n]=e}}function YV(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function XV(n,e){return arguments.length>1?this.each((e==null?GV:typeof e=="function"?YV:QV)(n,e)):this.node()[n]}function jC(n){return n.trim().split(/^|\s+/)}function W0(n){return n.classList||new DC(n)}function DC(n){this._node=n,this._names=jC(n.getAttribute("class")||"")}DC.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function MC(n,e){for(var r=W0(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function LC(n,e){for(var r=W0(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function JV(n){return function(){MC(this,n)}}function ZV(n){return function(){LC(this,n)}}function eF(n,e){return function(){(e.apply(this,arguments)?MC:LC)(this,n)}}function tF(n,e){var r=jC(n+"");if(arguments.length<2){for(var i=W0(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?eF:e?JV:ZV)(r,e))}function nF(){this.textContent=""}function rF(n){return function(){this.textContent=n}}function iF(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function sF(n){return arguments.length?this.each(n==null?nF:(typeof n=="function"?iF:rF)(n)):this.node().textContent}function oF(){this.innerHTML=""}function aF(n){return function(){this.innerHTML=n}}function lF(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function uF(n){return arguments.length?this.each(n==null?oF:(typeof n=="function"?lF:aF)(n)):this.node().innerHTML}function cF(){this.nextSibling&&this.parentNode.appendChild(this)}function hF(){return this.each(cF)}function fF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dF(){return this.each(fF)}function pF(n){var e=typeof n=="function"?n:kC(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function mF(){return null}function gF(n,e){var r=typeof n=="function"?n:kC(n),i=e==null?mF:typeof e=="function"?e:K0(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function yF(){var n=this.parentNode;n&&n.removeChild(this)}function vF(){return this.each(yF)}function _F(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function wF(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function xF(n){return this.select(n?wF:_F)}function bF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function EF(n){return function(e){n.call(this,e,this.__data__)}}function TF(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function IF(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function SF(n,e,r){return function(){var i=this.__on,s,o=EF(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function CF(n,e,r){var i=TF(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<o;++s)if((a=i[s]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?SF:IF,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function VC(n,e,r){var i=OC(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function kF(n,e){return function(){return VC(this,n,e)}}function AF(n,e){return function(){return VC(this,n,e.apply(this,arguments))}}function NF(n,e){return this.each((typeof e=="function"?AF:kF)(n,e))}function*RF(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var FC=[null];function cr(n,e){this._groups=n,this._parents=e}function Th(){return new cr([[document.documentElement]],FC)}function PF(){return this}cr.prototype=Th.prototype={constructor:cr,select:iV,selectAll:lV,selectChild:fV,selectChildren:gV,filter:yV,data:EV,enter:vV,exit:IV,join:SV,merge:CV,selection:PF,order:kV,sort:AV,call:RV,nodes:PV,node:OV,size:jV,empty:DV,each:MV,attr:BV,style:WV,property:XV,classed:tF,text:sF,html:uF,raise:hF,lower:dF,append:pF,insert:gF,remove:vF,clone:xF,datum:bF,on:CF,dispatch:NF,[Symbol.iterator]:RF};function Sr(n){return typeof n=="string"?new cr([[document.querySelector(n)]],[document.documentElement]):new cr([[n]],FC)}function OF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ki(n,e){if(n=OF(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var jF={value:()=>{}};function Ih(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new $f(r)}function $f(n){this._=n}function DF(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}$f.prototype=Ih.prototype={constructor:$f,on:function(n,e){var r=this._,i=DF(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=MF(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=z1(r[s],n.name,e);else if(e==null)for(s in r)r[s]=z1(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new $f(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function MF(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function z1(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=jF,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const LF={passive:!1},th={capture:!0,passive:!1};function Xm(n){n.stopImmediatePropagation()}function Vl(n){n.preventDefault(),n.stopImmediatePropagation()}function UC(n){var e=n.document.documentElement,r=Sr(n).on("dragstart.drag",Vl,th);"onselectstart"in e?r.on("selectstart.drag",Vl,th):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function zC(n,e){var r=n.document.documentElement,i=Sr(n).on("dragstart.drag",null);e&&(i.on("click.drag",Vl,th),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const hf=n=>()=>n;function Oy(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Oy.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function VF(n){return!n.ctrlKey&&!n.button}function FF(){return this.parentNode}function UF(n,e){return e??{x:n.x,y:n.y}}function zF(){return navigator.maxTouchPoints||"ontouchstart"in this}function $F(){var n=VF,e=FF,r=UF,i=zF,s={},o=Ih("start","drag","end"),a=0,l,u,c,d,h=0;function m(O){O.on("mousedown.drag",v).filter(i).on("touchstart.drag",C).on("touchmove.drag",b,LF).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(O,L){if(!(d||!n.call(this,O,L))){var U=N(this,e.call(this,O,L),O,L,"mouse");U&&(Sr(O.view).on("mousemove.drag",w,th).on("mouseup.drag",I,th),UC(O.view),Xm(O),c=!1,l=O.clientX,u=O.clientY,U("start",O))}}function w(O){if(Vl(O),!c){var L=O.clientX-l,U=O.clientY-u;c=L*L+U*U>h}s.mouse("drag",O)}function I(O){Sr(O.view).on("mousemove.drag mouseup.drag",null),zC(O.view,c),Vl(O),s.mouse("end",O)}function C(O,L){if(n.call(this,O,L)){var U=O.changedTouches,A=e.call(this,O,L),R=U.length,D,M;for(D=0;D<R;++D)(M=N(this,A,O,L,U[D].identifier,U[D]))&&(Xm(O),M("start",O,U[D]))}}function b(O){var L=O.changedTouches,U=L.length,A,R;for(A=0;A<U;++A)(R=s[L[A].identifier])&&(Vl(O),R("drag",O,L[A]))}function T(O){var L=O.changedTouches,U=L.length,A,R;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),A=0;A<U;++A)(R=s[L[A].identifier])&&(Xm(O),R("end",O,L[A]))}function N(O,L,U,A,R,D){var M=o.copy(),F=ki(D||U,L),$,j,q;if((q=r.call(O,new Oy("beforestart",{sourceEvent:U,target:m,identifier:R,active:a,x:F[0],y:F[1],dx:0,dy:0,dispatch:M}),A))!=null)return $=q.x-F[0]||0,j=q.y-F[1]||0,function W(Z,de,ee){var ae=F,he;switch(Z){case"start":s[R]=W,he=a++;break;case"end":delete s[R],--a;case"drag":F=ki(ee||de,L),he=a;break}M.call(Z,O,new Oy(Z,{sourceEvent:de,subject:q,target:m,identifier:R,active:he,x:F[0]+$,y:F[1]+j,dx:F[0]-ae[0],dy:F[1]-ae[1],dispatch:M}),A)}}return m.filter=function(O){return arguments.length?(n=typeof O=="function"?O:hf(!!O),m):n},m.container=function(O){return arguments.length?(e=typeof O=="function"?O:hf(O),m):e},m.subject=function(O){return arguments.length?(r=typeof O=="function"?O:hf(O),m):r},m.touchable=function(O){return arguments.length?(i=typeof O=="function"?O:hf(!!O),m):i},m.on=function(){var O=o.on.apply(o,arguments);return O===o?m:O},m.clickDistance=function(O){return arguments.length?(h=(O=+O)*O,m):Math.sqrt(h)},m}function G0(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function $C(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function Sh(){}var nh=.7,zd=1/nh,Fl="\\s*([+-]?\\d+)\\s*",rh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BF=/^#([0-9a-f]{3,8})$/,qF=new RegExp(`^rgb\\(${Fl},${Fl},${Fl}\\)$`),HF=new RegExp(`^rgb\\(${Li},${Li},${Li}\\)$`),KF=new RegExp(`^rgba\\(${Fl},${Fl},${Fl},${rh}\\)$`),WF=new RegExp(`^rgba\\(${Li},${Li},${Li},${rh}\\)$`),GF=new RegExp(`^hsl\\(${rh},${Li},${Li}\\)$`),QF=new RegExp(`^hsla\\(${rh},${Li},${Li},${rh}\\)$`),$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};G0(Sh,ih,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:B1,formatHex:B1,formatHex8:YF,formatHsl:XF,formatRgb:q1,toString:q1});function B1(){return this.rgb().formatHex()}function YF(){return this.rgb().formatHex8()}function XF(){return BC(this).formatHsl()}function q1(){return this.rgb().formatRgb()}function ih(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=BF.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?H1(e):r===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?ff(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?ff(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qF.exec(n))?new Wn(e[1],e[2],e[3],1):(e=HF.exec(n))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=KF.exec(n))?ff(e[1],e[2],e[3],e[4]):(e=WF.exec(n))?ff(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=GF.exec(n))?G1(e[1],e[2]/100,e[3]/100,1):(e=QF.exec(n))?G1(e[1],e[2]/100,e[3]/100,e[4]):$1.hasOwnProperty(n)?H1($1[n]):n==="transparent"?new Wn(NaN,NaN,NaN,0):null}function H1(n){return new Wn(n>>16&255,n>>8&255,n&255,1)}function ff(n,e,r,i){return i<=0&&(n=e=r=NaN),new Wn(n,e,r,i)}function JF(n){return n instanceof Sh||(n=ih(n)),n?(n=n.rgb(),new Wn(n.r,n.g,n.b,n.opacity)):new Wn}function jy(n,e,r,i){return arguments.length===1?JF(n):new Wn(n,e,r,i??1)}function Wn(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}G0(Wn,jy,$C(Sh,{brighter(n){return n=n==null?zd:Math.pow(zd,n),new Wn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?nh:Math.pow(nh,n),new Wn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Wn(_a(this.r),_a(this.g),_a(this.b),$d(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K1,formatHex:K1,formatHex8:ZF,formatRgb:W1,toString:W1}));function K1(){return`#${da(this.r)}${da(this.g)}${da(this.b)}`}function ZF(){return`#${da(this.r)}${da(this.g)}${da(this.b)}${da((isNaN(this.opacity)?1:this.opacity)*255)}`}function W1(){const n=$d(this.opacity);return`${n===1?"rgb(":"rgba("}${_a(this.r)}, ${_a(this.g)}, ${_a(this.b)}${n===1?")":`, ${n})`}`}function $d(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function _a(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function da(n){return n=_a(n),(n<16?"0":"")+n.toString(16)}function G1(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new Zr(n,e,r,i)}function BC(n){if(n instanceof Zr)return new Zr(n.h,n.s,n.l,n.opacity);if(n instanceof Sh||(n=ih(n)),!n)return new Zr;if(n instanceof Zr)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,u=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new Zr(a,l,u,n.opacity)}function e9(n,e,r,i){return arguments.length===1?BC(n):new Zr(n,e,r,i??1)}function Zr(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}G0(Zr,e9,$C(Sh,{brighter(n){return n=n==null?zd:Math.pow(zd,n),new Zr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?nh:Math.pow(nh,n),new Zr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new Wn(Jm(n>=240?n-240:n+120,s,i),Jm(n,s,i),Jm(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new Zr(Q1(this.h),df(this.s),df(this.l),$d(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=$d(this.opacity);return`${n===1?"hsl(":"hsla("}${Q1(this.h)}, ${df(this.s)*100}%, ${df(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Q1(n){return n=(n||0)%360,n<0?n+360:n}function df(n){return Math.max(0,Math.min(1,n||0))}function Jm(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const qC=n=>()=>n;function t9(n,e){return function(r){return n+r*e}}function n9(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function r9(n){return(n=+n)==1?HC:function(e,r){return r-e?n9(e,r,n):qC(isNaN(e)?r:e)}}function HC(n,e){var r=e-n;return r?t9(n,r):qC(isNaN(n)?e:n)}const Y1=function n(e){var r=r9(e);function i(s,o){var a=r((s=jy(s)).r,(o=jy(o)).r),l=r(s.g,o.g),u=r(s.b,o.b),c=HC(s.opacity,o.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return i.gamma=n,i}(1);function Gs(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var Dy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zm=new RegExp(Dy.source,"g");function i9(n){return function(){return n}}function s9(n){return function(e){return n(e)+""}}function o9(n,e){var r=Dy.lastIndex=Zm.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(n=n+"",e=e+"";(i=Dy.exec(n))&&(s=Zm.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:Gs(i,s)})),r=Zm.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?s9(u[0].x):i9(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)l[(h=u[d]).i]=h.x(c);return l.join("")})}var X1=180/Math.PI,My={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function KC(n,e,r,i,s,o){var a,l,u;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(u=n*r+e*i)&&(r-=n*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),n*i<e*r&&(n=-n,e=-e,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*X1,skewX:Math.atan(u)*X1,scaleX:a,scaleY:l}}var pf;function a9(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?My:KC(e.a,e.b,e.c,e.d,e.e,e.f)}function l9(n){return n==null||(pf||(pf=document.createElementNS("http://www.w3.org/2000/svg","g")),pf.setAttribute("transform",n),!(n=pf.transform.baseVal.consolidate()))?My:(n=n.matrix,KC(n.a,n.b,n.c,n.d,n.e,n.f))}function WC(n,e,r,i){function s(c){return c.length?c.pop()+" ":""}function o(c,d,h,m,v,w){if(c!==h||d!==m){var I=v.push("translate(",null,e,null,r);w.push({i:I-4,x:Gs(c,h)},{i:I-2,x:Gs(d,m)})}else(h||m)&&v.push("translate("+h+e+m+r)}function a(c,d,h,m){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),m.push({i:h.push(s(h)+"rotate(",null,i)-2,x:Gs(c,d)})):d&&h.push(s(h)+"rotate("+d+i)}function l(c,d,h,m){c!==d?m.push({i:h.push(s(h)+"skewX(",null,i)-2,x:Gs(c,d)}):d&&h.push(s(h)+"skewX("+d+i)}function u(c,d,h,m,v,w){if(c!==h||d!==m){var I=v.push(s(v)+"scale(",null,",",null,")");w.push({i:I-4,x:Gs(c,h)},{i:I-2,x:Gs(d,m)})}else(h!==1||m!==1)&&v.push(s(v)+"scale("+h+","+m+")")}return function(c,d){var h=[],m=[];return c=n(c),d=n(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,m),a(c.rotate,d.rotate,h,m),l(c.skewX,d.skewX,h,m),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,m),c=d=null,function(v){for(var w=-1,I=m.length,C;++w<I;)h[(C=m[w]).i]=C.x(v);return h.join("")}}}var u9=WC(a9,"px, ","px)","deg)"),c9=WC(l9,", ",")",")"),h9=1e-12;function J1(n){return((n=Math.exp(n))+1/n)/2}function f9(n){return((n=Math.exp(n))-1/n)/2}function d9(n){return((n=Math.exp(2*n))-1)/(n+1)}const p9=function n(e,r,i){function s(o,a){var l=o[0],u=o[1],c=o[2],d=a[0],h=a[1],m=a[2],v=d-l,w=h-u,I=v*v+w*w,C,b;if(I<h9)b=Math.log(m/c)/e,C=function(A){return[l+A*v,u+A*w,c*Math.exp(e*A*b)]};else{var T=Math.sqrt(I),N=(m*m-c*c+i*I)/(2*c*r*T),O=(m*m-c*c-i*I)/(2*m*r*T),L=Math.log(Math.sqrt(N*N+1)-N),U=Math.log(Math.sqrt(O*O+1)-O);b=(U-L)/e,C=function(A){var R=A*b,D=J1(L),M=c/(r*T)*(D*d9(e*R+L)-f9(L));return[l+M*v,u+M*w,c*D/J1(e*R+L)]}}return C.duration=b*1e3*e/Math.SQRT2,C}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return n(a,l,u)},s}(Math.SQRT2,2,4);var nu=0,nc=0,Uu=0,GC=1e3,Bd,rc,qd=0,Oa=0,Bp=0,sh=typeof performance=="object"&&performance.now?performance:Date,QC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Q0(){return Oa||(QC(m9),Oa=sh.now()+Bp)}function m9(){Oa=0}function Hd(){this._call=this._time=this._next=null}Hd.prototype=Y0.prototype={constructor:Hd,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?Q0():+r)+(e==null?0:+e),!this._next&&rc!==this&&(rc?rc._next=this:Bd=this,rc=this),this._call=n,this._time=r,Ly()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ly())}};function Y0(n,e,r){var i=new Hd;return i.restart(n,e,r),i}function g9(){Q0(),++nu;for(var n=Bd,e;n;)(e=Oa-n._time)>=0&&n._call.call(void 0,e),n=n._next;--nu}function Z1(){Oa=(qd=sh.now())+Bp,nu=nc=0;try{g9()}finally{nu=0,v9(),Oa=0}}function y9(){var n=sh.now(),e=n-qd;e>GC&&(Bp-=e,qd=n)}function v9(){for(var n,e=Bd,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Bd=r);rc=n,Ly(i)}function Ly(n){if(!nu){nc&&(nc=clearTimeout(nc));var e=n-Oa;e>24?(n<1/0&&(nc=setTimeout(Z1,n-sh.now()-Bp)),Uu&&(Uu=clearInterval(Uu))):(Uu||(qd=sh.now(),Uu=setInterval(y9,GC)),nu=1,QC(Z1))}}function eb(n,e,r){var i=new Hd;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var _9=Ih("start","end","cancel","interrupt"),w9=[],YC=0,tb=1,Vy=2,Bf=3,nb=4,Fy=5,qf=6;function qp(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;x9(n,r,{name:e,index:i,group:s,on:_9,tween:w9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:YC})}function X0(n,e){var r=ui(n,e);if(r.state>YC)throw new Error("too late; already scheduled");return r}function Bi(n,e){var r=ui(n,e);if(r.state>Bf)throw new Error("too late; already running");return r}function ui(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function x9(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=Y0(o,0,r.time);function o(c){r.state=tb,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var d,h,m,v;if(r.state!==tb)return u();for(d in i)if(v=i[d],v.name===r.name){if(v.state===Bf)return eb(a);v.state===nb?(v.state=qf,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[d]):+d<e&&(v.state=qf,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[d])}if(eb(function(){r.state===Bf&&(r.state=nb,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=Vy,r.on.call("start",n,n.__data__,r.index,r.group),r.state===Vy){for(r.state=Bf,s=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(v=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(s[++h]=v);s.length=h+1}}function l(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=Fy,1),h=-1,m=s.length;++h<m;)s[h].call(n,d);r.state===Fy&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=qf,r.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function Hf(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>Vy&&i.state<Fy,i.state=qf,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function b9(n){return this.each(function(){Hf(this,n)})}function E9(n,e){var r,i;return function(){var s=Bi(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function T9(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Bi(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function I9(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=ui(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?E9:T9)(r,n,e))}function J0(n,e,r){var i=n._id;return n.each(function(){var s=Bi(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return ui(s,i).value[e]}}function XC(n,e){var r;return(typeof e=="number"?Gs:e instanceof ih?Y1:(r=ih(e))?(e=r,Y1):o9)(n,e)}function S9(n){return function(){this.removeAttribute(n)}}function C9(n){return function(){this.removeAttributeNS(n.space,n.local)}}function k9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function A9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function N9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function R9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function P9(n,e){var r=$p(n),i=r==="transform"?c9:XC;return this.attrTween(n,typeof e=="function"?(r.local?R9:N9)(r,i,J0(this,"attr."+n,e)):e==null?(r.local?C9:S9)(r):(r.local?A9:k9)(r,i,e))}function O9(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function j9(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function D9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&j9(n,o)),r}return s._value=e,s}function M9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&O9(n,o)),r}return s._value=e,s}function L9(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=$p(n);return this.tween(r,(i.local?D9:M9)(i,e))}function V9(n,e){return function(){X0(this,n).delay=+e.apply(this,arguments)}}function F9(n,e){return e=+e,function(){X0(this,n).delay=e}}function U9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?V9:F9)(e,n)):ui(this.node(),e).delay}function z9(n,e){return function(){Bi(this,n).duration=+e.apply(this,arguments)}}function $9(n,e){return e=+e,function(){Bi(this,n).duration=e}}function B9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?z9:$9)(e,n)):ui(this.node(),e).duration}function q9(n,e){if(typeof e!="function")throw new Error;return function(){Bi(this,n).ease=e}}function H9(n){var e=this._id;return arguments.length?this.each(q9(e,n)):ui(this.node(),e).ease}function K9(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Bi(this,n).ease=r}}function W9(n){if(typeof n!="function")throw new Error;return this.each(K9(this._id,n))}function G9(n){typeof n!="function"&&(n=NC(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new Ss(i,this._parents,this._name,this._id)}function Q9(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],d=u.length,h=a[l]=new Array(d),m,v=0;v<d;++v)(m=u[v]||c[v])&&(h[v]=m);for(;l<i;++l)a[l]=e[l];return new Ss(a,this._parents,this._name,this._id)}function Y9(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function X9(n,e,r){var i,s,o=Y9(e)?X0:Bi;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function J9(n,e){var r=this._id;return arguments.length<2?ui(this.node(),r).on.on(n):this.each(X9(r,n,e))}function Z9(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function e8(){return this.on("end.remove",Z9(this._id))}function t8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=K0(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],u=l.length,c=o[a]=new Array(u),d,h,m=0;m<u;++m)(d=l[m])&&(h=n.call(d,d.__data__,m,l))&&("__data__"in d&&(h.__data__=d.__data__),c[m]=h,qp(c[m],e,r,m,c,ui(d,r)));return new Ss(o,this._parents,e,r)}function n8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=AC(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var u=i[l],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var m=n.call(d,d.__data__,h,u),v,w=ui(d,r),I=0,C=m.length;I<C;++I)(v=m[I])&&qp(v,e,r,I,m,w);o.push(m),a.push(d)}return new Ss(o,a,e,r)}var r8=Th.prototype.constructor;function i8(){return new r8(this._groups,this._parents)}function s8(n,e){var r,i,s;return function(){var o=tu(this,n),a=(this.style.removeProperty(n),tu(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function JC(n){return function(){this.style.removeProperty(n)}}function o8(n,e,r){var i,s=r+"",o;return function(){var a=tu(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function a8(n,e,r){var i,s,o;return function(){var a=tu(this,n),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(n),tu(this,n))),a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l))}}function l8(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var u=Bi(this,n),c=u.on,d=u.value[o]==null?l||(l=JC(e)):void 0;(c!==r||s!==d)&&(i=(r=c).copy()).on(a,s=d),u.on=i}}function u8(n,e,r){var i=(n+="")=="transform"?u9:XC;return e==null?this.styleTween(n,s8(n,i)).on("end.style."+n,JC(n)):typeof e=="function"?this.styleTween(n,a8(n,i,J0(this,"style."+n,e))).each(l8(this._id,n)):this.styleTween(n,o8(n,i,e),r).on("end.style."+n,null)}function c8(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function h8(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&c8(n,a,r)),i}return o._value=e,o}function f8(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,h8(n,e,r??""))}function d8(n){return function(){this.textContent=n}}function p8(n){return function(){var e=n(this);this.textContent=e??""}}function m8(n){return this.tween("text",typeof n=="function"?p8(J0(this,"text",n)):d8(n==null?"":n+""))}function g8(n){return function(e){this.textContent=n.call(this,e)}}function y8(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&g8(s)),e}return i._value=n,i}function v8(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,y8(n))}function _8(){for(var n=this._name,e=this._id,r=ZC(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var d=ui(u,e);qp(u,n,r,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ss(i,this._parents,n,r)}function w8(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};r.each(function(){var c=Bi(this,i),d=c.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&o()})}var x8=0;function Ss(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function ZC(){return++x8}var ts=Th.prototype;Ss.prototype={constructor:Ss,select:t8,selectAll:n8,selectChild:ts.selectChild,selectChildren:ts.selectChildren,filter:G9,merge:Q9,selection:i8,transition:_8,call:ts.call,nodes:ts.nodes,node:ts.node,size:ts.size,empty:ts.empty,each:ts.each,on:J9,attr:P9,attrTween:L9,style:u8,styleTween:f8,text:m8,textTween:v8,remove:e8,tween:I9,delay:U9,duration:B9,ease:H9,easeVarying:W9,end:w8,[Symbol.iterator]:ts[Symbol.iterator]};function b8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var E8={time:null,delay:0,duration:250,ease:b8};function T8(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function I8(n){var e,r;n instanceof Ss?(e=n._id,n=n._name):(e=ZC(),(r=E8).time=Q0(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&qp(u,n,e,c,a,r||T8(u,e));return new Ss(i,this._parents,n,e)}Th.prototype.interrupt=b9;Th.prototype.transition=I8;const mf=n=>()=>n;function S8(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ds(n,e,r){this.k=n,this.x=e,this.y=r}ds.prototype={constructor:ds,scale:function(n){return n===1?this:new ds(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ds(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Z0=new ds(1,0,0);Si.prototype=ds.prototype;function Si(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Z0;return n.__zoom}function eg(n){n.stopImmediatePropagation()}function zu(n){n.preventDefault(),n.stopImmediatePropagation()}function C8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function k8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function rb(){return this.__zoom||Z0}function A8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function N8(){return navigator.maxTouchPoints||"ontouchstart"in this}function R8(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function P8(){var n=C8,e=k8,r=R8,i=A8,s=N8,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=p9,c=Ih("start","zoom","end"),d,h,m,v=500,w=150,I=0,C=10;function b(q){q.property("__zoom",rb).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(q,W,Z,de){var ee=q.selection?q.selection():q;ee.property("__zoom",rb),q!==ee?L(q,W,Z,de):ee.interrupt().each(function(){U(this,arguments).event(de).start().zoom(null,typeof W=="function"?W.apply(this,arguments):W).end()})},b.scaleBy=function(q,W,Z,de){b.scaleTo(q,function(){var ee=this.__zoom.k,ae=typeof W=="function"?W.apply(this,arguments):W;return ee*ae},Z,de)},b.scaleTo=function(q,W,Z,de){b.transform(q,function(){var ee=e.apply(this,arguments),ae=this.__zoom,he=Z==null?O(ee):typeof Z=="function"?Z.apply(this,arguments):Z,be=ae.invert(he),ce=typeof W=="function"?W.apply(this,arguments):W;return r(N(T(ae,ce),he,be),ee,a)},Z,de)},b.translateBy=function(q,W,Z,de){b.transform(q,function(){return r(this.__zoom.translate(typeof W=="function"?W.apply(this,arguments):W,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),a)},null,de)},b.translateTo=function(q,W,Z,de,ee){b.transform(q,function(){var ae=e.apply(this,arguments),he=this.__zoom,be=de==null?O(ae):typeof de=="function"?de.apply(this,arguments):de;return r(Z0.translate(be[0],be[1]).scale(he.k).translate(typeof W=="function"?-W.apply(this,arguments):-W,typeof Z=="function"?-Z.apply(this,arguments):-Z),ae,a)},de,ee)};function T(q,W){return W=Math.max(o[0],Math.min(o[1],W)),W===q.k?q:new ds(W,q.x,q.y)}function N(q,W,Z){var de=W[0]-Z[0]*q.k,ee=W[1]-Z[1]*q.k;return de===q.x&&ee===q.y?q:new ds(q.k,de,ee)}function O(q){return[(+q[0][0]+ +q[1][0])/2,(+q[0][1]+ +q[1][1])/2]}function L(q,W,Z,de){q.on("start.zoom",function(){U(this,arguments).event(de).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(de).end()}).tween("zoom",function(){var ee=this,ae=arguments,he=U(ee,ae).event(de),be=e.apply(ee,ae),ce=Z==null?O(be):typeof Z=="function"?Z.apply(ee,ae):Z,Ae=Math.max(be[1][0]-be[0][0],be[1][1]-be[0][1]),Pe=ee.__zoom,Me=typeof W=="function"?W.apply(ee,ae):W,Ye=u(Pe.invert(ce).concat(Ae/Pe.k),Me.invert(ce).concat(Ae/Me.k));return function(We){if(We===1)We=Me;else{var qt=Ye(We),Le=Ae/qt[2];We=new ds(Le,ce[0]-qt[0]*Le,ce[1]-qt[1]*Le)}he.zoom(null,We)}})}function U(q,W,Z){return!Z&&q.__zooming||new A(q,W)}function A(q,W){this.that=q,this.args=W,this.active=0,this.sourceEvent=null,this.extent=e.apply(q,W),this.taps=0}A.prototype={event:function(q){return q&&(this.sourceEvent=q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(q,W){return this.mouse&&q!=="mouse"&&(this.mouse[1]=W.invert(this.mouse[0])),this.touch0&&q!=="touch"&&(this.touch0[1]=W.invert(this.touch0[0])),this.touch1&&q!=="touch"&&(this.touch1[1]=W.invert(this.touch1[0])),this.that.__zoom=W,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(q){var W=Sr(this.that).datum();c.call(q,this.that,new S8(q,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),W)}};function R(q,...W){if(!n.apply(this,arguments))return;var Z=U(this,W).event(q),de=this.__zoom,ee=Math.max(o[0],Math.min(o[1],de.k*Math.pow(2,i.apply(this,arguments)))),ae=ki(q);if(Z.wheel)(Z.mouse[0][0]!==ae[0]||Z.mouse[0][1]!==ae[1])&&(Z.mouse[1]=de.invert(Z.mouse[0]=ae)),clearTimeout(Z.wheel);else{if(de.k===ee)return;Z.mouse=[ae,de.invert(ae)],Hf(this),Z.start()}zu(q),Z.wheel=setTimeout(he,w),Z.zoom("mouse",r(N(T(de,ee),Z.mouse[0],Z.mouse[1]),Z.extent,a));function he(){Z.wheel=null,Z.end()}}function D(q,...W){if(m||!n.apply(this,arguments))return;var Z=q.currentTarget,de=U(this,W,!0).event(q),ee=Sr(q.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",Ae,!0),ae=ki(q,Z),he=q.clientX,be=q.clientY;UC(q.view),eg(q),de.mouse=[ae,this.__zoom.invert(ae)],Hf(this),de.start();function ce(Pe){if(zu(Pe),!de.moved){var Me=Pe.clientX-he,Ye=Pe.clientY-be;de.moved=Me*Me+Ye*Ye>I}de.event(Pe).zoom("mouse",r(N(de.that.__zoom,de.mouse[0]=ki(Pe,Z),de.mouse[1]),de.extent,a))}function Ae(Pe){ee.on("mousemove.zoom mouseup.zoom",null),zC(Pe.view,de.moved),zu(Pe),de.event(Pe).end()}}function M(q,...W){if(n.apply(this,arguments)){var Z=this.__zoom,de=ki(q.changedTouches?q.changedTouches[0]:q,this),ee=Z.invert(de),ae=Z.k*(q.shiftKey?.5:2),he=r(N(T(Z,ae),de,ee),e.apply(this,W),a);zu(q),l>0?Sr(this).transition().duration(l).call(L,he,de,q):Sr(this).call(b.transform,he,de,q)}}function F(q,...W){if(n.apply(this,arguments)){var Z=q.touches,de=Z.length,ee=U(this,W,q.changedTouches.length===de).event(q),ae,he,be,ce;for(eg(q),he=0;he<de;++he)be=Z[he],ce=ki(be,this),ce=[ce,this.__zoom.invert(ce),be.identifier],ee.touch0?!ee.touch1&&ee.touch0[2]!==ce[2]&&(ee.touch1=ce,ee.taps=0):(ee.touch0=ce,ae=!0,ee.taps=1+!!d);d&&(d=clearTimeout(d)),ae&&(ee.taps<2&&(h=ce[0],d=setTimeout(function(){d=null},v)),Hf(this),ee.start())}}function $(q,...W){if(this.__zooming){var Z=U(this,W).event(q),de=q.changedTouches,ee=de.length,ae,he,be,ce;for(zu(q),ae=0;ae<ee;++ae)he=de[ae],be=ki(he,this),Z.touch0&&Z.touch0[2]===he.identifier?Z.touch0[0]=be:Z.touch1&&Z.touch1[2]===he.identifier&&(Z.touch1[0]=be);if(he=Z.that.__zoom,Z.touch1){var Ae=Z.touch0[0],Pe=Z.touch0[1],Me=Z.touch1[0],Ye=Z.touch1[1],We=(We=Me[0]-Ae[0])*We+(We=Me[1]-Ae[1])*We,qt=(qt=Ye[0]-Pe[0])*qt+(qt=Ye[1]-Pe[1])*qt;he=T(he,Math.sqrt(We/qt)),be=[(Ae[0]+Me[0])/2,(Ae[1]+Me[1])/2],ce=[(Pe[0]+Ye[0])/2,(Pe[1]+Ye[1])/2]}else if(Z.touch0)be=Z.touch0[0],ce=Z.touch0[1];else return;Z.zoom("touch",r(N(he,be,ce),Z.extent,a))}}function j(q,...W){if(this.__zooming){var Z=U(this,W).event(q),de=q.changedTouches,ee=de.length,ae,he;for(eg(q),m&&clearTimeout(m),m=setTimeout(function(){m=null},v),ae=0;ae<ee;++ae)he=de[ae],Z.touch0&&Z.touch0[2]===he.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===he.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(he=ki(he,this),Math.hypot(h[0]-he[0],h[1]-he[1])<C)){var be=Sr(this).on("dblclick.zoom");be&&be.apply(this,arguments)}}}return b.wheelDelta=function(q){return arguments.length?(i=typeof q=="function"?q:mf(+q),b):i},b.filter=function(q){return arguments.length?(n=typeof q=="function"?q:mf(!!q),b):n},b.touchable=function(q){return arguments.length?(s=typeof q=="function"?q:mf(!!q),b):s},b.extent=function(q){return arguments.length?(e=typeof q=="function"?q:mf([[+q[0][0],+q[0][1]],[+q[1][0],+q[1][1]]]),b):e},b.scaleExtent=function(q){return arguments.length?(o[0]=+q[0],o[1]=+q[1],b):[o[0],o[1]]},b.translateExtent=function(q){return arguments.length?(a[0][0]=+q[0][0],a[1][0]=+q[1][0],a[0][1]=+q[0][1],a[1][1]=+q[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(q){return arguments.length?(r=q,b):r},b.duration=function(q){return arguments.length?(l=+q,b):l},b.interpolate=function(q){return arguments.length?(u=q,b):u},b.on=function(){var q=c.on.apply(c,arguments);return q===c?b:q},b.clickDistance=function(q){return arguments.length?(I=(q=+q)*q,b):Math.sqrt(I)},b.tapDistance=function(q){return arguments.length?(C=+q,b):C},b}class ib extends Map{constructor(e,r=D8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(sb(this,e))}has(e){return super.has(sb(this,e))}set(e,r){return super.set(O8(this,e),r)}delete(e){return super.delete(j8(this,e))}}function sb({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function O8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function j8({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function D8(n){return n!==null&&typeof n=="object"?n.valueOf():n}function ob(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function ab(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function M8(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var L8=typeof global=="object"&&global&&global.Object===Object&&global,V8=typeof self=="object"&&self&&self.Object===Object&&self,ek=L8||V8||Function("return this")(),Kd=ek.Symbol,tk=Object.prototype,F8=tk.hasOwnProperty,U8=tk.toString,$u=Kd?Kd.toStringTag:void 0;function z8(n){var e=F8.call(n,$u),r=n[$u];try{n[$u]=void 0;var i=!0}catch{}var s=U8.call(n);return i&&(e?n[$u]=r:delete n[$u]),s}var $8=Object.prototype,B8=$8.toString;function q8(n){return B8.call(n)}var H8="[object Null]",K8="[object Undefined]",lb=Kd?Kd.toStringTag:void 0;function W8(n){return n==null?n===void 0?K8:H8:lb&&lb in Object(n)?z8(n):q8(n)}function G8(n){return n!=null&&typeof n=="object"}var Q8="[object Symbol]";function Y8(n){return typeof n=="symbol"||G8(n)&&W8(n)==Q8}var X8=/\s/;function J8(n){for(var e=n.length;e--&&X8.test(n.charAt(e)););return e}var Z8=/^\s+/;function eU(n){return n&&n.slice(0,J8(n)+1).replace(Z8,"")}function Wd(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var ub=NaN,tU=/^[-+]0x[0-9a-f]+$/i,nU=/^0b[01]+$/i,rU=/^0o[0-7]+$/i,iU=parseInt;function cb(n){if(typeof n=="number")return n;if(Y8(n))return ub;if(Wd(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Wd(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=eU(n);var r=nU.test(n);return r||rU.test(n)?iU(n.slice(2),r?2:8):tU.test(n)?ub:+n}var tg=function(){return ek.Date.now()},sU="Expected a function",oU=Math.max,aU=Math.min;function nk(n,e,r){var i,s,o,a,l,u,c=0,d=!1,h=!1,m=!0;if(typeof n!="function")throw new TypeError(sU);e=cb(e)||0,Wd(r)&&(d=!!r.leading,h="maxWait"in r,o=h?oU(cb(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function v(U){var A=i,R=s;return i=s=void 0,c=U,a=n.apply(R,A),a}function w(U){return c=U,l=setTimeout(b,e),d?v(U):a}function I(U){var A=U-u,R=U-c,D=e-A;return h?aU(D,o-R):D}function C(U){var A=U-u,R=U-c;return u===void 0||A>=e||A<0||h&&R>=o}function b(){var U=tg();if(C(U))return T(U);l=setTimeout(b,I(U))}function T(U){return l=void 0,m&&i?v(U):(i=s=void 0,a)}function N(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function O(){return l===void 0?a:T(tg())}function L(){var U=tg(),A=C(U);if(i=arguments,s=this,u=U,A){if(l===void 0)return w(u);if(h)return clearTimeout(l),l=setTimeout(b,e),v(u)}return l===void 0&&(l=setTimeout(b,e)),a}return L.cancel=N,L.flush=O,L}var lU="Expected a function";function uU(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(lU);return Wd(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),nk(n,e,{leading:i,maxWait:e,trailing:s})}var wa=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-wa.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?wa.Bounce.In(n*2)*.5:wa.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),ic=function(){return performance.now()},rk=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=ic()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),Uy={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=Uy.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},ik=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),zy=new rk,hb=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=wa.Linear.None,this._interpolationFunction=Uy.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=ik.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=zy,zy.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=ic()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],u=Array.isArray(l),c=u?"array":typeof l,d=!u&&Array.isArray(i[a]);if(!(c==="undefined"||c==="function")){if(d){var h=i[a];if(h.length===0)continue;for(var m=[l],v=0,w=h.length;v<w;v+=1){var I=this._handleRelativeValue(l,h[v]);if(isNaN(I)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(I)}d&&(i[a]=m)}if((c==="object"||u)&&l&&!d){r[a]=u?[]:{};var C=l;for(var b in C)r[a][b]=C[b];s[a]=u?[]:{};var h=i[a];if(!this._isDynamic){var T={};for(var b in h)T[b]=h[b];i[a]=h=T}this._setupProperties(C,r[a],h,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),u||(r[a]*=1),d?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=ic()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=ic()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=wa.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Uy.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=ic()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(i._duration===0||a>u)return 1;var I=Math.trunc(a/l),C=a-I*l,b=Math.min(C/i._duration,1);return b===0&&a===i._duration?1:b},d=c(),h=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var v=0,w=this._chainedTweens.length;v<w;v++)this._chainedTweens[v].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],u=Array.isArray(e[o]),c=Array.isArray(l),d=!u&&c;d?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();ik.nextId;var $i=zy;$i.getAll.bind($i);$i.removeAll.bind($i);$i.add.bind($i);$i.remove.bind($i);$i.update.bind($i);function fb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function cU(n){if(Array.isArray(n))return n}function hU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fU(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function dU(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function pU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mU(n,e){return cU(n)||dU(n,e)||gU(n,e)||pU()}function gU(n,e){if(n){if(typeof n=="string")return fb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fb(n,e):void 0}}var yU=fU(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,u=l===void 0?function(c,d){}:l;hU(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=u});function e_(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,u=l===void 0?{}:l,c=n.init,d=c===void 0?function(){}:c,h=n.update,m=h===void 0?function(){}:h,v=Object.keys(s).map(function(w){return new yU(w,s[w])});return function w(){for(var I=arguments.length,C=new Array(I),b=0;b<I;b++)C[b]=arguments[b];var T=!!(this instanceof w&&this.constructor),N=T?C.shift():void 0,O=C[0],L=O===void 0?{}:O,U=Object.assign({},r instanceof Function?r(L):r,{initialised:!1}),A={};function R(F){return D(F,L),M(),R}var D=function($,j){d.call(R,$,U,j),U.initialised=!0},M=nk(function(){U.initialised&&(m.call(R,U,A),A={})},1);return v.forEach(function(F){R[F.name]=$(F);function $(j){var q=j.name,W=j.triggerUpdate,Z=W===void 0?!1:W,de=j.onChange,ee=de===void 0?function(be,ce){}:de,ae=j.defaultVal,he=ae===void 0?null:ae;return function(be){var ce=U[q];if(!arguments.length)return ce;var Ae=be===void 0?he:be;return U[q]=Ae,ee.call(R,Ae,U,ce),!A.hasOwnProperty(q)&&(A[q]=ce),Z&&M(),R}}}),Object.keys(a).forEach(function(F){R[F]=function(){for(var $,j=arguments.length,q=new Array(j),W=0;W<j;W++)q[W]=arguments[W];return($=a[F]).call.apply($,[R,U].concat(q))}}),Object.entries(u).forEach(function(F){var $=mU(F,2),j=$[0],q=$[1];return R[j]=R[q]}),R.resetProps=function(){return v.forEach(function(F){R[F.name](F.defaultVal)}),R},R.resetProps(),U._rerender=M,T&&N&&R(N),R}}var ht=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function Gd(n){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(n)}var vU=/^\s+/,_U=/\s+$/;function Ve(n,e){if(n=n||"",e=e||{},n instanceof Ve)return n;if(!(this instanceof Ve))return new Ve(n,e);var r=wU(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ve.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=sk(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=pb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=pb(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=db(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=db(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return mb(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return TU(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(St(this._r,255)*100)+"%",g:Math.round(St(this._g,255)*100)+"%",b:Math.round(St(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(St(this._r,255)*100)+"%, "+Math.round(St(this._g,255)*100)+"%, "+Math.round(St(this._b,255)*100)+"%)":"rgba("+Math.round(St(this._r,255)*100)+"%, "+Math.round(St(this._g,255)*100)+"%, "+Math.round(St(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:MU[mb(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+gb(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=Ve(e);i="#"+gb(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Ve(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(kU,arguments)},brighten:function(){return this._applyModification(AU,arguments)},darken:function(){return this._applyModification(NU,arguments)},desaturate:function(){return this._applyModification(IU,arguments)},saturate:function(){return this._applyModification(SU,arguments)},greyscale:function(){return this._applyModification(CU,arguments)},spin:function(){return this._applyModification(RU,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(jU,arguments)},complement:function(){return this._applyCombination(PU,arguments)},monochromatic:function(){return this._applyCombination(DU,arguments)},splitcomplement:function(){return this._applyCombination(OU,arguments)},triad:function(){return this._applyCombination(yb,[3])},tetrad:function(){return this._applyCombination(yb,[4])}};Ve.fromRatio=function(n,e){if(Gd(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=sc(n[i]));n=r}return Ve(n,e)};function wU(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=UU(n)),Gd(n)=="object"&&(ns(n.r)&&ns(n.g)&&ns(n.b)?(e=xU(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):ns(n.h)&&ns(n.s)&&ns(n.v)?(i=sc(n.s),s=sc(n.v),e=EU(n.h,i,s),a=!0,l="hsv"):ns(n.h)&&ns(n.s)&&ns(n.l)&&(i=sc(n.s),o=sc(n.l),e=bU(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=sk(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function xU(n,e,r){return{r:St(n,255)*255,g:St(e,255)*255,b:St(r,255)*255}}function db(n,e,r){n=St(n,255),e=St(e,255),r=St(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,l}}function bU(n,e,r){var i,s,o;n=St(n,360),e=St(e,100),r=St(r,100);function a(c,d,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(d-c)*6*h:h<1/2?d:h<2/3?c+(d-c)*(2/3-h)*6:c}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;i=a(u,l,n+1/3),s=a(u,l,n),o=a(u,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function pb(n,e,r){n=St(n,255),e=St(e,255),r=St(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,u=i-s;if(a=i===0?0:u/i,i==s)o=0;else{switch(i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,v:l}}function EU(n,e,r){n=St(n,360)*6,e=St(e,100),r=St(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),u=i%6,c=[r,a,o,o,l,r][u],d=[l,r,r,a,o,o][u],h=[o,o,l,r,r,a][u];return{r:c*255,g:d*255,b:h*255}}function mb(n,e,r,i){var s=[ti(Math.round(n).toString(16)),ti(Math.round(e).toString(16)),ti(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function TU(n,e,r,i,s){var o=[ti(Math.round(n).toString(16)),ti(Math.round(e).toString(16)),ti(Math.round(r).toString(16)),ti(ok(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function gb(n,e,r,i){var s=[ti(ok(i)),ti(Math.round(n).toString(16)),ti(Math.round(e).toString(16)),ti(Math.round(r).toString(16))];return s.join("")}Ve.equals=function(n,e){return!n||!e?!1:Ve(n).toRgbString()==Ve(e).toRgbString()};Ve.random=function(){return Ve.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function IU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.s-=e/100,r.s=Hp(r.s),Ve(r)}function SU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.s+=e/100,r.s=Hp(r.s),Ve(r)}function CU(n){return Ve(n).desaturate(100)}function kU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.l+=e/100,r.l=Hp(r.l),Ve(r)}function AU(n,e){e=e===0?0:e||10;var r=Ve(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Ve(r)}function NU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.l-=e/100,r.l=Hp(r.l),Ve(r)}function RU(n,e){var r=Ve(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Ve(r)}function PU(n){var e=Ve(n).toHsl();return e.h=(e.h+180)%360,Ve(e)}function yb(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ve(n).toHsl(),i=[Ve(n)],s=360/e,o=1;o<e;o++)i.push(Ve({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function OU(n){var e=Ve(n).toHsl(),r=e.h;return[Ve(n),Ve({h:(r+72)%360,s:e.s,l:e.l}),Ve({h:(r+216)%360,s:e.s,l:e.l})]}function jU(n,e,r){e=e||6,r=r||30;var i=Ve(n).toHsl(),s=360/r,o=[Ve(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(Ve(i));return o}function DU(n,e){e=e||6;for(var r=Ve(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(Ve({h:i,s,v:o})),o=(o+l)%1;return a}Ve.mix=function(n,e,r){r=r===0?0:r||50;var i=Ve(n).toRgb(),s=Ve(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return Ve(a)};Ve.readability=function(n,e){var r=Ve(n),i=Ve(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Ve.isReadable=function(n,e,r){var i=Ve.readability(n,e),s,o;switch(o=!1,s=zU(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};Ve.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,u;r=r||{},a=r.includeFallbackColors,l=r.level,u=r.size;for(var c=0;c<e.length;c++)o=Ve.readability(n,e[c]),o>s&&(s=o,i=Ve(e[c]));return Ve.isReadable(n,i,{level:l,size:u})||!a?i:(r.includeFallbackColors=!1,Ve.mostReadable(n,["#fff","#000"],r))};var $y=Ve.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},MU=Ve.hexNames=LU($y);function LU(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function sk(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function St(n,e){VU(n)&&(n="100%");var r=FU(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Hp(n){return Math.min(1,Math.max(0,n))}function rr(n){return parseInt(n,16)}function VU(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function FU(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ti(n){return n.length==1?"0"+n:""+n}function sc(n){return n<=1&&(n=n*100+"%"),n}function ok(n){return Math.round(parseFloat(n)*255).toString(16)}function vb(n){return rr(n)/255}var Gr=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ns(n){return!!Gr.CSS_UNIT.exec(n)}function UU(n){n=n.replace(vU,"").replace(_U,"").toLowerCase();var e=!1;if($y[n])n=$y[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Gr.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=Gr.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Gr.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=Gr.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Gr.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=Gr.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Gr.hex8.exec(n))?{r:rr(r[1]),g:rr(r[2]),b:rr(r[3]),a:vb(r[4]),format:e?"name":"hex8"}:(r=Gr.hex6.exec(n))?{r:rr(r[1]),g:rr(r[2]),b:rr(r[3]),format:e?"name":"hex"}:(r=Gr.hex4.exec(n))?{r:rr(r[1]+""+r[1]),g:rr(r[2]+""+r[2]),b:rr(r[3]+""+r[3]),a:vb(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Gr.hex3.exec(n))?{r:rr(r[1]+""+r[1]),g:rr(r[2]+""+r[2]),b:rr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function zU(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function By(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function $U(n){if(Array.isArray(n))return By(n)}function ak(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function BU(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xr(n,e){return n.get(ak(n,e))}function _b(n,e,r){BU(n,e),e.set(n,r)}function wb(n,e,r){return n.set(ak(n,e),r),r}function HU(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,XU(i.key),i)}}function KU(n,e,r){return e&&HU(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function WU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function GU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QU(n){return $U(n)||WU(n)||JU(n)||GU()}function YU(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function XU(n){var e=YU(n,"string");return typeof e=="symbol"?e:e+""}function JU(n,e){if(n){if(typeof n=="string")return By(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?By(n,e):void 0}}var ZU=123,ez=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},lk=function(e,r,i){return(e<<16)+(r<<8)+i},tz=function(e){var r=Ve(e).toRgb(),i=r.r,s=r.g,o=r.b;return lk(i,s,o)},xb=function(e,r){return e*ZU%Math.pow(2,r)},ta=new WeakMap,rs=new WeakMap,nz=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;qU(this,n),_b(this,ta,void 0),_b(this,rs,void 0),wb(rs,this,e),this.reset()}return KU(n,[{key:"reset",value:function(){wb(ta,this,["__reserved for background__"])}},{key:"register",value:function(r){if(xr(ta,this).length>=Math.pow(2,24-xr(rs,this)))return null;var i=xr(ta,this).length,s=xb(i,xr(rs,this)),o=ez(i+(s<<24-xr(rs,this)));return xr(ta,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?tz(r):lk.apply(void 0,QU(r));if(!i)return null;var s=i&Math.pow(2,24-xr(rs,this))-1,o=i>>24-xr(rs,this)&Math.pow(2,xr(rs,this))-1;return xb(s,xr(rs,this))!==o||s>=xr(ta,this).length?null:xr(ta,this)[s]}}])}(),Ch,kt,uk,ck,oa,bb,hk,fk,dk,t_,qy,Hy,oh={},pk=[],rz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Kp=Array.isArray;function Ni(n,e){for(var r in e)n[r]=e[r];return n}function n_(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function iz(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Ch.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return bc(n,a,i,s,null)}function bc(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++uk,__i:-1,__u:0};return s==null&&kt.vnode!=null&&kt.vnode(o),o}function Wp(n){return n.children}function Kf(n,e){this.props=n,this.context=e}function ru(n,e){if(e==null)return n.__?ru(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?ru(n):null}function mk(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return mk(n)}}function Eb(n){(!n.__d&&(n.__d=!0)&&oa.push(n)&&!Qd.__r++||bb!=kt.debounceRendering)&&((bb=kt.debounceRendering)||hk)(Qd)}function Qd(){for(var n,e,r,i,s,o,a,l=1;oa.length;)oa.length>l&&oa.sort(fk),n=oa.shift(),l=oa.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=Ni({},i)).__v=i.__v+1,kt.vnode&&kt.vnode(r),r_(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??ru(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,vk(o,r,a),i.__e=i.__=null,r.__e!=s&&mk(r)));Qd.__r=0}function gk(n,e,r,i,s,o,a,l,u,c,d){var h,m,v,w,I,C,b,T=i&&i.__k||pk,N=e.length;for(u=sz(r,e,T,u,N),h=0;h<N;h++)(v=r.__k[h])!=null&&(m=v.__i==-1?oh:T[v.__i]||oh,v.__i=h,C=r_(n,v,m,s,o,a,l,u,c,d),w=v.__e,v.ref&&m.ref!=v.ref&&(m.ref&&i_(m.ref,null,v),d.push(v.ref,v.__c||w,v)),I==null&&w!=null&&(I=w),(b=!!(4&v.__u))||m.__k===v.__k?u=yk(v,u,n,b):typeof v.type=="function"&&C!==void 0?u=C:w&&(u=w.nextSibling),v.__u&=-7);return r.__e=I,u}function sz(n,e,r,i,s){var o,a,l,u,c,d=r.length,h=d,m=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=bc(null,a,null,null,null):Kp(a)?a=n.__k[o]=bc(Wp,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=bc(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,u=o+m,a.__=n,a.__b=n.__b+1,l=null,(c=a.__i=oz(a,r,u,h))!=-1&&(h--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>d?m--:s<d&&m++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,a.__u|=4))):n.__k[o]=null;if(h)for(o=0;o<d;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=ru(l)),wk(l,l));return i}function yk(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=yk(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=ru(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function oz(n,e,r,i){var s,o,a,l=n.key,u=n.type,c=e[r],d=c!=null&&(2&c.__u)==0;if(c===null&&l==null||d&&l==c.key&&u==c.type)return r;if(i>(d?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((c=e[a=s>=0?s--:o++])!=null&&!(2&c.__u)&&l==c.key&&u==c.type)return a}return-1}function Tb(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||rz.test(e)?r:r+"px"}function gf(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||Tb(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||Tb(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(dk,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=t_,n.addEventListener(e,o?Hy:qy,o)):n.removeEventListener(e,o?Hy:qy,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function Ib(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=t_++;else if(e.t<r.u)return;return r(kt.event?kt.event(e):e)}}}function r_(n,e,r,i,s,o,a,l,u,c){var d,h,m,v,w,I,C,b,T,N,O,L,U,A,R,D,M,F=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(d=kt.__b)&&d(e);e:if(typeof F=="function")try{if(b=e.props,T="prototype"in F&&F.prototype.render,N=(d=F.contextType)&&i[d.__c],O=d?N?N.props.value:d.__:i,r.__c?C=(h=e.__c=r.__c).__=h.__E:(T?e.__c=h=new F(b,O):(e.__c=h=new Kf(b,O),h.constructor=F,h.render=lz),N&&N.sub(h),h.state||(h.state={}),h.__n=i,m=h.__d=!0,h.__h=[],h._sb=[]),T&&h.__s==null&&(h.__s=h.state),T&&F.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Ni({},h.__s)),Ni(h.__s,F.getDerivedStateFromProps(b,h.__s))),v=h.props,w=h.state,h.__v=e,m)T&&F.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),T&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(T&&F.getDerivedStateFromProps==null&&b!==v&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,O),e.__v==r.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,O)===!1){for(e.__v!=r.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function($){$&&($.__=e)}),L=0;L<h._sb.length;L++)h.__h.push(h._sb[L]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,O),T&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(v,w,I)})}if(h.context=O,h.props=b,h.__P=n,h.__e=!1,U=kt.__r,A=0,T){for(h.state=h.__s,h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),R=0;R<h._sb.length;R++)h.__h.push(h._sb[R]);h._sb=[]}else do h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++A<25);h.state=h.__s,h.getChildContext!=null&&(i=Ni(Ni({},i),h.getChildContext())),T&&!m&&h.getSnapshotBeforeUpdate!=null&&(I=h.getSnapshotBeforeUpdate(v,w)),D=d,d!=null&&d.type===Wp&&d.key==null&&(D=_k(d.props.children)),l=gk(n,Kp(D)?D:[D],e,r,i,s,o,a,l,u,c),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),C&&(h.__E=h.__=null)}catch($){if(e.__v=null,u||o!=null)if($.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(M=o.length;M--;)n_(o[M]);Ky(e)}else e.__e=r.__e,e.__k=r.__k,$.then||Ky(e);kt.__e($,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=az(r.__e,e,r,i,s,o,a,u,c);return(d=kt.diffed)&&d(e),128&e.__u?void 0:l}function Ky(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Ky)}function vk(n,e,r){for(var i=0;i<r.length;i++)i_(r[i],r[++i],r[++i]);kt.__c&&kt.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){kt.__e(o,s.__v)}})}function _k(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Kp(n)?n.map(_k):Ni({},n)}function az(n,e,r,i,s,o,a,l,u){var c,d,h,m,v,w,I,C=r.props||oh,b=e.props,T=e.type;if(T=="svg"?s="http://www.w3.org/2000/svg":T=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((v=o[c])&&"setAttribute"in v==!!T&&(T?v.localName==T:v.nodeType==3)){n=v,o[c]=null;break}}if(n==null){if(T==null)return document.createTextNode(b);n=document.createElementNS(s,T,b.is&&b),l&&(kt.__m&&kt.__m(e,o),l=!1),o=null}if(T==null)C===b||l&&n.data==b||(n.data=b);else{if(o=o&&Ch.call(n.childNodes),!l&&o!=null)for(C={},c=0;c<n.attributes.length;c++)C[(v=n.attributes[c]).name]=v.value;for(c in C)if(v=C[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=v;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;gf(n,c,null,v,s)}}for(c in b)v=b[c],c=="children"?m=v:c=="dangerouslySetInnerHTML"?d=v:c=="value"?w=v:c=="checked"?I=v:l&&typeof v!="function"||C[c]===v||gf(n,c,v,C[c],s);if(d)l||h&&(d.__html==h.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(h&&(n.innerHTML=""),gk(e.type=="template"?n.content:n,Kp(m)?m:[m],e,r,i,T=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&ru(r,0),l,u),o!=null)for(c=o.length;c--;)n_(o[c]);l||(c="value",T=="progress"&&w==null?n.removeAttribute("value"):w!=null&&(w!==n[c]||T=="progress"&&!w||T=="option"&&w!=C[c])&&gf(n,c,w,C[c],s),c="checked",I!=null&&I!=n[c]&&gf(n,c,I,C[c],s))}return n}function i_(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){kt.__e(s,r)}}function wk(n,e,r){var i,s;if(kt.unmount&&kt.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||i_(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){kt.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&wk(i[s],e,r||typeof n.type!="function");r||n_(n.__e),n.__c=n.__=n.__e=void 0}function lz(n,e,r){return this.constructor(n,r)}function uz(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),kt.__&&kt.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],r_(e,n=e.__k=iz(Wp,null,[n]),s||oh,oh,e.namespaceURI,s?null:e.firstChild?Ch.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),vk(o,n,a)}function xk(n,e,r){var i,s,o,a,l=Ni({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Ch.call(arguments,2):r),bc(n.type,l,i||n.key,s||n.ref,null)}Ch=pk.slice,kt={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},uk=0,ck=function(n){return n!=null&&n.constructor===void 0},Kf.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ni({},this.state),typeof n=="function"&&(n=n(Ni({},r),this.props)),n&&Ni(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),Eb(this))},Kf.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Eb(this))},Kf.prototype.render=Wp,oa=[],hk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fk=function(n,e){return n.__v.__b-e.__v.__b},Qd.__r=0,dk=/(PointerCapture)$|Capture$/i,t_=0,qy=Ib(!1),Hy=Ib(!0);function Sb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function cz(n){if(Array.isArray(n))return n}function hz(n,e,r){return(e=yz(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function fz(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function dz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function pz(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cb(Object(r),!0).forEach(function(i){hz(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Cb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function mz(n,e){return cz(n)||fz(n,e)||vz(n,e)||dz()}function gz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function yz(n){var e=gz(n,"string");return typeof e=="symbol"?e:e+""}function Yd(n){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(n)}function vz(n,e){if(n){if(typeof n=="string")return Sb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sb(n,e):void 0}}var Wy=function(e){if(Yd(e)!=="object")return e;var r=xk(e);if(r.props){var i;r.props=pz({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(Wy):Wy(r.props.children))}return r},_z=function(e){return ck(xk(e))},wz=function(e,r){delete r.__k,uz(Wy(e),r)};function xz(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var bz=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;xz(bz);var Ez=e_({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&Yd(e)==="object"&&!!e.node&&typeof e.node=="function",l=Sr(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(c){var d=mz(c,2),h=d[0],m=d[1];return r.tooltipEl.style(h,m)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(c){r.mouseInside=!0;var d=ki(c),h=l.node(),m=h.offsetWidth,v=h.offsetHeight,w=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/m*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?v>130&&v-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(w.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):_z(e.content)?(e.tooltipEl.text(""),wz(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function Tz(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,u,c=0,d=0,h=0;for(a=0;a<l;++a)u=i[a],c+=u.x||0,d+=u.y||0,h+=u.z||0;for(c=(c/l-n)*s,d=(d/l-e)*s,h=(h/l-r)*s,a=0;a<l;++a)u=i[a],c&&(u.x-=c),d&&(u.y-=d),h&&(u.z-=h)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function Iz(n){const e=+this._x.call(null,n);return bk(this.cover(e),e,n)}function bk(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,u,c,d,h,m;if(!s)return n._root=o,n;for(;s.length;)if((d=e>=(u=(a+l)/2))?a=u:l=u,i=s,!(s=s[h=+d]))return i[h]=o,n;if(c=+n._x.call(null,s.data),e===c)return o.next=s,i?i[h]=o:n._root=o,n;do i=i?i[h]=new Array(2):n._root=new Array(2),(d=e>=(u=(a+l)/2))?a=u:l=u;while((h=+d)==(m=+(c>=u)));return i[m]=s,i[h]=o,n}function Sz(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)bk(this,r[o],n[o]);return this}function Cz(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function kz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Az(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ys(n,e,r){this.node=n,this.x0=e,this.x1=r}function Nz(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],u=this._root,c,d;for(u&&l.push(new ys(u,i,a)),e==null?e=1/0:(i=n-e,a=n+e);c=l.pop();)if(!(!(u=c.node)||(s=c.x0)>a||(o=c.x1)<i))if(u.length){var h=(s+o)/2;l.push(new ys(u[1],h,o),new ys(u[0],s,h)),(d=+(n>=h))&&(c=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=c)}else{var m=Math.abs(n-+this._x.call(null,u.data));m<e&&(e=m,i=n-m,a=n+m,r=u.data)}return r}function Rz(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,u,c,d,h,m;if(!r)return this;if(r.length)for(;;){if((d=u>=(c=(a+l)/2))?a=c:l=c,e=r,!(r=r[h=+d]))return this;if(!r.length)break;e[h+1&1]&&(i=e,m=h)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[h]=o:delete e[h],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=o,this)}function Pz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Oz(){return this._root}function jz(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Dz(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new ys(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new ys(s,l,a)),(s=i[0])&&e.push(new ys(s,o,l))}return this}function Mz(n){var e=[],r=[],i;for(this._root&&e.push(new ys(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,u=(a+l)/2;(o=s[0])&&e.push(new ys(o,a,u)),(o=s[1])&&e.push(new ys(o,u,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function Lz(n){return n[0]}function Vz(n){return arguments.length?(this._x=n,this):this._x}function Ek(n,e){var r=new s_(e??Lz,NaN,NaN);return n==null?r:r.addAll(n)}function s_(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function kb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Xn=Ek.prototype=s_.prototype;Xn.copy=function(){var n=new s_(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=kb(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=kb(i));return n};Xn.add=Iz;Xn.addAll=Sz;Xn.cover=Cz;Xn.data=kz;Xn.extent=Az;Xn.find=Nz;Xn.remove=Rz;Xn.removeAll=Pz;Xn.root=Oz;Xn.size=jz;Xn.visit=Dz;Xn.visitAfter=Mz;Xn.x=Vz;function Fz(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return Tk(this.cover(e,r),e,r,n)}function Tk(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._x1,d=n._y1,h,m,v,w,I,C,b,T;if(!o)return n._root=a,n;for(;o.length;)if((I=e>=(h=(l+c)/2))?l=h:c=h,(C=r>=(m=(u+d)/2))?u=m:d=m,s=o,!(o=o[b=C<<1|I]))return s[b]=a,n;if(v=+n._x.call(null,o.data),w=+n._y.call(null,o.data),e===v&&r===w)return a.next=o,s?s[b]=a:n._root=a,n;do s=s?s[b]=new Array(4):n._root=new Array(4),(I=e>=(h=(l+c)/2))?l=h:c=h,(C=r>=(m=(u+d)/2))?u=m:d=m;while((b=C<<1|I)===(T=(w>=m)<<1|v>=h));return s[T]=o,s[b]=a,n}function Uz(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),u=1/0,c=1/0,d=-1/0,h=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<u&&(u=s),s>d&&(d=s),o<c&&(c=o),o>h&&(h=o));if(u>d||c>h)return this;for(this.cover(u,c).cover(d,h),r=0;r<i;++r)Tk(this,a[r],l[r],n[r]);return this}function zz(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,u,c;r>n||n>=s||i>e||e>=o;)switch(c=(e<i)<<1|n<r,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function $z(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Bz(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ln(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function qz(n,e,r){var i,s=this._x0,o=this._y0,a,l,u,c,d=this._x1,h=this._y1,m=[],v=this._root,w,I;for(v&&m.push(new Ln(v,s,o,d,h)),r==null?r=1/0:(s=n-r,o=e-r,d=n+r,h=e+r,r*=r);w=m.pop();)if(!(!(v=w.node)||(a=w.x0)>d||(l=w.y0)>h||(u=w.x1)<s||(c=w.y1)<o))if(v.length){var C=(a+u)/2,b=(l+c)/2;m.push(new Ln(v[3],C,b,u,c),new Ln(v[2],a,b,C,c),new Ln(v[1],C,l,u,b),new Ln(v[0],a,l,C,b)),(I=(e>=b)<<1|n>=C)&&(w=m[m.length-1],m[m.length-1]=m[m.length-1-I],m[m.length-1-I]=w)}else{var T=n-+this._x.call(null,v.data),N=e-+this._y.call(null,v.data),O=T*T+N*N;if(O<r){var L=Math.sqrt(r=O);s=n-L,o=e-L,d=n+L,h=e+L,i=v.data}}return i}function Hz(n){if(isNaN(d=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,c=this._y1,d,h,m,v,w,I,C,b;if(!r)return this;if(r.length)for(;;){if((w=d>=(m=(a+u)/2))?a=m:u=m,(I=h>=(v=(l+c)/2))?l=v:c=v,e=r,!(r=r[C=I<<1|w]))return this;if(!r.length)break;(e[C+1&3]||e[C+2&3]||e[C+3&3])&&(i=e,b=C)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[C]=o:delete e[C],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[b]=r:this._root=r),this):(this._root=o,this)}function Kz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Wz(){return this._root}function Gz(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Qz(n){var e=[],r,i=this._root,s,o,a,l,u;for(i&&e.push(new Ln(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,u=r.y1)&&i.length){var c=(o+l)/2,d=(a+u)/2;(s=i[3])&&e.push(new Ln(s,c,d,l,u)),(s=i[2])&&e.push(new Ln(s,o,d,c,u)),(s=i[1])&&e.push(new Ln(s,c,a,l,d)),(s=i[0])&&e.push(new Ln(s,o,a,c,d))}return this}function Yz(n){var e=[],r=[],i;for(this._root&&e.push(new Ln(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,c=i.y1,d=(a+u)/2,h=(l+c)/2;(o=s[0])&&e.push(new Ln(o,a,l,d,h)),(o=s[1])&&e.push(new Ln(o,d,l,u,h)),(o=s[2])&&e.push(new Ln(o,a,h,d,c)),(o=s[3])&&e.push(new Ln(o,d,h,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Xz(n){return n[0]}function Jz(n){return arguments.length?(this._x=n,this):this._x}function Zz(n){return n[1]}function e$(n){return arguments.length?(this._y=n,this):this._y}function Ik(n,e,r){var i=new o_(e??Xz,r??Zz,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function o_(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function Ab(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var $n=Ik.prototype=o_.prototype;$n.copy=function(){var n=new o_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Ab(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=Ab(i));return n};$n.add=Fz;$n.addAll=Uz;$n.cover=zz;$n.data=$z;$n.extent=Bz;$n.find=qz;$n.remove=Hz;$n.removeAll=Kz;$n.root=Wz;$n.size=Gz;$n.visit=Qz;$n.visitAfter=Yz;$n.x=Jz;$n.y=e$;function t$(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return Sk(this.cover(e,r,i),e,r,i,n)}function Sk(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},u=n._x0,c=n._y0,d=n._z0,h=n._x1,m=n._y1,v=n._z1,w,I,C,b,T,N,O,L,U,A,R;if(!a)return n._root=l,n;for(;a.length;)if((O=e>=(w=(u+h)/2))?u=w:h=w,(L=r>=(I=(c+m)/2))?c=I:m=I,(U=i>=(C=(d+v)/2))?d=C:v=C,o=a,!(a=a[A=U<<2|L<<1|O]))return o[A]=l,n;if(b=+n._x.call(null,a.data),T=+n._y.call(null,a.data),N=+n._z.call(null,a.data),e===b&&r===T&&i===N)return l.next=a,o?o[A]=l:n._root=l,n;do o=o?o[A]=new Array(8):n._root=new Array(8),(O=e>=(w=(u+h)/2))?u=w:h=w,(L=r>=(I=(c+m)/2))?c=I:m=I,(U=i>=(C=(d+v)/2))?d=C:v=C;while((A=U<<2|L<<1|O)===(R=(N>=C)<<2|(T>=I)<<1|b>=w));return o[R]=a,o[A]=l,n}function n$(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,d=-1/0;for(let h=0,m,v,w,I;h<e;++h)isNaN(v=+this._x.call(null,m=n[h]))||isNaN(w=+this._y.call(null,m))||isNaN(I=+this._z.call(null,m))||(r[h]=v,i[h]=w,s[h]=I,v<o&&(o=v),v>u&&(u=v),w<a&&(a=w),w>c&&(c=w),I<l&&(l=I),I>d&&(d=I));if(o>u||a>c||l>d)return this;this.cover(o,a,l).cover(u,c,d);for(let h=0;h<e;++h)Sk(this,r[h],i[h],s[h],n[h]);return this}function r$(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,u=(o=Math.floor(r))+1;else{for(var c=a-i||1,d=this._root,h,m;i>n||n>=a||s>e||e>=l||o>r||r>=u;)switch(m=(r<o)<<2|(e<s)<<1|n<i,h=new Array(8),h[m]=d,d=h,c*=2,m){case 0:a=i+c,l=s+c,u=o+c;break;case 1:i=a-c,l=s+c,u=o+c;break;case 2:a=i+c,s=l-c,u=o+c;break;case 3:i=a-c,s=l-c,u=o+c;break;case 4:a=i+c,l=s+c,o=u-c;break;case 5:i=a-c,l=s+c,o=u-c;break;case 6:a=i+c,s=l-c,o=u-c;break;case 7:i=a-c,s=l-c,o=u-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this}function i$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function s$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function _t(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function o$(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,u,c,d,h,m,v,w=this._x1,I=this._y1,C=this._z1,b=[],T=this._root,N,O;for(T&&b.push(new _t(T,o,a,l,w,I,C)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,w=n+i,I=e+i,C=r+i,i*=i);N=b.pop();)if(!(!(T=N.node)||(u=N.x0)>w||(c=N.y0)>I||(d=N.z0)>C||(h=N.x1)<o||(m=N.y1)<a||(v=N.z1)<l))if(T.length){var L=(u+h)/2,U=(c+m)/2,A=(d+v)/2;b.push(new _t(T[7],L,U,A,h,m,v),new _t(T[6],u,U,A,L,m,v),new _t(T[5],L,c,A,h,U,v),new _t(T[4],u,c,A,L,U,v),new _t(T[3],L,U,d,h,m,A),new _t(T[2],u,U,d,L,m,A),new _t(T[1],L,c,d,h,U,A),new _t(T[0],u,c,d,L,U,A)),(O=(r>=A)<<2|(e>=U)<<1|n>=L)&&(N=b[b.length-1],b[b.length-1]=b[b.length-1-O],b[b.length-1-O]=N)}else{var R=n-+this._x.call(null,T.data),D=e-+this._y.call(null,T.data),M=r-+this._z.call(null,T.data),F=R*R+D*D+M*M;if(F<i){var $=Math.sqrt(i=F);o=n-$,a=e-$,l=r-$,w=n+$,I=e+$,C=r+$,s=T.data}}return s}const a$=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function l$(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,u=n+i,c=e+i,d=r+i;return this.visit((h,m,v,w,I,C,b)=>{if(!h.length)do{const T=h.data;a$(n,e,r,this._x(T),this._y(T),this._z(T))<=i&&s.push(T)}while(h=h.next);return m>u||v>c||w>d||I<o||C<a||b<l}),s}function u$(n){if(isNaN(m=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n))||isNaN(w=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._z0,c=this._x1,d=this._y1,h=this._z1,m,v,w,I,C,b,T,N,O,L,U;if(!r)return this;if(r.length)for(;;){if((T=m>=(I=(a+c)/2))?a=I:c=I,(N=v>=(C=(l+d)/2))?l=C:d=C,(O=w>=(b=(u+h)/2))?u=b:h=b,e=r,!(r=r[L=O<<2|N<<1|T]))return this;if(!r.length)break;(e[L+1&7]||e[L+2&7]||e[L+3&7]||e[L+4&7]||e[L+5&7]||e[L+6&7]||e[L+7&7])&&(i=e,U=L)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[L]=o:delete e[L],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[U]=r:this._root=r),this):(this._root=o,this)}function c$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function h$(){return this._root}function f$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function d$(n){var e=[],r,i=this._root,s,o,a,l,u,c,d;for(i&&e.push(new _t(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,d=r.z1)&&i.length){var h=(o+u)/2,m=(a+c)/2,v=(l+d)/2;(s=i[7])&&e.push(new _t(s,h,m,v,u,c,d)),(s=i[6])&&e.push(new _t(s,o,m,v,h,c,d)),(s=i[5])&&e.push(new _t(s,h,a,v,u,m,d)),(s=i[4])&&e.push(new _t(s,o,a,v,h,m,d)),(s=i[3])&&e.push(new _t(s,h,m,l,u,c,v)),(s=i[2])&&e.push(new _t(s,o,m,l,h,c,v)),(s=i[1])&&e.push(new _t(s,h,a,l,u,m,v)),(s=i[0])&&e.push(new _t(s,o,a,l,h,m,v))}return this}function p$(n){var e=[],r=[],i;for(this._root&&e.push(new _t(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.z0,c=i.x1,d=i.y1,h=i.z1,m=(a+c)/2,v=(l+d)/2,w=(u+h)/2;(o=s[0])&&e.push(new _t(o,a,l,u,m,v,w)),(o=s[1])&&e.push(new _t(o,m,l,u,c,v,w)),(o=s[2])&&e.push(new _t(o,a,v,u,m,d,w)),(o=s[3])&&e.push(new _t(o,m,v,u,c,d,w)),(o=s[4])&&e.push(new _t(o,a,l,w,m,v,h)),(o=s[5])&&e.push(new _t(o,m,l,w,c,v,h)),(o=s[6])&&e.push(new _t(o,a,v,w,m,d,h)),(o=s[7])&&e.push(new _t(o,m,v,w,c,d,h))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function m$(n){return n[0]}function g$(n){return arguments.length?(this._x=n,this):this._x}function y$(n){return n[1]}function v$(n){return arguments.length?(this._y=n,this):this._y}function _$(n){return n[2]}function w$(n){return arguments.length?(this._z=n,this):this._z}function Ck(n,e,r,i){var s=new a_(e??m$,r??y$,i??_$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function a_(n,e,r,i,s,o,a,l,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function Nb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var gn=Ck.prototype=a_.prototype;gn.copy=function(){var n=new a_(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Nb(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=Nb(i));return n};gn.add=t$;gn.addAll=n$;gn.cover=r$;gn.data=i$;gn.extent=s$;gn.find=o$;gn.findAllWithinRadius=l$;gn.remove=u$;gn.removeAll=c$;gn.root=h$;gn.size=f$;gn.visit=d$;gn.visitAfter=p$;gn.x=g$;gn.y=v$;gn.z=w$;function ps(n){return function(){return n}}function as(n){return(n()-.5)*1e-6}function x$(n){return n.index}function Rb(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function b$(n){var e=x$,r=m,i,s=ps(30),o,a,l,u,c,d,h=1;n==null&&(n=[]);function m(b){return 1/Math.min(u[b.source.index],u[b.target.index])}function v(b){for(var T=0,N=n.length;T<h;++T)for(var O=0,L,U,A,R=0,D=0,M=0,F,$;O<N;++O)L=n[O],U=L.source,A=L.target,R=A.x+A.vx-U.x-U.vx||as(d),l>1&&(D=A.y+A.vy-U.y-U.vy||as(d)),l>2&&(M=A.z+A.vz-U.z-U.vz||as(d)),F=Math.sqrt(R*R+D*D+M*M),F=(F-o[O])/F*b*i[O],R*=F,D*=F,M*=F,A.vx-=R*($=c[O]),l>1&&(A.vy-=D*$),l>2&&(A.vz-=M*$),U.vx+=R*($=1-$),l>1&&(U.vy+=D*$),l>2&&(U.vz+=M*$)}function w(){if(a){var b,T=a.length,N=n.length,O=new Map(a.map((U,A)=>[e(U,A,a),U])),L;for(b=0,u=new Array(T);b<N;++b)L=n[b],L.index=b,typeof L.source!="object"&&(L.source=Rb(O,L.source)),typeof L.target!="object"&&(L.target=Rb(O,L.target)),u[L.source.index]=(u[L.source.index]||0)+1,u[L.target.index]=(u[L.target.index]||0)+1;for(b=0,c=new Array(N);b<N;++b)L=n[b],c[b]=u[L.source.index]/(u[L.source.index]+u[L.target.index]);i=new Array(N),I(),o=new Array(N),C()}}function I(){if(a)for(var b=0,T=n.length;b<T;++b)i[b]=+r(n[b],b,n)}function C(){if(a)for(var b=0,T=n.length;b<T;++b)o[b]=+s(n[b],b,n)}return v.initialize=function(b,...T){a=b,d=T.find(N=>typeof N=="function")||Math.random,l=T.find(N=>[1,2,3].includes(N))||2,w()},v.links=function(b){return arguments.length?(n=b,w(),v):n},v.id=function(b){return arguments.length?(e=b,v):e},v.iterations=function(b){return arguments.length?(h=+b,v):h},v.strength=function(b){return arguments.length?(r=typeof b=="function"?b:ps(+b),I(),v):r},v.distance=function(b){return arguments.length?(s=typeof b=="function"?b:ps(+b),C(),v):s},v}const E$=1664525,T$=1013904223,Pb=4294967296;function I$(){let n=1;return()=>(n=(E$*n+T$)%Pb)/Pb}var Ob=3;function ng(n){return n.x}function jb(n){return n.y}function S$(n){return n.z}var C$=10,k$=Math.PI*(3-Math.sqrt(5)),A$=Math.PI*20/(9+Math.sqrt(221));function N$(n,e){e=e||2;var r=Math.min(Ob,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,u=.6,c=new Map,d=Y0(v),h=Ih("tick","end"),m=I$();n==null&&(n=[]);function v(){w(),h.call("tick",i),s<o&&(d.stop(),h.call("end",i))}function w(b){var T,N=n.length,O;b===void 0&&(b=1);for(var L=0;L<b;++L)for(s+=(l-s)*a,c.forEach(function(U){U(s)}),T=0;T<N;++T)O=n[T],O.fx==null?O.x+=O.vx*=u:(O.x=O.fx,O.vx=0),r>1&&(O.fy==null?O.y+=O.vy*=u:(O.y=O.fy,O.vy=0)),r>2&&(O.fz==null?O.z+=O.vz*=u:(O.z=O.fz,O.vz=0));return i}function I(){for(var b=0,T=n.length,N;b<T;++b){if(N=n[b],N.index=b,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),N.fz!=null&&(N.z=N.fz),isNaN(N.x)||r>1&&isNaN(N.y)||r>2&&isNaN(N.z)){var O=C$*(r>2?Math.cbrt(.5+b):r>1?Math.sqrt(.5+b):b),L=b*k$,U=b*A$;r===1?N.x=O:r===2?(N.x=O*Math.cos(L),N.y=O*Math.sin(L)):(N.x=O*Math.sin(L)*Math.cos(U),N.y=O*Math.cos(L),N.z=O*Math.sin(L)*Math.sin(U))}(isNaN(N.vx)||r>1&&isNaN(N.vy)||r>2&&isNaN(N.vz))&&(N.vx=0,r>1&&(N.vy=0),r>2&&(N.vz=0))}}function C(b){return b.initialize&&b.initialize(n,m,r),b}return I(),i={tick:w,restart:function(){return d.restart(v),i},stop:function(){return d.stop(),i},numDimensions:function(b){return arguments.length?(r=Math.min(Ob,Math.max(1,Math.round(b))),c.forEach(C),i):r},nodes:function(b){return arguments.length?(n=b,I(),c.forEach(C),i):n},alpha:function(b){return arguments.length?(s=+b,i):s},alphaMin:function(b){return arguments.length?(o=+b,i):o},alphaDecay:function(b){return arguments.length?(a=+b,i):+a},alphaTarget:function(b){return arguments.length?(l=+b,i):l},velocityDecay:function(b){return arguments.length?(u=1-b,i):1-u},randomSource:function(b){return arguments.length?(m=b,c.forEach(C),i):m},force:function(b,T){return arguments.length>1?(T==null?c.delete(b):c.set(b,C(T)),i):c.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),T=b.shift()||0,N=(r>1?b.shift():null)||0,O=(r>2?b.shift():null)||0,L=b.shift()||1/0,U=0,A=n.length,R,D,M,F,$,j;for(L*=L,U=0;U<A;++U)$=n[U],R=T-$.x,D=N-($.y||0),M=O-($.z||0),F=R*R+D*D+M*M,F<L&&(j=$,L=F);return j},on:function(b,T){return arguments.length>1?(h.on(b,T),i):h.on(b)}}}function R$(){var n,e,r,i,s,o=ps(-30),a,l=1,u=1/0,c=.81;function d(w){var I,C=n.length,b=(e===1?Ek(n,ng):e===2?Ik(n,ng,jb):e===3?Ck(n,ng,jb,S$):null).visitAfter(m);for(s=w,I=0;I<C;++I)r=n[I],b.visit(v)}function h(){if(n){var w,I=n.length,C;for(a=new Array(I),w=0;w<I;++w)C=n[w],a[C.index]=+o(C,w,n)}}function m(w){var I=0,C,b,T=0,N,O,L,U,A=w.length;if(A){for(N=O=L=U=0;U<A;++U)(C=w[U])&&(b=Math.abs(C.value))&&(I+=C.value,T+=b,N+=b*(C.x||0),O+=b*(C.y||0),L+=b*(C.z||0));I*=Math.sqrt(4/A),w.x=N/T,e>1&&(w.y=O/T),e>2&&(w.z=L/T)}else{C=w,C.x=C.data.x,e>1&&(C.y=C.data.y),e>2&&(C.z=C.data.z);do I+=a[C.data.index];while(C=C.next)}w.value=I}function v(w,I,C,b,T){if(!w.value)return!0;var N=[C,b,T][e-1],O=w.x-r.x,L=e>1?w.y-r.y:0,U=e>2?w.z-r.z:0,A=N-I,R=O*O+L*L+U*U;if(A*A/c<R)return R<u&&(O===0&&(O=as(i),R+=O*O),e>1&&L===0&&(L=as(i),R+=L*L),e>2&&U===0&&(U=as(i),R+=U*U),R<l&&(R=Math.sqrt(l*R)),r.vx+=O*w.value*s/R,e>1&&(r.vy+=L*w.value*s/R),e>2&&(r.vz+=U*w.value*s/R)),!0;if(w.length||R>=u)return;(w.data!==r||w.next)&&(O===0&&(O=as(i),R+=O*O),e>1&&L===0&&(L=as(i),R+=L*L),e>2&&U===0&&(U=as(i),R+=U*U),R<l&&(R=Math.sqrt(l*R)));do w.data!==r&&(A=a[w.data.index]*s/R,r.vx+=O*A,e>1&&(r.vy+=L*A),e>2&&(r.vz+=U*A));while(w=w.next)}return d.initialize=function(w,...I){n=w,i=I.find(C=>typeof C=="function")||Math.random,e=I.find(C=>[1,2,3].includes(C))||2,h()},d.strength=function(w){return arguments.length?(o=typeof w=="function"?w:ps(+w),h(),d):o},d.distanceMin=function(w){return arguments.length?(l=w*w,d):Math.sqrt(l)},d.distanceMax=function(w){return arguments.length?(u=w*w,d):Math.sqrt(u)},d.theta=function(w){return arguments.length?(c=w*w,d):Math.sqrt(c)},d}function P$(n,e,r,i){var s,o,a=ps(.1),l,u;typeof n!="function"&&(n=ps(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function c(h){for(var m=0,v=s.length;m<v;++m){var w=s[m],I=w.x-e||1e-6,C=(w.y||0)-r||1e-6,b=(w.z||0)-i||1e-6,T=Math.sqrt(I*I+C*C+b*b),N=(u[m]-T)*l[m]*h/T;w.vx+=I*N,o>1&&(w.vy+=C*N),o>2&&(w.vz+=b*N)}}function d(){if(s){var h,m=s.length;for(l=new Array(m),u=new Array(m),h=0;h<m;++h)u[h]=+n(s[h],h,s),l[h]=isNaN(u[h])?0:+a(s[h],h,s)}}return c.initialize=function(h,...m){s=h,o=m.find(v=>[1,2,3].includes(v))||2,d()},c.strength=function(h){return arguments.length?(a=typeof h=="function"?h:ps(+h),d(),c):a},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:ps(+h),d(),c):n},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(r=+h,c):r},c.z=function(h){return arguments.length?(i=+h,c):i},c}const{abs:Bu,cos:is,sin:ol,acos:O$,atan2:qu,sqrt:Bs,pow:br}=Math;function Hu(n){return n<0?-br(-n,1/3):br(n,1/3)}const kk=Math.PI,yf=2*kk,qs=kk/2,j$=1e-6,rg=Number.MAX_SAFE_INTEGER||9007199254740991,ig=Number.MIN_SAFE_INTEGER||-9007199254740991,D$={x:0,y:0,z:0},_e={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Bs(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,u=n*n,c,d,h,m=0;i===2?(o=[o[0],o[1],o[2],D$],c=l,d=s*n*2,h=u):i===3&&(c=l*s,d=l*n*3,h=s*u*3,m=n*u);const v={x:c*o[0].x+d*o[1].x+h*o[2].x+m*o[3].x,y:c*o[0].y+d*o[1].y+h*o[2].y+m*o[3].y,t:n};return r&&(v.z=c*o[0].z+d*o[1].z+h*o[2].z+m*o[3].z),v}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],u=o[1],c=o[2],d=o[3],h;if(l*=s,u*=n,a.length===2)return h=l+u,{x:(l*a[0].x+u*a[1].x)/h,y:(l*a[0].y+u*a[1].y)/h,z:i?(l*a[0].z+u*a[1].z)/h:!1,t:n};if(l*=s,u*=2*s,c*=n*n,a.length===3)return h=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z)/h:!1,t:n};if(l*=s,u*=1.5*s,c*=3*s,d*=n*n*n,a.length===4)return h=l+u+c+d,{x:(l*a[0].x+u*a[1].x+c*a[2].x+d*a[3].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y+d*a[3].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z+d*a[3].z)/h:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,u;l<o;l++)u={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(u.z=o*(i[l+1].z-i[l].z)),a.push(u);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||_e.approximately(n,e)||_e.approximately(n,r)},approximately:function(n,e,r){return Bu(n-e)<=(r||j$)},length:function(n){const r=_e.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*_e.Tvalues[s]+.5,i+=_e.Cvalues[s]*_e.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,u=l/o;return i+a*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(_e.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,u=i*o+s*a;return qu(l,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return Bs(r*r+i*i)},closest:function(n,e){let r=br(2,63),i,s;return n.forEach(function(o,a){s=_e.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=br(n,e)+br(1-n,e),i=r-1;return Bu(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=br(1-n,e),i=br(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const u=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),c=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),d=(n-r)*(o-l)-(e-i)*(s-a);return d==0?!1:{x:u/d,y:c/d}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,u=r.x,c=r.y,d=i.x,h=i.y;return _e.lli8(s,o,a,l,u,c,d,h)},lli:function(n,e){return _e.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new bt(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=rg,r=rg,i=ig,s=ig;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!_e.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(u){u.virtual||l.forEach(function(c){if(c.virtual)return;const d=u.intersects(c,s);d.length>0&&(d.c1=u,d.c2=c,d.s1=n,d.s2=r,o.push(d))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=_e.makeline(e.points[i-1],n.points[0]),a=_e.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:_e.findbbox([o,n,e,a])};return l.intersections=function(u){return _e.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=rg,s=ig,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-qu(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*is(s)-(a.y-i)*ol(s),y:(a.x-r)*ol(s)+(a.y-i)*is(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=_e.align(n,e),s=function(A){return 0<=A&&A<=1};if(r===2){const A=i[0].y,R=i[1].y,D=i[2].y,M=A-2*R+D;if(M!==0){const F=-Bs(R*R-A*D),$=-A+R,j=-(F+$)/M,q=-(-F+$)/M;return[j,q].filter(s)}else if(R!==D&&M===0)return[(2*R-D)/(2*R-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,u=i[3].y;let c=-o+3*a-3*l+u,d=3*o-6*a+3*l,h=-3*o+3*a,m=o;if(_e.approximately(c,0)){if(_e.approximately(d,0))return _e.approximately(h,0)?[]:[-m/h].filter(s);const A=Bs(h*h-4*d*m),R=2*d;return[(A-h)/R,(-h-A)/R].filter(s)}d/=c,h/=c,m/=c;const v=(3*h-d*d)/3,w=v/3,I=(2*d*d*d-9*d*h+27*m)/27,C=I/2,b=C*C+w*w*w;let T,N,O,L,U;if(b<0){const A=-v/3,R=A*A*A,D=Bs(R),M=-I/(2*D),F=M<-1?-1:M>1?1:M,$=O$(F),j=Hu(D),q=2*j;return O=q*is($/3)-d/3,L=q*is(($+yf)/3)-d/3,U=q*is(($+2*yf)/3)-d/3,[O,L,U].filter(s)}else{if(b===0)return T=C<0?Hu(-C):-Hu(C),O=2*T-d/3,L=-T-d/3,[O,L].filter(s);{const A=Bs(b);return T=Hu(-C+A),N=Hu(C+A),[T-N-d/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-Bs(r*r-e*i),a=-e+r,l=-(o+a)/s,u=-(-o+a)/s;return[l,u]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,u,c=0,d=0;const h=_e.compute(n,e),m=_e.compute(n,r),v=h.x*h.x+h.y*h.y;if(i?(o=Bs(br(h.y*m.z-m.y*h.z,2)+br(h.z*m.x-m.z*h.x,2)+br(h.x*m.y-m.x*h.y,2)),a=br(v+h.z*h.z,3/2)):(o=h.x*m.y-h.y*m.x,a=br(v,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,d=a/o,!s){const w=_e.curvature(n-.001,e,r,i,!0).k,I=_e.curvature(n+.001,e,r,i,!0).k;u=(I-c+(c-w))/2,l=(Bu(I-c)+Bu(c-w))/2}return{k:c,r:d,dk:u,adk:l}},inflections:function(n){if(n.length<4)return[];const e=_e.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),u=18*(s-r);if(_e.approximately(a,0)){if(!_e.approximately(l,0)){let m=-u/l;if(0<=m&&m<=1)return[m]}return[]}const c=2*a;if(_e.approximately(c,0))return[];const d=l*l-4*a*u;if(d<0)return[];const h=Math.sqrt(d);return[(h-l)/c,-(l+h)/c].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,u;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,u=(n[o].size+e[o].size)/2,Bu(a-l)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),u=e.split(.5),c=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];c=c.filter(function(h){return _e.bboxoverlap(h.left.bbox(),h.right.bbox())});let d=[];return c.length===0||(c.forEach(function(h){d=d.concat(_e.pairiteration(h.left,h.right,a))}),d=d.filter(function(h,m){return d.indexOf(h)===m})),d},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*is(qs)-s*ol(qs),u=i*ol(qs)+s*is(qs),c=o*is(qs)-a*ol(qs),d=o*ol(qs)+a*is(qs),h=(n.x+e.x)/2,m=(n.y+e.y)/2,v=(e.x+r.x)/2,w=(e.y+r.y)/2,I=h+l,C=m+u,b=v+c,T=w+d,N=_e.lli8(h,m,I,C,v,w,b,T),O=_e.dist(N,n);let L=qu(n.y-N.y,n.x-N.x),U=qu(e.y-N.y,e.x-N.x),A=qu(r.y-N.y,r.x-N.x),R;return L<A?((L>U||U>A)&&(L+=yf),L>A&&(R=A,A=L,L=R)):A<U&&U<L?(R=A,A=L,L=R):A+=yf,N.s=L,N.e=A,N.r=O,N},numberSort:function(n,e){return n-e}};class Ec{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return _e.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)_e.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Ec(r)}}const{abs:Ku,min:Db,max:Mb,cos:M$,sin:L$,acos:V$,sqrt:Wu}=Math,F$=Math.PI;class bt{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const v=[];r.forEach(function(w){["x","y","z"].forEach(function(I){typeof w[I]<"u"&&v.push(w[I])})}),r=v}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let v=0,w=a?3:2;v<o;v+=w){var u={x:r[v],y:r[v+1]};a&&(u.z=r[v+2]),l.push(u)}const c=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const h=_e.align(l,{p1:l[0],p2:l[c]}),m=_e.dist(l[0],l[c]);this._linear=h.reduce((v,w)=>v+Ku(w.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new bt(r,r,i);if(s===1)return new bt(e,r,r);const o=bt.getABC(2,e,r,i,s);return new bt(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=bt.getABC(3,e,r,i,s);typeof o>"u"&&(o=_e.dist(r,a.C));const l=o*(1-s)/s,u=_e.dist(e,i),c=(i.x-e.x)/u,d=(i.y-e.y)/u,h=o*c,m=o*d,v=l*c,w=l*d,I={x:r.x-h,y:r.y-m},C={x:r.x+v,y:r.y+w},b=a.A,T={x:b.x+(I.x-b.x)/(1-s),y:b.y+(I.y-b.y)/(1-s)},N={x:b.x+(C.x-b.x)/s,y:b.y+(C.y-b.y)/s},O={x:e.x+(T.x-e.x)/s,y:e.y+(T.y-e.y)/s},L={x:i.x+(N.x-i.x)/(1-s),y:i.y+(N.y-i.y)/(1-s)};return new bt(e,O,L,i)}static getUtils(){return _e}getUtils(){return bt.getUtils()}static get PolyBezier(){return Ec}valueOf(){return this.toString()}toString(){return _e.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=_e.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=_e.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return _e.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=_e.projectionratio(o,e),l=1-a,u={x:a*r.x+l*s.x,y:a*r.y+l*s.y},c=_e.abcratio(o,e);return{A:{x:i.x+(i.x-u.x)/c,y:i.y+(i.y-u.y)/c},B:i,C:u,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return bt.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],_e.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=_e.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,u=.1/i;let c=s.mdist,d=a,h=d,m;c+=1;for(let v;d<l+u;d+=u)m=this.compute(d),v=_e.dist(e,m),v<c&&(c=v,h=d);return h=h<0?0:h>1?1:h,m=this.compute(h),m.t=h,m.d=c,m}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?_e.computeWithRatios(e,this.points,this.ratios,this._3d):_e.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new bt(r)}derivative(e){return _e.compute(e,this.dpoints[0],this._3d)}dderivative(e){return _e.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new bt(_e.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return _e.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return _e.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Wu(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Wu(r.x*r.x+r.y*r.y+r.z*r.z),o=Wu(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Wu(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const u=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,u=r.length-1;a<u;a++)l=_e.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new bt([i[0],i[3],i[5]]):new bt([i[0],i[4],i[7],i[9]]),right:this.order===2?new bt([i[5],i[4],i[2]]):new bt([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=_e.map(0,0,1,this._t1,this._t2),s.left._t2=_e.map(e,0,1,this._t1,this._t2),s.right._t1=_e.map(e,0,1,this._t1,this._t2),s.right._t2=_e.map(1,0,1,this._t1,this._t2),r?(r=_e.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=_e.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(_e.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(_e.numberSort))}).bind(this)),e.values=r.sort(_e.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=_e.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return _e.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new bt(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=_e.angle(this.points[0],this.points[3],this.points[1]),o=_e.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Ku(V$(i))<F$/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=c.split(r,i),!o.simple()){if(i-=s,Ku(r-i)<s)return[];o=c.split(r,i),o._t1=_e.map(r,0,1,c._t1,c._t2),o._t2=_e.map(i,0,1,c._t1,c._t2),l.push(o),r=i;break}r<1&&(o=c.split(r,1),o._t1=_e.map(r,0,1,c._t1,c._t2),o._t2=c._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new bt(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],c=[],d=_e.lli4(u[0],u[0].c,u[1],u[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const m=c[h*r]=_e.copy(o[h*r]);m.x+=(h?l:a)*u[h].n.x,m.y+=(h?l:a)*u[h].n.y}),i?([0,1].forEach(function(h){if(!(r===2&&h)){var m=o[h+1],v={x:m.x-d.x,y:m.y-d.y},w=i?i((h+1)/r):e;i&&!s&&(w=-w);var I=Wu(v.x*v.x+v.y*v.y);v.x/=I,v.y/=I,c[h+1]={x:m.x+w*v.x,y:m.y+w*v.y}}}),new bt(c)):([0,1].forEach(h=>{if(r===2&&h)return;const m=c[h*r],v=this.derivative(h),w={x:m.x+v.x,y:m.y+v.y};c[h+1]=_e.lli4(m,w,d,o[h+1])}),new bt(c))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const L=this.normal(0),U=this.points[0],A=this.points[this.points.length-1];let R,D,M;i===void 0&&(i=e,s=r),R={x:U.x+L.x*e,y:U.y+L.y*e},M={x:A.x+L.x*i,y:A.y+L.y*i},D={x:(R.x+M.x)/2,y:(R.y+M.y)/2};const F=[R,D,M];R={x:U.x-L.x*r,y:U.y-L.y*r},M={x:A.x-L.x*s,y:A.y-L.y*s},D={x:(R.x+M.x)/2,y:(R.y+M.y)/2};const $=[M,D,R],j=_e.makeline($[2],F[0]),q=_e.makeline(F[2],$[0]),W=[j,new bt(F),q,new bt($)];return new Ec(W)}const o=this.reduce(),a=o.length,l=[];let u=[],c,d=0,h=this.length();const m=typeof i<"u"&&typeof s<"u";function v(L,U,A,R,D){return function(M){const F=R/A,$=(R+D)/A,j=U-L;return _e.map(M,0,1,L+F*j,L+$*j)}}o.forEach(function(L){const U=L.length();m?(l.push(L.scale(v(e,i,h,d,U))),u.push(L.scale(v(-r,-s,h,d,U)))):(l.push(L.scale(e)),u.push(L.scale(-r))),d+=U}),u=u.map(function(L){return c=L.points,c[3]?L.points=[c[3],c[2],c[1],c[0]]:L.points=[c[2],c[1],c[0]],L}).reverse();const w=l[0].points[0],I=l[a-1].points[l[a-1].points.length-1],C=u[a-1].points[u[a-1].points.length-1],b=u[0].points[0],T=_e.makeline(C,w),N=_e.makeline(I,b),O=[T].concat(l).concat([N]).concat(u);return new Ec(O)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const u=_e.makeshape(s[a],s[l-a],i);u.startcap.virtual=a>1,u.endcap.virtual=a<l/2-1,o.push(u)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof bt&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=Db(e.p1.x,e.p2.x),i=Db(e.p1.y,e.p2.y),s=Mb(e.p1.x,e.p2.x),o=Mb(e.p1.y,e.p2.y);return _e.roots(this.points,e).filter(a=>{var l=this.get(a);return _e.between(l.x,r,s)&&_e.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,u;o<i;o++)l=r.slice(o,o+1),u=r.slice(o+2),a=this.curveintersects(l,u,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=_e.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),u=_e.dist(e,r),c=_e.dist(e,a),d=_e.dist(e,l);return Ku(c-u)+Ku(d-u)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,u,c,d,h=!1,m=!1,v,w=s,I=1;do if(m=h,d=c,w=(i+s)/2,l=this.get(w),u=this.get(s),c=_e.getccenter(a,l,u),c.interval={start:i,end:s},h=this._error(c,a,i,s)<=e,v=m&&!h,v||(I=s),h){if(s>=1){if(c.interval.end=I=1,d=c,s>1){let b={x:c.x+c.r*M$(c.e),y:c.y+c.r*L$(c.e)};c.e+=_e.angle({x:c.x,y:c.y},b,this.get(1))}break}s=s+(s-i)/2}else s=w;while(!v&&o++<100);if(o>=100)break;d=d||c,r.push(d),i=I}while(s<1);return r}}function Gy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function U$(n){if(Array.isArray(n))return n}function z$(n){if(Array.isArray(n))return Gy(n)}function $$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function B$(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function q$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K$(n,e){if(n==null)return{};var r,i,s=W$(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function W$(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function G$(n,e){return U$(n)||B$(n,e)||Ak(n,e)||q$()}function Q$(n){return z$(n)||$$(n)||Ak(n)||H$()}function Y$(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function X$(n){var e=Y$(n,"string");return typeof e=="symbol"?e:e+""}function Ak(n,e){if(n){if(typeof n=="string")return Gy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gy(n,e):void 0}}var J$=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,u){var c=l,d=u;return s.forEach(function(h,m){var v=h.keyAccessor,w=h.isProp,I;if(w){var C=d,b=C[v],T=K$(C,[v].map(X$));I=b,d=T}else I=v(d,m);m+1<s.length?(c.hasOwnProperty(I)||(c[I]={}),c=c[I]):r?(c.hasOwnProperty(I)||(c[I]=[]),c[I].push(d)):c[I]=d}),l},{});r instanceof Function&&function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===s.length?Object.keys(u).forEach(function(d){return u[d]=r(u[d])}):Object.values(u).forEach(function(d){return l(d,c+1)})}(o);var a=o;return i&&(a=[],function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===s.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(d){var h=G$(d,2),m=h[0],v=h[1];return l(v,[].concat(Q$(c),[m]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function Z$(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const Lb=Symbol("implicit");function Nk(){var n=new ib,e=[],r=[],i=Lb;function s(o){let a=n.get(o);if(a===void 0){if(i!==Lb)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new ib;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return Nk(e,r).unknown(i)},Z$.apply(s,arguments),s}function e7(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const t7=e7("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function n7(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var r7=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;n7(r7);function Qy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function i7(n){if(Array.isArray(n))return n}function s7(n){if(Array.isArray(n))return Qy(n)}function Vb(n,e,r){if(Rk())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function ah(n,e,r){return(e=h7(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Rk(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rk=function(){return!!n})()}function o7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function a7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function l7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function al(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fb(Object(r),!0).forEach(function(i){ah(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Fb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Tc(n,e){return i7(n)||a7(n,e)||Pk(n,e)||l7()}function Cr(n){return s7(n)||o7(n)||Pk(n)||u7()}function c7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function h7(n){var e=c7(n,"string");return typeof e=="symbol"?e:e+""}function Yy(n){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(n)}function Pk(n,e){if(n){if(typeof n=="string")return Qy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qy(n,e):void 0}}var f7=Nk(t7);function Ub(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=f7(e(i))})}function d7(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,u=l===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:l,c={};r.forEach(function(v){return c[e(v)]={data:v,out:[],depth:-1,skip:!a(v)}}),i.forEach(function(v){var w=v.source,I=v.target,C=O(w),b=O(I);if(!c.hasOwnProperty(C))throw"Missing source node with id: ".concat(C);if(!c.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var T=c[C],N=c[b];T.out.push(N);function O(L){return Yy(L)==="object"?e(L):L}});var d=[];m(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(Cr(Object.entries(c).filter(function(v){var w=Tc(v,2),I=w[1];return!I.skip}).map(function(v){var w=Tc(v,2),I=w[0],C=w[1];return ah({},I,C.depth)}))));return h;function m(v){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,C=function(){var O=v[b];if(w.indexOf(O)!==-1){var L=[].concat(Cr(w.slice(w.indexOf(O))),[O]).map(function(U){return e(U.data)});return d.some(function(U){return U.length===L.length&&U.every(function(A,R){return A===L[R]})})||(d.push(L),u(L)),1}I>O.depth&&(O.depth=I,m(O.out,[].concat(Cr(w),[O]),I+(O.skip?0:1)))},b=0,T=v.length;b<T;b++)C()}}var p7=2,Sn=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},zb=function(e,r){if(!r.isShadow){var i=ht(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=Cr(Array(o)).map(function(){return{}}):delete s.__photons})}},Xd=e_({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,zb(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Sn},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Sn},nodeColor:{default:"color",triggerUpdate:!1,onChange:Sn},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Sn},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Sn},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Sn},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Sn},linkColor:{default:"color",triggerUpdate:!1,onChange:Sn},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Sn},linkWidth:{default:1,triggerUpdate:!1,onChange:Sn},linkCurvature:{default:0,triggerUpdate:!1,onChange:Sn},linkCanvasObject:{triggerUpdate:!1,onChange:Sn},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Sn},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Sn},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Sn},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Sn},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:zb},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=ht(e.nodeVisibility),u=ht(e.nodeVal),c=ht(e.nodeColor),d=ht(e.nodeCanvasObjectMode),h=e.ctx,m=e.isShadow/e.globalScale,v=e.graphData.nodes.filter(l);h.save(),v.forEach(function(w){var I=d(w);if(e.nodeCanvasObject&&(I==="before"||I==="replace")&&(e.nodeCanvasObject(w,h,e.globalScale),I==="replace")){h.restore();return}var C=Math.sqrt(Math.max(0,u(w)||1))*e.nodeRelSize+m;h.beginPath(),h.arc(w.x,w.y,C,0,2*Math.PI,!1),h.fillStyle=c(w)||"rgba(31, 120, 180, 0.92)",h.fill(),e.nodeCanvasObject&&I==="after"&&e.nodeCanvasObject(w,e.ctx,e.globalScale)}),h.restore()}function s(){var l=ht(e.linkVisibility),u=ht(e.linkColor),c=ht(e.linkWidth),d=ht(e.linkLineDash),h=ht(e.linkCurvature),m=ht(e.linkCanvasObjectMode),v=e.ctx,w=e.isShadow*2,I=e.graphData.links.filter(l);I.forEach(U);var C=[],b=[],T=I;if(e.linkCanvasObject){var N=[],O=[];I.forEach(function(A){return({before:C,after:b,replace:N}[m(A)]||O).push(A)}),T=[].concat(Cr(C),b,O),C=C.concat(N)}v.save(),C.forEach(function(A){return e.linkCanvasObject(A,v,e.globalScale)}),v.restore();var L=J$(T,[u,c,d]);v.save(),Object.entries(L).forEach(function(A){var R=Tc(A,2),D=R[0],M=R[1],F=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(M).forEach(function($){var j=Tc($,2),q=j[0],W=j[1],Z=(q||1)/e.globalScale+w;Object.entries(W).forEach(function(de){var ee=Tc(de,2);ee[0];var ae=ee[1],he=d(ae[0]);v.beginPath(),ae.forEach(function(be){var ce=be.source,Ae=be.target;if(!(!ce||!Ae||!ce.hasOwnProperty("x")||!Ae.hasOwnProperty("x"))){v.moveTo(ce.x,ce.y);var Pe=be.__controlPoints;Pe?v[Pe.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(v,Cr(Pe).concat([Ae.x,Ae.y])):v.lineTo(Ae.x,Ae.y)}}),v.strokeStyle=F,v.lineWidth=Z,v.setLineDash(he||[]),v.stroke()})})}),v.restore(),v.save(),b.forEach(function(A){return e.linkCanvasObject(A,v,e.globalScale)}),v.restore();function U(A){var R=h(A);if(!R){A.__controlPoints=null;return}var D=A.source,M=A.target;if(!(!D||!M||!D.hasOwnProperty("x")||!M.hasOwnProperty("x"))){var F=Math.sqrt(Math.pow(M.x-D.x,2)+Math.pow(M.y-D.y,2));if(F>0){var $=Math.atan2(M.y-D.y,M.x-D.x),j=F*R,q={x:(D.x+M.x)/2+j*Math.cos($-Math.PI/2),y:(D.y+M.y)/2+j*Math.sin($-Math.PI/2)};A.__controlPoints=[q.x,q.y]}else{var W=R*70;A.__controlPoints=[M.x,M.y-W,M.x+W,M.y]}}}}function o(){var l=1.6,u=.2,c=ht(e.linkDirectionalArrowLength),d=ht(e.linkDirectionalArrowRelPos),h=ht(e.linkVisibility),m=ht(e.linkDirectionalArrowColor||e.linkColor),v=ht(e.nodeVal),w=e.ctx;w.save(),e.graphData.links.filter(h).forEach(function(I){var C=c(I);if(!(!C||C<0)){var b=I.source,T=I.target;if(!(!b||!T||!b.hasOwnProperty("x")||!T.hasOwnProperty("x"))){var N=Math.sqrt(Math.max(0,v(b)||1))*e.nodeRelSize,O=Math.sqrt(Math.max(0,v(T)||1))*e.nodeRelSize,L=Math.min(1,Math.max(0,d(I))),U=m(I)||"rgba(0,0,0,0.28)",A=C/l/2,R=I.__controlPoints&&Vb(bt,[b.x,b.y].concat(Cr(I.__controlPoints),[T.x,T.y])),D=R?function(Z){return R.get(Z)}:function(Z){return{x:b.x+(T.x-b.x)*Z||0,y:b.y+(T.y-b.y)*Z||0}},M=R?R.length():Math.sqrt(Math.pow(T.x-b.x,2)+Math.pow(T.y-b.y,2)),F=N+C+(M-N-O-C)*L,$=D(F/M),j=D((F-C)/M),q=D((F-C*(1-u))/M),W=Math.atan2($.y-j.y,$.x-j.x)-Math.PI/2;w.beginPath(),w.moveTo($.x,$.y),w.lineTo(j.x+A*Math.cos(W),j.y+A*Math.sin(W)),w.lineTo(q.x,q.y),w.lineTo(j.x-A*Math.cos(W),j.y-A*Math.sin(W)),w.fillStyle=U,w.fill()}}}),w.restore()}function a(){var l=ht(e.linkDirectionalParticles),u=ht(e.linkDirectionalParticleSpeed),c=ht(e.linkDirectionalParticleOffset),d=ht(e.linkDirectionalParticleWidth),h=ht(e.linkVisibility),m=ht(e.linkDirectionalParticleColor||e.linkColor),v=e.ctx;v.save(),e.graphData.links.filter(h).forEach(function(w){var I=l(w);if(!(!w.hasOwnProperty("__photons")||!w.__photons.length)){var C=w.source,b=w.target;if(!(!C||!b||!C.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var T=u(w),N=Math.abs(c(w)),O=w.__photons||[],L=Math.max(0,d(w)/2)/Math.sqrt(e.globalScale),U=m(w)||"rgba(0,0,0,0.28)";v.fillStyle=U;var A=w.__controlPoints?Vb(bt,[C.x,C.y].concat(Cr(w.__controlPoints),[b.x,b.y])):null,R=0,D=!1;O.forEach(function(M){var F=!!M.__singleHop;if(M.hasOwnProperty("__progressRatio")||(M.__progressRatio=F?0:(R+N)/I),!F&&R++,M.__progressRatio+=T,M.__progressRatio>=1)if(!F)M.__progressRatio=M.__progressRatio%1;else{D=!0;return}var $=M.__progressRatio,j=A?A.get($):{x:C.x+(b.x-C.x)*$||0,y:C.y+(b.y-C.y)*$||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(j.x,j.y,w,v,e.globalScale):(v.beginPath(),v.arc(j.x,j.y,L,0,2*Math.PI,!1),v.fill())}),D&&(w.__photons=w.__photons.filter(function(M){return!M.__singleHop||M.__progressRatio<=1}))}}}),v.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:N$().force("link",b$()).force("charge",R$()).force("center",Tz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Ub(e.graphData.nodes,ht(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Ub(e.graphData.links,ht(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(m){m.source=m[e.linkSource],m.target=m[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(m){return m[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&d7(e.graphData,function(m){return m[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,Cr(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*p7*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return delete m[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),c=function(v){return(s[v[e.nodeId]]-o/2)*a*(u?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return m[d]=c(m)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?P$(function(m){var v=s[m[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-v:v)*a}).strength(function(m){return e.dagNodeFilter(m)?1:0}):null);for(var h=0;h<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);h++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function Ok(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,u){r.forEach(function(c){return u[c][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var d=[];return r.forEach(function(h){var m=a[h],v=m[o].apply(m,u);v!==m&&d.push(v)}),d.length?d[0]:this}}}}var m7=800,g7=4,y7=5,jk=Ok("forceGraph",Xd),v7=Ok(["forceGraph","shadowGraph"],Xd),_7=Object.assign.apply(Object,Cr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return ah({},n,jk.linkProp(n))})).concat(Cr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return ah({},n,v7.linkProp(n))})))),w7=Object.assign.apply(Object,Cr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return ah({},n,jk.linkMethod(n))})));function sg(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Si(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function Dk(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function $b(n,e,r){n.save(),Dk(n),n.clearRect(0,0,e,r),n.restore()}var x7=e_({props:al({width:{default:window.innerWidth,onChange:function(e,r){return sg(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return sg(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},_7),aliases:{stopAnimation:"pauseAnimation"},methods:al({graph2ScreenCoords:function(e,r,i){var s=Si(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Si(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new hb(a()).to(o,s).easing(wa.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var u=Si(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var c=u.x,d=u.y;e.zoom.translateTo(e.zoom.__baseElem,c===void 0?a().x:c,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new hb({k:s()}).to({k:r},i).easing(wa.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Si(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(c,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=ht(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[ab(o,function(a){return a.x-a.r}),ob(o,function(a){return a.x+a.r})],y:[ab(o,function(a){return a.y-a.r}),ob(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},w7),stateInit:function(){return{lastSetZoom:1,zoom:P8(),forceGraph:new Xd,shadowGraph:new Xd().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new nz,tweenGroup:new rk}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var h=null,m=window.devicePixelRatio,v=l.x>0&&l.y>0?a.getImageData(l.x*m,l.y*m,1,1):null;return v&&(h=r.colorTracker.lookup(v.data)),h};Sr(r.canvas).call($F().subject(function(){if(!r.enableNodeDrag)return null;var d=u();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var h=d.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},d.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var h=d.subject,m=h.__initialDragPos,v=d,w=Si(r.canvas).k,I={x:m.x+(v.x-m.x)/w-h.x,y:m.y+(v.y-m.y)/w-h.y};["x","y"].forEach(function(C){return h["f".concat(C)]=h[C]=m[C]+(v[C]-m[C])/w}),!(!h.__dragged&&y7>=Math.sqrt(M8(["x","y"].map(function(C){return Math.pow(d[C]-m[C],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,I))}).on("end",function(d){var h=d.subject,m=h.__initialDragPos,v={x:h.x-m.x,y:h.y-m.y};m.fx===void 0&&(h.fx=void 0),m.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,v))})),r.zoom(r.zoom.__baseElem=Sr(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||ht(r.enableZoomInteraction)(d))&&(d.type==="wheel"||ht(r.enablePanInteraction)(d))}).on("zoom",function(d){var h=d.transform;[o,a].forEach(function(m){Dk(m),m.translate(h.x,h.y),m.scale(h.k,h.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(al(al({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(al(al({},d.transform),i.centerAt()))}),sg(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Si(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=g7/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Ez(s),["pointermove","pointerdown"].forEach(function(d){return s.addEventListener(d,function(h){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(w){return Math.abs(w)>1}))&&(r.isPointerDragging=!0);var m=v(s);l.x=h.pageX-m.left,l.y=h.pageY-m.top;function v(w){var I=w.getBoundingClientRect(),C=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:I.top+b,left:I.left+C}}},{passive:!0})}),s.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"Click")];m&&m.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(d.button===2)if(r.hoverObj){var v=r["on".concat(r.hoverObj.type,"RightClick")];v&&v.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})}},{passive:!0}),s.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var c=uU(function(){$b(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return ht(r.linkWidth)(h)+r.linkHoverPrecision});var d=Si(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},m7);r.flushShadowCanvas=c.flush,(this._animationCycle=function d(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(N){return N.__photons&&N.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var m=r.isPointerDragging?null:u();if(m!==r.hoverObj){var v=r.hoverObj,w=v?v.type:null,I=m?m.type:null;if(w&&w!==I){var C=r["on".concat(w,"Hover")];C&&C(null,v.d)}if(I){var b=r["on".concat(I,"Hover")];b&&b(m.d,w===I?v.d:null)}r.tooltip.content(m&&ht(r["".concat(m.type.toLowerCase(),"Label")])(m.d)||null),r.canvas.classList[(m&&r["on".concat(I,"Click")]||!m&&r.onBackgroundClick)&&ht(r.showPointerCursor)(m==null?void 0:m.d)?"add":"remove"]("clickable"),r.hoverObj=m}h&&c()}if(h){$b(o,r.width,r.height);var T=Si(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,T),r.forceGraph.globalScale(T).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,T)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(e){}}),Mk={exports:{}},b7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",E7=b7,T7=E7;function Lk(){}function Vk(){}Vk.resetWarningCache=Lk;var I7=function(){function n(i,s,o,a,l,u){if(u!==T7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Vk,resetWarningCache:Lk};return r.PropTypes=r,r};Mk.exports=I7();var S7=Mk.exports;const Y=Xy(S7),Gp={width:Y.number,height:Y.number,graphData:Y.shape({nodes:Y.arrayOf(Y.object).isRequired,links:Y.arrayOf(Y.object).isRequired}),backgroundColor:Y.string,nodeRelSize:Y.number,nodeId:Y.string,nodeLabel:Y.oneOfType([Y.string,Y.func]),nodeVal:Y.oneOfType([Y.number,Y.string,Y.func]),nodeVisibility:Y.oneOfType([Y.bool,Y.string,Y.func]),nodeColor:Y.oneOfType([Y.string,Y.func]),nodeAutoColorBy:Y.oneOfType([Y.string,Y.func]),onNodeHover:Y.func,onNodeClick:Y.func,linkSource:Y.string,linkTarget:Y.string,linkLabel:Y.oneOfType([Y.string,Y.func]),linkVisibility:Y.oneOfType([Y.bool,Y.string,Y.func]),linkColor:Y.oneOfType([Y.string,Y.func]),linkAutoColorBy:Y.oneOfType([Y.string,Y.func]),linkWidth:Y.oneOfType([Y.number,Y.string,Y.func]),linkCurvature:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalArrowLength:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalArrowColor:Y.oneOfType([Y.string,Y.func]),linkDirectionalArrowRelPos:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticles:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleSpeed:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleOffset:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleWidth:Y.oneOfType([Y.number,Y.string,Y.func]),linkDirectionalParticleColor:Y.oneOfType([Y.string,Y.func]),onLinkHover:Y.func,onLinkClick:Y.func,dagMode:Y.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:Y.number,dagNodeFilter:Y.func,onDagError:Y.func,d3AlphaMin:Y.number,d3AlphaDecay:Y.number,d3VelocityDecay:Y.number,warmupTicks:Y.number,cooldownTicks:Y.number,cooldownTime:Y.number,onEngineTick:Y.func,onEngineStop:Y.func,getGraphBbox:Y.func},Fk={zoomToFit:Y.func,onNodeRightClick:Y.func,onNodeDrag:Y.func,onNodeDragEnd:Y.func,onLinkRightClick:Y.func,linkHoverPrecision:Y.number,onBackgroundClick:Y.func,onBackgroundRightClick:Y.func,showPointerCursor:Y.oneOfType([Y.bool,Y.func]),enablePointerInteraction:Y.bool,enableNodeDrag:Y.bool},l_={showNavInfo:Y.bool,nodeOpacity:Y.number,nodeResolution:Y.number,nodeThreeObject:Y.oneOfType([Y.object,Y.string,Y.func]),nodeThreeObjectExtend:Y.oneOfType([Y.bool,Y.string,Y.func]),nodePositionUpdate:Y.func,linkOpacity:Y.number,linkResolution:Y.number,linkCurveRotation:Y.oneOfType([Y.number,Y.string,Y.func]),linkMaterial:Y.oneOfType([Y.object,Y.string,Y.func]),linkThreeObject:Y.oneOfType([Y.object,Y.string,Y.func]),linkThreeObjectExtend:Y.oneOfType([Y.bool,Y.string,Y.func]),linkPositionUpdate:Y.func,linkDirectionalArrowResolution:Y.number,linkDirectionalParticleResolution:Y.number,linkDirectionalParticleThreeObject:Y.oneOfType([Y.object,Y.string,Y.func]),forceEngine:Y.oneOf(["d3","ngraph"]),ngraphPhysics:Y.object,numDimensions:Y.oneOf([1,2,3])},C7=Object.assign({},Gp,Fk,{linkLineDash:Y.oneOfType([Y.arrayOf(Y.number),Y.string,Y.func]),nodeCanvasObjectMode:Y.oneOfType([Y.string,Y.func]),nodeCanvasObject:Y.func,nodePointerAreaPaint:Y.func,linkCanvasObjectMode:Y.oneOfType([Y.string,Y.func]),linkCanvasObject:Y.func,linkPointerAreaPaint:Y.func,linkDirectionalParticleCanvasObject:Y.func,autoPauseRedraw:Y.bool,minZoom:Y.number,maxZoom:Y.number,enableZoomInteraction:Y.oneOfType([Y.bool,Y.func]),enablePanInteraction:Y.oneOfType([Y.bool,Y.func]),onZoom:Y.func,onZoomEnd:Y.func,onRenderFramePre:Y.func,onRenderFramePost:Y.func});Object.assign({},Gp,Fk,l_,{enableNavigationControls:Y.bool,controlType:Y.oneOf(["trackball","orbit","fly"]),rendererConfig:Y.object,extraRenderers:Y.arrayOf(Y.shape({render:Y.func.isRequired}))});Object.assign({},Gp,l_,{nodeDesc:Y.oneOfType([Y.string,Y.func]),linkDesc:Y.oneOfType([Y.string,Y.func])});Object.assign({},Gp,l_,{markerAttrs:Y.object,yOffset:Y.number,glScale:Y.number});const u_=eV(x7,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});u_.displayName="ForceGraph2D";u_.propTypes=C7;const k7=()=>{const{contacts:n,userProfile:e,updateContactPosition:r}=jo(),i=Ro(),s=ue.useRef(),[o,a]=ue.useState({width:window.innerWidth,height:window.innerHeight}),[l,u]=ue.useState(""),c=ue.useMemo(()=>["",...(e==null?void 0:e.categories)||["","","","",""]],[e]);ue.useEffect(()=>{const h=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const d=ue.useMemo(()=>{if(!n)return{nodes:[],links:[]};const h=[],m=[],v=new Map,w=l===""?n:n.filter(C=>(C.tags||[]).includes(l));(l===""?c.filter(C=>C!==""):[l]).forEach(C=>{const b=`cat-${C}`;let T="#ffffff20";C===""?T="#fbbf24":C===""?T="#f87171":C===""?T="#60a5fa":C===""&&(T="#a78bfa");const N={id:b,name:C,isCategory:!0,val:15,color:T};h.push(N),v.set(C,N)}),w.forEach(C=>{let b="#10b981";C.importance>80||(C.tags||[]).includes("")?b="#fbbf24":(C.tags||[]).includes("")?b="#f87171":(C.tags||[]).includes("")?b="#60a5fa":(C.tags||[]).includes("")&&(b="#a78bfa");const T={id:C.id,name:C.name,val:(C.importance||50)/4+5,tags:C.tags||[],color:b,isContact:!0,avatar:C.avatar};C.position&&(T.fx=C.position.x,T.fy=C.position.y),h.push(T),(C.tags||[]).forEach(N=>{v.has(N)&&m.push({source:T.id,target:`cat-${N}`,value:1,color:"rgba(255, 255, 255, 0.05)",isHubLink:!0})})});for(let C=0;C<w.length;C++)for(let b=C+1;b<w.length;b++){const T=w[C],N=w[b],O=(T.tags||[]).filter(L=>(N.tags||[]).includes(L));(O.length>1||O.length===1&&O.includes(""))&&m.push({source:T.id,target:N.id,value:O.length*2,color:"rgba(255, 255, 255, 0.1)",isDirectLink:!0})}return{nodes:h,links:m}},[n,l,c]);return y.jsxs("div",{className:"w-full h-full bg-[#0a0a0c] relative overflow-hidden",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 px-6 pt-12 pb-8 bg-gradient-to-b from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black text-white",children:""}),y.jsx("p",{className:"text-white/40 text-[10px] font-black tracking-[0.2em] uppercase mt-0.5",children:"Social Network Analysis"})]}),y.jsx("button",{onClick:()=>i(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}),y.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:c.map(h=>y.jsx("button",{onClick:()=>u(h),className:`flex h-8 shrink-0 items-center justify-center rounded-lg px-4 transition-all duration-300 border text-[10px] font-black uppercase tracking-wider ${l===h?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:border-white/10"}`,children:h},h))})]}),y.jsx("div",{className:"w-full h-full",children:y.jsx(u_,{ref:s,graphData:d,width:o.width,height:o.height,backgroundColor:"#0a0a0c",nodeLabel:"name",nodeRelSize:4,linkColor:h=>h.color,linkWidth:h=>h.value,onNodeClick:h=>{h.isCategory?u(h.name):i(`/profile/${h.id}`)},onNodeDragEnd:h=>{h.fx=h.x,h.fy=h.y,r(h.id,{x:h.x,y:h.y})},enableNodeDrag:!0,cooldownTicks:100,d3AlphaDecay:.01,d3VelocityDecay:.1,d3Force:(h,m)=>{h==="charge"&&m.strength(v=>v.isCategory?-1e3:-150),h==="link"&&(m.distance(v=>v.isHubLink?100:50),m.strength(v=>v.isHubLink?.5:.1))},linkCanvasObject:(h,m,v)=>{const I=h.target.x-h.source.x,C=h.target.y-h.source.y;Math.sqrt(I*I+C*C)>150||(m.beginPath(),m.strokeStyle=h.color,m.lineWidth=h.value/v,m.moveTo(h.source.x,h.source.y),m.lineTo(h.target.x,h.target.y),m.stroke())},nodeCanvasObject:(h,m,v)=>{const w=h.name,I=h.isCategory?14/v:11/v;m.font=`${h.isCategory?"900":"bold"} ${I}px "Inter", sans-serif`,h.isCategory?(m.shadowColor=h.color,m.shadowBlur=20/v,m.fillStyle=h.color,m.beginPath(),m.arc(h.x,h.y,8/v,0,2*Math.PI,!1),m.fill(),m.strokeStyle=h.color,m.lineWidth=2/v,m.beginPath(),m.arc(h.x,h.y,12/v,0,2*Math.PI,!1),m.stroke(),m.shadowBlur=0,m.textAlign="center",m.textBaseline="middle",m.fillStyle="#ffffff",m.fillText(w,h.x,h.y)):(m.shadowColor=h.color,m.shadowBlur=10/v,m.fillStyle=h.color,m.beginPath(),m.arc(h.x,h.y,5/v,0,2*Math.PI,!1),m.fill(),m.shadowBlur=0,m.textAlign="center",m.textBaseline="middle",m.fillStyle="rgba(255, 255, 255, 0.8)",m.fillText(w,h.x,h.y+12/v))}})}),y.jsx("div",{className:"absolute bottom-32 left-6 right-6 p-4 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md z-10",children:y.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-[9px] font-black text-white/30 uppercase tracking-[0.15em]",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#fbbf24] shadow-[0_0_8px_rgba(251,191,36,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#f87171] shadow-[0_0_8px_rgba(248,113,113,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#60a5fa] shadow-[0_0_8px_rgba(96,149,250,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#a78bfa] shadow-[0_0_8px_rgba(167,139,250,0.5)]"}),y.jsx("span",{children:" / "})]})]})}),y.jsx("div",{className:"absolute bottom-44 right-6 flex flex-col gap-2 z-10",children:y.jsx("button",{onClick:()=>s.current.zoomToFit(400),className:"size-12 rounded-2xl bg-white/5 border border-white/10 text-white/40 flex items-center justify-center hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"zoom_in_map"})})})]})},A7=()=>{const n=Ro(),e=Wv(),{unsavedChanges:r,setUnsavedChanges:i}=jo(),s=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"graph",icon:"hub",label:"",path:"/graph"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}],o=a=>{e.pathname!==a&&(r?window.confirm("")&&(i(!1),n(a),navigator.vibrate&&navigator.vibrate(5)):(n(a),navigator.vibrate&&navigator.vibrate(5)))};return y.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-4 pb-6 pointer-events-none",children:y.jsx("div",{className:"glass-panel rounded-[28px] h-20 flex items-center justify-around px-2 pointer-events-auto",children:s.map(a=>{const l=e.pathname===a.path;return y.jsxs("button",{onClick:()=>o(a.path),className:`flex flex-col items-center justify-center gap-1.5 transition-all duration-500 relative group w-16 ${l?"text-primary":"text-white/20 hover:text-white/40"}`,children:[y.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${l?"scale-110 -translate-y-1":"scale-100"}`,children:[l&&y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150"}),y.jsx("span",{className:`material-symbols-outlined text-[26px] relative z-10 ${l?"font-black":""}`,children:a.icon})]}),y.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.15em] transition-all duration-500 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.label}),l&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary-color-rgb),0.8)]"})]},a.id)})})})},N7=({children:n})=>y.jsxs("div",{className:"bg-nexus min-h-screen text-white font-sans selection:bg-primary/30 overflow-x-hidden",children:[y.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative",children:y.jsx("div",{className:"flex-1 px-4 pt-6 pb-32",children:n})}),y.jsx(A7,{})]});function R7(){return y.jsx(k6,{children:y.jsx(dP,{children:y.jsxs(Ow,{children:[y.jsx(Ti,{path:"/p/:uid",element:y.jsx(D6,{})}),y.jsx(Ti,{path:"/*",element:y.jsx(N7,{children:y.jsxs(Ow,{children:[y.jsx(Ti,{path:"/",element:y.jsx(A6,{})}),y.jsx(Ti,{path:"/search",element:y.jsx(N6,{})}),y.jsx(Ti,{path:"/profile/:id",element:y.jsx(R6,{})}),y.jsx(Ti,{path:"/stealth",element:y.jsx(P6,{})}),y.jsx(Ti,{path:"/settings",element:y.jsx(j6,{})}),y.jsx(Ti,{path:"/vault",element:y.jsx(O6,{})}),y.jsx(Ti,{path:"/graph",element:y.jsx(k7,{})})]})})})]})})})}og.createRoot(document.getElementById("root")).render(y.jsx(mt.StrictMode,{children:y.jsx(R7,{})}));
