function CC(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kb={exports:{}},Gd={},Cb={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=Symbol.for("react.element"),AC=Symbol.for("react.portal"),NC=Symbol.for("react.fragment"),PC=Symbol.for("react.strict_mode"),RC=Symbol.for("react.profiler"),OC=Symbol.for("react.provider"),jC=Symbol.for("react.context"),DC=Symbol.for("react.forward_ref"),MC=Symbol.for("react.suspense"),LC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),m_=Symbol.iterator;function FC(n){return n===null||typeof n!="object"?null:(n=m_&&n[m_]||n["@@iterator"],typeof n=="function"?n:null)}var Ab={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nb=Object.assign,Pb={};function ru(n,e,r){this.props=n,this.context=e,this.refs=Pb,this.updater=r||Ab}ru.prototype.isReactComponent={};ru.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ru.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Rb(){}Rb.prototype=ru.prototype;function Wy(n,e,r){this.props=n,this.context=e,this.refs=Pb,this.updater=r||Ab}var Gy=Wy.prototype=new Rb;Gy.constructor=Wy;Nb(Gy,ru.prototype);Gy.isPureReactComponent=!0;var g_=Array.isArray,Ob=Object.prototype.hasOwnProperty,Qy={current:null},jb={key:!0,ref:!0,__self:!0,__source:!0};function Db(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ob.call(e,i)&&!jb.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:ih,type:n,key:o,ref:a,props:s,_owner:Qy.current}}function zC(n,e){return{$$typeof:ih,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Yy(n){return typeof n=="object"&&n!==null&&n.$$typeof===ih}function UC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var y_=/\/+/g;function Jp(n,e){return typeof n=="object"&&n!==null&&n.key!=null?UC(""+n.key):e.toString(36)}function pf(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case ih:case AC:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+Jp(a,0):i,g_(s)?(r="",n!=null&&(r=n.replace(y_,"$&/")+"/"),pf(s,e,r,"",function(c){return c})):s!=null&&(Yy(s)&&(s=zC(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(y_,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",g_(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+Jp(o,l);a+=pf(o,e,r,u,s)}else if(u=FC(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+Jp(o,l++),a+=pf(o,e,r,u,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Mh(n,e,r){if(n==null)return n;var i=[],s=0;return pf(n,i,"","",function(o){return e.call(r,o,s++)}),i}function $C(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Gn={current:null},mf={transition:null},BC={ReactCurrentDispatcher:Gn,ReactCurrentBatchConfig:mf,ReactCurrentOwner:Qy};function Mb(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Mh,forEach:function(n,e,r){Mh(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return Mh(n,function(){e++}),e},toArray:function(n){return Mh(n,function(e){return e})||[]},only:function(n){if(!Yy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};rt.Component=ru;rt.Fragment=NC;rt.Profiler=RC;rt.PureComponent=Wy;rt.StrictMode=PC;rt.Suspense=MC;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BC;rt.act=Mb;rt.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Nb({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Qy.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)Ob.call(e,u)&&!jb.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:ih,type:n.type,key:s,ref:o,props:i,_owner:a}};rt.createContext=function(n){return n={$$typeof:jC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:OC,_context:n},n.Consumer=n};rt.createElement=Db;rt.createFactory=function(n){var e=Db.bind(null,n);return e.type=n,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(n){return{$$typeof:DC,render:n}};rt.isValidElement=Yy;rt.lazy=function(n){return{$$typeof:VC,_payload:{_status:-1,_result:n},_init:$C}};rt.memo=function(n,e){return{$$typeof:LC,type:n,compare:e===void 0?null:e}};rt.startTransition=function(n){var e=mf.transition;mf.transition={};try{n()}finally{mf.transition=e}};rt.unstable_act=Mb;rt.useCallback=function(n,e){return Gn.current.useCallback(n,e)};rt.useContext=function(n){return Gn.current.useContext(n)};rt.useDebugValue=function(){};rt.useDeferredValue=function(n){return Gn.current.useDeferredValue(n)};rt.useEffect=function(n,e){return Gn.current.useEffect(n,e)};rt.useId=function(){return Gn.current.useId()};rt.useImperativeHandle=function(n,e,r){return Gn.current.useImperativeHandle(n,e,r)};rt.useInsertionEffect=function(n,e){return Gn.current.useInsertionEffect(n,e)};rt.useLayoutEffect=function(n,e){return Gn.current.useLayoutEffect(n,e)};rt.useMemo=function(n,e){return Gn.current.useMemo(n,e)};rt.useReducer=function(n,e,r){return Gn.current.useReducer(n,e,r)};rt.useRef=function(n){return Gn.current.useRef(n)};rt.useState=function(n){return Gn.current.useState(n)};rt.useSyncExternalStore=function(n,e,r){return Gn.current.useSyncExternalStore(n,e,r)};rt.useTransition=function(){return Gn.current.useTransition()};rt.version="18.3.1";Cb.exports=rt;var de=Cb.exports;const vt=Wd(de),qC=CC({__proto__:null,default:vt},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HC=de,KC=Symbol.for("react.element"),WC=Symbol.for("react.fragment"),GC=Object.prototype.hasOwnProperty,QC=HC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YC={key:!0,ref:!0,__self:!0,__source:!0};function Lb(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)GC.call(e,i)&&!YC.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:KC,type:n,key:o,ref:a,props:s,_owner:QC.current}}Gd.Fragment=WC;Gd.jsx=Lb;Gd.jsxs=Lb;kb.exports=Gd;var y=kb.exports,tg={},Vb={exports:{}},br={},Fb={exports:{}},zb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(re,H){var $=re.length;re.push(H);e:for(;0<$;){var ne=$-1>>>1,fe=re[ne];if(0<s(fe,H))re[ne]=H,re[$]=fe,$=ne;else break e}}function r(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var H=re[0],$=re.pop();if($!==H){re[0]=$;e:for(var ne=0,fe=re.length,ue=fe>>>1;ne<ue;){var ge=2*(ne+1)-1,Oe=re[ge],Le=ge+1,De=re[Le];if(0>s(Oe,$))Le<fe&&0>s(De,Oe)?(re[ne]=De,re[Le]=$,ne=Le):(re[ne]=Oe,re[ge]=$,ne=ge);else if(Le<fe&&0>s(De,$))re[ne]=De,re[Le]=$,ne=Le;else break e}}return H}function s(re,H){var $=re.sortIndex-H.sortIndex;return $!==0?$:re.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,m=3,_=!1,w=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(re){for(var H=r(c);H!==null;){if(H.callback===null)i(c);else if(H.startTime<=re)i(c),H.sortIndex=H.expirationTime,e(u,H);else break;H=r(c)}}function R(re){if(I=!1,A(re),!w)if(r(u)!==null)w=!0,Z(M);else{var H=r(c);H!==null&&pe(R,H.startTime-re)}}function M(re,H){w=!1,I&&(I=!1,b(C),C=-1),_=!0;var $=m;try{for(A(H),h=r(u);h!==null&&(!(h.expirationTime>H)||re&&!V());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,m=h.priorityLevel;var fe=ne(h.expirationTime<=H);H=n.unstable_now(),typeof fe=="function"?h.callback=fe:h===r(u)&&i(u),A(H)}else i(u);h=r(u)}if(h!==null)var ue=!0;else{var ge=r(c);ge!==null&&pe(R,ge.startTime-H),ue=!1}return ue}finally{h=null,m=$,_=!1}}var U=!1,N=null,C=-1,D=5,L=-1;function V(){return!(n.unstable_now()-L<D)}function B(){if(N!==null){var re=n.unstable_now();L=re;var H=!0;try{H=N(!0,re)}finally{H?j():(U=!1,N=null)}}else U=!1}var j;if(typeof T=="function")j=function(){T(B)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,G=K.port2;K.port1.onmessage=B,j=function(){G.postMessage(null)}}else j=function(){P(B,0)};function Z(re){N=re,U||(U=!0,j())}function pe(re,H){C=P(function(){re(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){w||_||(w=!0,Z(M))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(re){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var $=m;m=H;try{return re()}finally{m=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,H){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var $=m;m=re;try{return H()}finally{m=$}},n.unstable_scheduleCallback=function(re,H,$){var ne=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ne+$:ne):$=ne,re){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=$+fe,re={id:d++,callback:H,priorityLevel:re,startTime:$,expirationTime:fe,sortIndex:-1},$>ne?(re.sortIndex=$,e(c,re),r(u)===null&&re===r(c)&&(I?(b(C),C=-1):I=!0,pe(R,$-ne))):(re.sortIndex=fe,e(u,re),w||_||(w=!0,Z(M))),re},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(re){var H=m;return function(){var $=m;m=H;try{return re.apply(this,arguments)}finally{m=$}}}})(zb);Fb.exports=zb;var XC=Fb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC=de,wr=XC;function we(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ub=new Set,Ec={};function La(n,e){Fl(n,e),Fl(n+"Capture",e)}function Fl(n,e){for(Ec[n]=e,n=0;n<e.length;n++)Ub.add(e[n])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=Object.prototype.hasOwnProperty,ZC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},__={};function eA(n){return ng.call(__,n)?!0:ng.call(v_,n)?!1:ZC.test(n)?__[n]=!0:(v_[n]=!0,!1)}function tA(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function nA(n,e,r,i){if(e===null||typeof e>"u"||tA(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qn(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xn[n]=new Qn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xn[e]=new Qn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xn[n]=new Qn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xn[n]=new Qn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xn[n]=new Qn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xn[n]=new Qn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xn[n]=new Qn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xn[n]=new Qn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xn[n]=new Qn(n,5,!1,n.toLowerCase(),null,!1,!1)});var Xy=/[\-:]([a-z])/g;function Jy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Xy,Jy);xn[e]=new Qn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Xy,Jy);xn[e]=new Qn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Xy,Jy);xn[e]=new Qn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xn[n]=new Qn(n,1,!1,n.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xn[n]=new Qn(n,1,!1,n.toLowerCase(),null,!0,!0)});function Zy(n,e,r,i){var s=xn.hasOwnProperty(e)?xn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nA(e,r,s,i)&&(r=null),i||s===null?eA(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Ms=JC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lh=Symbol.for("react.element"),hl=Symbol.for("react.portal"),fl=Symbol.for("react.fragment"),ev=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),$b=Symbol.for("react.provider"),Bb=Symbol.for("react.context"),tv=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),sg=Symbol.for("react.suspense_list"),nv=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),qb=Symbol.for("react.offscreen"),w_=Symbol.iterator;function Nu(n){return n===null||typeof n!="object"?null:(n=w_&&n[w_]||n["@@iterator"],typeof n=="function"?n:null)}var Mt=Object.assign,Zp;function Wu(n){if(Zp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Zp=e&&e[1]||""}return`
`+Zp+n}var em=!1;function tm(n,e){if(!n||em)return"";em=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{em=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Wu(n):""}function rA(n){switch(n.tag){case 5:return Wu(n.type);case 16:return Wu("Lazy");case 13:return Wu("Suspense");case 19:return Wu("SuspenseList");case 0:case 2:case 15:return n=tm(n.type,!1),n;case 11:return n=tm(n.type.render,!1),n;case 1:return n=tm(n.type,!0),n;default:return""}}function og(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case fl:return"Fragment";case hl:return"Portal";case rg:return"Profiler";case ev:return"StrictMode";case ig:return"Suspense";case sg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Bb:return(n.displayName||"Context")+".Consumer";case $b:return(n._context.displayName||"Context")+".Provider";case tv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case nv:return e=n.displayName||null,e!==null?e:og(n.type)||"Memo";case Zs:e=n._payload,n=n._init;try{return og(n(e))}catch{}}return null}function iA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(e);case 8:return e===ev?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function To(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hb(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sA(n){var e=Hb(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Vh(n){n._valueTracker||(n._valueTracker=sA(n))}function Kb(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=Hb(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function $f(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ag(n,e){var r=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function x_(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=To(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wb(n,e){e=e.checked,e!=null&&Zy(n,"checked",e,!1)}function lg(n,e){Wb(n,e);var r=To(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ug(n,e.type,r):e.hasOwnProperty("defaultValue")&&ug(n,e.type,To(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function b_(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function ug(n,e,r){(e!=="number"||$f(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Gu=Array.isArray;function Tl(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+To(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function cg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function E_(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(we(92));if(Gu(r)){if(1<r.length)throw Error(we(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:To(r)}}function Gb(n,e){var r=To(e.value),i=To(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function T_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Qb(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Qb(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Fh,Yb=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Fh=Fh||document.createElement("div"),Fh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Tc(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oA=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(n){oA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),sc[e]=sc[n]})});function Xb(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||sc.hasOwnProperty(n)&&sc[n]?(""+e).trim():e+"px"}function Jb(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=Xb(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var aA=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fg(n,e){if(e){if(aA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function dg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=null;function rv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var mg=null,Il=null,Sl=null;function I_(n){if(n=ah(n)){if(typeof mg!="function")throw Error(we(280));var e=n.stateNode;e&&(e=Zd(e),mg(n.stateNode,n.type,e))}}function Zb(n){Il?Sl?Sl.push(n):Sl=[n]:Il=n}function eE(){if(Il){var n=Il,e=Sl;if(Sl=Il=null,I_(n),e)for(n=0;n<e.length;n++)I_(e[n])}}function tE(n,e){return n(e)}function nE(){}var nm=!1;function rE(n,e,r){if(nm)return n(e,r);nm=!0;try{return tE(n,e,r)}finally{nm=!1,(Il!==null||Sl!==null)&&(nE(),eE())}}function Ic(n,e){var r=n.stateNode;if(r===null)return null;var i=Zd(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(we(231,e,typeof r));return r}var gg=!1;if(ks)try{var Pu={};Object.defineProperty(Pu,"passive",{get:function(){gg=!0}}),window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{gg=!1}function lA(n,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var oc=!1,Bf=null,qf=!1,yg=null,uA={onError:function(n){oc=!0,Bf=n}};function cA(n,e,r,i,s,o,a,l,u){oc=!1,Bf=null,lA.apply(uA,arguments)}function hA(n,e,r,i,s,o,a,l,u){if(cA.apply(this,arguments),oc){if(oc){var c=Bf;oc=!1,Bf=null}else throw Error(we(198));qf||(qf=!0,yg=c)}}function Va(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function iE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function S_(n){if(Va(n)!==n)throw Error(we(188))}function fA(n){var e=n.alternate;if(!e){if(e=Va(n),e===null)throw Error(we(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return S_(s),n;if(o===i)return S_(s),e;o=o.sibling}throw Error(we(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(we(189))}}if(r.alternate!==i)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?n:e}function sE(n){return n=fA(n),n!==null?oE(n):null}function oE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=oE(n);if(e!==null)return e;n=n.sibling}return null}var aE=wr.unstable_scheduleCallback,k_=wr.unstable_cancelCallback,dA=wr.unstable_shouldYield,pA=wr.unstable_requestPaint,Wt=wr.unstable_now,mA=wr.unstable_getCurrentPriorityLevel,iv=wr.unstable_ImmediatePriority,lE=wr.unstable_UserBlockingPriority,Hf=wr.unstable_NormalPriority,gA=wr.unstable_LowPriority,uE=wr.unstable_IdlePriority,Qd=null,zi=null;function yA(n){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(Qd,n,void 0,(n.current.flags&128)===128)}catch{}}var di=Math.clz32?Math.clz32:wA,vA=Math.log,_A=Math.LN2;function wA(n){return n>>>=0,n===0?32:31-(vA(n)/_A|0)|0}var zh=64,Uh=4194304;function Qu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Kf(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Qu(l):(o&=a,o!==0&&(i=Qu(o)))}else a=r&~s,a!==0?i=Qu(a):o!==0&&(i=Qu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-di(e),s=1<<r,i|=n[r],e&=~s;return i}function xA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bA(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-di(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=xA(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function vg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function cE(){var n=zh;return zh<<=1,!(zh&4194240)&&(zh=64),n}function rm(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function sh(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-di(e),n[e]=r}function EA(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-di(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function sv(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-di(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var gt=0;function hE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var fE,ov,dE,pE,mE,_g=!1,$h=[],ho=null,fo=null,po=null,Sc=new Map,kc=new Map,no=[],TA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(n,e){switch(n){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":po=null;break;case"pointerover":case"pointerout":Sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(e.pointerId)}}function Ru(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ah(e),e!==null&&ov(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function IA(n,e,r,i,s){switch(e){case"focusin":return ho=Ru(ho,n,e,r,i,s),!0;case"dragenter":return fo=Ru(fo,n,e,r,i,s),!0;case"mouseover":return po=Ru(po,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return Sc.set(o,Ru(Sc.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,kc.set(o,Ru(kc.get(o)||null,n,e,r,i,s)),!0}return!1}function gE(n){var e=ha(n.target);if(e!==null){var r=Va(e);if(r!==null){if(e=r.tag,e===13){if(e=iE(r),e!==null){n.blockedOn=e,mE(n.priority,function(){dE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gf(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=wg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);pg=i,r.target.dispatchEvent(i),pg=null}else return e=ah(r),e!==null&&ov(e),n.blockedOn=r,!1;e.shift()}return!0}function A_(n,e,r){gf(n)&&r.delete(e)}function SA(){_g=!1,ho!==null&&gf(ho)&&(ho=null),fo!==null&&gf(fo)&&(fo=null),po!==null&&gf(po)&&(po=null),Sc.forEach(A_),kc.forEach(A_)}function Ou(n,e){n.blockedOn===e&&(n.blockedOn=null,_g||(_g=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,SA)))}function Cc(n){function e(s){return Ou(s,n)}if(0<$h.length){Ou($h[0],n);for(var r=1;r<$h.length;r++){var i=$h[r];i.blockedOn===n&&(i.blockedOn=null)}}for(ho!==null&&Ou(ho,n),fo!==null&&Ou(fo,n),po!==null&&Ou(po,n),Sc.forEach(e),kc.forEach(e),r=0;r<no.length;r++)i=no[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<no.length&&(r=no[0],r.blockedOn===null);)gE(r),r.blockedOn===null&&no.shift()}var kl=Ms.ReactCurrentBatchConfig,Wf=!0;function kA(n,e,r,i){var s=gt,o=kl.transition;kl.transition=null;try{gt=1,av(n,e,r,i)}finally{gt=s,kl.transition=o}}function CA(n,e,r,i){var s=gt,o=kl.transition;kl.transition=null;try{gt=4,av(n,e,r,i)}finally{gt=s,kl.transition=o}}function av(n,e,r,i){if(Wf){var s=wg(n,e,r,i);if(s===null)dm(n,e,i,Gf,r),C_(n,i);else if(IA(s,n,e,r,i))i.stopPropagation();else if(C_(n,i),e&4&&-1<TA.indexOf(n)){for(;s!==null;){var o=ah(s);if(o!==null&&fE(o),o=wg(n,e,r,i),o===null&&dm(n,e,i,Gf,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else dm(n,e,i,null,r)}}var Gf=null;function wg(n,e,r,i){if(Gf=null,n=rv(i),n=ha(n),n!==null)if(e=Va(n),e===null)n=null;else if(r=e.tag,r===13){if(n=iE(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Gf=n,null}function yE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mA()){case iv:return 1;case lE:return 4;case Hf:case gA:return 16;case uE:return 536870912;default:return 16}default:return 16}}var ao=null,lv=null,yf=null;function vE(){if(yf)return yf;var n,e=lv,r=e.length,i,s="value"in ao?ao.value:ao.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return yf=s.slice(n,1<i?1-i:void 0)}function vf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Bh(){return!0}function N_(){return!1}function Er(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bh:N_,this.isPropagationStopped=N_,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bh)},persist:function(){},isPersistent:Bh}),e}var iu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=Er(iu),oh=Mt({},iu,{view:0,detail:0}),AA=Er(oh),im,sm,ju,Yd=Mt({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ju&&(ju&&n.type==="mousemove"?(im=n.screenX-ju.screenX,sm=n.screenY-ju.screenY):sm=im=0,ju=n),im)},movementY:function(n){return"movementY"in n?n.movementY:sm}}),P_=Er(Yd),NA=Mt({},Yd,{dataTransfer:0}),PA=Er(NA),RA=Mt({},oh,{relatedTarget:0}),om=Er(RA),OA=Mt({},iu,{animationName:0,elapsedTime:0,pseudoElement:0}),jA=Er(OA),DA=Mt({},iu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),MA=Er(DA),LA=Mt({},iu,{data:0}),R_=Er(LA),VA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UA(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=zA[n])?!!e[n]:!1}function cv(){return UA}var $A=Mt({},oh,{key:function(n){if(n.key){var e=VA[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=vf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?FA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cv,charCode:function(n){return n.type==="keypress"?vf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),BA=Er($A),qA=Mt({},Yd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=Er(qA),HA=Mt({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cv}),KA=Er(HA),WA=Mt({},iu,{propertyName:0,elapsedTime:0,pseudoElement:0}),GA=Er(WA),QA=Mt({},Yd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),YA=Er(QA),XA=[9,13,27,32],hv=ks&&"CompositionEvent"in window,ac=null;ks&&"documentMode"in document&&(ac=document.documentMode);var JA=ks&&"TextEvent"in window&&!ac,_E=ks&&(!hv||ac&&8<ac&&11>=ac),j_=" ",D_=!1;function wE(n,e){switch(n){case"keyup":return XA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dl=!1;function ZA(n,e){switch(n){case"compositionend":return xE(e);case"keypress":return e.which!==32?null:(D_=!0,j_);case"textInput":return n=e.data,n===j_&&D_?null:n;default:return null}}function eN(n,e){if(dl)return n==="compositionend"||!hv&&wE(n,e)?(n=vE(),yf=lv=ao=null,dl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _E&&e.locale!=="ko"?null:e.data;default:return null}}var tN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function M_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!tN[n.type]:e==="textarea"}function bE(n,e,r,i){Zb(i),e=Qf(e,"onChange"),0<e.length&&(r=new uv("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var lc=null,Ac=null;function nN(n){OE(n,0)}function Xd(n){var e=gl(n);if(Kb(e))return n}function rN(n,e){if(n==="change")return e}var EE=!1;if(ks){var am;if(ks){var lm="oninput"in document;if(!lm){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),lm=typeof L_.oninput=="function"}am=lm}else am=!1;EE=am&&(!document.documentMode||9<document.documentMode)}function V_(){lc&&(lc.detachEvent("onpropertychange",TE),Ac=lc=null)}function TE(n){if(n.propertyName==="value"&&Xd(Ac)){var e=[];bE(e,Ac,n,rv(n)),rE(nN,e)}}function iN(n,e,r){n==="focusin"?(V_(),lc=e,Ac=r,lc.attachEvent("onpropertychange",TE)):n==="focusout"&&V_()}function sN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xd(Ac)}function oN(n,e){if(n==="click")return Xd(e)}function aN(n,e){if(n==="input"||n==="change")return Xd(e)}function lN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var yi=typeof Object.is=="function"?Object.is:lN;function Nc(n,e){if(yi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!ng.call(e,s)||!yi(n[s],e[s]))return!1}return!0}function F_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function z_(n,e){var r=F_(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=F_(r)}}function IE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?IE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function SE(){for(var n=window,e=$f();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=$f(n.document)}return e}function fv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uN(n){var e=SE(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&IE(r.ownerDocument.documentElement,r)){if(i!==null&&fv(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=z_(r,o);var a=z_(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cN=ks&&"documentMode"in document&&11>=document.documentMode,pl=null,xg=null,uc=null,bg=!1;function U_(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bg||pl==null||pl!==$f(i)||(i=pl,"selectionStart"in i&&fv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uc&&Nc(uc,i)||(uc=i,i=Qf(xg,"onSelect"),0<i.length&&(e=new uv("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=pl)))}function qh(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var ml={animationend:qh("Animation","AnimationEnd"),animationiteration:qh("Animation","AnimationIteration"),animationstart:qh("Animation","AnimationStart"),transitionend:qh("Transition","TransitionEnd")},um={},kE={};ks&&(kE=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Jd(n){if(um[n])return um[n];if(!ml[n])return n;var e=ml[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in kE)return um[n]=e[r];return n}var CE=Jd("animationend"),AE=Jd("animationiteration"),NE=Jd("animationstart"),PE=Jd("transitionend"),RE=new Map,$_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(n,e){RE.set(n,e),La(e,[n])}for(var cm=0;cm<$_.length;cm++){var hm=$_[cm],hN=hm.toLowerCase(),fN=hm[0].toUpperCase()+hm.slice(1);jo(hN,"on"+fN)}jo(CE,"onAnimationEnd");jo(AE,"onAnimationIteration");jo(NE,"onAnimationStart");jo("dblclick","onDoubleClick");jo("focusin","onFocus");jo("focusout","onBlur");jo(PE,"onTransitionEnd");Fl("onMouseEnter",["mouseout","mouseover"]);Fl("onMouseLeave",["mouseout","mouseover"]);Fl("onPointerEnter",["pointerout","pointerover"]);Fl("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function B_(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,hA(i,e,void 0,n),n.currentTarget=null}function OE(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;B_(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;B_(s,l,c),o=u}}}if(qf)throw n=yg,qf=!1,yg=null,n}function It(n,e){var r=e[kg];r===void 0&&(r=e[kg]=new Set);var i=n+"__bubble";r.has(i)||(jE(e,n,2,!1),r.add(i))}function fm(n,e,r){var i=0;e&&(i|=4),jE(r,n,i,e)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function Pc(n){if(!n[Hh]){n[Hh]=!0,Ub.forEach(function(r){r!=="selectionchange"&&(dN.has(r)||fm(r,!1,n),fm(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Hh]||(e[Hh]=!0,fm("selectionchange",!1,e))}}function jE(n,e,r,i){switch(yE(e)){case 1:var s=kA;break;case 4:s=CA;break;default:s=av}r=s.bind(null,e,r,n),s=void 0,!gg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function dm(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ha(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}rE(function(){var c=o,d=rv(r),h=[];e:{var m=RE.get(n);if(m!==void 0){var _=uv,w=n;switch(n){case"keypress":if(vf(r)===0)break e;case"keydown":case"keyup":_=BA;break;case"focusin":w="focus",_=om;break;case"focusout":w="blur",_=om;break;case"beforeblur":case"afterblur":_=om;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=P_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=PA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=KA;break;case CE:case AE:case NE:_=jA;break;case PE:_=GA;break;case"scroll":_=AA;break;case"wheel":_=YA;break;case"copy":case"cut":case"paste":_=MA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=O_}var I=(e&4)!==0,P=!I&&n==="scroll",b=I?m!==null?m+"Capture":null:m;I=[];for(var T=c,A;T!==null;){A=T;var R=A.stateNode;if(A.tag===5&&R!==null&&(A=R,b!==null&&(R=Ic(T,b),R!=null&&I.push(Rc(T,R,A)))),P)break;T=T.return}0<I.length&&(m=new _(m,w,null,r,d),h.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",_=n==="mouseout"||n==="pointerout",m&&r!==pg&&(w=r.relatedTarget||r.fromElement)&&(ha(w)||w[Cs]))break e;if((_||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,_?(w=r.relatedTarget||r.toElement,_=c,w=w?ha(w):null,w!==null&&(P=Va(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=c),_!==w)){if(I=P_,R="onMouseLeave",b="onMouseEnter",T="mouse",(n==="pointerout"||n==="pointerover")&&(I=O_,R="onPointerLeave",b="onPointerEnter",T="pointer"),P=_==null?m:gl(_),A=w==null?m:gl(w),m=new I(R,T+"leave",_,r,d),m.target=P,m.relatedTarget=A,R=null,ha(d)===c&&(I=new I(b,T+"enter",w,r,d),I.target=A,I.relatedTarget=P,R=I),P=R,_&&w)t:{for(I=_,b=w,T=0,A=I;A;A=il(A))T++;for(A=0,R=b;R;R=il(R))A++;for(;0<T-A;)I=il(I),T--;for(;0<A-T;)b=il(b),A--;for(;T--;){if(I===b||b!==null&&I===b.alternate)break t;I=il(I),b=il(b)}I=null}else I=null;_!==null&&q_(h,m,_,I,!1),w!==null&&P!==null&&q_(h,P,w,I,!0)}}e:{if(m=c?gl(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var M=rN;else if(M_(m))if(EE)M=aN;else{M=sN;var U=iN}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=oN);if(M&&(M=M(n,c))){bE(h,M,r,d);break e}U&&U(n,m,c),n==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&ug(m,"number",m.value)}switch(U=c?gl(c):window,n){case"focusin":(M_(U)||U.contentEditable==="true")&&(pl=U,xg=c,uc=null);break;case"focusout":uc=xg=pl=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,U_(h,r,d);break;case"selectionchange":if(cN)break;case"keydown":case"keyup":U_(h,r,d)}var N;if(hv)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else dl?wE(n,r)&&(C="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(_E&&r.locale!=="ko"&&(dl||C!=="onCompositionStart"?C==="onCompositionEnd"&&dl&&(N=vE()):(ao=d,lv="value"in ao?ao.value:ao.textContent,dl=!0)),U=Qf(c,C),0<U.length&&(C=new R_(C,n,null,r,d),h.push({event:C,listeners:U}),N?C.data=N:(N=xE(r),N!==null&&(C.data=N)))),(N=JA?ZA(n,r):eN(n,r))&&(c=Qf(c,"onBeforeInput"),0<c.length&&(d=new R_("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=N))}OE(h,e)})}function Rc(n,e,r){return{instance:n,listener:e,currentTarget:r}}function Qf(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ic(n,r),o!=null&&i.unshift(Rc(n,o,s)),o=Ic(n,e),o!=null&&i.push(Rc(n,o,s))),n=n.return}return i}function il(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function q_(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=Ic(r,o),u!=null&&a.unshift(Rc(r,u,l))):s||(u=Ic(r,o),u!=null&&a.push(Rc(r,u,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var pN=/\r\n?/g,mN=/\u0000|\uFFFD/g;function H_(n){return(typeof n=="string"?n:""+n).replace(pN,`
`).replace(mN,"")}function Kh(n,e,r){if(e=H_(e),H_(n)!==e&&r)throw Error(we(425))}function Yf(){}var Eg=null,Tg=null;function Ig(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sg=typeof setTimeout=="function"?setTimeout:void 0,gN=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,yN=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(n){return K_.resolve(null).then(n).catch(vN)}:Sg;function vN(n){setTimeout(function(){throw n})}function pm(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),Cc(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Cc(e)}function mo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function W_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var su=Math.random().toString(36).slice(2),Vi="__reactFiber$"+su,Oc="__reactProps$"+su,Cs="__reactContainer$"+su,kg="__reactEvents$"+su,_N="__reactListeners$"+su,wN="__reactHandles$"+su;function ha(n){var e=n[Vi];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Cs]||r[Vi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=W_(n);n!==null;){if(r=n[Vi])return r;n=W_(n)}return e}n=r,r=n.parentNode}return null}function ah(n){return n=n[Vi]||n[Cs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function gl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(we(33))}function Zd(n){return n[Oc]||null}var Cg=[],yl=-1;function Do(n){return{current:n}}function At(n){0>yl||(n.current=Cg[yl],Cg[yl]=null,yl--)}function Tt(n,e){yl++,Cg[yl]=n.current,n.current=e}var Io={},Ln=Do(Io),rr=Do(!1),Ia=Io;function zl(n,e){var r=n.type.contextTypes;if(!r)return Io;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function ir(n){return n=n.childContextTypes,n!=null}function Xf(){At(rr),At(Ln)}function G_(n,e,r){if(Ln.current!==Io)throw Error(we(168));Tt(Ln,e),Tt(rr,r)}function DE(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(we(108,iA(n)||"Unknown",s));return Mt({},r,i)}function Jf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Io,Ia=Ln.current,Tt(Ln,n),Tt(rr,rr.current),!0}function Q_(n,e,r){var i=n.stateNode;if(!i)throw Error(we(169));r?(n=DE(n,e,Ia),i.__reactInternalMemoizedMergedChildContext=n,At(rr),At(Ln),Tt(Ln,n)):At(rr),Tt(rr,r)}var ms=null,ep=!1,mm=!1;function ME(n){ms===null?ms=[n]:ms.push(n)}function xN(n){ep=!0,ME(n)}function Mo(){if(!mm&&ms!==null){mm=!0;var n=0,e=gt;try{var r=ms;for(gt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}ms=null,ep=!1}catch(s){throw ms!==null&&(ms=ms.slice(n+1)),aE(iv,Mo),s}finally{gt=e,mm=!1}}return null}var vl=[],_l=0,Zf=null,ed=0,jr=[],Dr=0,Sa=null,vs=1,_s="";function oa(n,e){vl[_l++]=ed,vl[_l++]=Zf,Zf=n,ed=e}function LE(n,e,r){jr[Dr++]=vs,jr[Dr++]=_s,jr[Dr++]=Sa,Sa=n;var i=vs;n=_s;var s=32-di(i)-1;i&=~(1<<s),r+=1;var o=32-di(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,vs=1<<32-di(e)+s|r<<s|i,_s=o+n}else vs=1<<o|r<<s|i,_s=n}function dv(n){n.return!==null&&(oa(n,1),LE(n,1,0))}function pv(n){for(;n===Zf;)Zf=vl[--_l],vl[_l]=null,ed=vl[--_l],vl[_l]=null;for(;n===Sa;)Sa=jr[--Dr],jr[Dr]=null,_s=jr[--Dr],jr[Dr]=null,vs=jr[--Dr],jr[Dr]=null}var vr=null,gr=null,Pt=!1,li=null;function VE(n,e){var r=Fr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function Y_(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vr=n,gr=mo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vr=n,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Sa!==null?{id:vs,overflow:_s}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fr(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,vr=n,gr=null,!0):!1;default:return!1}}function Ag(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ng(n){if(Pt){var e=gr;if(e){var r=e;if(!Y_(n,e)){if(Ag(n))throw Error(we(418));e=mo(r.nextSibling);var i=vr;e&&Y_(n,e)?VE(i,r):(n.flags=n.flags&-4097|2,Pt=!1,vr=n)}}else{if(Ag(n))throw Error(we(418));n.flags=n.flags&-4097|2,Pt=!1,vr=n}}}function X_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vr=n}function Wh(n){if(n!==vr)return!1;if(!Pt)return X_(n),Pt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ig(n.type,n.memoizedProps)),e&&(e=gr)){if(Ag(n))throw FE(),Error(we(418));for(;e;)VE(n,e),e=mo(e.nextSibling)}if(X_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){gr=mo(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}gr=null}}else gr=vr?mo(n.stateNode.nextSibling):null;return!0}function FE(){for(var n=gr;n;)n=mo(n.nextSibling)}function Ul(){gr=vr=null,Pt=!1}function mv(n){li===null?li=[n]:li.push(n)}var bN=Ms.ReactCurrentBatchConfig;function Du(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var i=r.stateNode}if(!i)throw Error(we(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,n))}return n}function Gh(n,e){throw n=Object.prototype.toString.call(e),Error(we(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function J_(n){var e=n._init;return e(n._payload)}function zE(n){function e(b,T){if(n){var A=b.deletions;A===null?(b.deletions=[T],b.flags|=16):A.push(T)}}function r(b,T){if(!n)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function i(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function s(b,T){return b=_o(b,T),b.index=0,b.sibling=null,b}function o(b,T,A){return b.index=A,n?(A=b.alternate,A!==null?(A=A.index,A<T?(b.flags|=2,T):A):(b.flags|=2,T)):(b.flags|=1048576,T)}function a(b){return n&&b.alternate===null&&(b.flags|=2),b}function l(b,T,A,R){return T===null||T.tag!==6?(T=bm(A,b.mode,R),T.return=b,T):(T=s(T,A),T.return=b,T)}function u(b,T,A,R){var M=A.type;return M===fl?d(b,T,A.props.children,R,A.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zs&&J_(M)===T.type)?(R=s(T,A.props),R.ref=Du(b,T,A),R.return=b,R):(R=If(A.type,A.key,A.props,null,b.mode,R),R.ref=Du(b,T,A),R.return=b,R)}function c(b,T,A,R){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=Em(A,b.mode,R),T.return=b,T):(T=s(T,A.children||[]),T.return=b,T)}function d(b,T,A,R,M){return T===null||T.tag!==7?(T=_a(A,b.mode,R,M),T.return=b,T):(T=s(T,A),T.return=b,T)}function h(b,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=bm(""+T,b.mode,A),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Lh:return A=If(T.type,T.key,T.props,null,b.mode,A),A.ref=Du(b,null,T),A.return=b,A;case hl:return T=Em(T,b.mode,A),T.return=b,T;case Zs:var R=T._init;return h(b,R(T._payload),A)}if(Gu(T)||Nu(T))return T=_a(T,b.mode,A,null),T.return=b,T;Gh(b,T)}return null}function m(b,T,A,R){var M=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:l(b,T,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Lh:return A.key===M?u(b,T,A,R):null;case hl:return A.key===M?c(b,T,A,R):null;case Zs:return M=A._init,m(b,T,M(A._payload),R)}if(Gu(A)||Nu(A))return M!==null?null:d(b,T,A,R,null);Gh(b,A)}return null}function _(b,T,A,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(A)||null,l(T,b,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Lh:return b=b.get(R.key===null?A:R.key)||null,u(T,b,R,M);case hl:return b=b.get(R.key===null?A:R.key)||null,c(T,b,R,M);case Zs:var U=R._init;return _(b,T,A,U(R._payload),M)}if(Gu(R)||Nu(R))return b=b.get(A)||null,d(T,b,R,M,null);Gh(T,R)}return null}function w(b,T,A,R){for(var M=null,U=null,N=T,C=T=0,D=null;N!==null&&C<A.length;C++){N.index>C?(D=N,N=null):D=N.sibling;var L=m(b,N,A[C],R);if(L===null){N===null&&(N=D);break}n&&N&&L.alternate===null&&e(b,N),T=o(L,T,C),U===null?M=L:U.sibling=L,U=L,N=D}if(C===A.length)return r(b,N),Pt&&oa(b,C),M;if(N===null){for(;C<A.length;C++)N=h(b,A[C],R),N!==null&&(T=o(N,T,C),U===null?M=N:U.sibling=N,U=N);return Pt&&oa(b,C),M}for(N=i(b,N);C<A.length;C++)D=_(N,b,C,A[C],R),D!==null&&(n&&D.alternate!==null&&N.delete(D.key===null?C:D.key),T=o(D,T,C),U===null?M=D:U.sibling=D,U=D);return n&&N.forEach(function(V){return e(b,V)}),Pt&&oa(b,C),M}function I(b,T,A,R){var M=Nu(A);if(typeof M!="function")throw Error(we(150));if(A=M.call(A),A==null)throw Error(we(151));for(var U=M=null,N=T,C=T=0,D=null,L=A.next();N!==null&&!L.done;C++,L=A.next()){N.index>C?(D=N,N=null):D=N.sibling;var V=m(b,N,L.value,R);if(V===null){N===null&&(N=D);break}n&&N&&V.alternate===null&&e(b,N),T=o(V,T,C),U===null?M=V:U.sibling=V,U=V,N=D}if(L.done)return r(b,N),Pt&&oa(b,C),M;if(N===null){for(;!L.done;C++,L=A.next())L=h(b,L.value,R),L!==null&&(T=o(L,T,C),U===null?M=L:U.sibling=L,U=L);return Pt&&oa(b,C),M}for(N=i(b,N);!L.done;C++,L=A.next())L=_(N,b,C,L.value,R),L!==null&&(n&&L.alternate!==null&&N.delete(L.key===null?C:L.key),T=o(L,T,C),U===null?M=L:U.sibling=L,U=L);return n&&N.forEach(function(B){return e(b,B)}),Pt&&oa(b,C),M}function P(b,T,A,R){if(typeof A=="object"&&A!==null&&A.type===fl&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Lh:e:{for(var M=A.key,U=T;U!==null;){if(U.key===M){if(M=A.type,M===fl){if(U.tag===7){r(b,U.sibling),T=s(U,A.props.children),T.return=b,b=T;break e}}else if(U.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zs&&J_(M)===U.type){r(b,U.sibling),T=s(U,A.props),T.ref=Du(b,U,A),T.return=b,b=T;break e}r(b,U);break}else e(b,U);U=U.sibling}A.type===fl?(T=_a(A.props.children,b.mode,R,A.key),T.return=b,b=T):(R=If(A.type,A.key,A.props,null,b.mode,R),R.ref=Du(b,T,A),R.return=b,b=R)}return a(b);case hl:e:{for(U=A.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){r(b,T.sibling),T=s(T,A.children||[]),T.return=b,b=T;break e}else{r(b,T);break}else e(b,T);T=T.sibling}T=Em(A,b.mode,R),T.return=b,b=T}return a(b);case Zs:return U=A._init,P(b,T,U(A._payload),R)}if(Gu(A))return w(b,T,A,R);if(Nu(A))return I(b,T,A,R);Gh(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(r(b,T.sibling),T=s(T,A),T.return=b,b=T):(r(b,T),T=bm(A,b.mode,R),T.return=b,b=T),a(b)):r(b,T)}return P}var $l=zE(!0),UE=zE(!1),td=Do(null),nd=null,wl=null,gv=null;function yv(){gv=wl=nd=null}function vv(n){var e=td.current;At(td),n._currentValue=e}function Pg(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Cl(n,e){nd=n,gv=wl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(tr=!0),n.firstContext=null)}function Br(n){var e=n._currentValue;if(gv!==n)if(n={context:n,memoizedValue:e,next:null},wl===null){if(nd===null)throw Error(we(308));wl=n,nd.dependencies={lanes:0,firstContext:n}}else wl=wl.next=n;return e}var fa=null;function _v(n){fa===null?fa=[n]:fa.push(n)}function $E(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,_v(e)):(r.next=s.next,s.next=r),e.interleaved=r,As(n,i)}function As(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var eo=!1;function wv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ts(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function go(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ht&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,As(n,r)}return s=i.interleaved,s===null?(e.next=e,_v(i)):(e.next=s.next,s.next=e),i.interleaved=e,As(n,r)}function _f(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,sv(n,r)}}function Z_(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function rd(n,e,r,i){var s=n.updateQueue;eo=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(o!==null){var h=s.baseState;a=0,d=c=u=null,l=o;do{var m=l.lane,_=l.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=n,I=l;switch(m=e,_=r,I.tag){case 1:if(w=I.payload,typeof w=="function"){h=w.call(_,h,m);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,m=typeof w=="function"?w.call(_,h,m):w,m==null)break e;h=Mt({},h,m);break e;case 2:eo=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else _={eventTime:_,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=_,u=h):d=d.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ca|=a,n.lanes=a,n.memoizedState=h}}function ew(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(we(191,s));s.call(i)}}}var lh={},Ui=Do(lh),jc=Do(lh),Dc=Do(lh);function da(n){if(n===lh)throw Error(we(174));return n}function xv(n,e){switch(Tt(Dc,e),Tt(jc,n),Tt(Ui,lh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=hg(e,n)}At(Ui),Tt(Ui,e)}function Bl(){At(Ui),At(jc),At(Dc)}function qE(n){da(Dc.current);var e=da(Ui.current),r=hg(e,n.type);e!==r&&(Tt(jc,n),Tt(Ui,r))}function bv(n){jc.current===n&&(At(Ui),At(jc))}var jt=Do(0);function id(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gm=[];function Ev(){for(var n=0;n<gm.length;n++)gm[n]._workInProgressVersionPrimary=null;gm.length=0}var wf=Ms.ReactCurrentDispatcher,ym=Ms.ReactCurrentBatchConfig,ka=0,Dt=null,sn=null,mn=null,sd=!1,cc=!1,Mc=0,EN=0;function Nn(){throw Error(we(321))}function Tv(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!yi(n[r],e[r]))return!1;return!0}function Iv(n,e,r,i,s,o){if(ka=o,Dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wf.current=n===null||n.memoizedState===null?kN:CN,n=r(i,s),cc){o=0;do{if(cc=!1,Mc=0,25<=o)throw Error(we(301));o+=1,mn=sn=null,e.updateQueue=null,wf.current=AN,n=r(i,s)}while(cc)}if(wf.current=od,e=sn!==null&&sn.next!==null,ka=0,mn=sn=Dt=null,sd=!1,e)throw Error(we(300));return n}function Sv(){var n=Mc!==0;return Mc=0,n}function ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Dt.memoizedState=mn=n:mn=mn.next=n,mn}function qr(){if(sn===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=sn.next;var e=mn===null?Dt.memoizedState:mn.next;if(e!==null)mn=e,sn=n;else{if(n===null)throw Error(we(310));sn=n,n={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},mn===null?Dt.memoizedState=mn=n:mn=mn.next=n}return mn}function Lc(n,e){return typeof e=="function"?e(n):e}function vm(n){var e=qr(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=n;var i=sn,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var d=c.lane;if((ka&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,a=i):u=u.next=h,Dt.lanes|=d,Ca|=d}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,yi(i,e.memoizedState)||(tr=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Dt.lanes|=o,Ca|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function _m(n){var e=qr(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);yi(o,e.memoizedState)||(tr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function HE(){}function KE(n,e){var r=Dt,i=qr(),s=e(),o=!yi(i.memoizedState,s);if(o&&(i.memoizedState=s,tr=!0),i=i.queue,kv(QE.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||mn!==null&&mn.memoizedState.tag&1){if(r.flags|=2048,Vc(9,GE.bind(null,r,i,s,e),void 0,null),gn===null)throw Error(we(349));ka&30||WE(r,e,s)}return s}function WE(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function GE(n,e,r,i){e.value=r,e.getSnapshot=i,YE(e)&&XE(n)}function QE(n,e,r){return r(function(){YE(e)&&XE(n)})}function YE(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!yi(n,r)}catch{return!0}}function XE(n){var e=As(n,1);e!==null&&pi(e,n,1,-1)}function tw(n){var e=ji();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:n},e.queue=n,n=n.dispatch=SN.bind(null,Dt,n),[e.memoizedState,n]}function Vc(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Dt.updateQueue,e===null?(e={lastEffect:null,stores:null},Dt.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function JE(){return qr().memoizedState}function xf(n,e,r,i){var s=ji();Dt.flags|=n,s.memoizedState=Vc(1|e,r,void 0,i===void 0?null:i)}function tp(n,e,r,i){var s=qr();i=i===void 0?null:i;var o=void 0;if(sn!==null){var a=sn.memoizedState;if(o=a.destroy,i!==null&&Tv(i,a.deps)){s.memoizedState=Vc(e,r,o,i);return}}Dt.flags|=n,s.memoizedState=Vc(1|e,r,o,i)}function nw(n,e){return xf(8390656,8,n,e)}function kv(n,e){return tp(2048,8,n,e)}function ZE(n,e){return tp(4,2,n,e)}function eT(n,e){return tp(4,4,n,e)}function tT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function nT(n,e,r){return r=r!=null?r.concat([n]):null,tp(4,4,tT.bind(null,e,n),r)}function Cv(){}function rT(n,e){var r=qr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Tv(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function iT(n,e){var r=qr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Tv(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function sT(n,e,r){return ka&21?(yi(r,e)||(r=cE(),Dt.lanes|=r,Ca|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,tr=!0),n.memoizedState=r)}function TN(n,e){var r=gt;gt=r!==0&&4>r?r:4,n(!0);var i=ym.transition;ym.transition={};try{n(!1),e()}finally{gt=r,ym.transition=i}}function oT(){return qr().memoizedState}function IN(n,e,r){var i=vo(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},aT(n))lT(e,r);else if(r=$E(n,e,r,i),r!==null){var s=Kn();pi(r,n,i,s),uT(r,e,i)}}function SN(n,e,r){var i=vo(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(aT(n))lT(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,yi(l,a)){var u=e.interleaved;u===null?(s.next=s,_v(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=$E(n,e,s,i),r!==null&&(s=Kn(),pi(r,n,i,s),uT(r,e,i))}}function aT(n){var e=n.alternate;return n===Dt||e!==null&&e===Dt}function lT(n,e){cc=sd=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function uT(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,sv(n,r)}}var od={readContext:Br,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},kN={readContext:Br,useCallback:function(n,e){return ji().memoizedState=[n,e===void 0?null:e],n},useContext:Br,useEffect:nw,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,xf(4194308,4,tT.bind(null,e,n),r)},useLayoutEffect:function(n,e){return xf(4194308,4,n,e)},useInsertionEffect:function(n,e){return xf(4,2,n,e)},useMemo:function(n,e){var r=ji();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=ji();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=IN.bind(null,Dt,n),[i.memoizedState,n]},useRef:function(n){var e=ji();return n={current:n},e.memoizedState=n},useState:tw,useDebugValue:Cv,useDeferredValue:function(n){return ji().memoizedState=n},useTransition:function(){var n=tw(!1),e=n[0];return n=TN.bind(null,n[1]),ji().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Dt,s=ji();if(Pt){if(r===void 0)throw Error(we(407));r=r()}else{if(r=e(),gn===null)throw Error(we(349));ka&30||WE(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,nw(QE.bind(null,i,o,n),[n]),i.flags|=2048,Vc(9,GE.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=ji(),e=gn.identifierPrefix;if(Pt){var r=_s,i=vs;r=(i&~(1<<32-di(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Mc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=EN++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},CN={readContext:Br,useCallback:rT,useContext:Br,useEffect:kv,useImperativeHandle:nT,useInsertionEffect:ZE,useLayoutEffect:eT,useMemo:iT,useReducer:vm,useRef:JE,useState:function(){return vm(Lc)},useDebugValue:Cv,useDeferredValue:function(n){var e=qr();return sT(e,sn.memoizedState,n)},useTransition:function(){var n=vm(Lc)[0],e=qr().memoizedState;return[n,e]},useMutableSource:HE,useSyncExternalStore:KE,useId:oT,unstable_isNewReconciler:!1},AN={readContext:Br,useCallback:rT,useContext:Br,useEffect:kv,useImperativeHandle:nT,useInsertionEffect:ZE,useLayoutEffect:eT,useMemo:iT,useReducer:_m,useRef:JE,useState:function(){return _m(Lc)},useDebugValue:Cv,useDeferredValue:function(n){var e=qr();return sn===null?e.memoizedState=n:sT(e,sn.memoizedState,n)},useTransition:function(){var n=_m(Lc)[0],e=qr().memoizedState;return[n,e]},useMutableSource:HE,useSyncExternalStore:KE,useId:oT,unstable_isNewReconciler:!1};function oi(n,e){if(n&&n.defaultProps){e=Mt({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Rg(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Mt({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var np={isMounted:function(n){return(n=n._reactInternals)?Va(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Kn(),s=vo(n),o=Ts(i,s);o.payload=e,r!=null&&(o.callback=r),e=go(n,o,s),e!==null&&(pi(e,n,s,i),_f(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Kn(),s=vo(n),o=Ts(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=go(n,o,s),e!==null&&(pi(e,n,s,i),_f(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Kn(),i=vo(n),s=Ts(r,i);s.tag=2,e!=null&&(s.callback=e),e=go(n,s,i),e!==null&&(pi(e,n,i,r),_f(e,n,i))}};function rw(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Nc(r,i)||!Nc(s,o):!0}function cT(n,e,r){var i=!1,s=Io,o=e.contextType;return typeof o=="object"&&o!==null?o=Br(o):(s=ir(e)?Ia:Ln.current,i=e.contextTypes,o=(i=i!=null)?zl(n,s):Io),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=np,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function iw(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&np.enqueueReplaceState(e,e.state,null)}function Og(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},wv(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Br(o):(o=ir(e)?Ia:Ln.current,s.context=zl(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Rg(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&np.enqueueReplaceState(s,s.state,null),rd(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function ql(n,e){try{var r="",i=e;do r+=rA(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function wm(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function jg(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var NN=typeof WeakMap=="function"?WeakMap:Map;function hT(n,e,r){r=Ts(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){ld||(ld=!0,qg=i),jg(n,e)},r}function fT(n,e,r){r=Ts(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){jg(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){jg(n,e),typeof i!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function sw(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new NN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=qN.bind(null,n,e,r),e.then(n,n))}function ow(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function aw(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ts(-1,1),e.tag=2,go(r,e,1))),r.lanes|=1),n)}var PN=Ms.ReactCurrentOwner,tr=!1;function qn(n,e,r,i){e.child=n===null?UE(e,null,r,i):$l(e,n.child,r,i)}function lw(n,e,r,i,s){r=r.render;var o=e.ref;return Cl(e,s),i=Iv(n,e,r,i,o,s),r=Sv(),n!==null&&!tr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ns(n,e,s)):(Pt&&r&&dv(e),e.flags|=1,qn(n,e,i,s),e.child)}function uw(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!Mv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,dT(n,e,o,i,s)):(n=If(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Nc,r(a,i)&&n.ref===e.ref)return Ns(n,e,s)}return e.flags|=1,n=_o(o,i),n.ref=e.ref,n.return=e,e.child=n}function dT(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(Nc(o,i)&&n.ref===e.ref)if(tr=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(tr=!0);else return e.lanes=n.lanes,Ns(n,e,s)}return Dg(n,e,r,i,s)}function pT(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(bl,mr),mr|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Tt(bl,mr),mr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,Tt(bl,mr),mr|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,Tt(bl,mr),mr|=i;return qn(n,e,s,r),e.child}function mT(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Dg(n,e,r,i,s){var o=ir(r)?Ia:Ln.current;return o=zl(e,o),Cl(e,s),r=Iv(n,e,r,i,o,s),i=Sv(),n!==null&&!tr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ns(n,e,s)):(Pt&&i&&dv(e),e.flags|=1,qn(n,e,r,s),e.child)}function cw(n,e,r,i,s){if(ir(r)){var o=!0;Jf(e)}else o=!1;if(Cl(e,s),e.stateNode===null)bf(n,e),cT(e,r,i),Og(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Br(c):(c=ir(r)?Ia:Ln.current,c=zl(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&iw(e,a,i,c),eo=!1;var m=e.memoizedState;a.state=m,rd(e,i,a,s),u=e.memoizedState,l!==i||m!==u||rr.current||eo?(typeof d=="function"&&(Rg(e,r,d,i),u=e.memoizedState),(l=eo||rw(e,r,l,i,m,u,c))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,BE(n,e),l=e.memoizedProps,c=e.type===e.elementType?l:oi(e.type,l),a.props=c,h=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Br(u):(u=ir(r)?Ia:Ln.current,u=zl(e,u));var _=r.getDerivedStateFromProps;(d=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==u)&&iw(e,a,i,u),eo=!1,m=e.memoizedState,a.state=m,rd(e,i,a,s);var w=e.memoizedState;l!==h||m!==w||rr.current||eo?(typeof _=="function"&&(Rg(e,r,_,i),w=e.memoizedState),(c=eo||rw(e,r,c,i,m,w,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,w,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,w,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),a.props=i,a.state=w,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Mg(n,e,r,i,o,s)}function Mg(n,e,r,i,s,o){mT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&Q_(e,r,!1),Ns(n,e,o);i=e.stateNode,PN.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=$l(e,n.child,null,o),e.child=$l(e,null,l,o)):qn(n,e,l,o),e.memoizedState=i.state,s&&Q_(e,r,!0),e.child}function gT(n){var e=n.stateNode;e.pendingContext?G_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&G_(n,e.context,!1),xv(n,e.containerInfo)}function hw(n,e,r,i,s){return Ul(),mv(s),e.flags|=256,qn(n,e,r,i),e.child}var Lg={dehydrated:null,treeContext:null,retryLane:0};function Vg(n){return{baseLanes:n,cachePool:null,transitions:null}}function yT(n,e,r){var i=e.pendingProps,s=jt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Tt(jt,s&1),n===null)return Ng(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=sp(a,i,0,null),n=_a(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Vg(r),e.memoizedState=Lg,n):Av(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return RN(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=_o(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=_o(l,o):(o=_a(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?Vg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=Lg,i}return o=n.child,n=o.sibling,i=_o(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function Av(n,e){return e=sp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qh(n,e,r,i){return i!==null&&mv(i),$l(e,n.child,null,r),n=Av(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RN(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=wm(Error(we(422))),Qh(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=sp({mode:"visible",children:i.children},s,0,null),o=_a(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&$l(e,n.child,null,a),e.child.memoizedState=Vg(a),e.memoizedState=Lg,o);if(!(e.mode&1))return Qh(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(we(419)),i=wm(o,i,void 0),Qh(n,e,a,i)}if(l=(a&n.childLanes)!==0,tr||l){if(i=gn,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,As(n,s),pi(i,n,s,-1))}return Dv(),i=wm(Error(we(421))),Qh(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=HN.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,gr=mo(s.nextSibling),vr=e,Pt=!0,li=null,n!==null&&(jr[Dr++]=vs,jr[Dr++]=_s,jr[Dr++]=Sa,vs=n.id,_s=n.overflow,Sa=e),e=Av(e,i.children),e.flags|=4096,e)}function fw(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Pg(n.return,e,r)}function xm(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function vT(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(qn(n,e,i.children,r),i=jt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&fw(n,r,e);else if(n.tag===19)fw(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Tt(jt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&id(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),xm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&id(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}xm(e,!0,r,null,o);break;case"together":xm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ns(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Ca|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(we(153));if(e.child!==null){for(n=e.child,r=_o(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=_o(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function ON(n,e,r){switch(e.tag){case 3:gT(e),Ul();break;case 5:qE(e);break;case 1:ir(e.type)&&Jf(e);break;case 4:xv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Tt(td,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Tt(jt,jt.current&1),e.flags|=128,null):r&e.child.childLanes?yT(n,e,r):(Tt(jt,jt.current&1),n=Ns(n,e,r),n!==null?n.sibling:null);Tt(jt,jt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return vT(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tt(jt,jt.current),i)break;return null;case 22:case 23:return e.lanes=0,pT(n,e,r)}return Ns(n,e,r)}var _T,Fg,wT,xT;_T=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fg=function(){};wT=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,da(Ui.current);var o=null;switch(r){case"input":s=ag(n,s),i=ag(n,i),o=[];break;case"select":s=Mt({},s,{value:void 0}),i=Mt({},i,{value:void 0}),o=[];break;case"textarea":s=cg(n,s),i=cg(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Yf)}fg(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ec.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&It("scroll",n),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};xT=function(n,e,r,i){r!==i&&(e.flags|=4)};function Mu(n,e){if(!Pt)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Pn(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function jN(n,e,r){var i=e.pendingProps;switch(pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(e),null;case 1:return ir(e.type)&&Xf(),Pn(e),null;case 3:return i=e.stateNode,Bl(),At(rr),At(Ln),Ev(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Wh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,li!==null&&(Wg(li),li=null))),Fg(n,e),Pn(e),null;case 5:bv(e);var s=da(Dc.current);if(r=e.type,n!==null&&e.stateNode!=null)wT(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(we(166));return Pn(e),null}if(n=da(Ui.current),Wh(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Vi]=e,i[Oc]=o,n=(e.mode&1)!==0,r){case"dialog":It("cancel",i),It("close",i);break;case"iframe":case"object":case"embed":It("load",i);break;case"video":case"audio":for(s=0;s<Yu.length;s++)It(Yu[s],i);break;case"source":It("error",i);break;case"img":case"image":case"link":It("error",i),It("load",i);break;case"details":It("toggle",i);break;case"input":x_(i,o),It("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},It("invalid",i);break;case"textarea":E_(i,o),It("invalid",i)}fg(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Kh(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Kh(i.textContent,l,n),s=["children",""+l]):Ec.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&It("scroll",i)}switch(r){case"input":Vh(i),b_(i,o,!0);break;case"textarea":Vh(i),T_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Yf)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Qb(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Vi]=e,n[Oc]=i,_T(n,e,!1,!1),e.stateNode=n;e:{switch(a=dg(r,i),r){case"dialog":It("cancel",n),It("close",n),s=i;break;case"iframe":case"object":case"embed":It("load",n),s=i;break;case"video":case"audio":for(s=0;s<Yu.length;s++)It(Yu[s],n);s=i;break;case"source":It("error",n),s=i;break;case"img":case"image":case"link":It("error",n),It("load",n),s=i;break;case"details":It("toggle",n),s=i;break;case"input":x_(n,i),s=ag(n,i),It("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Mt({},i,{value:void 0}),It("invalid",n);break;case"textarea":E_(n,i),s=cg(n,i),It("invalid",n);break;default:s=i}fg(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Jb(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yb(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Tc(n,u):typeof u=="number"&&Tc(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ec.hasOwnProperty(o)?u!=null&&o==="onScroll"&&It("scroll",n):u!=null&&Zy(n,o,u,a))}switch(r){case"input":Vh(n),b_(n,i,!1);break;case"textarea":Vh(n),T_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+To(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Tl(n,!!i.multiple,o,!1):i.defaultValue!=null&&Tl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Yf)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pn(e),null;case 6:if(n&&e.stateNode!=null)xT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(we(166));if(r=da(Dc.current),da(Ui.current),Wh(e)){if(i=e.stateNode,r=e.memoizedProps,i[Vi]=e,(o=i.nodeValue!==r)&&(n=vr,n!==null))switch(n.tag){case 3:Kh(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Kh(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Vi]=e,e.stateNode=i}return Pn(e),null;case 13:if(At(jt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pt&&gr!==null&&e.mode&1&&!(e.flags&128))FE(),Ul(),e.flags|=98560,o=!1;else if(o=Wh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(we(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[Vi]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pn(e),o=!1}else li!==null&&(Wg(li),li=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||jt.current&1?an===0&&(an=3):Dv())),e.updateQueue!==null&&(e.flags|=4),Pn(e),null);case 4:return Bl(),Fg(n,e),n===null&&Pc(e.stateNode.containerInfo),Pn(e),null;case 10:return vv(e.type._context),Pn(e),null;case 17:return ir(e.type)&&Xf(),Pn(e),null;case 19:if(At(jt),o=e.memoizedState,o===null)return Pn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Mu(o,!1);else{if(an!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=id(n),a!==null){for(e.flags|=128,Mu(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return Tt(jt,jt.current&1|2),e.child}n=n.sibling}o.tail!==null&&Wt()>Hl&&(e.flags|=128,i=!0,Mu(o,!1),e.lanes=4194304)}else{if(!i)if(n=id(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Pt)return Pn(e),null}else 2*Wt()-o.renderingStartTime>Hl&&r!==1073741824&&(e.flags|=128,i=!0,Mu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Wt(),e.sibling=null,r=jt.current,Tt(jt,i?r&1|2:r&1),e):(Pn(e),null);case 22:case 23:return jv(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?mr&1073741824&&(Pn(e),e.subtreeFlags&6&&(e.flags|=8192)):Pn(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function DN(n,e){switch(pv(e),e.tag){case 1:return ir(e.type)&&Xf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Bl(),At(rr),At(Ln),Ev(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return bv(e),null;case 13:if(At(jt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Ul()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return At(jt),null;case 4:return Bl(),null;case 10:return vv(e.type._context),null;case 22:case 23:return jv(),null;case 24:return null;default:return null}}var Yh=!1,Dn=!1,MN=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function xl(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Ut(n,e,i)}else r.current=null}function zg(n,e,r){try{r()}catch(i){Ut(n,e,i)}}var dw=!1;function LN(n,e){if(Eg=Wf,n=SE(),fv(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=n,m=null;t:for(;;){for(var _;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||i!==0&&h.nodeType!==3||(u=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(_=h.firstChild)!==null;)m=h,h=_;for(;;){if(h===n)break t;if(m===r&&++c===s&&(l=a),m===o&&++d===i&&(u=a),(_=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=_}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tg={focusedElem:n,selectionRange:r},Wf=!1,Fe=e;Fe!==null;)if(e=Fe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Fe=n;else for(;Fe!==null;){e=Fe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var I=w.memoizedProps,P=w.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?I:oi(e.type,I),P);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(R){Ut(e,e.return,R)}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}return w=dw,dw=!1,w}function hc(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&zg(e,r,o)}s=s.next}while(s!==i)}}function rp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Ug(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function bT(n){var e=n.alternate;e!==null&&(n.alternate=null,bT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Vi],delete e[Oc],delete e[kg],delete e[_N],delete e[wN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ET(n){return n.tag===5||n.tag===3||n.tag===4}function pw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ET(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $g(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Yf));else if(i!==4&&(n=n.child,n!==null))for($g(n,e,r),n=n.sibling;n!==null;)$g(n,e,r),n=n.sibling}function Bg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Bg(n,e,r),n=n.sibling;n!==null;)Bg(n,e,r),n=n.sibling}var yn=null,ai=!1;function Qs(n,e,r){for(r=r.child;r!==null;)TT(n,e,r),r=r.sibling}function TT(n,e,r){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(Qd,r)}catch{}switch(r.tag){case 5:Dn||xl(r,e);case 6:var i=yn,s=ai;yn=null,Qs(n,e,r),yn=i,ai=s,yn!==null&&(ai?(n=yn,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):yn.removeChild(r.stateNode));break;case 18:yn!==null&&(ai?(n=yn,r=r.stateNode,n.nodeType===8?pm(n.parentNode,r):n.nodeType===1&&pm(n,r),Cc(n)):pm(yn,r.stateNode));break;case 4:i=yn,s=ai,yn=r.stateNode.containerInfo,ai=!0,Qs(n,e,r),yn=i,ai=s;break;case 0:case 11:case 14:case 15:if(!Dn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&zg(r,e,a),s=s.next}while(s!==i)}Qs(n,e,r);break;case 1:if(!Dn&&(xl(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Ut(r,e,l)}Qs(n,e,r);break;case 21:Qs(n,e,r);break;case 22:r.mode&1?(Dn=(i=Dn)||r.memoizedState!==null,Qs(n,e,r),Dn=i):Qs(n,e,r);break;default:Qs(n,e,r)}}function mw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new MN),e.forEach(function(i){var s=KN.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function ni(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:yn=l.stateNode,ai=!1;break e;case 3:yn=l.stateNode.containerInfo,ai=!0;break e;case 4:yn=l.stateNode.containerInfo,ai=!0;break e}l=l.return}if(yn===null)throw Error(we(160));TT(o,a,s),yn=null,ai=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Ut(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IT(e,n),e=e.sibling}function IT(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ni(e,n),Ri(n),i&4){try{hc(3,n,n.return),rp(3,n)}catch(I){Ut(n,n.return,I)}try{hc(5,n,n.return)}catch(I){Ut(n,n.return,I)}}break;case 1:ni(e,n),Ri(n),i&512&&r!==null&&xl(r,r.return);break;case 5:if(ni(e,n),Ri(n),i&512&&r!==null&&xl(r,r.return),n.flags&32){var s=n.stateNode;try{Tc(s,"")}catch(I){Ut(n,n.return,I)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Wb(s,o),dg(l,a);var c=dg(l,o);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];d==="style"?Jb(s,h):d==="dangerouslySetInnerHTML"?Yb(s,h):d==="children"?Tc(s,h):Zy(s,d,h,c)}switch(l){case"input":lg(s,o);break;case"textarea":Gb(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?Tl(s,!!o.multiple,_,!1):m!==!!o.multiple&&(o.defaultValue!=null?Tl(s,!!o.multiple,o.defaultValue,!0):Tl(s,!!o.multiple,o.multiple?[]:"",!1))}s[Oc]=o}catch(I){Ut(n,n.return,I)}}break;case 6:if(ni(e,n),Ri(n),i&4){if(n.stateNode===null)throw Error(we(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(I){Ut(n,n.return,I)}}break;case 3:if(ni(e,n),Ri(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Cc(e.containerInfo)}catch(I){Ut(n,n.return,I)}break;case 4:ni(e,n),Ri(n);break;case 13:ni(e,n),Ri(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Rv=Wt())),i&4&&mw(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(Dn=(c=Dn)||d,ni(e,n),Dn=c):ni(e,n),Ri(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Fe=n,d=n.child;d!==null;){for(h=Fe=d;Fe!==null;){switch(m=Fe,_=m.child,m.tag){case 0:case 11:case 14:case 15:hc(4,m,m.return);break;case 1:xl(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){i=m,r=m.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(I){Ut(i,r,I)}}break;case 5:xl(m,m.return);break;case 22:if(m.memoizedState!==null){yw(h);continue}}_!==null?(_.return=m,Fe=_):yw(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Xb("display",a))}catch(I){Ut(n,n.return,I)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(I){Ut(n,n.return,I)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ni(e,n),Ri(n),i&4&&mw(n);break;case 21:break;default:ni(e,n),Ri(n)}}function Ri(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(ET(r)){var i=r;break e}r=r.return}throw Error(we(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Tc(s,""),i.flags&=-33);var o=pw(n);Bg(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=pw(n);$g(n,l,a);break;default:throw Error(we(161))}}catch(u){Ut(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function VN(n,e,r){Fe=n,ST(n)}function ST(n,e,r){for(var i=(n.mode&1)!==0;Fe!==null;){var s=Fe,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Yh;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Dn;l=Yh;var c=Dn;if(Yh=a,(Dn=u)&&!c)for(Fe=s;Fe!==null;)a=Fe,u=a.child,a.tag===22&&a.memoizedState!==null?vw(s):u!==null?(u.return=a,Fe=u):vw(s);for(;o!==null;)Fe=o,ST(o),o=o.sibling;Fe=s,Yh=l,Dn=c}gw(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Fe=o):gw(n)}}function gw(n){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||rp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:oi(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ew(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ew(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Cc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}Dn||e.flags&512&&Ug(e)}catch(m){Ut(e,e.return,m)}}if(e===n){Fe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Fe=r;break}Fe=e.return}}function yw(n){for(;Fe!==null;){var e=Fe;if(e===n){Fe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Fe=r;break}Fe=e.return}}function vw(n){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{rp(4,e)}catch(u){Ut(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Ut(e,s,u)}}var o=e.return;try{Ug(e)}catch(u){Ut(e,o,u)}break;case 5:var a=e.return;try{Ug(e)}catch(u){Ut(e,a,u)}}}catch(u){Ut(e,e.return,u)}if(e===n){Fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Fe=l;break}Fe=e.return}}var FN=Math.ceil,ad=Ms.ReactCurrentDispatcher,Nv=Ms.ReactCurrentOwner,zr=Ms.ReactCurrentBatchConfig,ht=0,gn=null,Zt=null,wn=0,mr=0,bl=Do(0),an=0,Fc=null,Ca=0,ip=0,Pv=0,fc=null,Zn=null,Rv=0,Hl=1/0,ps=null,ld=!1,qg=null,yo=null,Xh=!1,lo=null,ud=0,dc=0,Hg=null,Ef=-1,Tf=0;function Kn(){return ht&6?Wt():Ef!==-1?Ef:Ef=Wt()}function vo(n){return n.mode&1?ht&2&&wn!==0?wn&-wn:bN.transition!==null?(Tf===0&&(Tf=cE()),Tf):(n=gt,n!==0||(n=window.event,n=n===void 0?16:yE(n.type)),n):1}function pi(n,e,r,i){if(50<dc)throw dc=0,Hg=null,Error(we(185));sh(n,r,i),(!(ht&2)||n!==gn)&&(n===gn&&(!(ht&2)&&(ip|=r),an===4&&ro(n,wn)),sr(n,i),r===1&&ht===0&&!(e.mode&1)&&(Hl=Wt()+500,ep&&Mo()))}function sr(n,e){var r=n.callbackNode;bA(n,e);var i=Kf(n,n===gn?wn:0);if(i===0)r!==null&&k_(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&k_(r),e===1)n.tag===0?xN(_w.bind(null,n)):ME(_w.bind(null,n)),yN(function(){!(ht&6)&&Mo()}),r=null;else{switch(hE(i)){case 1:r=iv;break;case 4:r=lE;break;case 16:r=Hf;break;case 536870912:r=uE;break;default:r=Hf}r=jT(r,kT.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function kT(n,e){if(Ef=-1,Tf=0,ht&6)throw Error(we(327));var r=n.callbackNode;if(Al()&&n.callbackNode!==r)return null;var i=Kf(n,n===gn?wn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=cd(n,i);else{e=i;var s=ht;ht|=2;var o=AT();(gn!==n||wn!==e)&&(ps=null,Hl=Wt()+500,va(n,e));do try{$N();break}catch(l){CT(n,l)}while(!0);yv(),ad.current=o,ht=s,Zt!==null?e=0:(gn=null,wn=0,e=an)}if(e!==0){if(e===2&&(s=vg(n),s!==0&&(i=s,e=Kg(n,s))),e===1)throw r=Fc,va(n,0),ro(n,i),sr(n,Wt()),r;if(e===6)ro(n,i);else{if(s=n.current.alternate,!(i&30)&&!zN(s)&&(e=cd(n,i),e===2&&(o=vg(n),o!==0&&(i=o,e=Kg(n,o))),e===1))throw r=Fc,va(n,0),ro(n,i),sr(n,Wt()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(we(345));case 2:aa(n,Zn,ps);break;case 3:if(ro(n,i),(i&130023424)===i&&(e=Rv+500-Wt(),10<e)){if(Kf(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Kn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Sg(aa.bind(null,n,Zn,ps),e);break}aa(n,Zn,ps);break;case 4:if(ro(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-di(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Wt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FN(i/1960))-i,10<i){n.timeoutHandle=Sg(aa.bind(null,n,Zn,ps),i);break}aa(n,Zn,ps);break;case 5:aa(n,Zn,ps);break;default:throw Error(we(329))}}}return sr(n,Wt()),n.callbackNode===r?kT.bind(null,n):null}function Kg(n,e){var r=fc;return n.current.memoizedState.isDehydrated&&(va(n,e).flags|=256),n=cd(n,e),n!==2&&(e=Zn,Zn=r,e!==null&&Wg(e)),n}function Wg(n){Zn===null?Zn=n:Zn.push.apply(Zn,n)}function zN(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!yi(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ro(n,e){for(e&=~Pv,e&=~ip,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-di(e),i=1<<r;n[r]=-1,e&=~i}}function _w(n){if(ht&6)throw Error(we(327));Al();var e=Kf(n,0);if(!(e&1))return sr(n,Wt()),null;var r=cd(n,e);if(n.tag!==0&&r===2){var i=vg(n);i!==0&&(e=i,r=Kg(n,i))}if(r===1)throw r=Fc,va(n,0),ro(n,e),sr(n,Wt()),r;if(r===6)throw Error(we(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,aa(n,Zn,ps),sr(n,Wt()),null}function Ov(n,e){var r=ht;ht|=1;try{return n(e)}finally{ht=r,ht===0&&(Hl=Wt()+500,ep&&Mo())}}function Aa(n){lo!==null&&lo.tag===0&&!(ht&6)&&Al();var e=ht;ht|=1;var r=zr.transition,i=gt;try{if(zr.transition=null,gt=1,n)return n()}finally{gt=i,zr.transition=r,ht=e,!(ht&6)&&Mo()}}function jv(){mr=bl.current,At(bl)}function va(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,gN(r)),Zt!==null)for(r=Zt.return;r!==null;){var i=r;switch(pv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xf();break;case 3:Bl(),At(rr),At(Ln),Ev();break;case 5:bv(i);break;case 4:Bl();break;case 13:At(jt);break;case 19:At(jt);break;case 10:vv(i.type._context);break;case 22:case 23:jv()}r=r.return}if(gn=n,Zt=n=_o(n.current,null),wn=mr=e,an=0,Fc=null,Pv=ip=Ca=0,Zn=fc=null,fa!==null){for(e=0;e<fa.length;e++)if(r=fa[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}fa=null}return n}function CT(n,e){do{var r=Zt;try{if(yv(),wf.current=od,sd){for(var i=Dt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}sd=!1}if(ka=0,mn=sn=Dt=null,cc=!1,Mc=0,Nv.current=null,r===null||r.return===null){an=1,Fc=e,Zt=null;break}e:{var o=n,a=r.return,l=r,u=e;if(e=wn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=ow(a);if(_!==null){_.flags&=-257,aw(_,a,l,o,e),_.mode&1&&sw(o,c,e),e=_,u=c;var w=e.updateQueue;if(w===null){var I=new Set;I.add(u),e.updateQueue=I}else w.add(u);break e}else{if(!(e&1)){sw(o,c,e),Dv();break e}u=Error(we(426))}}else if(Pt&&l.mode&1){var P=ow(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),aw(P,a,l,o,e),mv(ql(u,l));break e}}o=u=ql(u,l),an!==4&&(an=2),fc===null?fc=[o]:fc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=hT(o,u,e);Z_(o,b);break e;case 1:l=u;var T=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(yo===null||!yo.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=fT(o,l,e);Z_(o,R);break e}}o=o.return}while(o!==null)}PT(r)}catch(M){e=M,Zt===r&&r!==null&&(Zt=r=r.return);continue}break}while(!0)}function AT(){var n=ad.current;return ad.current=od,n===null?od:n}function Dv(){(an===0||an===3||an===2)&&(an=4),gn===null||!(Ca&268435455)&&!(ip&268435455)||ro(gn,wn)}function cd(n,e){var r=ht;ht|=2;var i=AT();(gn!==n||wn!==e)&&(ps=null,va(n,e));do try{UN();break}catch(s){CT(n,s)}while(!0);if(yv(),ht=r,ad.current=i,Zt!==null)throw Error(we(261));return gn=null,wn=0,an}function UN(){for(;Zt!==null;)NT(Zt)}function $N(){for(;Zt!==null&&!dA();)NT(Zt)}function NT(n){var e=OT(n.alternate,n,mr);n.memoizedProps=n.pendingProps,e===null?PT(n):Zt=e,Nv.current=null}function PT(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=DN(r,e),r!==null){r.flags&=32767,Zt=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{an=6,Zt=null;return}}else if(r=jN(r,e,mr),r!==null){Zt=r;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=n}while(e!==null);an===0&&(an=5)}function aa(n,e,r){var i=gt,s=zr.transition;try{zr.transition=null,gt=1,BN(n,e,r,i)}finally{zr.transition=s,gt=i}return null}function BN(n,e,r,i){do Al();while(lo!==null);if(ht&6)throw Error(we(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(we(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(EA(n,o),n===gn&&(Zt=gn=null,wn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xh||(Xh=!0,jT(Hf,function(){return Al(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=zr.transition,zr.transition=null;var a=gt;gt=1;var l=ht;ht|=4,Nv.current=null,LN(n,r),IT(r,n),uN(Tg),Wf=!!Eg,Tg=Eg=null,n.current=r,VN(r),pA(),ht=l,gt=a,zr.transition=o}else n.current=r;if(Xh&&(Xh=!1,lo=n,ud=s),o=n.pendingLanes,o===0&&(yo=null),yA(r.stateNode),sr(n,Wt()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(ld)throw ld=!1,n=qg,qg=null,n;return ud&1&&n.tag!==0&&Al(),o=n.pendingLanes,o&1?n===Hg?dc++:(dc=0,Hg=n):dc=0,Mo(),null}function Al(){if(lo!==null){var n=hE(ud),e=zr.transition,r=gt;try{if(zr.transition=null,gt=16>n?16:n,lo===null)var i=!1;else{if(n=lo,lo=null,ud=0,ht&6)throw Error(we(331));var s=ht;for(ht|=4,Fe=n.current;Fe!==null;){var o=Fe,a=o.child;if(Fe.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Fe=c;Fe!==null;){var d=Fe;switch(d.tag){case 0:case 11:case 15:hc(8,d,o)}var h=d.child;if(h!==null)h.return=d,Fe=h;else for(;Fe!==null;){d=Fe;var m=d.sibling,_=d.return;if(bT(d),d===c){Fe=null;break}if(m!==null){m.return=_,Fe=m;break}Fe=_}}}var w=o.alternate;if(w!==null){var I=w.child;if(I!==null){w.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}Fe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Fe=a;else e:for(;Fe!==null;){if(o=Fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hc(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Fe=b;break e}Fe=o.return}}var T=n.current;for(Fe=T;Fe!==null;){a=Fe;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,Fe=A;else e:for(a=T;Fe!==null;){if(l=Fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rp(9,l)}}catch(M){Ut(l,l.return,M)}if(l===a){Fe=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Fe=R;break e}Fe=l.return}}if(ht=s,Mo(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(Qd,n)}catch{}i=!0}return i}finally{gt=r,zr.transition=e}}return!1}function ww(n,e,r){e=ql(r,e),e=hT(n,e,1),n=go(n,e,1),e=Kn(),n!==null&&(sh(n,1,e),sr(n,e))}function Ut(n,e,r){if(n.tag===3)ww(n,n,r);else for(;e!==null;){if(e.tag===3){ww(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yo===null||!yo.has(i))){n=ql(r,n),n=fT(e,n,1),e=go(e,n,1),n=Kn(),e!==null&&(sh(e,1,n),sr(e,n));break}}e=e.return}}function qN(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Kn(),n.pingedLanes|=n.suspendedLanes&r,gn===n&&(wn&r)===r&&(an===4||an===3&&(wn&130023424)===wn&&500>Wt()-Rv?va(n,0):Pv|=r),sr(n,e)}function RT(n,e){e===0&&(n.mode&1?(e=Uh,Uh<<=1,!(Uh&130023424)&&(Uh=4194304)):e=1);var r=Kn();n=As(n,e),n!==null&&(sh(n,e,r),sr(n,r))}function HN(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),RT(n,r)}function KN(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(e),RT(n,r)}var OT;OT=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||rr.current)tr=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return tr=!1,ON(n,e,r);tr=!!(n.flags&131072)}else tr=!1,Pt&&e.flags&1048576&&LE(e,ed,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bf(n,e),n=e.pendingProps;var s=zl(e,Ln.current);Cl(e,r),s=Iv(null,e,i,n,s,r);var o=Sv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ir(i)?(o=!0,Jf(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wv(e),s.updater=np,e.stateNode=s,s._reactInternals=e,Og(e,i,n,r),e=Mg(null,e,i,!0,o,r)):(e.tag=0,Pt&&o&&dv(e),qn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(bf(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=GN(i),n=oi(i,n),s){case 0:e=Dg(null,e,i,n,r);break e;case 1:e=cw(null,e,i,n,r);break e;case 11:e=lw(null,e,i,n,r);break e;case 14:e=uw(null,e,i,oi(i.type,n),r);break e}throw Error(we(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),Dg(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),cw(n,e,i,s,r);case 3:e:{if(gT(e),n===null)throw Error(we(387));i=e.pendingProps,o=e.memoizedState,s=o.element,BE(n,e),rd(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ql(Error(we(423)),e),e=hw(n,e,i,r,s);break e}else if(i!==s){s=ql(Error(we(424)),e),e=hw(n,e,i,r,s);break e}else for(gr=mo(e.stateNode.containerInfo.firstChild),vr=e,Pt=!0,li=null,r=UE(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ul(),i===s){e=Ns(n,e,r);break e}qn(n,e,i,r)}e=e.child}return e;case 5:return qE(e),n===null&&Ng(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,Ig(i,s)?a=null:o!==null&&Ig(i,o)&&(e.flags|=32),mT(n,e),qn(n,e,a,r),e.child;case 6:return n===null&&Ng(e),null;case 13:return yT(n,e,r);case 4:return xv(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=$l(e,null,i,r):qn(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),lw(n,e,i,s,r);case 7:return qn(n,e,e.pendingProps,r),e.child;case 8:return qn(n,e,e.pendingProps.children,r),e.child;case 12:return qn(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Tt(td,i._currentValue),i._currentValue=a,o!==null)if(yi(o.value,a)){if(o.children===s.children&&!rr.current){e=Ns(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=Ts(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Pg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(we(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Pg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}qn(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Cl(e,r),s=Br(s),i=i(s),e.flags|=1,qn(n,e,i,r),e.child;case 14:return i=e.type,s=oi(i,e.pendingProps),s=oi(i.type,s),uw(n,e,i,s,r);case 15:return dT(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),bf(n,e),e.tag=1,ir(i)?(n=!0,Jf(e)):n=!1,Cl(e,r),cT(e,i,s),Og(e,i,s,r),Mg(null,e,i,!0,n,r);case 19:return vT(n,e,r);case 22:return pT(n,e,r)}throw Error(we(156,e.tag))};function jT(n,e){return aE(n,e)}function WN(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(n,e,r,i){return new WN(n,e,r,i)}function Mv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function GN(n){if(typeof n=="function")return Mv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===tv)return 11;if(n===nv)return 14}return 2}function _o(n,e){var r=n.alternate;return r===null?(r=Fr(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function If(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")Mv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case fl:return _a(r.children,s,o,e);case ev:a=8,s|=8;break;case rg:return n=Fr(12,r,e,s|2),n.elementType=rg,n.lanes=o,n;case ig:return n=Fr(13,r,e,s),n.elementType=ig,n.lanes=o,n;case sg:return n=Fr(19,r,e,s),n.elementType=sg,n.lanes=o,n;case qb:return sp(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $b:a=10;break e;case Bb:a=9;break e;case tv:a=11;break e;case nv:a=14;break e;case Zs:a=16,i=null;break e}throw Error(we(130,n==null?n:typeof n,""))}return e=Fr(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function _a(n,e,r,i){return n=Fr(7,n,i,e),n.lanes=r,n}function sp(n,e,r,i){return n=Fr(22,n,i,e),n.elementType=qb,n.lanes=r,n.stateNode={isHidden:!1},n}function bm(n,e,r){return n=Fr(6,n,null,e),n.lanes=r,n}function Em(n,e,r){return e=Fr(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function QN(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rm(0),this.expirationTimes=rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lv(n,e,r,i,s,o,a,l,u){return n=new QN(n,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Fr(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wv(o),n}function YN(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function DT(n){if(!n)return Io;n=n._reactInternals;e:{if(Va(n)!==n||n.tag!==1)throw Error(we(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(n.tag===1){var r=n.type;if(ir(r))return DE(n,r,e)}return e}function MT(n,e,r,i,s,o,a,l,u){return n=Lv(r,i,!0,n,s,o,a,l,u),n.context=DT(null),r=n.current,i=Kn(),s=vo(r),o=Ts(i,s),o.callback=e??null,go(r,o,s),n.current.lanes=s,sh(n,s,i),sr(n,i),n}function op(n,e,r,i){var s=e.current,o=Kn(),a=vo(s);return r=DT(r),e.context===null?e.context=r:e.pendingContext=r,e=Ts(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=go(s,e,a),n!==null&&(pi(n,s,a,o),_f(n,s,a)),a}function hd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Vv(n,e){xw(n,e),(n=n.alternate)&&xw(n,e)}function XN(){return null}var LT=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fv(n){this._internalRoot=n}ap.prototype.render=Fv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(we(409));op(n,e,null,null)};ap.prototype.unmount=Fv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Aa(function(){op(null,n,null,null)}),e[Cs]=null}};function ap(n){this._internalRoot=n}ap.prototype.unstable_scheduleHydration=function(n){if(n){var e=pE();n={blockedOn:null,target:n,priority:e};for(var r=0;r<no.length&&e!==0&&e<no[r].priority;r++);no.splice(r,0,n),r===0&&gE(n)}};function zv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bw(){}function JN(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=hd(a);o.call(c)}}var a=MT(e,i,n,0,null,!1,!1,"",bw);return n._reactRootContainer=a,n[Cs]=a.current,Pc(n.nodeType===8?n.parentNode:n),Aa(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=hd(u);l.call(c)}}var u=Lv(n,0,!1,null,null,!1,!1,"",bw);return n._reactRootContainer=u,n[Cs]=u.current,Pc(n.nodeType===8?n.parentNode:n),Aa(function(){op(e,u,r,i)}),u}function up(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=hd(a);l.call(u)}}op(e,a,n,s)}else a=JN(r,e,n,s,i);return hd(a)}fE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=Qu(e.pendingLanes);r!==0&&(sv(e,r|1),sr(e,Wt()),!(ht&6)&&(Hl=Wt()+500,Mo()))}break;case 13:Aa(function(){var i=As(n,1);if(i!==null){var s=Kn();pi(i,n,1,s)}}),Vv(n,1)}};ov=function(n){if(n.tag===13){var e=As(n,134217728);if(e!==null){var r=Kn();pi(e,n,134217728,r)}Vv(n,134217728)}};dE=function(n){if(n.tag===13){var e=vo(n),r=As(n,e);if(r!==null){var i=Kn();pi(r,n,e,i)}Vv(n,e)}};pE=function(){return gt};mE=function(n,e){var r=gt;try{return gt=n,e()}finally{gt=r}};mg=function(n,e,r){switch(e){case"input":if(lg(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=Zd(i);if(!s)throw Error(we(90));Kb(i),lg(i,s)}}}break;case"textarea":Gb(n,r);break;case"select":e=r.value,e!=null&&Tl(n,!!r.multiple,e,!1)}};tE=Ov;nE=Aa;var ZN={usingClientEntryPoint:!1,Events:[ah,gl,Zd,Zb,eE,Ov]},Lu={findFiberByHostInstance:ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eP={bundleType:Lu.bundleType,version:Lu.version,rendererPackageName:Lu.rendererPackageName,rendererConfig:Lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=sE(n),n===null?null:n.stateNode},findFiberByHostInstance:Lu.findFiberByHostInstance||XN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{Qd=Jh.inject(eP),zi=Jh}catch{}}br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZN;br.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(e))throw Error(we(200));return YN(n,e,null,r)};br.createRoot=function(n,e){if(!zv(n))throw Error(we(299));var r=!1,i="",s=LT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lv(n,1,!1,null,null,r,!1,i,s),n[Cs]=e.current,Pc(n.nodeType===8?n.parentNode:n),new Fv(e)};br.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(we(188)):(n=Object.keys(n).join(","),Error(we(268,n)));return n=sE(e),n=n===null?null:n.stateNode,n};br.flushSync=function(n){return Aa(n)};br.hydrate=function(n,e,r){if(!lp(e))throw Error(we(200));return up(null,n,e,!0,r)};br.hydrateRoot=function(n,e,r){if(!zv(n))throw Error(we(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=LT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=MT(e,null,n,1,r??null,s,!1,o,a),n[Cs]=e.current,Pc(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new ap(e)};br.render=function(n,e,r){if(!lp(e))throw Error(we(200));return up(null,n,e,!1,r)};br.unmountComponentAtNode=function(n){if(!lp(n))throw Error(we(40));return n._reactRootContainer?(Aa(function(){up(null,null,n,!1,function(){n._reactRootContainer=null,n[Cs]=null})}),!0):!1};br.unstable_batchedUpdates=Ov;br.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!lp(r))throw Error(we(200));if(n==null||n._reactInternals===void 0)throw Error(we(38));return up(n,e,r,!1,i)};br.version="18.3.1-next-f1338f8080-20240426";function VT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VT)}catch(n){console.error(n)}}VT(),Vb.exports=br;var tP=Vb.exports,Ew=tP;tg.createRoot=Ew.createRoot,tg.hydrateRoot=Ew.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zc(){return zc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},zc.apply(this,arguments)}var uo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(uo||(uo={}));const Tw="popstate";function nP(n){n===void 0&&(n={});function e(i,s){let{pathname:o,search:a,hash:l}=i.location;return Gg("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:FT(s)}return iP(e,r,null,n)}function un(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Uv(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rP(){return Math.random().toString(36).substr(2,8)}function Iw(n,e){return{usr:n.state,key:n.key,idx:e}}function Gg(n,e,r,i){return r===void 0&&(r=null),zc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ou(e):e,{state:r,key:e&&e.key||i||rP()})}function FT(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ou(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function iP(n,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=uo.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(zc({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=uo.Pop;let P=d(),b=P==null?null:P-c;c=P,u&&u({action:l,location:I.location,delta:b})}function m(P,b){l=uo.Push;let T=Gg(I.location,P,b);c=d()+1;let A=Iw(T,c),R=I.createHref(T);try{a.pushState(A,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(R)}o&&u&&u({action:l,location:I.location,delta:1})}function _(P,b){l=uo.Replace;let T=Gg(I.location,P,b);c=d();let A=Iw(T,c),R=I.createHref(T);a.replaceState(A,"",R),o&&u&&u({action:l,location:I.location,delta:0})}function w(P){let b=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof P=="string"?P:FT(P);return T=T.replace(/ $/,"%20"),un(b,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,b)}let I={get action(){return l},get location(){return n(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Tw,h),u=P,()=>{s.removeEventListener(Tw,h),u=null}},createHref(P){return e(s,P)},createURL:w,encodeLocation(P){let b=w(P);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:_,go(P){return a.go(P)}};return I}var Sw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Sw||(Sw={}));function sP(n,e,r){return r===void 0&&(r="/"),oP(n,e,r)}function oP(n,e,r,i){let s=typeof e=="string"?ou(e):e,o=$T(s.pathname||"/",r);if(o==null)return null;let a=zT(n);aP(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=_P(o);l=gP(a[u],c)}return l}function zT(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(un(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=wa([i,u.relativePath]),d=r.concat(u);o.children&&o.children.length>0&&(un(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),zT(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:pP(c,o.index),routesMeta:d})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of UT(o.path))s(o,a,u)}),e}function UT(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=UT(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function aP(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:mP(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const lP=/^:[\w-]+$/,uP=3,cP=2,hP=1,fP=10,dP=-2,kw=n=>n==="*";function pP(n,e){let r=n.split("/"),i=r.length;return r.some(kw)&&(i+=dP),e&&(i+=cP),r.filter(s=>!kw(s)).reduce((s,o)=>s+(lP.test(o)?uP:o===""?hP:fP),i)}function mP(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function gP(n,e,r){let{routesMeta:i}=n,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,d=o==="/"?e:e.slice(o.length)||"/",h=yP({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:wa([o,h.pathname]),pathnameBase:SP(wa([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=wa([o,h.pathnameBase]))}return a}function yP(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=vP(n.path,n.caseSensitive,n.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,d,h)=>{let{paramName:m,isOptional:_}=d;if(m==="*"){let I=l[h]||"";a=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const w=l[h];return _&&!w?c[m]=void 0:c[m]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:n}}function vP(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Uv(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function _P(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uv(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function $T(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}const wP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xP=n=>wP.test(n);function bP(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof n=="string"?ou(n):n,o;if(r)if(xP(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Uv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Cw(r.substring(1),"/"):o=Cw(r,e)}else o=e;return{pathname:o,search:kP(i),hash:CP(s)}}function Cw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Tm(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EP(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function TP(n,e){let r=EP(n);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function IP(n,e,r,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=ou(n):(s=zc({},n),un(!s.pathname||!s.pathname.includes("?"),Tm("?","pathname","search",s)),un(!s.pathname||!s.pathname.includes("#"),Tm("#","pathname","hash",s)),un(!s.search||!s.search.includes("#"),Tm("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?e[h]:"/"}let u=bP(s,l),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const wa=n=>n.join("/").replace(/\/\/+/g,"/"),SP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function AP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const BT=["post","put","patch","delete"];new Set(BT);const NP=["get",...BT];new Set(NP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Uc.apply(this,arguments)}const $v=de.createContext(null),PP=de.createContext(null),cp=de.createContext(null),hp=de.createContext(null),Fa=de.createContext({outlet:null,matches:[],isDataRoute:!1}),qT=de.createContext(null);function fp(){return de.useContext(hp)!=null}function Bv(){return fp()||un(!1),de.useContext(hp).location}function HT(n){de.useContext(cp).static||de.useLayoutEffect(n)}function Lo(){let{isDataRoute:n}=de.useContext(Fa);return n?qP():RP()}function RP(){fp()||un(!1);let n=de.useContext($v),{basename:e,future:r,navigator:i}=de.useContext(cp),{matches:s}=de.useContext(Fa),{pathname:o}=Bv(),a=JSON.stringify(TP(s,r.v7_relativeSplatPath)),l=de.useRef(!1);return HT(()=>{l.current=!0}),de.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let h=IP(c,JSON.parse(a),o,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wa([e,h.pathname])),(d.replace?i.replace:i.push)(h,d.state,d)},[e,i,a,o,n])}function KT(){let{matches:n}=de.useContext(Fa),e=n[n.length-1];return e?e.params:{}}function OP(n,e){return jP(n,e)}function jP(n,e,r,i){fp()||un(!1);let{navigator:s}=de.useContext(cp),{matches:o}=de.useContext(Fa),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Bv(),d;if(e){var h;let P=typeof e=="string"?ou(e):e;u==="/"||(h=P.pathname)!=null&&h.startsWith(u)||un(!1),d=P}else d=c;let m=d.pathname||"/",_=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let w=sP(n,{pathname:_}),I=FP(w&&w.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:wa([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:wa([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,r,i);return e&&I?de.createElement(hp.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:uo.Pop}},I):I}function DP(){let n=BP(),e=AP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),r?de.createElement("pre",{style:s},r):null,null)}const MP=de.createElement(DP,null);class LP extends de.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?de.createElement(Fa.Provider,{value:this.props.routeContext},de.createElement(qT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VP(n){let{routeContext:e,match:r,children:i}=n,s=de.useContext($v);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),de.createElement(Fa.Provider,{value:e},i)}function FP(n,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let a=n,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||un(!1),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:m,errors:_}=r,w=h.route.loader&&m[h.route.id]===void 0&&(!_||_[h.route.id]===void 0);if(h.route.lazy||w){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,m)=>{let _,w=!1,I=null,P=null;r&&(_=l&&h.route.id?l[h.route.id]:void 0,I=h.route.errorElement||MP,u&&(c<0&&m===0?(HP("route-fallback"),w=!0,P=null):c===m&&(w=!0,P=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),T=()=>{let A;return _?A=I:w?A=P:h.route.Component?A=de.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,de.createElement(VP,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:A})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?de.createElement(LP,{location:r.location,revalidation:r.revalidation,component:I,error:_,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}var WT=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(WT||{}),GT=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(GT||{});function zP(n){let e=de.useContext($v);return e||un(!1),e}function UP(n){let e=de.useContext(PP);return e||un(!1),e}function $P(n){let e=de.useContext(Fa);return e||un(!1),e}function QT(n){let e=$P(),r=e.matches[e.matches.length-1];return r.route.id||un(!1),r.route.id}function BP(){var n;let e=de.useContext(qT),r=UP(),i=QT();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function qP(){let{router:n}=zP(WT.UseNavigateStable),e=QT(GT.UseNavigateStable),r=de.useRef(!1);return HT(()=>{r.current=!0}),de.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Uc({fromRouteId:e},o)))},[n,e])}const Aw={};function HP(n,e,r){Aw[n]||(Aw[n]=!0)}function KP(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Oi(n){un(!1)}function WP(n){let{basename:e="/",children:r=null,location:i,navigationType:s=uo.Pop,navigator:o,static:a=!1,future:l}=n;fp()&&un(!1);let u=e.replace(/^\/*/,"/"),c=de.useMemo(()=>({basename:u,navigator:o,static:a,future:Uc({v7_relativeSplatPath:!1},l)}),[u,l,o,a]);typeof i=="string"&&(i=ou(i));let{pathname:d="/",search:h="",hash:m="",state:_=null,key:w="default"}=i,I=de.useMemo(()=>{let P=$T(d,u);return P==null?null:{location:{pathname:P,search:h,hash:m,state:_,key:w},navigationType:s}},[u,d,h,m,_,w,s]);return I==null?null:de.createElement(cp.Provider,{value:c},de.createElement(hp.Provider,{children:r,value:I}))}function Nw(n){let{children:e,location:r}=n;return OP(Qg(e),r)}new Promise(()=>{});function Qg(n,e){e===void 0&&(e=[]);let r=[];return de.Children.forEach(n,(i,s)=>{if(!de.isValidElement(i))return;let o=[...e,s];if(i.type===de.Fragment){r.push.apply(r,Qg(i.props.children,o));return}i.type!==Oi&&un(!1),!i.props.index||!i.props.children||un(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Qg(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const GP="6";try{window.__reactRouterVersion=GP}catch{}const QP="startTransition",Pw=qC[QP];function YP(n){let{basename:e,children:r,future:i,window:s}=n,o=de.useRef();o.current==null&&(o.current=nP({window:s,v5Compat:!0}));let a=o.current,[l,u]=de.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},d=de.useCallback(h=>{c&&Pw?Pw(()=>u(h)):u(h)},[u,c]);return de.useLayoutEffect(()=>a.listen(d),[a,d]),de.useEffect(()=>KP(i),[i]),de.createElement(WP,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:i})}var Rw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Rw||(Rw={}));var Ow;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ow||(Ow={}));var XP={exports:{}};(function(n){var e=function(r){var i=Object.prototype,s=i.hasOwnProperty,o=Object.defineProperty||function(H,$,ne){H[$]=ne.value},a,l=typeof Symbol=="function"?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(H,$,ne){return Object.defineProperty(H,$,{value:ne,enumerable:!0,configurable:!0,writable:!0}),H[$]}try{h({},"")}catch{h=function($,ne,fe){return $[ne]=fe}}function m(H,$,ne,fe){var ue=$&&$.prototype instanceof A?$:A,ge=Object.create(ue.prototype),Oe=new Z(fe||[]);return o(ge,"_invoke",{value:B(H,ne,Oe)}),ge}r.wrap=m;function _(H,$,ne){try{return{type:"normal",arg:H.call($,ne)}}catch(fe){return{type:"throw",arg:fe}}}var w="suspendedStart",I="suspendedYield",P="executing",b="completed",T={};function A(){}function R(){}function M(){}var U={};h(U,u,function(){return this});var N=Object.getPrototypeOf,C=N&&N(N(pe([])));C&&C!==i&&s.call(C,u)&&(U=C);var D=M.prototype=A.prototype=Object.create(U);R.prototype=M,o(D,"constructor",{value:M,configurable:!0}),o(M,"constructor",{value:R,configurable:!0}),R.displayName=h(M,d,"GeneratorFunction");function L(H){["next","throw","return"].forEach(function($){h(H,$,function(ne){return this._invoke($,ne)})})}r.isGeneratorFunction=function(H){var $=typeof H=="function"&&H.constructor;return $?$===R||($.displayName||$.name)==="GeneratorFunction":!1},r.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,M):(H.__proto__=M,h(H,d,"GeneratorFunction")),H.prototype=Object.create(D),H},r.awrap=function(H){return{__await:H}};function V(H,$){function ne(ge,Oe,Le,De){var He=_(H[ge],H,Oe);if(He.type==="throw")De(He.arg);else{var Re=He.arg,hn=Re.value;return hn&&typeof hn=="object"&&s.call(hn,"__await")?$.resolve(hn.__await).then(function(fn){ne("next",fn,Le,De)},function(fn){ne("throw",fn,Le,De)}):$.resolve(hn).then(function(fn){Re.value=fn,Le(Re)},function(fn){return ne("throw",fn,Le,De)})}}var fe;function ue(ge,Oe){function Le(){return new $(function(De,He){ne(ge,Oe,De,He)})}return fe=fe?fe.then(Le,Le):Le()}o(this,"_invoke",{value:ue})}L(V.prototype),h(V.prototype,c,function(){return this}),r.AsyncIterator=V,r.async=function(H,$,ne,fe,ue){ue===void 0&&(ue=Promise);var ge=new V(m(H,$,ne,fe),ue);return r.isGeneratorFunction($)?ge:ge.next().then(function(Oe){return Oe.done?Oe.value:ge.next()})};function B(H,$,ne){var fe=w;return function(ge,Oe){if(fe===P)throw new Error("Generator is already running");if(fe===b){if(ge==="throw")throw Oe;return re()}for(ne.method=ge,ne.arg=Oe;;){var Le=ne.delegate;if(Le){var De=j(Le,ne);if(De){if(De===T)continue;return De}}if(ne.method==="next")ne.sent=ne._sent=ne.arg;else if(ne.method==="throw"){if(fe===w)throw fe=b,ne.arg;ne.dispatchException(ne.arg)}else ne.method==="return"&&ne.abrupt("return",ne.arg);fe=P;var He=_(H,$,ne);if(He.type==="normal"){if(fe=ne.done?b:I,He.arg===T)continue;return{value:He.arg,done:ne.done}}else He.type==="throw"&&(fe=b,ne.method="throw",ne.arg=He.arg)}}}function j(H,$){var ne=$.method,fe=H.iterator[ne];if(fe===a)return $.delegate=null,ne==="throw"&&H.iterator.return&&($.method="return",$.arg=a,j(H,$),$.method==="throw")||ne!=="return"&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+ne+"' method")),T;var ue=_(fe,H.iterator,$.arg);if(ue.type==="throw")return $.method="throw",$.arg=ue.arg,$.delegate=null,T;var ge=ue.arg;if(!ge)return $.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,T;if(ge.done)$[H.resultName]=ge.value,$.next=H.nextLoc,$.method!=="return"&&($.method="next",$.arg=a);else return ge;return $.delegate=null,T}L(D),h(D,d,"Generator"),h(D,u,function(){return this}),h(D,"toString",function(){return"[object Generator]"});function K(H){var $={tryLoc:H[0]};1 in H&&($.catchLoc=H[1]),2 in H&&($.finallyLoc=H[2],$.afterLoc=H[3]),this.tryEntries.push($)}function G(H){var $=H.completion||{};$.type="normal",delete $.arg,H.completion=$}function Z(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(K,this),this.reset(!0)}r.keys=function(H){var $=Object(H),ne=[];for(var fe in $)ne.push(fe);return ne.reverse(),function ue(){for(;ne.length;){var ge=ne.pop();if(ge in $)return ue.value=ge,ue.done=!1,ue}return ue.done=!0,ue}};function pe(H){if(H){var $=H[u];if($)return $.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var ne=-1,fe=function ue(){for(;++ne<H.length;)if(s.call(H,ne))return ue.value=H[ne],ue.done=!1,ue;return ue.value=a,ue.done=!0,ue};return fe.next=fe}}return{next:re}}r.values=pe;function re(){return{value:a,done:!0}}return Z.prototype={constructor:Z,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(G),!H)for(var $ in this)$.charAt(0)==="t"&&s.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=a)},stop:function(){this.done=!0;var H=this.tryEntries[0],$=H.completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var $=this;function ne(De,He){return ge.type="throw",ge.arg=H,$.next=De,He&&($.method="next",$.arg=a),!!He}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var ue=this.tryEntries[fe],ge=ue.completion;if(ue.tryLoc==="root")return ne("end");if(ue.tryLoc<=this.prev){var Oe=s.call(ue,"catchLoc"),Le=s.call(ue,"finallyLoc");if(Oe&&Le){if(this.prev<ue.catchLoc)return ne(ue.catchLoc,!0);if(this.prev<ue.finallyLoc)return ne(ue.finallyLoc)}else if(Oe){if(this.prev<ue.catchLoc)return ne(ue.catchLoc,!0)}else if(Le){if(this.prev<ue.finallyLoc)return ne(ue.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,$){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var fe=this.tryEntries[ne];if(fe.tryLoc<=this.prev&&s.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var ue=fe;break}}ue&&(H==="break"||H==="continue")&&ue.tryLoc<=$&&$<=ue.finallyLoc&&(ue=null);var ge=ue?ue.completion:{};return ge.type=H,ge.arg=$,ue?(this.method="next",this.next=ue.finallyLoc,T):this.complete(ge)},complete:function(H,$){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&$&&(this.next=$),T},finish:function(H){for(var $=this.tryEntries.length-1;$>=0;--$){var ne=this.tryEntries[$];if(ne.finallyLoc===H)return this.complete(ne.completion,ne.afterLoc),G(ne),T}},catch:function(H){for(var $=this.tryEntries.length-1;$>=0;--$){var ne=this.tryEntries[$];if(ne.tryLoc===H){var fe=ne.completion;if(fe.type==="throw"){var ue=fe.arg;G(ne)}return ue}}throw new Error("illegal catch attempt")},delegateYield:function(H,$,ne){return this.delegate={iterator:pe(H),resultName:$,nextLoc:ne},this.method==="next"&&(this.arg=a),T}},r}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(XP);var qv=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const JP=qv;let jw=0;var YT=({id:n,action:e,payload:r={}})=>{let i=n;return typeof i>"u"&&(i=JP("Job",jw),jw+=1),{id:i,action:e,payload:r}},au={};let Hv=!1;au.logging=Hv;au.setLogging=n=>{Hv=n};au.log=(...n)=>Hv?console.log.apply(void 0,n):null;const ZP=YT,{log:Zh}=au,eR=qv;let Dw=0;var tR=()=>{const n=eR("Scheduler",Dw),e={},r={};let i=[];Dw+=1;const s=()=>i.length,o=()=>Object.keys(e).length,a=()=>{if(i.length!==0){const h=Object.keys(e);for(let m=0;m<h.length;m+=1)if(typeof r[h[m]]>"u"){i[0](e[h[m]]);break}}},l=(h,m)=>new Promise((_,w)=>{const I=ZP({action:h,payload:m});i.push(async P=>{i.shift(),r[P.id]=I;try{_(await P[h].apply(void 0,[...m,I.id]))}catch(b){w(b)}finally{delete r[P.id],a()}}),Zh(`[${n}]: Add ${I.id} to JobQueue`),Zh(`[${n}]: JobQueue length=${i.length}`),a()});return{addWorker:h=>(e[h.id]=h,Zh(`[${n}]: Add ${h.id}`),Zh(`[${n}]: Number of workers=${o()}`),a(),h.id),addJob:async(h,...m)=>{if(o()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return l(h,m)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),i=[]},getQueueLen:s,getNumWorkers:o}};function nR(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function rR(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var iR=rR;const sR=iR;var oR=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":sR()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof nR=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const aR=oR("type")==="browser",lR=aR?n=>new URL(n,window.location.href).href:n=>n;var uR=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(r=>{n[r]&&(e[r]=lR(e[r]))}),e},cR=n=>{const e=[],r=[],i=[],s=[],o=[];return n.blocks&&n.blocks.forEach(a=>{a.paragraphs.forEach(l=>{l.lines.forEach(u=>{u.words.forEach(c=>{c.symbols.forEach(d=>{o.push({...d,page:n,block:a,paragraph:l,line:u,word:c})}),s.push({...c,page:n,block:a,paragraph:l,line:u})}),i.push({...u,page:n,block:a,paragraph:l})}),r.push({...l,page:n,block:a})}),e.push({...a,page:n})}),{...n,blocks:e,paragraphs:r,lines:i,words:s,symbols:o}},XT={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const hR="5.1.1",fR={version:hR};var dR={workerBlobURL:!0,logger:()=>{}};const pR=fR.version,mR=dR;var gR={...mR,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${pR}/dist/worker.min.js`},yR=({workerPath:n,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(i))}else r=new Worker(n);return r},vR=n=>{n.terminate()},_R=(n,e)=>{n.onmessage=({data:r})=>{e(r)}},wR=async(n,e)=>{n.postMessage(e)};const Im=n=>new Promise((e,r)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=({target:{error:{code:s}}})=>{r(Error(`File could not be read! Code=${s}`))},i.readAsArrayBuffer(n)}),Yg=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(r=>r.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await Yg(n.src)),n.tagName==="VIDEO"&&(e=await Yg(n.poster)),n.tagName==="CANVAS"&&await new Promise(r=>{n.toBlob(async i=>{e=await Im(i),r()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const r=await n.convertToBlob();e=await Im(r)}else(n instanceof File||n instanceof Blob)&&(e=await Im(n));return new Uint8Array(e)};var xR=Yg;const bR=gR,ER=yR,TR=vR,IR=_R,SR=wR,kR=xR;var CR={defaultOptions:bR,spawnWorker:ER,terminateWorker:TR,onMessage:IR,send:SR,loadImage:kR};const AR=uR,NR=cR,ri=YT,{log:Mw}=au,PR=qv,ia=XT,{defaultOptions:RR,spawnWorker:OR,terminateWorker:jR,onMessage:DR,loadImage:Lw,send:MR}=CR;let Vw=0;var JT=async(n="eng",e=ia.LSTM_ONLY,r={},i={})=>{const s=PR("Worker",Vw),{logger:o,errorHandler:a,...l}=AR({...RR,...r}),u={},c={},d=typeof n=="string"?n.split("+"):n;let h=e,m=i;const _=[ia.DEFAULT,ia.LSTM_ONLY].includes(e)&&!l.legacyCore;let w,I;const P=new Promise((ue,ge)=>{I=ue,w=ge}),b=ue=>{w(ue.message)};let T=OR(l);T.onerror=b,Vw+=1;const A=(ue,ge)=>{u[ue]=ge},R=(ue,ge)=>{c[ue]=ge},M=({id:ue,action:ge,payload:Oe})=>new Promise((Le,De)=>{Mw(`[${s}]: Start ${ue}, action=${ge}`);const He=`${ge}-${ue}`;A(He,Le),R(He,De),MR(T,{workerId:s,jobId:ue,action:ge,payload:Oe})}),U=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),N=ue=>M(ri({id:ue,action:"load",payload:{options:{lstmOnly:_,corePath:l.corePath,logging:l.logging}}})),C=(ue,ge,Oe)=>M(ri({id:Oe,action:"FS",payload:{method:"writeFile",args:[ue,ge]}})),D=(ue,ge)=>M(ri({id:ge,action:"FS",payload:{method:"readFile",args:[ue,{encoding:"utf8"}]}})),L=(ue,ge)=>M(ri({id:ge,action:"FS",payload:{method:"unlink",args:[ue]}})),V=(ue,ge,Oe)=>M(ri({id:Oe,action:"FS",payload:{method:ue,args:ge}})),B=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),j=(ue,ge)=>M(ri({id:ge,action:"loadLanguage",payload:{langs:ue,options:{langPath:l.langPath,dataPath:l.dataPath,cachePath:l.cachePath,cacheMethod:l.cacheMethod,gzip:l.gzip,lstmOnly:[ia.DEFAULT,ia.LSTM_ONLY].includes(h)&&!l.legacyLang}}})),K=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),G=(ue,ge,Oe,Le)=>M(ri({id:Le,action:"initialize",payload:{langs:ue,oem:ge,config:Oe}})),Z=(ue="eng",ge,Oe,Le)=>{if(_&&[ia.TESSERACT_ONLY,ia.TESSERACT_LSTM_COMBINED].includes(ge))throw Error("Legacy model requested but code missing.");const De=ge||h;h=De;const He=Oe||m;m=He;const hn=(typeof ue=="string"?ue.split("+"):ue).filter(fn=>!d.includes(fn));return d.push(...hn),hn.length>0?j(hn,Le).then(()=>G(ue,De,He,Le)):G(ue,De,He,Le)},pe=(ue={},ge)=>M(ri({id:ge,action:"setParameters",payload:{params:ue}})),re=async(ue,ge={},Oe={blocks:!0,text:!0,hocr:!0,tsv:!0},Le)=>M(ri({id:Le,action:"recognize",payload:{image:await Lw(ue),options:ge,output:Oe}})),H=(ue="Tesseract OCR Result",ge=!1,Oe)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),M(ri({id:Oe,action:"getPDF",payload:{title:ue,textonly:ge}}))),$=async(ue,ge)=>{if(_)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return M(ri({id:ge,action:"detect",payload:{image:await Lw(ue)}}))},ne=async()=>(T!==null&&(jR(T),T=null),Promise.resolve());DR(T,({workerId:ue,jobId:ge,status:Oe,action:Le,data:De})=>{const He=`${Le}-${ge}`;if(Oe==="resolve"){Mw(`[${ue}]: Complete ${ge}`);let Re=De;Le==="recognize"?Re=NR(De):Le==="getPDF"&&(Re=Array.from({...De,length:Object.keys(De).length})),u[He]({jobId:ge,data:Re})}else if(Oe==="reject")if(c[He](De),Le==="load"&&w(De),a)a(De);else throw Error(De);else Oe==="progress"&&o({...De,userJobId:ge})});const fe={id:s,worker:T,setResolve:A,setReject:R,load:U,writeText:C,readText:D,removeFile:L,FS:V,loadLanguage:B,initialize:K,reinitialize:Z,setParameters:pe,recognize:re,getPDF:H,detect:$,terminate:ne};return N().then(()=>j(n)).then(()=>G(n,e,i)).then(()=>I(fe)).catch(()=>{}),P};const ZT=JT,LR=async(n,e,r)=>{const i=await ZT(e,1,r);return i.recognize(n).finally(async()=>{await i.terminate()})},VR=async(n,e)=>{const r=await ZT("osd",0,e);return r.detect(n).finally(async()=>{await r.terminate()})};var FR={recognize:LR,detect:VR},zR={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},UR={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const $R=tR,BR=JT,qR=FR,HR=zR,KR=XT,WR=UR,{setLogging:GR}=au;var QR={languages:HR,OEM:KR,PSM:WR,createScheduler:$R,createWorker:BR,setLogging:GR,...qR};const YR=Wd(QR);var XR=Object.defineProperty,fd=Object.getOwnPropertySymbols,e2=Object.prototype.hasOwnProperty,t2=Object.prototype.propertyIsEnumerable,Fw=(n,e,r)=>e in n?XR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Xg=(n,e)=>{for(var r in e||(e={}))e2.call(e,r)&&Fw(n,r,e[r]);if(fd)for(var r of fd(e))t2.call(e,r)&&Fw(n,r,e[r]);return n},Jg=(n,e)=>{var r={};for(var i in n)e2.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&fd)for(var i of fd(n))e.indexOf(i)<0&&t2.call(n,i)&&(r[i]=n[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Na;(n=>{const e=class nt{constructor(u,c,d,h){if(this.version=u,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],u<nt.MIN_VERSION||u>nt.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let m=[];for(let w=0;w<this.size;w++)m.push(!1);for(let w=0;w<this.size;w++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const _=this.addEccAndInterleave(d);if(this.drawCodewords(_),h==-1){let w=1e9;for(let I=0;I<8;I++){this.applyMask(I),this.drawFormatBits(I);const P=this.getPenaltyScore();P<w&&(h=I,w=P),this.applyMask(I)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(u,c){const d=n.QrSegment.makeSegments(u);return nt.encodeSegments(d,c)}static encodeBinary(u,c){const d=n.QrSegment.makeBytes(u);return nt.encodeSegments([d],c)}static encodeSegments(u,c,d=1,h=40,m=-1,_=!0){if(!(nt.MIN_VERSION<=d&&d<=h&&h<=nt.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let w,I;for(w=d;;w++){const A=nt.getNumDataCodewords(w,c)*8,R=a.getTotalBits(u,w);if(R<=A){I=R;break}if(w>=h)throw new RangeError("Data too long")}for(const A of[nt.Ecc.MEDIUM,nt.Ecc.QUARTILE,nt.Ecc.HIGH])_&&I<=nt.getNumDataCodewords(w,A)*8&&(c=A);let P=[];for(const A of u){r(A.mode.modeBits,4,P),r(A.numChars,A.mode.numCharCountBits(w),P);for(const R of A.getData())P.push(R)}s(P.length==I);const b=nt.getNumDataCodewords(w,c)*8;s(P.length<=b),r(0,Math.min(4,b-P.length),P),r(0,(8-P.length%8)%8,P),s(P.length%8==0);for(let A=236;P.length<b;A^=253)r(A,8,P);let T=[];for(;T.length*8<P.length;)T.push(0);return P.forEach((A,R)=>T[R>>>3]|=A<<7-(R&7)),new nt(w,c,T,m)}getModule(u,c){return 0<=u&&u<this.size&&0<=c&&c<this.size&&this.modules[c][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),c=u.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(u[d],u[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const c=this.errorCorrectionLevel.formatBits<<3|u;let d=c;for(let m=0;m<10;m++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(h,m));this.setFunctionModule(8,7,i(h,6)),this.setFunctionModule(8,8,i(h,7)),this.setFunctionModule(7,8,i(h,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(h,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(h,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(h,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let d=0;d<12;d++)u=u<<1^(u>>>11)*7973;const c=this.version<<12|u;s(c>>>18==0);for(let d=0;d<18;d++){const h=i(c,d),m=this.size-11+d%3,_=Math.floor(d/3);this.setFunctionModule(m,_,h),this.setFunctionModule(_,m,h)}}drawFinderPattern(u,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const m=Math.max(Math.abs(h),Math.abs(d)),_=u+h,w=c+d;0<=_&&_<this.size&&0<=w&&w<this.size&&this.setFunctionModule(_,w,m!=2&&m!=4)}}drawAlignmentPattern(u,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(u+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(u,c,d){this.modules[c][u]=d,this.isFunction[c][u]=!0}addEccAndInterleave(u){const c=this.version,d=this.errorCorrectionLevel;if(u.length!=nt.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=nt.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],m=nt.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],_=Math.floor(nt.getNumRawDataModules(c)/8),w=h-_%h,I=Math.floor(_/h);let P=[];const b=nt.reedSolomonComputeDivisor(m);for(let A=0,R=0;A<h;A++){let M=u.slice(R,R+I-m+(A<w?0:1));R+=M.length;const U=nt.reedSolomonComputeRemainder(M,b);A<w&&M.push(0),P.push(M.concat(U))}let T=[];for(let A=0;A<P[0].length;A++)P.forEach((R,M)=>{(A!=I-m||M>=w)&&T.push(R[A])});return s(T.length==_),T}drawCodewords(u){if(u.length!=Math.floor(nt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let m=0;m<2;m++){const _=d-m,I=(d+1&2)==0?this.size-1-h:h;!this.isFunction[I][_]&&c<u.length*8&&(this.modules[I][_]=i(u[c>>>3],7-(c&7)),c++)}}s(c==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(u){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let u=0;for(let m=0;m<this.size;m++){let _=!1,w=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[m][P]==_?(w++,w==5?u+=nt.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,I),_||(u+=this.finderPenaltyCountPatterns(I)*nt.PENALTY_N3),_=this.modules[m][P],w=1);u+=this.finderPenaltyTerminateAndCount(_,w,I)*nt.PENALTY_N3}for(let m=0;m<this.size;m++){let _=!1,w=0,I=[0,0,0,0,0,0,0];for(let P=0;P<this.size;P++)this.modules[P][m]==_?(w++,w==5?u+=nt.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,I),_||(u+=this.finderPenaltyCountPatterns(I)*nt.PENALTY_N3),_=this.modules[P][m],w=1);u+=this.finderPenaltyTerminateAndCount(_,w,I)*nt.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let _=0;_<this.size-1;_++){const w=this.modules[m][_];w==this.modules[m][_+1]&&w==this.modules[m+1][_]&&w==this.modules[m+1][_+1]&&(u+=nt.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((_,w)=>_+(w?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),u+=h*nt.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let d=[6];for(let h=this.size-7;d.length<u;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(u){if(u<nt.MIN_VERSION||u>nt.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*u+128)*u+64;if(u>=2){const d=Math.floor(u/7)+2;c-=(25*d-10)*d-55,u>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(u,c){return Math.floor(nt.getNumRawDataModules(u)/8)-nt.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u]*nt.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<u-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<u;h++){for(let m=0;m<c.length;m++)c[m]=nt.reedSolomonMultiply(c[m],d),m+1<c.length&&(c[m]^=c[m+1]);d=nt.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(u,c){let d=c.map(h=>0);for(const h of u){const m=h^d.shift();d.push(0),c.forEach((_,w)=>d[w]^=nt.reedSolomonMultiply(_,m))}return d}static reedSolomonMultiply(u,c){if(u>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*u;return s(d>>>8==0),d}finderPenaltyCountPatterns(u){const c=u[1];s(c<=this.size*3);const d=c>0&&u[2]==c&&u[3]==c*3&&u[4]==c&&u[5]==c;return(d&&u[0]>=c*4&&u[6]>=c?1:0)+(d&&u[6]>=c*4&&u[0]>=c?1:0)}finderPenaltyTerminateAndCount(u,c,d){return u&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(u,c){c[0]==0&&(u+=this.size),c.pop(),c.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function r(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let d=u-1;d>=0;d--)c.push(l>>>d&1)}function i(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class zt{constructor(u,c,d){if(this.mode=u,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(u){let c=[];for(const d of u)r(d,8,c);return new zt(zt.Mode.BYTE,u.length,c)}static makeNumeric(u){if(!zt.isNumeric(u))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<u.length;){const h=Math.min(u.length-d,3);r(parseInt(u.substring(d,d+h),10),h*3+1,c),d+=h}return new zt(zt.Mode.NUMERIC,u.length,c)}static makeAlphanumeric(u){if(!zt.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=u.length;d+=2){let h=zt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d))*45;h+=zt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d+1)),r(h,11,c)}return d<u.length&&r(zt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(d)),6,c),new zt(zt.Mode.ALPHANUMERIC,u.length,c)}static makeSegments(u){return u==""?[]:zt.isNumeric(u)?[zt.makeNumeric(u)]:zt.isAlphanumeric(u)?[zt.makeAlphanumeric(u)]:[zt.makeBytes(zt.toUtf8ByteArray(u))]}static makeEci(u){let c=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,c);else if(u<16384)r(2,2,c),r(u,14,c);else if(u<1e6)r(6,3,c),r(u,21,c);else throw new RangeError("ECI assignment value out of range");return new zt(zt.Mode.ECI,0,c)}static isNumeric(u){return zt.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return zt.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,c){let d=0;for(const h of u){const m=h.mode.numCharCountBits(c);if(h.numChars>=1<<m)return 1/0;d+=4+m+h.bitData.length}return d}static toUtf8ByteArray(u){u=encodeURI(u);let c=[];for(let d=0;d<u.length;d++)u.charAt(d)!="%"?c.push(u.charCodeAt(d)):(c.push(parseInt(u.substring(d+1,d+3),16)),d+=2);return c}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;n.QrSegment=o})(Na||(Na={}));(n=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(Na||(Na={}));(n=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(Na||(Na={}));var El=Na;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var JR={L:El.QrCode.Ecc.LOW,M:El.QrCode.Ecc.MEDIUM,Q:El.QrCode.Ecc.QUARTILE,H:El.QrCode.Ecc.HIGH},n2=128,r2="L",i2="#FFFFFF",s2="#000000",o2=!1,a2=1,ZR=4,eO=0,tO=.1;function l2(n,e=0){const r=[];return n.forEach(function(i,s){let o=null;i.forEach(function(a,l){if(!a&&o!==null){r.push(`M${o+e} ${s+e}h${l-o}v1H${o+e}z`),o=null;return}if(l===i.length-1){if(!a)return;o===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${o+e},${s+e} h${l+1-o}v1H${o+e}z`);return}a&&o===null&&(o=l)})}),r.join("")}function u2(n,e){return n.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function nO(n,e,r,i){if(i==null)return null;const s=n.length+r*2,o=Math.floor(e*tO),a=s/e,l=(i.width||o)*a,u=(i.height||o)*a,c=i.x==null?n.length/2-l/2:i.x*a,d=i.y==null?n.length/2-u/2:i.y*a,h=i.opacity==null?1:i.opacity;let m=null;if(i.excavate){let w=Math.floor(c),I=Math.floor(d),P=Math.ceil(l+c-w),b=Math.ceil(u+d-I);m={x:w,y:I,w:P,h:b}}const _=i.crossOrigin;return{x:c,y:d,h:u,w:l,excavation:m,opacity:h,crossOrigin:_}}function rO(n,e){return e!=null?Math.max(Math.floor(e),0):n?ZR:eO}function c2({value:n,level:e,minVersion:r,includeMargin:i,marginSize:s,imageSettings:o,size:a,boostLevel:l}){let u=vt.useMemo(()=>{const w=(Array.isArray(n)?n:[n]).reduce((I,P)=>(I.push(...El.QrSegment.makeSegments(P)),I),[]);return El.QrCode.encodeSegments(w,JR[e],r,void 0,void 0,l)},[n,e,r,l]);const{cells:c,margin:d,numCells:h,calculatedImageSettings:m}=vt.useMemo(()=>{let _=u.getModules();const w=rO(i,s),I=_.length+w*2,P=nO(_,a,w,o);return{cells:_,margin:w,numCells:I,calculatedImageSettings:P}},[u,a,o,i,s]);return{qrcode:u,margin:d,cells:c,numCells:h,calculatedImageSettings:m}}var iO=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),sO=vt.forwardRef(function(e,r){const i=e,{value:s,size:o=n2,level:a=r2,bgColor:l=i2,fgColor:u=s2,includeMargin:c=o2,minVersion:d=a2,boostLevel:h,marginSize:m,imageSettings:_}=i,I=Jg(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:P}=I,b=Jg(I,["style"]),T=_==null?void 0:_.src,A=vt.useRef(null),R=vt.useRef(null),M=vt.useCallback(K=>{A.current=K,typeof r=="function"?r(K):r&&(r.current=K)},[r]),[U,N]=vt.useState(!1),{margin:C,cells:D,numCells:L,calculatedImageSettings:V}=c2({value:s,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:m,imageSettings:_,size:o});vt.useEffect(()=>{if(A.current!=null){const K=A.current,G=K.getContext("2d");if(!G)return;let Z=D;const pe=R.current,re=V!=null&&pe!==null&&pe.complete&&pe.naturalHeight!==0&&pe.naturalWidth!==0;re&&V.excavation!=null&&(Z=u2(D,V.excavation));const H=window.devicePixelRatio||1;K.height=K.width=o*H;const $=o/L*H;G.scale($,$),G.fillStyle=l,G.fillRect(0,0,L,L),G.fillStyle=u,iO?G.fill(new Path2D(l2(Z,C))):D.forEach(function(ne,fe){ne.forEach(function(ue,ge){ue&&G.fillRect(ge+C,fe+C,1,1)})}),V&&(G.globalAlpha=V.opacity),re&&G.drawImage(pe,V.x+C,V.y+C,V.w,V.h)}}),vt.useEffect(()=>{N(!1)},[T]);const B=Xg({height:o,width:o},P);let j=null;return T!=null&&(j=vt.createElement("img",{src:T,key:T,style:{display:"none"},onLoad:()=>{N(!0)},ref:R,crossOrigin:V==null?void 0:V.crossOrigin})),vt.createElement(vt.Fragment,null,vt.createElement("canvas",Xg({style:B,height:o,width:o,ref:M,role:"img"},b)),j)});sO.displayName="QRCodeCanvas";var Kv=vt.forwardRef(function(e,r){const i=e,{value:s,size:o=n2,level:a=r2,bgColor:l=i2,fgColor:u=s2,includeMargin:c=o2,minVersion:d=a2,boostLevel:h,title:m,marginSize:_,imageSettings:w}=i,I=Jg(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:P,cells:b,numCells:T,calculatedImageSettings:A}=c2({value:s,level:a,minVersion:d,boostLevel:h,includeMargin:c,marginSize:_,imageSettings:w,size:o});let R=b,M=null;w!=null&&A!=null&&(A.excavation!=null&&(R=u2(b,A.excavation)),M=vt.createElement("image",{href:w.src,height:A.h,width:A.w,x:A.x+P,y:A.y+P,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const U=l2(R,P);return vt.createElement("svg",Xg({height:o,width:o,viewBox:`0 0 ${T} ${T}`,ref:r,role:"img"},I),!!m&&vt.createElement("title",null,m),vt.createElement("path",{fill:l,d:`M0,0 h${T}v${T}H0z`,shapeRendering:"crispEdges"}),vt.createElement("path",{fill:u,d:U,shapeRendering:"crispEdges"}),M)});Kv.displayName="QRCodeSVG";var h2={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(p_,function(){var r=function(p,g){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,E){v.__proto__=E}||function(v,E){for(var k in E)Object.prototype.hasOwnProperty.call(E,k)&&(v[k]=E[k])})(p,g)},i=function(){return(i=Object.assign||function(p){for(var g,v=1,E=arguments.length;v<E;v++)for(var k in g=arguments[v])Object.prototype.hasOwnProperty.call(g,k)&&(p[k]=g[k]);return p}).apply(this,arguments)};function s(p,g,v){for(var E,k=0,O=g.length;k<O;k++)!E&&k in g||((E=E||Array.prototype.slice.call(g,0,k))[k]=g[k]);return p.concat(E||Array.prototype.slice.call(g))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:p_,a=Object.keys,l=Array.isArray;function u(p,g){return typeof g!="object"||a(g).forEach(function(v){p[v]=g[v]}),p}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function h(p,g){return d.call(p,g)}function m(p,g){typeof g=="function"&&(g=g(c(p))),(typeof Reflect>"u"?a:Reflect.ownKeys)(g).forEach(function(v){w(p,v,g[v])})}var _=Object.defineProperty;function w(p,g,v,E){_(p,g,u(v&&h(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},E))}function I(p){return{from:function(g){return p.prototype=Object.create(g.prototype),w(p.prototype,"constructor",p),{extend:m.bind(null,p.prototype)}}}}var P=Object.getOwnPropertyDescriptor,b=[].slice;function T(p,g,v){return b.call(p,g,v)}function A(p,g){return g(p)}function R(p){if(!p)throw new Error("Assertion Failed")}function M(p){o.setImmediate?setImmediate(p):setTimeout(p,0)}function U(p,g){if(typeof g=="string"&&h(p,g))return p[g];if(!g)return p;if(typeof g!="string"){for(var v=[],E=0,k=g.length;E<k;++E){var O=U(p,g[E]);v.push(O)}return v}var z=g.indexOf(".");if(z!==-1){var q=p[g.substr(0,z)];return q==null?void 0:U(q,g.substr(z+1))}}function N(p,g,v){if(p&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof g!="string"&&"length"in g){R(typeof v!="string"&&"length"in v);for(var E=0,k=g.length;E<k;++E)N(p,g[E],v[E])}else{var O,z,q=g.indexOf(".");q!==-1?(O=g.substr(0,q),(z=g.substr(q+1))===""?v===void 0?l(p)&&!isNaN(parseInt(O))?p.splice(O,1):delete p[O]:p[O]=v:N(q=!(q=p[O])||!h(p,O)?p[O]={}:q,z,v)):v===void 0?l(p)&&!isNaN(parseInt(g))?p.splice(g,1):delete p[g]:p[g]=v}}function C(p){var g,v={};for(g in p)h(p,g)&&(v[g]=p[g]);return v}var D=[].concat;function L(p){return D.apply([],p)}var Fn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(g){return g+p+"Array"})}))).filter(function(p){return o[p]}),V=new Set(Fn.map(function(p){return o[p]})),B=null;function j(p){return B=new WeakMap,p=function g(v){if(!v||typeof v!="object")return v;var E=B.get(v);if(E)return E;if(l(v)){E=[],B.set(v,E);for(var k=0,O=v.length;k<O;++k)E.push(g(v[k]))}else if(V.has(v.constructor))E=v;else{var z,q=c(v);for(z in E=q===Object.prototype?{}:Object.create(q),B.set(v,E),v)h(v,z)&&(E[z]=g(v[z]))}return E}(p),B=null,p}var K={}.toString;function G(p){return K.call(p).slice(8,-1)}var Z=typeof Symbol<"u"?Symbol.iterator:"@@iterator",pe=typeof Z=="symbol"?function(p){var g;return p!=null&&(g=p[Z])&&g.apply(p)}:function(){return null};function re(p,g){return g=p.indexOf(g),0<=g&&p.splice(g,1),0<=g}var H={};function $(p){var g,v,E,k;if(arguments.length===1){if(l(p))return p.slice();if(this===H&&typeof p=="string")return[p];if(k=pe(p)){for(v=[];!(E=k.next()).done;)v.push(E.value);return v}if(p==null)return[p];if(typeof(g=p.length)!="number")return[p];for(v=new Array(g);g--;)v[g]=p[g];return v}for(g=arguments.length,v=new Array(g);g--;)v[g]=arguments[g];return v}var ne=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},In=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(In),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ue(p,g){this.name=p,this.message=g}function ge(p,g){return p+". Errors: "+Object.keys(g).map(function(v){return g[v].toString()}).filter(function(v,E,k){return k.indexOf(v)===E}).join(`
`)}function Oe(p,g,v,E){this.failures=g,this.failedKeys=E,this.successCount=v,this.message=ge(p,g)}function Le(p,g){this.name="BulkError",this.failures=Object.keys(g).map(function(v){return g[v]}),this.failuresByPos=g,this.message=ge(p,this.failures)}I(ue).from(Error).extend({toString:function(){return this.name+": "+this.message}}),I(Oe).from(ue),I(Le).from(ue);var De=Pr.reduce(function(p,g){return p[g]=g+"Error",p},{}),He=ue,Re=Pr.reduce(function(p,g){var v=g+"Error";function E(k,O){this.name=v,k?typeof k=="string"?(this.message="".concat(k).concat(O?`
 `+O:""),this.inner=O||null):typeof k=="object"&&(this.message="".concat(k.name," ").concat(k.message),this.inner=k):(this.message=fe[g]||v,this.inner=null)}return I(E).from(He),p[g]=E,p},{});Re.Syntax=SyntaxError,Re.Type=TypeError,Re.Range=RangeError;var hn=In.reduce(function(p,g){return p[g+"Error"]=Re[g],p},{}),fn=Pr.reduce(function(p,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(p[g+"Error"]=Re[g]),p},{});function ut(){}function Ie(p){return p}function Je(p,g){return p==null||p===Ie?g:function(v){return g(p(v))}}function _t(p,g){return function(){p.apply(this,arguments),g.apply(this,arguments)}}function Tn(p,g){return p===ut?g:function(){var v=p.apply(this,arguments);v!==void 0&&(arguments[0]=v);var E=this.onsuccess,k=this.onerror;this.onsuccess=null,this.onerror=null;var O=g.apply(this,arguments);return E&&(this.onsuccess=this.onsuccess?_t(E,this.onsuccess):E),k&&(this.onerror=this.onerror?_t(k,this.onerror):k),O!==void 0?O:v}}function Uo(p,g){return p===ut?g:function(){p.apply(this,arguments);var v=this.onsuccess,E=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?_t(v,this.onsuccess):v),E&&(this.onerror=this.onerror?_t(E,this.onerror):E)}}function mu(p,g){return p===ut?g:function(v){var E=p.apply(this,arguments);u(v,E);var k=this.onsuccess,O=this.onerror;return this.onsuccess=null,this.onerror=null,v=g.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?_t(k,this.onsuccess):k),O&&(this.onerror=this.onerror?_t(O,this.onerror):O),E===void 0?v===void 0?void 0:v:u(E,v)}}function Vt(p,g){return p===ut?g:function(){return g.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Gt(p,g){return p===ut?g:function(){var v=p.apply(this,arguments);if(v&&typeof v.then=="function"){for(var E=this,k=arguments.length,O=new Array(k);k--;)O[k]=arguments[k];return v.then(function(){return g.apply(E,O)})}return g.apply(this,arguments)}}fn.ModifyError=Oe,fn.DexieError=ue,fn.BulkError=Le;var nn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $o(p){nn=p}var Tr={},Qt=100,Fn=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,c(p),p];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,c(g),p]}(),In=Fn[0],Pr=Fn[1],Fn=Fn[2],Pr=Pr&&Pr.then,$t=In&&In.constructor,ar=!!Fn,Zi=function(p,g){Ir.push([p,g]),es&&(queueMicrotask(qp),es=!1)},Ls=!0,es=!0,lr=[],Xn=[],xi=Ie,zn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ut,pgp:!1,env:{},finalize:ut},je=zn,Ir=[],dn=0,bi=[];function ke(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=je;if(typeof p!="function"){if(p!==Tr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ce(this,this._value))}this._state=null,this._value=null,++g.ref,function v(E,k){try{k(function(O){if(E._state===null){if(O===E)throw new TypeError("A promise cannot be resolved with itself.");var z=E._lib&&ur();O&&typeof O.then=="function"?v(E,function(q,Q){O instanceof ke?O._then(q,Q):O.then(q,Q)}):(E._state=!0,E._value=O,et(E)),z&&Vs()}},Ce.bind(null,E))}catch(O){Ce(E,O)}}(this,p)}var ts={get:function(){var p=je,g=cr;function v(E,k){var O=this,z=!p.global&&(p!==je||g!==cr),q=z&&!kr(),Q=new ke(function(Y,ie){Sn(O,new Yt(vu(E,p,z,q),vu(k,p,z,q),Y,ie,p))});return this._consoleTask&&(Q._consoleTask=this._consoleTask),Q}return v.prototype=Tr,v},set:function(p){w(this,"then",p&&p.prototype===Tr?ts:{get:function(){return p},set:ts.set})}};function Yt(p,g,v,E,k){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof g=="function"?g:null,this.resolve=v,this.reject=E,this.psd=k}function Ce(p,g){var v,E;Xn.push(g),p._state===null&&(v=p._lib&&ur(),g=xi(g),p._state=!1,p._value=g,E=p,lr.some(function(k){return k._value===E._value})||lr.push(E),et(p),v&&Vs())}function et(p){var g=p._listeners;p._listeners=[];for(var v=0,E=g.length;v<E;++v)Sn(p,g[v]);var k=p._PSD;--k.ref||k.finalize(),dn===0&&(++dn,Zi(function(){--dn==0&&gu()},[]))}function Sn(p,g){if(p._state!==null){var v=p._state?g.onFulfilled:g.onRejected;if(v===null)return(p._state?g.resolve:g.reject)(p._value);++g.psd.ref,++dn,Zi(Sr,[v,p,g])}else p._listeners.push(g)}function Sr(p,g,v){try{var E,k=g._value;!g._state&&Xn.length&&(Xn=[]),E=nn&&g._consoleTask?g._consoleTask.run(function(){return p(k)}):p(k),g._state||Xn.indexOf(k)!==-1||function(O){for(var z=lr.length;z;)if(lr[--z]._value===O._value)return lr.splice(z,1)}(g),v.resolve(E)}catch(O){v.reject(O)}finally{--dn==0&&gu(),--v.psd.ref||v.psd.finalize()}}function qp(){Cr(zn,function(){ur()&&Vs()})}function ur(){var p=Ls;return es=Ls=!1,p}function Vs(){var p,g,v;do for(;0<Ir.length;)for(p=Ir,Ir=[],v=p.length,g=0;g<v;++g){var E=p[g];E[0].apply(null,E[1])}while(0<Ir.length);es=Ls=!0}function gu(){var p=lr;lr=[],p.forEach(function(E){E._PSD.onunhandled.call(null,E._value,E)});for(var g=bi.slice(0),v=g.length;v;)g[--v]()}function ns(p){return new ke(Tr,!1,p)}function wt(p,g){var v=je;return function(){var E=ur(),k=je;try{return Kr(v,!0),p.apply(this,arguments)}catch(O){g&&g(O)}finally{Kr(k,!1),E&&Vs()}}}m(ke.prototype,{then:ts,_then:function(p,g){Sn(this,new Yt(null,null,p,g,je))},catch:function(p){if(arguments.length===1)return this.then(null,p);var g=p,v=arguments[1];return typeof g=="function"?this.then(null,function(E){return(E instanceof g?v:ns)(E)}):this.then(null,function(E){return(E&&E.name===g?v:ns)(E)})},finally:function(p){return this.then(function(g){return ke.resolve(p()).then(function(){return g})},function(g){return ke.resolve(p()).then(function(){return ns(g)})})},timeout:function(p,g){var v=this;return p<1/0?new ke(function(E,k){var O=setTimeout(function(){return k(new Re.Timeout(g))},p);v.then(E,k).finally(clearTimeout.bind(null,O))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),zn.env=Th(),m(ke,{all:function(){var p=$.apply(null,arguments).map(Bo);return new ke(function(g,v){p.length===0&&g([]);var E=p.length;p.forEach(function(k,O){return ke.resolve(k).then(function(z){p[O]=z,--E||g(p)},v)})})},resolve:function(p){return p instanceof ke?p:p&&typeof p.then=="function"?new ke(function(g,v){p.then(g,v)}):new ke(Tr,!0,p)},reject:ns,race:function(){var p=$.apply(null,arguments).map(Bo);return new ke(function(g,v){p.map(function(E){return ke.resolve(E).then(g,v)})})},PSD:{get:function(){return je},set:function(p){return je=p}},totalEchoes:{get:function(){return cr}},newPSD:Hr,usePSD:Cr,scheduler:{get:function(){return Zi},set:function(p){Zi=p}},rejectionMapper:{get:function(){return xi},set:function(p){xi=p}},follow:function(p,g){return new ke(function(v,E){return Hr(function(k,O){var z=je;z.unhandleds=[],z.onunhandled=O,z.finalize=_t(function(){var q,Q=this;q=function(){Q.unhandleds.length===0?k():O(Q.unhandleds[0])},bi.push(function Y(){q(),bi.splice(bi.indexOf(Y),1)}),++dn,Zi(function(){--dn==0&&gu()},[])},z.finalize),p()},g,v,E)})}}),$t&&($t.allSettled&&w(ke,"allSettled",function(){var p=$.apply(null,arguments).map(Bo);return new ke(function(g){p.length===0&&g([]);var v=p.length,E=new Array(v);p.forEach(function(k,O){return ke.resolve(k).then(function(z){return E[O]={status:"fulfilled",value:z}},function(z){return E[O]={status:"rejected",reason:z}}).then(function(){return--v||g(E)})})})}),$t.any&&typeof AggregateError<"u"&&w(ke,"any",function(){var p=$.apply(null,arguments).map(Bo);return new ke(function(g,v){p.length===0&&v(new AggregateError([]));var E=p.length,k=new Array(E);p.forEach(function(O,z){return ke.resolve(O).then(function(q){return g(q)},function(q){k[z]=q,--E||v(new AggregateError(k))})})})}),$t.withResolvers&&(ke.withResolvers=$t.withResolvers));var Bt={awaits:0,echoes:0,id:0},yu=0,Ei=[],qa=0,cr=0,Eh=0;function Hr(p,g,v,E){var k=je,O=Object.create(k);return O.parent=k,O.ref=0,O.global=!1,O.id=++Eh,zn.env,O.env=ar?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},g&&u(O,g),++k.ref,O.finalize=function(){--this.parent.ref||this.parent.finalize()},E=Cr(O,p,v,E),O.ref===0&&O.finalize(),E}function Ti(){return Bt.id||(Bt.id=++yu),++Bt.awaits,Bt.echoes+=Qt,Bt.id}function kr(){return!!Bt.awaits&&(--Bt.awaits==0&&(Bt.id=0),Bt.echoes=Bt.awaits*Qt,!0)}function Bo(p){return Bt.echoes&&p&&p.constructor===$t?(Ti(),p.then(function(g){return kr(),g},function(g){return kr(),xt(g)})):p}function Hp(){var p=Ei[Ei.length-1];Ei.pop(),Kr(p,!1)}function Kr(p,g){var v,E=je;(g?!Bt.echoes||qa++&&p===je:!qa||--qa&&p===je)||queueMicrotask(g?(function(k){++cr,Bt.echoes&&--Bt.echoes!=0||(Bt.echoes=Bt.awaits=Bt.id=0),Ei.push(je),Kr(k,!0)}).bind(null,p):Hp),p!==je&&(je=p,E===zn&&(zn.env=Th()),ar&&(v=zn.env.Promise,g=p.env,(E.global||p.global)&&(Object.defineProperty(o,"Promise",g.PromiseProp),v.all=g.all,v.race=g.race,v.resolve=g.resolve,v.reject=g.reject,g.allSettled&&(v.allSettled=g.allSettled),g.any&&(v.any=g.any))))}function Th(){var p=o.Promise;return ar?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function Cr(p,g,v,E,k){var O=je;try{return Kr(p,!0),g(v,E,k)}finally{Kr(O,!1)}}function vu(p,g,v,E){return typeof p!="function"?p:function(){var k=je;v&&Ti(),Kr(g,!0);try{return p.apply(this,arguments)}finally{Kr(k,!1),E&&queueMicrotask(kr)}}}function qo(p){Promise===$t&&Bt.echoes===0?qa===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Pr).indexOf("[native code]")===-1&&(Ti=kr=ut);var xt=ke.reject,Un="",hr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ih="String expected.",rs=[],Ho="__dbnames",Ha="readonly",Ko="readwrite";function Wr(p,g){return p?g?function(){return p.apply(this,arguments)&&g.apply(this,arguments)}:p:g}var _u={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wo(p){return typeof p!="string"||/\./.test(p)?function(g){return g}:function(g){return g[p]===void 0&&p in g&&delete(g=j(g))[p],g}}function wu(){throw Re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function tt(p,g){try{var v=Gr(p),E=Gr(g);if(v!==E)return v==="Array"?1:E==="Array"?-1:v==="binary"?1:E==="binary"?-1:v==="string"?1:E==="string"?-1:v==="Date"?1:E!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return g<p?1:p<g?-1:0;case"binary":return function(k,O){for(var z=k.length,q=O.length,Q=z<q?z:q,Y=0;Y<Q;++Y)if(k[Y]!==O[Y])return k[Y]<O[Y]?-1:1;return z===q?0:z<q?-1:1}(fr(p),fr(g));case"Array":return function(k,O){for(var z=k.length,q=O.length,Q=z<q?z:q,Y=0;Y<Q;++Y){var ie=tt(k[Y],O[Y]);if(ie!==0)return ie}return z===q?0:z<q?-1:1}(p,g)}}catch{}return NaN}function Gr(p){var g=typeof p;return g!="object"?g:ArrayBuffer.isView(p)?"binary":(p=G(p),p==="ArrayBuffer"?"binary":p)}function fr(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function Ii(p,g,v){var E=p.schema.yProps;return E?(g&&0<v.numFailures&&(g=g.filter(function(k,O){return!v.failures[O]})),Promise.all(E.map(function(k){return k=k.updatesTable,g?p.db.table(k).where("k").anyOf(g).delete():p.db.table(k).clear()})).then(function(){return v})):v}var Qr=(Ka.prototype.execute=function(p){var g=this["@@propmod"];if(g.add!==void 0){var v=g.add;if(l(v))return s(s([],l(p)?p:[],!0),v).sort();if(typeof v=="number")return(Number(p)||0)+v;if(typeof v=="bigint")try{return BigInt(p)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(g.remove!==void 0){var E=g.remove;if(l(E))return l(p)?p.filter(function(k){return!E.includes(k)}).sort():[];if(typeof E=="number")return Number(p)-E;if(typeof E=="bigint")try{return BigInt(p)-E}catch{return BigInt(0)-E}throw new TypeError("Invalid subtrahend ".concat(E))}return v=(v=g.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof p=="string"&&p.startsWith(v)?g.replacePrefix[1]+p.substring(v.length):p},Ka);function Ka(p){this["@@propmod"]=p}function yt(p,g){for(var v=a(g),E=v.length,k=!1,O=0;O<E;++O){var z=v[O],q=g[z],Q=U(p,z);q instanceof Qr?(N(p,z,q.execute(Q)),k=!0):Q!==q&&(N(p,z,q),k=!0)}return k}var Go=(ft.prototype._trans=function(p,g,v){var E=this._tx||je.trans,k=this.name,O=nn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function z(Y,ie,W){if(!W.schema[k])throw new Re.NotFound("Table "+k+" not part of transaction");return g(W.idbtrans,W)}var q=ur();try{var Q=E&&E.db._novip===this.db._novip?E===je.trans?E._promise(p,z,v):Hr(function(){return E._promise(p,z,v)},{trans:E,transless:je.transless||je}):function Y(ie,W,oe,X){if(ie.idbdb&&(ie._state.openComplete||je.letThrough||ie._vip)){var ee=ie._createTransaction(W,oe,ie._dbSchema);try{ee.create(),ie._state.PR1398_maxLoop=3}catch(te){return te.name===De.InvalidState&&ie.isOpen()&&0<--ie._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ie.close({disableAutoOpen:!1}),ie.open().then(function(){return Y(ie,W,oe,X)})):xt(te)}return ee._promise(W,function(te,se){return Hr(function(){return je.trans=ee,X(te,se,ee)})}).then(function(te){if(W==="readwrite")try{ee.idbtrans.commit()}catch{}return W==="readonly"?te:ee._completion.then(function(){return te})})}if(ie._state.openComplete)return xt(new Re.DatabaseClosed(ie._state.dbOpenError));if(!ie._state.isBeingOpened){if(!ie._state.autoOpen)return xt(new Re.DatabaseClosed);ie.open().catch(ut)}return ie._state.dbReadyPromise.then(function(){return Y(ie,W,oe,X)})}(this.db,p,[this.name],z);return O&&(Q._consoleTask=O,Q=Q.catch(function(Y){return console.trace(Y),xt(Y)})),Q}finally{q&&Vs()}},ft.prototype.get=function(p,g){var v=this;return p&&p.constructor===Object?this.where(p).first(g):p==null?xt(new Re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(E){return v.core.get({trans:E,key:p}).then(function(k){return v.hook.reading.fire(k)})}).then(g)},ft.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(l(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var g=a(p);if(g.length===1)return this.where(g[0]).equals(p[g[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&g.every(function(Y){return 0<=q.keyPath.indexOf(Y)})){for(var Q=0;Q<g.length;++Q)if(g.indexOf(q.keyPath[Q])===-1)return!1;return!0}return!1}).sort(function(q,Q){return q.keyPath.length-Q.keyPath.length})[0];if(v&&this.db._maxKey!==Un){var O=v.keyPath.slice(0,g.length);return this.where(O).equals(O.map(function(Q){return p[Q]}))}!v&&nn&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var E=this.schema.idxByName;function k(q,Q){return tt(q,Q)===0}var z=g.reduce(function(W,Q){var Y=W[0],ie=W[1],W=E[Q],oe=p[Q];return[Y||W,Y||!W?Wr(ie,W&&W.multi?function(X){return X=U(X,Q),l(X)&&X.some(function(ee){return k(oe,ee)})}:function(X){return k(oe,U(X,Q))}):ie]},[null,null]),O=z[0],z=z[1];return O?this.where(O.name).equals(p[O.keyPath]).filter(z):v?this.filter(z):this.where(g).equals("")},ft.prototype.filter=function(p){return this.toCollection().and(p)},ft.prototype.count=function(p){return this.toCollection().count(p)},ft.prototype.offset=function(p){return this.toCollection().offset(p)},ft.prototype.limit=function(p){return this.toCollection().limit(p)},ft.prototype.each=function(p){return this.toCollection().each(p)},ft.prototype.toArray=function(p){return this.toCollection().toArray(p)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,l(p)?"[".concat(p.join("+"),"]"):p))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(p){var g,v=this.db,E=this.name;function k(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof wu&&(function(Q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function ie(){this.constructor=Q}r(Q,Y),Q.prototype=Y===null?Object.create(Y):(ie.prototype=Y.prototype,new ie)}(k,g=p),Object.defineProperty(k.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),k.prototype.table=function(){return E},p=k);for(var O=new Set,z=p.prototype;z;z=c(z))Object.getOwnPropertyNames(z).forEach(function(Q){return O.add(Q)});function q(Q){if(!Q)return Q;var Y,ie=Object.create(p.prototype);for(Y in Q)if(!O.has(Y))try{ie[Y]=Q[Y]}catch{}return ie}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=q,this.hook("reading",q),p},ft.prototype.defineClass=function(){return this.mapToClass(function(p){u(this,p)})},ft.prototype.add=function(p,g){var v=this,E=this.schema.primKey,k=E.auto,O=E.keyPath,z=p;return O&&k&&(z=Wo(O)(p)),this._trans("readwrite",function(q){return v.core.mutate({trans:q,type:"add",keys:g!=null?[g]:null,values:[z]})}).then(function(q){return q.numFailures?ke.reject(q.failures[0]):q.lastResult}).then(function(q){if(O)try{N(p,O,q)}catch{}return q})},ft.prototype.upsert=function(p,g){var v=this,E=this.schema.primKey.keyPath;return this._trans("readwrite",function(k){return v.core.get({trans:k,key:p}).then(function(O){var z=O??{};return yt(z,g),E&&N(z,E,p),v.core.mutate({trans:k,type:"put",values:[z],keys:[p],upsert:!0,updates:{keys:[p],changeSpecs:[g]}}).then(function(q){return q.numFailures?ke.reject(q.failures[0]):!!O})})})},ft.prototype.update=function(p,g){return typeof p!="object"||l(p)?this.where(":id").equals(p).modify(g):(p=U(p,this.schema.primKey.keyPath),p===void 0?xt(new Re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(g))},ft.prototype.put=function(p,g){var v=this,E=this.schema.primKey,k=E.auto,O=E.keyPath,z=p;return O&&k&&(z=Wo(O)(p)),this._trans("readwrite",function(q){return v.core.mutate({trans:q,type:"put",values:[z],keys:g!=null?[g]:null})}).then(function(q){return q.numFailures?ke.reject(q.failures[0]):q.lastResult}).then(function(q){if(O)try{N(p,O,q)}catch{}return q})},ft.prototype.delete=function(p){var g=this;return this._trans("readwrite",function(v){return g.core.mutate({trans:v,type:"delete",keys:[p]}).then(function(E){return Ii(g,[p],E)}).then(function(E){return E.numFailures?ke.reject(E.failures[0]):void 0})})},ft.prototype.clear=function(){var p=this;return this._trans("readwrite",function(g){return p.core.mutate({trans:g,type:"deleteRange",range:_u}).then(function(v){return Ii(p,null,v)})}).then(function(g){return g.numFailures?ke.reject(g.failures[0]):void 0})},ft.prototype.bulkGet=function(p){var g=this;return this._trans("readonly",function(v){return g.core.getMany({keys:p,trans:v}).then(function(E){return E.map(function(k){return g.hook.reading.fire(k)})})})},ft.prototype.bulkAdd=function(p,g,v){var E=this,k=Array.isArray(g)?g:void 0,O=(v=v||(k?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(z){var Y=E.schema.primKey,q=Y.auto,Y=Y.keyPath;if(Y&&k)throw new Re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var Q=p.length,Y=Y&&q?p.map(Wo(Y)):p;return E.core.mutate({trans:z,type:"add",keys:k,values:Y,wantResults:O}).then(function(ee){var W=ee.numFailures,oe=ee.results,X=ee.lastResult,ee=ee.failures;if(W===0)return O?oe:X;throw new Le("".concat(E.name,".bulkAdd(): ").concat(W," of ").concat(Q," operations failed"),ee)})})},ft.prototype.bulkPut=function(p,g,v){var E=this,k=Array.isArray(g)?g:void 0,O=(v=v||(k?void 0:g))?v.allKeys:void 0;return this._trans("readwrite",function(z){var Y=E.schema.primKey,q=Y.auto,Y=Y.keyPath;if(Y&&k)throw new Re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(k&&k.length!==p.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var Q=p.length,Y=Y&&q?p.map(Wo(Y)):p;return E.core.mutate({trans:z,type:"put",keys:k,values:Y,wantResults:O}).then(function(ee){var W=ee.numFailures,oe=ee.results,X=ee.lastResult,ee=ee.failures;if(W===0)return O?oe:X;throw new Le("".concat(E.name,".bulkPut(): ").concat(W," of ").concat(Q," operations failed"),ee)})})},ft.prototype.bulkUpdate=function(p){var g=this,v=this.core,E=p.map(function(z){return z.key}),k=p.map(function(z){return z.changes}),O=[];return this._trans("readwrite",function(z){return v.getMany({trans:z,keys:E,cache:"clone"}).then(function(q){var Q=[],Y=[];p.forEach(function(W,oe){var X=W.key,ee=W.changes,te=q[oe];if(te){for(var se=0,le=Object.keys(ee);se<le.length;se++){var ce=le[se],me=ee[ce];if(ce===g.schema.primKey.keyPath){if(tt(me,X)!==0)throw new Re.Constraint("Cannot update primary key in bulkUpdate()")}else N(te,ce,me)}O.push(oe),Q.push(X),Y.push(te)}});var ie=Q.length;return v.mutate({trans:z,type:"put",keys:Q,values:Y,updates:{keys:E,changeSpecs:k}}).then(function(W){var oe=W.numFailures,X=W.failures;if(oe===0)return ie;for(var ee=0,te=Object.keys(X);ee<te.length;ee++){var se,le=te[ee],ce=O[Number(le)];ce!=null&&(se=X[le],delete X[le],X[ce]=se)}throw new Le("".concat(g.name,".bulkUpdate(): ").concat(oe," of ").concat(ie," operations failed"),X)})})})},ft.prototype.bulkDelete=function(p){var g=this,v=p.length;return this._trans("readwrite",function(E){return g.core.mutate({trans:E,type:"delete",keys:p}).then(function(k){return Ii(g,p,k)})}).then(function(z){var k=z.numFailures,O=z.lastResult,z=z.failures;if(k===0)return O;throw new Le("".concat(g.name,".bulkDelete(): ").concat(k," of ").concat(v," operations failed"),z)})},ft);function ft(){}function Yr(p){function g(z,q){if(q){for(var Q=arguments.length,Y=new Array(Q-1);--Q;)Y[Q-1]=arguments[Q];return v[z].subscribe.apply(null,Y),p}if(typeof z=="string")return v[z]}var v={};g.addEventType=O;for(var E=1,k=arguments.length;E<k;++E)O(arguments[E]);return g;function O(z,q,Q){if(typeof z!="object"){var Y;q=q||Vt;var ie={subscribers:[],fire:Q=Q||ut,subscribe:function(W){ie.subscribers.indexOf(W)===-1&&(ie.subscribers.push(W),ie.fire=q(ie.fire,W))},unsubscribe:function(W){ie.subscribers=ie.subscribers.filter(function(oe){return oe!==W}),ie.fire=ie.subscribers.reduce(q,Q)}};return v[z]=g[z]=ie}a(Y=z).forEach(function(W){var oe=Y[W];if(l(oe))O(W,Y[W][0],Y[W][1]);else{if(oe!=="asap")throw new Re.InvalidArgument("Invalid event config");var X=O(W,Ie,function(){for(var ee=arguments.length,te=new Array(ee);ee--;)te[ee]=arguments[ee];X.subscribers.forEach(function(se){M(function(){se.apply(null,te)})})})}})}}function Qo(p,g){return I(g).from({prototype:p}),g}function is(p,g){return!(p.filter||p.algorithm||p.or)&&(g?p.justLimit:!p.replayFilter)}function xu(p,g){p.filter=Wr(p.filter,g)}function bu(p,g,v){var E=p.replayFilter;p.replayFilter=E?function(){return Wr(E(),g())}:g,p.justLimit=v&&!E}function Wa(p,g){if(p.isPrimKey)return g.primaryKey;var v=g.getIndexByKeyPath(p.index);if(!v)throw new Re.Schema("KeyPath "+p.index+" on object store "+g.name+" is not indexed");return v}function Sh(p,g,v){var E=Wa(p,g.schema);return g.openCursor({trans:v,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:E,range:p.range}})}function Si(p,g,v,E){var k=p.replayFilter?Wr(p.filter,p.replayFilter()):p.filter;if(p.or){var O={},z=function(q,Q,Y){var ie,W;k&&!k(Q,Y,function(oe){return Q.stop(oe)},function(oe){return Q.fail(oe)})||((W=""+(ie=Q.primaryKey))=="[object ArrayBuffer]"&&(W=""+new Uint8Array(ie)),h(O,W)||(O[W]=!0,g(q,Q,Y)))};return Promise.all([p.or._iterate(z,v),ki(Sh(p,E,v),p.algorithm,z,!p.keysOnly&&p.valueMapper)])}return ki(Sh(p,E,v),Wr(p.algorithm,k),g,!p.keysOnly&&p.valueMapper)}function ki(p,g,v,E){var k=wt(E?function(O,z,q){return v(E(O),z,q)}:v);return p.then(function(O){if(O)return O.start(function(){var z=function(){return O.continue()};g&&!g(O,function(q){return z=q},function(q){O.stop(q),z=ut},function(q){O.fail(q),z=ut})||k(O.value,O,function(q){return z=q}),z()})})}var kh=(at.prototype._read=function(p,g){var v=this._ctx;return v.error?v.table._trans(null,xt.bind(null,v.error)):v.table._trans("readonly",p).then(g)},at.prototype._write=function(p){var g=this._ctx;return g.error?g.table._trans(null,xt.bind(null,g.error)):g.table._trans("readwrite",p,"locked")},at.prototype._addAlgorithm=function(p){var g=this._ctx;g.algorithm=Wr(g.algorithm,p)},at.prototype._iterate=function(p,g){return Si(this._ctx,p,g,this._ctx.table.core)},at.prototype.clone=function(p){var g=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return p&&u(v,p),g._ctx=v,g},at.prototype.raw=function(){return this._ctx.valueMapper=null,this},at.prototype.each=function(p){var g=this._ctx;return this._read(function(v){return Si(g,p,v,g.table.core)})},at.prototype.count=function(p){var g=this;return this._read(function(v){var E=g._ctx,k=E.table.core;if(is(E,!0))return k.count({trans:v,query:{index:Wa(E,k.schema),range:E.range}}).then(function(z){return Math.min(z,E.limit)});var O=0;return Si(E,function(){return++O,!1},v,k).then(function(){return O})}).then(p)},at.prototype.sortBy=function(p,g){var v=p.split(".").reverse(),E=v[0],k=v.length-1;function O(Q,Y){return Y?O(Q[v[Y]],Y-1):Q[E]}var z=this._ctx.dir==="next"?1:-1;function q(Q,Y){return tt(O(Q,k),O(Y,k))*z}return this.toArray(function(Q){return Q.sort(q)}).then(g)},at.prototype.toArray=function(p){var g=this;return this._read(function(v){var E=g._ctx;if(E.dir==="next"&&is(E,!0)&&0<E.limit){var k=E.valueMapper,O=Wa(E,E.table.core.schema);return E.table.core.query({trans:v,limit:E.limit,values:!0,query:{index:O,range:E.range}}).then(function(q){return q=q.result,k?q.map(k):q})}var z=[];return Si(E,function(q){return z.push(q)},v,E.table.core).then(function(){return z})},p)},at.prototype.offset=function(p){var g=this._ctx;return p<=0||(g.offset+=p,is(g)?bu(g,function(){var v=p;return function(E,k){return v===0||(v===1?--v:k(function(){E.advance(v),v=0}),!1)}}):bu(g,function(){var v=p;return function(){return--v<0}})),this},at.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),bu(this._ctx,function(){var g=p;return function(v,E,k){return--g<=0&&E(k),0<=g}},!0),this},at.prototype.until=function(p,g){return xu(this._ctx,function(v,E,k){return!p(v.value)||(E(k),g)}),this},at.prototype.first=function(p){return this.limit(1).toArray(function(g){return g[0]}).then(p)},at.prototype.last=function(p){return this.reverse().first(p)},at.prototype.filter=function(p){var g;return xu(this._ctx,function(v){return p(v.value)}),(g=this._ctx).isMatch=Wr(g.isMatch,p),this},at.prototype.and=function(p){return this.filter(p)},at.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},at.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},at.prototype.desc=function(){return this.reverse()},at.prototype.eachKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,E){p(E.key,E)})},at.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},at.prototype.eachPrimaryKey=function(p){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(v,E){p(E.primaryKey,E)})},at.prototype.keys=function(p){var g=this._ctx;g.keysOnly=!g.isMatch;var v=[];return this.each(function(E,k){v.push(k.key)}).then(function(){return v}).then(p)},at.prototype.primaryKeys=function(p){var g=this._ctx;if(g.dir==="next"&&is(g,!0)&&0<g.limit)return this._read(function(E){var k=Wa(g,g.table.core.schema);return g.table.core.query({trans:E,values:!1,limit:g.limit,query:{index:k,range:g.range}})}).then(function(E){return E.result}).then(p);g.keysOnly=!g.isMatch;var v=[];return this.each(function(E,k){v.push(k.primaryKey)}).then(function(){return v}).then(p)},at.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},at.prototype.firstKey=function(p){return this.limit(1).keys(function(g){return g[0]}).then(p)},at.prototype.lastKey=function(p){return this.reverse().firstKey(p)},at.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var g={};return xu(this._ctx,function(k){var E=k.primaryKey.toString(),k=h(g,E);return g[E]=!0,!k}),this},at.prototype.modify=function(p){var g=this,v=this._ctx;return this._write(function(E){var k=typeof p=="function"?p:function(te){return yt(te,p)},O=v.table.core,Y=O.schema.primaryKey,z=Y.outbound,q=Y.extractKey,Q=200,Y=g.db._options.modifyChunkSize;Y&&(Q=typeof Y=="object"?Y[O.name]||Y["*"]||200:Y);function ie(te,ce){var le=ce.failures,ce=ce.numFailures;oe+=te-ce;for(var me=0,ye=a(le);me<ye.length;me++){var Ee=ye[me];W.push(le[Ee])}}var W=[],oe=0,X=[],ee=p===Eu;return g.clone().primaryKeys().then(function(te){function se(ce){var me=Math.min(Q,te.length-ce),ye=te.slice(ce,ce+me);return(ee?Promise.resolve([]):O.getMany({trans:E,keys:ye,cache:"immutable"})).then(function(Ee){var Ne=[],xe=[],Se=z?[]:null,Pe=ee?ye:[];if(!ee)for(var Ae=0;Ae<me;++Ae){var Ve=Ee[Ae],Ye={value:j(Ve),primKey:te[ce+Ae]};k.call(Ye,Ye.value,Ye)!==!1&&(Ye.value==null?Pe.push(te[ce+Ae]):z||tt(q(Ve),q(Ye.value))===0?(xe.push(Ye.value),z&&Se.push(te[ce+Ae])):(Pe.push(te[ce+Ae]),Ne.push(Ye.value)))}return Promise.resolve(0<Ne.length&&O.mutate({trans:E,type:"add",values:Ne}).then(function(Xe){for(var Ze in Xe.failures)Pe.splice(parseInt(Ze),1);ie(Ne.length,Xe)})).then(function(){return(0<xe.length||le&&typeof p=="object")&&O.mutate({trans:E,type:"put",keys:Se,values:xe,criteria:le,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<ce}).then(function(Xe){return ie(xe.length,Xe)})}).then(function(){return(0<Pe.length||le&&ee)&&O.mutate({trans:E,type:"delete",keys:Pe,criteria:le,isAdditionalChunk:0<ce}).then(function(Xe){return Ii(v.table,Pe,Xe)}).then(function(Xe){return ie(Pe.length,Xe)})}).then(function(){return te.length>ce+me&&se(ce+Q)})})}var le=is(v)&&v.limit===1/0&&(typeof p!="function"||ee)&&{index:v.index,range:v.range};return se(0).then(function(){if(0<W.length)throw new Oe("Error modifying one or more objects",W,oe,X);return te.length})})})},at.prototype.delete=function(){var p=this._ctx,g=p.range;return!is(p)||p.table.schema.yProps||!p.isPrimKey&&g.type!==3?this.modify(Eu):this._write(function(v){var E=p.table.core.schema.primaryKey,k=g;return p.table.core.count({trans:v,query:{index:E,range:k}}).then(function(O){return p.table.core.mutate({trans:v,type:"deleteRange",range:k}).then(function(Q){var q=Q.failures,Q=Q.numFailures;if(Q)throw new Oe("Could not delete some values",Object.keys(q).map(function(Y){return q[Y]}),O-Q);return O-Q})})})},at);function at(){}var Eu=function(p,g){return g.value=null};function Ch(p,g){return p<g?-1:p===g?0:1}function Ah(p,g){return g<p?-1:p===g?0:1}function Xt(p,g,v){return p=p instanceof Nh?new p.Collection(p):p,p._ctx.error=new(v||TypeError)(g),p}function Fs(p){return new p.Collection(p,function(){return Xr("")}).limit(0)}function Ga(p,g,v,E){var k,O,z,q,Q,Y,ie,W=v.length;if(!v.every(function(ee){return typeof ee=="string"}))return Xt(p,Ih);function oe(ee){k=ee==="next"?function(se){return se.toUpperCase()}:function(se){return se.toLowerCase()},O=ee==="next"?function(se){return se.toLowerCase()}:function(se){return se.toUpperCase()},z=ee==="next"?Ch:Ah;var te=v.map(function(se){return{lower:O(se),upper:k(se)}}).sort(function(se,le){return z(se.lower,le.lower)});q=te.map(function(se){return se.upper}),Q=te.map(function(se){return se.lower}),ie=(Y=ee)==="next"?"":E}oe("next"),p=new p.Collection(p,function(){return Ci(q[0],Q[W-1]+E)}),p._ondirectionchange=function(ee){oe(ee)};var X=0;return p._addAlgorithm(function(ee,te,se){var le=ee.key;if(typeof le!="string")return!1;var ce=O(le);if(g(ce,Q,X))return!0;for(var me=null,ye=X;ye<W;++ye){var Ee=function(Ne,xe,Se,Pe,Ae,Ve){for(var Ye=Math.min(Ne.length,Pe.length),Xe=-1,Ze=0;Ze<Ye;++Ze){var dr=xe[Ze];if(dr!==Pe[Ze])return Ae(Ne[Ze],Se[Ze])<0?Ne.substr(0,Ze)+Se[Ze]+Se.substr(Ze+1):Ae(Ne[Ze],Pe[Ze])<0?Ne.substr(0,Ze)+Pe[Ze]+Se.substr(Ze+1):0<=Xe?Ne.substr(0,Xe)+xe[Xe]+Se.substr(Xe+1):null;Ae(Ne[Ze],dr)<0&&(Xe=Ze)}return Ye<Pe.length&&Ve==="next"?Ne+Se.substr(Ne.length):Ye<Ne.length&&Ve==="prev"?Ne.substr(0,Se.length):Xe<0?null:Ne.substr(0,Xe)+Pe[Xe]+Se.substr(Xe+1)}(le,ce,q[ye],Q[ye],z,Y);Ee===null&&me===null?X=ye+1:(me===null||0<z(me,Ee))&&(me=Ee)}return te(me!==null?function(){ee.continue(me+ie)}:se),!1}),p}function Ci(p,g,v,E){return{type:2,lower:p,upper:g,lowerOpen:v,upperOpen:E}}function Xr(p){return{type:1,lower:p,upper:p}}var Nh=(Object.defineProperty(Ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ft.prototype.between=function(p,g,v,E){v=v!==!1,E=E===!0;try{return 0<this._cmp(p,g)||this._cmp(p,g)===0&&(v||E)&&(!v||!E)?Fs(this):new this.Collection(this,function(){return Ci(p,g,!v,!E)})}catch{return Xt(this,hr)}},Ft.prototype.equals=function(p){return p==null?Xt(this,hr):new this.Collection(this,function(){return Xr(p)})},Ft.prototype.above=function(p){return p==null?Xt(this,hr):new this.Collection(this,function(){return Ci(p,void 0,!0)})},Ft.prototype.aboveOrEqual=function(p){return p==null?Xt(this,hr):new this.Collection(this,function(){return Ci(p,void 0,!1)})},Ft.prototype.below=function(p){return p==null?Xt(this,hr):new this.Collection(this,function(){return Ci(void 0,p,!1,!0)})},Ft.prototype.belowOrEqual=function(p){return p==null?Xt(this,hr):new this.Collection(this,function(){return Ci(void 0,p)})},Ft.prototype.startsWith=function(p){return typeof p!="string"?Xt(this,Ih):this.between(p,p+Un,!0,!0)},Ft.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):Ga(this,function(g,v){return g.indexOf(v[0])===0},[p],Un)},Ft.prototype.equalsIgnoreCase=function(p){return Ga(this,function(g,v){return g===v[0]},[p],"")},Ft.prototype.anyOfIgnoreCase=function(){var p=$.apply(H,arguments);return p.length===0?Fs(this):Ga(this,function(g,v){return v.indexOf(g)!==-1},p,"")},Ft.prototype.startsWithAnyOfIgnoreCase=function(){var p=$.apply(H,arguments);return p.length===0?Fs(this):Ga(this,function(g,v){return v.some(function(E){return g.indexOf(E)===0})},p,Un)},Ft.prototype.anyOf=function(){var p=this,g=$.apply(H,arguments),v=this._cmp;try{g.sort(v)}catch{return Xt(this,hr)}if(g.length===0)return Fs(this);var E=new this.Collection(this,function(){return Ci(g[0],g[g.length-1])});E._ondirectionchange=function(O){v=O==="next"?p._ascending:p._descending,g.sort(v)};var k=0;return E._addAlgorithm(function(O,z,q){for(var Q=O.key;0<v(Q,g[k]);)if(++k===g.length)return z(q),!1;return v(Q,g[k])===0||(z(function(){O.continue(g[k])}),!1)}),E},Ft.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ft.prototype.noneOf=function(){var p=$.apply(H,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return Xt(this,hr)}var g=p.reduce(function(v,E){return v?v.concat([[v[v.length-1][1],E]]):[[-1/0,E]]},null);return g.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},Ft.prototype.inAnyRange=function(le,g){var v=this,E=this._cmp,k=this._ascending,O=this._descending,z=this._min,q=this._max;if(le.length===0)return Fs(this);if(!le.every(function(ce){return ce[0]!==void 0&&ce[1]!==void 0&&k(ce[0],ce[1])<=0}))return Xt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Re.InvalidArgument);var Q=!g||g.includeLowers!==!1,Y=g&&g.includeUppers===!0,ie,W=k;function oe(ce,me){return W(ce[0],me[0])}try{(ie=le.reduce(function(ce,me){for(var ye=0,Ee=ce.length;ye<Ee;++ye){var Ne=ce[ye];if(E(me[0],Ne[1])<0&&0<E(me[1],Ne[0])){Ne[0]=z(Ne[0],me[0]),Ne[1]=q(Ne[1],me[1]);break}}return ye===Ee&&ce.push(me),ce},[])).sort(oe)}catch{return Xt(this,hr)}var X=0,ee=Y?function(ce){return 0<k(ce,ie[X][1])}:function(ce){return 0<=k(ce,ie[X][1])},te=Q?function(ce){return 0<O(ce,ie[X][0])}:function(ce){return 0<=O(ce,ie[X][0])},se=ee,le=new this.Collection(this,function(){return Ci(ie[0][0],ie[ie.length-1][1],!Q,!Y)});return le._ondirectionchange=function(ce){W=ce==="next"?(se=ee,k):(se=te,O),ie.sort(oe)},le._addAlgorithm(function(ce,me,ye){for(var Ee,Ne=ce.key;se(Ne);)if(++X===ie.length)return me(ye),!1;return!ee(Ee=Ne)&&!te(Ee)||(v._cmp(Ne,ie[X][1])===0||v._cmp(Ne,ie[X][0])===0||me(function(){W===k?ce.continue(ie[X][0]):ce.continue(ie[X][1])}),!1)}),le},Ft.prototype.startsWithAnyOf=function(){var p=$.apply(H,arguments);return p.every(function(g){return typeof g=="string"})?p.length===0?Fs(this):this.inAnyRange(p.map(function(g){return[g,g+Un]})):Xt(this,"startsWithAnyOf() only works with strings")},Ft);function Ft(){}function $n(p){return wt(function(g){return zs(g),p(g.target.error),!1})}function zs(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Jr="storagemutated",ss="x-storagemutated-1",Zr=Yr(null,Jr),Tu=(ct.prototype._lock=function(){return R(!je.global),++this._reculock,this._reculock!==1||je.global||(je.lockOwnerFor=this),this},ct.prototype._unlock=function(){if(R(!je.global),--this._reculock==0)for(je.global||(je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{Cr(p[1],p[0])}catch{}}return this},ct.prototype._locked=function(){return this._reculock&&je.lockOwnerFor!==this},ct.prototype.create=function(p){var g=this;if(!this.mode)return this;var v=this.db.idbdb,E=this.db._state.dbOpenError;if(R(!this.idbtrans),!p&&!v)switch(E&&E.name){case"DatabaseClosedError":throw new Re.DatabaseClosed(E);case"MissingAPIError":throw new Re.MissingAPI(E.message,E);default:throw new Re.OpenFailed(E)}if(!this.active)throw new Re.TransactionInactive;return R(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=wt(function(k){zs(k),g._reject(p.error)}),p.onabort=wt(function(k){zs(k),g.active&&g._reject(new Re.Abort(p.error)),g.active=!1,g.on("abort").fire(k)}),p.oncomplete=wt(function(){g.active=!1,g._resolve(),"mutatedParts"in p&&Zr.storagemutated.fire(p.mutatedParts)}),this},ct.prototype._promise=function(p,g,v){var E=this;if(p==="readwrite"&&this.mode!=="readwrite")return xt(new Re.ReadOnly("Transaction is readonly"));if(!this.active)return xt(new Re.TransactionInactive);if(this._locked())return new ke(function(O,z){E._blockedFuncs.push([function(){E._promise(p,g,v).then(O,z)},je])});if(v)return Hr(function(){var O=new ke(function(z,q){E._lock();var Q=g(z,q,E);Q&&Q.then&&Q.then(z,q)});return O.finally(function(){return E._unlock()}),O._lib=!0,O});var k=new ke(function(O,z){var q=g(O,z,E);q&&q.then&&q.then(O,z)});return k._lib=!0,k},ct.prototype._root=function(){return this.parent?this.parent._root():this},ct.prototype.waitFor=function(p){var g,v=this._root(),E=ke.resolve(p);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return E}):(v._waitingFor=E,v._waitingQueue=[],g=v.idbtrans.objectStore(v.storeNames[0]),function O(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(g.get(-1/0).onsuccess=O)}());var k=v._waitingFor;return new ke(function(O,z){E.then(function(q){return v._waitingQueue.push(wt(O.bind(null,q)))},function(q){return v._waitingQueue.push(wt(z.bind(null,q)))}).finally(function(){v._waitingFor===k&&(v._waitingFor=null)})})},ct.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Re.Abort))},ct.prototype.table=function(p){var g=this._memoizedTables||(this._memoizedTables={});if(h(g,p))return g[p];var v=this.schema[p];if(!v)throw new Re.NotFound("Table "+p+" not part of transaction");return v=new this.db.Table(p,v,this),v.core=this.db.core.table(p),g[p]=v},ct);function ct(){}function Iu(p,g,v,E,k,O,z,q){return{name:p,keyPath:g,unique:v,multi:E,auto:k,compound:O,src:(v&&!z?"&":"")+(E?"*":"")+(k?"++":"")+Ph(g),type:q}}function Ph(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Qa(p,g,v){return{name:p,primKey:g,indexes:v,mappedClass:null,idxByName:(E=function(k){return[k.name,k]},v.reduce(function(k,O,z){return z=E(O,z),z&&(k[z[0]]=z[1]),k},{}))};var E}var Us=function(p){try{return p.only([[]]),Us=function(){return[[]]},[[]]}catch{return Us=function(){return Un},Un}};function Ya(p){return p==null?function(){}:typeof p=="string"?(g=p).split(".").length===1?function(v){return v[g]}:function(v){return U(v,g)}:function(v){return U(v,p)};var g}function Yo(p){return[].slice.call(p)}var Ai=0;function $s(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function Kp(p,g,Q){function E(se){if(se.type===3)return null;if(se.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var X=se.lower,ee=se.upper,te=se.lowerOpen,se=se.upperOpen;return X===void 0?ee===void 0?null:g.upperBound(ee,!!se):ee===void 0?g.lowerBound(X,!!te):g.bound(X,ee,!!te,!!se)}function k(oe){var X,ee=oe.name;return{name:ee,schema:oe,mutate:function(te){var se=te.trans,le=te.type,ce=te.keys,me=te.values,ye=te.range;return new Promise(function(Ee,Ne){Ee=wt(Ee);var xe=se.objectStore(ee),Se=xe.keyPath==null,Pe=le==="put"||le==="add";if(!Pe&&le!=="delete"&&le!=="deleteRange")throw new Error("Invalid operation type: "+le);var Ae,Ve=(ce||me||{length:1}).length;if(ce&&me&&ce.length!==me.length)throw new Error("Given keys array must have same length as given values array.");if(Ve===0)return Ee({numFailures:0,failures:{},results:[],lastResult:void 0});function Ye(Bn){++dr,zs(Bn)}var Xe=[],Ze=[],dr=0;if(le==="deleteRange"){if(ye.type===4)return Ee({numFailures:dr,failures:Ze,results:[],lastResult:void 0});ye.type===3?Xe.push(Ae=xe.clear()):Xe.push(Ae=xe.delete(E(ye)))}else{var Se=Pe?Se?[me,ce]:[me,null]:[ce,null],Qe=Se[0],Cn=Se[1];if(Pe)for(var An=0;An<Ve;++An)Xe.push(Ae=Cn&&Cn[An]!==void 0?xe[le](Qe[An],Cn[An]):xe[le](Qe[An])),Ae.onerror=Ye;else for(An=0;An<Ve;++An)Xe.push(Ae=xe[le](Qe[An])),Ae.onerror=Ye}function Dh(Bn){Bn=Bn.target.result,Xe.forEach(function(ra,Xp){return ra.error!=null&&(Ze[Xp]=ra.error)}),Ee({numFailures:dr,failures:Ze,results:le==="delete"?ce:Xe.map(function(ra){return ra.result}),lastResult:Bn})}Ae.onerror=function(Bn){Ye(Bn),Dh(Bn)},Ae.onsuccess=Dh})},getMany:function(te){var se=te.trans,le=te.keys;return new Promise(function(ce,me){ce=wt(ce);for(var ye,Ee=se.objectStore(ee),Ne=le.length,xe=new Array(Ne),Se=0,Pe=0,Ae=function(Xe){Xe=Xe.target,xe[Xe._pos]=Xe.result,++Pe===Se&&ce(xe)},Ve=$n(me),Ye=0;Ye<Ne;++Ye)le[Ye]!=null&&((ye=Ee.get(le[Ye]))._pos=Ye,ye.onsuccess=Ae,ye.onerror=Ve,++Se);Se===0&&ce(xe)})},get:function(te){var se=te.trans,le=te.key;return new Promise(function(ce,me){ce=wt(ce);var ye=se.objectStore(ee).get(le);ye.onsuccess=function(Ee){return ce(Ee.target.result)},ye.onerror=$n(me)})},query:(X=Y,function(te){return new Promise(function(se,le){se=wt(se);var ce,me,ye,Se=te.trans,Ee=te.values,Ne=te.limit,Ae=te.query,xe=Ne===1/0?void 0:Ne,Pe=Ae.index,Ae=Ae.range,Se=Se.objectStore(ee),Pe=Pe.isPrimaryKey?Se:Se.index(Pe.name),Ae=E(Ae);if(Ne===0)return se({result:[]});X?((xe=Ee?Pe.getAll(Ae,xe):Pe.getAllKeys(Ae,xe)).onsuccess=function(Ve){return se({result:Ve.target.result})},xe.onerror=$n(le)):(ce=0,me=!Ee&&"openKeyCursor"in Pe?Pe.openKeyCursor(Ae):Pe.openCursor(Ae),ye=[],me.onsuccess=function(Ve){var Ye=me.result;return Ye?(ye.push(Ee?Ye.value:Ye.primaryKey),++ce===Ne?se({result:ye}):void Ye.continue()):se({result:ye})},me.onerror=$n(le))})}),openCursor:function(te){var se=te.trans,le=te.values,ce=te.query,me=te.reverse,ye=te.unique;return new Promise(function(Ee,Ne){Ee=wt(Ee);var Pe=ce.index,xe=ce.range,Se=se.objectStore(ee),Se=Pe.isPrimaryKey?Se:Se.index(Pe.name),Pe=me?ye?"prevunique":"prev":ye?"nextunique":"next",Ae=!le&&"openKeyCursor"in Se?Se.openKeyCursor(E(xe),Pe):Se.openCursor(E(xe),Pe);Ae.onerror=$n(Ne),Ae.onsuccess=wt(function(Ve){var Ye,Xe,Ze,dr,Qe=Ae.result;Qe?(Qe.___id=++Ai,Qe.done=!1,Ye=Qe.continue.bind(Qe),Xe=(Xe=Qe.continuePrimaryKey)&&Xe.bind(Qe),Ze=Qe.advance.bind(Qe),dr=function(){throw new Error("Cursor not stopped")},Qe.trans=se,Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=function(){throw new Error("Cursor not started")},Qe.fail=wt(Ne),Qe.next=function(){var Cn=this,An=1;return this.start(function(){return An--?Cn.continue():Cn.stop()}).then(function(){return Cn})},Qe.start=function(Cn){function An(){if(Ae.result)try{Cn()}catch(Bn){Qe.fail(Bn)}else Qe.done=!0,Qe.start=function(){throw new Error("Cursor behind last entry")},Qe.stop()}var Dh=new Promise(function(Bn,ra){Bn=wt(Bn),Ae.onerror=$n(ra),Qe.fail=ra,Qe.stop=function(Xp){Qe.stop=Qe.continue=Qe.continuePrimaryKey=Qe.advance=dr,Bn(Xp)}});return Ae.onsuccess=wt(function(Bn){Ae.onsuccess=An,An()}),Qe.continue=Ye,Qe.continuePrimaryKey=Xe,Qe.advance=Ze,An(),Dh},Ee(Qe)):Ee(null)},Ne)})},count:function(te){var se=te.query,le=te.trans,ce=se.index,me=se.range;return new Promise(function(ye,Ee){var Ne=le.objectStore(ee),xe=ce.isPrimaryKey?Ne:Ne.index(ce.name),Ne=E(me),xe=Ne?xe.count(Ne):xe.count();xe.onsuccess=wt(function(Se){return ye(Se.target.result)}),xe.onerror=$n(Ee)})}}}var O,z,q,ie=(z=Q,q=Yo((O=p).objectStoreNames),{schema:{name:O.name,tables:q.map(function(oe){return z.objectStore(oe)}).map(function(oe){var X=oe.keyPath,se=oe.autoIncrement,ee=l(X),te={},se={name:oe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:X==null,compound:ee,keyPath:X,autoIncrement:se,unique:!0,extractKey:Ya(X)},indexes:Yo(oe.indexNames).map(function(le){return oe.index(le)}).map(function(ye){var ce=ye.name,me=ye.unique,Ee=ye.multiEntry,ye=ye.keyPath,Ee={name:ce,compound:l(ye),keyPath:ye,unique:me,multiEntry:Ee,extractKey:Ya(ye)};return te[$s(ye)]=Ee}),getIndexByKeyPath:function(le){return te[$s(le)]}};return te[":id"]=se.primaryKey,X!=null&&(te[$s(X)]=se.primaryKey),se})},hasGetAll:0<q.length&&"getAll"in z.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Q=ie.schema,Y=ie.hasGetAll,ie=Q.tables.map(k),W={};return ie.forEach(function(oe){return W[oe.name]=oe}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(oe){if(!W[oe])throw new Error("Table '".concat(oe,"' not found"));return W[oe]},MIN_KEY:-1/0,MAX_KEY:Us(g),schema:Q}}function Xo(p,g,v,E){var k=v.IDBKeyRange;return v.indexedDB,{dbcore:(E=Kp(g,k,E),p.dbcore.reduce(function(O,z){return z=z.create,i(i({},O),z(O))},E))}}function Jo(p,E){var v=E.db,E=Xo(p._middlewares,v,p._deps,E);p.core=E.dbcore,p.tables.forEach(function(k){var O=k.name;p.core.schema.tables.some(function(z){return z.name===O})&&(k.core=p.core.table(O),p[O]instanceof p.Table&&(p[O].core=k.core))})}function Bs(p,g,v,E){v.forEach(function(k){var O=E[k];g.forEach(function(z){var q=function Q(Y,ie){return P(Y,ie)||(Y=c(Y))&&Q(Y,ie)}(z,k);(!q||"value"in q&&q.value===void 0)&&(z===p.Transaction.prototype||z instanceof p.Transaction?w(z,k,{get:function(){return this.table(k)},set:function(Q){_(this,k,{value:Q,writable:!0,configurable:!0,enumerable:!0})}}):z[k]=new p.Table(k,O))})})}function qs(p,g){g.forEach(function(v){for(var E in v)v[E]instanceof p.Table&&delete v[E]})}function Rh(p,g){return p._cfg.version-g._cfg.version}function Xa(p,g,v,E){var k=p._dbSchema;v.objectStoreNames.contains("$meta")&&!k.$meta&&(k.$meta=Qa("$meta",ku("")[0],[]),p._storeNames.push("$meta"));var O=p._createTransaction("readwrite",p._storeNames,k);O.create(v),O._completion.catch(E);var z=O._reject.bind(O),q=je.transless||je;Hr(function(){return je.trans=O,je.transless=q,g!==0?(Jo(p,v),Y=g,((Q=O).storeNames.includes("$meta")?Q.table("$meta").get("version").then(function(ie){return ie??Y}):ke.resolve(Y)).then(function(ie){return oe=ie,X=O,ee=v,te=[],ie=(W=p)._versions,se=W._dbSchema=Hs(0,W.idbdb,ee),(ie=ie.filter(function(le){return le._cfg.version>=oe})).length!==0?(ie.forEach(function(le){te.push(function(){var ce=se,me=le._cfg.dbschema;Ks(W,ce,ee),Ks(W,me,ee),se=W._dbSchema=me;var ye=Ja(ce,me);ye.add.forEach(function(Pe){os(ee,Pe[0],Pe[1].primKey,Pe[1].indexes)}),ye.change.forEach(function(Pe){if(Pe.recreate)throw new Re.Upgrade("Not yet support for changing primary key");var Ae=ee.objectStore(Pe.name);Pe.add.forEach(function(Ve){return Zo(Ae,Ve)}),Pe.change.forEach(function(Ve){Ae.deleteIndex(Ve.name),Zo(Ae,Ve)}),Pe.del.forEach(function(Ve){return Ae.deleteIndex(Ve)})});var Ee=le._cfg.contentUpgrade;if(Ee&&le._cfg.version>oe){Jo(W,ee),X._memoizedTables={};var Ne=C(me);ye.del.forEach(function(Pe){Ne[Pe]=ce[Pe]}),qs(W,[W.Transaction.prototype]),Bs(W,[W.Transaction.prototype],a(Ne),Ne),X.schema=Ne;var xe,Se=ne(Ee);return Se&&Ti(),ye=ke.follow(function(){var Pe;(xe=Ee(X))&&Se&&(Pe=kr.bind(null,null),xe.then(Pe,Pe))}),xe&&typeof xe.then=="function"?ke.resolve(xe):ye.then(function(){return xe})}}),te.push(function(ce){var me,ye,Ee=le._cfg.dbschema;me=Ee,ye=ce,[].slice.call(ye.db.objectStoreNames).forEach(function(Ne){return me[Ne]==null&&ye.db.deleteObjectStore(Ne)}),qs(W,[W.Transaction.prototype]),Bs(W,[W.Transaction.prototype],W._storeNames,W._dbSchema),X.schema=W._dbSchema}),te.push(function(ce){W.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(W.idbdb.version/10)===le._cfg.version?(W.idbdb.deleteObjectStore("$meta"),delete W._dbSchema.$meta,W._storeNames=W._storeNames.filter(function(me){return me!=="$meta"})):ce.objectStore("$meta").put(le._cfg.version,"version"))})}),function le(){return te.length?ke.resolve(te.shift()(X.idbtrans)).then(le):ke.resolve()}().then(function(){Su(se,ee)})):ke.resolve();var W,oe,X,ee,te,se}).catch(z)):(a(k).forEach(function(ie){os(v,ie,k[ie].primKey,k[ie].indexes)}),Jo(p,v),void ke.follow(function(){return p.on.populate.fire(O)}).catch(z));var Q,Y})}function Wp(p,g){Su(p._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var v=Hs(0,p.idbdb,g);Ks(p,p._dbSchema,g);for(var E=0,k=Ja(v,p._dbSchema).change;E<k.length;E++){var O=function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=g.objectStore(z.name);z.add.forEach(function(Q){nn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(Q.src)),Zo(q,Q)})}(k[E]);if(typeof O=="object")return O.value}}function Ja(p,g){var v,E={del:[],add:[],change:[]};for(v in p)g[v]||E.del.push(v);for(v in g){var k=p[v],O=g[v];if(k){var z={name:v,def:O,recreate:!1,del:[],add:[],change:[]};if(""+(k.primKey.keyPath||"")!=""+(O.primKey.keyPath||"")||k.primKey.auto!==O.primKey.auto)z.recreate=!0,E.change.push(z);else{var q=k.idxByName,Q=O.idxByName,Y=void 0;for(Y in q)Q[Y]||z.del.push(Y);for(Y in Q){var ie=q[Y],W=Q[Y];ie?ie.src!==W.src&&z.change.push(W):z.add.push(W)}(0<z.del.length||0<z.add.length||0<z.change.length)&&E.change.push(z)}}else E.add.push([v,O])}return E}function os(p,g,v,E){var k=p.db.createObjectStore(g,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return E.forEach(function(O){return Zo(k,O)}),k}function Su(p,g){a(p).forEach(function(v){g.db.objectStoreNames.contains(v)||(nn&&console.debug("Dexie: Creating missing table",v),os(g,v,p[v].primKey,p[v].indexes))})}function Zo(p,g){p.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Hs(p,g,v){var E={};return T(g.objectStoreNames,0).forEach(function(k){for(var O=v.objectStore(k),z=Iu(Ph(Y=O.keyPath),Y||"",!0,!1,!!O.autoIncrement,Y&&typeof Y!="string",!0),q=[],Q=0;Q<O.indexNames.length;++Q){var ie=O.index(O.indexNames[Q]),Y=ie.keyPath,ie=Iu(ie.name,Y,!!ie.unique,!!ie.multiEntry,!1,Y&&typeof Y!="string",!1);q.push(ie)}E[k]=Qa(k,z,q)}),E}function Ks(p,g,v){for(var E=v.db.objectStoreNames,k=0;k<E.length;++k){var O=E[k],z=v.objectStore(O);p._hasGetAll="getAll"in z;for(var q=0;q<z.indexNames.length;++q){var Q=z.indexNames[q],Y=z.index(Q).keyPath,ie=typeof Y=="string"?Y:"["+T(Y).join("+")+"]";!g[O]||(Y=g[O].idxByName[ie])&&(Y.name=Q,delete g[O].idxByName[ie],g[O].idxByName[Q]=Y)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function ku(p){return p.split(",").map(function(g,v){var O=g.split(":"),E=(k=O[1])===null||k===void 0?void 0:k.trim(),k=(g=O[0].trim()).replace(/([&*]|\+\+)/g,""),O=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Iu(k,O||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),l(O),v===0,E)})}var Za=(as.prototype._createTableSchema=Qa,as.prototype._parseIndexSyntax=ku,as.prototype._parseStoresSpec=function(p,g){var v=this;a(p).forEach(function(E){if(p[E]!==null){var k=v._parseIndexSyntax(p[E]),O=k.shift();if(!O)throw new Re.Schema("Invalid schema for table "+E+": "+p[E]);if(O.unique=!0,O.multi)throw new Re.Schema("Primary key cannot be multiEntry*");k.forEach(function(z){if(z.auto)throw new Re.Schema("Only primary key can be marked as autoIncrement (++)");if(!z.keyPath)throw new Re.Schema("Index must have a name and cannot be an empty string")}),k=v._createTableSchema(E,O,k),g[E]=k}})},as.prototype.stores=function(v){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,v):v;var v=g._versions,E={},k={};return v.forEach(function(O){u(E,O._cfg.storesSource),k=O._cfg.dbschema={},O._parseStoresSpec(E,k)}),g._dbSchema=k,qs(g,[g._allTables,g,g.Transaction.prototype]),Bs(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],a(k),k),g._storeNames=a(k),this},as.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Gt(this._cfg.contentUpgrade||ut,p),this},as);function as(){}function el(p,g){var v=p._dbNamesDB;return v||(v=p._dbNamesDB=new us(Ho,{addons:[],indexedDB:p,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function ei(p){return p&&typeof p.databases=="function"}function tl(p){return Hr(function(){return je.letThrough=!0,p()})}function nl(p){return!("from"in p)}var rn=function(p,g){if(!this){var v=new rn;return p&&"d"in p&&u(v,p),v}u(this,arguments.length?{d:1,from:p,to:1<arguments.length?g:p}:{d:0})};function Ws(p,g,v){var E=tt(g,v);if(!isNaN(E)){if(0<E)throw RangeError();if(nl(p))return u(p,{from:g,to:v,d:1});var k=p.l,E=p.r;if(tt(v,p.from)<0)return k?Ws(k,g,v):p.l={from:g,to:v,d:1,l:null,r:null},Cu(p);if(0<tt(g,p.to))return E?Ws(E,g,v):p.r={from:g,to:v,d:1,l:null,r:null},Cu(p);tt(g,p.from)<0&&(p.from=g,p.l=null,p.d=E?E.d+1:1),0<tt(v,p.to)&&(p.to=v,p.r=null,p.d=p.l?p.l.d+1:1),v=!p.r,k&&!p.l&&Ni(p,k),E&&v&&Ni(p,E)}}function Ni(p,g){nl(g)||function v(E,Q){var O=Q.from,z=Q.to,q=Q.l,Q=Q.r;Ws(E,O,z),q&&v(E,q),Q&&v(E,Q)}(p,g)}function kn(p,g){var v=ea(g),E=v.next();if(E.done)return!1;for(var k=E.value,O=ea(p),z=O.next(k.from),q=z.value;!E.done&&!z.done;){if(tt(q.from,k.to)<=0&&0<=tt(q.to,k.from))return!0;tt(k.from,q.from)<0?k=(E=v.next(q.from)).value:q=(z=O.next(k.from)).value}return!1}function ea(p){var g=nl(p)?null:{s:0,n:p};return{next:function(v){for(var E=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,E)for(;g.n.l&&tt(v,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!E||tt(v,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Cu(p){var g,v,E=(((g=p.r)===null||g===void 0?void 0:g.d)||0)-(((v=p.l)===null||v===void 0?void 0:v.d)||0),k=1<E?"r":E<-1?"l":"";k&&(g=k=="r"?"l":"r",v=i({},p),E=p[k],p.from=E.from,p.to=E.to,p[k]=E[k],v[k]=E[g],(p[g]=v).d=ls(v)),p.d=ls(p)}function ls(v){var g=v.r,v=v.l;return(g?v?Math.max(g.d,v.d):g.d:v?v.d:0)+1}function f(p,g){return a(g).forEach(function(v){p[v]?Ni(p[v],g[v]):p[v]=function E(k){var O,z,q={};for(O in k)h(k,O)&&(z=k[O],q[O]=!z||typeof z!="object"||V.has(z.constructor)?z:E(z));return q}(g[v])}),p}function x(p,g){return p.all||g.all||Object.keys(p).some(function(v){return g[v]&&kn(g[v],p[v])})}m(rn.prototype,((Pr={add:function(p){return Ni(this,p),this},addKey:function(p){return Ws(this,p,p),this},addKeys:function(p){var g=this;return p.forEach(function(v){return Ws(g,v,v)}),this},hasKey:function(p){var g=ea(this).next(p).value;return g&&tt(g.from,p)<=0&&0<=tt(g.to,p)}})[Z]=function(){return ea(this)},Pr));var S={},F={},ae=!1;function he(p){f(F,p),ae||(ae=!0,setTimeout(function(){ae=!1,Te(F,!(F={}))},0))}function Te(p,g){g===void 0&&(g=!1);var v=new Set;if(p.all)for(var E=0,k=Object.values(S);E<k.length;E++)Ge(z=k[E],p,v,g);else for(var O in p){var z,q=/^idb\:\/\/(.*)\/(.*)\//.exec(O);q&&(O=q[1],q=q[2],(z=S["idb://".concat(O,"/").concat(q)])&&Ge(z,p,v,g))}v.forEach(function(Q){return Q()})}function Ge(p,g,v,E){for(var k=[],O=0,z=Object.entries(p.queries.query);O<z.length;O++){for(var q=z[O],Q=q[0],Y=[],ie=0,W=q[1];ie<W.length;ie++){var oe=W[ie];x(g,oe.obsSet)?oe.subscribers.forEach(function(se){return v.add(se)}):E&&Y.push(oe)}E&&k.push([Q,Y])}if(E)for(var X=0,ee=k;X<ee.length;X++){var te=ee[X],Q=te[0],Y=te[1];p.queries.query[Q]=Y}}function qt(p){var g=p._state,v=p._deps.indexedDB;if(g.isBeingOpened||p.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?xt(g.dbOpenError):p});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var E=g.openCanceller,k=Math.round(10*p.verno),O=!1;function z(){if(g.openCanceller!==E)throw new Re.DatabaseClosed("db.open() was cancelled")}function q(){return new ke(function(oe,X){if(z(),!v)throw new Re.MissingAPI;var ee=p.name,te=g.autoSchema||!k?v.open(ee):v.open(ee,k);if(!te)throw new Re.MissingAPI;te.onerror=$n(X),te.onblocked=wt(p._fireOnBlocked),te.onupgradeneeded=wt(function(se){var le;ie=te.transaction,g.autoSchema&&!p._options.allowEmptyDB?(te.onerror=zs,ie.abort(),te.result.close(),(le=v.deleteDatabase(ee)).onsuccess=le.onerror=wt(function(){X(new Re.NoSuchDatabase("Database ".concat(ee," doesnt exist")))})):(ie.onerror=$n(X),se=se.oldVersion>Math.pow(2,62)?0:se.oldVersion,W=se<1,p.idbdb=te.result,O&&Wp(p,ie),Xa(p,se/10,ie,X))},X),te.onsuccess=wt(function(){ie=null;var se,le,ce,me,ye,Ee=p.idbdb=te.result,Ne=T(Ee.objectStoreNames);if(0<Ne.length)try{var xe=Ee.transaction((me=Ne).length===1?me[0]:me,"readonly");if(g.autoSchema)le=Ee,ce=xe,(se=p).verno=le.version/10,ce=se._dbSchema=Hs(0,le,ce),se._storeNames=T(le.objectStoreNames,0),Bs(se,[se._allTables],a(ce),ce);else if(Ks(p,p._dbSchema,xe),((ye=Ja(Hs(0,(ye=p).idbdb,xe),ye._dbSchema)).add.length||ye.change.some(function(Se){return Se.add.length||Se.change.length}))&&!O)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ee.close(),k=Ee.version+1,O=!0,oe(q());Jo(p,xe)}catch{}rs.push(p),Ee.onversionchange=wt(function(Se){g.vcFired=!0,p.on("versionchange").fire(Se)}),Ee.onclose=wt(function(){p.close({disableAutoOpen:!1})}),W&&(ye=p._deps,xe=ee,Ee=ye.indexedDB,ye=ye.IDBKeyRange,ei(Ee)||xe===Ho||el(Ee,ye).put({name:xe}).catch(ut)),oe()},X)}).catch(function(oe){switch(oe==null?void 0:oe.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<k)return k=0,q()}return ke.reject(oe)})}var Q,Y=g.dbReadyResolve,ie=null,W=!1;return ke.race([E,(typeof navigator>"u"?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(oe){function X(){return indexedDB.databases().finally(oe)}Q=setInterval(X,100),X()}).finally(function(){return clearInterval(Q)}):Promise.resolve()).then(q)]).then(function(){return z(),g.onReadyBeingFired=[],ke.resolve(tl(function(){return p.on.ready.fire(p.vip)})).then(function oe(){if(0<g.onReadyBeingFired.length){var X=g.onReadyBeingFired.reduce(Gt,ut);return g.onReadyBeingFired=[],ke.resolve(tl(function(){return X(p.vip)})).then(oe)}})}).finally(function(){g.openCanceller===E&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(oe){g.dbOpenError=oe;try{ie&&ie.abort()}catch{}return E===g.openCanceller&&p._close(),xt(oe)}).finally(function(){g.openComplete=!0,Y()}).then(function(){var oe;return W&&(oe={},p.tables.forEach(function(X){X.schema.indexes.forEach(function(ee){ee.name&&(oe["idb://".concat(p.name,"/").concat(X.name,"/").concat(ee.name)]=new rn(-1/0,[[[]]]))}),oe["idb://".concat(p.name,"/").concat(X.name,"/")]=oe["idb://".concat(p.name,"/").concat(X.name,"/:dels")]=new rn(-1/0,[[[]]])}),Zr(Jr).fire(oe),Te(oe,!0)),p})}function dt(p){function g(O){return p.next(O)}var v=k(g),E=k(function(O){return p.throw(O)});function k(O){return function(Q){var q=O(Q),Q=q.value;return q.done?Q:Q&&typeof Q.then=="function"?Q.then(v,E):l(Q)?Promise.all(Q).then(v,E):v(Q)}}return k(g)()}function Ot(p,g,v){for(var E=l(p)?p.slice():[p],k=0;k<v;++k)E.push(g);return E}var Ar={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return i(i({},p),{table:function(g){var v=p.table(g),E=v.schema,k={},O=[];function z(W,oe,X){var ee=$s(W),te=k[ee]=k[ee]||[],se=W==null?0:typeof W=="string"?1:W.length,le=0<oe,le=i(i({},X),{name:le?"".concat(ee,"(virtual-from:").concat(X.name,")"):X.name,lowLevelIndex:X,isVirtual:le,keyTail:oe,keyLength:se,extractKey:Ya(W),unique:!le&&X.unique});return te.push(le),le.isPrimaryKey||O.push(le),1<se&&z(se===2?W[0]:W.slice(0,se-1),oe+1,X),te.sort(function(ce,me){return ce.keyTail-me.keyTail}),le}g=z(E.primaryKey.keyPath,0,E.primaryKey),k[":id"]=[g];for(var q=0,Q=E.indexes;q<Q.length;q++){var Y=Q[q];z(Y.keyPath,0,Y)}function ie(W){var oe,X=W.query.index;return X.isVirtual?i(i({},W),{query:{index:X.lowLevelIndex,range:(oe=W.query.range,X=X.keyTail,{type:oe.type===1?2:oe.type,lower:Ot(oe.lower,oe.lowerOpen?p.MAX_KEY:p.MIN_KEY,X),lowerOpen:!0,upper:Ot(oe.upper,oe.upperOpen?p.MIN_KEY:p.MAX_KEY,X),upperOpen:!0})}}):W}return i(i({},v),{schema:i(i({},E),{primaryKey:g,indexes:O,getIndexByKeyPath:function(W){return(W=k[$s(W)])&&W[0]}}),count:function(W){return v.count(ie(W))},query:function(W){return v.query(ie(W))},openCursor:function(W){var oe=W.query.index,X=oe.keyTail,ee=oe.isVirtual,te=oe.keyLength;return ee?v.openCursor(ie(W)).then(function(le){return le&&se(le)}):v.openCursor(W);function se(le){return Object.create(le,{continue:{value:function(ce){ce!=null?le.continue(Ot(ce,W.reverse?p.MAX_KEY:p.MIN_KEY,X)):W.unique?le.continue(le.key.slice(0,te).concat(W.reverse?p.MIN_KEY:p.MAX_KEY,X)):le.continue()}},continuePrimaryKey:{value:function(ce,me){le.continuePrimaryKey(Ot(ce,p.MAX_KEY,X),me)}},primaryKey:{get:function(){return le.primaryKey}},key:{get:function(){var ce=le.key;return te===1?ce[0]:ce.slice(0,te)}},value:{get:function(){return le.value}}})}}})}})}};function ti(p,g,v,E){return v=v||{},E=E||"",a(p).forEach(function(k){var O,z,q;h(g,k)?(O=p[k],z=g[k],typeof O=="object"&&typeof z=="object"&&O&&z?(q=G(O))!==G(z)?v[E+k]=g[k]:q==="Object"?ti(O,z,v,E+k+"."):O!==z&&(v[E+k]=g[k]):O!==z&&(v[E+k]=g[k])):v[E+k]=void 0}),a(g).forEach(function(k){h(p,k)||(v[E+k]=g[k])}),v}function Nr(p,g){return g.type==="delete"?g.keys:g.keys||g.values.map(p.extractKey)}var Pi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return i(i({},p),{table:function(g){var v=p.table(g),E=v.schema.primaryKey;return i(i({},v),{mutate:function(k){var O=je.trans,z=O.table(g).hook,q=z.deleting,Q=z.creating,Y=z.updating;switch(k.type){case"add":if(Q.fire===ut)break;return O._promise("readwrite",function(){return ie(k)},!0);case"put":if(Q.fire===ut&&Y.fire===ut)break;return O._promise("readwrite",function(){return ie(k)},!0);case"delete":if(q.fire===ut)break;return O._promise("readwrite",function(){return ie(k)},!0);case"deleteRange":if(q.fire===ut)break;return O._promise("readwrite",function(){return function W(oe,X,ee){return v.query({trans:oe,values:!1,query:{index:E,range:X},limit:ee}).then(function(te){var se=te.result;return ie({type:"delete",keys:se,trans:oe}).then(function(le){return 0<le.numFailures?Promise.reject(le.failures[0]):se.length<ee?{failures:[],numFailures:0,lastResult:void 0}:W(oe,i(i({},X),{lower:se[se.length-1],lowerOpen:!0}),ee)})})}(k.trans,k.range,1e4)},!0)}return v.mutate(k);function ie(W){var oe,X,ee,te=je.trans,se=W.keys||Nr(E,W);if(!se)throw new Error("Keys missing");return(W=W.type==="add"||W.type==="put"?i(i({},W),{keys:se}):i({},W)).type!=="delete"&&(W.values=s([],W.values)),W.keys&&(W.keys=s([],W.keys)),oe=v,ee=se,((X=W).type==="add"?Promise.resolve([]):oe.getMany({trans:X.trans,keys:ee,cache:"immutable"})).then(function(le){var ce=se.map(function(me,ye){var Ee,Ne,xe,Se=le[ye],Pe={onerror:null,onsuccess:null};return W.type==="delete"?q.fire.call(Pe,me,Se,te):W.type==="add"||Se===void 0?(Ee=Q.fire.call(Pe,me,W.values[ye],te),me==null&&Ee!=null&&(W.keys[ye]=me=Ee,E.outbound||N(W.values[ye],E.keyPath,me))):(Ee=ti(Se,W.values[ye]),(Ne=Y.fire.call(Pe,Ee,me,Se,te))&&(xe=W.values[ye],Object.keys(Ne).forEach(function(Ae){h(xe,Ae)?xe[Ae]=Ne[Ae]:N(xe,Ae,Ne[Ae])}))),Pe});return v.mutate(W).then(function(me){for(var ye=me.failures,Ee=me.results,Ne=me.numFailures,me=me.lastResult,xe=0;xe<se.length;++xe){var Se=(Ee||se)[xe],Pe=ce[xe];Se==null?Pe.onerror&&Pe.onerror(ye[xe]):Pe.onsuccess&&Pe.onsuccess(W.type==="put"&&le[xe]?W.values[xe]:Se)}return{failures:ye,results:Ee,numFailures:Ne,lastResult:me}}).catch(function(me){return ce.forEach(function(ye){return ye.onerror&&ye.onerror(me)}),Promise.reject(me)})})}}})}})}};function ta(p,g,v){try{if(!g||g.keys.length<p.length)return null;for(var E=[],k=0,O=0;k<g.keys.length&&O<p.length;++k)tt(g.keys[k],p[O])===0&&(E.push(v?j(g.values[k]):g.values[k]),++O);return E.length===p.length?E:null}catch{return null}}var Au={stack:"dbcore",level:-1,create:function(p){return{table:function(g){var v=p.table(g);return i(i({},v),{getMany:function(E){if(!E.cache)return v.getMany(E);var k=ta(E.keys,E.trans._cache,E.cache==="clone");return k?ke.resolve(k):v.getMany(E).then(function(O){return E.trans._cache={keys:E.keys,values:E.cache==="clone"?j(O):O},O})},mutate:function(E){return E.type!=="add"&&(E.trans._cache=null),v.mutate(E)}})}}}};function a_(p,g){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function l_(p,g){switch(p){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var EC={stack:"dbcore",level:0,name:"Observability",create:function(p){var g=p.schema.name,v=new rn(p.MIN_KEY,p.MAX_KEY);return i(i({},p),{transaction:function(E,k,O){if(je.subscr&&k!=="readonly")throw new Re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(je.querier));return p.transaction(E,k,O)},table:function(E){var k=p.table(E),O=k.schema,z=O.primaryKey,W=O.indexes,q=z.extractKey,Q=z.outbound,Y=z.autoIncrement&&W.filter(function(X){return X.compound&&X.keyPath.includes(z.keyPath)}),ie=i(i({},k),{mutate:function(X){function ee(Ae){return Ae="idb://".concat(g,"/").concat(E,"/").concat(Ae),me[Ae]||(me[Ae]=new rn)}var te,se,le,ce=X.trans,me=X.mutatedParts||(X.mutatedParts={}),ye=ee(""),Ee=ee(":dels"),Ne=X.type,Pe=X.type==="deleteRange"?[X.range]:X.type==="delete"?[X.keys]:X.values.length<50?[Nr(z,X).filter(function(Ae){return Ae}),X.values]:[],xe=Pe[0],Se=Pe[1],Pe=X.trans._cache;return l(xe)?(ye.addKeys(xe),(Pe=Ne==="delete"||xe.length===Se.length?ta(xe,Pe):null)||Ee.addKeys(xe),(Pe||Se)&&(te=ee,se=Pe,le=Se,O.indexes.forEach(function(Ae){var Ve=te(Ae.name||"");function Ye(Ze){return Ze!=null?Ae.extractKey(Ze):null}function Xe(Ze){return Ae.multiEntry&&l(Ze)?Ze.forEach(function(dr){return Ve.addKey(dr)}):Ve.addKey(Ze)}(se||le).forEach(function(Ze,Cn){var Qe=se&&Ye(se[Cn]),Cn=le&&Ye(le[Cn]);tt(Qe,Cn)!==0&&(Qe!=null&&Xe(Qe),Cn!=null&&Xe(Cn))})}))):xe?(Se={from:(Se=xe.lower)!==null&&Se!==void 0?Se:p.MIN_KEY,to:(Se=xe.upper)!==null&&Se!==void 0?Se:p.MAX_KEY},Ee.add(Se),ye.add(Se)):(ye.add(v),Ee.add(v),O.indexes.forEach(function(Ae){return ee(Ae.name).add(v)})),k.mutate(X).then(function(Ae){return!xe||X.type!=="add"&&X.type!=="put"||(ye.addKeys(Ae.results),Y&&Y.forEach(function(Ve){for(var Ye=X.values.map(function(Qe){return Ve.extractKey(Qe)}),Xe=Ve.keyPath.findIndex(function(Qe){return Qe===z.keyPath}),Ze=0,dr=Ae.results.length;Ze<dr;++Ze)Ye[Ze][Xe]=Ae.results[Ze];ee(Ve.name).addKeys(Ye)})),ce.mutatedParts=f(ce.mutatedParts||{},me),Ae})}}),W=function(ee){var te=ee.query,ee=te.index,te=te.range;return[ee,new rn((ee=te.lower)!==null&&ee!==void 0?ee:p.MIN_KEY,(te=te.upper)!==null&&te!==void 0?te:p.MAX_KEY)]},oe={get:function(X){return[z,new rn(X.key)]},getMany:function(X){return[z,new rn().addKeys(X.keys)]},count:W,query:W,openCursor:W};return a(oe).forEach(function(X){ie[X]=function(ee){var te=je.subscr,se=!!te,le=a_(je,k)&&l_(X,ee)?ee.obsSet={}:te;if(se){var ce=function(Se){return Se="idb://".concat(g,"/").concat(E,"/").concat(Se),le[Se]||(le[Se]=new rn)},me=ce(""),ye=ce(":dels"),te=oe[X](ee),se=te[0],te=te[1];if((X==="query"&&se.isPrimaryKey&&!ee.values?ye:ce(se.name||"")).add(te),!se.isPrimaryKey){if(X!=="count"){var Ee=X==="query"&&Q&&ee.values&&k.query(i(i({},ee),{values:!1}));return k[X].apply(this,arguments).then(function(Se){if(X==="query"){if(Q&&ee.values)return Ee.then(function(Ye){return Ye=Ye.result,me.addKeys(Ye),Se});var Pe=ee.values?Se.result.map(q):Se.result;(ee.values?me:ye).addKeys(Pe)}else if(X==="openCursor"){var Ae=Se,Ve=ee.values;return Ae&&Object.create(Ae,{key:{get:function(){return ye.addKey(Ae.primaryKey),Ae.key}},primaryKey:{get:function(){var Ye=Ae.primaryKey;return ye.addKey(Ye),Ye}},value:{get:function(){return Ve&&me.addKey(Ae.primaryKey),Ae.value}}})}return Se})}ye.add(v)}}return k[X].apply(this,arguments)}}),ie}})}};function u_(p,g,v){if(v.numFailures===0)return g;if(g.type==="deleteRange")return null;var E=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return v.numFailures===E?null:(g=i({},g),l(g.keys)&&(g.keys=g.keys.filter(function(k,O){return!(O in v.failures)})),"values"in g&&l(g.values)&&(g.values=g.values.filter(function(k,O){return!(O in v.failures)})),g)}function Gp(p,g){return v=p,((E=g).lower===void 0||(E.lowerOpen?0<tt(v,E.lower):0<=tt(v,E.lower)))&&(p=p,(g=g).upper===void 0||(g.upperOpen?tt(p,g.upper)<0:tt(p,g.upper)<=0));var v,E}function c_(p,g,oe,E,k,O){if(!oe||oe.length===0)return p;var z=g.query.index,q=z.multiEntry,Q=g.query.range,Y=E.schema.primaryKey.extractKey,ie=z.extractKey,W=(z.lowLevelIndex||z).extractKey,oe=oe.reduce(function(X,ee){var te=X,se=[];if(ee.type==="add"||ee.type==="put")for(var le=new rn,ce=ee.values.length-1;0<=ce;--ce){var me,ye=ee.values[ce],Ee=Y(ye);le.hasKey(Ee)||(me=ie(ye),(q&&l(me)?me.some(function(Ae){return Gp(Ae,Q)}):Gp(me,Q))&&(le.addKey(Ee),se.push(ye)))}switch(ee.type){case"add":var Ne=new rn().addKeys(g.values?X.map(function(Ve){return Y(Ve)}):X),te=X.concat(g.values?se.filter(function(Ve){return Ve=Y(Ve),!Ne.hasKey(Ve)&&(Ne.addKey(Ve),!0)}):se.map(function(Ve){return Y(Ve)}).filter(function(Ve){return!Ne.hasKey(Ve)&&(Ne.addKey(Ve),!0)}));break;case"put":var xe=new rn().addKeys(ee.values.map(function(Ve){return Y(Ve)}));te=X.filter(function(Ve){return!xe.hasKey(g.values?Y(Ve):Ve)}).concat(g.values?se:se.map(function(Ve){return Y(Ve)}));break;case"delete":var Se=new rn().addKeys(ee.keys);te=X.filter(function(Ve){return!Se.hasKey(g.values?Y(Ve):Ve)});break;case"deleteRange":var Pe=ee.range;te=X.filter(function(Ve){return!Gp(Y(Ve),Pe)})}return te},p);return oe===p?p:(oe.sort(function(X,ee){return tt(W(X),W(ee))||tt(Y(X),Y(ee))}),g.limit&&g.limit<1/0&&(oe.length>g.limit?oe.length=g.limit:p.length===g.limit&&oe.length<g.limit&&(k.dirty=!0)),O?Object.freeze(oe):oe)}function h_(p,g){return tt(p.lower,g.lower)===0&&tt(p.upper,g.upper)===0&&!!p.lowerOpen==!!g.lowerOpen&&!!p.upperOpen==!!g.upperOpen}function TC(p,g){return function(v,E,k,O){if(v===void 0)return E!==void 0?-1:0;if(E===void 0)return 1;if((E=tt(v,E))===0){if(k&&O)return 0;if(k)return 1;if(O)return-1}return E}(p.lower,g.lower,p.lowerOpen,g.lowerOpen)<=0&&0<=function(v,E,k,O){if(v===void 0)return E!==void 0?1:0;if(E===void 0)return-1;if((E=tt(v,E))===0){if(k&&O)return 0;if(k)return-1;if(O)return 1}return E}(p.upper,g.upper,p.upperOpen,g.upperOpen)}function IC(p,g,v,E){p.subscribers.add(v),E.addEventListener("abort",function(){var k,O;p.subscribers.delete(v),p.subscribers.size===0&&(k=p,O=g,setTimeout(function(){k.subscribers.size===0&&re(O,k)},3e3))})}var SC={stack:"dbcore",level:0,name:"Cache",create:function(p){var g=p.schema.name;return i(i({},p),{transaction:function(v,E,k){var O,z,q=p.transaction(v,E,k);return E==="readwrite"&&(z=(O=new AbortController).signal,k=function(Q){return function(){if(O.abort(),E==="readwrite"){for(var Y=new Set,ie=0,W=v;ie<W.length;ie++){var oe=W[ie],X=S["idb://".concat(g,"/").concat(oe)];if(X){var ee=p.table(oe),te=X.optimisticOps.filter(function(Ve){return Ve.trans===q});if(q._explicit&&Q&&q.mutatedParts)for(var se=0,le=Object.values(X.queries.query);se<le.length;se++)for(var ce=0,me=(Ne=le[se]).slice();ce<me.length;ce++)x((xe=me[ce]).obsSet,q.mutatedParts)&&(re(Ne,xe),xe.subscribers.forEach(function(Ve){return Y.add(Ve)}));else if(0<te.length){X.optimisticOps=X.optimisticOps.filter(function(Ve){return Ve.trans!==q});for(var ye=0,Ee=Object.values(X.queries.query);ye<Ee.length;ye++)for(var Ne,xe,Se,Pe=0,Ae=(Ne=Ee[ye]).slice();Pe<Ae.length;Pe++)(xe=Ae[Pe]).res!=null&&q.mutatedParts&&(Q&&!xe.dirty?(Se=Object.isFrozen(xe.res),Se=c_(xe.res,xe.req,te,ee,xe,Se),xe.dirty?(re(Ne,xe),xe.subscribers.forEach(function(Ve){return Y.add(Ve)})):Se!==xe.res&&(xe.res=Se,xe.promise=ke.resolve({result:Se}))):(xe.dirty&&re(Ne,xe),xe.subscribers.forEach(function(Ve){return Y.add(Ve)})))}}}Y.forEach(function(Ve){return Ve()})}}},q.addEventListener("abort",k(!1),{signal:z}),q.addEventListener("error",k(!1),{signal:z}),q.addEventListener("complete",k(!0),{signal:z})),q},table:function(v){var E=p.table(v),k=E.schema.primaryKey;return i(i({},E),{mutate:function(O){var z=je.trans;if(k.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return E.mutate(O);var q=S["idb://".concat(g,"/").concat(v)];return q?(z=E.mutate(O),O.type!=="add"&&O.type!=="put"||!(50<=O.values.length||Nr(k,O).some(function(Q){return Q==null}))?(q.optimisticOps.push(O),O.mutatedParts&&he(O.mutatedParts),z.then(function(Q){0<Q.numFailures&&(re(q.optimisticOps,O),(Q=u_(0,O,Q))&&q.optimisticOps.push(Q),O.mutatedParts&&he(O.mutatedParts))}),z.catch(function(){re(q.optimisticOps,O),O.mutatedParts&&he(O.mutatedParts)})):z.then(function(Q){var Y=u_(0,i(i({},O),{values:O.values.map(function(ie,W){var oe;return Q.failures[W]?ie:(ie=(oe=k.keyPath)!==null&&oe!==void 0&&oe.includes(".")?j(ie):i({},ie),N(ie,k.keyPath,Q.results[W]),ie)})}),Q);q.optimisticOps.push(Y),queueMicrotask(function(){return O.mutatedParts&&he(O.mutatedParts)})}),z):E.mutate(O)},query:function(O){if(!a_(je,E)||!l_("query",O))return E.query(O);var z=((Y=je.trans)===null||Y===void 0?void 0:Y.db._options.cache)==="immutable",W=je,q=W.requery,Q=W.signal,Y=function(ee,te,se,le){var ce=S["idb://".concat(ee,"/").concat(te)];if(!ce)return[];if(!(te=ce.queries[se]))return[null,!1,ce,null];var me=te[(le.query?le.query.index.name:null)||""];if(!me)return[null,!1,ce,null];switch(se){case"query":var ye=me.find(function(Ee){return Ee.req.limit===le.limit&&Ee.req.values===le.values&&h_(Ee.req.query.range,le.query.range)});return ye?[ye,!0,ce,me]:[me.find(function(Ee){return("limit"in Ee.req?Ee.req.limit:1/0)>=le.limit&&(!le.values||Ee.req.values)&&TC(Ee.req.query.range,le.query.range)}),!1,ce,me];case"count":return ye=me.find(function(Ee){return h_(Ee.req.query.range,le.query.range)}),[ye,!!ye,ce,me]}}(g,v,"query",O),ie=Y[0],W=Y[1],oe=Y[2],X=Y[3];return ie&&W?ie.obsSet=O.obsSet:(W=E.query(O).then(function(ee){var te=ee.result;if(ie&&(ie.res=te),z){for(var se=0,le=te.length;se<le;++se)Object.freeze(te[se]);Object.freeze(te)}else ee.result=j(te);return ee}).catch(function(ee){return X&&ie&&re(X,ie),Promise.reject(ee)}),ie={obsSet:O.obsSet,promise:W,subscribers:new Set,type:"query",req:O,dirty:!1},X?X.push(ie):(X=[ie],(oe=oe||(S["idb://".concat(g,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[O.query.index.name||""]=X)),IC(ie,X,q,Q),ie.promise.then(function(ee){return{result:c_(ee.result,O,oe==null?void 0:oe.optimisticOps,E,ie,z)}})}})}})}};function Oh(p,g){return new Proxy(p,{get:function(v,E,k){return E==="db"?g:Reflect.get(v,E,k)}})}var us=(Ht.prototype.version=function(p){if(isNaN(p)||p<.1)throw new Re.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new Re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var g=this._versions,v=g.filter(function(E){return E._cfg.version===p})[0];return v||(v=new this.Version(p),g.push(v),g.sort(Rh),v.stores({}),this._state.autoSchema=!1,v)},Ht.prototype._whenReady=function(p){var g=this;return this.idbdb&&(this._state.openComplete||je.letThrough||this._vip)?p():new ke(function(v,E){if(g._state.openComplete)return E(new Re.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void E(new Re.DatabaseClosed);g.open().catch(ut)}g._state.dbReadyPromise.then(v,E)}).then(p)},Ht.prototype.use=function(p){var g=p.stack,v=p.create,E=p.level,k=p.name;return k&&this.unuse({stack:g,name:k}),p=this._middlewares[g]||(this._middlewares[g]=[]),p.push({stack:g,create:v,level:E??10,name:k}),p.sort(function(O,z){return O.level-z.level}),this},Ht.prototype.unuse=function(p){var g=p.stack,v=p.name,E=p.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(k){return E?k.create!==E:!!v&&k.name!==v})),this},Ht.prototype.open=function(){var p=this;return Cr(zn,function(){return qt(p)})},Ht.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,g=rs.indexOf(this);if(0<=g&&rs.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new ke(function(v){p.dbReadyResolve=v}),p.openCanceller=new ke(function(v,E){p.cancelOpen=E}))},Ht.prototype.close=function(v){var g=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;g?(v.isBeingOpened&&v.cancelOpen(new Re.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new Re.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Ht.prototype.delete=function(p){var g=this;p===void 0&&(p={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",E=this._state;return new ke(function(k,O){function z(){g.close(p);var q=g._deps.indexedDB.deleteDatabase(g.name);q.onsuccess=wt(function(){var Q,Y,ie;Q=g._deps,Y=g.name,ie=Q.indexedDB,Q=Q.IDBKeyRange,ei(ie)||Y===Ho||el(ie,Q).delete(Y).catch(ut),k()}),q.onerror=$n(O),q.onblocked=g._fireOnBlocked}if(v)throw new Re.InvalidArgument("Invalid closeOptions argument to db.delete()");E.isBeingOpened?E.dbReadyPromise.then(z):z()})},Ht.prototype.backendDB=function(){return this.idbdb},Ht.prototype.isOpen=function(){return this.idbdb!==null},Ht.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},Ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ht.prototype,"tables",{get:function(){var p=this;return a(this._allTables).map(function(g){return p._allTables[g]})},enumerable:!1,configurable:!0}),Ht.prototype.transaction=function(){var p=(function(g,v,E){var k=arguments.length;if(k<2)throw new Re.InvalidArgument("Too few arguments");for(var O=new Array(k-1);--k;)O[k-1]=arguments[k];return E=O.pop(),[g,L(O),E]}).apply(this,arguments);return this._transaction.apply(this,p)},Ht.prototype._transaction=function(p,g,v){var E=this,k=je.trans;k&&k.db===this&&p.indexOf("!")===-1||(k=null);var O,z,q=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(z=g.map(function(Y){if(Y=Y instanceof E.Table?Y.name:Y,typeof Y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Y}),p=="r"||p===Ha)O=Ha;else{if(p!="rw"&&p!=Ko)throw new Re.InvalidArgument("Invalid transaction mode: "+p);O=Ko}if(k){if(k.mode===Ha&&O===Ko){if(!q)throw new Re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");k=null}k&&z.forEach(function(Y){if(k&&k.storeNames.indexOf(Y)===-1){if(!q)throw new Re.SubTransaction("Table "+Y+" not included in parent transaction.");k=null}}),q&&k&&!k.active&&(k=null)}}catch(Y){return k?k._promise(null,function(ie,W){W(Y)}):xt(Y)}var Q=(function Y(ie,W,oe,X,ee){return ke.resolve().then(function(){var te=je.transless||je,se=ie._createTransaction(W,oe,ie._dbSchema,X);if(se.explicit=!0,te={trans:se,transless:te},X)se.idbtrans=X.idbtrans;else try{se.create(),se.idbtrans._explicit=!0,ie._state.PR1398_maxLoop=3}catch(me){return me.name===De.InvalidState&&ie.isOpen()&&0<--ie._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ie.close({disableAutoOpen:!1}),ie.open().then(function(){return Y(ie,W,oe,null,ee)})):xt(me)}var le,ce=ne(ee);return ce&&Ti(),te=ke.follow(function(){var me;(le=ee.call(se,se))&&(ce?(me=kr.bind(null,null),le.then(me,me)):typeof le.next=="function"&&typeof le.throw=="function"&&(le=dt(le)))},te),(le&&typeof le.then=="function"?ke.resolve(le).then(function(me){return se.active?me:xt(new Re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):te.then(function(){return le})).then(function(me){return X&&se._resolve(),se._completion.then(function(){return me})}).catch(function(me){return se._reject(me),xt(me)})})}).bind(null,this,O,z,k,v);return k?k._promise(O,Q,"lock"):je.trans?Cr(je.transless,function(){return E._whenReady(Q)}):this._whenReady(Q)},Ht.prototype.table=function(p){if(!h(this._allTables,p))throw new Re.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},Ht);function Ht(p,g){var v=this;this._middlewares={},this.verno=0;var E=Ht.dependencies;this._options=g=i({addons:Ht.addons,autoOpen:!0,indexedDB:E.indexedDB,IDBKeyRange:E.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},E=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var k,O,z,q,Q,Y={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ut,dbReadyPromise:null,cancelOpen:ut,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};Y.dbReadyPromise=new ke(function(W){Y.dbReadyResolve=W}),Y.openCanceller=new ke(function(W,oe){Y.cancelOpen=oe}),this._state=Y,this.name=p,this.on=Yr(this,"populate","blocked","versionchange","close",{ready:[Gt,ut]}),this.once=function(W,oe){var X=function(){for(var ee=[],te=0;te<arguments.length;te++)ee[te]=arguments[te];v.on(W).unsubscribe(X),oe.apply(v,ee)};return v.on(W,X)},this.on.ready.subscribe=A(this.on.ready.subscribe,function(W){return function(oe,X){Ht.vip(function(){var ee,te=v._state;te.openComplete?(te.dbOpenError||ke.resolve().then(oe),X&&W(oe)):te.onReadyBeingFired?(te.onReadyBeingFired.push(oe),X&&W(oe)):(W(oe),ee=v,X||W(function se(){ee.on.ready.unsubscribe(oe),ee.on.ready.unsubscribe(se)}))})}}),this.Collection=(k=this,Qo(kh.prototype,function(le,se){this.db=k;var X=_u,ee=null;if(se)try{X=se()}catch(ce){ee=ce}var te=le._ctx,se=te.table,le=se.hook.reading.fire;this._ctx={table:se,index:te.index,isPrimKey:!te.index||se.schema.primKey.keyPath&&te.index===se.schema.primKey.name,range:X,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ee,or:te.or,valueMapper:le!==Ie?le:null}})),this.Table=(O=this,Qo(Go.prototype,function(W,oe,X){this.db=O,this._tx=X,this.name=W,this.schema=oe,this.hook=O._allTables[W]?O._allTables[W].hook:Yr(null,{creating:[Tn,ut],reading:[Je,Ie],updating:[mu,ut],deleting:[Uo,ut]})})),this.Transaction=(z=this,Qo(Tu.prototype,function(W,oe,X,ee,te){var se=this;W!=="readonly"&&oe.forEach(function(le){le=(le=X[le])===null||le===void 0?void 0:le.yProps,le&&(oe=oe.concat(le.map(function(ce){return ce.updatesTable})))}),this.db=z,this.mode=W,this.storeNames=oe,this.schema=X,this.chromeTransactionDurability=ee,this.idbtrans=null,this.on=Yr(this,"complete","error","abort"),this.parent=te||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(le,ce){se._resolve=le,se._reject=ce}),this._completion.then(function(){se.active=!1,se.on.complete.fire()},function(le){var ce=se.active;return se.active=!1,se.on.error.fire(le),se.parent?se.parent._reject(le):ce&&se.idbtrans&&se.idbtrans.abort(),xt(le)})})),this.Version=(q=this,Qo(Za.prototype,function(W){this.db=q,this._cfg={version:W,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Q=this,Qo(Nh.prototype,function(W,oe,X){if(this.db=Q,this._ctx={table:W,index:oe===":id"?null:oe,or:X},this._cmp=this._ascending=tt,this._descending=function(ee,te){return tt(te,ee)},this._max=function(ee,te){return 0<tt(ee,te)?ee:te},this._min=function(ee,te){return tt(ee,te)<0?ee:te},this._IDBKeyRange=Q._deps.IDBKeyRange,!this._IDBKeyRange)throw new Re.MissingAPI})),this.on("versionchange",function(W){0<W.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(W){!W.newVersion||W.newVersion<W.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(W.oldVersion/10))}),this._maxKey=Us(g.IDBKeyRange),this._createTransaction=function(W,oe,X,ee){return new v.Transaction(W,oe,X,v._options.chromeTransactionDurability,ee)},this._fireOnBlocked=function(W){v.on("blocked").fire(W),rs.filter(function(oe){return oe.name===v.name&&oe!==v&&!oe._state.vcFired}).map(function(oe){return oe.on("versionchange").fire(W)})},this.use(Au),this.use(SC),this.use(EC),this.use(Ar),this.use(Pi);var ie=new Proxy(this,{get:function(W,oe,X){if(oe==="_vip")return!0;if(oe==="table")return function(te){return Oh(v.table(te),ie)};var ee=Reflect.get(W,oe,X);return ee instanceof Go?Oh(ee,ie):oe==="tables"?ee.map(function(te){return Oh(te,ie)}):oe==="_createTransaction"?function(){return Oh(ee.apply(this,arguments),ie)}:ee}});this.vip=ie,E.forEach(function(W){return W(v)})}var jh,Pr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kC=(Qp.prototype.subscribe=function(p,g,v){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:g,complete:v})},Qp.prototype[Pr]=function(){return this},Qp);function Qp(p){this._subscribe=p}try{jh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{jh={indexedDB:null,IDBKeyRange:null}}function f_(p){var g,v=!1,E=new kC(function(k){var O=ne(p),z,q=!1,Q={},Y={},ie={get closed(){return q},unsubscribe:function(){q||(q=!0,z&&z.abort(),W&&Zr.storagemutated.unsubscribe(X))}};k.start&&k.start(ie);var W=!1,oe=function(){return qo(ee)},X=function(te){f(Q,te),x(Y,Q)&&oe()},ee=function(){var te,se,le;!q&&jh.indexedDB&&(Q={},te={},z&&z.abort(),z=new AbortController,le=function(ce){var me=ur();try{O&&Ti();var ye=Hr(p,ce);return ye=O?ye.finally(kr):ye}finally{me&&Vs()}}(se={subscr:te,signal:z.signal,requery:oe,querier:p,trans:null}),Promise.resolve(le).then(function(ce){v=!0,g=ce,q||se.signal.aborted||(Q={},function(me){for(var ye in me)if(h(me,ye))return;return 1}(Y=te)||W||(Zr(Jr,X),W=!0),qo(function(){return!q&&k.next&&k.next(ce)}))},function(ce){v=!1,["DatabaseClosedError","AbortError"].includes(ce==null?void 0:ce.name)||q||qo(function(){q||k.error&&k.error(ce)})}))};return setTimeout(oe,0),ie});return E.hasValue=function(){return v},E.getValue=function(){return g},E}var na=us;function Yp(p){var g=Gs;try{Gs=!0,Zr.storagemutated.fire(p),Te(p,!0)}finally{Gs=g}}m(na,i(i({},fn),{delete:function(p){return new na(p,{addons:[]}).delete()},exists:function(p){return new na(p,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return g=na.dependencies,v=g.indexedDB,g=g.IDBKeyRange,(ei(v)?Promise.resolve(v.databases()).then(function(E){return E.map(function(k){return k.name}).filter(function(k){return k!==Ho})}):el(v,g).toCollection().primaryKeys()).then(p)}catch{return xt(new Re.MissingAPI)}var g,v},defineClass:function(){return function(p){u(this,p)}},ignoreTransaction:function(p){return je.trans?Cr(je.transless,p):p()},vip:tl,async:function(p){return function(){try{var g=dt(p.apply(this,arguments));return g&&typeof g.then=="function"?g:ke.resolve(g)}catch(v){return xt(v)}}},spawn:function(p,g,v){try{var E=dt(p.apply(v,g||[]));return E&&typeof E.then=="function"?E:ke.resolve(E)}catch(k){return xt(k)}},currentTransaction:{get:function(){return je.trans||null}},waitFor:function(p,g){return g=ke.resolve(typeof p=="function"?na.ignoreTransaction(p):p).timeout(g||6e4),je.trans?je.trans.waitFor(g):g},Promise:ke,debug:{get:function(){return nn},set:function(p){$o(p)}},derive:I,extend:u,props:m,override:A,Events:Yr,on:Zr,liveQuery:f_,extendObservabilitySet:f,getByKeyPath:U,setByKeyPath:N,delByKeyPath:function(p,g){typeof g=="string"?N(p,g,void 0):"length"in g&&[].map.call(g,function(v){N(p,v,void 0)})},shallowClone:C,deepClone:j,getObjectDiff:ti,cmp:tt,asap:M,minKey:-1/0,addons:[],connections:rs,errnames:De,dependencies:jh,cache:S,semVer:"4.2.1",version:"4.2.1".split(".").map(function(p){return parseInt(p)}).reduce(function(p,g,v){return p+g/Math.pow(10,2*v)})})),na.maxKey=Us(na.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Zr(Jr,function(p){Gs||(p=new CustomEvent(ss,{detail:p}),Gs=!0,dispatchEvent(p),Gs=!1)}),addEventListener(ss,function(p){p=p.detail,Gs||Yp(p)}));var rl,Gs=!1,d_=function(){};return typeof BroadcastChannel<"u"&&((d_=function(){(rl=new BroadcastChannel(ss)).onmessage=function(p){return p.data&&Yp(p.data)}})(),typeof rl.unref=="function"&&rl.unref(),Zr(Jr,function(p){Gs||rl.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!us.disableBfCache&&p.persisted){nn&&console.debug("Dexie: handling persisted pagehide"),rl!=null&&rl.close();for(var g=0,v=rs;g<v.length;g++)v[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!us.disableBfCache&&p.persisted&&(nn&&console.debug("Dexie: handling persisted pageshow"),d_(),Yp({all:new rn(-1/0,[[]])}))})),ke.rejectionMapper=function(p,g){return!p||p instanceof ue||p instanceof TypeError||p instanceof SyntaxError||!p.name||!hn[p.name]?p:(g=new hn[p.name](g||p.message,p),"stack"in p&&w(g,"stack",{get:function(){return this.inner.stack}}),g)},$o(nn),i(us,Object.freeze({__proto__:null,Dexie:us,liveQuery:f_,Entity:wu,cmp:tt,PropModification:Qr,replacePrefix:function(p,g){return new Qr({replacePrefix:[p,g]})},add:function(p){return new Qr({add:p})},remove:function(p){return new Qr({remove:p})},default:us,RangeSet:rn,mergeRanges:Ni,rangesOverlap:kn}),{default:us}),us})})(h2);var oO=h2.exports;const Zg=Wd(oO),zw=Symbol.for("Dexie"),Kl=globalThis[zw]||(globalThis[zw]=Zg);if(Zg.semVer!==Kl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Zg.semVer} and ${Kl.semVer}`);const{liveQuery:U7,mergeRanges:$7,rangesOverlap:B7,RangeSet:q7,cmp:H7,Entity:K7,PropModification:W7,replacePrefix:G7,add:Q7,remove:Y7,DexieYProvider:X7}=Kl,bt=new Kl("NexusMindDB");bt.version(4).stores({contacts:"id, name, ocrText, phone, email, company, *tags, lastUpdated",settings:"id",schedules:"id, title, date, *contactIds, type"});function aO(n,e,r){var i,s;typeof n=="function"?(i=e||[],s=r):(i=[],s=e);var o=vt.useRef({hasResult:!1,result:s,error:null}),a=vt.useReducer(function(c){return c+1},0);a[0];var l=a[1],u=vt.useMemo(function(){var c=typeof n=="function"?n():n;if(!c||typeof c.subscribe!="function")throw n===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")o.current.result=c.getValue(),o.current.hasResult=!0;else{var d=c.subscribe(function(h){o.current.result=h,o.current.hasResult=!0});typeof d=="function"?d():d.unsubscribe()}return c},i);if(vt.useDebugValue(o.current.result),vt.useEffect(function(){var c=u.subscribe(function(d){var h=o.current;(h.error!==null||h.result!==d)&&(h.error=null,h.result=d,h.hasResult=!0,l())},function(d){var h=o.current;h.error!==d&&(h.error=d,l())});return typeof c=="function"?c:c.unsubscribe.bind(c)},i),o.current.error)throw o.current.error;return o.current.result}function Sf(n,e,r){return aO(function(){return Kl.liveQuery(n)},e||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=Kl.DexieYProvider;e&&e.release(n)});const lO=()=>{};var Uw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=function(n){const e=[];let r=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},uO=function(n){const e=[];let r=0,i=0;for(;r<n.length;){const s=n[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[r++],a=n[r++],l=n[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],a=n[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},d2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,d=o>>2,h=(o&3)<<4|l>>4;let m=(l&15)<<2|c>>6,_=c&63;u||(_=64,a||(m=64)),i.push(r[d],r[h],r[m],r[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(f2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=r[n.charAt(s++)],l=s<n.length?r[n.charAt(s)]:0;++s;const c=s<n.length?r[n.charAt(s)]:64;++s;const h=s<n.length?r[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||h==null)throw new cO;const m=o<<2|l>>4;if(i.push(m),c!==64){const _=l<<4&240|c>>2;if(i.push(_),h!==64){const w=c<<6&192|h;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class cO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hO=function(n){const e=f2(n);return d2.encodeByteArray(e,!0)},dd=function(n){return hO(n).replace(/\./g,"")},p2=function(n){try{return d2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=()=>fO().__FIREBASE_DEFAULTS__,pO=()=>{if(typeof process>"u"||typeof Uw>"u")return;const n=Uw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&p2(n[1]);return e&&JSON.parse(e)},dp=()=>{try{return lO()||dO()||pO()||mO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m2=n=>{var e,r;return(r=(e=dp())==null?void 0:e.emulatorHosts)==null?void 0:r[n]},gO=n=>{const e=m2(n);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},g2=()=>{var n;return(n=dp())==null?void 0:n.config},y2=n=>{var e;return(e=dp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v2(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[dd(JSON.stringify(r)),dd(JSON.stringify(a)),""].join(".")}const pc={};function _O(){const n={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?n.emulator.push(e):n.prod.push(e);return n}function wO(n){let e=document.getElementById(n),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),r=!0),{created:r,element:e}}let $w=!1;function _2(n,e){if(typeof window>"u"||typeof document>"u"||!lu(window.location.host)||pc[n]===e||pc[n]||$w)return;pc[n]=e;function r(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=_O().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{$w=!0,a()},m}function d(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=wO(i),_=r("text"),w=document.getElementById(_)||document.createElement("span"),I=r("learnmore"),P=document.getElementById(I)||document.createElement("a"),b=r("preprendIcon"),T=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const A=m.element;l(A),d(P,I);const R=c();u(T,b),A.append(T,w,P,R),document.body.appendChild(A)}o?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function bO(){var e;const n=(e=dp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function TO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IO(){const n=Vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function SO(){return!bO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x2(){try{return typeof indexedDB=="object"}catch{return!1}}function b2(){return new Promise((n,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function kO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="FirebaseError";class _i extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=CO,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?AO(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new _i(s,l,i)}}function AO(n,e){return n.replace(NO,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const NO=/\{\$([^}]+)}/g;function PO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e){if(n===e)return!0;const r=Object.keys(n),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(Bw(o)&&Bw(a)){if(!So(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Bw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(n){const e=[];for(const[r,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function RO(n,e){const r=new OO(n,e);return r.subscribe.bind(r)}class OO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");jO(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jO(n,e){if(typeof n!="object"||n===null)return!1;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1e3,MO=2,LO=4*60*60*1e3,VO=.5;function qw(n,e=DO,r=MO){const i=e*Math.pow(r,n),s=Math.round(VO*i*(Math.random()-.5)*2);return Math.min(LO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n){return n&&n._delegate?n._delegate:n}class vi{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new yO;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UO(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){const i=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zO(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zO(n){return n===la?void 0:n}function UO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new FO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const BO={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},qO=it.INFO,HO={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},KO=(n,e,...r)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=HO[e];if(s)console[s](`[${i}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=qO,this._logHandler=KO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const WO=(n,e)=>e.some(r=>n instanceof r);let Hw,Kw;function GO(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QO(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E2=new WeakMap,ey=new WeakMap,T2=new WeakMap,km=new WeakMap,Wv=new WeakMap;function YO(n){const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(wo(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&E2.set(r,n)}).catch(()=>{}),Wv.set(e,n),e}function XO(n){if(ey.has(n))return;const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});ey.set(n,e)}let ty={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T2.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wo(n[e])},set(n,e,r){return n[e]=r,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JO(n){ty=n(ty)}function ZO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=n.call(Cm(this),e,...r);return T2.set(i,e.sort?e.sort():[e]),wo(i)}:QO().includes(n)?function(...e){return n.apply(Cm(this),e),wo(E2.get(this))}:function(...e){return wo(n.apply(Cm(this),e))}}function e4(n){return typeof n=="function"?ZO(n):(n instanceof IDBTransaction&&XO(n),WO(n,GO())?new Proxy(n,ty):n)}function wo(n){if(n instanceof IDBRequest)return YO(n);if(km.has(n))return km.get(n);const e=e4(n);return e!==n&&(km.set(n,e),Wv.set(e,n)),e}const Cm=n=>Wv.get(n);function I2(n,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=wo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(wo(a.result),u.oldVersion,u.newVersion,wo(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const t4=["get","getKey","getAll","getAllKeys","count"],n4=["put","add","delete","clear"],Am=new Map;function Ww(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=n4.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||t4.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Am.set(e,o),o}JO(n=>({...n,get:(e,r,i)=>Ww(e,r)||n.get(e,r,i),has:(e,r)=>!!Ww(e,r)||n.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(i4(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function i4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ny="@firebase/app",Gw="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new pp("@firebase/app"),s4="@firebase/app-compat",o4="@firebase/analytics-compat",a4="@firebase/analytics",l4="@firebase/app-check-compat",u4="@firebase/app-check",c4="@firebase/auth",h4="@firebase/auth-compat",f4="@firebase/database",d4="@firebase/data-connect",p4="@firebase/database-compat",m4="@firebase/functions",g4="@firebase/functions-compat",y4="@firebase/installations",v4="@firebase/installations-compat",_4="@firebase/messaging",w4="@firebase/messaging-compat",x4="@firebase/performance",b4="@firebase/performance-compat",E4="@firebase/remote-config",T4="@firebase/remote-config-compat",I4="@firebase/storage",S4="@firebase/storage-compat",k4="@firebase/firestore",C4="@firebase/ai",A4="@firebase/firestore-compat",N4="firebase",P4="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",R4={[ny]:"fire-core",[s4]:"fire-core-compat",[a4]:"fire-analytics",[o4]:"fire-analytics-compat",[u4]:"fire-app-check",[l4]:"fire-app-check-compat",[c4]:"fire-auth",[h4]:"fire-auth-compat",[f4]:"fire-rtdb",[d4]:"fire-data-connect",[p4]:"fire-rtdb-compat",[m4]:"fire-fn",[g4]:"fire-fn-compat",[y4]:"fire-iid",[v4]:"fire-iid-compat",[_4]:"fire-fcm",[w4]:"fire-fcm-compat",[x4]:"fire-perf",[b4]:"fire-perf-compat",[E4]:"fire-rc",[T4]:"fire-rc-compat",[I4]:"fire-gcs",[S4]:"fire-gcs-compat",[k4]:"fire-fst",[A4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[N4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Map,O4=new Map,iy=new Map;function Qw(n,e){try{n.container.addComponent(e)}catch(r){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function Wi(n){const e=n.name;if(iy.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;iy.set(e,n);for(const r of pd.values())Qw(r,n);for(const r of O4.values())Qw(r,n);return!0}function Ua(n,e){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function ui(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new za("app","Firebase",j4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,r,i){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=P4;function S2(n,e={}){let r=n;typeof e!="object"&&(e={name:e});const i={name:ry,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw xo.create("bad-app-name",{appName:String(s)});if(r||(r=g2()),!r)throw xo.create("no-options");const o=pd.get(s);if(o){if(So(r,o.options)&&So(i,o.config))return o;throw xo.create("duplicate-app",{appName:s})}const a=new $O(s);for(const u of iy.values())a.addComponent(u);const l=new D4(r,i,a);return pd.set(s,l),l}function Gv(n=ry){const e=pd.get(n);if(!e&&n===ry&&g2())return S2();if(!e)throw xo.create("no-app",{appName:n});return e}function Ur(n,e,r){let i=R4[n]??n;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}Wi(new vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="firebase-heartbeat-database",L4=1,$c="firebase-heartbeat-store";let Nm=null;function k2(){return Nm||(Nm=I2(M4,L4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($c)}catch(r){console.warn(r)}}}}).catch(n=>{throw xo.create("idb-open",{originalErrorMessage:n.message})})),Nm}async function V4(n){try{const r=(await k2()).transaction($c),i=await r.objectStore($c).get(C2(n));return await r.done,i}catch(e){if(e instanceof _i)Ps.warn(e.message);else{const r=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(r.message)}}}async function Yw(n,e){try{const i=(await k2()).transaction($c,"readwrite");await i.objectStore($c).put(e,C2(n)),await i.done}catch(r){if(r instanceof _i)Ps.warn(r.message);else{const i=xo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ps.warn(i.message)}}}function C2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1024,z4=30;class U4{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new B4(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Xw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>z4){const a=q4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ps.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Xw(),{heartbeatsToSend:i,unsentEntries:s}=$4(this._heartbeatsCache.heartbeats),o=dd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Ps.warn(r),""}}}function Xw(){return new Date().toISOString().substring(0,10)}function $4(n,e=F4){const r=[];let i=n.slice();for(const s of n){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Jw(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Jw(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class B4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x2()?b2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await V4(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Yw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jw(n){return dd(JSON.stringify({version:2,heartbeats:n})).length}function q4(n){if(n.length===0)return-1;let e=0,r=n[0].date;for(let i=1;i<n.length;i++)n[i].date<r&&(r=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n){Wi(new vi("platform-logger",e=>new r4(e),"PRIVATE")),Wi(new vi("heartbeat",e=>new U4(e),"PRIVATE")),Ur(ny,Gw,n),Ur(ny,Gw,"esm2020"),Ur("fire-js","")}H4("");var K4="firebase",W4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur(K4,W4,"app");function A2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G4=A2,N2=new za("auth","Firebase",A2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new pp("@firebase/auth");function Q4(n,...e){md.logLevel<=it.WARN&&md.warn(`Auth (${uu}): ${n}`,...e)}function kf(n,...e){md.logLevel<=it.ERROR&&md.error(`Auth (${uu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n,...e){throw Yv(n,...e)}function mi(n,...e){return Yv(n,...e)}function Qv(n,e,r){const i={...G4(),[e]:r};return new za("auth","Firebase",i).create(e,{appName:n.name})}function xa(n){return Qv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y4(n,e,r){const i=r;if(!(e instanceof i))throw i.name!==e.constructor.name&&Gi(n,"argument-error"),Qv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yv(n,...e){if(typeof n!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(r,...i)}return N2.create(n,...e)}function qe(n,e,...r){if(!n)throw Yv(e,...r)}function ws(n){const e="INTERNAL ASSERTION FAILED: "+n;throw kf(e),new Error(e)}function Rs(n,e){n||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function X4(){return Zw()==="http:"||Zw()==="https:"}function Zw(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X4()||w2()||"connection"in navigator)?navigator.onLine:!0}function Z4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,r){this.shortDelay=e,this.longDelay=r,Rs(r>e,"Short delay should be less than long delay!"),this.isMobile=xO()||TO()}get(){return J4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nj=new ch(3e4,6e4);function Jv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function cu(n,e,r,i,s={}){return R2(n,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=uh({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:u,...o};return EO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&lu(n.emulatorConfig.host)&&(c.credentials="include"),P2.fetch()(await O2(n,n.config.apiHost,r,l),c)})}async function R2(n,e,r){n._canInitEmulator=!1;const i={...ej,...e};try{const s=new ij(n),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw ef(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ef(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw ef(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw ef(n,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Qv(n,d,c);Gi(n,d)}}catch(s){if(s instanceof _i)throw s;Gi(n,"network-request-failed",{message:String(s)})}}async function rj(n,e,r,i,s={}){const o=await cu(n,e,r,i,s);return"mfaPendingCredential"in o&&Gi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function O2(n,e,r,i){const s=`${e}${r}?${i}`,o=n,a=o.config.emulator?Xv(n.config,s):`${n.config.apiScheme}://${s}`;return tj.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class ij{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),nj.get())})}}function ef(n,e,r){const i={appName:n.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=mi(n,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n,e){return cu(n,"POST","/v1/accounts:delete",e)}async function gd(n,e){return cu(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oj(n,e=!1){const r=tn(n),i=await r.getIdToken(e),s=Zv(i);qe(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:mc(Pm(s.auth_time)),issuedAtTime:mc(Pm(s.iat)),expirationTime:mc(Pm(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Pm(n){return Number(n)*1e3}function Zv(n){const[e,r,i]=n.split(".");if(e===void 0||r===void 0||i===void 0)return kf("JWT malformed, contained fewer than 3 sections"),null;try{const s=p2(r);return s?JSON.parse(s):(kf("Failed to decode base64 JWT payload"),null)}catch(s){return kf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ex(n){const e=Zv(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(n,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof _i&&aj(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(n){var h;const e=n.auth,r=await n.getIdToken(),i=await Bc(n,gd(e,{idToken:r}));qe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(h=s.providerUserInfo)!=null&&h.length?j2(s.providerUserInfo):[],a=cj(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new oy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function uj(n){const e=tn(n);await yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cj(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function j2(n){return n.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(n,e){const r=await R2(n,{},async()=>{const i=uh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await O2(n,s,"/v1/token",`key=${o}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return n.emulatorConfig&&lu(n.emulatorConfig.host)&&(u.credentials="include"),P2.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function fj(n,e){return cu(n,"POST","/v2/accounts:revokeToken",Jv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ex(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const r=ex(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await hj(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new Nl;return i&&(qe(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(qe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(qe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hi{constructor({uid:e,auth:r,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new lj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return qe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return oj(this,e)}reload(){return uj(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await yd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(xa(this.auth));const e=await this.getIdToken();return await Bc(this,sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const i=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,c=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:_,providerData:w,stsTokenManager:I}=r;qe(h&&I,e,"internal-error");const P=Nl.fromJSON(this.name,I);qe(typeof h=="string",e,"internal-error"),Ys(i,e.name),Ys(s,e.name),qe(typeof m=="boolean",e,"internal-error"),qe(typeof _=="boolean",e,"internal-error"),Ys(o,e.name),Ys(a,e.name),Ys(l,e.name),Ys(u,e.name),Ys(c,e.name),Ys(d,e.name);const b=new hi({uid:h,auth:e,email:s,emailVerified:m,displayName:i,isAnonymous:_,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:P,createdAt:c,lastLoginAt:d});return w&&Array.isArray(w)&&(b.providerData=w.map(T=>({...T}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,r,i=!1){const s=new Nl;s.updateFromServerResponse(r);const o=new hi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await yd(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];qe(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?j2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Nl;l.updateFromIdToken(i);const u=new hi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new oy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;function xs(n){Rs(n instanceof Function,"Expected a class definition");let e=tx.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}D2.type="NONE";const nx=D2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n,e,r){return`firebase:${n}:${e}:${r}`}class Pl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Cf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Cf("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await gd(this.auth,{idToken:e}).catch(()=>{});return r?hi._fromGetAccountInfoResponse(this.auth,r,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Pl(xs(nx),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||xs(nx);const a=Cf(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(a);if(d){let h;if(typeof d=="string"){const m=await gd(e,{idToken:d}).catch(()=>{});if(!m)break;h=await hi._fromGetAccountInfoResponse(e,m,d)}else h=hi._fromJSON(e,d);c!==o&&(l=h),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Pl(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Pl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U2(e))return"Blackberry";if($2(e))return"Webos";if(L2(e))return"Safari";if((e.includes("chrome/")||V2(e))&&!e.includes("edge/"))return"Chrome";if(z2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function M2(n=Vn()){return/firefox\//i.test(n)}function L2(n=Vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V2(n=Vn()){return/crios\//i.test(n)}function F2(n=Vn()){return/iemobile/i.test(n)}function z2(n=Vn()){return/android/i.test(n)}function U2(n=Vn()){return/blackberry/i.test(n)}function $2(n=Vn()){return/webos/i.test(n)}function e0(n=Vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dj(n=Vn()){var e;return e0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function pj(){return IO()&&document.documentMode===10}function B2(n=Vn()){return e0(n)||z2(n)||$2(n)||U2(n)||/windows phone/i.test(n)||F2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n,e=[]){let r;switch(n){case"Browser":r=rx(Vn());break;case"Worker":r=`${rx(Vn())}-${n}`;break;default:r=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${uu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(n,e={}){return cu(n,"GET","/v2/passwordPolicy",Jv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=6;class vj{constructor(e){var i;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??yj,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ix(this),this.idTokenSubscription=new ix(this),this.beforeStateQueue=new mj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=xs(r)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await gd(this,{idToken:e}),i=await hi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ui(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await yd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(xa(this));const r=e?tn(e):null;return r&&qe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gj(this),r=new vj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await fj(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&xs(e)||this._popupRedirectResolver;qe(r,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[xs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var r;if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&Q4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mp(n){return tn(n)}class ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=RO(r=>this.observer=r)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wj(n){t0=n}function xj(n){return t0.loadJS(n)}function bj(){return t0.gapiScript}function Ej(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(n,e){const r=Ua(n,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(So(o,e??{}))return s;Gi(s,"already-initialized")}return r.initialize({options:e})}function Ij(n,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(xs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Sj(n,e,r){const i=mp(n);qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=H2(e),{host:a,port:l}=kj(e),u=l===null?"":`:${l}`,c={url:`${o}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),qe(So(c,i.config.emulator)&&So(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,lu(a)?(v2(`${o}//${a}${u}`),_2("Auth",!0)):Cj()}function H2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kj(n){const e=H2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:sx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:sx(a)}}}function sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Cj(){function n(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,r){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(n,e){return rj(n,"POST","/v1/accounts:signInWithIdp",Jv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="http://localhost";class Pa extends K2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Gi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=r;if(!i||!s)return null;const a=new Pa(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Rl(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Rl(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Rl(e,r)}buildRequest(){const e={requestUri:Aj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=uh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends n0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends hh{constructor(){super("facebook.com")}static credential(e){return Pa._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.FACEBOOK_SIGN_IN_METHOD="facebook.com";io.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Pa._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return ys.credential(r,i)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends hh{constructor(){super("github.com")}static credential(e){return Pa._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends hh{constructor(){super("twitter.com")}static credential(e,r){return Pa._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return oo.credential(r,i)}catch{return null}}}oo.TWITTER_SIGN_IN_METHOD="twitter.com";oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await hi._fromIdTokenResponse(e,i,s),a=ox(i);return new Wl({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=ox(i);return new Wl({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function ox(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends _i{constructor(e,r,i,s){super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new vd(e,r,i,s)}}function W2(n,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vd._fromErrorAndOperation(n,o,e,i):o})}async function Nj(n,e,r=!1){const i=await Bc(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Wl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(n,e,r=!1){const{auth:i}=n;if(ui(i.app))return Promise.reject(xa(i));const s="reauthenticate";try{const o=await Bc(n,W2(i,s,e,n),r);qe(o.idToken,i,"internal-error");const a=Zv(o.idToken);qe(a,i,"internal-error");const{sub:l}=a;return qe(n.uid===l,i,"user-mismatch"),Wl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Gi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(n,e,r=!1){if(ui(n.app))return Promise.reject(xa(n));const i="signIn",s=await W2(n,i,e),o=await Wl._fromIdTokenResponse(n,i,s);return r||await n._updateCurrentUser(o.user),o}function Oj(n,e,r,i){return tn(n).onIdTokenChanged(e,r,i)}function jj(n,e,r){return tn(n).beforeAuthStateChanged(e,r)}function Dj(n,e,r,i){return tn(n).onAuthStateChanged(e,r,i)}function Mj(n){return tn(n).signOut()}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=1e3,Vj=10;class Q2 extends G2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);pj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Vj):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},Lj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q2.type="LOCAL";const Fj=Q2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2 extends G2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Y2.type="SESSION";const X2=Y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new gp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await zj(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=r0("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function $j(n){$i().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function Bj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Hj(){return J2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebaseLocalStorageDb",Kj=1,wd="firebaseLocalStorage",eI="fbase_key";class fh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function yp(n,e){return n.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function Wj(){const n=indexedDB.deleteDatabase(Z2);return new fh(n).toPromise()}function ay(){const n=indexedDB.open(Z2,Kj);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(wd,{keyPath:eI})}catch(s){r(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(wd)?e(i):(i.close(),await Wj(),e(await ay()))})})}async function ax(n,e,r){const i=yp(n,!0).put({[eI]:e,value:r});return new fh(i).toPromise()}async function Gj(n,e){const r=yp(n,!1).get(e),i=await new fh(r).toPromise();return i===void 0?null:i.value}function lx(n,e){const r=yp(n,!0).delete(e);return new fh(r).toPromise()}const Qj=800,Yj=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>Yj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gp._getInstance(Hj()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await Bj(),!this.activeServiceWorker)return;this.sender=new Uj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await ax(e,_d,"1"),await lx(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>ax(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>Gj(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=yp(s,!1).getAll();return new fh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const Xj=tI;new ch(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e){return e?xs(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends K2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Rl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Jj(n){return Rj(n.auth,new i0(n),n.bypassAuthState)}function Zj(n){const{auth:e,user:r}=n;return qe(r,e,"internal-error"),Pj(r,new i0(n),n.bypassAuthState)}async function eD(n){const{auth:e,user:r}=n;return qe(r,e,"internal-error"),Nj(r,new i0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jj;case"linkViaPopup":case"linkViaRedirect":return eD;case"reauthViaPopup":case"reauthViaRedirect":return Zj;default:Gi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new ch(2e3,1e4);async function nD(n,e,r){if(ui(n.app))return Promise.reject(mi(n,"operation-not-supported-in-this-environment"));const i=mp(n);Y4(n,e,n0);const s=nI(i,r);return new pa(i,"signInViaPopup",e,s).executeNotNull()}class pa extends rI{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=r0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tD.get())};e()}}pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="pendingRedirect",Af=new Map;class iD extends rI{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const i=await sD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sD(n,e){const r=lD(e),i=aD(n);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function oD(n,e){Af.set(n._key(),e)}function aD(n){return xs(n._redirectPersistence)}function lD(n){return Cf(rD,n.config.apiKey,n.name)}async function uD(n,e,r=!1){if(ui(n.app))return Promise.reject(xa(n));const i=mp(n),s=nI(i,e),a=await new iD(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=10*60*1e3;class hD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!iI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(mi(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ux(e))}saveEventToCache(e){this.cachedEventUids.add(ux(e)),this.lastProcessedEventTime=Date.now()}}function ux(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(n,e={}){return cu(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mD=/^https?/;async function gD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dD(n);for(const r of e)try{if(yD(r))return}catch{}Gi(n,"unauthorized-domain")}function yD(n){const e=sy(),{protocol:r,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!mD.test(r))return!1;if(pD.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new ch(3e4,6e4);function cx(){const n=$i().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function _D(n){return new Promise((e,r)=>{var s,o,a;function i(){cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cx(),r(mi(n,"network-request-failed"))},timeout:vD.get()})}if((o=(s=$i().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=$i().gapi)!=null&&a.load)i();else{const l=Ej("iframefcb");return $i()[l]=()=>{gapi.load?i():r(mi(n,"network-request-failed"))},xj(`${bj()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Nf=null,e})}let Nf=null;function wD(n){return Nf=Nf||_D(n),Nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new ch(5e3,15e3),bD="__/auth/iframe",ED="emulator/auth/iframe",TD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ID=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SD(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const r=e.emulator?Xv(e,ED):`https://${n.config.authDomain}/${bD}`,i={apiKey:e.apiKey,appName:n.name,v:uu},s=ID.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${uh(i).slice(1)}`}async function kD(n){const e=await wD(n),r=$i().gapi;return qe(r,n,"internal-error"),e.open({where:document.body,url:SD(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TD,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=mi(n,"network-request-failed"),l=$i().setTimeout(()=>{o(a)},xD.get());function u(){$i().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AD=500,ND=600,PD="_blank",RD="http://localhost";class hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OD(n,e,r,i=AD,s=ND){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...CD,width:i.toString(),height:s.toString(),top:o,left:a},c=Vn().toLowerCase();r&&(l=V2(c)?PD:r),M2(c)&&(e=e||RD,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[_,w])=>`${m}${_}=${w},`,"");if(dj(c)&&l!=="_self")return jD(e||"",l),new hx(null);const h=window.open(e||"",l,d);qe(h,n,"popup-blocked");try{h.focus()}catch{}return new hx(h)}function jD(n,e){const r=document.createElement("a");r.href=n,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD="__/auth/handler",MD="emulator/auth/handler",LD=encodeURIComponent("fac");async function fx(n,e,r,i,s,o){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:i,v:uu,eventId:s};if(e instanceof n0){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",PO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))a[d]=h}if(e instanceof hh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await n._getAppCheckToken(),c=u?`#${LD}=${encodeURIComponent(u)}`:"";return`${VD(n)}?${uh(l).slice(1)}${c}`}function VD({config:n}){return n.emulator?Xv(n,MD):`https://${n.authDomain}/${DD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="webStorageSupport";class FD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X2,this._completeRedirectFn=uD,this._overrideRedirectResult=oD}async _openPopup(e,r,i,s){var a;Rs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await fx(e,r,i,sy(),s);return OD(e,o,r0())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await fx(e,r,i,sy(),s);return $j(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Rs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await kD(e),i=new hD(e);return r.register("authEvent",s=>(qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Rm,{type:Rm},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[Rm];o!==void 0&&r(!!o),Gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=gD(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return B2()||L2()||e0()}}const zD=FD;var dx="@firebase/auth",px="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BD(n){Wi(new vi("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;qe(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q2(n)},c=new _j(i,s,o,u);return Ij(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Wi(new vi("auth-internal",e=>{const r=mp(e.getProvider("auth").getImmediate());return(i=>new UD(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(dx,px,$D(n)),Ur(dx,px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=5*60,HD=y2("authIdTokenMaxAge")||qD;let mx=null;const KD=n=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>HD)return;const s=r==null?void 0:r.token;mx!==s&&(mx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function WD(n=Gv()){const e=Ua(n,"auth");if(e.isInitialized())return e.getImmediate();const r=Tj(n,{popupRedirectResolver:zD,persistence:[Xj,Fj,X2]}),i=y2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=KD(o.toString());jj(r,a,()=>a(r.currentUser)),Oj(r,l=>a(l))}}const s=m2("auth");return s&&Sj(r,`http://${s}`),r}function GD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}wj({loadJS(n){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=mi("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",GD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BD("Browser");var gx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,sI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function D(){}D.prototype=C.prototype,N.F=C.prototype,N.prototype=new D,N.prototype.constructor=N,N.D=function(L,V,B){for(var j=Array(arguments.length-2),K=2;K<arguments.length;K++)j[K-2]=arguments[K];return C.prototype[V].apply(L,j)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,C,D){D||(D=0);const L=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)L[V]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(V=0;V<16;++V)L[V]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=N.g[0],D=N.g[1],V=N.g[2];let B=N.g[3],j;j=C+(B^D&(V^B))+L[0]+3614090360&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(V^C&(D^V))+L[1]+3905402710&4294967295,B=C+(j<<12&4294967295|j>>>20),j=V+(D^B&(C^D))+L[2]+606105819&4294967295,V=B+(j<<17&4294967295|j>>>15),j=D+(C^V&(B^C))+L[3]+3250441966&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+(B^D&(V^B))+L[4]+4118548399&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(V^C&(D^V))+L[5]+1200080426&4294967295,B=C+(j<<12&4294967295|j>>>20),j=V+(D^B&(C^D))+L[6]+2821735955&4294967295,V=B+(j<<17&4294967295|j>>>15),j=D+(C^V&(B^C))+L[7]+4249261313&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+(B^D&(V^B))+L[8]+1770035416&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(V^C&(D^V))+L[9]+2336552879&4294967295,B=C+(j<<12&4294967295|j>>>20),j=V+(D^B&(C^D))+L[10]+4294925233&4294967295,V=B+(j<<17&4294967295|j>>>15),j=D+(C^V&(B^C))+L[11]+2304563134&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+(B^D&(V^B))+L[12]+1804603682&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(V^C&(D^V))+L[13]+4254626195&4294967295,B=C+(j<<12&4294967295|j>>>20),j=V+(D^B&(C^D))+L[14]+2792965006&4294967295,V=B+(j<<17&4294967295|j>>>15),j=D+(C^V&(B^C))+L[15]+1236535329&4294967295,D=V+(j<<22&4294967295|j>>>10),j=C+(V^B&(D^V))+L[1]+4129170786&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^V&(C^D))+L[6]+3225465664&4294967295,B=C+(j<<9&4294967295|j>>>23),j=V+(C^D&(B^C))+L[11]+643717713&4294967295,V=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(V^B))+L[0]+3921069994&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(V^B&(D^V))+L[5]+3593408605&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^V&(C^D))+L[10]+38016083&4294967295,B=C+(j<<9&4294967295|j>>>23),j=V+(C^D&(B^C))+L[15]+3634488961&4294967295,V=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(V^B))+L[4]+3889429448&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(V^B&(D^V))+L[9]+568446438&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^V&(C^D))+L[14]+3275163606&4294967295,B=C+(j<<9&4294967295|j>>>23),j=V+(C^D&(B^C))+L[3]+4107603335&4294967295,V=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(V^B))+L[8]+1163531501&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(V^B&(D^V))+L[13]+2850285829&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^V&(C^D))+L[2]+4243563512&4294967295,B=C+(j<<9&4294967295|j>>>23),j=V+(C^D&(B^C))+L[7]+1735328473&4294967295,V=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(V^B))+L[12]+2368359562&4294967295,D=V+(j<<20&4294967295|j>>>12),j=C+(D^V^B)+L[5]+4294588738&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^V)+L[8]+2272392833&4294967295,B=C+(j<<11&4294967295|j>>>21),j=V+(B^C^D)+L[11]+1839030562&4294967295,V=B+(j<<16&4294967295|j>>>16),j=D+(V^B^C)+L[14]+4259657740&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(D^V^B)+L[1]+2763975236&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^V)+L[4]+1272893353&4294967295,B=C+(j<<11&4294967295|j>>>21),j=V+(B^C^D)+L[7]+4139469664&4294967295,V=B+(j<<16&4294967295|j>>>16),j=D+(V^B^C)+L[10]+3200236656&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(D^V^B)+L[13]+681279174&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^V)+L[0]+3936430074&4294967295,B=C+(j<<11&4294967295|j>>>21),j=V+(B^C^D)+L[3]+3572445317&4294967295,V=B+(j<<16&4294967295|j>>>16),j=D+(V^B^C)+L[6]+76029189&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(D^V^B)+L[9]+3654602809&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^V)+L[12]+3873151461&4294967295,B=C+(j<<11&4294967295|j>>>21),j=V+(B^C^D)+L[15]+530742520&4294967295,V=B+(j<<16&4294967295|j>>>16),j=D+(V^B^C)+L[2]+3299628645&4294967295,D=V+(j<<23&4294967295|j>>>9),j=C+(V^(D|~B))+L[0]+4096336452&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~V))+L[7]+1126891415&4294967295,B=C+(j<<10&4294967295|j>>>22),j=V+(C^(B|~D))+L[14]+2878612391&4294967295,V=B+(j<<15&4294967295|j>>>17),j=D+(B^(V|~C))+L[5]+4237533241&4294967295,D=V+(j<<21&4294967295|j>>>11),j=C+(V^(D|~B))+L[12]+1700485571&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~V))+L[3]+2399980690&4294967295,B=C+(j<<10&4294967295|j>>>22),j=V+(C^(B|~D))+L[10]+4293915773&4294967295,V=B+(j<<15&4294967295|j>>>17),j=D+(B^(V|~C))+L[1]+2240044497&4294967295,D=V+(j<<21&4294967295|j>>>11),j=C+(V^(D|~B))+L[8]+1873313359&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~V))+L[15]+4264355552&4294967295,B=C+(j<<10&4294967295|j>>>22),j=V+(C^(B|~D))+L[6]+2734768916&4294967295,V=B+(j<<15&4294967295|j>>>17),j=D+(B^(V|~C))+L[13]+1309151649&4294967295,D=V+(j<<21&4294967295|j>>>11),j=C+(V^(D|~B))+L[4]+4149444226&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~V))+L[11]+3174756917&4294967295,B=C+(j<<10&4294967295|j>>>22),j=V+(C^(B|~D))+L[2]+718787259&4294967295,V=B+(j<<15&4294967295|j>>>17),j=D+(B^(V|~C))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(V+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+B&4294967295}i.prototype.v=function(N,C){C===void 0&&(C=N.length);const D=C-this.blockSize,L=this.C;let V=this.h,B=0;for(;B<C;){if(V==0)for(;B<=D;)s(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<C;)if(L[V++]=N.charCodeAt(B++),V==this.blockSize){s(this,L),V=0;break}}else for(;B<C;)if(L[V++]=N[B++],V==this.blockSize){s(this,L),V=0;break}}this.h=V,this.o+=C},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var D=N.length-8;D<N.length;++D)N[D]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,D=0;D<4;++D)for(let L=0;L<32;L+=8)N[C++]=this.g[D]>>>L&255;return N};function o(N,C){var D=l;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=C(N)}function a(N,C){this.h=C;const D=[];let L=!0;for(let V=N.length-1;V>=0;V--){const B=N[V]|0;L&&B==C||(D[V]=B,L=!1)}this.g=D}var l={};function u(N){return-128<=N&&N<128?o(N,function(C){return new a([C|0],C<0?-1:0)}):new a([N|0],N<0?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return h;if(N<0)return P(c(-N));const C=[];let D=1;for(let L=0;N>=D;L++)C[L]=N/D|0,D*=4294967296;return new a(C,0)}function d(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return P(d(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=c(Math.pow(C,8));let L=h;for(let B=0;B<N.length;B+=8){var V=Math.min(8,N.length-B);const j=parseInt(N.substring(B,B+V),C);V<8?(V=c(Math.pow(C,V)),L=L.j(V).add(c(j))):(L=L.j(D),L=L.add(c(j)))}return L}var h=u(0),m=u(1),_=u(16777216);n=a.prototype,n.m=function(){if(I(this))return-P(this).m();let N=0,C=1;for(let D=0;D<this.g.length;D++){const L=this.i(D);N+=(L>=0?L:4294967296+L)*C,C*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(I(this))return"-"+P(this).toString(N);const C=c(Math.pow(N,6));var D=this;let L="";for(;;){const V=R(D,C).g;D=b(D,V.j(C));let B=((D.g.length>0?D.g[0]:D.h)>>>0).toString(N);if(D=V,w(D))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function I(N){return N.h==-1}n.l=function(N){return N=b(this,N),I(N)?-1:w(N)?0:1};function P(N){const C=N.g.length,D=[];for(let L=0;L<C;L++)D[L]=~N.g[L];return new a(D,~N.h).add(m)}n.abs=function(){return I(this)?P(this):this},n.add=function(N){const C=Math.max(this.g.length,N.g.length),D=[];let L=0;for(let V=0;V<=C;V++){let B=L+(this.i(V)&65535)+(N.i(V)&65535),j=(B>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);L=j>>>16,B&=65535,j&=65535,D[V]=j<<16|B}return new a(D,D[D.length-1]&-2147483648?-1:0)};function b(N,C){return N.add(P(C))}n.j=function(N){if(w(this)||w(N))return h;if(I(this))return I(N)?P(this).j(P(N)):P(P(this).j(N));if(I(N))return P(this.j(P(N)));if(this.l(_)<0&&N.l(_)<0)return c(this.m()*N.m());const C=this.g.length+N.g.length,D=[];for(var L=0;L<2*C;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<N.g.length;V++){const B=this.i(L)>>>16,j=this.i(L)&65535,K=N.i(V)>>>16,G=N.i(V)&65535;D[2*L+2*V]+=j*G,T(D,2*L+2*V),D[2*L+2*V+1]+=B*G,T(D,2*L+2*V+1),D[2*L+2*V+1]+=j*K,T(D,2*L+2*V+1),D[2*L+2*V+2]+=B*K,T(D,2*L+2*V+2)}for(N=0;N<C;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=C;N<2*C;N++)D[N]=0;return new a(D,0)};function T(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function A(N,C){this.g=N,this.h=C}function R(N,C){if(w(C))throw Error("division by zero");if(w(N))return new A(h,h);if(I(N))return C=R(P(N),C),new A(P(C.g),P(C.h));if(I(C))return C=R(N,P(C)),new A(P(C.g),C.h);if(N.g.length>30){if(I(N)||I(C))throw Error("slowDivide_ only works with positive integers.");for(var D=m,L=C;L.l(N)<=0;)D=M(D),L=M(L);var V=U(D,1),B=U(L,1);for(L=U(L,2),D=U(D,2);!w(L);){var j=B.add(L);j.l(N)<=0&&(V=V.add(D),B=j),L=U(L,1),D=U(D,1)}return C=b(N,V.j(C)),new A(V,C)}for(V=h;N.l(C)>=0;){for(D=Math.max(1,Math.floor(N.m()/C.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=c(D),j=B.j(C);I(j)||j.l(N)>0;)D-=L,B=c(D),j=B.j(C);w(B)&&(B=m),V=V.add(B),N=b(N,j)}return new A(V,N)}n.B=function(N){return R(this,N).h},n.and=function(N){const C=Math.max(this.g.length,N.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)&N.i(L);return new a(D,this.h&N.h)},n.or=function(N){const C=Math.max(this.g.length,N.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)|N.i(L);return new a(D,this.h|N.h)},n.xor=function(N){const C=Math.max(this.g.length,N.g.length),D=[];for(let L=0;L<C;L++)D[L]=this.i(L)^N.i(L);return new a(D,this.h^N.h)};function M(N){const C=N.g.length+1,D=[];for(let L=0;L<C;L++)D[L]=N.i(L)<<1|N.i(L-1)>>>31;return new a(D,N.h)}function U(N,C){const D=C>>5;C%=32;const L=N.g.length-D,V=[];for(let B=0;B<L;B++)V[B]=C>0?N.i(B+D)>>>C|N.i(B+D+1)<<32-C:N.i(B+D);return new a(V,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,bo=a}).apply(typeof gx<"u"?gx:typeof self<"u"?self:typeof window<"u"?window:{});var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,Xu,aI,Pf,ly,lI,uI,cI;(function(){var n,e=Object.defineProperty;function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof tf=="object"&&tf];for(var x=0;x<f.length;++x){var S=f[x];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=r(this);function s(f,x){if(x)e:{var S=i;f=f.split(".");for(var F=0;F<f.length-1;F++){var ae=f[F];if(!(ae in S))break e;S=S[ae]}f=f[f.length-1],F=S[f],x=x(F),x!=F&&x!=null&&e(S,f,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(x){var S=[],F;for(F in x)Object.prototype.hasOwnProperty.call(x,F)&&S.push([F,x[F]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function u(f,x,S){return f.call.apply(f.bind,arguments)}function c(f,x,S){return c=u,c.apply(null,arguments)}function d(f,x){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function h(f,x){function S(){}S.prototype=x.prototype,f.Z=x.prototype,f.prototype=new S,f.prototype.constructor=f,f.Ob=function(F,ae,he){for(var Te=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Te[Ge-2]=arguments[Ge];return x.prototype[ae].apply(F,Te)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function _(f){const x=f.length;if(x>0){const S=Array(x);for(let F=0;F<x;F++)S[F]=f[F];return S}return[]}function w(f,x){for(let F=1;F<arguments.length;F++){const ae=arguments[F];var S=typeof ae;if(S=S!="object"?S:ae?Array.isArray(ae)?"array":S:"null",S=="array"||S=="object"&&typeof ae.length=="number"){S=f.length||0;const he=ae.length||0;f.length=S+he;for(let Te=0;Te<he;Te++)f[S+Te]=ae[Te]}else f.push(ae)}}class I{constructor(x,S){this.i=x,this.j=S,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function P(f){a.setTimeout(()=>{throw f},0)}function b(){var f=N;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class T{constructor(){this.h=this.g=null}add(x,S){const F=A.get();F.set(x,S),this.h?this.h.next=F:this.g=F,this.h=F}}var A=new I(()=>new R,f=>f.reset());class R{constructor(){this.next=this.g=this.h=null}set(x,S){this.h=x,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let M,U=!1,N=new T,C=()=>{const f=Promise.resolve(void 0);M=()=>{f.then(D)}};function D(){for(var f;f=b();){try{f.h.call(f.g)}catch(S){P(S)}var x=A;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}U=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};a.addEventListener("test",S,x),a.removeEventListener("test",S,x)}catch{}return f}();function j(f){return/^[\s\xa0]*$/.test(f)}function K(f,x){V.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}h(K,V),K.prototype.init=function(f,x){const S=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(S=="mouseover"?x=f.fromElement:S=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),Z=0;function pe(f,x,S,F,ae){this.listener=f,this.proxy=null,this.src=x,this.type=S,this.capture=!!F,this.ha=ae,this.key=++Z,this.da=this.fa=!1}function re(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function H(f,x,S){for(const F in f)x.call(S,f[F],F,f)}function $(f,x){for(const S in f)x.call(void 0,f[S],S,f)}function ne(f){const x={};for(const S in f)x[S]=f[S];return x}const fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(f,x){let S,F;for(let ae=1;ae<arguments.length;ae++){F=arguments[ae];for(S in F)f[S]=F[S];for(let he=0;he<fe.length;he++)S=fe[he],Object.prototype.hasOwnProperty.call(F,S)&&(f[S]=F[S])}}function ge(f){this.src=f,this.g={},this.h=0}ge.prototype.add=function(f,x,S,F,ae){const he=f.toString();f=this.g[he],f||(f=this.g[he]=[],this.h++);const Te=Le(f,x,F,ae);return Te>-1?(x=f[Te],S||(x.fa=!1)):(x=new pe(x,this.src,he,!!F,ae),x.fa=S,f.push(x)),x};function Oe(f,x){const S=x.type;if(S in f.g){var F=f.g[S],ae=Array.prototype.indexOf.call(F,x,void 0),he;(he=ae>=0)&&Array.prototype.splice.call(F,ae,1),he&&(re(x),f.g[S].length==0&&(delete f.g[S],f.h--))}}function Le(f,x,S,F){for(let ae=0;ae<f.length;++ae){const he=f[ae];if(!he.da&&he.listener==x&&he.capture==!!S&&he.ha==F)return ae}return-1}var De="closure_lm_"+(Math.random()*1e6|0),He={};function Re(f,x,S,F,ae){if(Array.isArray(x)){for(let he=0;he<x.length;he++)Re(f,x[he],S,F,ae);return null}return S=mu(S),f&&f[G]?f.J(x,S,l(F)?!!F.capture:!1,ae):hn(f,x,S,!1,F,ae)}function hn(f,x,S,F,ae,he){if(!x)throw Error("Invalid event type");const Te=l(ae)?!!ae.capture:!!ae;let Ge=Tn(f);if(Ge||(f[De]=Ge=new ge(f)),S=Ge.add(x,S,F,Te,he),S.proxy)return S;if(F=fn(),S.proxy=F,F.src=f,F.listener=S,f.addEventListener)B||(ae=Te),ae===void 0&&(ae=!1),f.addEventListener(x.toString(),F,ae);else if(f.attachEvent)f.attachEvent(Je(x.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function fn(){function f(S){return x.call(f.src,f.listener,S)}const x=_t;return f}function ut(f,x,S,F,ae){if(Array.isArray(x))for(var he=0;he<x.length;he++)ut(f,x[he],S,F,ae);else F=l(F)?!!F.capture:!!F,S=mu(S),f&&f[G]?(f=f.i,he=String(x).toString(),he in f.g&&(x=f.g[he],S=Le(x,S,F,ae),S>-1&&(re(x[S]),Array.prototype.splice.call(x,S,1),x.length==0&&(delete f.g[he],f.h--)))):f&&(f=Tn(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Le(x,S,F,ae)),(S=f>-1?x[f]:null)&&Ie(S))}function Ie(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[G])Oe(x.i,f);else{var S=f.type,F=f.proxy;x.removeEventListener?x.removeEventListener(S,F,f.capture):x.detachEvent?x.detachEvent(Je(S),F):x.addListener&&x.removeListener&&x.removeListener(F),(S=Tn(x))?(Oe(S,f),S.h==0&&(S.src=null,x[De]=null)):re(f)}}}function Je(f){return f in He?He[f]:He[f]="on"+f}function _t(f,x){if(f.da)f=!0;else{x=new K(x,this);const S=f.listener,F=f.ha||f.src;f.fa&&Ie(f),f=S.call(F,x)}return f}function Tn(f){return f=f[De],f instanceof ge?f:null}var Uo="__closure_events_fn_"+(Math.random()*1e9>>>0);function mu(f){return typeof f=="function"?f:(f[Uo]||(f[Uo]=function(x){return f.handleEvent(x)}),f[Uo])}function Vt(){L.call(this),this.i=new ge(this),this.M=this,this.G=null}h(Vt,L),Vt.prototype[G]=!0,Vt.prototype.removeEventListener=function(f,x,S,F){ut(this,f,x,S,F)};function Gt(f,x){var S,F=f.G;if(F)for(S=[];F;F=F.G)S.push(F);if(f=f.M,F=x.type||x,typeof x=="string")x=new V(x,f);else if(x instanceof V)x.target=x.target||f;else{var ae=x;x=new V(F,f),ue(x,ae)}ae=!0;let he,Te;if(S)for(Te=S.length-1;Te>=0;Te--)he=x.g=S[Te],ae=nn(he,F,!0,x)&&ae;if(he=x.g=f,ae=nn(he,F,!0,x)&&ae,ae=nn(he,F,!1,x)&&ae,S)for(Te=0;Te<S.length;Te++)he=x.g=S[Te],ae=nn(he,F,!1,x)&&ae}Vt.prototype.N=function(){if(Vt.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const S=f.g[x];for(let F=0;F<S.length;F++)re(S[F]);delete f.g[x],f.h--}}this.G=null},Vt.prototype.J=function(f,x,S,F){return this.i.add(String(f),x,!1,S,F)},Vt.prototype.K=function(f,x,S,F){return this.i.add(String(f),x,!0,S,F)};function nn(f,x,S,F){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let ae=!0;for(let he=0;he<x.length;++he){const Te=x[he];if(Te&&!Te.da&&Te.capture==S){const Ge=Te.listener,qt=Te.ha||Te.src;Te.fa&&Oe(f.i,Te),ae=Ge.call(qt,F)!==!1&&ae}}return ae&&!F.defaultPrevented}function $o(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:a.setTimeout(f,x||0)}function Tr(f){f.g=$o(()=>{f.g=null,f.i&&(f.i=!1,Tr(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class Qt extends L{constructor(x,S){super(),this.m=x,this.l=S,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Tr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(f){L.call(this),this.h=f,this.g={}}h(In,L);var Fn=[];function $t(f){H(f.g,function(x,S){this.g.hasOwnProperty(S)&&Ie(x)},f),f.g={}}In.prototype.N=function(){In.Z.N.call(this),$t(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=a.JSON.stringify,Zi=a.JSON.parse,Ls=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function es(){}function lr(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xi(){V.call(this,"d")}h(xi,V);function zn(){V.call(this,"c")}h(zn,V);var je={},Ir=null;function dn(){return Ir=Ir||new Vt}je.Ia="serverreachability";function bi(f){V.call(this,je.Ia,f)}h(bi,V);function ke(f){const x=dn();Gt(x,new bi(x))}je.STAT_EVENT="statevent";function ts(f,x){V.call(this,je.STAT_EVENT,f),this.stat=x}h(ts,V);function Yt(f){const x=dn();Gt(x,new ts(x,f))}je.Ja="timingevent";function Ce(f,x){V.call(this,je.Ja,f),this.size=x}h(Ce,V);function et(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},x)}function Sn(){this.g=!0}Sn.prototype.ua=function(){this.g=!1};function Sr(f,x,S,F,ae,he){f.info(function(){if(f.g)if(he){var Te="",Ge=he.split("&");for(let dt=0;dt<Ge.length;dt++){var qt=Ge[dt].split("=");if(qt.length>1){const Ot=qt[0];qt=qt[1];const Ar=Ot.split("_");Te=Ar.length>=2&&Ar[1]=="type"?Te+(Ot+"="+qt+"&"):Te+(Ot+"=redacted&")}}}else Te=null;else Te=he;return"XMLHTTP REQ ("+F+") [attempt "+ae+"]: "+x+`
`+S+`
`+Te})}function qp(f,x,S,F,ae,he,Te){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ae+"]: "+x+`
`+S+`
`+he+" "+Te})}function ur(f,x,S,F){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+gu(f,S)+(F?" "+F:"")})}function Vs(f,x){f.info(function(){return"TIMEOUT: "+x})}Sn.prototype.info=function(){};function gu(f,x){if(!f.g)return x;if(!x)return null;try{const he=JSON.parse(x);if(he){for(f=0;f<he.length;f++)if(Array.isArray(he[f])){var S=he[f];if(!(S.length<2)){var F=S[1];if(Array.isArray(F)&&!(F.length<1)){var ae=F[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Te=1;Te<F.length;Te++)F[Te]=""}}}}return ar(he)}catch{return x}}var ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bt;function yu(){}h(yu,es),yu.prototype.g=function(){return new XMLHttpRequest},Bt=new yu;function Ei(f){return encodeURIComponent(String(f))}function qa(f){var x=1;f=f.split(":");const S=[];for(;x>0&&f.length;)S.push(f.shift()),x--;return f.length&&S.push(f.join(":")),S}function cr(f,x,S,F){this.j=f,this.i=x,this.l=S,this.S=F||1,this.V=new In(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Eh}function Eh(){this.i=null,this.g="",this.h=!1}var Hr={},Ti={};function kr(f,x,S){f.M=1,f.A=Go(fr(x)),f.u=S,f.R=!0,Bo(f,null)}function Bo(f,x){f.F=Date.now(),Cr(f),f.B=fr(f.A);var S=f.B,F=f.S;Array.isArray(F)||(F=[String(F)]),Ch(S.i,"t",F),f.C=0,S=f.j.L,f.h=new Eh,f.g=rn(f.j,S?x:null,!f.u),f.P>0&&(f.O=new Qt(c(f.Y,f,f.g),f.P)),x=f.V,S=f.g,F=f.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Fn[0]=ae.toString()),ae=Fn);for(let he=0;he<ae.length;he++){const Te=Re(S,ae[he],F||x.handleEvent,!1,x.h||x);if(!Te)break;x.g[Te.key]=Te}x=f.J?ne(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),ke(),Sr(f.i,f.v,f.B,f.l,f.S,f.u)}cr.prototype.ba=function(f){f=f.target;const x=this.O;x&&Ai(f)==3?x.j():this.Y(f)},cr.prototype.Y=function(f){try{if(f==this.g)e:{const Ge=Ai(this.g),qt=this.g.ya(),dt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||$s(this.g)))){this.K||Ge!=4||qt==7||(qt==8||dt<=0?ke(3):ke(2)),qo(this);var x=this.g.ca();this.X=x;var S=Hp(this);if(this.o=x==200,qp(this.i,this.v,this.B,this.l,this.S,Ge,x),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ae=this.g;if((F=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(F)){var he=F;break t}}he=null}if(f=he)ur(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hr(this,f);else{this.o=!1,this.m=3,Yt(12),Un(this),xt(this);break e}}if(this.R){f=!0;let Ot;for(;!this.K&&this.C<S.length;)if(Ot=Th(this,S),Ot==Ti){Ge==4&&(this.m=4,Yt(14),f=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Hr){this.m=4,Yt(15),ur(this.i,this.l,S,"[Invalid Chunk]"),f=!1;break}else ur(this.i,this.l,Ot,null),hr(this,Ot);if(Kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||S.length!=0||this.h.h||(this.m=1,Yt(16),f=!1),this.o=this.o&&f,!f)ur(this.i,this.l,S,"[Invalid Chunked Response]"),Un(this),xt(this);else if(S.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Ks(Te),Te.P=!0,Yt(11))}}else ur(this.i,this.l,S,null),hr(this,S);Ge==4&&Un(this),this.o&&!this.K&&(Ge==4?as(this.j,this):(this.o=!1,Cr(this)))}else Kp(this.g),x==400&&S.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),Un(this),xt(this)}}}catch{}finally{}};function Hp(f){if(!Kr(f))return f.g.la();const x=$s(f.g);if(x==="")return"";let S="";const F=x.length,ae=Ai(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Un(f),xt(f),"";f.h.i=new a.TextDecoder}for(let he=0;he<F;he++)f.h.h=!0,S+=f.h.i.decode(x[he],{stream:!(ae&&he==F-1)});return x.length=0,f.h.g+=S,f.C=0,f.h.g}function Kr(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Th(f,x){var S=f.C,F=x.indexOf(`
`,S);return F==-1?Ti:(S=Number(x.substring(S,F)),isNaN(S)?Hr:(F+=1,F+S>x.length?Ti:(x=x.slice(F,F+S),f.C=F+S,x)))}cr.prototype.cancel=function(){this.K=!0,Un(this)};function Cr(f){f.T=Date.now()+f.H,vu(f,f.H)}function vu(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=et(c(f.aa,f),x)}function qo(f){f.D&&(a.clearTimeout(f.D),f.D=null)}cr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(ke(),Yt(17)),Un(this),this.m=2,xt(this)):vu(this,this.T-f)};function xt(f){f.j.I==0||f.K||as(f.j,f)}function Un(f){qo(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,$t(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function hr(f,x){try{var S=f.j;if(S.I!=0&&(S.g==f||Ko(S.h,f))){if(!f.L&&Ko(S.h,f)&&S.I==3){try{var F=S.Ba.g.parse(x)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ae=F;if(ae[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<f.F)Za(S),qs(S);else break e;Hs(S),Yt(18)}}else S.xa=ae[1],0<S.xa-S.K&&ae[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=et(c(S.Va,S),6e3));Ha(S.h)<=1&&S.ta&&(S.ta=void 0)}else ei(S,11)}else if((f.L||S.g==f)&&Za(S),!j(x))for(ae=S.Ba.g.parse(x),x=0;x<ae.length;x++){let dt=ae[x];const Ot=dt[0];if(!(Ot<=S.K))if(S.K=Ot,dt=dt[1],S.I==2)if(dt[0]=="c"){S.M=dt[1],S.ba=dt[2];const Ar=dt[3];Ar!=null&&(S.ka=Ar,S.j.info("VER="+S.ka));const ti=dt[4];ti!=null&&(S.za=ti,S.j.info("SVER="+S.za));const Nr=dt[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(F=1.5*Nr,S.O=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const Pi=f.g;if(Pi){const ta=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var he=F.h;he.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Wr(he,he.h),he.h=null))}if(F.G){const Au=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(F.wa=Au,yt(F.J,F.G,Au))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-f.F,S.j.info("Handshake RTT: "+S.T+"ms")),F=S;var Te=f;if(F.na=nl(F,F.L?F.ba:null,F.W),Te.L){_u(F.h,Te);var Ge=Te,qt=F.O;qt&&(Ge.H=qt),Ge.D&&(qo(Ge),Cr(Ge)),F.g=Te}else Zo(F);S.i.length>0&&Xa(S)}else dt[0]!="stop"&&dt[0]!="close"||ei(S,7);else S.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?ei(S,7):Bs(S):dt[0]!="noop"&&S.l&&S.l.qa(dt),S.A=0)}}ke(4)}catch{}}var Ih=class{constructor(f,x){this.g=f,this.map=x}};function rs(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ho(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ha(f){return f.h?1:f.g?f.g.size:0}function Ko(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Wr(f,x){f.g?f.g.add(x):f.h=x}function _u(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}rs.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Wo(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const S of f.g.values())x=x.concat(S.G);return x}return _(f.i)}var wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(f,x){if(f){f=f.split("&");for(let S=0;S<f.length;S++){const F=f[S].indexOf("=");let ae,he=null;F>=0?(ae=f[S].substring(0,F),he=f[S].substring(F+1)):ae=f[S],x(ae,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function Gr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof Gr?(this.l=f.l,Ii(this,f.j),this.o=f.o,this.g=f.g,Qr(this,f.u),this.h=f.h,Ka(this,Ah(f.i)),this.m=f.m):f&&(x=String(f).match(wu))?(this.l=!1,Ii(this,x[1]||"",!0),this.o=ft(x[2]||""),this.g=ft(x[3]||"",!0),Qr(this,x[4]),this.h=ft(x[5]||"",!0),Ka(this,x[6]||"",!0),this.m=ft(x[7]||"")):(this.l=!1,this.i=new Si(null,this.l))}Gr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(Yr(x,is,!0),":");var S=this.g;return(S||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Yr(x,is,!0),"@"),f.push(Ei(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&f.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Yr(S,S.charAt(0)=="/"?bu:xu,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Yr(S,Sh)),f.join("")},Gr.prototype.resolve=function(f){const x=fr(this);let S=!!f.j;S?Ii(x,f.j):S=!!f.o,S?x.o=f.o:S=!!f.g,S?x.g=f.g:S=f.u!=null;var F=f.h;if(S)Qr(x,f.u);else if(S=!!f.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ae=x.h.lastIndexOf("/");ae!=-1&&(F=x.h.slice(0,ae+1)+F)}if(ae=F,ae==".."||ae==".")F="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){F=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const he=[];for(let Te=0;Te<ae.length;){const Ge=ae[Te++];Ge=="."?F&&Te==ae.length&&he.push(""):Ge==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),F&&Te==ae.length&&he.push("")):(he.push(Ge),F=!0)}F=he.join("/")}else F=ae}return S?x.h=F:S=f.i.toString()!=="",S?Ka(x,Ah(f.i)):S=!!f.m,S&&(x.m=f.m),x};function fr(f){return new Gr(f)}function Ii(f,x,S){f.j=S?ft(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function Qr(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Ka(f,x,S){x instanceof Si?(f.i=x,Fs(f.i,f.l)):(S||(x=Yr(x,Wa)),f.i=new Si(x,f.l))}function yt(f,x,S){f.i.set(x,S)}function Go(f){return yt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ft(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Yr(f,x,S){return typeof f=="string"?(f=encodeURI(f).replace(x,Qo),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Qo(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var is=/[#\/\?@]/g,xu=/[#\?:]/g,bu=/[#\?]/g,Wa=/[#\?@]/g,Sh=/#/g;function Si(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function ki(f){f.g||(f.g=new Map,f.h=0,f.i&&tt(f.i,function(x,S){f.add(decodeURIComponent(x.replace(/\+/g," ")),S)}))}n=Si.prototype,n.add=function(f,x){ki(this),this.i=null,f=Xt(this,f);let S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(x),this.h+=1,this};function kh(f,x){ki(f),x=Xt(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function at(f,x){return ki(f),x=Xt(f,x),f.g.has(x)}n.forEach=function(f,x){ki(this),this.g.forEach(function(S,F){S.forEach(function(ae){f.call(x,ae,F,this)},this)},this)};function Eu(f,x){ki(f);let S=[];if(typeof x=="string")at(f,x)&&(S=S.concat(f.g.get(Xt(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)S=S.concat(f[x]);return S}n.set=function(f,x){return ki(this),this.i=null,f=Xt(this,f),at(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=Eu(this,f),f.length>0?String(f[0]):x):x};function Ch(f,x,S){kh(f,x),S.length>0&&(f.i=null,f.g.set(Xt(f,x),_(S)),f.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let F=0;F<x.length;F++){var S=x[F];const ae=Ei(S);S=Eu(this,S);for(let he=0;he<S.length;he++){let Te=ae;S[he]!==""&&(Te+="="+Ei(S[he])),f.push(Te)}}return this.i=f.join("&")};function Ah(f){const x=new Si;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Xt(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Fs(f,x){x&&!f.j&&(ki(f),f.i=null,f.g.forEach(function(S,F){const ae=F.toLowerCase();F!=ae&&(kh(this,F),Ch(this,ae,S))},f)),f.j=x}function Ga(f,x){const S=new Sn;if(a.Image){const F=new Image;F.onload=d(Xr,S,"TestLoadImage: loaded",!0,x,F),F.onerror=d(Xr,S,"TestLoadImage: error",!1,x,F),F.onabort=d(Xr,S,"TestLoadImage: abort",!1,x,F),F.ontimeout=d(Xr,S,"TestLoadImage: timeout",!1,x,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else x(!1)}function Ci(f,x){const S=new Sn,F=new AbortController,ae=setTimeout(()=>{F.abort(),Xr(S,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:F.signal}).then(he=>{clearTimeout(ae),he.ok?Xr(S,"TestPingServer: ok",!0,x):Xr(S,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ae),Xr(S,"TestPingServer: error",!1,x)})}function Xr(f,x,S,F,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),F(S)}catch{}}function Nh(){this.g=new Ls}function Ft(f){this.i=f.Sb||null,this.h=f.ab||!1}h(Ft,es),Ft.prototype.g=function(){return new $n(this.i,this.h)};function $n(f,x){Vt.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h($n,Vt),n=$n.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,ss(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||a).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zs(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function zs(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Jr(this):ss(this),this.readyState==3&&zs(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Jr(this))},n.Na=function(f){this.g&&(this.response=f,Jr(this))},n.ga=function(){this.g&&Jr(this)};function Jr(f){f.readyState=4,f.l=null,f.j=null,f.B=null,ss(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var S=x.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=x.next();return f.join(`\r
`)};function ss(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty($n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Zr(f){let x="";return H(f,function(S,F){x+=F,x+=":",x+=S,x+=`\r
`}),x}function Tu(f,x,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=Zr(S),typeof f=="string"?S!=null&&Ei(S):yt(f,x,S))}function ct(f){Vt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ct,Vt);var Iu=/^https?$/i,Ph=["POST","PUT"];n=ct.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bt.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(he){Qa(this,he);return}if(f=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ae in F)S.set(ae,F[ae]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const he of F.keys())S.set(he,F.get(he));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(he=>he.toLowerCase()=="content-type"),ae=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Ph,x,void 0)>=0)||F||ae||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Te]of S)this.g.setRequestHeader(he,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(he){Qa(this,he)}};function Qa(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Us(f),Yo(f)}function Us(f){f.A||(f.A=!0,Gt(f,"complete"),Gt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Gt(this,"complete"),Gt(this,"abort"),Yo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yo(this,!0)),ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ya(this):this.Xa())},n.Xa=function(){Ya(this)};function Ya(f){if(f.h&&typeof o<"u"){if(f.v&&Ai(f)==4)setTimeout(f.Ca.bind(f),0);else if(Gt(f,"readystatechange"),Ai(f)==4){f.h=!1;try{const he=f.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var S;if(!(S=x)){var F;if(F=he===0){let Te=String(f.D).match(wu)[1]||null;!Te&&a.self&&a.self.location&&(Te=a.self.location.protocol.slice(0,-1)),F=!Iu.test(Te?Te.toLowerCase():"")}S=F}if(S)Gt(f,"complete"),Gt(f,"success");else{f.o=6;try{var ae=Ai(f)>2?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.ca()+"]",Us(f)}}finally{Yo(f)}}}}function Yo(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const S=f.g;f.g=null,x||Gt(f,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ai(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Zi(x)}};function $s(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Kp(f){const x={};f=(f.g&&Ai(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(j(f[F]))continue;var S=qa(f[F]);const ae=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const he=x[ae]||[];x[ae]=he,he.push(S)}$(x,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xo(f,x,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||x}function Jo(f){this.za=0,this.i=[],this.j=new Sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xo("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xo("baseRetryDelayMs",5e3,f),this.Za=Xo("retryDelaySeedMs",1e4,f),this.Ta=Xo("forwardChannelMaxRetries",2,f),this.va=Xo("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new rs(f&&f.concurrentRequestLimit),this.Ba=new Nh,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Jo.prototype,n.ka=8,n.I=1,n.connect=function(f,x,S,F){Yt(0),this.W=f,this.H=x||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.J=nl(this,null,this.W),Xa(this)};function Bs(f){if(Rh(f),f.I==3){var x=f.V++,S=fr(f.J);if(yt(S,"SID",f.M),yt(S,"RID",x),yt(S,"TYPE","terminate"),os(f,S),x=new cr(f,f.j,x),x.M=2,x.A=Go(fr(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(x.A.toString(),"")}catch{}!S&&a.Image&&(new Image().src=x.A,S=!0),S||(x.g=rn(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Cr(x)}tl(f)}function qs(f){f.g&&(Ks(f),f.g.cancel(),f.g=null)}function Rh(f){qs(f),f.v&&(a.clearTimeout(f.v),f.v=null),Za(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function Xa(f){if(!Ho(f.h)&&!f.m){f.m=!0;var x=f.Ea;M||C(),U||(M(),U=!0),N.add(x,f),f.D=0}}function Wp(f,x){return Ha(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=et(c(f.Ea,f,x),el(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const ae=new cr(this,this.j,f);let he=this.o;if(this.U&&(he?(he=ne(he),ue(he,this.U)):he=this.U),this.u!==null||this.R||(ae.J=he,he=null),this.S)e:{for(var x=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(x+=F,x>4096){x=S;break e}if(x===4096||S===this.i.length-1){x=S+1;break e}}x=1e3}else x=1e3;x=Su(this,ae,x),S=fr(this.J),yt(S,"RID",f),yt(S,"CVER",22),this.G&&yt(S,"X-HTTP-Session-Id",this.G),os(this,S),he&&(this.R?x="headers="+Ei(Zr(he))+"&"+x:this.u&&Tu(S,this.u,he)),Wr(this.h,ae),this.Ra&&yt(S,"TYPE","init"),this.S?(yt(S,"$req",x),yt(S,"SID","null"),ae.U=!0,kr(ae,S,null)):kr(ae,S,x),this.I=2}}else this.I==3&&(f?Ja(this,f):this.i.length==0||Ho(this.h)||Ja(this))};function Ja(f,x){var S;x?S=x.l:S=f.V++;const F=fr(f.J);yt(F,"SID",f.M),yt(F,"RID",S),yt(F,"AID",f.K),os(f,F),f.u&&f.o&&Tu(F,f.u,f.o),S=new cr(f,f.j,S,f.D+1),f.u===null&&(S.J=f.o),x&&(f.i=x.G.concat(f.i)),x=Su(f,S,1e3),S.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Wr(f.h,S),kr(S,F,x)}function os(f,x){f.H&&H(f.H,function(S,F){yt(x,F,S)}),f.l&&H({},function(S,F){yt(x,F,S)})}function Su(f,x,S){S=Math.min(f.i.length,S);const F=f.l?c(f.l.Ka,f.l,f):null;e:{var ae=f.i;let Ge=-1;for(;;){const qt=["count="+S];Ge==-1?S>0?(Ge=ae[0].g,qt.push("ofs="+Ge)):Ge=0:qt.push("ofs="+Ge);let dt=!0;for(let Ot=0;Ot<S;Ot++){var he=ae[Ot].g;const Ar=ae[Ot].map;if(he-=Ge,he<0)Ge=Math.max(0,ae[Ot].g-100),dt=!1;else try{he="req"+he+"_"||"";try{var Te=Ar instanceof Map?Ar:Object.entries(Ar);for(const[ti,Nr]of Te){let Pi=Nr;l(Nr)&&(Pi=ar(Nr)),qt.push(he+ti+"="+encodeURIComponent(Pi))}}catch(ti){throw qt.push(he+"type="+encodeURIComponent("_badmap")),ti}}catch{F&&F(Ar)}}if(dt){Te=qt.join("&");break e}}Te=void 0}return f=f.i.splice(0,S),x.G=f,Te}function Zo(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;M||C(),U||(M(),U=!0),N.add(x,f),f.A=0}}function Hs(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=et(c(f.Da,f),el(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=et(c(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),qs(this),ku(this))};function Ks(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function ku(f){f.g=new cr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=fr(f.na);yt(x,"RID","rpc"),yt(x,"SID",f.M),yt(x,"AID",f.K),yt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&yt(x,"TO",f.ia),yt(x,"TYPE","xmlhttp"),os(f,x),f.u&&f.o&&Tu(x,f.u,f.o),f.O&&(f.g.H=f.O);var S=f.g;f=f.ba,S.M=1,S.A=Go(fr(x)),S.u=null,S.R=!0,Bo(S,f)}n.Va=function(){this.C!=null&&(this.C=null,qs(this),Hs(this),Yt(19))};function Za(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function as(f,x){var S=null;if(f.g==x){Za(f),Ks(f),f.g=null;var F=2}else if(Ko(f.h,x))S=x.G,_u(f.h,x),F=1;else return;if(f.I!=0){if(x.o)if(F==1){S=x.u?x.u.length:0,x=Date.now()-x.F;var ae=f.D;F=dn(),Gt(F,new Ce(F,S)),Xa(f)}else Zo(f);else if(ae=x.m,ae==3||ae==0&&x.X>0||!(F==1&&Wp(f,x)||F==2&&Hs(f)))switch(S&&S.length>0&&(x=f.h,x.i=x.i.concat(S)),ae){case 1:ei(f,5);break;case 4:ei(f,10);break;case 3:ei(f,6);break;default:ei(f,2)}}}function el(f,x){let S=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(S*=2),S*x}function ei(f,x){if(f.j.info("Error code "+x),x==2){var S=c(f.bb,f),F=f.Ua;const ae=!F;F=new Gr(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ii(F,"https"),Go(F),ae?Ga(F.toString(),S):Ci(F.toString(),S)}else Yt(2);f.I=0,f.l&&f.l.pa(x),tl(f),Rh(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function tl(f){if(f.I=0,f.ja=[],f.l){const x=Wo(f.h);(x.length!=0||f.i.length!=0)&&(w(f.ja,x),w(f.ja,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.oa()}}function nl(f,x,S){var F=S instanceof Gr?fr(S):new Gr(S);if(F.g!="")x&&(F.g=x+"."+F.g),Qr(F,F.u);else{var ae=a.location;F=ae.protocol,x=x?x+"."+ae.hostname:ae.hostname,ae=+ae.port;const he=new Gr(null);F&&Ii(he,F),x&&(he.g=x),ae&&Qr(he,ae),S&&(he.h=S),F=he}return S=f.G,x=f.wa,S&&x&&yt(F,S,x),yt(F,"VER",f.ka),os(f,F),F}function rn(f,x,S){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new ct(new Ft({ab:S})):new ct(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ws(){}n=Ws.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ni(){}Ni.prototype.g=function(f,x){return new kn(f,x)};function kn(f,x){Vt.call(this),this.g=new Jo(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!j(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!j(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new ls(this)}h(kn,Vt),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Bs(this.g)},kn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.v&&(S={},S.__data__=ar(f),f=S);x.i.push(new Ih(x.Ya++,f)),x.I==3&&Xa(x)},kn.prototype.N=function(){this.g.l=null,delete this.j,Bs(this.g),delete this.g,kn.Z.N.call(this)};function ea(f){xi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const S in x){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}h(ea,xi);function Cu(){zn.call(this),this.status=1}h(Cu,zn);function ls(f){this.g=f}h(ls,Ws),ls.prototype.ra=function(){Gt(this.g,"a")},ls.prototype.qa=function(f){Gt(this.g,new ea(f))},ls.prototype.pa=function(f){Gt(this.g,new Cu)},ls.prototype.oa=function(){Gt(this.g,"b")},Ni.prototype.createWebChannel=Ni.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,cI=function(){return new Ni},uI=function(){return dn()},lI=je,ly={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,Pf=ns,wt.COMPLETE="complete",aI=wt,lr.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Vt.prototype.listen=Vt.prototype.J,Xu=lr,ct.prototype.listenOnce=ct.prototype.K,ct.prototype.getLastError=ct.prototype.Ha,ct.prototype.getLastErrorCode=ct.prototype.ya,ct.prototype.getStatus=ct.prototype.ca,ct.prototype.getResponseJson=ct.prototype.La,ct.prototype.getResponseText=ct.prototype.la,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Fa,oI=ct}).apply(typeof tf<"u"?tf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu="12.8.0";function QD(n){hu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new pp("@firebase/firestore");function al(){return Ra.logLevel}function Me(n,...e){if(Ra.logLevel<=it.DEBUG){const r=e.map(s0);Ra.debug(`Firestore (${hu}): ${n}`,...r)}}function Os(n,...e){if(Ra.logLevel<=it.ERROR){const r=e.map(s0);Ra.error(`Firestore (${hu}): ${n}`,...r)}}function Gl(n,...e){if(Ra.logLevel<=it.WARN){const r=e.map(s0);Ra.warn(`Firestore (${hu}): ${n}`,...r)}}function s0(n){if(typeof n=="string")return n;try{return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,hI(n,i,r)}function hI(n,e,r){let i=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw Os(i),new Error(i)}function mt(n,e,r,i){let s="Unexpected state";typeof r=="string"?s=r:i=r,n||hI(e,s,i)}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends _i{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(jn.UNAUTHENTICATED))}shutdown(){}}class XD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class JD{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){mt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Is,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Is)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new fI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class ZD{constructor(e,r,i){this.P=e,this.T=r,this.I=i,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class eM{constructor(e,r,i){this.P=e,this.T=r,this.I=i}getToken(){return Promise.resolve(new ZD(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tM{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ui(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){mt(this.o===void 0,3512);const i=o=>{o.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Me("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(mt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new yx(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<n;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=nM(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function st(n,e){return n<e?-1:n>e?1:0}function uy(n,e){const r=Math.min(n.length,e.length);for(let i=0;i<r;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return Om(s)===Om(o)?st(s,o):Om(s)?1:-1}return st(n.length,e.length)}const rM=55296,iM=57343;function Om(n){const e=n.charCodeAt(0);return e>=rM&&e<=iM}function Ql(n,e,r){return n.length===e.length&&n.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__name__";class Mi{constructor(e,r,i){r===void 0?r=0:r>e.length&&Be(637,{offset:r,range:e.length}),i===void 0?i=e.length-r:i>e.length-r&&Be(1746,{length:i,range:e.length-r}),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Mi.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return st(e.length,r.length)}static compareSegments(e,r){const i=Mi.isNumericId(e),s=Mi.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Mi.extractNumericId(e).compare(Mi.extractNumericId(r)):uy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class kt extends Mi{construct(e,r,i){return new kt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new ze(_e.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new kt(r)}static emptyPath(){return new kt([])}}const sM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends Mi{construct(e,r,i){return new _n(e,r,i)}static isValidIdentifier(e){return sM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vx}static keyField(){return new _n([vx])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ze(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ze(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ze(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new ze(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(r)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(kt.fromString(e))}static fromName(e){return new $e(kt.fromString(e).popFirst(5))}static empty(){return new $e(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return kt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n,e,r){if(!r)throw new ze(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oM(n,e,r,i){if(e===!0&&i===!0)throw new ze(_e.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function _x(n){if(!$e.isDocumentKey(n))throw new ze(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wx(n){if($e.isDocumentKey(n))throw new ze(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function a0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function ko(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ze(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=a0(n);throw new ze(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n,e){const r={typeString:n};return e&&(r.value=e),r}function dh(n,e){if(!pI(n))throw new ze(_e.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){r=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){r=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${i}' field to equal '${o.value}'`;break}}if(r)throw new ze(_e.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=-62135596800,bx=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*bx);return new Ct(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ze(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ze(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<xx)throw new ze(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dh(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:en("string",Ct._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new Ct(0,0))}static max(){return new Ke(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-1;function aM(n,e){const r=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ke.fromTimestamp(i===1e9?new Ct(r+1,0):new Ct(r,i));return new Co(s,$e.empty(),e)}function lM(n){return new Co(n.readTime,n.key,qc)}class Co{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new Co(Ke.min(),$e.empty(),qc)}static max(){return new Co(Ke.max(),$e.empty(),qc)}}function uM(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(n.documentKey,e.documentKey),r!==0?r:st(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==cM)throw n;Me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ve((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ve?r:ve.resolve(r)}catch(r){return ve.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ve.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ve.reject(r)}static resolve(e){return new ve((r,i)=>{r(e)})}static reject(e){return new ve((r,i)=>{i(e)})}static waitFor(e){return new ve((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=ve.resolve(!1);for(const i of e)r=r.next(s=>s?ve.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new ve((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(d=>{a[c]=d,++l,l===o&&i(a)},d=>s(d))}})}static doWhile(e,r){return new ve((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function fM(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function du(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-1;function _p(n){return n==null}function xd(n){return n===0&&1/n==-1/0}function dM(n){return typeof n=="number"&&Number.isInteger(n)&&!xd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="";function pM(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e=Ex(e)),e=mM(n.get(r),e);return Ex(e)}function mM(n,e){let r=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":r+="";break;case mI:r+="";break;default:r+=o}}return r}function Ex(n){return n+mI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){let e=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function Vo(n,e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function gI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){this.comparator=e,this.root=r||vn.EMPTY}insert(e,r){return new Lt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nf(this.root,e,this.comparator,!0)}}class nf{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??vn.RED,this.left=s??vn.EMPTY,this.right=o??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new vn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return vn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,r,i,s,o){return this}insert(e,r,i){return new vn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new cn(this.comparator);return r.data=e,r}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new yr([])}unionWith(e){let r=new cn(_n.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new yr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yI("Invalid base64 string: "+o):o}}(e);return new bn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new bn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const gM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const r=gM.exec(n);if(mt(!!r,46558,{timestamp:n}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kt(n.seconds),nanos:Kt(n.nanos)}}function Kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?bn.fromBase64String(n):bn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="server_timestamp",_I="__type__",wI="__previous_value__",xI="__local_write_time__";function u0(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[_I])==null?void 0:i.stringValue)===vI}function wp(n){const e=n.mapValue.fields[wI];return u0(e)?wp(e):e}function Hc(n){const e=Ao(n.mapValue.fields[xI].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,r,i,s,o,a,l,u,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d,this.apiKey=h}}const bd="(default)";class Kc{constructor(e,r){this.projectId=e,this.database=r||bd}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function vM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ze(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="__type__",_M="__max__",rf={mapValue:{}},EI="__vector__",Ed="value";function Po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?u0(n)?4:xM(n)?9007199254740991:wM(n)?10:11:Be(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const r=Po(n);if(r!==Po(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hc(n).isEqual(Hc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Ao(s.timestampValue),l=Ao(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return No(s.bytesValue).isEqual(No(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Kt(s.geoPointValue.latitude)===Kt(o.geoPointValue.latitude)&&Kt(s.geoPointValue.longitude)===Kt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Kt(s.integerValue)===Kt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Kt(s.doubleValue),l=Kt(o.doubleValue);return a===l?xd(a)===xd(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Ql(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Tx(a)!==Tx(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Qi(a[u],l[u])))return!1;return!0}(n,e);default:return Be(52216,{left:n})}}function Wc(n,e){return(n.values||[]).find(r=>Qi(r,e))!==void 0}function Yl(n,e){if(n===e)return 0;const r=Po(n),i=Po(e);if(r!==i)return st(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Kt(o.integerValue||o.doubleValue),u=Kt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return Sx(n.timestampValue,e.timestampValue);case 4:return Sx(Hc(n),Hc(e));case 5:return uy(n.stringValue,e.stringValue);case 6:return function(o,a){const l=No(o),u=No(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=st(l[c],u[c]);if(d!==0)return d}return st(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const l=st(Kt(o.latitude),Kt(a.latitude));return l!==0?l:st(Kt(o.longitude),Kt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var m,_,w,I;const l=o.fields||{},u=a.fields||{},c=(m=l[Ed])==null?void 0:m.arrayValue,d=(_=u[Ed])==null?void 0:_.arrayValue,h=st(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((I=d==null?void 0:d.values)==null?void 0:I.length)||0);return h!==0?h:kx(c,d)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===rf.mapValue&&a===rf.mapValue)return 0;if(o===rf.mapValue)return 1;if(a===rf.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const m=uy(u[h],d[h]);if(m!==0)return m;const _=Yl(l[u[h]],c[d[h]]);if(_!==0)return _}return st(u.length,d.length)}(n.mapValue,e.mapValue);default:throw Be(23264,{he:r})}}function Sx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return st(n,e);const r=Ao(n),i=Ao(e),s=st(r.seconds,i.seconds);return s!==0?s:st(r.nanos,i.nanos)}function kx(n,e){const r=n.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=Yl(r[s],i[s]);if(o)return o}return st(r.length,i.length)}function Xl(n){return cy(n)}function cy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ao(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return No(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return $e.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=cy(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${cy(r.fields[a])}`;return s+"}"}(n.mapValue):Be(61005,{value:n})}function Rf(n){switch(Po(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wp(n);return e?16+Rf(e):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Rf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Vo(i.fields,(o,a)=>{s+=o.length+Rf(a)}),s}(n.mapValue);default:throw Be(13486,{value:n})}}function hy(n){return!!n&&"integerValue"in n}function c0(n){return!!n&&"arrayValue"in n}function Cx(n){return!!n&&"nullValue"in n}function Ax(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function wM(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[bI])==null?void 0:i.stringValue)===EI}function gc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Vo(n.mapValue.fields,(r,i)=>e.mapValue.fields[r]=gc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=gc(n.arrayValue.values[r]);return e}return{...n}}function xM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.value=e}static empty(){return new er({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Of(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(r)}setAll(e){let r=_n.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=gc(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());Of(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Of(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Vo(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new er(gc(this.value))}}function TI(n){const e=[];return Vo(n.fields,(r,i)=>{const s=new _n([r]);if(Of(i)){const o=TI(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Mn(e,0,Ke.min(),Ke.min(),Ke.min(),er.empty(),0)}static newFoundDocument(e,r,i,s){return new Mn(e,1,r,Ke.min(),i,s,0)}static newNoDocument(e,r){return new Mn(e,2,r,Ke.min(),Ke.min(),er.empty(),0)}static newUnknownDocument(e,r){return new Mn(e,3,r,Ke.min(),Ke.min(),er.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r){this.position=e,this.inclusive=r}}function Nx(n,e,r){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?i=$e.comparator($e.fromName(a.referenceValue),r.key):i=Yl(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Px(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Qi(n.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,r="asc"){this.field=e,this.dir=r}}function bM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{}class on extends II{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new TM(e,r,i):r==="array-contains"?new kM(e,i):r==="in"?new CM(e,i):r==="not-in"?new AM(e,i):r==="array-contains-any"?new NM(e,i):new on(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new IM(e,i):new SM(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Yl(r,this.value)):r!==null&&Po(this.value)===Po(r)&&this.matchesComparison(Yl(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends II{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Yi(e,r)}matches(e){return SI(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SI(n){return n.op==="and"}function kI(n){return EM(n)&&SI(n)}function EM(n){for(const e of n.filters)if(e instanceof Yi)return!1;return!0}function fy(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(kI(n))return n.filters.map(e=>fy(e)).join(",");{const e=n.filters.map(r=>fy(r)).join(",");return`${n.op}(${e})`}}function CI(n,e){return n instanceof on?function(i,s){return s instanceof on&&i.op===s.op&&i.field.isEqual(s.field)&&Qi(i.value,s.value)}(n,e):n instanceof Yi?function(i,s){return s instanceof Yi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&CI(a,s.filters[l]),!0):!1}(n,e):void Be(19439)}function AI(n){return n instanceof on?function(r){return`${r.field.canonicalString()} ${r.op} ${Xl(r.value)}`}(n):n instanceof Yi?function(r){return r.op.toString()+" {"+r.getFilters().map(AI).join(" ,")+"}"}(n):"Filter"}class TM extends on{constructor(e,r,i){super(e,r,i),this.key=$e.fromName(i.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class IM extends on{constructor(e,r){super(e,"in",r),this.keys=NI("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class SM extends on{constructor(e,r){super(e,"not-in",r),this.keys=NI("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function NI(n,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(i=>$e.fromName(i.referenceValue))}class kM extends on{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return c0(r)&&Wc(r.arrayValue,this.value)}}class CM extends on{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Wc(this.value.arrayValue,r)}}class AM extends on{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Wc(this.value.arrayValue,r)}}class NM extends on{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!c0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Wc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function Rx(n,e=null,r=[],i=[],s=null,o=null,a=null){return new PM(n,e,r,i,s,o,a)}function h0(n){const e=We(n);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>fy(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),_p(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Xl(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Xl(i)).join(",")),e.Te=r}return e.Te}function f0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!bM(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!CI(n.filters[r],e.filters[r]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Px(n.startAt,e.startAt)&&Px(n.endAt,e.endAt)}function dy(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function RM(n,e,r,i,s,o,a,l){return new xp(n,e,r,i,s,o,a,l)}function d0(n){return new xp(n)}function Ox(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OM(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function jM(n){return n.collectionGroup!==null}function yc(n){const e=We(n);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new cn(_n.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Id(o,i))}),r.has(_n.keyField().canonicalString())||e.Ie.push(new Id(_n.keyField(),i))}return e.Ie}function Bi(n){const e=We(n);return e.Ee||(e.Ee=DM(e,yc(n))),e.Ee}function DM(n,e){if(n.limitType==="F")return Rx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Id(s.field,o)});const r=n.endAt?new Td(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Td(n.startAt.position,n.startAt.inclusive):null;return Rx(n.path,n.collectionGroup,e,n.filters,n.limit,r,i)}}function py(n,e,r){return new xp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function bp(n,e){return f0(Bi(n),Bi(e))&&n.limitType===e.limitType}function PI(n){return`${h0(Bi(n))}|lt:${n.limitType}`}function ll(n){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>AI(s)).join(", ")}]`),_p(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>Xl(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>Xl(s)).join(",")),`Target(${i})`}(Bi(n))}; limitType=${n.limitType})`}function Ep(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):$e.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of yc(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Nx(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,yc(i),s)||i.endAt&&!function(a,l,u){const c=Nx(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,yc(i),s))}(n,e)}function MM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RI(n){return(e,r)=>{let i=!1;for(const s of yc(n)){const o=LM(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function LM(n,e,r){const i=n.field.isKeyField()?$e.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Yl(u,c):Be(42886)}(n.field,e,r);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return gI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Lt($e.comparator);function js(){return VM}const OI=new Lt($e.comparator);function Ju(...n){let e=OI;for(const r of n)e=e.insert(r.key,r);return e}function jI(n){let e=OI;return n.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function ma(){return vc()}function DI(){return vc()}function vc(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const FM=new Lt($e.comparator),zM=new cn($e.comparator);function ot(...n){let e=zM;for(const r of n)e=e.add(r);return e}const UM=new cn(st);function $M(){return UM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xd(e)?"-0":e}}function MI(n){return{integerValue:""+n}}function BM(n,e){return dM(e)?MI(e):p0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this._=void 0}}function qM(n,e,r){return n instanceof Sd?function(s,o){const a={fields:{[_I]:{stringValue:vI},[xI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&u0(o)&&(o=wp(o)),o&&(a.fields[wI]=o),{mapValue:a}}(r,e):n instanceof Gc?VI(n,e):n instanceof Qc?FI(n,e):function(s,o){const a=LI(s,o),l=jx(a)+jx(s.Ae);return hy(a)&&hy(s.Ae)?MI(l):p0(s.serializer,l)}(n,e)}function HM(n,e,r){return n instanceof Gc?VI(n,e):n instanceof Qc?FI(n,e):r}function LI(n,e){return n instanceof kd?function(i){return hy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Sd extends Tp{}class Gc extends Tp{constructor(e){super(),this.elements=e}}function VI(n,e){const r=zI(e);for(const i of n.elements)r.some(s=>Qi(s,i))||r.push(i);return{arrayValue:{values:r}}}class Qc extends Tp{constructor(e){super(),this.elements=e}}function FI(n,e){let r=zI(e);for(const i of n.elements)r=r.filter(s=>!Qi(s,i));return{arrayValue:{values:r}}}class kd extends Tp{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function jx(n){return Kt(n.integerValue||n.doubleValue)}function zI(n){return c0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Gc&&s instanceof Gc||i instanceof Qc&&s instanceof Qc?Ql(i.elements,s.elements,Qi):i instanceof kd&&s instanceof kd?Qi(i.Ae,s.Ae):i instanceof Sd&&s instanceof Sd}(n.transform,e.transform)}class WM{constructor(e,r){this.version=e,this.transformResults=r}}class $r{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ip{}function UI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new m0(n.key,$r.none()):new ph(n.key,n.data,$r.none());{const r=n.data,i=er.empty();let s=new cn(_n.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Fo(n.key,i,new yr(s.toArray()),$r.none())}}function GM(n,e,r){n instanceof ph?function(s,o,a){const l=s.value.clone(),u=Mx(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,r):n instanceof Fo?function(s,o,a){if(!jf(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Mx(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll($I(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function _c(n,e,r,i){return n instanceof ph?function(o,a,l,u){if(!jf(o.precondition,a))return l;const c=o.value.clone(),d=Lx(o.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,r,i):n instanceof Fo?function(o,a,l,u){if(!jf(o.precondition,a))return l;const c=Lx(o.fieldTransforms,u,a),d=a.data;return d.setAll($I(o)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,r,i):function(o,a,l){return jf(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,r)}function QM(n,e){let r=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=LI(i.transform,s||null);o!=null&&(r===null&&(r=er.empty()),r.set(i.field,o))}return r||null}function Dx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Ql(i,s,(o,a)=>KM(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ph extends Ip{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fo extends Ip{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $I(n){const e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=n.data.field(r);e.set(r,i)}}),e}function Mx(n,e,r){const i=new Map;mt(n.length===r.length,32656,{Ve:r.length,de:n.length});for(let s=0;s<r.length;s++){const o=n[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,HM(a,l,r[s]))}return i}function Lx(n,e,r){const i=new Map;for(const s of n){const o=s.transform,a=r.data.field(s.field);i.set(s.field,qM(o,a,e))}return i}class m0 extends Ip{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YM extends Ip{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&GM(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=_c(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=_c(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=DI();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=UI(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Ke.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ot())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(r,i)=>Dx(r,i))&&Ql(this.baseMutations,e.baseMutations,(r,i)=>Dx(r,i))}}class g0{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){mt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return FM}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new g0(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt,lt;function e3(n){switch(n){case _e.OK:return Be(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function BI(n){if(n===void 0)return Os("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Jt.OK:return _e.OK;case Jt.CANCELLED:return _e.CANCELLED;case Jt.UNKNOWN:return _e.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return _e.INTERNAL;case Jt.UNAVAILABLE:return _e.UNAVAILABLE;case Jt.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Jt.NOT_FOUND:return _e.NOT_FOUND;case Jt.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Jt.ABORTED:return _e.ABORTED;case Jt.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Jt.DATA_LOSS:return _e.DATA_LOSS;default:return Be(39323,{code:n})}}(lt=Jt||(Jt={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=new bo([4294967295,4294967295],0);function Vx(n){const e=t3().encode(n),r=new sI;return r.update(e),new Uint8Array(r.digest())}function Fx(n){const e=new DataView(n.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bo([r,i],0),new bo([s,o],0)]}class y0{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Zu(`Invalid padding: ${r}`);if(i<0)throw new Zu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zu(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Zu(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=bo.fromNumber(this.ge)}ye(e,r,i){let s=e.add(r.multiply(bo.fromNumber(i)));return s.compare(n3)===1&&(s=new bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Vx(e),[i,s]=Fx(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new y0(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=Vx(e),[i,s]=Fx(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.be(a)}}be(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Sp(Ke.min(),s,new Lt(st),js(),ot())}}class mh{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new mh(i,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,r,i,s){this.Se=e,this.removedTargetIds=r,this.key=i,this.De=s}}class qI{constructor(e,r){this.targetId=e,this.Ce=r}}class HI{constructor(e,r,i=bn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class zx{constructor(){this.ve=0,this.Fe=Ux(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),r=ot(),i=ot();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Be(38017,{changeType:o})}}),new mh(this.Me,this.xe,e,r,i)}Ke(){this.Oe=!1,this.Fe=Ux()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class r3{constructor(e){this.Ge=e,this.ze=new Map,this.je=js(),this.He=sf(),this.Je=sf(),this.Ze=new Lt(st)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const i=this.nt(r);switch(e.state){case 0:this.rt(r)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),i.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((i,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,i=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(dy(o))if(i===0){const a=new $e(o.path);this.et(r,a,Mn.newNoDocument(a,Ke.min()))}else mt(i===1,20013,{expectedCount:i});else{const a=this._t(r);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=No(i).toUint8Array()}catch(u){if(u instanceof yI)return Gl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new y0(a,s,o)}catch(u){return Gl(u instanceof Zu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,i){return r.Ce.count===i-this.Pt(e,r.targetId)?0:2}Pt(e,r){const i=this.Ge.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&dy(l.target)){const u=new $e(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Mn.newNoDocument(u,e))}o.Be&&(r.set(a,o.ke()),o.Ke())}});let i=ot();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Sp(e,r,this.Ze,this.je,i);return this.je=js(),this.He=sf(),this.Je=sf(),this.Ze=new Lt(st),s}Ye(e,r){if(!this.rt(e))return;const i=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,i),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),i&&(this.je=this.je.insert(r,i))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new zx,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new cn(st),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new cn(st),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Me("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zx),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function sf(){return new Lt($e.comparator)}function Ux(){return new Lt($e.comparator)}const i3={asc:"ASCENDING",desc:"DESCENDING"},s3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o3={and:"AND",or:"OR"};class a3{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function my(n,e){return n.useProto3Json||_p(e)?e:{value:e}}function Cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l3(n,e){return Cd(n,e.toTimestamp())}function qi(n){return mt(!!n,49232),Ke.fromTimestamp(function(r){const i=Ao(r);return new Ct(i.seconds,i.nanos)}(n))}function v0(n,e){return gy(n,e).canonicalString()}function gy(n,e){const r=function(s){return new kt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?r:r.child(e)}function WI(n){const e=kt.fromString(n);return mt(JI(e),10190,{key:e.toString()}),e}function yy(n,e){return v0(n.databaseId,e.path)}function jm(n,e){const r=WI(e);if(r.get(1)!==n.databaseId.projectId)throw new ze(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new ze(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new $e(QI(r))}function GI(n,e){return v0(n.databaseId,e)}function u3(n){const e=WI(n);return e.length===4?kt.emptyPath():QI(e)}function vy(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QI(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $x(n,e,r){return{name:yy(n,e),fields:r.value.mapValue.fields}}function c3(n,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Be(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(mt(d===void 0||typeof d=="string",58123),bn.fromBase64String(d||"")):(mt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),bn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const d=c.code===void 0?_e.UNKNOWN:BI(c.code);return new ze(d,c.message||"")}(a);r=new HI(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=jm(n,i.document.name),o=qi(i.document.updateTime),a=i.document.createTime?qi(i.document.createTime):Ke.min(),l=new er({mapValue:{fields:i.document.fields}}),u=Mn.newFoundDocument(s,o,a,l),c=i.targetIds||[],d=i.removedTargetIds||[];r=new Df(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=jm(n,i.document),o=i.readTime?qi(i.readTime):Ke.min(),a=Mn.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Df([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=jm(n,i.document),o=i.removedTargetIds||[];r=new Df([],o,s,null)}else{if(!("filter"in e))return Be(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new ZM(s,o),l=i.targetId;r=new qI(l,a)}}return r}function h3(n,e){let r;if(e instanceof ph)r={update:$x(n,e.key,e.value)};else if(e instanceof m0)r={delete:yy(n,e.key)};else if(e instanceof Fo)r={update:$x(n,e.key,e.data),updateMask:w3(e.fieldMask)};else{if(!(e instanceof YM))return Be(16599,{dt:e.type});r={verify:yy(n,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Sd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof kd)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Be(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:l3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Be(27497)}(n,e.precondition)),r}function f3(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map(r=>function(s,o){let a=s.updateTime?qi(s.updateTime):qi(o);return a.isEqual(Ke.min())&&(a=qi(o)),new WM(a,s.transformResults||[])}(r,e))):[]}function d3(n,e){return{documents:[GI(n,e.path)]}}function p3(n,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=GI(n,s);const o=function(c){if(c.length!==0)return XI(Yi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ul(m.field),direction:y3(m.dir)}}(d))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=my(n,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function m3(n){let e=u3(n.parent);const r=n.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){mt(i===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];r.where&&(o=function(h){const m=YI(h);return m instanceof Yi&&kI(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(h){return h.map(m=>function(w){return new Id(cl(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,_p(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(h){const m=!!h.before,_=h.values||[];return new Td(_,m)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const m=!h.before,_=h.values||[];return new Td(_,m)}(r.endAt)),RM(e,s,a,o,l,"F",u,c)}function g3(n,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function YI(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=cl(r.unaryFilter.field);return on.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=cl(r.unaryFilter.field);return on.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=cl(r.unaryFilter.field);return on.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cl(r.unaryFilter.field);return on.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}}(n):n.fieldFilter!==void 0?function(r){return on.create(cl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return Yi.create(r.compositeFilter.filters.map(i=>YI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Be(1026)}}(r.compositeFilter.op))}(n):Be(30097,{filter:n})}function y3(n){return i3[n]}function v3(n){return s3[n]}function _3(n){return o3[n]}function ul(n){return{fieldPath:n.canonicalString()}}function cl(n){return _n.fromServerFormat(n.fieldPath)}function XI(n){return n instanceof on?function(r){if(r.op==="=="){if(Ax(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NAN"}};if(Cx(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ax(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NOT_NAN"}};if(Cx(r.value))return{unaryFilter:{field:ul(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(r.field),op:v3(r.op),value:r.value}}}(n):n instanceof Yi?function(r){const i=r.getFilters().map(s=>XI(s));return i.length===1?i[0]:{compositeFilter:{op:_3(r.op),filters:i}}}(n):Be(54877,{filter:n})}function w3(n){const e=[];return n.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function JI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function ZI(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,r,i,s,o=Ke.min(),a=Ke.min(),l=bn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.yt=e}}function b3(n){const e=m3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?py(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.Sn=new T3}addToCollectionParentIndex(e,r){return this.Sn.add(r),ve.resolve()}getCollectionParents(e,r){return ve.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return ve.resolve()}deleteFieldIndex(e,r){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,r){return ve.resolve()}getDocumentsMatchingTarget(e,r){return ve.resolve(null)}getIndexType(e,r){return ve.resolve(0)}getFieldIndexes(e,r){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,r){return ve.resolve(Co.min())}getMinOffsetFromCollectionGroup(e,r){return ve.resolve(Co.min())}updateCollectionGroup(e,r,i){return ve.resolve()}updateIndexEntries(e,r){return ve.resolve()}}class T3{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new cn(kt.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new cn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eS=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(eS,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Jl(0)}static ar(){return new Jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LruGarbageCollector",I3=1048576;function Hx([n,e],[r,i]){const s=st(n,r);return s===0?st(e,i):s}class S3{constructor(e){this.Pr=e,this.buffer=new cn(Hx),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Hx(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class k3{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me(qx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){du(r)?Me(qx,"Ignoring IndexedDB error during garbage collection: ",r):await fu(r)}await this.Ar(3e5)})}}class C3{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return ve.resolve(vp.ce);const i=new S3(r);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.Vr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Bx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bx):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let i,s,o,a,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,l=Date.now(),this.removeTargets(e,i,r))).next(h=>(o=h,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),al()<=it.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:h})))}}function A3(n,e){return new C3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.changes=new $a(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?ve.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&_c(i.mutation,s,yr.empty(),Ct.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,ot()).next(()=>i))}getLocalViewOfDocuments(e,r,i=ot()){const s=ma();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=Ju();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=ma();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,ot()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=js();const a=vc(),l=function(){return vc()}();return r.forEach((u,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Fo)?o=o.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),_c(d.mutation,c,d.mutation.getFieldMask(),Ct.now())):a.set(c.key,yr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,d)=>a.set(c,d)),r.forEach((c,d)=>l.set(c,new P3(d,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,r){const i=vc();let s=new Lt((a,l)=>a-l),o=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let d=i.get(u)||yr.empty();d=l.applyToLocalView(c,d),i.set(u,d);const h=(s.get(l.batchId)||ot()).add(u);s=s.insert(l.batchId,h)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,h=DI();d.forEach(m=>{if(!o.has(m)){const _=UI(r.get(m),i.get(m));_!==null&&h.set(m,_),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,h))}return ve.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return OM(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):jM(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):ve.resolve(ma());let l=qc,u=o;return a.next(c=>ve.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(d)?ve.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,ot())).next(d=>({batchId:l,changes:jI(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(i=>{let s=Ju();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=Ju();return this.indexManager.getCollectionParents(e,o).next(l=>ve.forEach(l,u=>{const c=function(h,m){return new xp(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(d=>{d.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,Mn.newInvalidDocument(d)))});let l=Ju();return a.forEach((u,c)=>{const d=o.get(u);d!==void 0&&_c(d.mutation,c,yr.empty(),Ct.now()),Ep(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return ve.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:qi(s.createTime)}}(r)),ve.resolve()}getNamedQuery(e,r){return ve.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:b3(s.bundledQuery),readTime:qi(s.readTime)}}(r)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(){this.overlays=new Lt($e.comparator),this.Lr=new Map}getOverlay(e,r){return ve.resolve(this.overlays.get(r))}getOverlays(e,r){const i=ma();return ve.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.bt(e,r,o)}),ve.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),ve.resolve()}getOverlaysForCollection(e,r,i){const s=ma(),o=r.length+1,a=new $e(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ve.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new Lt((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let d=o.get(c.largestBatchId);d===null&&(d=ma(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=ma(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return ve.resolve(l)}bt(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new JM(r,i));let o=this.Lr.get(r);o===void 0&&(o=ot(),this.Lr.set(r,o)),this.Lr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.kr=new cn(pn.Kr),this.qr=new cn(pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const i=new pn(e,r);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Wr(new pn(e,r))}Qr(e,r){e.forEach(i=>this.removeReference(i,r))}Gr(e){const r=new $e(new kt([])),i=new pn(r,e),s=new pn(r,e+1),o=[];return this.qr.forEachInRange([i,s],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new $e(new kt([])),i=new pn(r,e),s=new pn(r,e+1);let o=ot();return this.qr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new pn(e,0),i=this.kr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class pn{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return $e.comparator(e.key,r.key)||st(e.Hr,r.Hr)}static Ur(e,r){return st(e.Hr,r.Hr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new cn(pn.Kr)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XM(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new pn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ve.resolve(a)}lookupMutationBatch(e,r){return ve.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Xr(i),o=s<0?0:s;return ve.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?l0:this.Yn-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new pn(r,0),s=new pn(r,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],a=>{const l=this.Zr(a.Hr);o.push(l)}),ve.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new cn(st);return r.forEach(s=>{const o=new pn(s,0),a=new pn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),ve.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;$e.isDocumentKey(o)||(o=o.child(""));const a=new pn(new $e(o),0);let l=new cn(st);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},a),ve.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){mt(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ve.forEach(r.mutations,s=>{const o=new pn(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,r){const i=new pn(r,0),s=this.Jr.firstAfterOrEqual(i);return ve.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.ti=e,this.docs=function(){return new Lt($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return ve.resolve(i?i.document.mutableCopy():Mn.newInvalidDocument(r))}getEntries(e,r){let i=js();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Mn.newInvalidDocument(s))}),ve.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=js();const a=r.path,l=new $e(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||uM(lM(d),i)<=0||(s.has(d.key)||Ep(r,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,r,i,s){Be(9500)}ni(e,r){return ve.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new V3(this)}getSize(e){return ve.resolve(this.size)}}class V3 extends N3{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),ve.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.persistence=e,this.ri=new $a(r=>h0(r),f0),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.ii=0,this.si=new _0,this.targetCount=0,this.oi=Jl._r()}forEachTarget(e,r){return this.ri.forEach((i,s)=>r(s)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ii&&(this.ii=r),ve.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new Jl(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,ve.resolve()}updateTargetData(e,r){return this.lr(r),ve.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ve.waitFor(o).next(()=>s)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,r){const i=this.ri.get(r)||null;return ve.resolve(i)}addMatchingKeys(e,r,i){return this.si.$r(r,i),ve.resolve()}removeMatchingKeys(e,r,i){this.si.Qr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ve.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),ve.resolve()}getMatchingKeysForTargetId(e,r){const i=this.si.jr(r);return ve.resolve(i)}containsKey(e,r){return ve.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,r){this._i={},this.overlays={},this.ai=new vp(0),this.ui=!1,this.ui=!0,this.ci=new D3,this.referenceDelegate=e(this),this.li=new F3(this),this.indexManager=new E3,this.remoteDocumentCache=function(s){return new L3(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new x3(r),this.Pi=new O3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new j3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this._i[e.toKey()];return i||(i=new M3(r,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,i){Me("MemoryPersistence","Starting transaction:",e);const s=new z3(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,r){return ve.or(Object.values(this._i).map(i=>()=>i.containsKey(e,r)))}}class z3 extends hM{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Ri=new _0,this.Ai=null}static Vi(e){return new w0(e)}get di(){if(this.Ai)return this.Ai;throw Be(60996)}addReference(e,r,i){return this.Ri.addReference(i,r),this.di.delete(i.toString()),ve.resolve()}removeReference(e,r,i){return this.Ri.removeReference(i,r),this.di.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),ve.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.di,i=>{const s=$e.fromPath(i);return this.mi(e,s).next(o=>{o||r.removeEntry(s,Ke.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(i=>{i?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return ve.or([()=>ve.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class Ad{constructor(e,r){this.persistence=e,this.fi=new $a(i=>pM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=A3(this,r)}static Vi(e,r){return new Ad(e,r)}Ti(){}Ii(e){return ve.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}pr(e){let r=0;return this.mr(e,i=>{r++}).next(()=>r)}mr(e,r){return ve.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?ve.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(i++,o.removeEntry(a,Ke.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),ve.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ve.resolve()}removeReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),ve.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Rf(e.data.value)),r}wr(e,r,i){return ve.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return ve.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Ts=i,this.Is=s}static Es(e,r){let i=ot(),s=ot();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new x0(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return SO()?8:fM(Vn())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.gs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new U3;return this.ys(e,r,a).next(l=>{if(o.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>o.result)}ws(e,r,i,s){return i.documentReadCount<this.Vs?(al()<=it.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",ll(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ve.resolve()):(al()<=it.DEBUG&&Me("QueryEngine","Query:",ll(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(al()<=it.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",ll(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(r))):ve.resolve())}gs(e,r){if(Ox(r))return ve.resolve(null);let i=Bi(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=py(r,null,"F"),i=Bi(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=ot(...o);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.bs(r,l);return this.Ss(r,c,a,u.readTime)?this.gs(e,py(r,null,"F")):this.Ds(e,c,r,u)}))})))}ps(e,r,i,s){return Ox(r)||s.isEqual(Ke.min())?ve.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(r,o);return this.Ss(r,a,i,s)?ve.resolve(null):(al()<=it.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ll(r)),this.Ds(e,a,r,aM(s,qc)).next(l=>l))})}bs(e,r){let i=new cn(RI(e));return r.forEach((s,o)=>{Ep(e,o)&&(i=i.add(o))}),i}Ss(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,r,i){return al()<=it.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",ll(r)),this.fs.getDocumentsMatchingQuery(e,r,Co.min(),i)}Ds(e,r,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="LocalStore",B3=3e8;class q3{constructor(e,r,i,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new Lt(st),this.Fs=new $a(o=>h0(o),f0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function H3(n,e,r,i){return new q3(n,e,r,i)}async function nS(n,e){const r=We(n);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.Os(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=ot();for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function K3(n,e){const r=We(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const h=c.batch,m=h.keys();let _=ve.resolve();return m.forEach(w=>{_=_.next(()=>d.getEntry(u,w)).next(I=>{const P=c.docVersions.get(w);mt(P!==null,48541),I.version.compareTo(P)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ot();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function rS(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function W3(n,e){const r=We(n),i=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;l.push(r.li.removeMatchingKeys(o,d.removedDocuments,h).next(()=>r.li.addMatchingKeys(o,d.addedDocuments,h)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?_=_.withResumeToken(bn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(h,_),function(I,P,b){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=B3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,_,d)&&l.push(r.li.updateTargetData(o,_))});let u=js(),c=ot();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,d))}),l.push(G3(o,a,e.documentUpdates).next(d=>{u=d.Bs,c=d.Ls})),!i.isEqual(Ke.min())){const d=r.li.getLastRemoteSnapshotVersion(o).next(h=>r.li.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(d)}return ve.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.vs=s,o))}function G3(n,e,r){let i=ot(),s=ot();return r.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=js();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ke.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Me(b0,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function Q3(n,e){const r=We(n);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=l0),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Y3(n,e){const r=We(n);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.li.getTargetData(i,e).next(o=>o?(s=o,ve.resolve(s)):r.li.allocateTargetId(i).next(a=>(s=new co(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(i.targetId,i),r.Fs.set(e,i.targetId)),i})}async function _y(n,e,r){const i=We(n),s=i.vs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!du(a))throw a;Me(b0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function Kx(n,e,r){const i=We(n);let s=Ke.min(),o=ot();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const h=We(u),m=h.Fs.get(d);return m!==void 0?ve.resolve(h.vs.get(m)):h.li.getTargetData(c,d)}(i,a,Bi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,r?s:Ke.min(),r?o:ot())).next(l=>(X3(i,MM(e),l),{documents:l,ks:o})))}function X3(n,e,r){let i=n.Ms.get(e)||Ke.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ms.set(e,i)}class Wx{constructor(){this.activeTargetIds=$M()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J3{constructor(){this.vo=new Wx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,i){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Wx,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="ConnectivityMonitor";class Qx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(Gx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(Gx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function wy(){return of===null?of=function(){return 268435456+Math.round(2147483648*Math.random())}():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",e5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class t5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===bd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,r,i,s,o){const a=wy(),l=this.Qo(e,r.toUriEncodedString());Me(Dm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,o);const{host:c}=new URL(l),d=lu(c);return this.zo(e,l,u,i,d).then(h=>(Me(Dm,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Gl(Dm,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}jo(e,r,i,s,o,a){return this.Wo(e,r,i,s,o)}Go(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,r){const i=e5[e];let s=`${this.qo}/v1/${r}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection",Vu=(n,e,r)=>{n.listen(e,i=>{try{r(i)}catch(s){setTimeout(()=>{throw s},0)}})};class Ol extends t5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ol.c_){const e=uI();Vu(e,lI.STAT_EVENT,r=>{r.stat===ly.PROXY?Me(Rn,"STAT_EVENT: detected buffering proxy"):r.stat===ly.NOPROXY&&Me(Rn,"STAT_EVENT: detected no buffering proxy")}),Ol.c_=!0}}zo(e,r,i,s,o){const a=wy();return new Promise((l,u)=>{const c=new oI;c.setWithCredentials(!0),c.listenOnce(aI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Pf.NO_ERROR:const h=c.getResponseJson();Me(Rn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),l(h);break;case Pf.TIMEOUT:Me(Rn,`RPC '${e}' ${a} timed out`),u(new ze(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const m=c.getStatus();if(Me(Rn,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const w=_==null?void 0:_.error;if(w&&w.status&&w.message){const I=function(b){const T=b.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(T)>=0?T:_e.UNKNOWN}(w.status);u(new ze(I,w.message))}else u(new ze(_e.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ze(_e.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Me(Rn,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);Me(Rn,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",d,i,15)})}T_(e,r,i){const s=wy(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,i),l.encodeInitMessageHeaders=!0;const c=o.join("");Me(Rn,`Creating RPC '${e}' stream ${s}: ${c}`,l);const d=a.createWebChannel(c,l);this.I_(d);let h=!1,m=!1;const _=new n5({Ho:w=>{m?Me(Rn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(h||(Me(Rn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Me(Rn,`RPC '${e}' stream ${s} sending:`,w),d.send(w))},Jo:()=>d.close()});return Vu(d,Xu.EventType.OPEN,()=>{m||(Me(Rn,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),Vu(d,Xu.EventType.CLOSE,()=>{m||(m=!0,Me(Rn,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(d))}),Vu(d,Xu.EventType.ERROR,w=>{m||(m=!0,Gl(Rn,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),_.o_(new ze(_e.UNAVAILABLE,"The operation could not be completed")))}),Vu(d,Xu.EventType.MESSAGE,w=>{var I;if(!m){const P=w.data[0];mt(!!P,16349);const b=P,T=(b==null?void 0:b.error)||((I=b[0])==null?void 0:I.error);if(T){Me(Rn,`RPC '${e}' stream ${s} received error:`,T);const A=T.status;let R=function(N){const C=Jt[N];if(C!==void 0)return BI(C)}(A),M=T.message;R===void 0&&(R=_e.INTERNAL,M="Unknown error status: "+A+" with message "+T.message),m=!0,_.o_(new ze(R,M)),d.close()}else Me(Rn,`RPC '${e}' stream ${s} received:`,P),_.__(P)}}),Ol.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,i){super.Go(e,r,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cI()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){return new Ol(n)}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(n){return new a3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ol.c_=!1;class iS{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=r,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-i);s>0&&Me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="PersistentStream";class sS{constructor(e,r,i,s,o,a,l,u){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===_e.RESOURCE_EXHAUSTED?(Os(r.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===r&&this.G_(i,s)},i=>{e(()=>{const s=new ze(_e.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,r){const i=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Me(Yx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Me(Yx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i5 extends sS{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=c3(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ke.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ke.min():a.readTime?qi(a.readTime):Ke.min()}(e);return this.listener.J_(r,i)}Z_(e){const r={};r.database=vy(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=dy(u)?{documents:d3(o,u)}:{query:p3(o,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=KI(o,a.resumeToken);const c=my(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ke.min())>0){l.readTime=Cd(o,a.snapshotVersion.toTimestamp());const c=my(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=g3(this.serializer,e);i&&(r.labels=i),this.K_(r)}X_(e){const r={};r.database=vy(this.serializer),r.removeTarget=e,this.K_(r)}}class s5 extends sS{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=f3(e.writeResults,e.commitTime),i=qi(e.commitTime);return this.listener.na(i,r)}ra(){const e={};e.database=vy(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>h3(this.serializer,i))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{}class a5 extends o5{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ze(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,gy(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ze(_e.UNKNOWN,o.toString())})}jo(e,r,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,gy(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ze(_e.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function l5(n,e,r,i){return new a5(n,e,r,i)}class u5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Os(r),this.aa=!1):Me("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class c5{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{Ba(this)&&(Me(Oa,"Restarting streams for network reachability change."),await async function(u){const c=We(u);c.Ea.add(4),await gh(c),c.Va.set("Unknown"),c.Ea.delete(4),await Cp(c)}(this))})}),this.Va=new u5(i,s)}}async function Cp(n){if(Ba(n))for(const e of n.Ra)await e(!0)}async function gh(n){for(const e of n.Ra)await e(!1)}function oS(n,e){const r=We(n);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),S0(r)?I0(r):pu(r).O_()&&T0(r,e))}function E0(n,e){const r=We(n),i=pu(r);r.Ia.delete(e),i.O_()&&aS(r,e),r.Ia.size===0&&(i.O_()?i.L_():Ba(r)&&r.Va.set("Unknown"))}function T0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}pu(n).Z_(e)}function aS(n,e){n.da.$e(e),pu(n).X_(e)}function I0(n){n.da=new r3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),pu(n).start(),n.Va.ua()}function S0(n){return Ba(n)&&!pu(n).x_()&&n.Ia.size>0}function Ba(n){return We(n).Ea.size===0}function lS(n){n.da=void 0}async function h5(n){n.Va.set("Online")}async function f5(n){n.Ia.forEach((e,r)=>{T0(n,e)})}async function d5(n,e){lS(n),S0(n)?(n.Va.ha(e),I0(n)):n.Va.set("Unknown")}async function p5(n,e,r){if(n.Va.set("Online"),e instanceof HI&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(n,e)}catch(i){Me(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nd(n,i)}else if(e instanceof Df?n.da.Xe(e):e instanceof qI?n.da.st(e):n.da.tt(e),!r.isEqual(Ke.min()))try{const i=await rS(n.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.Ia.get(c);d&&o.Ia.set(c,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const d=o.Ia.get(u);if(!d)return;o.Ia.set(u,d.withResumeToken(bn.EMPTY_BYTE_STRING,d.snapshotVersion)),aS(o,u);const h=new co(d.target,u,c,d.sequenceNumber);T0(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(n,r)}catch(i){Me(Oa,"Failed to raise snapshot:",i),await Nd(n,i)}}async function Nd(n,e,r){if(!du(e))throw e;n.Ea.add(1),await gh(n),n.Va.set("Offline"),r||(r=()=>rS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Me(Oa,"Retrying IndexedDB access"),await r(),n.Ea.delete(1),await Cp(n)})}function uS(n,e){return e().catch(r=>Nd(n,r,e))}async function Ap(n){const e=We(n),r=Ro(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:l0;for(;m5(e);)try{const s=await Q3(e.localStore,i);if(s===null){e.Ta.length===0&&r.L_();break}i=s.batchId,g5(e,s)}catch(s){await Nd(e,s)}cS(e)&&hS(e)}function m5(n){return Ba(n)&&n.Ta.length<10}function g5(n,e){n.Ta.push(e);const r=Ro(n);r.O_()&&r.Y_&&r.ea(e.mutations)}function cS(n){return Ba(n)&&!Ro(n).x_()&&n.Ta.length>0}function hS(n){Ro(n).start()}async function y5(n){Ro(n).ra()}async function v5(n){const e=Ro(n);for(const r of n.Ta)e.ea(r.mutations)}async function _5(n,e,r){const i=n.Ta.shift(),s=g0.from(i,e,r);await uS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Ap(n)}async function w5(n,e){e&&Ro(n).Y_&&await async function(i,s){if(function(a){return e3(a)&&a!==_e.ABORTED}(s.code)){const o=i.Ta.shift();Ro(i).B_(),await uS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Ap(i)}}(n,e),cS(n)&&hS(n)}async function Xx(n,e){const r=We(n);r.asyncQueue.verifyOperationInProgress(),Me(Oa,"RemoteStore received new credentials");const i=Ba(r);r.Ea.add(3),await gh(r),i&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Cp(r)}async function x5(n,e){const r=We(n);e?(r.Ea.delete(2),await Cp(r)):e||(r.Ea.add(2),await gh(r),r.Va.set("Unknown"))}function pu(n){return n.ma||(n.ma=function(r,i,s){const o=We(r);return o.sa(),new i5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:h5.bind(null,n),Yo:f5.bind(null,n),t_:d5.bind(null,n),J_:p5.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),S0(n)?I0(n):n.Va.set("Unknown")):(await n.ma.stop(),lS(n))})),n.ma}function Ro(n){return n.fa||(n.fa=function(r,i,s){const o=We(r);return o.sa(),new s5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:y5.bind(null,n),t_:w5.bind(null,n),ta:v5.bind(null,n),na:_5.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await Ap(n)):(await n.fa.stop(),n.Ta.length>0&&(Me(Oa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new k0(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(n,e){if(Os("AsyncQueue",`${e}: ${n}`),du(n))return new ze(_e.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||$e.comparator(r.key,i.key):(r,i)=>$e.comparator(r.key,i.key),this.keyedMap=Ju(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new jl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.ga=new Lt($e.comparator)}track(e){const r=e.doc.key,i=this.ga.get(r);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(r,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(r):e.type===1&&i.type===2?this.ga=this.ga.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Be(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,i)=>{e.push(i)}),e}}class Zl{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new Zl(e,r,jl.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class E5{constructor(){this.queries=Zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,i){const s=We(r),o=s.queries;s.queries=Zx(),o.forEach((a,l)=>{for(const u of l.ba)u.onError(i)})})(this,new ze(_e.ABORTED,"Firestore shutting down"))}}function Zx(){return new $a(n=>PI(n),bp)}async function fS(n,e){const r=We(n);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new b5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=C0(a,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ba.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&A0(r)}async function dS(n,e){const r=We(n),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function T5(n,e){const r=We(n);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ba)l.Fa(s)&&(i=!0);a.wa=s}}i&&A0(r)}function I5(n,e,r){const i=We(n),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(r);i.queries.delete(e)}function A0(n){n.Ca.forEach(e=>{e.next()})}var xy,e1;(e1=xy||(xy={})).Ma="default",e1.Cache="cache";class pS{constructor(e,r,i){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Zl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const i=r!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.key=e}}class gS{constructor(e){this.key=e}}class S5{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=RI(e),this.tu=new jl(this.eu)}get nu(){return this.Za}ru(e,r){const i=r?r.iu:new Jx,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),_=Ep(this.query,h)?h:null,w=!!m&&this.mutatedKeys.has(m.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;m&&_?m.data.isEqual(_.data)?w!==I&&(i.track({type:3,doc:_}),P=!0):this.su(m,_)||(i.track({type:2,doc:_}),P=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(l=!0)):!m&&_?(i.track({type:0,doc:_}),P=!0):m&&!_&&(i.track({type:1,doc:m}),P=!0,(u||c)&&(l=!0)),P&&(_?(a=a.add(_),o=I?o.add(d):o.delete(d)):(a=a.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{tu:a,iu:i,Ss:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,h)=>function(_,w){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Vt:P})}};return I(_)-I(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(i),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new Zl(this.query,e.tu,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const r=[];return e.forEach(i=>{this.Ya.has(i)||r.push(new gS(i))}),this.Ya.forEach(i=>{e.has(i)||r.push(new mS(i))}),r}cu(e){this.Za=e.ks,this.Ya=ot();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const N0="SyncEngine";class k5{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class C5{constructor(e){this.key=e,this.hu=!1}}class A5{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new $a(l=>PI(l),bp),this.Iu=new Map,this.Eu=new Set,this.Ru=new Lt($e.comparator),this.Au=new Map,this.Vu=new _0,this.du={},this.mu=new Map,this.fu=Jl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function N5(n,e,r=!0){const i=bS(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await yS(i,e,r,!0),s}async function P5(n,e){const r=bS(n);await yS(r,e,!0,!1)}async function yS(n,e,r,i){const s=await Y3(n.localStore,Bi(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await R5(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&r&&oS(n.remoteStore,s),l}async function R5(n,e,r,i,s){n.pu=(h,m,_)=>async function(I,P,b,T){let A=P.view.ru(b);A.Ss&&(A=await Kx(I.localStore,P.query,!1).then(({documents:N})=>P.view.ru(N,A)));const R=T&&T.targetChanges.get(P.targetId),M=T&&T.targetMismatches.get(P.targetId)!=null,U=P.view.applyChanges(A,I.isPrimaryClient,R,M);return n1(I,P.targetId,U.au),U.snapshot}(n,h,m,_);const o=await Kx(n.localStore,e,!0),a=new S5(e,o.ks),l=a.ru(o.documents),u=mh.createSynthesizedTargetChangeForCurrentChange(r,i&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);n1(n,r,c.au);const d=new k5(e,r,a);return n.Tu.set(e,d),n.Iu.has(r)?n.Iu.get(r).push(e):n.Iu.set(r,[e]),c.snapshot}async function O5(n,e,r){const i=We(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!bp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await _y(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&E0(i.remoteStore,s.targetId),by(i,s.targetId)}).catch(fu)):(by(i,s.targetId),await _y(i.localStore,s.targetId,!0))}async function j5(n,e){const r=We(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),E0(r.remoteStore,i.targetId))}async function D5(n,e,r){const i=$5(n);try{const s=await function(a,l){const u=We(a),c=Ct.now(),d=l.reduce((_,w)=>_.add(w.key),ot());let h,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=js(),I=ot();return u.xs.getEntries(_,d).next(P=>{w=P,w.forEach((b,T)=>{T.isValidDocument()||(I=I.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,w)).next(P=>{h=P;const b=[];for(const T of l){const A=QM(T,h.get(T.key).overlayedDocument);A!=null&&b.push(new Fo(T.key,A,TI(A.value.mapValue),$r.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,b,l)}).next(P=>{m=P;const b=P.applyToLocalDocumentSet(h,I);return u.documentOverlayCache.saveOverlays(_,P.batchId,b)})}).then(()=>({batchId:m.batchId,changes:jI(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new Lt(st)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(i,s.batchId,r),await yh(i,s.changes),await Ap(i.remoteStore)}catch(s){const o=C0(s,"Failed to persist write");r.reject(o)}}async function vS(n,e){const r=We(n);try{const i=await W3(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?mt(a.hu,14607):s.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))}),await yh(r,i,e)}catch(i){await fu(i)}}function t1(n,e,r){const i=We(n);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=We(a);u.onlineState=l;let c=!1;u.queries.forEach((d,h)=>{for(const m of h.ba)m.va(l)&&(c=!0)}),c&&A0(u)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function M5(n,e,r){const i=We(n);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Au.get(e),o=s&&s.key;if(o){let a=new Lt($e.comparator);a=a.insert(o,Mn.newNoDocument(o,Ke.min()));const l=ot().add(o),u=new Sp(Ke.min(),new Map,new Lt(st),a,l);await vS(i,u),i.Ru=i.Ru.remove(o),i.Au.delete(e),P0(i)}else await _y(i.localStore,e,!1).then(()=>by(i,e,r)).catch(fu)}async function L5(n,e){const r=We(n),i=e.batch.batchId;try{const s=await K3(r.localStore,e);wS(r,i,null),_S(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await yh(r,s)}catch(s){await fu(s)}}async function V5(n,e,r){const i=We(n);try{const s=await function(a,l){const u=We(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(mt(h!==null,37113),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,e);wS(i,e,r),_S(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await yh(i,s)}catch(s){await fu(s)}}function _S(n,e){(n.mu.get(e)||[]).forEach(r=>{r.resolve()}),n.mu.delete(e)}function wS(n,e,r){const i=We(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function by(n,e,r=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),r&&n.Pu.yu(i,r);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(i=>{n.Vu.containsKey(i)||xS(n,i)})}function xS(n,e){n.Eu.delete(e.path.canonicalString());const r=n.Ru.get(e);r!==null&&(E0(n.remoteStore,r),n.Ru=n.Ru.remove(e),n.Au.delete(r),P0(n))}function n1(n,e,r){for(const i of r)i instanceof mS?(n.Vu.addReference(i.key,e),F5(n,i)):i instanceof gS?(Me(N0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||xS(n,i.key)):Be(19791,{wu:i})}function F5(n,e){const r=e.key,i=r.path.canonicalString();n.Ru.get(r)||n.Eu.has(i)||(Me(N0,"New document in limbo: "+r),n.Eu.add(i),P0(n))}function P0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const r=new $e(kt.fromString(e)),i=n.fu.next();n.Au.set(i,new C5(r)),n.Ru=n.Ru.insert(r,i),oS(n.remoteStore,new co(Bi(d0(r.path)),i,"TargetPurposeLimboResolution",vp.ce))}}async function yh(n,e,r){const i=We(n),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,r).then(c=>{var d;if((c||r)&&i.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=x0.Es(u.targetId,c);o.push(h)}}))}),await Promise.all(a),i.Pu.J_(s),await async function(u,c){const d=We(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ve.forEach(c,m=>ve.forEach(m.Ts,_=>d.persistence.referenceDelegate.addReference(h,m.targetId,_)).next(()=>ve.forEach(m.Is,_=>d.persistence.referenceDelegate.removeReference(h,m.targetId,_)))))}catch(h){if(!du(h))throw h;Me(b0,"Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const _=d.vs.get(m),w=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(w);d.vs=d.vs.insert(m,I)}}}(i.localStore,o))}async function z5(n,e){const r=We(n);if(!r.currentUser.isEqual(e)){Me(N0,"User change. New user:",e.toKey());const i=await nS(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new ze(_e.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yh(r,i.Ns)}}function U5(n,e){const r=We(n),i=r.Au.get(e);if(i&&i.hu)return ot().add(i.key);{let s=ot();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function bS(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M5.bind(null,e),e.Pu.J_=T5.bind(null,e.eventManager),e.Pu.yu=I5.bind(null,e.eventManager),e}function $5(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V5.bind(null,e),e}class Pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return H3(this.persistence,new $3,e.initialUser,this.serializer)}Cu(e){return new tS(w0.Vi,this.serializer)}Du(e){return new J3}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pd.provider={build:()=>new Pd};class B5 extends Pd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){mt(this.persistence.referenceDelegate instanceof Ad,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new k3(i,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new tS(i=>Ad.Vi(i,r),this.serializer)}}class Ey{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>t1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=z5.bind(null,this.syncEngine),await x5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E5}()}createDatastore(e){const r=kp(e.databaseInfo.databaseId),i=r5(e.databaseInfo);return l5(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new c5(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>t1(this.syncEngine,r,0),function(){return Qx.v()?new Qx:new Z3}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,d){const h=new A5(s,o,a,l,u,c);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=We(s);Me(Oa,"RemoteStore shutting down."),o.Ea.add(5),await gh(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Ey.provider={build:()=>new Ey};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class q5{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this._databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=o0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{Me(Oo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Me(Oo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=C0(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lm(n,e){n.asyncQueue.verifyOperationInProgress(),Me(Oo,"Initializing OfflineComponentProvider");const r=n.configuration;await e.initialize(r);let i=r.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await nS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function r1(n,e){n.asyncQueue.verifyOperationInProgress();const r=await H5(n);Me(Oo,"Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(i=>Xx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Xx(e.remoteStore,s)),n._onlineComponents=e}async function H5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Me(Oo,"Using user provided OfflineComponentProvider");try{await Lm(n,n._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===_e.FAILED_PRECONDITION||s.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Gl("Error using user provided cache. Falling back to memory cache: "+r),await Lm(n,new Pd)}}else Me(Oo,"Using default OfflineComponentProvider"),await Lm(n,new B5(void 0));return n._offlineComponents}async function TS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Me(Oo,"Using user provided OnlineComponentProvider"),await r1(n,n._uninitializedComponentsProvider._online)):(Me(Oo,"Using default OnlineComponentProvider"),await r1(n,new Ey))),n._onlineComponents}function K5(n){return TS(n).then(e=>e.syncEngine)}async function IS(n){const e=await TS(n),r=e.eventManager;return r.onListen=N5.bind(null,e.syncEngine),r.onUnlisten=O5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=P5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=j5.bind(null,e.syncEngine),r}function W5(n,e,r={}){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const d=new ES({next:m=>{d.Nu(),a.enqueueAndForget(()=>dS(o,h));const _=m.docs.has(l);!_&&m.fromCache?c.reject(new ze(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?c.reject(new ze(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pS(d0(l.path),d,{includeMetadataChanges:!0,Ka:!0});return fS(o,h)}(await IS(n),n.asyncQueue,e,r,i)),i.promise}function G5(n,e,r={}){const i=new Is;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const d=new ES({next:m=>{d.Nu(),a.enqueueAndForget(()=>dS(o,h)),m.fromCache&&u.source==="server"?c.reject(new ze(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),h=new pS(l,d,{includeMetadataChanges:!0,Ka:!0});return fS(o,h)}(await IS(n),n.asyncQueue,e,r,i)),i.promise}function Q5(n,e){const r=new Is;return n.asyncQueue.enqueueAndForget(async()=>D5(await K5(n),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="ComponentProvider",i1=new Map;function X5(n,e,r,i,s){return new yM(n,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,SS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firestore.googleapis.com",s1=!0;class o1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kS,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I3)throw new ze(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ze(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ze(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ze(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Np{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new YD;switch(i.type){case"firstParty":return new eM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ze(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=i1.get(r);i&&(Me(Y5,"Removing Datastore"),i1.delete(r),i.terminate())}(this),Promise.resolve()}}function J5(n,e,r,i={}){var c;n=ko(n,Np);const s=lu(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${r}`;s&&(v2(`https://${l}`),_2("Firestore",!0)),o.host!==kS&&o.host!==l&&Gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:i};if(!So(u,a)&&(n._setSettings(u),i.mockUserToken)){let d,h;if(typeof i.mockUserToken=="string")d=i.mockUserToken,h=jn.MOCK_USER;else{d=vO(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new ze(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new jn(m)}n._authCredentials=new XD(new fI(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Pp(this.firestore,e,this._query)}}class ln{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,i){if(dh(r,ln._jsonSchema))return new ln(e,i||null,new $e(kt.fromString(r.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:en("string",ln._jsonSchemaVersion),referencePath:en("string")};class Eo extends Pp{constructor(e,r,i){super(e,r,d0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new $e(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function Vm(n,e,...r){if(n=tn(n),dI("collection","path",e),n instanceof Np){const i=kt.fromString(e,...r);return wx(i),new Eo(n,null,i)}{if(!(n instanceof ln||n instanceof Eo))throw new ze(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kt.fromString(e,...r));return wx(i),new Eo(n.firestore,null,i)}}function ua(n,e,...r){if(n=tn(n),arguments.length===1&&(e=o0.newId()),dI("doc","path",e),n instanceof Np){const i=kt.fromString(e,...r);return _x(i),new ln(n,null,new $e(i))}{if(!(n instanceof ln||n instanceof Eo))throw new ze(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(kt.fromString(e,...r));return _x(i),new ln(n.firestore,n instanceof Eo?n.converter:null,new $e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iS(this,"async_queue_retry"),this._c=()=>{const i=Mm();i&&Me(a1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const r=Mm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Mm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Is;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!du(e))throw e;Me(a1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Os("INTERNAL UNHANDLED ERROR: ",u1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=r,r}enqueueAfterDelay(e,r,i){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=k0.createAndSchedule(this,e,r,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Be(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function u1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vh extends Np{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new l1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function Z5(n,e){const r=typeof n=="object"?n:Gv(),i=typeof n=="string"?n:bd,s=Ua(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=gO("firestore");o&&J5(s,...o)}return s}function Rp(n){if(n._terminated)throw new ze(_e.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eL(n),n._firestoreClient}function eL(n){var i,s,o,a;const e=n._freezeSettings(),r=X5(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new q5(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mr(bn.fromBase64String(e))}catch(r){throw new ze(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Mr(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dh(e,Mr._jsonSchema))return Mr.fromBase64String(e.bytes)}}Mr._jsonSchemaVersion="firestore/bytes/1.0",Mr._jsonSchema={type:en("string",Mr._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ze(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ze(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ze(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(dh(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:en("string",Hi._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dh(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new gi(e.vectorValues);throw new ze(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:en("string",gi._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class nL{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms):new ph(e,this.data,r,this.fieldTransforms)}}class CS{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function AS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{dataSource:n})}}class j0{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new j0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Rd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AS(this.dataSource)&&tL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class rL{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||kp(e)}createContext(e,r,i,s=!1){return new j0({dataSource:e,methodName:r,targetDoc:i,path:_n.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NS(n){const e=n._freezeSettings(),r=kp(n._databaseId);return new rL(n._databaseId,!!e.ignoreUndefinedProperties,r)}function PS(n,e,r,i,s,o={}){const a=n.createContext(o.merge||o.mergeFields?2:0,e,r,s);D0("Data must be an object, but it was:",a,i);const l=RS(i,a);let u,c;if(o.merge)u=new yr(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const m=Yc(e,h,r);if(!a.contains(m))throw new ze(_e.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);DS(d,m)||d.push(m)}u=new yr(d),c=a.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=a.fieldTransforms;return new nL(new er(l),u,c)}class Op extends O0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Op}}function iL(n,e,r,i){const s=n.createContext(1,e,r);D0("Data must be an object, but it was:",s,i);const o=[],a=er.empty();Vo(i,(u,c)=>{const d=jS(e,u,r);c=tn(c);const h=s.childContextForFieldPath(d);if(c instanceof Op)o.push(d);else{const m=jp(c,h);m!=null&&(o.push(d),a.set(d,m))}});const l=new yr(o);return new CS(a,l,s.fieldTransforms)}function sL(n,e,r,i,s,o){const a=n.createContext(1,e,r),l=[Yc(e,i,r)],u=[s];if(o.length%2!=0)throw new ze(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(Yc(e,o[m])),u.push(o[m+1]);const c=[],d=er.empty();for(let m=l.length-1;m>=0;--m)if(!DS(c,l[m])){const _=l[m];let w=u[m];w=tn(w);const I=a.childContextForFieldPath(_);if(w instanceof Op)c.push(_);else{const P=jp(w,I);P!=null&&(c.push(_),d.set(_,P))}}const h=new yr(c);return new CS(d,h,a.fieldTransforms)}function jp(n,e){if(OS(n=tn(n)))return D0("Unsupported field value:",e,n),RS(n,e);if(n instanceof O0)return function(i,s){if(!AS(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=jp(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ct.fromDate(i);return{timestampValue:Cd(s.serializer,o)}}if(i instanceof Ct){const o=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cd(s.serializer,o)}}if(i instanceof Hi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mr)return{bytesValue:KI(s.serializer,i._byteString)};if(i instanceof ln){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:v0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof gi)return function(a,l){const u=a instanceof gi?a.toArray():a;return{mapValue:{fields:{[bI]:{stringValue:EI},[Ed]:{arrayValue:{values:u.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return p0(l.serializer,d)})}}}}}}(i,s);if(ZI(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${a0(i)}`)}(n,e)}function RS(n,e){const r={};return gI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(n,(i,s)=>{const o=jp(s,e.childContextForField(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function OS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof Hi||n instanceof Mr||n instanceof ln||n instanceof O0||n instanceof gi||ZI(n))}function D0(n,e,r){if(!OS(r)||!pI(r)){const i=a0(r);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Yc(n,e,r){if((e=tn(e))instanceof R0)return e._internalPath;if(typeof e=="string")return jS(n,e);throw Rd("Field path arguments must be of type string or ",n,!1,void 0,r)}const oL=new RegExp("[~\\*/\\[\\]]");function jS(n,e,r){if(e.search(oL)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new R0(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Rd(n,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new ze(_e.INVALID_ARGUMENT,l+n+u)}function DS(n,e){return n.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{convertValue(e,r="none"){switch(Po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Vo(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var i,s,o;const r=(o=(s=(i=e.fields)==null?void 0:i[Ed].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Kt(a.doubleValue));return new gi(r)}convertGeoPoint(e){return new Hi(Kt(e.latitude),Kt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=wp(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Hc(e));default:return null}}convertTimestamp(e){const r=Ao(e);return new Ct(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=kt.fromString(e);mt(JI(i),9688,{name:e});const s=new Kc(i.get(1),i.get(3)),o=new $e(i.popFirst(5));return s.isEqual(r)||Os(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends aL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,r)}}const c1="@firebase/firestore",h1="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(Yc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class lL extends LS{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ze(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function VS(n,e,r){let i;return i=n?r&&(r.merge||r.mergeFields)?n.toFirestore(e,r):n.toFirestore(e):e,i}class ec{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends LS{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(Yc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ba._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:en("string",ba._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class Mf extends ba{data(e={}){return super.data(e)}}class Dl{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new ec(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Mf(this._firestore,this._userDataWriter,i.key,i,new ec(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ze(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Mf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ec(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Mf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ec(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:cL(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dl._jsonSchemaVersion="firestore/querySnapshot/1.0",Dl._jsonSchema={type:en("string",Dl._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=NS(e)}set(e,r,i){this._verifyNotCommitted();const s=Fm(e,this._firestore),o=VS(s.converter,r,i),a=PS(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,$r.none())),this}update(e,r,i,...s){this._verifyNotCommitted();const o=Fm(e,this._firestore);let a;return a=typeof(r=tn(r))=="string"||r instanceof R0?sL(this._dataReader,"WriteBatch.update",o._key,r,i,s):iL(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new m0(r._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fm(n,e){if((n=tn(n)).firestore!==e)throw new ze(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n){n=ko(n,ln);const e=ko(n.firestore,vh),r=Rp(e);return W5(r,n._key).then(i=>fL(e,n,i))}function zm(n){n=ko(n,Pp);const e=ko(n.firestore,vh),r=Rp(e),i=new MS(e);return uL(n._query),G5(r,n._query).then(s=>new Dl(e,i,n,s))}function f1(n,e,r){n=ko(n,ln);const i=ko(n.firestore,vh),s=VS(n.converter,e,r),o=NS(i);return FS(i,[PS(o,"setDoc",n._key,s,n.converter!==null,r).toMutation(n._key,$r.none())])}function FS(n,e){const r=Rp(n);return Q5(r,e)}function fL(n,e,r){const i=r.docs.get(e._key),s=new MS(n);return new ba(n,s,e._key,i,new ec(r.hasPendingWrites,r.fromCache),e.converter)}function Um(n){return n=ko(n,vh),Rp(n),new hL(n,e=>FS(n,e))}(function(e,r=!0){QD(uu),Wi(new vi("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new vh(new JD(i.getProvider("auth-internal")),new tM(a,i.getProvider("app-check-internal")),vM(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Ur(c1,h1,e),Ur(c1,h1,"esm2020")})();const zS="@firebase/installations",M0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=1e4,$S=`w:${M0}`,BS="FIS_v2",dL="https://firebaseinstallations.googleapis.com/v1",pL=60*60*1e3,mL="installations",gL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ja=new za(mL,gL,yL);function qS(n){return n instanceof _i&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS({projectId:n}){return`${dL}/projects/${n}/installations`}function KS(n){return{token:n.token,requestStatus:2,expiresIn:_L(n.expiresIn),creationTime:Date.now()}}async function WS(n,e){const i=(await e.json()).error;return ja.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function GS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vL(n,{refreshToken:e}){const r=GS(n);return r.append("Authorization",wL(e)),r}async function QS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function _L(n){return Number(n.replace("s","000"))}function wL(n){return`${BS} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL({appConfig:n,heartbeatServiceProvider:e},{fid:r}){const i=HS(n),s=GS(n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:BS,appId:n.appId,sdkVersion:$S},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await QS(()=>fetch(i,l));if(u.ok){const c=await u.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:KS(c.authToken)}}else throw await WS("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=/^[cdef][\w-]{21}$/,Iy="";function TL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=IL(n);return EL.test(r)?r:Iy}catch{return Iy}}function IL(n){return bL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new Map;function JS(n,e){const r=Dp(n);ZS(r,e),SL(r,e)}function ZS(n,e){const r=XS.get(n);if(r)for(const i of r)i(e)}function SL(n,e){const r=kL();r&&r.postMessage({key:n,fid:e}),CL()}let ga=null;function kL(){return!ga&&"BroadcastChannel"in self&&(ga=new BroadcastChannel("[Firebase] FID Change"),ga.onmessage=n=>{ZS(n.data.key,n.data.fid)}),ga}function CL(){XS.size===0&&ga&&(ga.close(),ga=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="firebase-installations-database",NL=1,Da="firebase-installations-store";let $m=null;function L0(){return $m||($m=I2(AL,NL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Da)}}})),$m}async function Od(n,e){const r=Dp(n),s=(await L0()).transaction(Da,"readwrite"),o=s.objectStore(Da),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&JS(n,e.fid),e}async function ek(n){const e=Dp(n),i=(await L0()).transaction(Da,"readwrite");await i.objectStore(Da).delete(e),await i.done}async function Mp(n,e){const r=Dp(n),s=(await L0()).transaction(Da,"readwrite"),o=s.objectStore(Da),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&JS(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V0(n){let e;const r=await Mp(n.appConfig,i=>{const s=PL(i),o=RL(n,s);return e=o.registrationPromise,o.installationEntry});return r.fid===Iy?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function PL(n){const e=n||{fid:TL(),registrationStatus:0};return tk(e)}function RL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ja.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=OL(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jL(n)}:{installationEntry:e}}async function OL(n,e){try{const r=await xL(n,e);return Od(n.appConfig,r)}catch(r){throw qS(r)&&r.customData.serverCode===409?await ek(n.appConfig):await Od(n.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function jL(n){let e=await d1(n.appConfig);for(;e.registrationStatus===1;)await YS(100),e=await d1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await V0(n);return i||r}return e}function d1(n){return Mp(n,e=>{if(!e)throw ja.create("installation-not-found");return tk(e)})}function tk(n){return DL(n)?{fid:n.fid,registrationStatus:0}:n}function DL(n){return n.registrationStatus===1&&n.registrationTime+US<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML({appConfig:n,heartbeatServiceProvider:e},r){const i=LL(n,r),s=vL(n,r),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:$S,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await QS(()=>fetch(i,l));if(u.ok){const c=await u.json();return KS(c)}else throw await WS("Generate Auth Token",u)}function LL(n,{fid:e}){return`${HS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(n,e=!1){let r;const i=await Mp(n.appConfig,o=>{if(!nk(o))throw ja.create("not-registered");const a=o.authToken;if(!e&&zL(a))return o;if(a.requestStatus===1)return r=VL(n,e),o;{if(!navigator.onLine)throw ja.create("app-offline");const l=$L(o);return r=FL(n,l),l}});return r?await r:i.authToken}async function VL(n,e){let r=await p1(n.appConfig);for(;r.authToken.requestStatus===1;)await YS(100),r=await p1(n.appConfig);const i=r.authToken;return i.requestStatus===0?F0(n,e):i}function p1(n){return Mp(n,e=>{if(!nk(e))throw ja.create("not-registered");const r=e.authToken;return BL(r)?{...e,authToken:{requestStatus:0}}:e})}async function FL(n,e){try{const r=await ML(n,e),i={...e,authToken:r};return await Od(n.appConfig,i),r}catch(r){if(qS(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await ek(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Od(n.appConfig,i)}throw r}}function nk(n){return n!==void 0&&n.registrationStatus===2}function zL(n){return n.requestStatus===2&&!UL(n)}function UL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+pL}function $L(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function BL(n){return n.requestStatus===1&&n.requestTime+US<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(n){const e=n,{installationEntry:r,registrationPromise:i}=await V0(e);return i?i.catch(console.error):F0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(n,e=!1){const r=n;return await KL(r),(await F0(r,e)).token}async function KL(n){const{registrationPromise:e}=await V0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(n){if(!n||!n.options)throw Bm("App Configuration");if(!n.name)throw Bm("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!n.options[r])throw Bm(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Bm(n){return ja.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="installations",GL="installations-internal",QL=n=>{const e=n.getProvider("app").getImmediate(),r=WL(e),i=Ua(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},YL=n=>{const e=n.getProvider("app").getImmediate(),r=Ua(e,rk).getImmediate();return{getId:()=>qL(r),getToken:s=>HL(r,s)}};function XL(){Wi(new vi(rk,QL,"PUBLIC")),Wi(new vi(GL,YL,"PRIVATE"))}XL();Ur(zS,M0);Ur(zS,M0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="analytics",JL="firebase_id",ZL="origin",e6=60*1e3,t6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",z0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new pp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_r=new za("analytics","Analytics",n6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(n){if(!n.startsWith(z0)){const e=_r.create("invalid-gtag-resource",{gtagURL:n});return Wn.warn(e.message),""}return n}function ik(n){return Promise.all(n.map(e=>e.catch(r=>r)))}function i6(n,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,e)),r}function s6(n,e){const r=i6("firebase-js-sdk-policy",{createScriptURL:r6}),i=document.createElement("script"),s=`${z0}?l=${n}&id=${e}`;i.src=r?r==null?void 0:r.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function o6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function a6(n,e,r,i,s,o){const a=i[s];try{if(a)await e[a];else{const u=(await ik(r)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(l){Wn.error(l)}n("config",s,o)}async function l6(n,e,r,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await ik(r);for(const u of a){const c=l.find(h=>h.measurementId===u),d=c&&e[c.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,s||{})}catch(o){Wn.error(o)}}function u6(n,e,r,i){async function s(o,...a){try{if(o==="event"){const[l,u]=a;await l6(n,e,r,l,u)}else if(o==="config"){const[l,u]=a;await a6(n,e,r,i,l,u)}else if(o==="consent"){const[l,u]=a;n("consent",l,u)}else if(o==="get"){const[l,u,c]=a;n("get",l,u,c)}else if(o==="set"){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Wn.error(l)}}return s}function c6(n,e,r,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=u6(o,n,e,r),{gtagCore:o,wrappedGtag:window[s]}}function h6(n){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(z0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=30,d6=1e3;class p6{constructor(e={},r=d6){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sk=new p6;function m6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function g6(n){var a;const{appId:e,apiKey:r}=n,i={method:"GET",headers:m6(r)},s=t6.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw _r.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function y6(n,e=sk,r){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw _r.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw _r.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new w6;return setTimeout(async()=>{l.abort()},e6),ok({appId:i,apiKey:s,measurementId:o},a,l,e)}async function ok(n,{throttleEndTimeMillis:e,backoffCount:r},i,s=sk){var l;const{appId:o,measurementId:a}=n;try{await v6(i,e)}catch(u){if(a)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await g6(n);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!_6(c)){if(s.deleteThrottleMetadata(o),a)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const d=Number((l=c==null?void 0:c.customData)==null?void 0:l.httpStatus)===503?qw(r,s.intervalMillis,f6):qw(r,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:r+1};return s.setThrottleMetadata(o,h),Wn.debug(`Calling attemptFetch again in ${d} millis`),ok(n,h,i,s)}}function v6(n,e){return new Promise((r,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);n.addEventListener(()=>{clearTimeout(o),i(_r.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _6(n){if(!(n instanceof _i)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class w6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function x6(n,e,r,i,s){if(s&&s.global){n("event",r,i);return}else{const o=await e,a={...i,send_to:o};n("event",r,a)}}async function b6(n,e,r,i){if(i&&i.global){const s={};for(const o of Object.keys(r))s[`user_properties.${o}`]=r[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E6(){if(x2())try{await b2()}catch(n){return Wn.warn(_r.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Wn.warn(_r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function T6(n,e,r,i,s,o,a){const l=y6(n);l.then(m=>{r[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Wn.error(m)),e.push(l);const u=E6().then(m=>{if(m)return i.getId()}),[c,d]=await Promise.all([l,u]);h6(o)||s6(o,c.measurementId),s("js",new Date);const h=(a==null?void 0:a.config)??{};return h[ZL]="firebase",h.update=!0,d!=null&&(h[JL]=d),s("config",c.measurementId,h),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.app=e}_delete(){return delete Ml[this.app.options.appId],Promise.resolve()}}let Ml={},m1=[];const g1={};let qm="dataLayer",S6="gtag",y1,U0,v1=!1;function k6(){const n=[];if(w2()&&n.push("This is a browser extension environment."),kO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),r=_r.create("invalid-analytics-context",{errorInfo:e});Wn.warn(r.message)}}function C6(n,e,r){k6();const i=n.options.appId;if(!i)throw _r.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _r.create("no-api-key");if(Ml[i]!=null)throw _r.create("already-exists",{id:i});if(!v1){o6(qm);const{wrappedGtag:o,gtagCore:a}=c6(Ml,m1,g1,qm,S6);U0=o,y1=a,v1=!0}return Ml[i]=T6(n,m1,g1,e,y1,qm,r),new I6(n)}function A6(n=Gv()){n=tn(n);const e=Ua(n,jd);return e.isInitialized()?e.getImmediate():N6(n)}function N6(n,e={}){const r=Ua(n,jd);if(r.isInitialized()){const s=r.getImmediate();if(So(e,r.getOptions()))return s;throw _r.create("already-initialized")}return r.initialize({options:e})}function P6(n,e,r){n=tn(n),b6(U0,Ml[n.app.options.appId],e,r).catch(i=>Wn.error(i))}function R6(n,e,r,i){n=tn(n),x6(U0,Ml[n.app.options.appId],e,r,i).catch(s=>Wn.error(s))}const _1="@firebase/analytics",w1="0.10.19";function O6(){Wi(new vi(jd,(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return C6(i,s,r)},"PUBLIC")),Wi(new vi("analytics-internal",n,"PRIVATE")),Ur(_1,w1),Ur(_1,w1,"esm2020");function n(e){try{const r=e.getProvider(jd).getImmediate();return{logEvent:(i,s,o)=>R6(r,i,s,o),setUserProperties:(i,s)=>P6(r,i,s)}}catch(r){throw _r.create("interop-component-reg-failed",{reason:r})}}}O6();const ak={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"};ak.apiKey||console.warn("Firebase API Key is missing. Cloud sync will not work.");const $0=S2(ak),Hm=WD($0),j6=new ys,ii=Z5($0);typeof window<"u"&&A6($0);const lk=de.createContext(),zo=()=>de.useContext(lk),D6=({children:n})=>{const e=Sf(()=>bt.contacts.orderBy("lastUpdated").reverse().toArray()),r=Sf(()=>bt.schedules.orderBy("date").toArray()),i=Sf(()=>bt.settings.get("userProfile")),[s,o]=de.useState(null),[a,l]=de.useState(null),[u,c]=de.useState(!1),[d,h]=de.useState(!1);de.useEffect(()=>{const j=Dj(Hm,K=>{l(K)});return()=>j()},[]);const m=async()=>{try{const K=(await nD(Hm,j6)).user,G=ua(ii,"users",K.uid);return(await Ty(G)).exists()&&await bt.contacts.count()===0&&window.confirm("")&&(l(K),await I()),K}catch(j){throw console.error("Login Error:",j),j}},_=async()=>{try{await Mj(Hm)}catch(j){console.error("Logout Error:",j)}},w=async()=>{if(!a){console.error("Sync Error: No user logged in");return}c(!0);try{const j=await bt.contacts.toArray(),K=await bt.schedules.toArray(),G=await bt.settings.get("userProfile")||{},Z=H=>H==null?null:H instanceof Date?H.toISOString():Array.isArray(H)?H.map($=>Z($)):typeof H=="object"?Object.entries(H).reduce(($,[ne,fe])=>(fe!==void 0&&($[ne]=Z(fe)),$),{}):H,pe=ua(ii,"users",a.uid);console.log("Attempting to write profile to:",pe.path),await f1(pe,{profile:Z(G),lastSynced:new Date().toISOString(),email:a.email||""},{merge:!0}),console.log("Profile sync successful");const re=async(H,$)=>{const ne=Vm(ii,"users",a.uid,H);console.log(`Syncing ${H}, items: ${$.length}`);let fe=[];try{fe=(await zm(ne)).docs.map(He=>He.id)}catch(De){throw console.error(`Error fetching existing ${H}:`,De),De.code==="permission-denied"?new Error(` ${H} `):De}const ue=$.map(De=>De.id).filter(Boolean),ge=fe.filter(De=>!ue.includes(De));let Oe=Um(ii),Le=0;for(const De of ge)Oe.delete(ua(ne,De)),Le++,Le===500&&(await Oe.commit(),Oe=Um(ii),Le=0);for(const De of $){if(!De.id)continue;const He=Z(De);Oe.set(ua(ne,De.id),He),Le++,Le===500&&(await Oe.commit(),Oe=Um(ii),Le=0)}Le>0&&await Oe.commit()};await re("contacts",j),await re("schedules",K),console.log("Synced to cloud successfully (Mirror Mode)")}catch(j){throw console.error("Sync Error Detailed:",j),j.code==="permission-denied"||j.message.includes("permission-denied")?new Error(" Firebase Rules "):new Error(`: ${j.message}`)}finally{c(!1)}},I=async()=>{if(a){c(!0);try{const j=ua(ii,"users",a.uid),K=await Ty(j);if(K.exists()){const fe=K.data();fe.profile&&await bt.settings.put({...fe.profile,id:"userProfile"})}const G=fe=>{if(!fe||typeof fe!="object")return fe;const ue=Array.isArray(fe)?[]:{};for(const[ge,Oe]of Object.entries(fe))typeof Oe=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(Oe)?ue[ge]=new Date(Oe):typeof Oe=="object"?ue[ge]=G(Oe):ue[ge]=Oe;return ue},Z=Vm(ii,"users",a.uid,"contacts"),pe=await zm(Z),re=[];pe.forEach(fe=>{re.push(G(fe.data()))}),re.length>0&&(await bt.contacts.clear(),await bt.contacts.bulkPut(re));const H=Vm(ii,"users",a.uid,"schedules"),$=await zm(H),ne=[];$.forEach(fe=>{ne.push(G(fe.data()))}),ne.length>0&&(await bt.schedules.clear(),await bt.schedules.bulkPut(ne)),console.log("Synced from cloud successfully (Mirror Mode)")}catch(j){throw console.error("Download Error:",j),j}finally{c(!1)}}};de.useEffect(()=>{(async()=>{await bt.settings.get("userProfile")||await bt.settings.add({id:"userProfile",name:"",bio:"",avatar:"",themeColor:"#2b6cee",links:[],categories:["","","","",""]})})()},[]),de.useEffect(()=>{if(i!=null&&i.themeColor){document.documentElement.style.setProperty("--primary-color",i.themeColor);const j=i.themeColor.replace("#",""),K=parseInt(j.substring(0,2),16),G=parseInt(j.substring(2,4),16),Z=parseInt(j.substring(4,6),16);document.documentElement.style.setProperty("--primary-color-rgb",`${K}, ${G}, ${Z}`)}},[i==null?void 0:i.themeColor]);const P=async j=>{const K=crypto.randomUUID();return await bt.contacts.add({...j,id:K,lastUpdated:new Date}),a&&w().catch(console.error),K},b=async(j,K)=>{h(!0),await bt.contacts.update(j,{...K,lastUpdated:new Date}),a&&w().catch(console.error)},T=async(j,K)=>await bt.contacts.update(j,{position:K}),A=async j=>{await bt.settings.update("userProfile",j),a&&w().catch(console.error)},R=async j=>{await bt.contacts.delete(j),a&&w().catch(console.error)},M=async()=>{if(!a)throw new Error("");const j=await bt.settings.get("userProfile"),K=ua(ii,"public_profiles",a.uid),G={name:j.name,avatar:j.avatar,bio:j.bio,links:j.links||[],uid:a.uid,updatedAt:new Date};return await f1(K,G),a&&w().catch(console.error),a.uid},U=async(j,K)=>{const G=await bt.contacts.get(j);if(G){const Z=[...G.memories||[],{...K,date:K.date||new Date}];await bt.contacts.update(j,{memories:Z,lastUpdated:new Date}),a&&w().catch(console.error)}},[N,C]=de.useState(null),D=(j,K="")=>new Promise(G=>{C({title:j,placeholder:K,onConfirm:Z=>{C(null),G(Z)},onCancel:()=>{C(null),G(null)}})}),L=async j=>{const K=crypto.randomUUID();return await bt.schedules.add({...j,id:K}),a&&w().catch(console.error),K},V=async(j,K)=>{await bt.schedules.update(j,K),a&&w().catch(console.error)},B=async j=>{await bt.schedules.delete(j),a&&w().catch(console.error)};return y.jsxs(lk.Provider,{value:{contacts:e,schedules:r,currentContactId:s,setCurrentContactId:o,userProfile:i,updateContactPosition:T,updateProfile:A,publishProfile:M,addContact:P,updateContact:b,deleteContact:R,addMemory:U,addSchedule:L,updateSchedule:V,deleteSchedule:B,customPrompt:D,promptConfig:N,setPromptConfig:C,currentUser:a,login:m,logout:_,syncToCloud:w,syncFromCloud:I,isSyncing:u,unsavedChanges:d,setUnsavedChanges:h},children:[n,N&&y.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[y.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:N.title}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:N.placeholder,onKeyDown:j=>{j.key==="Enter"&&N.onConfirm(j.target.value),j.key==="Escape"&&N.onCancel()},id:"custom-prompt-input"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:N.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:()=>{const j=document.getElementById("custom-prompt-input").value;N.onConfirm(j)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},M6=()=>{const n=Lo(),{contacts:e,addContact:r,updateContact:i,addMemory:s,userProfile:o,updateProfile:a,customPrompt:l,schedules:u,currentUser:c}=zo(),[d,h]=de.useState(!1),[m,_]=de.useState(!1),[w,I]=de.useState(!1),[P,b]=de.useState(!1),[T,A]=de.useState(!1),R=de.useMemo(()=>c?`${window.location.origin+window.location.pathname.replace(/\/$/,"")}/p/${c.uid}`:null,[c]),M=[{icon:"auto_awesome_motion",title:"",desc:"",color:"text-primary"},{icon:"qr_code_2",title:"",desc:" QR  QR Code",color:"text-amber-400"},{icon:"hub",title:"",desc:"",color:"text-indigo-400"},{icon:"search",title:"",desc:"",color:"text-purple-400"},{icon:"calendar_month",title:"",desc:"",color:"text-emerald-400"},{icon:"cloud_sync",title:"100% ",desc:" Google",color:"text-blue-400"}],U=de.useMemo(()=>{if(!u||!e)return[];const Ie=new Date;return Ie.setHours(0,0,0,0),u.filter(Je=>{const _t=new Date(Je.date);_t.setHours(0,0,0,0);const Tn=Math.ceil((_t.getTime()-Ie.getTime())/(1e3*60*60*24));return Tn>=0&&Tn<=3}).map(Je=>({...Je,diffDays:Math.ceil((new Date(Je.date).getTime()-Ie.getTime())/(1e3*60*60*24))}))},[u,e]),[N,C]=de.useState(!1),[D,L]=de.useState(""),[V,B]=de.useState(null),[j,K]=de.useState(""),[G,Z]=de.useState(""),[pe,re]=de.useState(""),[H,$]=de.useState(""),[ne,fe]=de.useState(""),[ue,ge]=de.useState(new Date().toISOString().split("T")[0]),[Oe,Le]=de.useState("synced"),[De,He]=de.useState(!1),Re=de.useMemo(()=>(o==null?void 0:o.categories)||["","","","",""],[o]);vt.useEffect(()=>{Re.length>0&&!ne&&fe(Re[0])},[Re]);const hn=de.useMemo(()=>D.trim()?(e==null?void 0:e.filter(Ie=>{var Je,_t;return Ie.name.toLowerCase().includes(D.toLowerCase())||((Je=Ie.company)==null?void 0:Je.toLowerCase().includes(D.toLowerCase()))||((_t=Ie.tags)==null?void 0:_t.some(Tn=>Tn.toLowerCase().includes(D.toLowerCase())))}).sort((Ie,Je)=>new Date(Je.lastUpdated).getTime()-new Date(Ie.lastUpdated).getTime()))||[]:[],[e,D]),fn=async()=>{let Ie=V;if(!Ie&&G.trim())Ie=await r({name:G,phone:H,tags:[ne,""],importance:50,birthday:pe||null,memories:[]});else if(Ie&&(pe||H)){const Je={};pe&&(Je.birthday=pe),H&&(Je.phone=H),await i(Ie,Je)}Ie&&j.trim()&&(await s(Ie,{content:j,location:"",date:new Date(ue)}),C(!1),L(""),B(null),K(""),Z(""),re(""),$(""),fe(Re[0]||""),ge(new Date().toISOString().split("T")[0]),h(!1),navigator.vibrate&&navigator.vibrate(50))},ut=async Ie=>{const Je=Ie.target.files[0];if(Je){_(!0);try{const _t=new FileReader,Uo=await new Promise(Ce=>{_t.onloadend=()=>Ce(_t.result),_t.readAsDataURL(Je)}),Vt=(await YR.recognize(Je,"chi_tra+eng",{logger:Ce=>console.log(Ce)})).data.text,Gt=Vt.split(`
`).map(Ce=>Ce.trim()).filter(Boolean),nn=Vt.replace(/\r/g,""),$o=nn.split(`
`).map(Ce=>Ce.trim()).filter(Ce=>Ce.length>=2),Tr=$o.filter(Ce=>Ce.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,"").length>=2);let Qt="",In="",Fn="",$t="",ar="";const Zi=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/,Ls=nn.match(Zi);Ls&&(Fn=Ls[0].toLowerCase());const es=["","","TEL","Mobile","","M","T","Cell","Phone"],lr=$o.find(Ce=>{const et=Ce.toUpperCase();return es.some(Sn=>et.includes(Sn.toUpperCase()))&&/\d/.test(Ce)});if(lr){let Ce=lr.replace(/[^\d+]/g,"");Ce.length>=9&&(Ce.startsWith("886")&&(Ce="0"+Ce.slice(3)),Ce.startsWith("+886")&&(Ce="0"+Ce.slice(4)),In=Ce)}if(!In){const Ce=[/(?:\+?886|0)9\d{2}[-\s]?\d{3}[-\s]?\d{3}/,/(?:\+?886|0)\d{1,2}[-\s]?\d{3,4}[-\s]?\d{4}/,/886[-\s]?9\d{2}[-\s]?\d{3}[-\s]?\d{3}/,/09\d{8}/];for(const et of Ce){const Sn=nn.match(et);if(Sn){let Sr=Sn[0].replace(/[^\d+]/g,"");if(Sr.startsWith("886")&&(Sr="0"+Sr.slice(3)),Sr.startsWith("+886")&&(Sr="0"+Sr.slice(4)),Sr.length>=9){In=Sr;break}}}}const Xn=["","","","","Co.","Ltd.","Inc.","Corp.","","","","","","","","","","","","","","","","",""],xi=["","","","","","","","","","","","","","Manager","Director","CEO","Founder","","","","","Team Lead","Lead","Developer","Associate","Partner",""],zn=["","","","","","","","","","","Address","","","","FAX","www","http","","Tel","Email","","Website","Zip"],je=Tr.filter(Ce=>Xn.some(et=>Ce.includes(et))&&!zn.some(et=>Ce.includes(et))&&!/^\d{3,6}/.test(Ce)&&Ce.length>3);je.length>0&&($t=je.find(et=>et.includes("")||et.includes(""))||je.sort((et,Sn)=>Sn.length-et.length)[0],$t=$t.replace(/[^\u4e00-\u9fa5a-zA-Z0-9\s()]/g,"").trim());const Ir=Tr.filter(Ce=>xi.some(et=>Ce.toUpperCase().includes(et.toUpperCase()))&&Ce.length<40&&!Ce.includes("@")&&!Ce.includes("."));Ir.length>0&&(ar=Ir.find(Ce=>!Xn.some(et=>Ce.includes(et)))||Ir[0],ar=ar.replace(/[^\u4e00-\u9fa5a-zA-Z\s]/g,"").trim());const dn=Tr.filter(Ce=>!(Ce.includes("@")||Ce.match(/\d{8,}/)||zn.some(et=>Ce.includes(et))||Xn.some(et=>Ce.includes(et))&&Ce.length>8||Ce.includes("")||Ce.includes("")||Ce.includes("")||Ce.includes("")||Ce.includes("")||Ce.includes("")||Ce.includes("FAX")||Ce.includes("")||Ce.includes("TEL")||Ce.includes("")||Ce.length>20||Ce.length<2)),bi=dn.find(Ce=>/^[\u4e00-\u9fa5]{2,4}[\s/|]+[a-zA-Z\s]+$/.test(Ce)||/^[a-zA-Z\s]+[\s/|]+[\u4e00-\u9fa5]{2,4}$/.test(Ce)),ke=dn.find(Ce=>/^[\u4e00-\u9fa5]{2,3}$/.test(Ce)&&!xi.some(et=>Ce.includes(et))),ts=dn.find(Ce=>/^[A-Z][a-z]+(?:\s[A-Z][a-z]+)+$/.test(Ce));if(bi?Qt=bi:ke?Qt=ke:ts&&(Qt=ts),!Qt&&Fn){const Ce=Fn.split("@")[0];(Ce.includes(".")||Ce.includes("_")||Ce.length>3)&&(Qt=Ce.split(/[._]/).map(et=>et.charAt(0).toUpperCase()+et.slice(1)).join(" "))}if(!Qt&&dn.length>0&&(Qt=dn.sort((Ce,et)=>Ce.length-et.length)[0]),Qt=(Qt||"").replace(/[|/\\_-]/g," ").replace(/[^\u4e00-\u9fa5a-zA-Z\s]/g,"").trim(),Qt.length>5&&/[\u4e00-\u9fa5]/.test(Qt)){const Ce=Qt.match(/[\u4e00-\u9fa5]+/g);Ce&&Ce[0].length>=2&&Ce[0].length<=4&&(Qt=Ce[0])}$t&&($t.includes("")||$t.includes("09"))&&($t=$t.split(/|09/)[0].trim());const Yt=await r({name:Qt,phone:In,email:Fn,company:$t,bio:ar?`${ar}`:"",cardImage:Uo,ocrText:Vt,tags:["OCR "],memories:[{date:new Date,content:`${Qt} (${$t||""})`,location:""}],importance:50});navigator.vibrate&&navigator.vibrate(50),n(`/profile/${Yt}`)}catch(_t){console.error("OCR failed:",_t)}finally{_(!1),h(!1)}}};return y.jsxs("div",{className:"w-full h-full",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 mb-2 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>A(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-amber-400 hover:bg-amber-400/10 hover:border-amber-400/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"qr_code_2"})}),y.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>n("/settings"),children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-primary to-primary/60 p-0.5 shadow-lg shadow-primary/20 relative z-10",children:y.jsx("div",{className:"w-full h-full rounded-[14px] bg-[#0a0a0c] flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar?y.jsx("img",{src:o.avatar,className:"w-full h-full object-cover",alt:"avatar"}):y.jsx("span",{className:"material-symbols-outlined text-white/20 text-2xl",children:"person"})})})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-clip-text",children:""}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"size-1.5 rounded-full bg-primary animate-pulse"}),y.jsx("p",{className:"text-[10px] font-black text-white/30 tracking-[0.2em] uppercase",children:"Nexus Core Active"})]})]})]}),y.jsx("button",{onClick:()=>b(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 hover:border-primary/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"help_outline"})})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{type:"text",placeholder:"...",value:D,onChange:Ie=>L(Ie.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/40 transition-all"})]})]}),U.length>0&&y.jsx("div",{className:"px-6 py-4 animate-in fade-in slide-in-from-top-4 duration-500",children:y.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-[28px] p-5 backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"notification_important"}),y.jsx("h2",{className:"text-xs font-bold text-primary uppercase tracking-widest",children:""})]}),y.jsx("div",{className:"space-y-4",children:U.map(Ie=>y.jsxs("div",{className:"flex items-center justify-between group",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 truncate",children:Ie.title}),y.jsxs("div",{className:"flex gap-2",children:[Ie.contactIds.slice(0,3).map(Je=>{var _t;return y.jsx("button",{onClick:()=>n(`/profile/${Je}`),className:"text-[10px] text-primary/80 font-bold hover:text-primary transition-colors underline decoration-primary/30 underline-offset-2",children:(_t=e.find(Tn=>Tn.id===Je))==null?void 0:_t.name},Je)}),Ie.contactIds.length>3&&y.jsx("span",{className:"text-[10px] text-white/30",children:"..."})]})]}),y.jsxs("div",{className:"text-right shrink-0 ml-4",children:[y.jsx("p",{className:"text-[10px] font-black text-primary uppercase",children:Ie.diffDays===0?"":`${Ie.diffDays} `}),y.jsxs("button",{onClick:()=>n("/vault"),className:"text-[10px] font-bold text-white/30 hover:text-white transition-colors flex items-center gap-1 mt-1",children:["",y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"})]})]})]},Ie.id))})]})}),y.jsx("div",{className:"mb-8 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:["","","",""].map((Ie,Je)=>y.jsx("button",{className:`px-5 py-2.5 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-300 ${Je===0?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white border border-white/5"}`,children:Ie},Ie))})}),y.jsxs("main",{className:"flex-1 pb-32",children:[m&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/5 rounded-3xl border border-white/5 border-dashed",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl animate-pulse"}),y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent relative z-10"})]}),y.jsx("span",{className:"mt-4 text-sm font-medium text-white/40 animate-pulse",children:"..."})]}),(e==null?void 0:e.length)===0&&!m&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-white/20",children:[y.jsx("div",{className:"size-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"database_off"})}),y.jsx("p",{className:"text-sm font-medium",children:""})]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:hn.map(Ie=>{var Je,_t,Tn;return y.jsx("div",{onClick:()=>n(`/profile/${Ie.id}`),className:"glass-card-modern group p-5 rounded-[24px] cursor-pointer",children:y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"size-16 rounded-2xl overflow-hidden bg-black/40 border border-white/10 group-hover:border-primary/40 transition-all duration-500",children:Ie.cardImage?y.jsx("img",{src:Ie.cardImage,alt:Ie.name,className:"size-full object-cover group-hover:scale-110 transition-transform duration-700"}):y.jsx("div",{className:"size-full flex items-center justify-center text-white/10 text-2xl font-black bg-gradient-to-br from-white/5 to-transparent",children:Ie.name[0]})}),Ie.importance>80&&y.jsx("div",{className:"absolute -top-1.5 -right-1.5 size-5 bg-primary rounded-full border-2 border-[#030303] flex items-center justify-center shadow-lg shadow-primary/40",children:y.jsx("span",{className:"material-symbols-outlined text-[10px] text-white font-black",children:"priority_high"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[y.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors truncate",children:Ie.name}),y.jsx("span",{className:"text-[10px] font-medium text-white/20 tracking-wider uppercase",children:new Date(Ie.lastUpdated).toLocaleDateString("zh-TW",{month:"short",day:"numeric"})})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[10px] font-black text-primary px-2.5 py-1 bg-primary/10 rounded-lg border border-primary/20 uppercase tracking-widest",children:((Je=Ie.tags)==null?void 0:Je[0])||""}),y.jsx("p",{className:"text-[13px] text-white/40 truncate italic font-medium",children:((Tn=(_t=Ie.memories)==null?void 0:_t[0])==null?void 0:Tn.content)||"..."})]})]}),y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 -translate-x-2 group-hover:translate-x-0",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary text-xl",children:"chevron_right"})})]})},Ie.id)})})]}),y.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:y.jsxs("div",{className:"relative",children:[d&&y.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[y.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ut})]}),y.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>C(!0),children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),y.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${d?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>h(!d),children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),P&&y.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-white/10 rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"px-8 pt-10 pb-6 text-center border-b border-white/5 bg-gradient-to-b from-primary/10 to-transparent",children:[y.jsx("div",{className:"size-16 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"auto_awesome"})}),y.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-bold text-primary/60 uppercase tracking-[0.2em] mt-1",children:"Nexus Mind Guide"})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto no-scrollbar space-y-6",children:M.map((Ie,Je)=>y.jsxs("div",{className:"flex gap-4 group",children:[y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0 group-hover:bg-white/10 transition-colors",children:y.jsx("span",{className:`material-symbols-outlined text-[20px] ${Ie.color}`,children:Ie.icon})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("h4",{className:"text-xs font-bold text-white/90",children:Ie.title}),y.jsx("p",{className:"text-[10px] leading-relaxed text-white/40 font-medium",children:Ie.desc})]})]},Je))}),y.jsx("div",{className:"p-6 bg-white/5",children:y.jsx("button",{onClick:()=>b(!1),className:"w-full py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 active:scale-95",children:""})})]})}),T&&y.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center px-4 pb-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>A(!1)}),y.jsxs("div",{className:"w-full max-w-[440px] bg-gradient-to-b from-[#1a1c22] to-[#0a0a0c] border border-white/10 rounded-[40px] p-8 relative z-10 animate-in slide-in-from-bottom-full duration-500 shadow-2xl",children:[y.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full mx-auto mb-10"}),y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"size-20 rounded-[28px] bg-amber-400/10 flex items-center justify-center mb-6 ring-1 ring-amber-400/20",children:y.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"qr_code_2"})}),y.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:""}),c?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-white/40 text-sm mb-10 leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),y.jsx("div",{className:"p-6 bg-white rounded-[32px] shadow-2xl relative z-10",children:y.jsx(Kv,{value:R,size:240,level:"H",includeMargin:!0,imageSettings:{src:(o==null?void 0:o.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:48,width:48,excavate:!0}})})]}),y.jsxs("div",{className:"mt-10 w-full p-5 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between group cursor-pointer hover:bg-white/10 transition-all",onClick:()=>{navigator.clipboard.writeText(R),alert("")},children:[y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-1",children:""}),y.jsx("span",{className:"text-xs text-primary font-bold truncate max-w-[200px]",children:R})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors",children:"content_copy"})]})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-white/40 text-sm leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("button",{onClick:login,className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-black font-black text-sm hover:bg-white/90 transition-all active:scale-95 shadow-xl",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})," Google "]})]})]}),y.jsx("button",{onClick:()=>A(!1),className:"w-full h-16 bg-white/5 hover:bg-white/10 text-white font-bold rounded-3xl mt-8 transition-all border border-white/5 active:scale-95",children:""})]})]}),N&&y.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[y.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>C(!1)}),y.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[y.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),y.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),y.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),y.jsx("button",{onClick:()=>C(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:D,onChange:Ie=>{L(Ie.target.value),V||Z(Ie.target.value)}}),V&&y.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[y.jsx("span",{children:""}),y.jsx("button",{onClick:()=>{B(null),L(G)},className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),D&&!V&&y.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:hn.length>0?hn.map(Ie=>{var Je;return y.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{B(Ie.id),L(Ie.name),Z(Ie.name)},children:[y.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:Ie.name}),y.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(Je=Ie.tags)==null?void 0:Je[0]})]},Ie.id)}):y.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",D,""]})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[Re.map(Ie=>y.jsx("button",{onClick:()=>fe(Ie),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${ne===Ie?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:Ie},Ie)),y.jsxs("button",{onClick:async()=>{const Ie=await l("","...");if(Ie){const Je=(o==null?void 0:o.categories)||["","","","",""];Je.includes(Ie)||(a({...o,categories:[...Je,Ie]}),fe(Ie))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:j,onChange:Ie=>K(Ie.target.value)})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"event"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"date",className:"w-1/2 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-white text-[13px] focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:ue,onChange:Ie=>ge(Ie.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"call"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-4 text-white text-[14px] focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:H,onChange:Ie=>$(Ie.target.value)})]})]}),y.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${(V||G)&&j?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!((V||G)&&j),onClick:fn,children:""})]})]})]})]})},L6=()=>{const n=Lo(),{contacts:e,userProfile:r}=zo(),[i,s]=de.useState(""),[o,a]=de.useState(""),l=de.useMemo(()=>["",...(r==null?void 0:r.categories)||["","","","",""]],[r]),u=de.useMemo(()=>{let c=e||[];if(o!==""&&(c=c.filter(d=>{var h;return(h=d.tags)==null?void 0:h.includes(o)})),i.trim()){const d=i.toLowerCase();c=c.filter(h=>{var T,A,R,M,U,N;const m=(T=h.name)==null?void 0:T.toLowerCase().includes(d),_=(A=h.company)==null?void 0:A.toLowerCase().includes(d),w=(R=h.phone)==null?void 0:R.toLowerCase().includes(d),I=(M=h.tags)==null?void 0:M.some(C=>C.toLowerCase().includes(d)),P=(U=h.ocrText)==null?void 0:U.toLowerCase().includes(d),b=(N=h.memories)==null?void 0:N.some(C=>C.content.toLowerCase().includes(d));return m||_||w||I||P||b?(h._matchReason=m?"":_?"":w?"":I?` #${d}`:P?"":"",!0):!1})}else o===""&&(c=c.slice(0,5));return c},[e,i,o]);return y.jsxs("div",{className:"bg-mesh pb-32 overflow-x-hidden",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-12 pb-6 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",onClick:()=>n(-1),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),y.jsx("div",{className:"size-10"})]})]}),y.jsx("div",{className:"px-6 py-6",children:y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 text-[20px] group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{className:"block w-full h-12 pl-12 pr-10 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[14px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:i,onChange:c=>s(c.target.value)}),i&&y.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:y.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>s(""),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),y.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:l.map(c=>y.jsx("button",{onClick:()=>a(c),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${o===c?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:y.jsx("span",{className:"text-xs font-bold tracking-wider",children:c})},c))}),y.jsxs("main",{className:"px-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[y.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:i||o!==""?` (${u.length})`:""}),y.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),y.jsx("div",{className:"grid gap-4",children:u.map(c=>y.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>n(`/profile/${c.id}`),children:y.jsxs("div",{className:"p-5 flex gap-4",children:[y.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:c.cardImage?y.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:c.cardImage,alt:c.name}):y.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[y.jsx("div",{className:"flex items-center gap-2 mb-1",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:c._matchReason||""})}),y.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:c.name}),y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[c.phone&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),y.jsx("span",{className:"text-[11px] font-medium",children:c.phone})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),y.jsx("span",{className:"text-[11px] font-medium",children:new Date(c.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},c.id))}),u.length===0&&y.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),y.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},V6=()=>{var L,V,B,j,K;const{id:n}=KT(),e=Lo(),{updateContact:r,deleteContact:i,userProfile:s,updateProfile:o,customPrompt:a,schedules:l}=zo(),u=Sf(()=>bt.contacts.get(n),[n]),c=de.useMemo(()=>!l||!n?[]:l.filter(G=>G.contactIds.includes(n)),[l,n]),[d,h]=de.useState(!1),[m,_]=de.useState(!1),[w,I]=de.useState(null),[P,b]=de.useState(!1),T=(G,Z)=>{const pe=G.target.files[0];if(!pe)return;const re=new FileReader;re.onloadend=()=>{const H=re.result;I($=>({...$,cardImage:H}))},re.readAsDataURL(pe)};if(!u)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const A=()=>{var G;I({name:u.name,company:u.company||"",birthday:u.birthday||"",phone:u.phone||"",email:u.email||"",tags:((G=u.tags)==null?void 0:G.join(", "))||"",ocrText:u.ocrText||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[],cardImage:u.cardImage||""}),_(!0),h(!1)},R=async()=>{await r(n,{name:w.name,company:w.company,birthday:w.birthday||null,phone:w.phone,email:w.email,tags:w.tags.split(",").map(G=>G.trim()).filter(G=>G),ocrText:w.ocrText,events:w.events,bio:w.bio,links:w.links,gallery:w.gallery,cardImage:w.cardImage}),_(!1)},M=()=>{var Z;const G=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(Z=u.tags)!=null&&Z.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(G),b(!0),setTimeout(()=>b(!1),2e3),h(!1)},U=async()=>{window.confirm(` ${u.name} `)&&(await i(n),e("/"))},N=async G=>{if(window.confirm("")){const Z=[...u.memories];Z.splice(G,1),await r(n,{memories:Z})}},C=async(G,Z)=>{const pe=await a("","...",G);if(pe&&pe!==G){const re=[...s.categories||["","","","",""]];re[Z]=pe,await o({...s,categories:re});const H=w.tags.split(",").map($=>$.trim()).filter($=>$);if(H.includes(G)){const $=H.map(ne=>ne===G?pe:ne);I({...w,tags:$.join(", ")})}}},D=async(G,Z)=>{if(window.confirm(`${G}`)){const pe=(s.categories||["","","","",""]).filter((H,$)=>$!==Z);await o({...s,categories:pe});const re=w.tags.split(",").map(H=>H.trim()).filter(H=>H);if(re.includes(G)){const H=re.filter($=>$!==G);I({...w,tags:H.join(", ")})}}};return y.jsxs("div",{className:"bg-nexus min-h-screen text-white pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-8 pb-4 flex items-center justify-between transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsx("div",{onClick:()=>e(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90 cursor-pointer",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile Analytics"})]}),y.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[y.jsx("button",{onClick:()=>h(!d),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_vert"})}),d&&y.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[y.jsxs("button",{onClick:A,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),y.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),y.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),y.jsxs("button",{onClick:U,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),y.jsx("span",{children:""})]})]})]})]}),y.jsx("div",{className:"px-6 py-4",children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((L=u.tags)==null?void 0:L[0])||""})}),y.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),y.jsxs("div",{className:"flex flex-col gap-1",children:[u.company&&y.jsxs("div",{className:"flex items-center gap-2 text-primary/80 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"business"}),y.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:u.company})]}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 text-white/60 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.email&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.email})]})]})]})})]})}),y.jsxs("div",{className:"px-6 pb-2",children:[c.length>0&&y.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary ml-1",children:""}),y.jsx("div",{className:"space-y-3",children:c.map(G=>{const Z=Math.ceil((new Date(G.date)-new Date().setHours(0,0,0,0))/864e5),pe=Z>=0&&Z<=3;return y.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${pe?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/5":"bg-white/5 border-white/10"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm text-white",children:G.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(G.date).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})})]}),y.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg ${pe?"bg-primary text-white":"bg-white/10 text-white/60"}`,children:Z===0?"":Z<0?"":`${Z} `})]}),pe&&y.jsxs("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-primary animate-pulse",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"info"}),""]})]},G.id)})})]}),m?y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsxs("div",{onClick:()=>document.getElementById("card-image-input").click(),className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/10 group cursor-pointer hover:border-primary/50 transition-all shadow-2xl",children:[w.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})}):y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-white/20",children:[y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_a_photo"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("input",{id:"card-image-input",type:"file",accept:"image/*",className:"hidden",onChange:G=>T(G)})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:w.name,onChange:G=>I({...w,name:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:w.company,onChange:G=>I({...w,company:G.target.value})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:w.phone,onChange:G=>I({...w,phone:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-1/2 bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-3 text-white text-[14px] font-medium focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:w.birthday,onChange:G=>I({...w,birthday:G.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"email",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"example@mail.com",value:w.email,onChange:G=>I({...w,email:G.target.value})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:y.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((s==null?void 0:s.categories)||["","","","",""]).map((G,Z)=>{const pe=w.tags.split(",").map(H=>H.trim()).filter(H=>H),re=pe.includes(G);return y.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-1 py-1.5 rounded-xl text-[11px] font-bold transition-all border ${re?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:[y.jsx("span",{onClick:()=>{let H;re?H=pe.filter($=>$!==G):H=[...pe,G],I({...w,tags:H.join(", ")})},className:"cursor-pointer",children:G}),y.jsxs("div",{className:"flex items-center gap-0.5 ml-1 border-l border-white/10 pl-1",children:[y.jsx("button",{type:"button",onClick:()=>C(G,Z),className:"p-0.5 text-white/20 hover:text-white transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{type:"button",onClick:()=>D(G,Z),className:"p-0.5 text-white/20 hover:text-red-400 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},G)}),y.jsxs("button",{type:"button",onClick:async()=>{const G=await a("","...");if(G){const Z=(s==null?void 0:s.categories)||["","","","",""];if(!Z.includes(G)){o({...s,categories:[...Z,G]});const pe=w.tags.split(",").map(re=>re.trim()).filter(re=>re);I({...w,tags:[...pe,G].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),y.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.bio,onChange:G=>I({...w,bio:G.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>I({...w,links:[...w.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.links.map((G,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-300",children:[y.jsx("input",{className:"w-20 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all shrink-0",placeholder:"",value:G.label,onChange:pe=>{const re=[...w.links];re[Z].label=pe.target.value,I({...w,links:re})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:G.url,onChange:pe=>{const re=[...w.links];re[Z].url=pe.target.value,I({...w,links:re})}}),y.jsx("button",{onClick:()=>I({...w,links:w.links.filter((pe,re)=>re!==Z)}),className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]}),y.jsx("input",{id:"gallery-upload-input",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:G=>{Array.from(G.target.files).forEach(pe=>{const re=new FileReader;re.onloadend=()=>{I(H=>({...H,gallery:[...H.gallery,re.result]}))},re.readAsDataURL(pe)})}})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[w.gallery.map((G,Z)=>y.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[y.jsx("img",{src:G,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),y.jsx("button",{onClick:()=>I({...w,gallery:w.gallery.filter((pe,re)=>re!==Z)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},Z)),y.jsx("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.ocrText,onChange:G=>I({...w,ocrText:G.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),y.jsxs("button",{onClick:()=>I({...w,events:[...w.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.events.map((G,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-200",children:[y.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-2 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-[110px] shrink-0",value:G.date,onChange:pe=>{const re=[...w.events];re[Z].date=pe.target.value,I({...w,events:re})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:G.title,onChange:pe=>{const re=[...w.events];re[Z].title=pe.target.value,I({...w,events:re})}}),y.jsx("button",{onClick:()=>{const pe=[...w.events];pe.splice(Z,1),I({...w,events:pe})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"flex gap-3 pt-6",children:[y.jsx("button",{onClick:R,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),y.jsx("button",{onClick:()=>_(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),y.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:((V=u.ocrText)==null?void 0:V.split(`
`)[0])||""}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 mt-2 text-primary/80 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&y.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((G,Z)=>y.jsxs("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),G.label]},Z))}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[(B=u.tags)==null?void 0:B.map((G,Z)=>y.jsxs("div",{className:`${Z===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",G]},Z)),u.birthday&&y.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})]}),y.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&y.jsxs("div",{className:"px-4 mb-6",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((G,Z)=>y.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:y.jsx("img",{src:G,className:"w-full h-full object-cover",alt:`gallery-${Z}`})},Z))})]}),y.jsxs("div",{className:"px-4",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),y.jsxs("div",{className:"space-y-8",children:[(j=u.memories)==null?void 0:j.map((G,Z)=>y.jsxs("div",{className:`relative ${Z!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[y.jsx("div",{className:`absolute ${Z===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex flex-col flex-1",children:[y.jsx("span",{className:"text-white font-semibold text-sm",children:G.content}),y.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(G.date).toLocaleDateString("zh-TW"),"  ",G.location]})]}),y.jsx("button",{onClick:()=>N(Z),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},Z)),!((K=u.memories)!=null&&K.length)&&y.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),P&&y.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),y.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},F6=()=>{var T;const n=Lo(),{contacts:e,updateContact:r,addMemory:i}=zo(),[s,o]=de.useState(!1),[a,l]=de.useState(""),[u,c]=de.useState(65),[d,h]=de.useState(40),[m,_]=de.useState(null);de.useEffect(()=>{e&&e.length>0&&!m&&(_(e[0].id),c(e[0].importance||50))},[e]);const w=A=>{const R=parseInt(A.target.value);c(R),m&&r(m,{importance:R})},I=async()=>{!a.trim()||!m||(await i(m,{content:a,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),l(""),o(!1))},P=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),I())},b=e==null?void 0:e.find(A=>A.id===m);return y.jsxs("div",{className:"text-white overflow-hidden select-none relative h-screen bg-[#030303]",children:[y.jsxs("div",{className:"absolute top-0 w-full z-50 px-8 pt-6 pb-4 flex justify-between items-center transition-all",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none -z-10"}),y.jsx("div",{className:"text-sm font-black tracking-tighter",onClick:()=>n(-1),children:y.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded-md backdrop-blur-md",children:"9:41"})}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),y.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>o(!0),children:[y.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),y.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),y.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>n("/"),children:[y.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[y.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),y.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[y.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),y.jsxs("div",{className:"text-center py-2",children:[y.jsx("div",{className:"text-sm font-bold truncate w-28",children:(b==null?void 0:b.name)||""}),y.jsx("div",{className:"text-xs text-white/50",children:((T=b==null?void 0:b.tags)==null?void 0:T[0])||""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:u,onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${u}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${u>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${u>50?"text-black/40":"text-white/40"}`,children:""})]})]}),y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:d,onChange:A=>h(parseInt(A.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${d}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${d>50?"text-black/40":"text-white/40"}`,children:"speed"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${d>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>n("/search"),children:y.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),y.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),y.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),s&&y.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),y.jsx("button",{onClick:()=>o(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),y.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:a,onChange:A=>l(A.target.value),onKeyDown:P}),y.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),y.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:I,children:" SAVE TO VAULT"})]})]})}),y.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[y.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),y.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},z6=()=>{const n=Lo(),{contacts:e,schedules:r,addSchedule:i,deleteSchedule:s}=zo(),[o,a]=de.useState(!1),[l,u]=de.useState({title:"",date:"",contactIds:[]}),[c,d]=de.useState(""),h=de.useMemo(()=>e?e.filter(I=>{var P;return I.name.toLowerCase().includes(c.toLowerCase())||((P=I.tags)==null?void 0:P.some(b=>b.toLowerCase().includes(c.toLowerCase())))}):[],[e,c]),m=de.useMemo(()=>{if(!e)return[];const I=[],P=new Date;P.setHours(0,0,0,0),r&&r.forEach(T=>{const A=new Date(T.date);A.setHours(0,0,0,0);const R=Math.ceil((A-P)/(1e3*60*60*24));I.push({id:`schedule-${T.id}`,date:A,title:T.title,description:`: ${T.contactIds.map(M=>{var U;return(U=e.find(N=>N.id===M))==null?void 0:U.name}).filter(Boolean).join(", ")}`,type:"schedule",diffDays:R,isUpcoming:R<=30&&R>=0,contactIds:T.contactIds,scheduleId:T.id})});const b=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(T=>{if(T.birthday){const[A,R,M]=T.birthday.split("-").map(Number),U=new Date(P.getFullYear(),R-1,M);U<P&&U.setFullYear(P.getFullYear()+1);const N=Math.ceil((U-P)/(1e3*60*60*24));I.push({id:`birthday-${T.id}`,contactId:T.id,contactName:T.name,date:U,title:"",description:`${T.name} `,type:"birthday",diffDays:N,isUpcoming:N<=30&&N>=0})}if(T.events&&T.events.forEach((A,R)=>{const M=new Date(A.date);M.setHours(0,0,0,0);const U=Math.ceil((M-P)/(1e3*60*60*24));I.push({id:`event-${T.id}-${R}`,contactId:T.id,contactName:T.name,date:M,title:A.title,description:"",type:A.type||"event",diffDays:U,isUpcoming:U<=30&&U>=0})}),T.memories&&T.memories.forEach((A,R)=>{const M=new Date(A.date);M.setHours(0,0,0,0);const U=Math.ceil((M-P)/(1e3*60*60*24));I.push({id:`memory-${T.id}-${R}`,contactId:T.id,contactName:T.name,date:M,title:"",description:A.content.substring(0,20)+(A.content.length>20?"...":""),type:"memory",diffDays:U,isUpcoming:U<=30&&U>=0});let N;for(;(N=b.exec(A.content))!==null;){const[C,D,L,V]=N,B=D?parseInt(D.replace(/[-/]/,"")):P.getFullYear(),j=new Date(B,parseInt(L)-1,parseInt(V));if(j.setHours(0,0,0,0),!isNaN(j.getTime())){const K=Math.ceil((j-P)/864e5);I.push({id:`extracted-mem-${T.id}-${R}-${N.index}`,contactId:T.id,contactName:T.name,date:j,title:"",description:`: ${C}`,type:"extracted",diffDays:K,isUpcoming:K<=30&&K>=0})}}}),T.ocrText){let A;for(;(A=b.exec(T.ocrText))!==null;){const[R,M,U,N]=A,C=M?parseInt(M.replace(/[-/]/,"")):P.getFullYear(),D=new Date(C,parseInt(U)-1,parseInt(N));if(D.setHours(0,0,0,0),!isNaN(D.getTime())){const L=Math.ceil((D-P)/864e5);I.push({id:`extracted-ocr-${T.id}-${A.index}`,contactId:T.id,contactName:T.name,date:D,title:"/",description:`: ${R}`,type:"extracted",diffDays:L,isUpcoming:L<=30&&L>=0})}}}}),I.sort((T,A)=>A.date-T.date)},[e]),_=m.filter(I=>I.isUpcoming),w=m.filter(I=>!I.isUpcoming);return y.jsxs("div",{className:"pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>n(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"Important Schedules"})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"size-11 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/20",children:y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})})]})]}),y.jsxs("main",{className:"p-4 space-y-8",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),y.jsx("div",{className:"space-y-3",children:_.length>0?_.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${I.type==="birthday"?"bg-pink-500/20 text-pink-500":I.type==="memory"?"bg-blue-500/20 text-blue-500":I.type==="extracted"?"bg-amber-500/20 text-amber-500":I.type==="schedule"?"bg-emerald-500/20 text-emerald-500":"bg-primary/20 text-primary"}`,children:y.jsx("span",{className:"material-symbols-outlined",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-bold text-sm text-white/90 truncate",children:I.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-0.5 truncate",children:I.contactName||""})]}),y.jsxs("div",{className:"text-right shrink-0",children:[y.jsx("p",{className:"text-xs font-bold text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),y.jsx("p",{className:`text-[10px] font-bold ${I.diffDays===0?"text-red-500":"text-primary"}`,children:I.diffDays===0?"":`${I.diffDays} `}),I.type==="schedule"&&y.jsx("button",{onClick:P=>{P.stopPropagation(),window.confirm("")&&s(I.scheduleId)},className:"mt-1 text-red-500/40 hover:text-red-500 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"delete"})})]})]}),y.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:I.description})]})]},I.id)):y.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:y.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),y.jsx("div",{className:"space-y-3",children:w.map(I=>y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>n(`/profile/${I.contactId}`),children:[y.jsxs("div",{className:"text-center min-w-[50px]",children:[y.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:I.date.getFullYear()}),y.jsx("p",{className:"text-sm font-black text-white/80",children:I.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),y.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:I.type==="birthday"?"cake":I.type==="memory"?"history":I.type==="extracted"?"find_in_page":I.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[I.title,"  ",I.contactName||""]}),y.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:I.description})]})]},I.id))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-[480px] bg-[#1a1a1a] border-t sm:border border-white/10 rounded-t-[32px] sm:rounded-[32px] p-8 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:""}),y.jsx("button",{onClick:()=>a(!1),className:"material-symbols-outlined text-white/40",children:"close"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all",placeholder:"...",value:l.title,onChange:I=>u({...l,title:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all color-scheme-dark",value:l.date,onChange:I=>u({...l,date:I.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center ml-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),l.contactIds.length>0&&y.jsxs("span",{className:"text-[10px] font-bold text-primary/60",children:[" ",l.contactIds.length," "]})]}),y.jsxs("div",{className:"relative mb-3",children:[y.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-[18px]",children:"search"}),y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-white text-xs font-medium outline-none focus:ring-1 ring-primary/50 transition-all",placeholder:"...",value:c,onChange:I=>d(I.target.value)}),c&&y.jsx("button",{onClick:()=>d(""),className:"absolute right-3 top-1/2 -translate-y-1/2 size-6 flex items-center justify-center text-white/20 hover:text-white/40",children:y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),y.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar p-1",children:h.length>0?h.map(I=>y.jsx("button",{onClick:()=>{const P=l.contactIds.includes(I.id)?l.contactIds.filter(b=>b!==I.id):[...l.contactIds,I.id];u({...l,contactIds:P})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${l.contactIds.includes(I.id)?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:I.name},I.id)):y.jsx("div",{className:"w-full py-4 text-center text-[10px] text-white/20 italic",children:""})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:async()=>{!l.title||!l.date||(await i(l),a(!1),u({title:"",date:"",contactIds:[]}))},disabled:!l.title||!l.date,className:"flex-1 py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none",children:""})]})]})]})})]})},U6=()=>{var re,H;const n=Lo(),{userProfile:e,updateProfile:r,publishProfile:i,customPrompt:s,currentUser:o,login:a,logout:l,syncToCloud:u,syncFromCloud:c,isSyncing:d,setUnsavedChanges:h}=zo(),[m,_]=de.useState(!1),[w,I]=de.useState(!1),[P,b]=de.useState(!1),[T,A]=de.useState(""),[R,M]=de.useState({name:"",bio:"",avatar:"",themeColor:"",links:[],categories:[]}),U=JSON.stringify(R)!==JSON.stringify({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",themeColor:(e==null?void 0:e.themeColor)||"#2b6cee",links:(e==null?void 0:e.links)||[],categories:(e==null?void 0:e.categories)||["","","","",""]});de.useEffect(()=>(h(m&&U),()=>h(!1)),[m,U,h]),de.useEffect(()=>{const $=ne=>{m&&U&&(ne.preventDefault(),ne.returnValue="")};return window.addEventListener("beforeunload",$),()=>{window.removeEventListener("beforeunload",$)}},[m,U]);const N=()=>{m&&U?window.confirm("")&&(h(!1),n(-1)):n(-1)};de.useEffect(()=>{e&&M({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",themeColor:e.themeColor||"#2b6cee",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const C=[{name:"Nexus Blue",value:"#2b6cee"},{name:"Cyber Purple",value:"#8b5cf6"},{name:"Neon Pink",value:"#ec4899"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Crimson",value:"#ef4444"},{name:"Midnight",value:"#334155"}],D=async()=>{await r(R),h(!1),_(!1)},L=$=>{const ne=$.target.files[0];if(!ne)return;const fe=new FileReader;fe.onloadend=()=>{M(ue=>({...ue,avatar:fe.result}))},fe.readAsDataURL(ne)},V=async()=>{try{await u(),alert("")}catch($){alert(""+$.message)}},B=async()=>{if(window.confirm(""))try{await c(),alert("")}catch($){alert(""+$.message)}},j=async()=>{const $=await s("","...");if($)if(m)R.categories.includes($)||M({...R,categories:[...R.categories,$]});else{const ne=e.categories||["","","","",""];ne.includes($)||await r({...e,categories:[...ne,$]})}},K=async($,ne)=>{const fe=await s("","...",$);if(fe&&fe!==$)if(m){const ue=[...R.categories];ue[ne]=fe,M({...R,categories:ue})}else{const ue=[...e.categories||["","","","",""]];ue[ne]=fe,await r({categories:ue})}},G=async $=>{const ne=m?R.categories[$]:e.categories[$];if(window.confirm(`${ne}`))if(m)M({...R,categories:R.categories.filter((fe,ue)=>ue!==$)});else{const ue=[...e.categories||["","","","",""]].filter((ge,Oe)=>Oe!==$);await r({categories:ue})}},Z=async()=>{if(!o){alert(" Google ");return}b(!0);try{const $=await i(),fe=`${window.location.origin+window.location.pathname.replace(/\/$/,"").replace(/\/settings$/,"")}/p/${$}`;A(fe),I(!0)}catch($){console.error("Publish Error:",$),alert("")}finally{b(!1)}},pe=async $=>{m?M({...R,themeColor:$}):await r({...e,themeColor:$})};return e?y.jsxs("div",{className:"text-white pb-24",children:[y.jsxs("div",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:N,className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"v1.0.1  User Preferences"})]})]}),m?y.jsx("button",{onClick:D,className:"text-xs font-black text-white px-6 py-2.5 rounded-xl bg-primary hover:bg-primary-dark transition-all uppercase tracking-widest shadow-lg shadow-primary/20",children:""}):y.jsx("button",{onClick:()=>_(!0),className:"text-xs font-black text-primary px-5 py-2.5 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary hover:text-white transition-all uppercase tracking-widest shadow-lg shadow-primary/10",children:""})]})]}),y.jsxs("main",{className:"px-6 pt-8 space-y-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:R.avatar?y.jsx("img",{src:R.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):y.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),m&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>document.getElementById("avatar-input").click(),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})}),y.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:L})]})]}),y.jsx("div",{className:"text-center space-y-1 w-full",children:m?y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:R.name,onChange:$=>M({...R,name:$.target.value}),placeholder:""}):y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})}),!m&&y.jsxs("button",{onClick:Z,disabled:P,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:border-primary/50 hover:bg-primary/10 transition-all group",children:[y.jsx("span",{className:`material-symbols-outlined text-sm ${P?"animate-spin":"text-primary"}`,children:P?"sync":"share"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/60 group-hover:text-primary transition-colors",children:""})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),m?y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px]",value:R.bio,onChange:$=>M({...R,bio:$.target.value}),placeholder:"..."}):y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic whitespace-pre-wrap",children:e.bio||""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),m&&y.jsxs("button",{onClick:()=>M({...R,links:[...R.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),y.jsxs("div",{className:"space-y-2",children:[(re=m?R.links:e.links)==null?void 0:re.map(($,ne)=>y.jsx("div",{className:"flex gap-2 items-center",children:m?y.jsxs(y.Fragment,{children:[y.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:$.label,onChange:fe=>{const ue=[...R.links];ue[ne].label=fe.target.value,M({...R,links:ue})}}),y.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:$.url,onChange:fe=>{const ue=[...R.links];ue[ne].url=fe.target.value,M({...R,links:ue})}}),y.jsx("button",{onClick:()=>M({...R,links:R.links.filter((fe,ue)=>ue!==ne)}),className:"text-white/20 hover:text-red-400 p-1",children:y.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):y.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[y.jsx("span",{className:"text-sm font-medium text-white/80",children:$.label}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},ne)),!m&&((H=e.links)==null?void 0:H.length)===0&&y.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!m&&y.jsxs("div",{className:"pt-8 space-y-4",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:o?y.jsxs("div",{className:"divide-y divide-white/5",children:[y.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[y.jsx("img",{src:o.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-bold truncate",children:o.displayName}),y.jsx("p",{className:"text-[10px] text-white/30 truncate",children:o.email})]}),y.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),y.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:V,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_upload"}),d?"...":""]}),y.jsxs("button",{onClick:B,disabled:d,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${d?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):y.jsxs("button",{onClick:a,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[y.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-bold",children:" Google "}),y.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[y.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),y.jsx("span",{className:"text-sm",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),y.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),y.jsx("span",{className:"text-sm",children:""})]})})]}),y.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y.jsxs("button",{onClick:j,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:(m?R.categories:e.categories).map(($,ne)=>y.jsxs("div",{className:"group flex items-center gap-2 pl-3 pr-2 py-1.5 rounded-full text-[11px] font-bold transition-all border border-white/10 bg-white/5 text-white/80 hover:border-primary/30",children:[y.jsx("span",{children:$}),y.jsxs("div",{className:"flex items-center gap-1 border-l border-white/10 ml-1 pl-1",children:[y.jsx("button",{onClick:()=>K($,ne),className:"text-white/20 hover:text-primary transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{onClick:()=>G(ne),className:"text-white/20 hover:text-red-400 transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},ne))}),!(m?R.categories:e.categories).length&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[y.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),y.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),y.jsx("div",{className:"text-center pt-4",children:y.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]}),y.jsxs("div",{className:"space-y-4 pt-8 border-t border-white/5",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 block",children:" ()"}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:y.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-3",children:[C.map($=>y.jsx("button",{onClick:()=>pe($.value),className:`relative aspect-square rounded-xl transition-all duration-300 ${(m?R.themeColor:e.themeColor)===$.value?"scale-110 ring-2 ring-white ring-offset-4 ring-offset-[#030303]":"hover:scale-105 opacity-50"} cursor-pointer`,style:{backgroundColor:$.value},title:$.name,children:(m?R.themeColor:e.themeColor)===$.value&&y.jsx("span",{className:"material-symbols-outlined text-white text-sm absolute inset-0 flex items-center justify-center",children:"check"})},$.value)),y.jsxs("div",{className:"relative aspect-square rounded-xl bg-white/5 border border-dashed border-white/20 flex items-center justify-center group overflow-hidden",children:[y.jsx("input",{type:"color",value:m?R.themeColor:e.themeColor,onChange:$=>pe($.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-white transition-colors",children:"palette"})]})]})})]})]}),w&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-6",children:[y.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>I(!1)}),y.jsx("div",{className:"relative w-full max-w-sm bg-[#1c1f27] border border-white/10 rounded-[32px] p-8 animate-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[y.jsx("div",{className:"size-16 rounded-2xl bg-primary/20 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"qr_code_2"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}),y.jsx("div",{className:"p-5 bg-white rounded-3xl shadow-xl",children:y.jsx(Kv,{value:T,size:200,level:"H",includeMargin:!0,imageSettings:{src:(e==null?void 0:e.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),y.jsxs("div",{className:"w-full space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/5 border border-white/10 rounded-xl",children:[y.jsx("span",{className:"flex-1 text-[10px] text-white/40 truncate",children:T}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(T),alert("")},className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("button",{onClick:()=>I(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all",children:""})]})]})})]})]}):null},$6=()=>{const{uid:n}=KT(),[e,r]=de.useState(null),[i,s]=de.useState(!0),[o,a]=de.useState(null);return de.useEffect(()=>{(async()=>{try{const u=ua(ii,"public_profiles",n),c=await Ty(u);c.exists()?r(c.data()):a("")}catch(u){console.error("Error fetching public profile:",u),a("")}finally{s(!1)}})()},[n]),i?y.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o||!e?y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex flex-col items-center justify-center p-6 text-center",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/10 mb-4",children:"person_off"}),y.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:o||""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}):y.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white selection:bg-primary/30",children:[y.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none opacity-50",children:[y.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/20 blur-[120px] rounded-full"}),y.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 blur-[120px] rounded-full"})]}),y.jsx("div",{className:"absolute top-0 left-0 right-0 h-40 bg-gradient-to-b from-primary/10 to-transparent pointer-events-none"}),y.jsxs("main",{className:"relative z-10 max-w-2xl mx-auto px-6 pt-24 pb-32",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-16 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[y.jsxs("div",{className:"relative mb-8 group",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-700 scale-110"}),e.avatar?y.jsx("img",{src:e.avatar,className:"relative size-32 rounded-full object-cover border-4 border-white/10 shadow-2xl",alt:e.name}):y.jsx("div",{className:"relative size-32 rounded-full bg-gradient-to-br from-white/10 to-white/5 border-4 border-white/10 flex items-center justify-center shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-5xl text-white/20",children:"person"})})]}),y.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4 bg-gradient-to-b from-white to-white/60 bg-clip-text text-transparent",children:e.name}),y.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6"}),y.jsx("p",{className:"text-lg text-white/60 leading-relaxed font-medium max-w-md italic whitespace-pre-wrap",children:e.bio})]}),e.links&&e.links.length>0&&y.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-12 duration-1000 delay-200",children:[y.jsx("h2",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] text-center mb-8",children:""}),e.links.map((l,u)=>y.jsxs("a",{href:l.url.startsWith("http")?l.url:`https://${l.url}`,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-3xl hover:bg-white/10 hover:border-primary/50 transition-all duration-500 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[y.jsx("div",{className:"size-10 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary transition-colors",children:l.label.toLowerCase().includes("ig")||l.label.toLowerCase().includes("instagram")?"camera":l.label.toLowerCase().includes("fb")||l.label.toLowerCase().includes("facebook")?"facebook":"link"})}),y.jsx("span",{className:"font-bold text-lg text-white/80 group-hover:text-white transition-colors",children:l.label})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary group-hover:translate-x-1 transition-all relative z-10",children:"arrow_forward"})]},u))]}),y.jsxs("footer",{className:"mt-24 flex flex-col items-center gap-6 animate-in fade-in duration-1000 delay-500",children:[y.jsx("div",{className:"h-px w-12 bg-white/10 mb-2"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-bold text-white/90 mb-2",children:" Nexus Mind"}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("a",{href:window.location.origin+"/nexus-mind/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl bg-primary/10 border border-primary/20 text-primary hover:bg-primary hover:text-white transition-all duration-300 font-bold text-sm shadow-lg shadow-primary/5",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"explore"}),""]})]}),y.jsxs("div",{className:"mt-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:[y.jsx("span",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Powered by"}),y.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Nexus Mind"})]})]})]})]})};function B6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function q6(n,e,r){return e=J6(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function x1(n,e){return W6(n)||B6(n,e)||uk(n,e)||Y6()}function H6(n){return K6(n)||G6(n)||uk(n)||Q6()}function K6(n){if(Array.isArray(n))return Sy(n)}function W6(n){if(Array.isArray(n))return n}function G6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function uk(n,e){if(n){if(typeof n=="string")return Sy(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sy(n,e)}}function Sy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Q6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X6(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function J6(n){var e=X6(n,"string");return typeof e=="symbol"?e:String(e)}var Z6=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(H6(Object.entries(e).filter(function(s){var o=x1(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=x1(s,2),a=o[0],l=o[1];return q6({},a,l)}))))};function ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function eV(n){if(Array.isArray(n))return n}function tV(n){if(Array.isArray(n))return ky(n)}function nV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rV(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function iV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oV(n,e){return eV(n)||rV(n,e)||ck(n,e)||iV()}function b1(n){return tV(n)||nV(n)||ck(n)||sV()}function ck(n,e){if(n){if(typeof n=="string")return ky(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ky(n,e):void 0}}function aV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(d){return d}:s,a=e.methodNames,l=a===void 0?[]:a,u=e.initPropNames,c=u===void 0?[]:u;return de.forwardRef(function(d,h){var m=de.useRef(),_=de.useMemo(function(){var P=Object.fromEntries(c.filter(function(b){return d.hasOwnProperty(b)}).map(function(b){return[b,d[b]]}));return n(P)},[]);E1(function(){_(o(m.current))},de.useLayoutEffect),E1(function(){return _._destructor instanceof Function?_._destructor:void 0});var w=de.useCallback(function(P){for(var b=arguments.length,T=new Array(b>1?b-1:0),A=1;A<b;A++)T[A-1]=arguments[A];return _[P]instanceof Function?_[P].apply(_,T):void 0},[_]),I=de.useRef({});return Object.keys(Z6(d,[].concat(b1(l),b1(c)))).filter(function(P){return I.current[P]!==d[P]}).forEach(function(P){return w(P,d[P])}),I.current=d,de.useImperativeHandle(h,function(){return Object.fromEntries(l.map(function(P){return[P,function(){for(var b=arguments.length,T=new Array(b),A=0;A<b;A++)T[A]=arguments[A];return w.apply(void 0,[P].concat(T))}]}))},[w]),vt.createElement(i,{ref:m})})}function E1(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:de.useEffect,r=de.useRef(),i=de.useRef(!1),s=de.useRef(!1),o=de.useState(0),a=oV(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(u){return u+1}),function(){s.current&&r.current&&r.current()}},[])}var Cy="http://www.w3.org/1999/xhtml";const T1={svg:"http://www.w3.org/2000/svg",xhtml:Cy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lp(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),T1.hasOwnProperty(e)?{space:T1[e],local:n}:n}function lV(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Cy&&e.documentElement.namespaceURI===Cy?e.createElement(n):e.createElementNS(r,n)}}function uV(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function hk(n){var e=Lp(n);return(e.local?uV:lV)(e)}function cV(){}function B0(n){return n==null?cV:function(){return this.querySelector(n)}}function hV(n){typeof n!="function"&&(n=B0(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),u,c,d=0;d<a;++d)(u=o[d])&&(c=n.call(u,u.__data__,d,o))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new xr(i,this._parents)}function fV(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function dV(){return[]}function fk(n){return n==null?dV:function(){return this.querySelectorAll(n)}}function pV(n){return function(){return fV(n.apply(this,arguments))}}function mV(n){typeof n=="function"?n=pV(n):n=fk(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(i.push(n.call(u,u.__data__,c,a)),s.push(u));return new xr(i,s)}function dk(n){return function(){return this.matches(n)}}function pk(n){return function(e){return e.matches(n)}}var gV=Array.prototype.find;function yV(n){return function(){return gV.call(this.children,n)}}function vV(){return this.firstElementChild}function _V(n){return this.select(n==null?vV:yV(typeof n=="function"?n:pk(n)))}var wV=Array.prototype.filter;function xV(){return Array.from(this.children)}function bV(n){return function(){return wV.call(this.children,n)}}function EV(n){return this.selectAll(n==null?xV:bV(typeof n=="function"?n:pk(n)))}function TV(n){typeof n!="function"&&(n=dk(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new xr(i,this._parents)}function mk(n){return new Array(n.length)}function IV(){return new xr(this._enter||this._groups.map(mk),this._parents)}function Dd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Dd.prototype={constructor:Dd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function SV(n){return function(){return n}}function kV(n,e,r,i,s,o){for(var a=0,l,u=e.length,c=o.length;a<c;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new Dd(n,o[a]);for(;a<u;++a)(l=e[a])&&(s[a]=l)}function CV(n,e,r,i,s,o,a){var l,u,c=new Map,d=e.length,h=o.length,m=new Array(d),_;for(l=0;l<d;++l)(u=e[l])&&(m[l]=_=a.call(u,u.__data__,l,e)+"",c.has(_)?s[l]=u:c.set(_,u));for(l=0;l<h;++l)_=a.call(n,o[l],l,o)+"",(u=c.get(_))?(i[l]=u,u.__data__=o[l],c.delete(_)):r[l]=new Dd(n,o[l]);for(l=0;l<d;++l)(u=e[l])&&c.get(m[l])===u&&(s[l]=u)}function AV(n){return n.__data__}function NV(n,e){if(!arguments.length)return Array.from(this,AV);var r=e?CV:kV,i=this._parents,s=this._groups;typeof n!="function"&&(n=SV(n));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var d=i[c],h=s[c],m=h.length,_=PV(n.call(d,d&&d.__data__,c,i)),w=_.length,I=l[c]=new Array(w),P=a[c]=new Array(w),b=u[c]=new Array(m);r(d,h,I,P,b,_,e);for(var T=0,A=0,R,M;T<w;++T)if(R=I[T]){for(T>=A&&(A=T+1);!(M=P[A])&&++A<w;);R._next=M||null}}return a=new xr(a,i),a._enter=l,a._exit=u,a}function PV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function RV(){return new xr(this._exit||this._groups.map(mk),this._parents)}function OV(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function jV(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=r[u],d=i[u],h=c.length,m=l[u]=new Array(h),_,w=0;w<h;++w)(_=c[w]||d[w])&&(m[w]=_);for(;u<s;++u)l[u]=r[u];return new xr(l,this._parents)}function DV(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function MV(n){n||(n=LV);function e(h,m){return h&&m?n(h.__data__,m.__data__):!h-!m}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d=0;d<l;++d)(c=a[d])&&(u[d]=c);u.sort(e)}return new xr(s,this._parents).order()}function LV(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function VV(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function FV(){return Array.from(this)}function zV(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function UV(){let n=0;for(const e of this)++n;return n}function $V(){return!this.node()}function BV(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function qV(n){return function(){this.removeAttribute(n)}}function HV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function KV(n,e){return function(){this.setAttribute(n,e)}}function WV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function GV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function QV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function YV(n,e){var r=Lp(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?HV:qV:typeof e=="function"?r.local?QV:GV:r.local?WV:KV)(r,e))}function gk(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function XV(n){return function(){this.style.removeProperty(n)}}function JV(n,e,r){return function(){this.style.setProperty(n,e,r)}}function ZV(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function eF(n,e,r){return arguments.length>1?this.each((e==null?XV:typeof e=="function"?ZV:JV)(n,e,r??"")):eu(this.node(),n)}function eu(n,e){return n.style.getPropertyValue(e)||gk(n).getComputedStyle(n,null).getPropertyValue(e)}function tF(n){return function(){delete this[n]}}function nF(n,e){return function(){this[n]=e}}function rF(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function iF(n,e){return arguments.length>1?this.each((e==null?tF:typeof e=="function"?rF:nF)(n,e)):this.node()[n]}function yk(n){return n.trim().split(/^|\s+/)}function q0(n){return n.classList||new vk(n)}function vk(n){this._node=n,this._names=yk(n.getAttribute("class")||"")}vk.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function _k(n,e){for(var r=q0(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function wk(n,e){for(var r=q0(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function sF(n){return function(){_k(this,n)}}function oF(n){return function(){wk(this,n)}}function aF(n,e){return function(){(e.apply(this,arguments)?_k:wk)(this,n)}}function lF(n,e){var r=yk(n+"");if(arguments.length<2){for(var i=q0(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?aF:e?sF:oF)(r,e))}function uF(){this.textContent=""}function cF(n){return function(){this.textContent=n}}function hF(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function fF(n){return arguments.length?this.each(n==null?uF:(typeof n=="function"?hF:cF)(n)):this.node().textContent}function dF(){this.innerHTML=""}function pF(n){return function(){this.innerHTML=n}}function mF(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function gF(n){return arguments.length?this.each(n==null?dF:(typeof n=="function"?mF:pF)(n)):this.node().innerHTML}function yF(){this.nextSibling&&this.parentNode.appendChild(this)}function vF(){return this.each(yF)}function _F(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wF(){return this.each(_F)}function xF(n){var e=typeof n=="function"?n:hk(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bF(){return null}function EF(n,e){var r=typeof n=="function"?n:hk(n),i=e==null?bF:typeof e=="function"?e:B0(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function TF(){var n=this.parentNode;n&&n.removeChild(this)}function IF(){return this.each(TF)}function SF(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function kF(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function CF(n){return this.select(n?kF:SF)}function AF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function NF(n){return function(e){n.call(this,e,this.__data__)}}function PF(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function RF(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function OF(n,e,r){return function(){var i=this.__on,s,o=NF(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function jF(n,e,r){var i=PF(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<o;++s)if((a=i[s]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?OF:RF,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function xk(n,e,r){var i=gk(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function DF(n,e){return function(){return xk(this,n,e)}}function MF(n,e){return function(){return xk(this,n,e.apply(this,arguments))}}function LF(n,e){return this.each((typeof e=="function"?MF:DF)(n,e))}function*VF(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var bk=[null];function xr(n,e){this._groups=n,this._parents=e}function _h(){return new xr([[document.documentElement]],bk)}function FF(){return this}xr.prototype=_h.prototype={constructor:xr,select:hV,selectAll:mV,selectChild:_V,selectChildren:EV,filter:TV,data:NV,enter:IV,exit:RV,join:OV,merge:jV,selection:FF,order:DV,sort:MV,call:VV,nodes:FV,node:zV,size:UV,empty:$V,each:BV,attr:YV,style:eF,property:iF,classed:lF,text:fF,html:gF,raise:vF,lower:wF,append:xF,insert:EF,remove:IF,clone:CF,datum:AF,on:jF,dispatch:LF,[Symbol.iterator]:VF};function Lr(n){return typeof n=="string"?new xr([[document.querySelector(n)]],[document.documentElement]):new xr([[n]],bk)}function zF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Li(n,e){if(n=zF(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var UF={value:()=>{}};function wh(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Lf(r)}function Lf(n){this._=n}function $F(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Lf.prototype=wh.prototype={constructor:Lf,on:function(n,e){var r=this._,i=$F(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=BF(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=I1(r[s],n.name,e);else if(e==null)for(s in r)r[s]=I1(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new Lf(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function BF(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function I1(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=UF,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const qF={passive:!1},Xc={capture:!0,passive:!1};function Km(n){n.stopImmediatePropagation()}function Ll(n){n.preventDefault(),n.stopImmediatePropagation()}function Ek(n){var e=n.document.documentElement,r=Lr(n).on("dragstart.drag",Ll,Xc);"onselectstart"in e?r.on("selectstart.drag",Ll,Xc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Tk(n,e){var r=n.document.documentElement,i=Lr(n).on("dragstart.drag",null);e&&(i.on("click.drag",Ll,Xc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const af=n=>()=>n;function Ay(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Ay.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function HF(n){return!n.ctrlKey&&!n.button}function KF(){return this.parentNode}function WF(n,e){return e??{x:n.x,y:n.y}}function GF(){return navigator.maxTouchPoints||"ontouchstart"in this}function QF(){var n=HF,e=KF,r=WF,i=GF,s={},o=wh("start","drag","end"),a=0,l,u,c,d,h=0;function m(R){R.on("mousedown.drag",_).filter(i).on("touchstart.drag",P).on("touchmove.drag",b,qF).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(R,M){if(!(d||!n.call(this,R,M))){var U=A(this,e.call(this,R,M),R,M,"mouse");U&&(Lr(R.view).on("mousemove.drag",w,Xc).on("mouseup.drag",I,Xc),Ek(R.view),Km(R),c=!1,l=R.clientX,u=R.clientY,U("start",R))}}function w(R){if(Ll(R),!c){var M=R.clientX-l,U=R.clientY-u;c=M*M+U*U>h}s.mouse("drag",R)}function I(R){Lr(R.view).on("mousemove.drag mouseup.drag",null),Tk(R.view,c),Ll(R),s.mouse("end",R)}function P(R,M){if(n.call(this,R,M)){var U=R.changedTouches,N=e.call(this,R,M),C=U.length,D,L;for(D=0;D<C;++D)(L=A(this,N,R,M,U[D].identifier,U[D]))&&(Km(R),L("start",R,U[D]))}}function b(R){var M=R.changedTouches,U=M.length,N,C;for(N=0;N<U;++N)(C=s[M[N].identifier])&&(Ll(R),C("drag",R,M[N]))}function T(R){var M=R.changedTouches,U=M.length,N,C;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),N=0;N<U;++N)(C=s[M[N].identifier])&&(Km(R),C("end",R,M[N]))}function A(R,M,U,N,C,D){var L=o.copy(),V=Li(D||U,M),B,j,K;if((K=r.call(R,new Ay("beforestart",{sourceEvent:U,target:m,identifier:C,active:a,x:V[0],y:V[1],dx:0,dy:0,dispatch:L}),N))!=null)return B=K.x-V[0]||0,j=K.y-V[1]||0,function G(Z,pe,re){var H=V,$;switch(Z){case"start":s[C]=G,$=a++;break;case"end":delete s[C],--a;case"drag":V=Li(re||pe,M),$=a;break}L.call(Z,R,new Ay(Z,{sourceEvent:pe,subject:K,target:m,identifier:C,active:$,x:V[0]+B,y:V[1]+j,dx:V[0]-H[0],dy:V[1]-H[1],dispatch:L}),N)}}return m.filter=function(R){return arguments.length?(n=typeof R=="function"?R:af(!!R),m):n},m.container=function(R){return arguments.length?(e=typeof R=="function"?R:af(R),m):e},m.subject=function(R){return arguments.length?(r=typeof R=="function"?R:af(R),m):r},m.touchable=function(R){return arguments.length?(i=typeof R=="function"?R:af(!!R),m):i},m.on=function(){var R=o.on.apply(o,arguments);return R===o?m:R},m.clickDistance=function(R){return arguments.length?(h=(R=+R)*R,m):Math.sqrt(h)},m}function H0(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function Ik(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function xh(){}var Jc=.7,Md=1/Jc,Vl="\\s*([+-]?\\d+)\\s*",Zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YF=/^#([0-9a-f]{3,8})$/,XF=new RegExp(`^rgb\\(${Vl},${Vl},${Vl}\\)$`),JF=new RegExp(`^rgb\\(${Ki},${Ki},${Ki}\\)$`),ZF=new RegExp(`^rgba\\(${Vl},${Vl},${Vl},${Zc}\\)$`),e9=new RegExp(`^rgba\\(${Ki},${Ki},${Ki},${Zc}\\)$`),t9=new RegExp(`^hsl\\(${Zc},${Ki},${Ki}\\)$`),n9=new RegExp(`^hsla\\(${Zc},${Ki},${Ki},${Zc}\\)$`),S1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};H0(xh,eh,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:k1,formatHex:k1,formatHex8:r9,formatHsl:i9,formatRgb:C1,toString:C1});function k1(){return this.rgb().formatHex()}function r9(){return this.rgb().formatHex8()}function i9(){return Sk(this).formatHsl()}function C1(){return this.rgb().formatRgb()}function eh(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=YF.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?A1(e):r===3?new nr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?lf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?lf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XF.exec(n))?new nr(e[1],e[2],e[3],1):(e=JF.exec(n))?new nr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ZF.exec(n))?lf(e[1],e[2],e[3],e[4]):(e=e9.exec(n))?lf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=t9.exec(n))?R1(e[1],e[2]/100,e[3]/100,1):(e=n9.exec(n))?R1(e[1],e[2]/100,e[3]/100,e[4]):S1.hasOwnProperty(n)?A1(S1[n]):n==="transparent"?new nr(NaN,NaN,NaN,0):null}function A1(n){return new nr(n>>16&255,n>>8&255,n&255,1)}function lf(n,e,r,i){return i<=0&&(n=e=r=NaN),new nr(n,e,r,i)}function s9(n){return n instanceof xh||(n=eh(n)),n?(n=n.rgb(),new nr(n.r,n.g,n.b,n.opacity)):new nr}function Ny(n,e,r,i){return arguments.length===1?s9(n):new nr(n,e,r,i??1)}function nr(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}H0(nr,Ny,Ik(xh,{brighter(n){return n=n==null?Md:Math.pow(Md,n),new nr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Jc:Math.pow(Jc,n),new nr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new nr(Ea(this.r),Ea(this.g),Ea(this.b),Ld(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N1,formatHex:N1,formatHex8:o9,formatRgb:P1,toString:P1}));function N1(){return`#${ya(this.r)}${ya(this.g)}${ya(this.b)}`}function o9(){return`#${ya(this.r)}${ya(this.g)}${ya(this.b)}${ya((isNaN(this.opacity)?1:this.opacity)*255)}`}function P1(){const n=Ld(this.opacity);return`${n===1?"rgb(":"rgba("}${Ea(this.r)}, ${Ea(this.g)}, ${Ea(this.b)}${n===1?")":`, ${n})`}`}function Ld(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ea(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ya(n){return n=Ea(n),(n<16?"0":"")+n.toString(16)}function R1(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new ci(n,e,r,i)}function Sk(n){if(n instanceof ci)return new ci(n.h,n.s,n.l,n.opacity);if(n instanceof xh||(n=eh(n)),!n)return new ci;if(n instanceof ci)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,u=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new ci(a,l,u,n.opacity)}function a9(n,e,r,i){return arguments.length===1?Sk(n):new ci(n,e,r,i??1)}function ci(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}H0(ci,a9,Ik(xh,{brighter(n){return n=n==null?Md:Math.pow(Md,n),new ci(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Jc:Math.pow(Jc,n),new ci(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new nr(Wm(n>=240?n-240:n+120,s,i),Wm(n,s,i),Wm(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new ci(O1(this.h),uf(this.s),uf(this.l),Ld(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Ld(this.opacity);return`${n===1?"hsl(":"hsla("}${O1(this.h)}, ${uf(this.s)*100}%, ${uf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function O1(n){return n=(n||0)%360,n<0?n+360:n}function uf(n){return Math.max(0,Math.min(1,n||0))}function Wm(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const kk=n=>()=>n;function l9(n,e){return function(r){return n+r*e}}function u9(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function c9(n){return(n=+n)==1?Ck:function(e,r){return r-e?u9(e,r,n):kk(isNaN(e)?r:e)}}function Ck(n,e){var r=e-n;return r?l9(n,r):kk(isNaN(n)?e:n)}const j1=function n(e){var r=c9(e);function i(s,o){var a=r((s=Ny(s)).r,(o=Ny(o)).r),l=r(s.g,o.g),u=r(s.b,o.b),c=Ck(s.opacity,o.opacity);return function(d){return s.r=a(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return i.gamma=n,i}(1);function to(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var Py=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gm=new RegExp(Py.source,"g");function h9(n){return function(){return n}}function f9(n){return function(e){return n(e)+""}}function d9(n,e){var r=Py.lastIndex=Gm.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(n=n+"",e=e+"";(i=Py.exec(n))&&(s=Gm.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:to(i,s)})),r=Gm.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?f9(u[0].x):h9(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)l[(h=u[d]).i]=h.x(c);return l.join("")})}var D1=180/Math.PI,Ry={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ak(n,e,r,i,s,o){var a,l,u;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(u=n*r+e*i)&&(r-=n*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),n*i<e*r&&(n=-n,e=-e,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*D1,skewX:Math.atan(u)*D1,scaleX:a,scaleY:l}}var cf;function p9(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Ry:Ak(e.a,e.b,e.c,e.d,e.e,e.f)}function m9(n){return n==null||(cf||(cf=document.createElementNS("http://www.w3.org/2000/svg","g")),cf.setAttribute("transform",n),!(n=cf.transform.baseVal.consolidate()))?Ry:(n=n.matrix,Ak(n.a,n.b,n.c,n.d,n.e,n.f))}function Nk(n,e,r,i){function s(c){return c.length?c.pop()+" ":""}function o(c,d,h,m,_,w){if(c!==h||d!==m){var I=_.push("translate(",null,e,null,r);w.push({i:I-4,x:to(c,h)},{i:I-2,x:to(d,m)})}else(h||m)&&_.push("translate("+h+e+m+r)}function a(c,d,h,m){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),m.push({i:h.push(s(h)+"rotate(",null,i)-2,x:to(c,d)})):d&&h.push(s(h)+"rotate("+d+i)}function l(c,d,h,m){c!==d?m.push({i:h.push(s(h)+"skewX(",null,i)-2,x:to(c,d)}):d&&h.push(s(h)+"skewX("+d+i)}function u(c,d,h,m,_,w){if(c!==h||d!==m){var I=_.push(s(_)+"scale(",null,",",null,")");w.push({i:I-4,x:to(c,h)},{i:I-2,x:to(d,m)})}else(h!==1||m!==1)&&_.push(s(_)+"scale("+h+","+m+")")}return function(c,d){var h=[],m=[];return c=n(c),d=n(d),o(c.translateX,c.translateY,d.translateX,d.translateY,h,m),a(c.rotate,d.rotate,h,m),l(c.skewX,d.skewX,h,m),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,m),c=d=null,function(_){for(var w=-1,I=m.length,P;++w<I;)h[(P=m[w]).i]=P.x(_);return h.join("")}}}var g9=Nk(p9,"px, ","px)","deg)"),y9=Nk(m9,", ",")",")"),v9=1e-12;function M1(n){return((n=Math.exp(n))+1/n)/2}function _9(n){return((n=Math.exp(n))-1/n)/2}function w9(n){return((n=Math.exp(2*n))-1)/(n+1)}const x9=function n(e,r,i){function s(o,a){var l=o[0],u=o[1],c=o[2],d=a[0],h=a[1],m=a[2],_=d-l,w=h-u,I=_*_+w*w,P,b;if(I<v9)b=Math.log(m/c)/e,P=function(N){return[l+N*_,u+N*w,c*Math.exp(e*N*b)]};else{var T=Math.sqrt(I),A=(m*m-c*c+i*I)/(2*c*r*T),R=(m*m-c*c-i*I)/(2*m*r*T),M=Math.log(Math.sqrt(A*A+1)-A),U=Math.log(Math.sqrt(R*R+1)-R);b=(U-M)/e,P=function(N){var C=N*b,D=M1(M),L=c/(r*T)*(D*w9(e*C+M)-_9(M));return[l+L*_,u+L*w,c*D/M1(e*C+M)]}}return P.duration=b*1e3*e/Math.SQRT2,P}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return n(a,l,u)},s}(Math.SQRT2,2,4);var tu=0,tc=0,Fu=0,Pk=1e3,Vd,nc,Fd=0,Ma=0,Vp=0,th=typeof performance=="object"&&performance.now?performance:Date,Rk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function K0(){return Ma||(Rk(b9),Ma=th.now()+Vp)}function b9(){Ma=0}function zd(){this._call=this._time=this._next=null}zd.prototype=W0.prototype={constructor:zd,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?K0():+r)+(e==null?0:+e),!this._next&&nc!==this&&(nc?nc._next=this:Vd=this,nc=this),this._call=n,this._time=r,Oy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oy())}};function W0(n,e,r){var i=new zd;return i.restart(n,e,r),i}function E9(){K0(),++tu;for(var n=Vd,e;n;)(e=Ma-n._time)>=0&&n._call.call(void 0,e),n=n._next;--tu}function L1(){Ma=(Fd=th.now())+Vp,tu=tc=0;try{E9()}finally{tu=0,I9(),Ma=0}}function T9(){var n=th.now(),e=n-Fd;e>Pk&&(Vp-=e,Fd=n)}function I9(){for(var n,e=Vd,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Vd=r);nc=n,Oy(i)}function Oy(n){if(!tu){tc&&(tc=clearTimeout(tc));var e=n-Ma;e>24?(n<1/0&&(tc=setTimeout(L1,n-th.now()-Vp)),Fu&&(Fu=clearInterval(Fu))):(Fu||(Fd=th.now(),Fu=setInterval(T9,Pk)),tu=1,Rk(L1))}}function V1(n,e,r){var i=new zd;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var S9=wh("start","end","cancel","interrupt"),k9=[],Ok=0,F1=1,jy=2,Vf=3,z1=4,Dy=5,Ff=6;function Fp(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;C9(n,r,{name:e,index:i,group:s,on:S9,tween:k9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ok})}function G0(n,e){var r=wi(n,e);if(r.state>Ok)throw new Error("too late; already scheduled");return r}function Ji(n,e){var r=wi(n,e);if(r.state>Vf)throw new Error("too late; already running");return r}function wi(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function C9(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=W0(o,0,r.time);function o(c){r.state=F1,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var d,h,m,_;if(r.state!==F1)return u();for(d in i)if(_=i[d],_.name===r.name){if(_.state===Vf)return V1(a);_.state===z1?(_.state=Ff,_.timer.stop(),_.on.call("interrupt",n,n.__data__,_.index,_.group),delete i[d]):+d<e&&(_.state=Ff,_.timer.stop(),_.on.call("cancel",n,n.__data__,_.index,_.group),delete i[d])}if(V1(function(){r.state===Vf&&(r.state=z1,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=jy,r.on.call("start",n,n.__data__,r.index,r.group),r.state===jy){for(r.state=Vf,s=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(_=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(s[++h]=_);s.length=h+1}}function l(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=Dy,1),h=-1,m=s.length;++h<m;)s[h].call(n,d);r.state===Dy&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=Ff,r.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function zf(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>jy&&i.state<Dy,i.state=Ff,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function A9(n){return this.each(function(){zf(this,n)})}function N9(n,e){var r,i;return function(){var s=Ji(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function P9(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Ji(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function R9(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=wi(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?N9:P9)(r,n,e))}function Q0(n,e,r){var i=n._id;return n.each(function(){var s=Ji(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return wi(s,i).value[e]}}function jk(n,e){var r;return(typeof e=="number"?to:e instanceof eh?j1:(r=eh(e))?(e=r,j1):d9)(n,e)}function O9(n){return function(){this.removeAttribute(n)}}function j9(n){return function(){this.removeAttributeNS(n.space,n.local)}}function D9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function M9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function L9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function V9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function F9(n,e){var r=Lp(n),i=r==="transform"?y9:jk;return this.attrTween(n,typeof e=="function"?(r.local?V9:L9)(r,i,Q0(this,"attr."+n,e)):e==null?(r.local?j9:O9)(r):(r.local?M9:D9)(r,i,e))}function z9(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function U9(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function $9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&U9(n,o)),r}return s._value=e,s}function B9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&z9(n,o)),r}return s._value=e,s}function q9(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Lp(n);return this.tween(r,(i.local?$9:B9)(i,e))}function H9(n,e){return function(){G0(this,n).delay=+e.apply(this,arguments)}}function K9(n,e){return e=+e,function(){G0(this,n).delay=e}}function W9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?H9:K9)(e,n)):wi(this.node(),e).delay}function G9(n,e){return function(){Ji(this,n).duration=+e.apply(this,arguments)}}function Q9(n,e){return e=+e,function(){Ji(this,n).duration=e}}function Y9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?G9:Q9)(e,n)):wi(this.node(),e).duration}function X9(n,e){if(typeof e!="function")throw new Error;return function(){Ji(this,n).ease=e}}function J9(n){var e=this._id;return arguments.length?this.each(X9(e,n)):wi(this.node(),e).ease}function Z9(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ji(this,n).ease=r}}function e8(n){if(typeof n!="function")throw new Error;return this.each(Z9(this._id,n))}function t8(n){typeof n!="function"&&(n=dk(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new Ds(i,this._parents,this._name,this._id)}function n8(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],d=u.length,h=a[l]=new Array(d),m,_=0;_<d;++_)(m=u[_]||c[_])&&(h[_]=m);for(;l<i;++l)a[l]=e[l];return new Ds(a,this._parents,this._name,this._id)}function r8(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function i8(n,e,r){var i,s,o=r8(e)?G0:Ji;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function s8(n,e){var r=this._id;return arguments.length<2?wi(this.node(),r).on.on(n):this.each(i8(r,n,e))}function o8(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function a8(){return this.on("end.remove",o8(this._id))}function l8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=B0(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],u=l.length,c=o[a]=new Array(u),d,h,m=0;m<u;++m)(d=l[m])&&(h=n.call(d,d.__data__,m,l))&&("__data__"in d&&(h.__data__=d.__data__),c[m]=h,Fp(c[m],e,r,m,c,wi(d,r)));return new Ds(o,this._parents,e,r)}function u8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=fk(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var u=i[l],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var m=n.call(d,d.__data__,h,u),_,w=wi(d,r),I=0,P=m.length;I<P;++I)(_=m[I])&&Fp(_,e,r,I,m,w);o.push(m),a.push(d)}return new Ds(o,a,e,r)}var c8=_h.prototype.constructor;function h8(){return new c8(this._groups,this._parents)}function f8(n,e){var r,i,s;return function(){var o=eu(this,n),a=(this.style.removeProperty(n),eu(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function Dk(n){return function(){this.style.removeProperty(n)}}function d8(n,e,r){var i,s=r+"",o;return function(){var a=eu(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function p8(n,e,r){var i,s,o;return function(){var a=eu(this,n),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(n),eu(this,n))),a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l))}}function m8(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var u=Ji(this,n),c=u.on,d=u.value[o]==null?l||(l=Dk(e)):void 0;(c!==r||s!==d)&&(i=(r=c).copy()).on(a,s=d),u.on=i}}function g8(n,e,r){var i=(n+="")=="transform"?g9:jk;return e==null?this.styleTween(n,f8(n,i)).on("end.style."+n,Dk(n)):typeof e=="function"?this.styleTween(n,p8(n,i,Q0(this,"style."+n,e))).each(m8(this._id,n)):this.styleTween(n,d8(n,i,e),r).on("end.style."+n,null)}function y8(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function v8(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&y8(n,a,r)),i}return o._value=e,o}function _8(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,v8(n,e,r??""))}function w8(n){return function(){this.textContent=n}}function x8(n){return function(){var e=n(this);this.textContent=e??""}}function b8(n){return this.tween("text",typeof n=="function"?x8(Q0(this,"text",n)):w8(n==null?"":n+""))}function E8(n){return function(e){this.textContent=n.call(this,e)}}function T8(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&E8(s)),e}return i._value=n,i}function I8(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,T8(n))}function S8(){for(var n=this._name,e=this._id,r=Mk(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var d=wi(u,e);Fp(u,n,r,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ds(i,this._parents,n,r)}function k8(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};r.each(function(){var c=Ji(this,i),d=c.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&o()})}var C8=0;function Ds(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function Mk(){return++C8}var cs=_h.prototype;Ds.prototype={constructor:Ds,select:l8,selectAll:u8,selectChild:cs.selectChild,selectChildren:cs.selectChildren,filter:t8,merge:n8,selection:h8,transition:S8,call:cs.call,nodes:cs.nodes,node:cs.node,size:cs.size,empty:cs.empty,each:cs.each,on:s8,attr:F9,attrTween:q9,style:g8,styleTween:_8,text:b8,textTween:I8,remove:a8,tween:R9,delay:W9,duration:Y9,ease:J9,easeVarying:e8,end:k8,[Symbol.iterator]:cs[Symbol.iterator]};function A8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var N8={time:null,delay:0,duration:250,ease:A8};function P8(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function R8(n){var e,r;n instanceof Ds?(e=n._id,n=n._name):(e=Mk(),(r=N8).time=K0(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&Fp(u,n,e,c,a,r||P8(u,e));return new Ds(i,this._parents,n,e)}_h.prototype.interrupt=A9;_h.prototype.transition=R8;const hf=n=>()=>n;function O8(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function bs(n,e,r){this.k=n,this.x=e,this.y=r}bs.prototype={constructor:bs,scale:function(n){return n===1?this:new bs(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new bs(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Y0=new bs(1,0,0);Di.prototype=bs.prototype;function Di(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Y0;return n.__zoom}function Qm(n){n.stopImmediatePropagation()}function zu(n){n.preventDefault(),n.stopImmediatePropagation()}function j8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function D8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function U1(){return this.__zoom||Y0}function M8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function L8(){return navigator.maxTouchPoints||"ontouchstart"in this}function V8(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function F8(){var n=j8,e=D8,r=V8,i=M8,s=L8,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=x9,c=wh("start","zoom","end"),d,h,m,_=500,w=150,I=0,P=10;function b(K){K.property("__zoom",U1).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",L).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(K,G,Z,pe){var re=K.selection?K.selection():K;re.property("__zoom",U1),K!==re?M(K,G,Z,pe):re.interrupt().each(function(){U(this,arguments).event(pe).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},b.scaleBy=function(K,G,Z,pe){b.scaleTo(K,function(){var re=this.__zoom.k,H=typeof G=="function"?G.apply(this,arguments):G;return re*H},Z,pe)},b.scaleTo=function(K,G,Z,pe){b.transform(K,function(){var re=e.apply(this,arguments),H=this.__zoom,$=Z==null?R(re):typeof Z=="function"?Z.apply(this,arguments):Z,ne=H.invert($),fe=typeof G=="function"?G.apply(this,arguments):G;return r(A(T(H,fe),$,ne),re,a)},Z,pe)},b.translateBy=function(K,G,Z,pe){b.transform(K,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),a)},null,pe)},b.translateTo=function(K,G,Z,pe,re){b.transform(K,function(){var H=e.apply(this,arguments),$=this.__zoom,ne=pe==null?R(H):typeof pe=="function"?pe.apply(this,arguments):pe;return r(Y0.translate(ne[0],ne[1]).scale($.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof Z=="function"?-Z.apply(this,arguments):-Z),H,a)},pe,re)};function T(K,G){return G=Math.max(o[0],Math.min(o[1],G)),G===K.k?K:new bs(G,K.x,K.y)}function A(K,G,Z){var pe=G[0]-Z[0]*K.k,re=G[1]-Z[1]*K.k;return pe===K.x&&re===K.y?K:new bs(K.k,pe,re)}function R(K){return[(+K[0][0]+ +K[1][0])/2,(+K[0][1]+ +K[1][1])/2]}function M(K,G,Z,pe){K.on("start.zoom",function(){U(this,arguments).event(pe).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(pe).end()}).tween("zoom",function(){var re=this,H=arguments,$=U(re,H).event(pe),ne=e.apply(re,H),fe=Z==null?R(ne):typeof Z=="function"?Z.apply(re,H):Z,ue=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),ge=re.__zoom,Oe=typeof G=="function"?G.apply(re,H):G,Le=u(ge.invert(fe).concat(ue/ge.k),Oe.invert(fe).concat(ue/Oe.k));return function(De){if(De===1)De=Oe;else{var He=Le(De),Re=ue/He[2];De=new bs(Re,fe[0]-He[0]*Re,fe[1]-He[1]*Re)}$.zoom(null,De)}})}function U(K,G,Z){return!Z&&K.__zooming||new N(K,G)}function N(K,G){this.that=K,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(K,G),this.taps=0}N.prototype={event:function(K){return K&&(this.sourceEvent=K),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(K,G){return this.mouse&&K!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&K!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&K!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(K){var G=Lr(this.that).datum();c.call(K,this.that,new O8(K,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:c}),G)}};function C(K,...G){if(!n.apply(this,arguments))return;var Z=U(this,G).event(K),pe=this.__zoom,re=Math.max(o[0],Math.min(o[1],pe.k*Math.pow(2,i.apply(this,arguments)))),H=Li(K);if(Z.wheel)(Z.mouse[0][0]!==H[0]||Z.mouse[0][1]!==H[1])&&(Z.mouse[1]=pe.invert(Z.mouse[0]=H)),clearTimeout(Z.wheel);else{if(pe.k===re)return;Z.mouse=[H,pe.invert(H)],zf(this),Z.start()}zu(K),Z.wheel=setTimeout($,w),Z.zoom("mouse",r(A(T(pe,re),Z.mouse[0],Z.mouse[1]),Z.extent,a));function $(){Z.wheel=null,Z.end()}}function D(K,...G){if(m||!n.apply(this,arguments))return;var Z=K.currentTarget,pe=U(this,G,!0).event(K),re=Lr(K.view).on("mousemove.zoom",fe,!0).on("mouseup.zoom",ue,!0),H=Li(K,Z),$=K.clientX,ne=K.clientY;Ek(K.view),Qm(K),pe.mouse=[H,this.__zoom.invert(H)],zf(this),pe.start();function fe(ge){if(zu(ge),!pe.moved){var Oe=ge.clientX-$,Le=ge.clientY-ne;pe.moved=Oe*Oe+Le*Le>I}pe.event(ge).zoom("mouse",r(A(pe.that.__zoom,pe.mouse[0]=Li(ge,Z),pe.mouse[1]),pe.extent,a))}function ue(ge){re.on("mousemove.zoom mouseup.zoom",null),Tk(ge.view,pe.moved),zu(ge),pe.event(ge).end()}}function L(K,...G){if(n.apply(this,arguments)){var Z=this.__zoom,pe=Li(K.changedTouches?K.changedTouches[0]:K,this),re=Z.invert(pe),H=Z.k*(K.shiftKey?.5:2),$=r(A(T(Z,H),pe,re),e.apply(this,G),a);zu(K),l>0?Lr(this).transition().duration(l).call(M,$,pe,K):Lr(this).call(b.transform,$,pe,K)}}function V(K,...G){if(n.apply(this,arguments)){var Z=K.touches,pe=Z.length,re=U(this,G,K.changedTouches.length===pe).event(K),H,$,ne,fe;for(Qm(K),$=0;$<pe;++$)ne=Z[$],fe=Li(ne,this),fe=[fe,this.__zoom.invert(fe),ne.identifier],re.touch0?!re.touch1&&re.touch0[2]!==fe[2]&&(re.touch1=fe,re.taps=0):(re.touch0=fe,H=!0,re.taps=1+!!d);d&&(d=clearTimeout(d)),H&&(re.taps<2&&(h=fe[0],d=setTimeout(function(){d=null},_)),zf(this),re.start())}}function B(K,...G){if(this.__zooming){var Z=U(this,G).event(K),pe=K.changedTouches,re=pe.length,H,$,ne,fe;for(zu(K),H=0;H<re;++H)$=pe[H],ne=Li($,this),Z.touch0&&Z.touch0[2]===$.identifier?Z.touch0[0]=ne:Z.touch1&&Z.touch1[2]===$.identifier&&(Z.touch1[0]=ne);if($=Z.that.__zoom,Z.touch1){var ue=Z.touch0[0],ge=Z.touch0[1],Oe=Z.touch1[0],Le=Z.touch1[1],De=(De=Oe[0]-ue[0])*De+(De=Oe[1]-ue[1])*De,He=(He=Le[0]-ge[0])*He+(He=Le[1]-ge[1])*He;$=T($,Math.sqrt(De/He)),ne=[(ue[0]+Oe[0])/2,(ue[1]+Oe[1])/2],fe=[(ge[0]+Le[0])/2,(ge[1]+Le[1])/2]}else if(Z.touch0)ne=Z.touch0[0],fe=Z.touch0[1];else return;Z.zoom("touch",r(A($,ne,fe),Z.extent,a))}}function j(K,...G){if(this.__zooming){var Z=U(this,G).event(K),pe=K.changedTouches,re=pe.length,H,$;for(Qm(K),m&&clearTimeout(m),m=setTimeout(function(){m=null},_),H=0;H<re;++H)$=pe[H],Z.touch0&&Z.touch0[2]===$.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===$.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&($=Li($,this),Math.hypot(h[0]-$[0],h[1]-$[1])<P)){var ne=Lr(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return b.wheelDelta=function(K){return arguments.length?(i=typeof K=="function"?K:hf(+K),b):i},b.filter=function(K){return arguments.length?(n=typeof K=="function"?K:hf(!!K),b):n},b.touchable=function(K){return arguments.length?(s=typeof K=="function"?K:hf(!!K),b):s},b.extent=function(K){return arguments.length?(e=typeof K=="function"?K:hf([[+K[0][0],+K[0][1]],[+K[1][0],+K[1][1]]]),b):e},b.scaleExtent=function(K){return arguments.length?(o[0]=+K[0],o[1]=+K[1],b):[o[0],o[1]]},b.translateExtent=function(K){return arguments.length?(a[0][0]=+K[0][0],a[1][0]=+K[1][0],a[0][1]=+K[0][1],a[1][1]=+K[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(K){return arguments.length?(r=K,b):r},b.duration=function(K){return arguments.length?(l=+K,b):l},b.interpolate=function(K){return arguments.length?(u=K,b):u},b.on=function(){var K=c.on.apply(c,arguments);return K===c?b:K},b.clickDistance=function(K){return arguments.length?(I=(K=+K)*K,b):Math.sqrt(I)},b.tapDistance=function(K){return arguments.length?(P=+K,b):P},b}class $1 extends Map{constructor(e,r=$8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(B1(this,e))}has(e){return super.has(B1(this,e))}set(e,r){return super.set(z8(this,e),r)}delete(e){return super.delete(U8(this,e))}}function B1({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function z8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function U8({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function $8(n){return n!==null&&typeof n=="object"?n.valueOf():n}function q1(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function H1(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function B8(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var q8=typeof global=="object"&&global&&global.Object===Object&&global,H8=typeof self=="object"&&self&&self.Object===Object&&self,Lk=q8||H8||Function("return this")(),Ud=Lk.Symbol,Vk=Object.prototype,K8=Vk.hasOwnProperty,W8=Vk.toString,Uu=Ud?Ud.toStringTag:void 0;function G8(n){var e=K8.call(n,Uu),r=n[Uu];try{n[Uu]=void 0;var i=!0}catch{}var s=W8.call(n);return i&&(e?n[Uu]=r:delete n[Uu]),s}var Q8=Object.prototype,Y8=Q8.toString;function X8(n){return Y8.call(n)}var J8="[object Null]",Z8="[object Undefined]",K1=Ud?Ud.toStringTag:void 0;function ez(n){return n==null?n===void 0?Z8:J8:K1&&K1 in Object(n)?G8(n):X8(n)}function tz(n){return n!=null&&typeof n=="object"}var nz="[object Symbol]";function rz(n){return typeof n=="symbol"||tz(n)&&ez(n)==nz}var iz=/\s/;function sz(n){for(var e=n.length;e--&&iz.test(n.charAt(e)););return e}var oz=/^\s+/;function az(n){return n&&n.slice(0,sz(n)+1).replace(oz,"")}function $d(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var W1=NaN,lz=/^[-+]0x[0-9a-f]+$/i,uz=/^0b[01]+$/i,cz=/^0o[0-7]+$/i,hz=parseInt;function G1(n){if(typeof n=="number")return n;if(rz(n))return W1;if($d(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=$d(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=az(n);var r=uz.test(n);return r||cz.test(n)?hz(n.slice(2),r?2:8):lz.test(n)?W1:+n}var Ym=function(){return Lk.Date.now()},fz="Expected a function",dz=Math.max,pz=Math.min;function Fk(n,e,r){var i,s,o,a,l,u,c=0,d=!1,h=!1,m=!0;if(typeof n!="function")throw new TypeError(fz);e=G1(e)||0,$d(r)&&(d=!!r.leading,h="maxWait"in r,o=h?dz(G1(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function _(U){var N=i,C=s;return i=s=void 0,c=U,a=n.apply(C,N),a}function w(U){return c=U,l=setTimeout(b,e),d?_(U):a}function I(U){var N=U-u,C=U-c,D=e-N;return h?pz(D,o-C):D}function P(U){var N=U-u,C=U-c;return u===void 0||N>=e||N<0||h&&C>=o}function b(){var U=Ym();if(P(U))return T(U);l=setTimeout(b,I(U))}function T(U){return l=void 0,m&&i?_(U):(i=s=void 0,a)}function A(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function R(){return l===void 0?a:T(Ym())}function M(){var U=Ym(),N=P(U);if(i=arguments,s=this,u=U,N){if(l===void 0)return w(u);if(h)return clearTimeout(l),l=setTimeout(b,e),_(u)}return l===void 0&&(l=setTimeout(b,e)),a}return M.cancel=A,M.flush=R,M}var mz="Expected a function";function gz(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(mz);return $d(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),Fk(n,e,{leading:i,maxWait:e,trailing:s})}var Ta=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Ta.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Ta.Bounce.In(n*2)*.5:Ta.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),rc=function(){return performance.now()},zk=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=rc()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),My={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=My.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},Uk=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),Ly=new zk,Q1=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ta.Linear.None,this._interpolationFunction=My.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Uk.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Ly,Ly.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=rc()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],u=Array.isArray(l),c=u?"array":typeof l,d=!u&&Array.isArray(i[a]);if(!(c==="undefined"||c==="function")){if(d){var h=i[a];if(h.length===0)continue;for(var m=[l],_=0,w=h.length;_<w;_+=1){var I=this._handleRelativeValue(l,h[_]);if(isNaN(I)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(I)}d&&(i[a]=m)}if((c==="object"||u)&&l&&!d){r[a]=u?[]:{};var P=l;for(var b in P)r[a][b]=P[b];s[a]=u?[]:{};var h=i[a];if(!this._isDynamic){var T={};for(var b in h)T[b]=h[b];i[a]=h=T}this._setupProperties(P,r[a],h,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),u||(r[a]*=1),d?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=rc()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=rc()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Ta.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=My.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=rc()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(i._duration===0||a>u)return 1;var I=Math.trunc(a/l),P=a-I*l,b=Math.min(P/i._duration,1);return b===0&&a===i._duration?1:b},d=c(),h=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var _=0,w=this._chainedTweens.length;_<w;_++)this._chainedTweens[_].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],u=Array.isArray(e[o]),c=Array.isArray(l),d=!u&&c;d?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();Uk.nextId;var Xi=Ly;Xi.getAll.bind(Xi);Xi.removeAll.bind(Xi);Xi.add.bind(Xi);Xi.remove.bind(Xi);Xi.update.bind(Xi);function Y1(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yz(n){if(Array.isArray(n))return n}function vz(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _z(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function wz(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function xz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bz(n,e){return yz(n)||wz(n,e)||Ez(n,e)||xz()}function Ez(n,e){if(n){if(typeof n=="string")return Y1(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y1(n,e):void 0}}var Tz=_z(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,u=l===void 0?function(c,d){}:l;vz(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=u});function X0(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,u=l===void 0?{}:l,c=n.init,d=c===void 0?function(){}:c,h=n.update,m=h===void 0?function(){}:h,_=Object.keys(s).map(function(w){return new Tz(w,s[w])});return function w(){for(var I=arguments.length,P=new Array(I),b=0;b<I;b++)P[b]=arguments[b];var T=!!(this instanceof w&&this.constructor),A=T?P.shift():void 0,R=P[0],M=R===void 0?{}:R,U=Object.assign({},r instanceof Function?r(M):r,{initialised:!1}),N={};function C(V){return D(V,M),L(),C}var D=function(B,j){d.call(C,B,U,j),U.initialised=!0},L=Fk(function(){U.initialised&&(m.call(C,U,N),N={})},1);return _.forEach(function(V){C[V.name]=B(V);function B(j){var K=j.name,G=j.triggerUpdate,Z=G===void 0?!1:G,pe=j.onChange,re=pe===void 0?function(ne,fe){}:pe,H=j.defaultVal,$=H===void 0?null:H;return function(ne){var fe=U[K];if(!arguments.length)return fe;var ue=ne===void 0?$:ne;return U[K]=ue,re.call(C,ue,U,fe),!N.hasOwnProperty(K)&&(N[K]=fe),Z&&L(),C}}}),Object.keys(a).forEach(function(V){C[V]=function(){for(var B,j=arguments.length,K=new Array(j),G=0;G<j;G++)K[G]=arguments[G];return(B=a[V]).call.apply(B,[C,U].concat(K))}}),Object.entries(u).forEach(function(V){var B=bz(V,2),j=B[0],K=B[1];return C[j]=C[K]}),C.resetProps=function(){return _.forEach(function(V){C[V.name](V.defaultVal)}),C},C.resetProps(),U._rerender=L,T&&A&&C(A),C}}var pt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function Bd(n){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(n)}var Iz=/^\s+/,Sz=/\s+$/;function Ue(n,e){if(n=n||"",e=e||{},n instanceof Ue)return n;if(!(this instanceof Ue))return new Ue(n,e);var r=kz(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ue.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=$k(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=J1(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=J1(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=X1(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=X1(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return Z1(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Pz(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Nt(this._r,255)*100)+"%",g:Math.round(Nt(this._g,255)*100)+"%",b:Math.round(Nt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Nt(this._r,255)*100)+"%, "+Math.round(Nt(this._g,255)*100)+"%, "+Math.round(Nt(this._b,255)*100)+"%)":"rgba("+Math.round(Nt(this._r,255)*100)+"%, "+Math.round(Nt(this._g,255)*100)+"%, "+Math.round(Nt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Bz[Z1(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+eb(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=Ue(e);i="#"+eb(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Ue(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Dz,arguments)},brighten:function(){return this._applyModification(Mz,arguments)},darken:function(){return this._applyModification(Lz,arguments)},desaturate:function(){return this._applyModification(Rz,arguments)},saturate:function(){return this._applyModification(Oz,arguments)},greyscale:function(){return this._applyModification(jz,arguments)},spin:function(){return this._applyModification(Vz,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Uz,arguments)},complement:function(){return this._applyCombination(Fz,arguments)},monochromatic:function(){return this._applyCombination($z,arguments)},splitcomplement:function(){return this._applyCombination(zz,arguments)},triad:function(){return this._applyCombination(tb,[3])},tetrad:function(){return this._applyCombination(tb,[4])}};Ue.fromRatio=function(n,e){if(Bd(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=ic(n[i]));n=r}return Ue(n,e)};function kz(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=Wz(n)),Bd(n)=="object"&&(hs(n.r)&&hs(n.g)&&hs(n.b)?(e=Cz(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):hs(n.h)&&hs(n.s)&&hs(n.v)?(i=ic(n.s),s=ic(n.v),e=Nz(n.h,i,s),a=!0,l="hsv"):hs(n.h)&&hs(n.s)&&hs(n.l)&&(i=ic(n.s),o=ic(n.l),e=Az(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=$k(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function Cz(n,e,r){return{r:Nt(n,255)*255,g:Nt(e,255)*255,b:Nt(r,255)*255}}function X1(n,e,r){n=Nt(n,255),e=Nt(e,255),r=Nt(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,l}}function Az(n,e,r){var i,s,o;n=Nt(n,360),e=Nt(e,100),r=Nt(r,100);function a(c,d,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(d-c)*6*h:h<1/2?d:h<2/3?c+(d-c)*(2/3-h)*6:c}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;i=a(u,l,n+1/3),s=a(u,l,n),o=a(u,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function J1(n,e,r){n=Nt(n,255),e=Nt(e,255),r=Nt(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,u=i-s;if(a=i===0?0:u/i,i==s)o=0;else{switch(i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,v:l}}function Nz(n,e,r){n=Nt(n,360)*6,e=Nt(e,100),r=Nt(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),u=i%6,c=[r,a,o,o,l,r][u],d=[l,r,r,a,o,o][u],h=[o,o,l,r,r,a][u];return{r:c*255,g:d*255,b:h*255}}function Z1(n,e,r,i){var s=[fi(Math.round(n).toString(16)),fi(Math.round(e).toString(16)),fi(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Pz(n,e,r,i,s){var o=[fi(Math.round(n).toString(16)),fi(Math.round(e).toString(16)),fi(Math.round(r).toString(16)),fi(Bk(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function eb(n,e,r,i){var s=[fi(Bk(i)),fi(Math.round(n).toString(16)),fi(Math.round(e).toString(16)),fi(Math.round(r).toString(16))];return s.join("")}Ue.equals=function(n,e){return!n||!e?!1:Ue(n).toRgbString()==Ue(e).toRgbString()};Ue.random=function(){return Ue.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Rz(n,e){e=e===0?0:e||10;var r=Ue(n).toHsl();return r.s-=e/100,r.s=zp(r.s),Ue(r)}function Oz(n,e){e=e===0?0:e||10;var r=Ue(n).toHsl();return r.s+=e/100,r.s=zp(r.s),Ue(r)}function jz(n){return Ue(n).desaturate(100)}function Dz(n,e){e=e===0?0:e||10;var r=Ue(n).toHsl();return r.l+=e/100,r.l=zp(r.l),Ue(r)}function Mz(n,e){e=e===0?0:e||10;var r=Ue(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Ue(r)}function Lz(n,e){e=e===0?0:e||10;var r=Ue(n).toHsl();return r.l-=e/100,r.l=zp(r.l),Ue(r)}function Vz(n,e){var r=Ue(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Ue(r)}function Fz(n){var e=Ue(n).toHsl();return e.h=(e.h+180)%360,Ue(e)}function tb(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ue(n).toHsl(),i=[Ue(n)],s=360/e,o=1;o<e;o++)i.push(Ue({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function zz(n){var e=Ue(n).toHsl(),r=e.h;return[Ue(n),Ue({h:(r+72)%360,s:e.s,l:e.l}),Ue({h:(r+216)%360,s:e.s,l:e.l})]}function Uz(n,e,r){e=e||6,r=r||30;var i=Ue(n).toHsl(),s=360/r,o=[Ue(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(Ue(i));return o}function $z(n,e){e=e||6;for(var r=Ue(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(Ue({h:i,s,v:o})),o=(o+l)%1;return a}Ue.mix=function(n,e,r){r=r===0?0:r||50;var i=Ue(n).toRgb(),s=Ue(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return Ue(a)};Ue.readability=function(n,e){var r=Ue(n),i=Ue(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Ue.isReadable=function(n,e,r){var i=Ue.readability(n,e),s,o;switch(o=!1,s=Gz(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};Ue.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,u;r=r||{},a=r.includeFallbackColors,l=r.level,u=r.size;for(var c=0;c<e.length;c++)o=Ue.readability(n,e[c]),o>s&&(s=o,i=Ue(e[c]));return Ue.isReadable(n,i,{level:l,size:u})||!a?i:(r.includeFallbackColors=!1,Ue.mostReadable(n,["#fff","#000"],r))};var Vy=Ue.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Bz=Ue.hexNames=qz(Vy);function qz(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function $k(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Nt(n,e){Hz(n)&&(n="100%");var r=Kz(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function zp(n){return Math.min(1,Math.max(0,n))}function pr(n){return parseInt(n,16)}function Hz(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function Kz(n){return typeof n=="string"&&n.indexOf("%")!=-1}function fi(n){return n.length==1?"0"+n:""+n}function ic(n){return n<=1&&(n=n*100+"%"),n}function Bk(n){return Math.round(parseFloat(n)*255).toString(16)}function nb(n){return pr(n)/255}var si=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function hs(n){return!!si.CSS_UNIT.exec(n)}function Wz(n){n=n.replace(Iz,"").replace(Sz,"").toLowerCase();var e=!1;if(Vy[n])n=Vy[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=si.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=si.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=si.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=si.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=si.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=si.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=si.hex8.exec(n))?{r:pr(r[1]),g:pr(r[2]),b:pr(r[3]),a:nb(r[4]),format:e?"name":"hex8"}:(r=si.hex6.exec(n))?{r:pr(r[1]),g:pr(r[2]),b:pr(r[3]),format:e?"name":"hex"}:(r=si.hex4.exec(n))?{r:pr(r[1]+""+r[1]),g:pr(r[2]+""+r[2]),b:pr(r[3]+""+r[3]),a:nb(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=si.hex3.exec(n))?{r:pr(r[1]+""+r[1]),g:pr(r[2]+""+r[2]),b:pr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function Gz(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function Fy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Qz(n){if(Array.isArray(n))return Fy(n)}function qk(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function Yz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xz(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Rr(n,e){return n.get(qk(n,e))}function rb(n,e,r){Yz(n,e),e.set(n,r)}function ib(n,e,r){return n.set(qk(n,e),r),r}function Jz(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,iU(i.key),i)}}function Zz(n,e,r){return e&&Jz(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function eU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function tU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nU(n){return Qz(n)||eU(n)||sU(n)||tU()}function rU(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function iU(n){var e=rU(n,"string");return typeof e=="symbol"?e:e+""}function sU(n,e){if(n){if(typeof n=="string")return Fy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fy(n,e):void 0}}var oU=123,aU=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},Hk=function(e,r,i){return(e<<16)+(r<<8)+i},lU=function(e){var r=Ue(e).toRgb(),i=r.r,s=r.g,o=r.b;return Hk(i,s,o)},sb=function(e,r){return e*oU%Math.pow(2,r)},sa=new WeakMap,fs=new WeakMap,uU=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Xz(this,n),rb(this,sa,void 0),rb(this,fs,void 0),ib(fs,this,e),this.reset()}return Zz(n,[{key:"reset",value:function(){ib(sa,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Rr(sa,this).length>=Math.pow(2,24-Rr(fs,this)))return null;var i=Rr(sa,this).length,s=sb(i,Rr(fs,this)),o=aU(i+(s<<24-Rr(fs,this)));return Rr(sa,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?lU(r):Hk.apply(void 0,nU(r));if(!i)return null;var s=i&Math.pow(2,24-Rr(fs,this))-1,o=i>>24-Rr(fs,this)&Math.pow(2,Rr(fs,this))-1;return sb(s,Rr(fs,this))!==o||s>=Rr(sa,this).length?null:Rr(sa,this)[s]}}])}(),bh,Rt,Kk,Wk,ca,ob,Gk,Qk,Yk,J0,zy,Uy,nh={},Xk=[],cU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Up=Array.isArray;function Fi(n,e){for(var r in e)n[r]=e[r];return n}function Z0(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function hU(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?bh.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return wc(n,a,i,s,null)}function wc(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Kk,__i:-1,__u:0};return s==null&&Rt.vnode!=null&&Rt.vnode(o),o}function $p(n){return n.children}function Uf(n,e){this.props=n,this.context=e}function nu(n,e){if(e==null)return n.__?nu(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?nu(n):null}function Jk(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Jk(n)}}function ab(n){(!n.__d&&(n.__d=!0)&&ca.push(n)&&!qd.__r++||ob!=Rt.debounceRendering)&&((ob=Rt.debounceRendering)||Gk)(qd)}function qd(){for(var n,e,r,i,s,o,a,l=1;ca.length;)ca.length>l&&ca.sort(Qk),n=ca.shift(),l=ca.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=Fi({},i)).__v=i.__v+1,Rt.vnode&&Rt.vnode(r),e_(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??nu(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,tC(o,r,a),i.__e=i.__=null,r.__e!=s&&Jk(r)));qd.__r=0}function Zk(n,e,r,i,s,o,a,l,u,c,d){var h,m,_,w,I,P,b,T=i&&i.__k||Xk,A=e.length;for(u=fU(r,e,T,u,A),h=0;h<A;h++)(_=r.__k[h])!=null&&(m=_.__i==-1?nh:T[_.__i]||nh,_.__i=h,P=e_(n,_,m,s,o,a,l,u,c,d),w=_.__e,_.ref&&m.ref!=_.ref&&(m.ref&&t_(m.ref,null,_),d.push(_.ref,_.__c||w,_)),I==null&&w!=null&&(I=w),(b=!!(4&_.__u))||m.__k===_.__k?u=eC(_,u,n,b):typeof _.type=="function"&&P!==void 0?u=P:w&&(u=w.nextSibling),_.__u&=-7);return r.__e=I,u}function fU(n,e,r,i,s){var o,a,l,u,c,d=r.length,h=d,m=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=wc(null,a,null,null,null):Up(a)?a=n.__k[o]=wc($p,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=wc(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,u=o+m,a.__=n,a.__b=n.__b+1,l=null,(c=a.__i=dU(a,r,u,h))!=-1&&(h--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>d?m--:s<d&&m++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,a.__u|=4))):n.__k[o]=null;if(h)for(o=0;o<d;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=nu(l)),rC(l,l));return i}function eC(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=eC(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=nu(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function dU(n,e,r,i){var s,o,a,l=n.key,u=n.type,c=e[r],d=c!=null&&(2&c.__u)==0;if(c===null&&l==null||d&&l==c.key&&u==c.type)return r;if(i>(d?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((c=e[a=s>=0?s--:o++])!=null&&!(2&c.__u)&&l==c.key&&u==c.type)return a}return-1}function lb(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||cU.test(e)?r:r+"px"}function ff(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||lb(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||lb(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Yk,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=J0,n.addEventListener(e,o?Uy:zy,o)):n.removeEventListener(e,o?Uy:zy,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function ub(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=J0++;else if(e.t<r.u)return;return r(Rt.event?Rt.event(e):e)}}}function e_(n,e,r,i,s,o,a,l,u,c){var d,h,m,_,w,I,P,b,T,A,R,M,U,N,C,D,L,V=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(d=Rt.__b)&&d(e);e:if(typeof V=="function")try{if(b=e.props,T="prototype"in V&&V.prototype.render,A=(d=V.contextType)&&i[d.__c],R=d?A?A.props.value:d.__:i,r.__c?P=(h=e.__c=r.__c).__=h.__E:(T?e.__c=h=new V(b,R):(e.__c=h=new Uf(b,R),h.constructor=V,h.render=mU),A&&A.sub(h),h.state||(h.state={}),h.__n=i,m=h.__d=!0,h.__h=[],h._sb=[]),T&&h.__s==null&&(h.__s=h.state),T&&V.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Fi({},h.__s)),Fi(h.__s,V.getDerivedStateFromProps(b,h.__s))),_=h.props,w=h.state,h.__v=e,m)T&&V.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),T&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(T&&V.getDerivedStateFromProps==null&&b!==_&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,R),e.__v==r.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,R)===!1){for(e.__v!=r.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(B){B&&(B.__=e)}),M=0;M<h._sb.length;M++)h.__h.push(h._sb[M]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,R),T&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(_,w,I)})}if(h.context=R,h.props=b,h.__P=n,h.__e=!1,U=Rt.__r,N=0,T){for(h.state=h.__s,h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[]}else do h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++N<25);h.state=h.__s,h.getChildContext!=null&&(i=Fi(Fi({},i),h.getChildContext())),T&&!m&&h.getSnapshotBeforeUpdate!=null&&(I=h.getSnapshotBeforeUpdate(_,w)),D=d,d!=null&&d.type===$p&&d.key==null&&(D=nC(d.props.children)),l=Zk(n,Up(D)?D:[D],e,r,i,s,o,a,l,u,c),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),P&&(h.__E=h.__=null)}catch(B){if(e.__v=null,u||o!=null)if(B.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(L=o.length;L--;)Z0(o[L]);$y(e)}else e.__e=r.__e,e.__k=r.__k,B.then||$y(e);Rt.__e(B,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=pU(r.__e,e,r,i,s,o,a,u,c);return(d=Rt.diffed)&&d(e),128&e.__u?void 0:l}function $y(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach($y)}function tC(n,e,r){for(var i=0;i<r.length;i++)t_(r[i],r[++i],r[++i]);Rt.__c&&Rt.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){Rt.__e(o,s.__v)}})}function nC(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Up(n)?n.map(nC):Fi({},n)}function pU(n,e,r,i,s,o,a,l,u){var c,d,h,m,_,w,I,P=r.props||nh,b=e.props,T=e.type;if(T=="svg"?s="http://www.w3.org/2000/svg":T=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((_=o[c])&&"setAttribute"in _==!!T&&(T?_.localName==T:_.nodeType==3)){n=_,o[c]=null;break}}if(n==null){if(T==null)return document.createTextNode(b);n=document.createElementNS(s,T,b.is&&b),l&&(Rt.__m&&Rt.__m(e,o),l=!1),o=null}if(T==null)P===b||l&&n.data==b||(n.data=b);else{if(o=o&&bh.call(n.childNodes),!l&&o!=null)for(P={},c=0;c<n.attributes.length;c++)P[(_=n.attributes[c]).name]=_.value;for(c in P)if(_=P[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=_;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;ff(n,c,null,_,s)}}for(c in b)_=b[c],c=="children"?m=_:c=="dangerouslySetInnerHTML"?d=_:c=="value"?w=_:c=="checked"?I=_:l&&typeof _!="function"||P[c]===_||ff(n,c,_,P[c],s);if(d)l||h&&(d.__html==h.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(h&&(n.innerHTML=""),Zk(e.type=="template"?n.content:n,Up(m)?m:[m],e,r,i,T=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&nu(r,0),l,u),o!=null)for(c=o.length;c--;)Z0(o[c]);l||(c="value",T=="progress"&&w==null?n.removeAttribute("value"):w!=null&&(w!==n[c]||T=="progress"&&!w||T=="option"&&w!=P[c])&&ff(n,c,w,P[c],s),c="checked",I!=null&&I!=n[c]&&ff(n,c,I,P[c],s))}return n}function t_(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){Rt.__e(s,r)}}function rC(n,e,r){var i,s;if(Rt.unmount&&Rt.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||t_(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Rt.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&rC(i[s],e,r||typeof n.type!="function");r||Z0(n.__e),n.__c=n.__=n.__e=void 0}function mU(n,e,r){return this.constructor(n,r)}function gU(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),Rt.__&&Rt.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],e_(e,n=e.__k=hU($p,null,[n]),s||nh,nh,e.namespaceURI,s?null:e.firstChild?bh.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),tC(o,n,a)}function iC(n,e,r){var i,s,o,a,l=Fi({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?bh.call(arguments,2):r),wc(n.type,l,i||n.key,s||n.ref,null)}bh=Xk.slice,Rt={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},Kk=0,Wk=function(n){return n!=null&&n.constructor===void 0},Uf.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Fi({},this.state),typeof n=="function"&&(n=n(Fi({},r),this.props)),n&&Fi(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),ab(this))},Uf.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ab(this))},Uf.prototype.render=$p,ca=[],Gk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qk=function(n,e){return n.__v.__b-e.__v.__b},qd.__r=0,Yk=/(PointerCapture)$|Capture$/i,J0=0,zy=ub(!1),Uy=ub(!0);function cb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yU(n){if(Array.isArray(n))return n}function vU(n,e,r){return(e=TU(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function _U(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function wU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function xU(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hb(Object(r),!0).forEach(function(i){vU(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):hb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function bU(n,e){return yU(n)||_U(n,e)||IU(n,e)||wU()}function EU(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function TU(n){var e=EU(n,"string");return typeof e=="symbol"?e:e+""}function Hd(n){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(n)}function IU(n,e){if(n){if(typeof n=="string")return cb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cb(n,e):void 0}}var By=function(e){if(Hd(e)!=="object")return e;var r=iC(e);if(r.props){var i;r.props=xU({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(By):By(r.props.children))}return r},SU=function(e){return Wk(iC(e))},kU=function(e,r){delete r.__k,gU(By(e),r)};function CU(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var AU=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;CU(AU);var NU=X0({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&Hd(e)==="object"&&!!e.node&&typeof e.node=="function",l=Lr(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(c){var d=bU(c,2),h=d[0],m=d[1];return r.tooltipEl.style(h,m)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(c){r.mouseInside=!0;var d=Li(c),h=l.node(),m=h.offsetWidth,_=h.offsetHeight,w=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/m*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?_>130&&_-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(w.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):SU(e.content)?(e.tooltipEl.text(""),kU(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function PU(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,u,c=0,d=0,h=0;for(a=0;a<l;++a)u=i[a],c+=u.x||0,d+=u.y||0,h+=u.z||0;for(c=(c/l-n)*s,d=(d/l-e)*s,h=(h/l-r)*s,a=0;a<l;++a)u=i[a],c&&(u.x-=c),d&&(u.y-=d),h&&(u.z-=h)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function RU(n){const e=+this._x.call(null,n);return sC(this.cover(e),e,n)}function sC(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,u,c,d,h,m;if(!s)return n._root=o,n;for(;s.length;)if((d=e>=(u=(a+l)/2))?a=u:l=u,i=s,!(s=s[h=+d]))return i[h]=o,n;if(c=+n._x.call(null,s.data),e===c)return o.next=s,i?i[h]=o:n._root=o,n;do i=i?i[h]=new Array(2):n._root=new Array(2),(d=e>=(u=(a+l)/2))?a=u:l=u;while((h=+d)==(m=+(c>=u)));return i[m]=s,i[h]=o,n}function OU(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)sC(this,r[o],n[o]);return this}function jU(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function DU(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function MU(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ss(n,e,r){this.node=n,this.x0=e,this.x1=r}function LU(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],u=this._root,c,d;for(u&&l.push(new Ss(u,i,a)),e==null?e=1/0:(i=n-e,a=n+e);c=l.pop();)if(!(!(u=c.node)||(s=c.x0)>a||(o=c.x1)<i))if(u.length){var h=(s+o)/2;l.push(new Ss(u[1],h,o),new Ss(u[0],s,h)),(d=+(n>=h))&&(c=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=c)}else{var m=Math.abs(n-+this._x.call(null,u.data));m<e&&(e=m,i=n-m,a=n+m,r=u.data)}return r}function VU(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,u,c,d,h,m;if(!r)return this;if(r.length)for(;;){if((d=u>=(c=(a+l)/2))?a=c:l=c,e=r,!(r=r[h=+d]))return this;if(!r.length)break;e[h+1&1]&&(i=e,m=h)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[h]=o:delete e[h],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=o,this)}function FU(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function zU(){return this._root}function UU(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function $U(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new Ss(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new Ss(s,l,a)),(s=i[0])&&e.push(new Ss(s,o,l))}return this}function BU(n){var e=[],r=[],i;for(this._root&&e.push(new Ss(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,u=(a+l)/2;(o=s[0])&&e.push(new Ss(o,a,u)),(o=s[1])&&e.push(new Ss(o,u,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function qU(n){return n[0]}function HU(n){return arguments.length?(this._x=n,this):this._x}function oC(n,e){var r=new n_(e??qU,NaN,NaN);return n==null?r:r.addAll(n)}function n_(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function fb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var or=oC.prototype=n_.prototype;or.copy=function(){var n=new n_(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=fb(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=fb(i));return n};or.add=RU;or.addAll=OU;or.cover=jU;or.data=DU;or.extent=MU;or.find=LU;or.remove=VU;or.removeAll=FU;or.root=zU;or.size=UU;or.visit=$U;or.visitAfter=BU;or.x=HU;function KU(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return aC(this.cover(e,r),e,r,n)}function aC(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._x1,d=n._y1,h,m,_,w,I,P,b,T;if(!o)return n._root=a,n;for(;o.length;)if((I=e>=(h=(l+c)/2))?l=h:c=h,(P=r>=(m=(u+d)/2))?u=m:d=m,s=o,!(o=o[b=P<<1|I]))return s[b]=a,n;if(_=+n._x.call(null,o.data),w=+n._y.call(null,o.data),e===_&&r===w)return a.next=o,s?s[b]=a:n._root=a,n;do s=s?s[b]=new Array(4):n._root=new Array(4),(I=e>=(h=(l+c)/2))?l=h:c=h,(P=r>=(m=(u+d)/2))?u=m:d=m;while((b=P<<1|I)===(T=(w>=m)<<1|_>=h));return s[T]=o,s[b]=a,n}function WU(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),u=1/0,c=1/0,d=-1/0,h=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<u&&(u=s),s>d&&(d=s),o<c&&(c=o),o>h&&(h=o));if(u>d||c>h)return this;for(this.cover(u,c).cover(d,h),r=0;r<i;++r)aC(this,a[r],l[r],n[r]);return this}function GU(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,u,c;r>n||n>=s||i>e||e>=o;)switch(c=(e<i)<<1|n<r,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function QU(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function YU(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Hn(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function XU(n,e,r){var i,s=this._x0,o=this._y0,a,l,u,c,d=this._x1,h=this._y1,m=[],_=this._root,w,I;for(_&&m.push(new Hn(_,s,o,d,h)),r==null?r=1/0:(s=n-r,o=e-r,d=n+r,h=e+r,r*=r);w=m.pop();)if(!(!(_=w.node)||(a=w.x0)>d||(l=w.y0)>h||(u=w.x1)<s||(c=w.y1)<o))if(_.length){var P=(a+u)/2,b=(l+c)/2;m.push(new Hn(_[3],P,b,u,c),new Hn(_[2],a,b,P,c),new Hn(_[1],P,l,u,b),new Hn(_[0],a,l,P,b)),(I=(e>=b)<<1|n>=P)&&(w=m[m.length-1],m[m.length-1]=m[m.length-1-I],m[m.length-1-I]=w)}else{var T=n-+this._x.call(null,_.data),A=e-+this._y.call(null,_.data),R=T*T+A*A;if(R<r){var M=Math.sqrt(r=R);s=n-M,o=e-M,d=n+M,h=e+M,i=_.data}}return i}function JU(n){if(isNaN(d=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,c=this._y1,d,h,m,_,w,I,P,b;if(!r)return this;if(r.length)for(;;){if((w=d>=(m=(a+u)/2))?a=m:u=m,(I=h>=(_=(l+c)/2))?l=_:c=_,e=r,!(r=r[P=I<<1|w]))return this;if(!r.length)break;(e[P+1&3]||e[P+2&3]||e[P+3&3])&&(i=e,b=P)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[P]=o:delete e[P],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[b]=r:this._root=r),this):(this._root=o,this)}function ZU(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function e$(){return this._root}function t$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function n$(n){var e=[],r,i=this._root,s,o,a,l,u;for(i&&e.push(new Hn(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,u=r.y1)&&i.length){var c=(o+l)/2,d=(a+u)/2;(s=i[3])&&e.push(new Hn(s,c,d,l,u)),(s=i[2])&&e.push(new Hn(s,o,d,c,u)),(s=i[1])&&e.push(new Hn(s,c,a,l,d)),(s=i[0])&&e.push(new Hn(s,o,a,c,d))}return this}function r$(n){var e=[],r=[],i;for(this._root&&e.push(new Hn(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,c=i.y1,d=(a+u)/2,h=(l+c)/2;(o=s[0])&&e.push(new Hn(o,a,l,d,h)),(o=s[1])&&e.push(new Hn(o,d,l,u,h)),(o=s[2])&&e.push(new Hn(o,a,h,d,c)),(o=s[3])&&e.push(new Hn(o,d,h,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function i$(n){return n[0]}function s$(n){return arguments.length?(this._x=n,this):this._x}function o$(n){return n[1]}function a$(n){return arguments.length?(this._y=n,this):this._y}function lC(n,e,r){var i=new r_(e??i$,r??o$,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function r_(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function db(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Yn=lC.prototype=r_.prototype;Yn.copy=function(){var n=new r_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=db(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=db(i));return n};Yn.add=KU;Yn.addAll=WU;Yn.cover=GU;Yn.data=QU;Yn.extent=YU;Yn.find=XU;Yn.remove=JU;Yn.removeAll=ZU;Yn.root=e$;Yn.size=t$;Yn.visit=n$;Yn.visitAfter=r$;Yn.x=s$;Yn.y=a$;function l$(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return uC(this.cover(e,r,i),e,r,i,n)}function uC(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},u=n._x0,c=n._y0,d=n._z0,h=n._x1,m=n._y1,_=n._z1,w,I,P,b,T,A,R,M,U,N,C;if(!a)return n._root=l,n;for(;a.length;)if((R=e>=(w=(u+h)/2))?u=w:h=w,(M=r>=(I=(c+m)/2))?c=I:m=I,(U=i>=(P=(d+_)/2))?d=P:_=P,o=a,!(a=a[N=U<<2|M<<1|R]))return o[N]=l,n;if(b=+n._x.call(null,a.data),T=+n._y.call(null,a.data),A=+n._z.call(null,a.data),e===b&&r===T&&i===A)return l.next=a,o?o[N]=l:n._root=l,n;do o=o?o[N]=new Array(8):n._root=new Array(8),(R=e>=(w=(u+h)/2))?u=w:h=w,(M=r>=(I=(c+m)/2))?c=I:m=I,(U=i>=(P=(d+_)/2))?d=P:_=P;while((N=U<<2|M<<1|R)===(C=(A>=P)<<2|(T>=I)<<1|b>=w));return o[C]=a,o[N]=l,n}function u$(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,d=-1/0;for(let h=0,m,_,w,I;h<e;++h)isNaN(_=+this._x.call(null,m=n[h]))||isNaN(w=+this._y.call(null,m))||isNaN(I=+this._z.call(null,m))||(r[h]=_,i[h]=w,s[h]=I,_<o&&(o=_),_>u&&(u=_),w<a&&(a=w),w>c&&(c=w),I<l&&(l=I),I>d&&(d=I));if(o>u||a>c||l>d)return this;this.cover(o,a,l).cover(u,c,d);for(let h=0;h<e;++h)uC(this,r[h],i[h],s[h],n[h]);return this}function c$(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,u=(o=Math.floor(r))+1;else{for(var c=a-i||1,d=this._root,h,m;i>n||n>=a||s>e||e>=l||o>r||r>=u;)switch(m=(r<o)<<2|(e<s)<<1|n<i,h=new Array(8),h[m]=d,d=h,c*=2,m){case 0:a=i+c,l=s+c,u=o+c;break;case 1:i=a-c,l=s+c,u=o+c;break;case 2:a=i+c,s=l-c,u=o+c;break;case 3:i=a-c,s=l-c,u=o+c;break;case 4:a=i+c,l=s+c,o=u-c;break;case 5:i=a-c,l=s+c,o=u-c;break;case 6:a=i+c,s=l-c,o=u-c;break;case 7:i=a-c,s=l-c,o=u-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this}function h$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function f$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Et(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function d$(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,u,c,d,h,m,_,w=this._x1,I=this._y1,P=this._z1,b=[],T=this._root,A,R;for(T&&b.push(new Et(T,o,a,l,w,I,P)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,w=n+i,I=e+i,P=r+i,i*=i);A=b.pop();)if(!(!(T=A.node)||(u=A.x0)>w||(c=A.y0)>I||(d=A.z0)>P||(h=A.x1)<o||(m=A.y1)<a||(_=A.z1)<l))if(T.length){var M=(u+h)/2,U=(c+m)/2,N=(d+_)/2;b.push(new Et(T[7],M,U,N,h,m,_),new Et(T[6],u,U,N,M,m,_),new Et(T[5],M,c,N,h,U,_),new Et(T[4],u,c,N,M,U,_),new Et(T[3],M,U,d,h,m,N),new Et(T[2],u,U,d,M,m,N),new Et(T[1],M,c,d,h,U,N),new Et(T[0],u,c,d,M,U,N)),(R=(r>=N)<<2|(e>=U)<<1|n>=M)&&(A=b[b.length-1],b[b.length-1]=b[b.length-1-R],b[b.length-1-R]=A)}else{var C=n-+this._x.call(null,T.data),D=e-+this._y.call(null,T.data),L=r-+this._z.call(null,T.data),V=C*C+D*D+L*L;if(V<i){var B=Math.sqrt(i=V);o=n-B,a=e-B,l=r-B,w=n+B,I=e+B,P=r+B,s=T.data}}return s}const p$=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function m$(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,u=n+i,c=e+i,d=r+i;return this.visit((h,m,_,w,I,P,b)=>{if(!h.length)do{const T=h.data;p$(n,e,r,this._x(T),this._y(T),this._z(T))<=i&&s.push(T)}while(h=h.next);return m>u||_>c||w>d||I<o||P<a||b<l}),s}function g$(n){if(isNaN(m=+this._x.call(null,n))||isNaN(_=+this._y.call(null,n))||isNaN(w=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._z0,c=this._x1,d=this._y1,h=this._z1,m,_,w,I,P,b,T,A,R,M,U;if(!r)return this;if(r.length)for(;;){if((T=m>=(I=(a+c)/2))?a=I:c=I,(A=_>=(P=(l+d)/2))?l=P:d=P,(R=w>=(b=(u+h)/2))?u=b:h=b,e=r,!(r=r[M=R<<2|A<<1|T]))return this;if(!r.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(i=e,U=M)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[M]=o:delete e[M],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[U]=r:this._root=r),this):(this._root=o,this)}function y$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function v$(){return this._root}function _$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function w$(n){var e=[],r,i=this._root,s,o,a,l,u,c,d;for(i&&e.push(new Et(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,d=r.z1)&&i.length){var h=(o+u)/2,m=(a+c)/2,_=(l+d)/2;(s=i[7])&&e.push(new Et(s,h,m,_,u,c,d)),(s=i[6])&&e.push(new Et(s,o,m,_,h,c,d)),(s=i[5])&&e.push(new Et(s,h,a,_,u,m,d)),(s=i[4])&&e.push(new Et(s,o,a,_,h,m,d)),(s=i[3])&&e.push(new Et(s,h,m,l,u,c,_)),(s=i[2])&&e.push(new Et(s,o,m,l,h,c,_)),(s=i[1])&&e.push(new Et(s,h,a,l,u,m,_)),(s=i[0])&&e.push(new Et(s,o,a,l,h,m,_))}return this}function x$(n){var e=[],r=[],i;for(this._root&&e.push(new Et(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.z0,c=i.x1,d=i.y1,h=i.z1,m=(a+c)/2,_=(l+d)/2,w=(u+h)/2;(o=s[0])&&e.push(new Et(o,a,l,u,m,_,w)),(o=s[1])&&e.push(new Et(o,m,l,u,c,_,w)),(o=s[2])&&e.push(new Et(o,a,_,u,m,d,w)),(o=s[3])&&e.push(new Et(o,m,_,u,c,d,w)),(o=s[4])&&e.push(new Et(o,a,l,w,m,_,h)),(o=s[5])&&e.push(new Et(o,m,l,w,c,_,h)),(o=s[6])&&e.push(new Et(o,a,_,w,m,d,h)),(o=s[7])&&e.push(new Et(o,m,_,w,c,d,h))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function b$(n){return n[0]}function E$(n){return arguments.length?(this._x=n,this):this._x}function T$(n){return n[1]}function I$(n){return arguments.length?(this._y=n,this):this._y}function S$(n){return n[2]}function k$(n){return arguments.length?(this._z=n,this):this._z}function cC(n,e,r,i){var s=new i_(e??b$,r??T$,i??S$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function i_(n,e,r,i,s,o,a,l,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function pb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var En=cC.prototype=i_.prototype;En.copy=function(){var n=new i_(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=pb(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=pb(i));return n};En.add=l$;En.addAll=u$;En.cover=c$;En.data=h$;En.extent=f$;En.find=d$;En.findAllWithinRadius=m$;En.remove=g$;En.removeAll=y$;En.root=v$;En.size=_$;En.visit=w$;En.visitAfter=x$;En.x=E$;En.y=I$;En.z=k$;function Es(n){return function(){return n}}function gs(n){return(n()-.5)*1e-6}function C$(n){return n.index}function mb(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function A$(n){var e=C$,r=m,i,s=Es(30),o,a,l,u,c,d,h=1;n==null&&(n=[]);function m(b){return 1/Math.min(u[b.source.index],u[b.target.index])}function _(b){for(var T=0,A=n.length;T<h;++T)for(var R=0,M,U,N,C=0,D=0,L=0,V,B;R<A;++R)M=n[R],U=M.source,N=M.target,C=N.x+N.vx-U.x-U.vx||gs(d),l>1&&(D=N.y+N.vy-U.y-U.vy||gs(d)),l>2&&(L=N.z+N.vz-U.z-U.vz||gs(d)),V=Math.sqrt(C*C+D*D+L*L),V=(V-o[R])/V*b*i[R],C*=V,D*=V,L*=V,N.vx-=C*(B=c[R]),l>1&&(N.vy-=D*B),l>2&&(N.vz-=L*B),U.vx+=C*(B=1-B),l>1&&(U.vy+=D*B),l>2&&(U.vz+=L*B)}function w(){if(a){var b,T=a.length,A=n.length,R=new Map(a.map((U,N)=>[e(U,N,a),U])),M;for(b=0,u=new Array(T);b<A;++b)M=n[b],M.index=b,typeof M.source!="object"&&(M.source=mb(R,M.source)),typeof M.target!="object"&&(M.target=mb(R,M.target)),u[M.source.index]=(u[M.source.index]||0)+1,u[M.target.index]=(u[M.target.index]||0)+1;for(b=0,c=new Array(A);b<A;++b)M=n[b],c[b]=u[M.source.index]/(u[M.source.index]+u[M.target.index]);i=new Array(A),I(),o=new Array(A),P()}}function I(){if(a)for(var b=0,T=n.length;b<T;++b)i[b]=+r(n[b],b,n)}function P(){if(a)for(var b=0,T=n.length;b<T;++b)o[b]=+s(n[b],b,n)}return _.initialize=function(b,...T){a=b,d=T.find(A=>typeof A=="function")||Math.random,l=T.find(A=>[1,2,3].includes(A))||2,w()},_.links=function(b){return arguments.length?(n=b,w(),_):n},_.id=function(b){return arguments.length?(e=b,_):e},_.iterations=function(b){return arguments.length?(h=+b,_):h},_.strength=function(b){return arguments.length?(r=typeof b=="function"?b:Es(+b),I(),_):r},_.distance=function(b){return arguments.length?(s=typeof b=="function"?b:Es(+b),P(),_):s},_}const N$=1664525,P$=1013904223,gb=4294967296;function R$(){let n=1;return()=>(n=(N$*n+P$)%gb)/gb}var yb=3;function Xm(n){return n.x}function vb(n){return n.y}function O$(n){return n.z}var j$=10,D$=Math.PI*(3-Math.sqrt(5)),M$=Math.PI*20/(9+Math.sqrt(221));function L$(n,e){e=e||2;var r=Math.min(yb,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,u=.6,c=new Map,d=W0(_),h=wh("tick","end"),m=R$();n==null&&(n=[]);function _(){w(),h.call("tick",i),s<o&&(d.stop(),h.call("end",i))}function w(b){var T,A=n.length,R;b===void 0&&(b=1);for(var M=0;M<b;++M)for(s+=(l-s)*a,c.forEach(function(U){U(s)}),T=0;T<A;++T)R=n[T],R.fx==null?R.x+=R.vx*=u:(R.x=R.fx,R.vx=0),r>1&&(R.fy==null?R.y+=R.vy*=u:(R.y=R.fy,R.vy=0)),r>2&&(R.fz==null?R.z+=R.vz*=u:(R.z=R.fz,R.vz=0));return i}function I(){for(var b=0,T=n.length,A;b<T;++b){if(A=n[b],A.index=b,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),A.fz!=null&&(A.z=A.fz),isNaN(A.x)||r>1&&isNaN(A.y)||r>2&&isNaN(A.z)){var R=j$*(r>2?Math.cbrt(.5+b):r>1?Math.sqrt(.5+b):b),M=b*D$,U=b*M$;r===1?A.x=R:r===2?(A.x=R*Math.cos(M),A.y=R*Math.sin(M)):(A.x=R*Math.sin(M)*Math.cos(U),A.y=R*Math.cos(M),A.z=R*Math.sin(M)*Math.sin(U))}(isNaN(A.vx)||r>1&&isNaN(A.vy)||r>2&&isNaN(A.vz))&&(A.vx=0,r>1&&(A.vy=0),r>2&&(A.vz=0))}}function P(b){return b.initialize&&b.initialize(n,m,r),b}return I(),i={tick:w,restart:function(){return d.restart(_),i},stop:function(){return d.stop(),i},numDimensions:function(b){return arguments.length?(r=Math.min(yb,Math.max(1,Math.round(b))),c.forEach(P),i):r},nodes:function(b){return arguments.length?(n=b,I(),c.forEach(P),i):n},alpha:function(b){return arguments.length?(s=+b,i):s},alphaMin:function(b){return arguments.length?(o=+b,i):o},alphaDecay:function(b){return arguments.length?(a=+b,i):+a},alphaTarget:function(b){return arguments.length?(l=+b,i):l},velocityDecay:function(b){return arguments.length?(u=1-b,i):1-u},randomSource:function(b){return arguments.length?(m=b,c.forEach(P),i):m},force:function(b,T){return arguments.length>1?(T==null?c.delete(b):c.set(b,P(T)),i):c.get(b)},find:function(){var b=Array.prototype.slice.call(arguments),T=b.shift()||0,A=(r>1?b.shift():null)||0,R=(r>2?b.shift():null)||0,M=b.shift()||1/0,U=0,N=n.length,C,D,L,V,B,j;for(M*=M,U=0;U<N;++U)B=n[U],C=T-B.x,D=A-(B.y||0),L=R-(B.z||0),V=C*C+D*D+L*L,V<M&&(j=B,M=V);return j},on:function(b,T){return arguments.length>1?(h.on(b,T),i):h.on(b)}}}function V$(){var n,e,r,i,s,o=Es(-30),a,l=1,u=1/0,c=.81;function d(w){var I,P=n.length,b=(e===1?oC(n,Xm):e===2?lC(n,Xm,vb):e===3?cC(n,Xm,vb,O$):null).visitAfter(m);for(s=w,I=0;I<P;++I)r=n[I],b.visit(_)}function h(){if(n){var w,I=n.length,P;for(a=new Array(I),w=0;w<I;++w)P=n[w],a[P.index]=+o(P,w,n)}}function m(w){var I=0,P,b,T=0,A,R,M,U,N=w.length;if(N){for(A=R=M=U=0;U<N;++U)(P=w[U])&&(b=Math.abs(P.value))&&(I+=P.value,T+=b,A+=b*(P.x||0),R+=b*(P.y||0),M+=b*(P.z||0));I*=Math.sqrt(4/N),w.x=A/T,e>1&&(w.y=R/T),e>2&&(w.z=M/T)}else{P=w,P.x=P.data.x,e>1&&(P.y=P.data.y),e>2&&(P.z=P.data.z);do I+=a[P.data.index];while(P=P.next)}w.value=I}function _(w,I,P,b,T){if(!w.value)return!0;var A=[P,b,T][e-1],R=w.x-r.x,M=e>1?w.y-r.y:0,U=e>2?w.z-r.z:0,N=A-I,C=R*R+M*M+U*U;if(N*N/c<C)return C<u&&(R===0&&(R=gs(i),C+=R*R),e>1&&M===0&&(M=gs(i),C+=M*M),e>2&&U===0&&(U=gs(i),C+=U*U),C<l&&(C=Math.sqrt(l*C)),r.vx+=R*w.value*s/C,e>1&&(r.vy+=M*w.value*s/C),e>2&&(r.vz+=U*w.value*s/C)),!0;if(w.length||C>=u)return;(w.data!==r||w.next)&&(R===0&&(R=gs(i),C+=R*R),e>1&&M===0&&(M=gs(i),C+=M*M),e>2&&U===0&&(U=gs(i),C+=U*U),C<l&&(C=Math.sqrt(l*C)));do w.data!==r&&(N=a[w.data.index]*s/C,r.vx+=R*N,e>1&&(r.vy+=M*N),e>2&&(r.vz+=U*N));while(w=w.next)}return d.initialize=function(w,...I){n=w,i=I.find(P=>typeof P=="function")||Math.random,e=I.find(P=>[1,2,3].includes(P))||2,h()},d.strength=function(w){return arguments.length?(o=typeof w=="function"?w:Es(+w),h(),d):o},d.distanceMin=function(w){return arguments.length?(l=w*w,d):Math.sqrt(l)},d.distanceMax=function(w){return arguments.length?(u=w*w,d):Math.sqrt(u)},d.theta=function(w){return arguments.length?(c=w*w,d):Math.sqrt(c)},d}function F$(n,e,r,i){var s,o,a=Es(.1),l,u;typeof n!="function"&&(n=Es(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function c(h){for(var m=0,_=s.length;m<_;++m){var w=s[m],I=w.x-e||1e-6,P=(w.y||0)-r||1e-6,b=(w.z||0)-i||1e-6,T=Math.sqrt(I*I+P*P+b*b),A=(u[m]-T)*l[m]*h/T;w.vx+=I*A,o>1&&(w.vy+=P*A),o>2&&(w.vz+=b*A)}}function d(){if(s){var h,m=s.length;for(l=new Array(m),u=new Array(m),h=0;h<m;++h)u[h]=+n(s[h],h,s),l[h]=isNaN(u[h])?0:+a(s[h],h,s)}}return c.initialize=function(h,...m){s=h,o=m.find(_=>[1,2,3].includes(_))||2,d()},c.strength=function(h){return arguments.length?(a=typeof h=="function"?h:Es(+h),d(),c):a},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:Es(+h),d(),c):n},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(r=+h,c):r},c.z=function(h){return arguments.length?(i=+h,c):i},c}const{abs:$u,cos:ds,sin:sl,acos:z$,atan2:Bu,sqrt:Xs,pow:Or}=Math;function qu(n){return n<0?-Or(-n,1/3):Or(n,1/3)}const hC=Math.PI,df=2*hC,Js=hC/2,U$=1e-6,Jm=Number.MAX_SAFE_INTEGER||9007199254740991,Zm=Number.MIN_SAFE_INTEGER||-9007199254740991,$$={x:0,y:0,z:0},be={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Xs(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,u=n*n,c,d,h,m=0;i===2?(o=[o[0],o[1],o[2],$$],c=l,d=s*n*2,h=u):i===3&&(c=l*s,d=l*n*3,h=s*u*3,m=n*u);const _={x:c*o[0].x+d*o[1].x+h*o[2].x+m*o[3].x,y:c*o[0].y+d*o[1].y+h*o[2].y+m*o[3].y,t:n};return r&&(_.z=c*o[0].z+d*o[1].z+h*o[2].z+m*o[3].z),_}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],u=o[1],c=o[2],d=o[3],h;if(l*=s,u*=n,a.length===2)return h=l+u,{x:(l*a[0].x+u*a[1].x)/h,y:(l*a[0].y+u*a[1].y)/h,z:i?(l*a[0].z+u*a[1].z)/h:!1,t:n};if(l*=s,u*=2*s,c*=n*n,a.length===3)return h=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z)/h:!1,t:n};if(l*=s,u*=1.5*s,c*=3*s,d*=n*n*n,a.length===4)return h=l+u+c+d,{x:(l*a[0].x+u*a[1].x+c*a[2].x+d*a[3].x)/h,y:(l*a[0].y+u*a[1].y+c*a[2].y+d*a[3].y)/h,z:i?(l*a[0].z+u*a[1].z+c*a[2].z+d*a[3].z)/h:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,u;l<o;l++)u={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(u.z=o*(i[l+1].z-i[l].z)),a.push(u);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||be.approximately(n,e)||be.approximately(n,r)},approximately:function(n,e,r){return $u(n-e)<=(r||U$)},length:function(n){const r=be.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*be.Tvalues[s]+.5,i+=be.Cvalues[s]*be.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,u=l/o;return i+a*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(be.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,u=i*o+s*a;return Bu(l,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return Xs(r*r+i*i)},closest:function(n,e){let r=Or(2,63),i,s;return n.forEach(function(o,a){s=be.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Or(n,e)+Or(1-n,e),i=r-1;return $u(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Or(1-n,e),i=Or(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const u=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),c=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),d=(n-r)*(o-l)-(e-i)*(s-a);return d==0?!1:{x:u/d,y:c/d}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,u=r.x,c=r.y,d=i.x,h=i.y;return be.lli8(s,o,a,l,u,c,d,h)},lli:function(n,e){return be.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new St(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=Jm,r=Jm,i=Zm,s=Zm;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!be.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(u){u.virtual||l.forEach(function(c){if(c.virtual)return;const d=u.intersects(c,s);d.length>0&&(d.c1=u,d.c2=c,d.s1=n,d.s2=r,o.push(d))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=be.makeline(e.points[i-1],n.points[0]),a=be.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:be.findbbox([o,n,e,a])};return l.intersections=function(u){return be.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=Jm,s=Zm,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-Bu(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*ds(s)-(a.y-i)*sl(s),y:(a.x-r)*sl(s)+(a.y-i)*ds(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=be.align(n,e),s=function(N){return 0<=N&&N<=1};if(r===2){const N=i[0].y,C=i[1].y,D=i[2].y,L=N-2*C+D;if(L!==0){const V=-Xs(C*C-N*D),B=-N+C,j=-(V+B)/L,K=-(-V+B)/L;return[j,K].filter(s)}else if(C!==D&&L===0)return[(2*C-D)/(2*C-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,u=i[3].y;let c=-o+3*a-3*l+u,d=3*o-6*a+3*l,h=-3*o+3*a,m=o;if(be.approximately(c,0)){if(be.approximately(d,0))return be.approximately(h,0)?[]:[-m/h].filter(s);const N=Xs(h*h-4*d*m),C=2*d;return[(N-h)/C,(-h-N)/C].filter(s)}d/=c,h/=c,m/=c;const _=(3*h-d*d)/3,w=_/3,I=(2*d*d*d-9*d*h+27*m)/27,P=I/2,b=P*P+w*w*w;let T,A,R,M,U;if(b<0){const N=-_/3,C=N*N*N,D=Xs(C),L=-I/(2*D),V=L<-1?-1:L>1?1:L,B=z$(V),j=qu(D),K=2*j;return R=K*ds(B/3)-d/3,M=K*ds((B+df)/3)-d/3,U=K*ds((B+2*df)/3)-d/3,[R,M,U].filter(s)}else{if(b===0)return T=P<0?qu(-P):-qu(P),R=2*T-d/3,M=-T-d/3,[R,M].filter(s);{const N=Xs(b);return T=qu(-P+N),A=qu(P+N),[T-A-d/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-Xs(r*r-e*i),a=-e+r,l=-(o+a)/s,u=-(-o+a)/s;return[l,u]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,u,c=0,d=0;const h=be.compute(n,e),m=be.compute(n,r),_=h.x*h.x+h.y*h.y;if(i?(o=Xs(Or(h.y*m.z-m.y*h.z,2)+Or(h.z*m.x-m.z*h.x,2)+Or(h.x*m.y-m.x*h.y,2)),a=Or(_+h.z*h.z,3/2)):(o=h.x*m.y-h.y*m.x,a=Or(_,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,d=a/o,!s){const w=be.curvature(n-.001,e,r,i,!0).k,I=be.curvature(n+.001,e,r,i,!0).k;u=(I-c+(c-w))/2,l=($u(I-c)+$u(c-w))/2}return{k:c,r:d,dk:u,adk:l}},inflections:function(n){if(n.length<4)return[];const e=be.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),u=18*(s-r);if(be.approximately(a,0)){if(!be.approximately(l,0)){let m=-u/l;if(0<=m&&m<=1)return[m]}return[]}const c=2*a;if(be.approximately(c,0))return[];const d=l*l-4*a*u;if(d<0)return[];const h=Math.sqrt(d);return[(h-l)/c,-(l+h)/c].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,u;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,u=(n[o].size+e[o].size)/2,$u(a-l)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),u=e.split(.5),c=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];c=c.filter(function(h){return be.bboxoverlap(h.left.bbox(),h.right.bbox())});let d=[];return c.length===0||(c.forEach(function(h){d=d.concat(be.pairiteration(h.left,h.right,a))}),d=d.filter(function(h,m){return d.indexOf(h)===m})),d},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*ds(Js)-s*sl(Js),u=i*sl(Js)+s*ds(Js),c=o*ds(Js)-a*sl(Js),d=o*sl(Js)+a*ds(Js),h=(n.x+e.x)/2,m=(n.y+e.y)/2,_=(e.x+r.x)/2,w=(e.y+r.y)/2,I=h+l,P=m+u,b=_+c,T=w+d,A=be.lli8(h,m,I,P,_,w,b,T),R=be.dist(A,n);let M=Bu(n.y-A.y,n.x-A.x),U=Bu(e.y-A.y,e.x-A.x),N=Bu(r.y-A.y,r.x-A.x),C;return M<N?((M>U||U>N)&&(M+=df),M>N&&(C=N,N=M,M=C)):N<U&&U<M?(C=N,N=M,M=C):N+=df,A.s=M,A.e=N,A.r=R,A},numberSort:function(n,e){return n-e}};class xc{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return be.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)be.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new xc(r)}}const{abs:Hu,min:_b,max:wb,cos:B$,sin:q$,acos:H$,sqrt:Ku}=Math,K$=Math.PI;class St{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const _=[];r.forEach(function(w){["x","y","z"].forEach(function(I){typeof w[I]<"u"&&_.push(w[I])})}),r=_}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let _=0,w=a?3:2;_<o;_+=w){var u={x:r[_],y:r[_+1]};a&&(u.z=r[_+2]),l.push(u)}const c=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const h=be.align(l,{p1:l[0],p2:l[c]}),m=be.dist(l[0],l[c]);this._linear=h.reduce((_,w)=>_+Hu(w.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new St(r,r,i);if(s===1)return new St(e,r,r);const o=St.getABC(2,e,r,i,s);return new St(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=St.getABC(3,e,r,i,s);typeof o>"u"&&(o=be.dist(r,a.C));const l=o*(1-s)/s,u=be.dist(e,i),c=(i.x-e.x)/u,d=(i.y-e.y)/u,h=o*c,m=o*d,_=l*c,w=l*d,I={x:r.x-h,y:r.y-m},P={x:r.x+_,y:r.y+w},b=a.A,T={x:b.x+(I.x-b.x)/(1-s),y:b.y+(I.y-b.y)/(1-s)},A={x:b.x+(P.x-b.x)/s,y:b.y+(P.y-b.y)/s},R={x:e.x+(T.x-e.x)/s,y:e.y+(T.y-e.y)/s},M={x:i.x+(A.x-i.x)/(1-s),y:i.y+(A.y-i.y)/(1-s)};return new St(e,R,M,i)}static getUtils(){return be}getUtils(){return St.getUtils()}static get PolyBezier(){return xc}valueOf(){return this.toString()}toString(){return be.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=be.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=be.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return be.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=be.projectionratio(o,e),l=1-a,u={x:a*r.x+l*s.x,y:a*r.y+l*s.y},c=be.abcratio(o,e);return{A:{x:i.x+(i.x-u.x)/c,y:i.y+(i.y-u.y)/c},B:i,C:u,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return St.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],be.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=be.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,u=.1/i;let c=s.mdist,d=a,h=d,m;c+=1;for(let _;d<l+u;d+=u)m=this.compute(d),_=be.dist(e,m),_<c&&(c=_,h=d);return h=h<0?0:h>1?1:h,m=this.compute(h),m.t=h,m.d=c,m}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?be.computeWithRatios(e,this.points,this.ratios,this._3d):be.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new St(r)}derivative(e){return be.compute(e,this.dpoints[0],this._3d)}dderivative(e){return be.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new St(be.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return be.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return be.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Ku(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Ku(r.x*r.x+r.y*r.y+r.z*r.z),o=Ku(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Ku(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const u=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,u=r.length-1;a<u;a++)l=be.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new St([i[0],i[3],i[5]]):new St([i[0],i[4],i[7],i[9]]),right:this.order===2?new St([i[5],i[4],i[2]]):new St([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=be.map(0,0,1,this._t1,this._t2),s.left._t2=be.map(e,0,1,this._t1,this._t2),s.right._t1=be.map(e,0,1,this._t1,this._t2),s.right._t2=be.map(1,0,1,this._t1,this._t2),r?(r=be.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=be.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(be.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(be.numberSort))}).bind(this)),e.values=r.sort(be.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=be.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return be.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new St(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=be.angle(this.points[0],this.points[3],this.points[1]),o=be.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Hu(H$(i))<K$/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=c.split(r,i),!o.simple()){if(i-=s,Hu(r-i)<s)return[];o=c.split(r,i),o._t1=be.map(r,0,1,c._t1,c._t2),o._t2=be.map(i,0,1,c._t1,c._t2),l.push(o),r=i;break}r<1&&(o=c.split(r,1),o._t1=be.map(r,0,1,c._t1,c._t2),o._t2=c._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new St(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],c=[],d=be.lli4(u[0],u[0].c,u[1],u[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const m=c[h*r]=be.copy(o[h*r]);m.x+=(h?l:a)*u[h].n.x,m.y+=(h?l:a)*u[h].n.y}),i?([0,1].forEach(function(h){if(!(r===2&&h)){var m=o[h+1],_={x:m.x-d.x,y:m.y-d.y},w=i?i((h+1)/r):e;i&&!s&&(w=-w);var I=Ku(_.x*_.x+_.y*_.y);_.x/=I,_.y/=I,c[h+1]={x:m.x+w*_.x,y:m.y+w*_.y}}}),new St(c)):([0,1].forEach(h=>{if(r===2&&h)return;const m=c[h*r],_=this.derivative(h),w={x:m.x+_.x,y:m.y+_.y};c[h+1]=be.lli4(m,w,d,o[h+1])}),new St(c))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const M=this.normal(0),U=this.points[0],N=this.points[this.points.length-1];let C,D,L;i===void 0&&(i=e,s=r),C={x:U.x+M.x*e,y:U.y+M.y*e},L={x:N.x+M.x*i,y:N.y+M.y*i},D={x:(C.x+L.x)/2,y:(C.y+L.y)/2};const V=[C,D,L];C={x:U.x-M.x*r,y:U.y-M.y*r},L={x:N.x-M.x*s,y:N.y-M.y*s},D={x:(C.x+L.x)/2,y:(C.y+L.y)/2};const B=[L,D,C],j=be.makeline(B[2],V[0]),K=be.makeline(V[2],B[0]),G=[j,new St(V),K,new St(B)];return new xc(G)}const o=this.reduce(),a=o.length,l=[];let u=[],c,d=0,h=this.length();const m=typeof i<"u"&&typeof s<"u";function _(M,U,N,C,D){return function(L){const V=C/N,B=(C+D)/N,j=U-M;return be.map(L,0,1,M+V*j,M+B*j)}}o.forEach(function(M){const U=M.length();m?(l.push(M.scale(_(e,i,h,d,U))),u.push(M.scale(_(-r,-s,h,d,U)))):(l.push(M.scale(e)),u.push(M.scale(-r))),d+=U}),u=u.map(function(M){return c=M.points,c[3]?M.points=[c[3],c[2],c[1],c[0]]:M.points=[c[2],c[1],c[0]],M}).reverse();const w=l[0].points[0],I=l[a-1].points[l[a-1].points.length-1],P=u[a-1].points[u[a-1].points.length-1],b=u[0].points[0],T=be.makeline(P,w),A=be.makeline(I,b),R=[T].concat(l).concat([A]).concat(u);return new xc(R)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const u=be.makeshape(s[a],s[l-a],i);u.startcap.virtual=a>1,u.endcap.virtual=a<l/2-1,o.push(u)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof St&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=_b(e.p1.x,e.p2.x),i=_b(e.p1.y,e.p2.y),s=wb(e.p1.x,e.p2.x),o=wb(e.p1.y,e.p2.y);return be.roots(this.points,e).filter(a=>{var l=this.get(a);return be.between(l.x,r,s)&&be.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,u;o<i;o++)l=r.slice(o,o+1),u=r.slice(o+2),a=this.curveintersects(l,u,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=be.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),u=be.dist(e,r),c=be.dist(e,a),d=be.dist(e,l);return Hu(c-u)+Hu(d-u)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,u,c,d,h=!1,m=!1,_,w=s,I=1;do if(m=h,d=c,w=(i+s)/2,l=this.get(w),u=this.get(s),c=be.getccenter(a,l,u),c.interval={start:i,end:s},h=this._error(c,a,i,s)<=e,_=m&&!h,_||(I=s),h){if(s>=1){if(c.interval.end=I=1,d=c,s>1){let b={x:c.x+c.r*B$(c.e),y:c.y+c.r*q$(c.e)};c.e+=be.angle({x:c.x,y:c.y},b,this.get(1))}break}s=s+(s-i)/2}else s=w;while(!_&&o++<100);if(o>=100)break;d=d||c,r.push(d),i=I}while(s<1);return r}}function qy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function W$(n){if(Array.isArray(n))return n}function G$(n){if(Array.isArray(n))return qy(n)}function Q$(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Y$(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function X$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(n,e){if(n==null)return{};var r,i,s=e7(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function e7(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function t7(n,e){return W$(n)||Y$(n,e)||fC(n,e)||X$()}function n7(n){return G$(n)||Q$(n)||fC(n)||J$()}function r7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function i7(n){var e=r7(n,"string");return typeof e=="symbol"?e:e+""}function fC(n,e){if(n){if(typeof n=="string")return qy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qy(n,e):void 0}}var s7=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,u){var c=l,d=u;return s.forEach(function(h,m){var _=h.keyAccessor,w=h.isProp,I;if(w){var P=d,b=P[_],T=Z$(P,[_].map(i7));I=b,d=T}else I=_(d,m);m+1<s.length?(c.hasOwnProperty(I)||(c[I]={}),c=c[I]):r?(c.hasOwnProperty(I)||(c[I]=[]),c[I].push(d)):c[I]=d}),l},{});r instanceof Function&&function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===s.length?Object.keys(u).forEach(function(d){return u[d]=r(u[d])}):Object.values(u).forEach(function(d){return l(d,c+1)})}(o);var a=o;return i&&(a=[],function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===s.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(d){var h=t7(d,2),m=h[0],_=h[1];return l(_,[].concat(n7(c),[m]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function o7(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const xb=Symbol("implicit");function dC(){var n=new $1,e=[],r=[],i=xb;function s(o){let a=n.get(o);if(a===void 0){if(i!==xb)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new $1;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return dC(e,r).unknown(i)},o7.apply(s,arguments),s}function a7(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const l7=a7("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function u7(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var c7=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;u7(c7);function Hy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function h7(n){if(Array.isArray(n))return n}function f7(n){if(Array.isArray(n))return Hy(n)}function bb(n,e,r){if(pC())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function rh(n,e,r){return(e=v7(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function pC(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pC=function(){return!!n})()}function d7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function p7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(d){c=!0,s=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function m7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function ol(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Eb(Object(r),!0).forEach(function(i){rh(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Eb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function bc(n,e){return h7(n)||p7(n,e)||mC(n,e)||m7()}function Vr(n){return f7(n)||d7(n)||mC(n)||g7()}function y7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v7(n){var e=y7(n,"string");return typeof e=="symbol"?e:e+""}function Ky(n){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(n)}function mC(n,e){if(n){if(typeof n=="string")return Hy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hy(n,e):void 0}}var _7=dC(l7);function Tb(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=_7(e(i))})}function w7(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,u=l===void 0?function(_){throw"Invalid DAG structure! Found cycle in node path: ".concat(_.join(" -> "),".")}:l,c={};r.forEach(function(_){return c[e(_)]={data:_,out:[],depth:-1,skip:!a(_)}}),i.forEach(function(_){var w=_.source,I=_.target,P=R(w),b=R(I);if(!c.hasOwnProperty(P))throw"Missing source node with id: ".concat(P);if(!c.hasOwnProperty(b))throw"Missing target node with id: ".concat(b);var T=c[P],A=c[b];T.out.push(A);function R(M){return Ky(M)==="object"?e(M):M}});var d=[];m(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(Vr(Object.entries(c).filter(function(_){var w=bc(_,2),I=w[1];return!I.skip}).map(function(_){var w=bc(_,2),I=w[0],P=w[1];return rh({},I,P.depth)}))));return h;function m(_){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,P=function(){var R=_[b];if(w.indexOf(R)!==-1){var M=[].concat(Vr(w.slice(w.indexOf(R))),[R]).map(function(U){return e(U.data)});return d.some(function(U){return U.length===M.length&&U.every(function(N,C){return N===M[C]})})||(d.push(M),u(M)),1}I>R.depth&&(R.depth=I,m(R.out,[].concat(Vr(w),[R]),I+(R.skip?0:1)))},b=0,T=_.length;b<T;b++)P()}}var x7=2,On=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Ib=function(e,r){if(!r.isShadow){var i=pt(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=Vr(Array(o)).map(function(){return{}}):delete s.__photons})}},Kd=X0({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Ib(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:On},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:On},nodeColor:{default:"color",triggerUpdate:!1,onChange:On},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:On},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:On},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:On},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:On},linkColor:{default:"color",triggerUpdate:!1,onChange:On},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:On},linkWidth:{default:1,triggerUpdate:!1,onChange:On},linkCurvature:{default:0,triggerUpdate:!1,onChange:On},linkCanvasObject:{triggerUpdate:!1,onChange:On},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:On},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:On},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:On},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:On},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Ib},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=pt(e.nodeVisibility),u=pt(e.nodeVal),c=pt(e.nodeColor),d=pt(e.nodeCanvasObjectMode),h=e.ctx,m=e.isShadow/e.globalScale,_=e.graphData.nodes.filter(l);h.save(),_.forEach(function(w){var I=d(w);if(e.nodeCanvasObject&&(I==="before"||I==="replace")&&(e.nodeCanvasObject(w,h,e.globalScale),I==="replace")){h.restore();return}var P=Math.sqrt(Math.max(0,u(w)||1))*e.nodeRelSize+m;h.beginPath(),h.arc(w.x,w.y,P,0,2*Math.PI,!1),h.fillStyle=c(w)||"rgba(31, 120, 180, 0.92)",h.fill(),e.nodeCanvasObject&&I==="after"&&e.nodeCanvasObject(w,e.ctx,e.globalScale)}),h.restore()}function s(){var l=pt(e.linkVisibility),u=pt(e.linkColor),c=pt(e.linkWidth),d=pt(e.linkLineDash),h=pt(e.linkCurvature),m=pt(e.linkCanvasObjectMode),_=e.ctx,w=e.isShadow*2,I=e.graphData.links.filter(l);I.forEach(U);var P=[],b=[],T=I;if(e.linkCanvasObject){var A=[],R=[];I.forEach(function(N){return({before:P,after:b,replace:A}[m(N)]||R).push(N)}),T=[].concat(Vr(P),b,R),P=P.concat(A)}_.save(),P.forEach(function(N){return e.linkCanvasObject(N,_,e.globalScale)}),_.restore();var M=s7(T,[u,c,d]);_.save(),Object.entries(M).forEach(function(N){var C=bc(N,2),D=C[0],L=C[1],V=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(L).forEach(function(B){var j=bc(B,2),K=j[0],G=j[1],Z=(K||1)/e.globalScale+w;Object.entries(G).forEach(function(pe){var re=bc(pe,2);re[0];var H=re[1],$=d(H[0]);_.beginPath(),H.forEach(function(ne){var fe=ne.source,ue=ne.target;if(!(!fe||!ue||!fe.hasOwnProperty("x")||!ue.hasOwnProperty("x"))){_.moveTo(fe.x,fe.y);var ge=ne.__controlPoints;ge?_[ge.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(_,Vr(ge).concat([ue.x,ue.y])):_.lineTo(ue.x,ue.y)}}),_.strokeStyle=V,_.lineWidth=Z,_.setLineDash($||[]),_.stroke()})})}),_.restore(),_.save(),b.forEach(function(N){return e.linkCanvasObject(N,_,e.globalScale)}),_.restore();function U(N){var C=h(N);if(!C){N.__controlPoints=null;return}var D=N.source,L=N.target;if(!(!D||!L||!D.hasOwnProperty("x")||!L.hasOwnProperty("x"))){var V=Math.sqrt(Math.pow(L.x-D.x,2)+Math.pow(L.y-D.y,2));if(V>0){var B=Math.atan2(L.y-D.y,L.x-D.x),j=V*C,K={x:(D.x+L.x)/2+j*Math.cos(B-Math.PI/2),y:(D.y+L.y)/2+j*Math.sin(B-Math.PI/2)};N.__controlPoints=[K.x,K.y]}else{var G=C*70;N.__controlPoints=[L.x,L.y-G,L.x+G,L.y]}}}}function o(){var l=1.6,u=.2,c=pt(e.linkDirectionalArrowLength),d=pt(e.linkDirectionalArrowRelPos),h=pt(e.linkVisibility),m=pt(e.linkDirectionalArrowColor||e.linkColor),_=pt(e.nodeVal),w=e.ctx;w.save(),e.graphData.links.filter(h).forEach(function(I){var P=c(I);if(!(!P||P<0)){var b=I.source,T=I.target;if(!(!b||!T||!b.hasOwnProperty("x")||!T.hasOwnProperty("x"))){var A=Math.sqrt(Math.max(0,_(b)||1))*e.nodeRelSize,R=Math.sqrt(Math.max(0,_(T)||1))*e.nodeRelSize,M=Math.min(1,Math.max(0,d(I))),U=m(I)||"rgba(0,0,0,0.28)",N=P/l/2,C=I.__controlPoints&&bb(St,[b.x,b.y].concat(Vr(I.__controlPoints),[T.x,T.y])),D=C?function(Z){return C.get(Z)}:function(Z){return{x:b.x+(T.x-b.x)*Z||0,y:b.y+(T.y-b.y)*Z||0}},L=C?C.length():Math.sqrt(Math.pow(T.x-b.x,2)+Math.pow(T.y-b.y,2)),V=A+P+(L-A-R-P)*M,B=D(V/L),j=D((V-P)/L),K=D((V-P*(1-u))/L),G=Math.atan2(B.y-j.y,B.x-j.x)-Math.PI/2;w.beginPath(),w.moveTo(B.x,B.y),w.lineTo(j.x+N*Math.cos(G),j.y+N*Math.sin(G)),w.lineTo(K.x,K.y),w.lineTo(j.x-N*Math.cos(G),j.y-N*Math.sin(G)),w.fillStyle=U,w.fill()}}}),w.restore()}function a(){var l=pt(e.linkDirectionalParticles),u=pt(e.linkDirectionalParticleSpeed),c=pt(e.linkDirectionalParticleOffset),d=pt(e.linkDirectionalParticleWidth),h=pt(e.linkVisibility),m=pt(e.linkDirectionalParticleColor||e.linkColor),_=e.ctx;_.save(),e.graphData.links.filter(h).forEach(function(w){var I=l(w);if(!(!w.hasOwnProperty("__photons")||!w.__photons.length)){var P=w.source,b=w.target;if(!(!P||!b||!P.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var T=u(w),A=Math.abs(c(w)),R=w.__photons||[],M=Math.max(0,d(w)/2)/Math.sqrt(e.globalScale),U=m(w)||"rgba(0,0,0,0.28)";_.fillStyle=U;var N=w.__controlPoints?bb(St,[P.x,P.y].concat(Vr(w.__controlPoints),[b.x,b.y])):null,C=0,D=!1;R.forEach(function(L){var V=!!L.__singleHop;if(L.hasOwnProperty("__progressRatio")||(L.__progressRatio=V?0:(C+A)/I),!V&&C++,L.__progressRatio+=T,L.__progressRatio>=1)if(!V)L.__progressRatio=L.__progressRatio%1;else{D=!0;return}var B=L.__progressRatio,j=N?N.get(B):{x:P.x+(b.x-P.x)*B||0,y:P.y+(b.y-P.y)*B||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(j.x,j.y,w,_,e.globalScale):(_.beginPath(),_.arc(j.x,j.y,M,0,2*Math.PI,!1),_.fill())}),D&&(w.__photons=w.__photons.filter(function(L){return!L.__singleHop||L.__progressRatio<=1}))}}}),_.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:L$().force("link",A$()).force("charge",V$()).force("center",PU()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Tb(e.graphData.nodes,pt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Tb(e.graphData.links,pt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(m){m.source=m[e.linkSource],m.target=m[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(m){return m[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&w7(e.graphData,function(m){return m[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,Vr(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*x7*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return delete m[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),c=function(_){return(s[_[e.nodeId]]-o/2)*a*(u?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return m[d]=c(m)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?F$(function(m){var _=s[m[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-_:_)*a}).strength(function(m){return e.dagNodeFilter(m)?1:0}):null);for(var h=0;h<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);h++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function gC(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,u){r.forEach(function(c){return u[c][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var d=[];return r.forEach(function(h){var m=a[h],_=m[o].apply(m,u);_!==m&&d.push(_)}),d.length?d[0]:this}}}}var b7=800,E7=4,T7=5,yC=gC("forceGraph",Kd),I7=gC(["forceGraph","shadowGraph"],Kd),S7=Object.assign.apply(Object,Vr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return rh({},n,yC.linkProp(n))})).concat(Vr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return rh({},n,I7.linkProp(n))})))),k7=Object.assign.apply(Object,Vr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return rh({},n,yC.linkMethod(n))})));function eg(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Di(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function vC(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function Sb(n,e,r){n.save(),vC(n),n.clearRect(0,0,e,r),n.restore()}var C7=X0({props:ol({width:{default:window.innerWidth,onChange:function(e,r){return eg(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return eg(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},S7),aliases:{stopAnimation:"pauseAnimation"},methods:ol({graph2ScreenCoords:function(e,r,i){var s=Di(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Di(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new Q1(a()).to(o,s).easing(Ta.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var u=Di(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var c=u.x,d=u.y;e.zoom.translateTo(e.zoom.__baseElem,c===void 0?a().x:c,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new Q1({k:s()}).to({k:r},i).easing(Ta.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Di(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(c,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=pt(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[H1(o,function(a){return a.x-a.r}),q1(o,function(a){return a.x+a.r})],y:[H1(o,function(a){return a.y-a.r}),q1(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},k7),stateInit:function(){return{lastSetZoom:1,zoom:F8(),forceGraph:new Kd,shadowGraph:new Kd().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new uU,tweenGroup:new zk}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var h=null,m=window.devicePixelRatio,_=l.x>0&&l.y>0?a.getImageData(l.x*m,l.y*m,1,1):null;return _&&(h=r.colorTracker.lookup(_.data)),h};Lr(r.canvas).call(QF().subject(function(){if(!r.enableNodeDrag)return null;var d=u();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var h=d.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},d.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var h=d.subject,m=h.__initialDragPos,_=d,w=Di(r.canvas).k,I={x:m.x+(_.x-m.x)/w-h.x,y:m.y+(_.y-m.y)/w-h.y};["x","y"].forEach(function(P){return h["f".concat(P)]=h[P]=m[P]+(_[P]-m[P])/w}),!(!h.__dragged&&T7>=Math.sqrt(B8(["x","y"].map(function(P){return Math.pow(d[P]-m[P],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,I))}).on("end",function(d){var h=d.subject,m=h.__initialDragPos,_={x:h.x-m.x,y:h.y-m.y};m.fx===void 0&&(h.fx=void 0),m.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,_))})),r.zoom(r.zoom.__baseElem=Lr(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||pt(r.enableZoomInteraction)(d))&&(d.type==="wheel"||pt(r.enablePanInteraction)(d))}).on("zoom",function(d){var h=d.transform;[o,a].forEach(function(m){vC(m),m.translate(h.x,h.y),m.scale(h.k,h.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(ol(ol({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(ol(ol({},d.transform),i.centerAt()))}),eg(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Di(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=E7/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new NU(s),["pointermove","pointerdown"].forEach(function(d){return s.addEventListener(d,function(h){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType==="mouse"||h.movementX===void 0||[h.movementX,h.movementY].some(function(w){return Math.abs(w)>1}))&&(r.isPointerDragging=!0);var m=_(s);l.x=h.pageX-m.left,l.y=h.pageY-m.top;function _(w){var I=w.getBoundingClientRect(),P=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:I.top+b,left:I.left+P}}},{passive:!0})}),s.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"Click")];m&&m.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(d.button===2)if(r.hoverObj){var _=r["on".concat(r.hoverObj.type,"RightClick")];_&&_.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})}},{passive:!0}),s.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var c=gz(function(){Sb(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return pt(r.linkWidth)(h)+r.linkHoverPrecision});var d=Di(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},b7);r.flushShadowCanvas=c.flush,(this._animationCycle=function d(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(A){return A.__photons&&A.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var m=r.isPointerDragging?null:u();if(m!==r.hoverObj){var _=r.hoverObj,w=_?_.type:null,I=m?m.type:null;if(w&&w!==I){var P=r["on".concat(w,"Hover")];P&&P(null,_.d)}if(I){var b=r["on".concat(I,"Hover")];b&&b(m.d,w===I?_.d:null)}r.tooltip.content(m&&pt(r["".concat(m.type.toLowerCase(),"Label")])(m.d)||null),r.canvas.classList[(m&&r["on".concat(I,"Click")]||!m&&r.onBackgroundClick)&&pt(r.showPointerCursor)(m==null?void 0:m.d)?"add":"remove"]("clickable"),r.hoverObj=m}h&&c()}if(h){Sb(o,r.width,r.height);var T=Di(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,T),r.forceGraph.globalScale(T).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,T)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(e){}}),_C={exports:{}},A7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",N7=A7,P7=N7;function wC(){}function xC(){}xC.resetWarningCache=wC;var R7=function(){function n(i,s,o,a,l,u){if(u!==P7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xC,resetWarningCache:wC};return r.PropTypes=r,r};_C.exports=R7();var O7=_C.exports;const J=Wd(O7),Bp={width:J.number,height:J.number,graphData:J.shape({nodes:J.arrayOf(J.object).isRequired,links:J.arrayOf(J.object).isRequired}),backgroundColor:J.string,nodeRelSize:J.number,nodeId:J.string,nodeLabel:J.oneOfType([J.string,J.func]),nodeVal:J.oneOfType([J.number,J.string,J.func]),nodeVisibility:J.oneOfType([J.bool,J.string,J.func]),nodeColor:J.oneOfType([J.string,J.func]),nodeAutoColorBy:J.oneOfType([J.string,J.func]),onNodeHover:J.func,onNodeClick:J.func,linkSource:J.string,linkTarget:J.string,linkLabel:J.oneOfType([J.string,J.func]),linkVisibility:J.oneOfType([J.bool,J.string,J.func]),linkColor:J.oneOfType([J.string,J.func]),linkAutoColorBy:J.oneOfType([J.string,J.func]),linkWidth:J.oneOfType([J.number,J.string,J.func]),linkCurvature:J.oneOfType([J.number,J.string,J.func]),linkDirectionalArrowLength:J.oneOfType([J.number,J.string,J.func]),linkDirectionalArrowColor:J.oneOfType([J.string,J.func]),linkDirectionalArrowRelPos:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticles:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleSpeed:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleOffset:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleWidth:J.oneOfType([J.number,J.string,J.func]),linkDirectionalParticleColor:J.oneOfType([J.string,J.func]),onLinkHover:J.func,onLinkClick:J.func,dagMode:J.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:J.number,dagNodeFilter:J.func,onDagError:J.func,d3AlphaMin:J.number,d3AlphaDecay:J.number,d3VelocityDecay:J.number,warmupTicks:J.number,cooldownTicks:J.number,cooldownTime:J.number,onEngineTick:J.func,onEngineStop:J.func,getGraphBbox:J.func},bC={zoomToFit:J.func,onNodeRightClick:J.func,onNodeDrag:J.func,onNodeDragEnd:J.func,onLinkRightClick:J.func,linkHoverPrecision:J.number,onBackgroundClick:J.func,onBackgroundRightClick:J.func,showPointerCursor:J.oneOfType([J.bool,J.func]),enablePointerInteraction:J.bool,enableNodeDrag:J.bool},s_={showNavInfo:J.bool,nodeOpacity:J.number,nodeResolution:J.number,nodeThreeObject:J.oneOfType([J.object,J.string,J.func]),nodeThreeObjectExtend:J.oneOfType([J.bool,J.string,J.func]),nodePositionUpdate:J.func,linkOpacity:J.number,linkResolution:J.number,linkCurveRotation:J.oneOfType([J.number,J.string,J.func]),linkMaterial:J.oneOfType([J.object,J.string,J.func]),linkThreeObject:J.oneOfType([J.object,J.string,J.func]),linkThreeObjectExtend:J.oneOfType([J.bool,J.string,J.func]),linkPositionUpdate:J.func,linkDirectionalArrowResolution:J.number,linkDirectionalParticleResolution:J.number,linkDirectionalParticleThreeObject:J.oneOfType([J.object,J.string,J.func]),forceEngine:J.oneOf(["d3","ngraph"]),ngraphPhysics:J.object,numDimensions:J.oneOf([1,2,3])},j7=Object.assign({},Bp,bC,{linkLineDash:J.oneOfType([J.arrayOf(J.number),J.string,J.func]),nodeCanvasObjectMode:J.oneOfType([J.string,J.func]),nodeCanvasObject:J.func,nodePointerAreaPaint:J.func,linkCanvasObjectMode:J.oneOfType([J.string,J.func]),linkCanvasObject:J.func,linkPointerAreaPaint:J.func,linkDirectionalParticleCanvasObject:J.func,autoPauseRedraw:J.bool,minZoom:J.number,maxZoom:J.number,enableZoomInteraction:J.oneOfType([J.bool,J.func]),enablePanInteraction:J.oneOfType([J.bool,J.func]),onZoom:J.func,onZoomEnd:J.func,onRenderFramePre:J.func,onRenderFramePost:J.func});Object.assign({},Bp,bC,s_,{enableNavigationControls:J.bool,controlType:J.oneOf(["trackball","orbit","fly"]),rendererConfig:J.object,extraRenderers:J.arrayOf(J.shape({render:J.func.isRequired}))});Object.assign({},Bp,s_,{nodeDesc:J.oneOfType([J.string,J.func]),linkDesc:J.oneOfType([J.string,J.func])});Object.assign({},Bp,s_,{markerAttrs:J.object,yOffset:J.number,glScale:J.number});const o_=aV(C7,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});o_.displayName="ForceGraph2D";o_.propTypes=j7;const D7=()=>{const{contacts:n,userProfile:e,updateContactPosition:r}=zo(),i=Lo(),s=de.useRef(),[o,a]=de.useState({width:window.innerWidth,height:window.innerHeight}),[l,u]=de.useState(""),c=de.useMemo(()=>["",...(e==null?void 0:e.categories)||["","","","",""]],[e]);de.useEffect(()=>{const h=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const d=de.useMemo(()=>{if(!n)return{nodes:[],links:[]};const h=l===""?n:n.filter(w=>(w.tags||[]).includes(l)),m=h.map(w=>{let I="#10b981";w.importance>80||(w.tags||[]).includes("")?I="#fbbf24":(w.tags||[]).includes("")?I="#f87171":(w.tags||[]).includes("")?I="#60a5fa":(w.tags||[]).includes("")&&(I="#a78bfa");const P={id:w.id,name:w.name,val:(w.importance||50)/2,tags:w.tags||[],color:I};return w.position&&(P.fx=w.position.x,P.fy=w.position.y),P}),_=[];for(let w=0;w<h.length;w++)for(let I=w+1;I<h.length;I++){const P=h[w],b=h[I],T=(P.tags||[]).filter(A=>(b.tags||[]).includes(A));if(T.length>0){const A=T[0];let R="rgba(255, 255, 255, 0.08)";A===""?R="rgba(251, 191, 36, 0.2)":A===""?R="rgba(248, 113, 113, 0.2)":A===""?R="rgba(96, 165, 250, 0.2)":A===""&&(R="rgba(167, 139, 250, 0.2)"),_.push({source:P.id,target:b.id,value:T.length*2,color:R,label:T.join(", ")})}}return{nodes:m,links:_}},[n,l]);return y.jsxs("div",{className:"w-full h-full bg-[#0a0a0c] relative overflow-hidden",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 px-6 pt-12 pb-8 bg-gradient-to-b from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black text-white",children:""}),y.jsx("p",{className:"text-white/40 text-[10px] font-black tracking-[0.2em] uppercase mt-0.5",children:"Social Network Analysis"})]}),y.jsx("button",{onClick:()=>i(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}),y.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:c.map(h=>y.jsx("button",{onClick:()=>u(h),className:`flex h-8 shrink-0 items-center justify-center rounded-lg px-4 transition-all duration-300 border text-[10px] font-black uppercase tracking-wider ${l===h?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:border-white/10"}`,children:h},h))})]}),y.jsx("div",{className:"w-full h-full",children:y.jsx(o_,{ref:s,graphData:d,width:o.width,height:o.height,backgroundColor:"#0a0a0c",nodeLabel:"name",nodeRelSize:4,linkColor:h=>h.color,linkWidth:h=>h.value,onNodeClick:h=>i(`/profile/${h.id}`),onNodeDragEnd:h=>{h.fx=h.x,h.fy=h.y,r(h.id,{x:h.x,y:h.y})},enableNodeDrag:!0,cooldownTicks:100,d3AlphaDecay:.01,d3VelocityDecay:.1,d3Force:(h,m)=>{h==="charge"&&m.strength(-150),h==="link"&&m.distance(50)},linkCanvasObject:(h,m,_)=>{const I=h.target.x-h.source.x,P=h.target.y-h.source.y;Math.sqrt(I*I+P*P)>150||(m.beginPath(),m.strokeStyle=h.color,m.lineWidth=h.value/_,m.moveTo(h.source.x,h.source.y),m.lineTo(h.target.x,h.target.y),m.stroke())},nodeCanvasObject:(h,m,_)=>{const w=h.name,I=11/_;m.font=`bold ${I}px "Inter", sans-serif`,m.shadowColor=h.color,m.shadowBlur=10/_,m.fillStyle=h.color,m.beginPath(),m.arc(h.x,h.y,4,0,2*Math.PI,!1),m.fill(),m.shadowBlur=0,m.textAlign="center",m.textBaseline="middle",m.fillStyle="rgba(255, 255, 255, 0.8)",m.fillText(w,h.x,h.y+10/_)}})}),y.jsx("div",{className:"absolute bottom-32 left-6 right-6 p-4 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md z-10",children:y.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-[9px] font-black text-white/30 uppercase tracking-[0.15em]",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#fbbf24] shadow-[0_0_8px_rgba(251,191,36,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#f87171] shadow-[0_0_8px_rgba(248,113,113,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#60a5fa] shadow-[0_0_8px_rgba(96,149,250,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#a78bfa] shadow-[0_0_8px_rgba(167,139,250,0.5)]"}),y.jsx("span",{children:" / "})]})]})}),y.jsx("div",{className:"absolute bottom-44 right-6 flex flex-col gap-2 z-10",children:y.jsx("button",{onClick:()=>s.current.zoomToFit(400),className:"size-12 rounded-2xl bg-white/5 border border-white/10 text-white/40 flex items-center justify-center hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"zoom_in_map"})})})]})},M7=()=>{const n=Lo(),e=Bv(),{unsavedChanges:r,setUnsavedChanges:i}=zo(),s=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"graph",icon:"hub",label:"",path:"/graph"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}],o=a=>{e.pathname!==a&&(r?window.confirm("")&&(i(!1),n(a),navigator.vibrate&&navigator.vibrate(5)):(n(a),navigator.vibrate&&navigator.vibrate(5)))};return y.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-4 pb-6 pointer-events-none",children:y.jsx("div",{className:"glass-panel rounded-[28px] h-20 flex items-center justify-around px-2 pointer-events-auto",children:s.map(a=>{const l=e.pathname===a.path;return y.jsxs("button",{onClick:()=>o(a.path),className:`flex flex-col items-center justify-center gap-1.5 transition-all duration-500 relative group w-16 ${l?"text-primary":"text-white/20 hover:text-white/40"}`,children:[y.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${l?"scale-110 -translate-y-1":"scale-100"}`,children:[l&&y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150"}),y.jsx("span",{className:`material-symbols-outlined text-[26px] relative z-10 ${l?"font-black":""}`,children:a.icon})]}),y.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.15em] transition-all duration-500 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.label}),l&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary-color-rgb),0.8)]"})]},a.id)})})})},L7=({children:n})=>y.jsxs("div",{className:"bg-nexus min-h-screen text-white font-sans selection:bg-primary/30 overflow-x-hidden",children:[y.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative",children:y.jsx("div",{className:"flex-1 px-4 pt-6 pb-32",children:n})}),y.jsx(M7,{})]});function V7(){return y.jsx(D6,{children:y.jsx(YP,{basename:"/nexus-mind",children:y.jsxs(Nw,{children:[y.jsx(Oi,{path:"/p/:uid",element:y.jsx($6,{})}),y.jsx(Oi,{path:"/*",element:y.jsx(L7,{children:y.jsxs(Nw,{children:[y.jsx(Oi,{path:"/",element:y.jsx(M6,{})}),y.jsx(Oi,{path:"/search",element:y.jsx(L6,{})}),y.jsx(Oi,{path:"/profile/:id",element:y.jsx(V6,{})}),y.jsx(Oi,{path:"/stealth",element:y.jsx(F6,{})}),y.jsx(Oi,{path:"/settings",element:y.jsx(U6,{})}),y.jsx(Oi,{path:"/vault",element:y.jsx(z6,{})}),y.jsx(Oi,{path:"/graph",element:y.jsx(D7,{})})]})})})]})})})}tg.createRoot(document.getElementById("root")).render(y.jsx(vt.StrictMode,{children:y.jsx(V7,{})}));
