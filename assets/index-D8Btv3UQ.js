function eA(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var b_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ev(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xb={exports:{}},op={},Jb={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=Symbol.for("react.element"),tA=Symbol.for("react.portal"),nA=Symbol.for("react.fragment"),rA=Symbol.for("react.strict_mode"),iA=Symbol.for("react.profiler"),sA=Symbol.for("react.provider"),oA=Symbol.for("react.context"),aA=Symbol.for("react.forward_ref"),lA=Symbol.for("react.suspense"),uA=Symbol.for("react.memo"),cA=Symbol.for("react.lazy"),E_=Symbol.iterator;function hA(n){return n===null||typeof n!="object"?null:(n=E_&&n[E_]||n["@@iterator"],typeof n=="function"?n:null)}var Zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eE=Object.assign,tE={};function lu(n,e,r){this.props=n,this.context=e,this.refs=tE,this.updater=r||Zb}lu.prototype.isReactComponent={};lu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};lu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function nE(){}nE.prototype=lu.prototype;function tv(n,e,r){this.props=n,this.context=e,this.refs=tE,this.updater=r||Zb}var nv=tv.prototype=new nE;nv.constructor=tv;eE(nv,lu.prototype);nv.isPureReactComponent=!0;var T_=Array.isArray,rE=Object.prototype.hasOwnProperty,rv={current:null},iE={key:!0,ref:!0,__self:!0,__source:!0};function sE(n,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)rE.call(e,i)&&!iE.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:hh,type:n,key:o,ref:a,props:s,_owner:rv.current}}function fA(n,e){return{$$typeof:hh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function iv(n){return typeof n=="object"&&n!==null&&n.$$typeof===hh}function dA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var I_=/\/+/g;function um(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dA(""+n.key):e.toString(36)}function Ef(n,e,r,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case hh:case tA:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+um(a,0):i,T_(s)?(r="",n!=null&&(r=n.replace(I_,"$&/")+"/"),Ef(s,e,r,"",function(c){return c})):s!=null&&(iv(s)&&(s=fA(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(I_,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",T_(n))for(var l=0;l<n.length;l++){o=n[l];var u=i+um(o,l);a+=Ef(o,e,r,u,s)}else if(u=hA(n),typeof u=="function")for(n=u.call(n),l=0;!(o=n.next()).done;)o=o.value,u=i+um(o,l++),a+=Ef(o,e,r,u,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Kh(n,e,r){if(n==null)return n;var i=[],s=0;return Ef(n,i,"","",function(o){return e.call(r,o,s++)}),i}function pA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Wn={current:null},Tf={transition:null},mA={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:Tf,ReactCurrentOwner:rv};function oE(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Kh,forEach:function(n,e,r){Kh(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return Kh(n,function(){e++}),e},toArray:function(n){return Kh(n,function(e){return e})||[]},only:function(n){if(!iv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};tt.Component=lu;tt.Fragment=nA;tt.Profiler=iA;tt.PureComponent=tv;tt.StrictMode=rA;tt.Suspense=lA;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mA;tt.act=oE;tt.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=eE({},n.props),s=n.key,o=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=rv.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(u in e)rE.call(e,u)&&!iE.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:hh,type:n.type,key:s,ref:o,props:i,_owner:a}};tt.createContext=function(n){return n={$$typeof:oA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sA,_context:n},n.Consumer=n};tt.createElement=sE;tt.createFactory=function(n){var e=sE.bind(null,n);return e.type=n,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(n){return{$$typeof:aA,render:n}};tt.isValidElement=iv;tt.lazy=function(n){return{$$typeof:cA,_payload:{_status:-1,_result:n},_init:pA}};tt.memo=function(n,e){return{$$typeof:uA,type:n,compare:e===void 0?null:e}};tt.startTransition=function(n){var e=Tf.transition;Tf.transition={};try{n()}finally{Tf.transition=e}};tt.unstable_act=oE;tt.useCallback=function(n,e){return Wn.current.useCallback(n,e)};tt.useContext=function(n){return Wn.current.useContext(n)};tt.useDebugValue=function(){};tt.useDeferredValue=function(n){return Wn.current.useDeferredValue(n)};tt.useEffect=function(n,e){return Wn.current.useEffect(n,e)};tt.useId=function(){return Wn.current.useId()};tt.useImperativeHandle=function(n,e,r){return Wn.current.useImperativeHandle(n,e,r)};tt.useInsertionEffect=function(n,e){return Wn.current.useInsertionEffect(n,e)};tt.useLayoutEffect=function(n,e){return Wn.current.useLayoutEffect(n,e)};tt.useMemo=function(n,e){return Wn.current.useMemo(n,e)};tt.useReducer=function(n,e,r){return Wn.current.useReducer(n,e,r)};tt.useRef=function(n){return Wn.current.useRef(n)};tt.useState=function(n){return Wn.current.useState(n)};tt.useSyncExternalStore=function(n,e,r){return Wn.current.useSyncExternalStore(n,e,r)};tt.useTransition=function(){return Wn.current.useTransition()};tt.version="18.3.1";Jb.exports=tt;var le=Jb.exports;const yt=ev(le),gA=eA({__proto__:null,default:yt},[le]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA=le,vA=Symbol.for("react.element"),_A=Symbol.for("react.fragment"),wA=Object.prototype.hasOwnProperty,xA=yA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bA={key:!0,ref:!0,__self:!0,__source:!0};function aE(n,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)wA.call(e,i)&&!bA.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:vA,type:n,key:o,ref:a,props:s,_owner:xA.current}}op.Fragment=_A;op.jsx=aE;op.jsxs=aE;Xb.exports=op;var y=Xb.exports,ug={},lE={exports:{}},Tr={},uE={exports:{}},cE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(re,ue){var de=re.length;re.push(ue);e:for(;0<de;){var Ie=de-1>>>1,ce=re[Ie];if(0<s(ce,ue))re[Ie]=ue,re[de]=ce,de=Ie;else break e}}function r(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var ue=re[0],de=re.pop();if(de!==ue){re[0]=de;e:for(var Ie=0,ce=re.length,Ne=ce>>>1;Ie<Ne;){var Pe=2*(Ie+1)-1,Me=re[Pe],Ge=Pe+1,Be=re[Ge];if(0>s(Me,de))Ge<ce&&0>s(Be,Me)?(re[Ie]=Be,re[Ge]=de,Ie=Ge):(re[Ie]=Me,re[Pe]=de,Ie=Pe);else if(Ge<ce&&0>s(Be,de))re[Ie]=Be,re[Ge]=de,Ie=Ge;else break e}}return ue}function s(re,ue){var de=re.sortIndex-ue.sortIndex;return de!==0?de:re.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,p=null,m=3,v=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(re){for(var ue=r(c);ue!==null;){if(ue.callback===null)i(c);else if(ue.startTime<=re)i(c),ue.sortIndex=ue.expirationTime,e(u,ue);else break;ue=r(c)}}function P(re){if(b=!1,R(re),!w)if(r(u)!==null)w=!0,ee(M);else{var ue=r(c);ue!==null&&fe(P,ue.startTime-re)}}function M(re,ue){w=!1,b&&(b=!1,E(C),C=-1),v=!0;var de=m;try{for(R(ue),p=r(u);p!==null&&(!(p.expirationTime>ue)||re&&!U());){var Ie=p.callback;if(typeof Ie=="function"){p.callback=null,m=p.priorityLevel;var ce=Ie(p.expirationTime<=ue);ue=n.unstable_now(),typeof ce=="function"?p.callback=ce:p===r(u)&&i(u),R(ue)}else i(u);p=r(u)}if(p!==null)var Ne=!0;else{var Pe=r(c);Pe!==null&&fe(P,Pe.startTime-ue),Ne=!1}return Ne}finally{p=null,m=de,v=!1}}var L=!1,k=null,C=-1,D=5,V=-1;function U(){return!(n.unstable_now()-V<D)}function B(){if(k!==null){var re=n.unstable_now();V=re;var ue=!0;try{ue=k(!0,re)}finally{ue?j():(L=!1,k=null)}}else L=!1}var j;if(typeof I=="function")j=function(){I(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Z=F.port2;F.port1.onmessage=B,j=function(){Z.postMessage(null)}}else j=function(){S(B,0)};function ee(re){k=re,L||(L=!0,j())}function fe(re,ue){C=S(function(){re(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,ee(M))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(re){switch(m){case 1:case 2:case 3:var ue=3;break;default:ue=m}var de=m;m=ue;try{return re()}finally{m=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ue){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var de=m;m=re;try{return ue()}finally{m=de}},n.unstable_scheduleCallback=function(re,ue,de){var Ie=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ie+de:Ie):de=Ie,re){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=de+ce,re={id:h++,callback:ue,priorityLevel:re,startTime:de,expirationTime:ce,sortIndex:-1},de>Ie?(re.sortIndex=de,e(c,re),r(u)===null&&re===r(c)&&(b?(E(C),C=-1):b=!0,fe(P,de-Ie))):(re.sortIndex=ce,e(u,re),w||v||(w=!0,ee(M))),re},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(re){var ue=m;return function(){var de=m;m=ue;try{return re.apply(this,arguments)}finally{m=de}}}})(cE);uE.exports=cE;var EA=uE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA=le,br=EA;function ye(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hE=new Set,Ac={};function La(n,e){Bl(n,e),Bl(n+"Capture",e)}function Bl(n,e){for(Ac[n]=e,n=0;n<e.length;n++)hE.add(e[n])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cg=Object.prototype.hasOwnProperty,IA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S_={},C_={};function SA(n){return cg.call(C_,n)?!0:cg.call(S_,n)?!1:IA.test(n)?C_[n]=!0:(S_[n]=!0,!1)}function CA(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function kA(n,e,r,i){if(e===null||typeof e>"u"||CA(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gn(n,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){wn[n]=new Gn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];wn[e]=new Gn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){wn[n]=new Gn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){wn[n]=new Gn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){wn[n]=new Gn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){wn[n]=new Gn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){wn[n]=new Gn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){wn[n]=new Gn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){wn[n]=new Gn(n,5,!1,n.toLowerCase(),null,!1,!1)});var sv=/[\-:]([a-z])/g;function ov(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sv,ov);wn[e]=new Gn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sv,ov);wn[e]=new Gn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sv,ov);wn[e]=new Gn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){wn[n]=new Gn(n,1,!1,n.toLowerCase(),null,!1,!1)});wn.xlinkHref=new Gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){wn[n]=new Gn(n,1,!1,n.toLowerCase(),null,!0,!0)});function av(n,e,r,i){var s=wn.hasOwnProperty(e)?wn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kA(e,r,s,i)&&(r=null),i||s===null?SA(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):s.mustUseProperty?n[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?n.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Ds=TA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wh=Symbol.for("react.element"),ml=Symbol.for("react.portal"),gl=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),hg=Symbol.for("react.profiler"),fE=Symbol.for("react.provider"),dE=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),fg=Symbol.for("react.suspense"),dg=Symbol.for("react.suspense_list"),cv=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),pE=Symbol.for("react.offscreen"),k_=Symbol.iterator;function Du(n){return n===null||typeof n!="object"?null:(n=k_&&n[k_]||n["@@iterator"],typeof n=="function"?n:null)}var Lt=Object.assign,cm;function Ju(n){if(cm===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);cm=e&&e[1]||""}return`
`+cm+n}var hm=!1;function fm(n,e){if(!n||hm)return"";hm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=a&&0<=l);break}}}finally{hm=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?Ju(n):""}function AA(n){switch(n.tag){case 5:return Ju(n.type);case 16:return Ju("Lazy");case 13:return Ju("Suspense");case 19:return Ju("SuspenseList");case 0:case 2:case 15:return n=fm(n.type,!1),n;case 11:return n=fm(n.type.render,!1),n;case 1:return n=fm(n.type,!0),n;default:return""}}function pg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case gl:return"Fragment";case ml:return"Portal";case hg:return"Profiler";case lv:return"StrictMode";case fg:return"Suspense";case dg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dE:return(n.displayName||"Context")+".Consumer";case fE:return(n._context.displayName||"Context")+".Provider";case uv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cv:return e=n.displayName||null,e!==null?e:pg(n.type)||"Memo";case Xs:e=n._payload,n=n._init;try{return pg(n(e))}catch{}}return null}function NA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pg(e);case 8:return e===lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function To(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RA(n){var e=mE(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Gh(n){n._valueTracker||(n._valueTracker=RA(n))}function gE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=mE(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function td(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function mg(n,e){var r=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function A_(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=To(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yE(n,e){e=e.checked,e!=null&&av(n,"checked",e,!1)}function gg(n,e){yE(n,e);var r=To(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?yg(n,e.type,r):e.hasOwnProperty("defaultValue")&&yg(n,e.type,To(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function N_(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function yg(n,e,r){(e!=="number"||td(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Zu=Array.isArray;function kl(n,e,r,i){if(n=n.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<n.length;r++)s=e.hasOwnProperty("$"+n[r].value),n[r].selected!==s&&(n[r].selected=s),s&&i&&(n[r].defaultSelected=!0)}else{for(r=""+To(r),e=null,s=0;s<n.length;s++){if(n[s].value===r){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function vg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function R_(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ye(92));if(Zu(r)){if(1<r.length)throw Error(ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:To(r)}}function vE(n,e){var r=To(e.value),i=To(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function P_(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _E(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _g(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_E(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Qh,wE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Qh=Qh||document.createElement("div"),Qh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Nc(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var cc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PA=["Webkit","ms","Moz","O"];Object.keys(cc).forEach(function(n){PA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),cc[e]=cc[n]})});function xE(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cc.hasOwnProperty(n)&&cc[n]?(""+e).trim():e+"px"}function bE(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=xE(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,s):n[r]=s}}var OA=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wg(n,e){if(e){if(OA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function xg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bg=null;function hv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Eg=null,Al=null,Nl=null;function O_(n){if(n=ph(n)){if(typeof Eg!="function")throw Error(ye(280));var e=n.stateNode;e&&(e=hp(e),Eg(n.stateNode,n.type,e))}}function EE(n){Al?Nl?Nl.push(n):Nl=[n]:Al=n}function TE(){if(Al){var n=Al,e=Nl;if(Nl=Al=null,O_(n),e)for(n=0;n<e.length;n++)O_(e[n])}}function IE(n,e){return n(e)}function SE(){}var dm=!1;function CE(n,e,r){if(dm)return n(e,r);dm=!0;try{return IE(n,e,r)}finally{dm=!1,(Al!==null||Nl!==null)&&(SE(),TE())}}function Rc(n,e){var r=n.stateNode;if(r===null)return null;var i=hp(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(ye(231,e,typeof r));return r}var Tg=!1;if(Ss)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{Tg=!1}function jA(n,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var hc=!1,nd=null,rd=!1,Ig=null,DA={onError:function(n){hc=!0,nd=n}};function MA(n,e,r,i,s,o,a,l,u){hc=!1,nd=null,jA.apply(DA,arguments)}function LA(n,e,r,i,s,o,a,l,u){if(MA.apply(this,arguments),hc){if(hc){var c=nd;hc=!1,nd=null}else throw Error(ye(198));rd||(rd=!0,Ig=c)}}function Va(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function kE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function j_(n){if(Va(n)!==n)throw Error(ye(188))}function VA(n){var e=n.alternate;if(!e){if(e=Va(n),e===null)throw Error(ye(188));return e!==n?null:n}for(var r=n,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return j_(s),n;if(o===i)return j_(s),e;o=o.sibling}throw Error(ye(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(ye(189))}}if(r.alternate!==i)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?n:e}function AE(n){return n=VA(n),n!==null?NE(n):null}function NE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=NE(n);if(e!==null)return e;n=n.sibling}return null}var RE=br.unstable_scheduleCallback,D_=br.unstable_cancelCallback,FA=br.unstable_shouldYield,UA=br.unstable_requestPaint,Qt=br.unstable_now,zA=br.unstable_getCurrentPriorityLevel,fv=br.unstable_ImmediatePriority,PE=br.unstable_UserBlockingPriority,id=br.unstable_NormalPriority,$A=br.unstable_LowPriority,OE=br.unstable_IdlePriority,ap=null,$i=null;function BA(n){if($i&&typeof $i.onCommitFiberRoot=="function")try{$i.onCommitFiberRoot(ap,n,void 0,(n.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:KA,qA=Math.log,HA=Math.LN2;function KA(n){return n>>>=0,n===0?32:31-(qA(n)/HA|0)|0}var Yh=64,Xh=4194304;function ec(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function sd(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=ec(l):(o&=a,o!==0&&(i=ec(o)))}else a=r&~s,a!==0?i=ec(a):o!==0&&(i=ec(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-gi(e),s=1<<r,i|=n[r],e&=~s;return i}function WA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GA(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-gi(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=WA(l,e)):u<=e&&(n.expiredLanes|=l),o&=~l}}function Sg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function jE(){var n=Yh;return Yh<<=1,!(Yh&4194240)&&(Yh=64),n}function pm(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function fh(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-gi(e),n[e]=r}function QA(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var s=31-gi(r),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,r&=~o}}function dv(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-gi(r),s=1<<i;s&e|n[i]&e&&(n[i]|=e),r&=~s}}var mt=0;function DE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ME,pv,LE,VE,FE,Cg=!1,Jh=[],co=null,ho=null,fo=null,Pc=new Map,Oc=new Map,to=[],YA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M_(n,e){switch(n){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":ho=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(e.pointerId)}}function Lu(n,e,r,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ph(e),e!==null&&pv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function XA(n,e,r,i,s){switch(e){case"focusin":return co=Lu(co,n,e,r,i,s),!0;case"dragenter":return ho=Lu(ho,n,e,r,i,s),!0;case"mouseover":return fo=Lu(fo,n,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return Pc.set(o,Lu(Pc.get(o)||null,n,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Oc.set(o,Lu(Oc.get(o)||null,n,e,r,i,s)),!0}return!1}function UE(n){var e=ca(n.target);if(e!==null){var r=Va(e);if(r!==null){if(e=r.tag,e===13){if(e=kE(r),e!==null){n.blockedOn=e,FE(n.priority,function(){LE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function If(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=kg(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);bg=i,r.target.dispatchEvent(i),bg=null}else return e=ph(r),e!==null&&pv(e),n.blockedOn=r,!1;e.shift()}return!0}function L_(n,e,r){If(n)&&r.delete(e)}function JA(){Cg=!1,co!==null&&If(co)&&(co=null),ho!==null&&If(ho)&&(ho=null),fo!==null&&If(fo)&&(fo=null),Pc.forEach(L_),Oc.forEach(L_)}function Vu(n,e){n.blockedOn===e&&(n.blockedOn=null,Cg||(Cg=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,JA)))}function jc(n){function e(s){return Vu(s,n)}if(0<Jh.length){Vu(Jh[0],n);for(var r=1;r<Jh.length;r++){var i=Jh[r];i.blockedOn===n&&(i.blockedOn=null)}}for(co!==null&&Vu(co,n),ho!==null&&Vu(ho,n),fo!==null&&Vu(fo,n),Pc.forEach(e),Oc.forEach(e),r=0;r<to.length;r++)i=to[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<to.length&&(r=to[0],r.blockedOn===null);)UE(r),r.blockedOn===null&&to.shift()}var Rl=Ds.ReactCurrentBatchConfig,od=!0;function ZA(n,e,r,i){var s=mt,o=Rl.transition;Rl.transition=null;try{mt=1,mv(n,e,r,i)}finally{mt=s,Rl.transition=o}}function eN(n,e,r,i){var s=mt,o=Rl.transition;Rl.transition=null;try{mt=4,mv(n,e,r,i)}finally{mt=s,Rl.transition=o}}function mv(n,e,r,i){if(od){var s=kg(n,e,r,i);if(s===null)Tm(n,e,i,ad,r),M_(n,i);else if(XA(s,n,e,r,i))i.stopPropagation();else if(M_(n,i),e&4&&-1<YA.indexOf(n)){for(;s!==null;){var o=ph(s);if(o!==null&&ME(o),o=kg(n,e,r,i),o===null&&Tm(n,e,i,ad,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else Tm(n,e,i,null,r)}}var ad=null;function kg(n,e,r,i){if(ad=null,n=hv(i),n=ca(n),n!==null)if(e=Va(n),e===null)n=null;else if(r=e.tag,r===13){if(n=kE(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ad=n,null}function zE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zA()){case fv:return 1;case PE:return 4;case id:case $A:return 16;case OE:return 536870912;default:return 16}default:return 16}}var oo=null,gv=null,Sf=null;function $E(){if(Sf)return Sf;var n,e=gv,r=e.length,i,s="value"in oo?oo.value:oo.textContent,o=s.length;for(n=0;n<r&&e[n]===s[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return Sf=s.slice(n,1<i?1-i:void 0)}function Cf(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Zh(){return!0}function V_(){return!1}function Ir(n){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zh:V_,this.isPropagationStopped=V_,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zh)},persist:function(){},isPersistent:Zh}),e}var uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yv=Ir(uu),dh=Lt({},uu,{view:0,detail:0}),tN=Ir(dh),mm,gm,Fu,lp=Lt({},dh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fu&&(Fu&&n.type==="mousemove"?(mm=n.screenX-Fu.screenX,gm=n.screenY-Fu.screenY):gm=mm=0,Fu=n),mm)},movementY:function(n){return"movementY"in n?n.movementY:gm}}),F_=Ir(lp),nN=Lt({},lp,{dataTransfer:0}),rN=Ir(nN),iN=Lt({},dh,{relatedTarget:0}),ym=Ir(iN),sN=Lt({},uu,{animationName:0,elapsedTime:0,pseudoElement:0}),oN=Ir(sN),aN=Lt({},uu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lN=Ir(aN),uN=Lt({},uu,{data:0}),U_=Ir(uN),cN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=fN[n])?!!e[n]:!1}function vv(){return dN}var pN=Lt({},dh,{key:function(n){if(n.key){var e=cN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Cf(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(n){return n.type==="keypress"?Cf(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Cf(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mN=Ir(pN),gN=Lt({},lp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z_=Ir(gN),yN=Lt({},dh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),vN=Ir(yN),_N=Lt({},uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),wN=Ir(_N),xN=Lt({},lp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bN=Ir(xN),EN=[9,13,27,32],_v=Ss&&"CompositionEvent"in window,fc=null;Ss&&"documentMode"in document&&(fc=document.documentMode);var TN=Ss&&"TextEvent"in window&&!fc,BE=Ss&&(!_v||fc&&8<fc&&11>=fc),$_=" ",B_=!1;function qE(n,e){switch(n){case"keyup":return EN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var yl=!1;function IN(n,e){switch(n){case"compositionend":return HE(e);case"keypress":return e.which!==32?null:(B_=!0,$_);case"textInput":return n=e.data,n===$_&&B_?null:n;default:return null}}function SN(n,e){if(yl)return n==="compositionend"||!_v&&qE(n,e)?(n=$E(),Sf=gv=oo=null,yl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var CN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CN[n.type]:e==="textarea"}function KE(n,e,r,i){EE(i),e=ld(e,"onChange"),0<e.length&&(r=new yv("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var dc=null,Dc=null;function kN(n){rT(n,0)}function up(n){var e=wl(n);if(gE(e))return n}function AN(n,e){if(n==="change")return e}var WE=!1;if(Ss){var vm;if(Ss){var _m="oninput"in document;if(!_m){var H_=document.createElement("div");H_.setAttribute("oninput","return;"),_m=typeof H_.oninput=="function"}vm=_m}else vm=!1;WE=vm&&(!document.documentMode||9<document.documentMode)}function K_(){dc&&(dc.detachEvent("onpropertychange",GE),Dc=dc=null)}function GE(n){if(n.propertyName==="value"&&up(Dc)){var e=[];KE(e,Dc,n,hv(n)),CE(kN,e)}}function NN(n,e,r){n==="focusin"?(K_(),dc=e,Dc=r,dc.attachEvent("onpropertychange",GE)):n==="focusout"&&K_()}function RN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return up(Dc)}function PN(n,e){if(n==="click")return up(e)}function ON(n,e){if(n==="input"||n==="change")return up(e)}function jN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var wi=typeof Object.is=="function"?Object.is:jN;function Mc(n,e){if(wi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!cg.call(e,s)||!wi(n[s],e[s]))return!1}return!0}function W_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function G_(n,e){var r=W_(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=W_(r)}}function QE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?QE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function YE(){for(var n=window,e=td();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=td(n.document)}return e}function wv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function DN(n){var e=YE(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&QE(r.ownerDocument.documentElement,r)){if(i!==null&&wv(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=G_(r,o);var a=G_(r,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var MN=Ss&&"documentMode"in document&&11>=document.documentMode,vl=null,Ag=null,pc=null,Ng=!1;function Q_(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ng||vl==null||vl!==td(i)||(i=vl,"selectionStart"in i&&wv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pc&&Mc(pc,i)||(pc=i,i=ld(Ag,"onSelect"),0<i.length&&(e=new yv("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=vl)))}function ef(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var _l={animationend:ef("Animation","AnimationEnd"),animationiteration:ef("Animation","AnimationIteration"),animationstart:ef("Animation","AnimationStart"),transitionend:ef("Transition","TransitionEnd")},wm={},XE={};Ss&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function cp(n){if(wm[n])return wm[n];if(!_l[n])return n;var e=_l[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in XE)return wm[n]=e[r];return n}var JE=cp("animationend"),ZE=cp("animationiteration"),eT=cp("animationstart"),tT=cp("transitionend"),nT=new Map,Y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jo(n,e){nT.set(n,e),La(e,[n])}for(var xm=0;xm<Y_.length;xm++){var bm=Y_[xm],LN=bm.toLowerCase(),VN=bm[0].toUpperCase()+bm.slice(1);jo(LN,"on"+VN)}jo(JE,"onAnimationEnd");jo(ZE,"onAnimationIteration");jo(eT,"onAnimationStart");jo("dblclick","onDoubleClick");jo("focusin","onFocus");jo("focusout","onBlur");jo(tT,"onTransitionEnd");Bl("onMouseEnter",["mouseout","mouseover"]);Bl("onMouseLeave",["mouseout","mouseover"]);Bl("onPointerEnter",["pointerout","pointerover"]);Bl("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function X_(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,LA(i,e,void 0,n),n.currentTarget=null}function rT(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;X_(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;X_(s,l,c),o=u}}}if(rd)throw n=Ig,rd=!1,Ig=null,n}function Tt(n,e){var r=e[Dg];r===void 0&&(r=e[Dg]=new Set);var i=n+"__bubble";r.has(i)||(iT(e,n,2,!1),r.add(i))}function Em(n,e,r){var i=0;e&&(i|=4),iT(r,n,i,e)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Lc(n){if(!n[tf]){n[tf]=!0,hE.forEach(function(r){r!=="selectionchange"&&(FN.has(r)||Em(r,!1,n),Em(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[tf]||(e[tf]=!0,Em("selectionchange",!1,e))}}function iT(n,e,r,i){switch(zE(e)){case 1:var s=ZA;break;case 4:s=eN;break;default:s=mv}r=s.bind(null,e,r,n),s=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,r,{capture:!0,passive:s}):n.addEventListener(e,r,!0):s!==void 0?n.addEventListener(e,r,{passive:s}):n.addEventListener(e,r,!1)}function Tm(n,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ca(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}CE(function(){var c=o,h=hv(r),p=[];e:{var m=nT.get(n);if(m!==void 0){var v=yv,w=n;switch(n){case"keypress":if(Cf(r)===0)break e;case"keydown":case"keyup":v=mN;break;case"focusin":w="focus",v=ym;break;case"focusout":w="blur",v=ym;break;case"beforeblur":case"afterblur":v=ym;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=F_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=rN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=vN;break;case JE:case ZE:case eT:v=oN;break;case tT:v=wN;break;case"scroll":v=tN;break;case"wheel":v=bN;break;case"copy":case"cut":case"paste":v=lN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=z_}var b=(e&4)!==0,S=!b&&n==="scroll",E=b?m!==null?m+"Capture":null:m;b=[];for(var I=c,R;I!==null;){R=I;var P=R.stateNode;if(R.tag===5&&P!==null&&(R=P,E!==null&&(P=Rc(I,E),P!=null&&b.push(Vc(I,P,R)))),S)break;I=I.return}0<b.length&&(m=new v(m,w,null,r,h),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&r!==bg&&(w=r.relatedTarget||r.fromElement)&&(ca(w)||w[Cs]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=r.relatedTarget||r.toElement,v=c,w=w?ca(w):null,w!==null&&(S=Va(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=c),v!==w)){if(b=F_,P="onMouseLeave",E="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(b=z_,P="onPointerLeave",E="onPointerEnter",I="pointer"),S=v==null?m:wl(v),R=w==null?m:wl(w),m=new b(P,I+"leave",v,r,h),m.target=S,m.relatedTarget=R,P=null,ca(h)===c&&(b=new b(E,I+"enter",w,r,h),b.target=R,b.relatedTarget=S,P=b),S=P,v&&w)t:{for(b=v,E=w,I=0,R=b;R;R=al(R))I++;for(R=0,P=E;P;P=al(P))R++;for(;0<I-R;)b=al(b),I--;for(;0<R-I;)E=al(E),R--;for(;I--;){if(b===E||E!==null&&b===E.alternate)break t;b=al(b),E=al(E)}b=null}else b=null;v!==null&&J_(p,m,v,b,!1),w!==null&&S!==null&&J_(p,S,w,b,!0)}}e:{if(m=c?wl(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var M=AN;else if(q_(m))if(WE)M=ON;else{M=RN;var L=NN}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=PN);if(M&&(M=M(n,c))){KE(p,M,r,h);break e}L&&L(n,m,c),n==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&yg(m,"number",m.value)}switch(L=c?wl(c):window,n){case"focusin":(q_(L)||L.contentEditable==="true")&&(vl=L,Ag=c,pc=null);break;case"focusout":pc=Ag=vl=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,Q_(p,r,h);break;case"selectionchange":if(MN)break;case"keydown":case"keyup":Q_(p,r,h)}var k;if(_v)e:{switch(n){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else yl?qE(n,r)&&(C="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(BE&&r.locale!=="ko"&&(yl||C!=="onCompositionStart"?C==="onCompositionEnd"&&yl&&(k=$E()):(oo=h,gv="value"in oo?oo.value:oo.textContent,yl=!0)),L=ld(c,C),0<L.length&&(C=new U_(C,n,null,r,h),p.push({event:C,listeners:L}),k?C.data=k:(k=HE(r),k!==null&&(C.data=k)))),(k=TN?IN(n,r):SN(n,r))&&(c=ld(c,"onBeforeInput"),0<c.length&&(h=new U_("onBeforeInput","beforeinput",null,r,h),p.push({event:h,listeners:c}),h.data=k))}rT(p,e)})}function Vc(n,e,r){return{instance:n,listener:e,currentTarget:r}}function ld(n,e){for(var r=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Rc(n,r),o!=null&&i.unshift(Vc(n,o,s)),o=Rc(n,e),o!=null&&i.push(Vc(n,o,s))),n=n.return}return i}function al(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function J_(n,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=Rc(r,o),u!=null&&a.unshift(Vc(r,u,l))):s||(u=Rc(r,o),u!=null&&a.push(Vc(r,u,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var UN=/\r\n?/g,zN=/\u0000|\uFFFD/g;function Z_(n){return(typeof n=="string"?n:""+n).replace(UN,`
`).replace(zN,"")}function nf(n,e,r){if(e=Z_(e),Z_(n)!==e&&r)throw Error(ye(425))}function ud(){}var Rg=null,Pg=null;function Og(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jg=typeof setTimeout=="function"?setTimeout:void 0,$N=typeof clearTimeout=="function"?clearTimeout:void 0,ew=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof ew<"u"?function(n){return ew.resolve(null).then(n).catch(qN)}:jg;function qN(n){setTimeout(function(){throw n})}function Im(n,e){var r=e,i=0;do{var s=r.nextSibling;if(n.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){n.removeChild(s),jc(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);jc(e)}function po(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function tw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var cu=Math.random().toString(36).slice(2),Ui="__reactFiber$"+cu,Fc="__reactProps$"+cu,Cs="__reactContainer$"+cu,Dg="__reactEvents$"+cu,HN="__reactListeners$"+cu,KN="__reactHandles$"+cu;function ca(n){var e=n[Ui];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Cs]||r[Ui]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=tw(n);n!==null;){if(r=n[Ui])return r;n=tw(n)}return e}n=r,r=n.parentNode}return null}function ph(n){return n=n[Ui]||n[Cs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ye(33))}function hp(n){return n[Fc]||null}var Mg=[],xl=-1;function Do(n){return{current:n}}function Ct(n){0>xl||(n.current=Mg[xl],Mg[xl]=null,xl--)}function Et(n,e){xl++,Mg[xl]=n.current,n.current=e}var Io={},Mn=Do(Io),nr=Do(!1),Ta=Io;function ql(n,e){var r=n.type.contextTypes;if(!r)return Io;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function rr(n){return n=n.childContextTypes,n!=null}function cd(){Ct(nr),Ct(Mn)}function nw(n,e,r){if(Mn.current!==Io)throw Error(ye(168));Et(Mn,e),Et(nr,r)}function sT(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ye(108,NA(n)||"Unknown",s));return Lt({},r,i)}function hd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Io,Ta=Mn.current,Et(Mn,n),Et(nr,nr.current),!0}function rw(n,e,r){var i=n.stateNode;if(!i)throw Error(ye(169));r?(n=sT(n,e,Ta),i.__reactInternalMemoizedMergedChildContext=n,Ct(nr),Ct(Mn),Et(Mn,n)):Ct(nr),Et(nr,r)}var ps=null,fp=!1,Sm=!1;function oT(n){ps===null?ps=[n]:ps.push(n)}function WN(n){fp=!0,oT(n)}function Mo(){if(!Sm&&ps!==null){Sm=!0;var n=0,e=mt;try{var r=ps;for(mt=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}ps=null,fp=!1}catch(s){throw ps!==null&&(ps=ps.slice(n+1)),RE(fv,Mo),s}finally{mt=e,Sm=!1}}return null}var bl=[],El=0,fd=null,dd=0,Lr=[],Vr=0,Ia=null,ys=1,vs="";function sa(n,e){bl[El++]=dd,bl[El++]=fd,fd=n,dd=e}function aT(n,e,r){Lr[Vr++]=ys,Lr[Vr++]=vs,Lr[Vr++]=Ia,Ia=n;var i=ys;n=vs;var s=32-gi(i)-1;i&=~(1<<s),r+=1;var o=32-gi(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,ys=1<<32-gi(e)+s|r<<s|i,vs=o+n}else ys=1<<o|r<<s|i,vs=n}function xv(n){n.return!==null&&(sa(n,1),aT(n,1,0))}function bv(n){for(;n===fd;)fd=bl[--El],bl[El]=null,dd=bl[--El],bl[El]=null;for(;n===Ia;)Ia=Lr[--Vr],Lr[Vr]=null,vs=Lr[--Vr],Lr[Vr]=null,ys=Lr[--Vr],Lr[Vr]=null}var wr=null,vr=null,Rt=!1,hi=null;function lT(n,e){var r=$r(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function iw(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wr=n,vr=po(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wr=n,vr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ia!==null?{id:ys,overflow:vs}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=$r(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,wr=n,vr=null,!0):!1;default:return!1}}function Lg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Vg(n){if(Rt){var e=vr;if(e){var r=e;if(!iw(n,e)){if(Lg(n))throw Error(ye(418));e=po(r.nextSibling);var i=wr;e&&iw(n,e)?lT(i,r):(n.flags=n.flags&-4097|2,Rt=!1,wr=n)}}else{if(Lg(n))throw Error(ye(418));n.flags=n.flags&-4097|2,Rt=!1,wr=n}}}function sw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wr=n}function rf(n){if(n!==wr)return!1;if(!Rt)return sw(n),Rt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Og(n.type,n.memoizedProps)),e&&(e=vr)){if(Lg(n))throw uT(),Error(ye(418));for(;e;)lT(n,e),e=po(e.nextSibling)}if(sw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ye(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){vr=po(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}vr=null}}else vr=wr?po(n.stateNode.nextSibling):null;return!0}function uT(){for(var n=vr;n;)n=po(n.nextSibling)}function Hl(){vr=wr=null,Rt=!1}function Ev(n){hi===null?hi=[n]:hi.push(n)}var GN=Ds.ReactCurrentBatchConfig;function Uu(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var i=r.stateNode}if(!i)throw Error(ye(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof n!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,n))}return n}function sf(n,e){throw n=Object.prototype.toString.call(e),Error(ye(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function ow(n){var e=n._init;return e(n._payload)}function cT(n){function e(E,I){if(n){var R=E.deletions;R===null?(E.deletions=[I],E.flags|=16):R.push(I)}}function r(E,I){if(!n)return null;for(;I!==null;)e(E,I),I=I.sibling;return null}function i(E,I){for(E=new Map;I!==null;)I.key!==null?E.set(I.key,I):E.set(I.index,I),I=I.sibling;return E}function s(E,I){return E=vo(E,I),E.index=0,E.sibling=null,E}function o(E,I,R){return E.index=R,n?(R=E.alternate,R!==null?(R=R.index,R<I?(E.flags|=2,I):R):(E.flags|=2,I)):(E.flags|=1048576,I)}function a(E){return n&&E.alternate===null&&(E.flags|=2),E}function l(E,I,R,P){return I===null||I.tag!==6?(I=Om(R,E.mode,P),I.return=E,I):(I=s(I,R),I.return=E,I)}function u(E,I,R,P){var M=R.type;return M===gl?h(E,I,R.props.children,P,R.key):I!==null&&(I.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Xs&&ow(M)===I.type)?(P=s(I,R.props),P.ref=Uu(E,I,R),P.return=E,P):(P=jf(R.type,R.key,R.props,null,E.mode,P),P.ref=Uu(E,I,R),P.return=E,P)}function c(E,I,R,P){return I===null||I.tag!==4||I.stateNode.containerInfo!==R.containerInfo||I.stateNode.implementation!==R.implementation?(I=jm(R,E.mode,P),I.return=E,I):(I=s(I,R.children||[]),I.return=E,I)}function h(E,I,R,P,M){return I===null||I.tag!==7?(I=va(R,E.mode,P,M),I.return=E,I):(I=s(I,R),I.return=E,I)}function p(E,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Om(""+I,E.mode,R),I.return=E,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Wh:return R=jf(I.type,I.key,I.props,null,E.mode,R),R.ref=Uu(E,null,I),R.return=E,R;case ml:return I=jm(I,E.mode,R),I.return=E,I;case Xs:var P=I._init;return p(E,P(I._payload),R)}if(Zu(I)||Du(I))return I=va(I,E.mode,R,null),I.return=E,I;sf(E,I)}return null}function m(E,I,R,P){var M=I!==null?I.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return M!==null?null:l(E,I,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Wh:return R.key===M?u(E,I,R,P):null;case ml:return R.key===M?c(E,I,R,P):null;case Xs:return M=R._init,m(E,I,M(R._payload),P)}if(Zu(R)||Du(R))return M!==null?null:h(E,I,R,P,null);sf(E,R)}return null}function v(E,I,R,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(R)||null,l(I,E,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Wh:return E=E.get(P.key===null?R:P.key)||null,u(I,E,P,M);case ml:return E=E.get(P.key===null?R:P.key)||null,c(I,E,P,M);case Xs:var L=P._init;return v(E,I,R,L(P._payload),M)}if(Zu(P)||Du(P))return E=E.get(R)||null,h(I,E,P,M,null);sf(I,P)}return null}function w(E,I,R,P){for(var M=null,L=null,k=I,C=I=0,D=null;k!==null&&C<R.length;C++){k.index>C?(D=k,k=null):D=k.sibling;var V=m(E,k,R[C],P);if(V===null){k===null&&(k=D);break}n&&k&&V.alternate===null&&e(E,k),I=o(V,I,C),L===null?M=V:L.sibling=V,L=V,k=D}if(C===R.length)return r(E,k),Rt&&sa(E,C),M;if(k===null){for(;C<R.length;C++)k=p(E,R[C],P),k!==null&&(I=o(k,I,C),L===null?M=k:L.sibling=k,L=k);return Rt&&sa(E,C),M}for(k=i(E,k);C<R.length;C++)D=v(k,E,C,R[C],P),D!==null&&(n&&D.alternate!==null&&k.delete(D.key===null?C:D.key),I=o(D,I,C),L===null?M=D:L.sibling=D,L=D);return n&&k.forEach(function(U){return e(E,U)}),Rt&&sa(E,C),M}function b(E,I,R,P){var M=Du(R);if(typeof M!="function")throw Error(ye(150));if(R=M.call(R),R==null)throw Error(ye(151));for(var L=M=null,k=I,C=I=0,D=null,V=R.next();k!==null&&!V.done;C++,V=R.next()){k.index>C?(D=k,k=null):D=k.sibling;var U=m(E,k,V.value,P);if(U===null){k===null&&(k=D);break}n&&k&&U.alternate===null&&e(E,k),I=o(U,I,C),L===null?M=U:L.sibling=U,L=U,k=D}if(V.done)return r(E,k),Rt&&sa(E,C),M;if(k===null){for(;!V.done;C++,V=R.next())V=p(E,V.value,P),V!==null&&(I=o(V,I,C),L===null?M=V:L.sibling=V,L=V);return Rt&&sa(E,C),M}for(k=i(E,k);!V.done;C++,V=R.next())V=v(k,E,C,V.value,P),V!==null&&(n&&V.alternate!==null&&k.delete(V.key===null?C:V.key),I=o(V,I,C),L===null?M=V:L.sibling=V,L=V);return n&&k.forEach(function(B){return e(E,B)}),Rt&&sa(E,C),M}function S(E,I,R,P){if(typeof R=="object"&&R!==null&&R.type===gl&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Wh:e:{for(var M=R.key,L=I;L!==null;){if(L.key===M){if(M=R.type,M===gl){if(L.tag===7){r(E,L.sibling),I=s(L,R.props.children),I.return=E,E=I;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Xs&&ow(M)===L.type){r(E,L.sibling),I=s(L,R.props),I.ref=Uu(E,L,R),I.return=E,E=I;break e}r(E,L);break}else e(E,L);L=L.sibling}R.type===gl?(I=va(R.props.children,E.mode,P,R.key),I.return=E,E=I):(P=jf(R.type,R.key,R.props,null,E.mode,P),P.ref=Uu(E,I,R),P.return=E,E=P)}return a(E);case ml:e:{for(L=R.key;I!==null;){if(I.key===L)if(I.tag===4&&I.stateNode.containerInfo===R.containerInfo&&I.stateNode.implementation===R.implementation){r(E,I.sibling),I=s(I,R.children||[]),I.return=E,E=I;break e}else{r(E,I);break}else e(E,I);I=I.sibling}I=jm(R,E.mode,P),I.return=E,E=I}return a(E);case Xs:return L=R._init,S(E,I,L(R._payload),P)}if(Zu(R))return w(E,I,R,P);if(Du(R))return b(E,I,R,P);sf(E,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,I!==null&&I.tag===6?(r(E,I.sibling),I=s(I,R),I.return=E,E=I):(r(E,I),I=Om(R,E.mode,P),I.return=E,E=I),a(E)):r(E,I)}return S}var Kl=cT(!0),hT=cT(!1),pd=Do(null),md=null,Tl=null,Tv=null;function Iv(){Tv=Tl=md=null}function Sv(n){var e=pd.current;Ct(pd),n._currentValue=e}function Fg(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Pl(n,e){md=n,Tv=Tl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(er=!0),n.firstContext=null)}function Kr(n){var e=n._currentValue;if(Tv!==n)if(n={context:n,memoizedValue:e,next:null},Tl===null){if(md===null)throw Error(ye(308));Tl=n,md.dependencies={lanes:0,firstContext:n}}else Tl=Tl.next=n;return e}var ha=null;function Cv(n){ha===null?ha=[n]:ha.push(n)}function fT(n,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Cv(e)):(r.next=s.next,s.next=r),e.interleaved=r,ks(n,i)}function ks(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var Js=!1;function kv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Es(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function mo(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,lt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ks(n,r)}return s=i.interleaved,s===null?(e.next=e,Cv(i)):(e.next=s.next,s.next=e),i.interleaved=e,ks(n,r)}function kf(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,dv(n,r)}}function aw(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function gd(n,e,r,i){var s=n.updateQueue;Js=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(o!==null){var p=s.baseState;a=0,h=c=u=null,l=o;do{var m=l.lane,v=l.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=n,b=l;switch(m=e,v=r,b.tag){case 1:if(w=b.payload,typeof w=="function"){p=w.call(v,p,m);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,m=typeof w=="function"?w.call(v,p,m):w,m==null)break e;p=Lt({},p,m);break e;case 2:Js=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=v,u=p):h=h.next=v,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ca|=a,n.lanes=a,n.memoizedState=p}}function lw(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ye(191,s));s.call(i)}}}var mh={},Bi=Do(mh),Uc=Do(mh),zc=Do(mh);function fa(n){if(n===mh)throw Error(ye(174));return n}function Av(n,e){switch(Et(zc,e),Et(Uc,n),Et(Bi,mh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_g(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=_g(e,n)}Ct(Bi),Et(Bi,e)}function Wl(){Ct(Bi),Ct(Uc),Ct(zc)}function pT(n){fa(zc.current);var e=fa(Bi.current),r=_g(e,n.type);e!==r&&(Et(Uc,n),Et(Bi,r))}function Nv(n){Uc.current===n&&(Ct(Bi),Ct(Uc))}var Dt=Do(0);function yd(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cm=[];function Rv(){for(var n=0;n<Cm.length;n++)Cm[n]._workInProgressVersionPrimary=null;Cm.length=0}var Af=Ds.ReactCurrentDispatcher,km=Ds.ReactCurrentBatchConfig,Sa=0,Mt=null,an=null,dn=null,vd=!1,mc=!1,$c=0,QN=0;function kn(){throw Error(ye(321))}function Pv(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!wi(n[r],e[r]))return!1;return!0}function Ov(n,e,r,i,s,o){if(Sa=o,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Af.current=n===null||n.memoizedState===null?ZN:eR,n=r(i,s),mc){o=0;do{if(mc=!1,$c=0,25<=o)throw Error(ye(301));o+=1,dn=an=null,e.updateQueue=null,Af.current=tR,n=r(i,s)}while(mc)}if(Af.current=_d,e=an!==null&&an.next!==null,Sa=0,dn=an=Mt=null,vd=!1,e)throw Error(ye(300));return n}function jv(){var n=$c!==0;return $c=0,n}function Mi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Mt.memoizedState=dn=n:dn=dn.next=n,dn}function Wr(){if(an===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=an.next;var e=dn===null?Mt.memoizedState:dn.next;if(e!==null)dn=e,an=n;else{if(n===null)throw Error(ye(310));an=n,n={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},dn===null?Mt.memoizedState=dn=n:dn=dn.next=n}return dn}function Bc(n,e){return typeof e=="function"?e(n):e}function Am(n){var e=Wr(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=n;var i=an,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((Sa&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=p,a=i):u=u.next=p,Mt.lanes|=h,Ca|=h}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,wi(i,e.memoizedState)||(er=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(n=r.interleaved,n!==null){s=n;do o=s.lane,Mt.lanes|=o,Ca|=o,s=s.next;while(s!==n)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Nm(n){var e=Wr(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=n;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=n(o,a.action),a=a.next;while(a!==s);wi(o,e.memoizedState)||(er=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function mT(){}function gT(n,e){var r=Mt,i=Wr(),s=e(),o=!wi(i.memoizedState,s);if(o&&(i.memoizedState=s,er=!0),i=i.queue,Dv(_T.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||dn!==null&&dn.memoizedState.tag&1){if(r.flags|=2048,qc(9,vT.bind(null,r,i,s,e),void 0,null),pn===null)throw Error(ye(349));Sa&30||yT(r,e,s)}return s}function yT(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function vT(n,e,r,i){e.value=r,e.getSnapshot=i,wT(e)&&xT(n)}function _T(n,e,r){return r(function(){wT(e)&&xT(n)})}function wT(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!wi(n,r)}catch{return!0}}function xT(n){var e=ks(n,1);e!==null&&yi(e,n,1,-1)}function uw(n){var e=Mi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:n},e.queue=n,n=n.dispatch=JN.bind(null,Mt,n),[e.memoizedState,n]}function qc(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function bT(){return Wr().memoizedState}function Nf(n,e,r,i){var s=Mi();Mt.flags|=n,s.memoizedState=qc(1|e,r,void 0,i===void 0?null:i)}function dp(n,e,r,i){var s=Wr();i=i===void 0?null:i;var o=void 0;if(an!==null){var a=an.memoizedState;if(o=a.destroy,i!==null&&Pv(i,a.deps)){s.memoizedState=qc(e,r,o,i);return}}Mt.flags|=n,s.memoizedState=qc(1|e,r,o,i)}function cw(n,e){return Nf(8390656,8,n,e)}function Dv(n,e){return dp(2048,8,n,e)}function ET(n,e){return dp(4,2,n,e)}function TT(n,e){return dp(4,4,n,e)}function IT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ST(n,e,r){return r=r!=null?r.concat([n]):null,dp(4,4,IT.bind(null,e,n),r)}function Mv(){}function CT(n,e){var r=Wr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Pv(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function kT(n,e){var r=Wr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Pv(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function AT(n,e,r){return Sa&21?(wi(r,e)||(r=jE(),Mt.lanes|=r,Ca|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=r)}function YN(n,e){var r=mt;mt=r!==0&&4>r?r:4,n(!0);var i=km.transition;km.transition={};try{n(!1),e()}finally{mt=r,km.transition=i}}function NT(){return Wr().memoizedState}function XN(n,e,r){var i=yo(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},RT(n))PT(e,r);else if(r=fT(n,e,r,i),r!==null){var s=Hn();yi(r,n,i,s),OT(r,e,i)}}function JN(n,e,r){var i=yo(n),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(RT(n))PT(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,wi(l,a)){var u=e.interleaved;u===null?(s.next=s,Cv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=fT(n,e,s,i),r!==null&&(s=Hn(),yi(r,n,i,s),OT(r,e,i))}}function RT(n){var e=n.alternate;return n===Mt||e!==null&&e===Mt}function PT(n,e){mc=vd=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function OT(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,dv(n,r)}}var _d={readContext:Kr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},ZN={readContext:Kr,useCallback:function(n,e){return Mi().memoizedState=[n,e===void 0?null:e],n},useContext:Kr,useEffect:cw,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,Nf(4194308,4,IT.bind(null,e,n),r)},useLayoutEffect:function(n,e){return Nf(4194308,4,n,e)},useInsertionEffect:function(n,e){return Nf(4,2,n,e)},useMemo:function(n,e){var r=Mi();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Mi();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=XN.bind(null,Mt,n),[i.memoizedState,n]},useRef:function(n){var e=Mi();return n={current:n},e.memoizedState=n},useState:uw,useDebugValue:Mv,useDeferredValue:function(n){return Mi().memoizedState=n},useTransition:function(){var n=uw(!1),e=n[0];return n=YN.bind(null,n[1]),Mi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Mt,s=Mi();if(Rt){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=e(),pn===null)throw Error(ye(349));Sa&30||yT(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,cw(_T.bind(null,i,o,n),[n]),i.flags|=2048,qc(9,vT.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=Mi(),e=pn.identifierPrefix;if(Rt){var r=vs,i=ys;r=(i&~(1<<32-gi(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=$c++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=QN++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},eR={readContext:Kr,useCallback:CT,useContext:Kr,useEffect:Dv,useImperativeHandle:ST,useInsertionEffect:ET,useLayoutEffect:TT,useMemo:kT,useReducer:Am,useRef:bT,useState:function(){return Am(Bc)},useDebugValue:Mv,useDeferredValue:function(n){var e=Wr();return AT(e,an.memoizedState,n)},useTransition:function(){var n=Am(Bc)[0],e=Wr().memoizedState;return[n,e]},useMutableSource:mT,useSyncExternalStore:gT,useId:NT,unstable_isNewReconciler:!1},tR={readContext:Kr,useCallback:CT,useContext:Kr,useEffect:Dv,useImperativeHandle:ST,useInsertionEffect:ET,useLayoutEffect:TT,useMemo:kT,useReducer:Nm,useRef:bT,useState:function(){return Nm(Bc)},useDebugValue:Mv,useDeferredValue:function(n){var e=Wr();return an===null?e.memoizedState=n:AT(e,an.memoizedState,n)},useTransition:function(){var n=Nm(Bc)[0],e=Wr().memoizedState;return[n,e]},useMutableSource:mT,useSyncExternalStore:gT,useId:NT,unstable_isNewReconciler:!1};function ui(n,e){if(n&&n.defaultProps){e=Lt({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function Ug(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Lt({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var pp={isMounted:function(n){return(n=n._reactInternals)?Va(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Hn(),s=yo(n),o=Es(i,s);o.payload=e,r!=null&&(o.callback=r),e=mo(n,o,s),e!==null&&(yi(e,n,s,i),kf(e,n,s))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Hn(),s=yo(n),o=Es(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=mo(n,o,s),e!==null&&(yi(e,n,s,i),kf(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Hn(),i=yo(n),s=Es(r,i);s.tag=2,e!=null&&(s.callback=e),e=mo(n,s,i),e!==null&&(yi(e,n,i,r),kf(e,n,i))}};function hw(n,e,r,i,s,o,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Mc(r,i)||!Mc(s,o):!0}function jT(n,e,r){var i=!1,s=Io,o=e.contextType;return typeof o=="object"&&o!==null?o=Kr(o):(s=rr(e)?Ta:Mn.current,i=e.contextTypes,o=(i=i!=null)?ql(n,s):Io),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pp,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function fw(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&pp.enqueueReplaceState(e,e.state,null)}function zg(n,e,r,i){var s=n.stateNode;s.props=r,s.state=n.memoizedState,s.refs={},kv(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Kr(o):(o=rr(e)?Ta:Mn.current,s.context=ql(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ug(n,e,o,r),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pp.enqueueReplaceState(s,s.state,null),gd(n,r,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Gl(n,e){try{var r="",i=e;do r+=AA(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Rm(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function $g(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var nR=typeof WeakMap=="function"?WeakMap:Map;function DT(n,e,r){r=Es(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){xd||(xd=!0,Jg=i),$g(n,e)},r}function MT(n,e,r){r=Es(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){$g(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){$g(n,e),typeof i!="function"&&(go===null?go=new Set([this]):go.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function dw(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new nR;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),n=gR.bind(null,n,e,r),e.then(n,n))}function pw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function mw(n,e,r,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Es(-1,1),e.tag=2,mo(r,e,1))),r.lanes|=1),n)}var rR=Ds.ReactCurrentOwner,er=!1;function Bn(n,e,r,i){e.child=n===null?hT(e,null,r,i):Kl(e,n.child,r,i)}function gw(n,e,r,i,s){r=r.render;var o=e.ref;return Pl(e,s),i=Ov(n,e,r,i,o,s),r=jv(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,As(n,e,s)):(Rt&&r&&xv(e),e.flags|=1,Bn(n,e,i,s),e.child)}function yw(n,e,r,i,s){if(n===null){var o=r.type;return typeof o=="function"&&!qv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,LT(n,e,o,i,s)):(n=jf(r.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Mc,r(a,i)&&n.ref===e.ref)return As(n,e,s)}return e.flags|=1,n=vo(o,i),n.ref=e.ref,n.return=e,e.child=n}function LT(n,e,r,i,s){if(n!==null){var o=n.memoizedProps;if(Mc(o,i)&&n.ref===e.ref)if(er=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(er=!0);else return e.lanes=n.lanes,As(n,e,s)}return Bg(n,e,r,i,s)}function VT(n,e,r){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Sl,yr),yr|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Et(Sl,yr),yr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,Et(Sl,yr),yr|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,Et(Sl,yr),yr|=i;return Bn(n,e,s,r),e.child}function FT(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Bg(n,e,r,i,s){var o=rr(r)?Ta:Mn.current;return o=ql(e,o),Pl(e,s),r=Ov(n,e,r,i,o,s),i=jv(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,As(n,e,s)):(Rt&&i&&xv(e),e.flags|=1,Bn(n,e,r,s),e.child)}function vw(n,e,r,i,s){if(rr(r)){var o=!0;hd(e)}else o=!1;if(Pl(e,s),e.stateNode===null)Rf(n,e),jT(e,r,i),zg(e,r,i,s),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Kr(c):(c=rr(r)?Ta:Mn.current,c=ql(e,c));var h=r.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&fw(e,a,i,c),Js=!1;var m=e.memoizedState;a.state=m,gd(e,i,a,s),u=e.memoizedState,l!==i||m!==u||nr.current||Js?(typeof h=="function"&&(Ug(e,r,h,i),u=e.memoizedState),(l=Js||hw(e,r,l,i,m,u,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,dT(n,e),l=e.memoizedProps,c=e.type===e.elementType?l:ui(e.type,l),a.props=c,p=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Kr(u):(u=rr(r)?Ta:Mn.current,u=ql(e,u));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||m!==u)&&fw(e,a,i,u),Js=!1,m=e.memoizedState,a.state=m,gd(e,i,a,s);var w=e.memoizedState;l!==p||m!==w||nr.current||Js?(typeof v=="function"&&(Ug(e,r,v,i),w=e.memoizedState),(c=Js||hw(e,r,c,i,m,w,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,w,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,w,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),a.props=i,a.state=w,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return qg(n,e,r,i,o,s)}function qg(n,e,r,i,s,o){FT(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&rw(e,r,!1),As(n,e,o);i=e.stateNode,rR.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Kl(e,n.child,null,o),e.child=Kl(e,null,l,o)):Bn(n,e,l,o),e.memoizedState=i.state,s&&rw(e,r,!0),e.child}function UT(n){var e=n.stateNode;e.pendingContext?nw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&nw(n,e.context,!1),Av(n,e.containerInfo)}function _w(n,e,r,i,s){return Hl(),Ev(s),e.flags|=256,Bn(n,e,r,i),e.child}var Hg={dehydrated:null,treeContext:null,retryLane:0};function Kg(n){return{baseLanes:n,cachePool:null,transitions:null}}function zT(n,e,r){var i=e.pendingProps,s=Dt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Et(Dt,s&1),n===null)return Vg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=yp(a,i,0,null),n=va(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Kg(r),e.memoizedState=Hg,n):Lv(e,a));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return iR(n,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=n.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=vo(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=vo(l,o):(o=va(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=n.child.memoizedState,a=a===null?Kg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=n.childLanes&~r,e.memoizedState=Hg,i}return o=n.child,n=o.sibling,i=vo(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function Lv(n,e){return e=yp({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function of(n,e,r,i){return i!==null&&Ev(i),Kl(e,n.child,null,r),n=Lv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function iR(n,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=Rm(Error(ye(422))),of(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=yp({mode:"visible",children:i.children},s,0,null),o=va(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Kl(e,n.child,null,a),e.child.memoizedState=Kg(a),e.memoizedState=Hg,o);if(!(e.mode&1))return of(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(ye(419)),i=Rm(o,i,void 0),of(n,e,a,i)}if(l=(a&n.childLanes)!==0,er||l){if(i=pn,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ks(n,s),yi(i,n,s,-1))}return Bv(),i=Rm(Error(ye(421))),of(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=yR.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,vr=po(s.nextSibling),wr=e,Rt=!0,hi=null,n!==null&&(Lr[Vr++]=ys,Lr[Vr++]=vs,Lr[Vr++]=Ia,ys=n.id,vs=n.overflow,Ia=e),e=Lv(e,i.children),e.flags|=4096,e)}function ww(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Fg(n.return,e,r)}function Pm(n,e,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function $T(n,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Bn(n,e,i.children,r),i=Dt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ww(n,r,e);else if(n.tag===19)ww(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Et(Dt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)n=r.alternate,n!==null&&yd(n)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Pm(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&yd(n)===null){e.child=s;break}n=s.sibling,s.sibling=r,r=s,s=n}Pm(e,!0,r,null,o);break;case"together":Pm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rf(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function As(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),Ca|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ye(153));if(e.child!==null){for(n=e.child,r=vo(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=vo(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function sR(n,e,r){switch(e.tag){case 3:UT(e),Hl();break;case 5:pT(e);break;case 1:rr(e.type)&&hd(e);break;case 4:Av(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Et(pd,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Et(Dt,Dt.current&1),e.flags|=128,null):r&e.child.childLanes?zT(n,e,r):(Et(Dt,Dt.current&1),n=As(n,e,r),n!==null?n.sibling:null);Et(Dt,Dt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return $T(n,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Et(Dt,Dt.current),i)break;return null;case 22:case 23:return e.lanes=0,VT(n,e,r)}return As(n,e,r)}var BT,Wg,qT,HT;BT=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wg=function(){};qT=function(n,e,r,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,fa(Bi.current);var o=null;switch(r){case"input":s=mg(n,s),i=mg(n,i),o=[];break;case"select":s=Lt({},s,{value:void 0}),i=Lt({},i,{value:void 0}),o=[];break;case"textarea":s=vg(n,s),i=vg(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=ud)}wg(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ac.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ac.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Tt("scroll",n),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};HT=function(n,e,r,i){r!==i&&(e.flags|=4)};function zu(n,e){if(!Rt)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function An(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function oR(n,e,r){var i=e.pendingProps;switch(bv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return rr(e.type)&&cd(),An(e),null;case 3:return i=e.stateNode,Wl(),Ct(nr),Ct(Mn),Rv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(rf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(ty(hi),hi=null))),Wg(n,e),An(e),null;case 5:Nv(e);var s=fa(zc.current);if(r=e.type,n!==null&&e.stateNode!=null)qT(n,e,r,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ye(166));return An(e),null}if(n=fa(Bi.current),rf(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Ui]=e,i[Fc]=o,n=(e.mode&1)!==0,r){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(s=0;s<tc.length;s++)Tt(tc[s],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":A_(i,o),Tt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Tt("invalid",i);break;case"textarea":R_(i,o),Tt("invalid",i)}wg(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&nf(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&nf(i.textContent,l,n),s=["children",""+l]):Ac.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Tt("scroll",i)}switch(r){case"input":Gh(i),N_(i,o,!0);break;case"textarea":Gh(i),P_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=ud)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_E(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Ui]=e,n[Fc]=i,BT(n,e,!1,!1),e.stateNode=n;e:{switch(a=xg(r,i),r){case"dialog":Tt("cancel",n),Tt("close",n),s=i;break;case"iframe":case"object":case"embed":Tt("load",n),s=i;break;case"video":case"audio":for(s=0;s<tc.length;s++)Tt(tc[s],n);s=i;break;case"source":Tt("error",n),s=i;break;case"img":case"image":case"link":Tt("error",n),Tt("load",n),s=i;break;case"details":Tt("toggle",n),s=i;break;case"input":A_(n,i),s=mg(n,i),Tt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Lt({},i,{value:void 0}),Tt("invalid",n);break;case"textarea":R_(n,i),s=vg(n,i),Tt("invalid",n);break;default:s=i}wg(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?bE(n,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wE(n,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Nc(n,u):typeof u=="number"&&Nc(n,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ac.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Tt("scroll",n):u!=null&&av(n,o,u,a))}switch(r){case"input":Gh(n),N_(n,i,!1);break;case"textarea":Gh(n),P_(n);break;case"option":i.value!=null&&n.setAttribute("value",""+To(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?kl(n,!!i.multiple,o,!1):i.defaultValue!=null&&kl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=ud)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(n&&e.stateNode!=null)HT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ye(166));if(r=fa(zc.current),fa(Bi.current),rf(e)){if(i=e.stateNode,r=e.memoizedProps,i[Ui]=e,(o=i.nodeValue!==r)&&(n=wr,n!==null))switch(n.tag){case 3:nf(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nf(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ui]=e,e.stateNode=i}return An(e),null;case 13:if(Ct(Dt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rt&&vr!==null&&e.mode&1&&!(e.flags&128))uT(),Hl(),e.flags|=98560,o=!1;else if(o=rf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(ye(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ye(317));o[Ui]=e}else Hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;An(e),o=!1}else hi!==null&&(ty(hi),hi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Dt.current&1?ln===0&&(ln=3):Bv())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return Wl(),Wg(n,e),n===null&&Lc(e.stateNode.containerInfo),An(e),null;case 10:return Sv(e.type._context),An(e),null;case 17:return rr(e.type)&&cd(),An(e),null;case 19:if(Ct(Dt),o=e.memoizedState,o===null)return An(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)zu(o,!1);else{if(ln!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=yd(n),a!==null){for(e.flags|=128,zu(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,n=a.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return Et(Dt,Dt.current&1|2),e.child}n=n.sibling}o.tail!==null&&Qt()>Ql&&(e.flags|=128,i=!0,zu(o,!1),e.lanes=4194304)}else{if(!i)if(n=yd(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),zu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Rt)return An(e),null}else 2*Qt()-o.renderingStartTime>Ql&&r!==1073741824&&(e.flags|=128,i=!0,zu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qt(),e.sibling=null,r=Dt.current,Et(Dt,i?r&1|2:r&1),e):(An(e),null);case 22:case 23:return $v(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yr&1073741824&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function aR(n,e){switch(bv(e),e.tag){case 1:return rr(e.type)&&cd(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Wl(),Ct(nr),Ct(Mn),Rv(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Nv(e),null;case 13:if(Ct(Dt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));Hl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ct(Dt),null;case 4:return Wl(),null;case 10:return Sv(e.type._context),null;case 22:case 23:return $v(),null;case 24:return null;default:return null}}var af=!1,On=!1,lR=typeof WeakSet=="function"?WeakSet:Set,De=null;function Il(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){qt(n,e,i)}else r.current=null}function Gg(n,e,r){try{r()}catch(i){qt(n,e,i)}}var xw=!1;function uR(n,e){if(Rg=od,n=YE(),wv(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,h=0,p=n,m=null;t:for(;;){for(var v;p!==r||s!==0&&p.nodeType!==3||(l=a+s),p!==o||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===n)break t;if(m===r&&++c===s&&(l=a),m===o&&++h===i&&(u=a),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pg={focusedElem:n,selectionRange:r},od=!1,De=e;De!==null;)if(e=De,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,De=n;else for(;De!==null;){e=De;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,S=w.memoizedState,E=e.stateNode,I=E.getSnapshotBeforeUpdate(e.elementType===e.type?b:ui(e.type,b),S);E.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(P){qt(e,e.return,P)}if(n=e.sibling,n!==null){n.return=e.return,De=n;break}De=e.return}return w=xw,xw=!1,w}function gc(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&Gg(e,r,o)}s=s.next}while(s!==i)}}function mp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Qg(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function KT(n){var e=n.alternate;e!==null&&(n.alternate=null,KT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ui],delete e[Fc],delete e[Dg],delete e[HN],delete e[KN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function WT(n){return n.tag===5||n.tag===3||n.tag===4}function bw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||WT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ud));else if(i!==4&&(n=n.child,n!==null))for(Yg(n,e,r),n=n.sibling;n!==null;)Yg(n,e,r),n=n.sibling}function Xg(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Xg(n,e,r),n=n.sibling;n!==null;)Xg(n,e,r),n=n.sibling}var gn=null,ci=!1;function Ws(n,e,r){for(r=r.child;r!==null;)GT(n,e,r),r=r.sibling}function GT(n,e,r){if($i&&typeof $i.onCommitFiberUnmount=="function")try{$i.onCommitFiberUnmount(ap,r)}catch{}switch(r.tag){case 5:On||Il(r,e);case 6:var i=gn,s=ci;gn=null,Ws(n,e,r),gn=i,ci=s,gn!==null&&(ci?(n=gn,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):gn.removeChild(r.stateNode));break;case 18:gn!==null&&(ci?(n=gn,r=r.stateNode,n.nodeType===8?Im(n.parentNode,r):n.nodeType===1&&Im(n,r),jc(n)):Im(gn,r.stateNode));break;case 4:i=gn,s=ci,gn=r.stateNode.containerInfo,ci=!0,Ws(n,e,r),gn=i,ci=s;break;case 0:case 11:case 14:case 15:if(!On&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Gg(r,e,a),s=s.next}while(s!==i)}Ws(n,e,r);break;case 1:if(!On&&(Il(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){qt(r,e,l)}Ws(n,e,r);break;case 21:Ws(n,e,r);break;case 22:r.mode&1?(On=(i=On)||r.memoizedState!==null,Ws(n,e,r),On=i):Ws(n,e,r);break;default:Ws(n,e,r)}}function Ew(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new lR),e.forEach(function(i){var s=vR.bind(null,n,i);r.has(i)||(r.add(i),i.then(s,s))})}}function ai(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:gn=l.stateNode,ci=!1;break e;case 3:gn=l.stateNode.containerInfo,ci=!0;break e;case 4:gn=l.stateNode.containerInfo,ci=!0;break e}l=l.return}if(gn===null)throw Error(ye(160));GT(o,a,s),gn=null,ci=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){qt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QT(e,n),e=e.sibling}function QT(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ai(e,n),ji(n),i&4){try{gc(3,n,n.return),mp(3,n)}catch(b){qt(n,n.return,b)}try{gc(5,n,n.return)}catch(b){qt(n,n.return,b)}}break;case 1:ai(e,n),ji(n),i&512&&r!==null&&Il(r,r.return);break;case 5:if(ai(e,n),ji(n),i&512&&r!==null&&Il(r,r.return),n.flags&32){var s=n.stateNode;try{Nc(s,"")}catch(b){qt(n,n.return,b)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,a=r!==null?r.memoizedProps:o,l=n.type,u=n.updateQueue;if(n.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&yE(s,o),xg(l,a);var c=xg(l,o);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];h==="style"?bE(s,p):h==="dangerouslySetInnerHTML"?wE(s,p):h==="children"?Nc(s,p):av(s,h,p,c)}switch(l){case"input":gg(s,o);break;case"textarea":vE(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?kl(s,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?kl(s,!!o.multiple,o.defaultValue,!0):kl(s,!!o.multiple,o.multiple?[]:"",!1))}s[Fc]=o}catch(b){qt(n,n.return,b)}}break;case 6:if(ai(e,n),ji(n),i&4){if(n.stateNode===null)throw Error(ye(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(b){qt(n,n.return,b)}}break;case 3:if(ai(e,n),ji(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{jc(e.containerInfo)}catch(b){qt(n,n.return,b)}break;case 4:ai(e,n),ji(n);break;case 13:ai(e,n),ji(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Uv=Qt())),i&4&&Ew(n);break;case 22:if(h=r!==null&&r.memoizedState!==null,n.mode&1?(On=(c=On)||h,ai(e,n),On=c):ai(e,n),ji(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(De=n,h=n.child;h!==null;){for(p=De=h;De!==null;){switch(m=De,v=m.child,m.tag){case 0:case 11:case 14:case 15:gc(4,m,m.return);break;case 1:Il(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){i=m,r=m.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(b){qt(i,r,b)}}break;case 5:Il(m,m.return);break;case 22:if(m.memoizedState!==null){Iw(p);continue}}v!==null?(v.return=m,De=v):Iw(p)}h=h.sibling}e:for(h=null,p=n;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=xE("display",a))}catch(b){qt(n,n.return,b)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(b){qt(n,n.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ai(e,n),ji(n),i&4&&Ew(n);break;case 21:break;default:ai(e,n),ji(n)}}function ji(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(WT(r)){var i=r;break e}r=r.return}throw Error(ye(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Nc(s,""),i.flags&=-33);var o=bw(n);Xg(n,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=bw(n);Yg(n,l,a);break;default:throw Error(ye(161))}}catch(u){qt(n,n.return,u)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function cR(n,e,r){De=n,YT(n)}function YT(n,e,r){for(var i=(n.mode&1)!==0;De!==null;){var s=De,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||af;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||On;l=af;var c=On;if(af=a,(On=u)&&!c)for(De=s;De!==null;)a=De,u=a.child,a.tag===22&&a.memoizedState!==null?Sw(s):u!==null?(u.return=a,De=u):Sw(s);for(;o!==null;)De=o,YT(o),o=o.sibling;De=s,af=l,On=c}Tw(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,De=o):Tw(n)}}function Tw(n){for(;De!==null;){var e=De;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:On||mp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!On)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ui(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&lw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}lw(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&jc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}On||e.flags&512&&Qg(e)}catch(m){qt(e,e.return,m)}}if(e===n){De=null;break}if(r=e.sibling,r!==null){r.return=e.return,De=r;break}De=e.return}}function Iw(n){for(;De!==null;){var e=De;if(e===n){De=null;break}var r=e.sibling;if(r!==null){r.return=e.return,De=r;break}De=e.return}}function Sw(n){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mp(4,e)}catch(u){qt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){qt(e,s,u)}}var o=e.return;try{Qg(e)}catch(u){qt(e,o,u)}break;case 5:var a=e.return;try{Qg(e)}catch(u){qt(e,a,u)}}}catch(u){qt(e,e.return,u)}if(e===n){De=null;break}var l=e.sibling;if(l!==null){l.return=e.return,De=l;break}De=e.return}}var hR=Math.ceil,wd=Ds.ReactCurrentDispatcher,Vv=Ds.ReactCurrentOwner,Br=Ds.ReactCurrentBatchConfig,lt=0,pn=null,en=null,_n=0,yr=0,Sl=Do(0),ln=0,Hc=null,Ca=0,gp=0,Fv=0,yc=null,Jn=null,Uv=0,Ql=1/0,ds=null,xd=!1,Jg=null,go=null,lf=!1,ao=null,bd=0,vc=0,Zg=null,Pf=-1,Of=0;function Hn(){return lt&6?Qt():Pf!==-1?Pf:Pf=Qt()}function yo(n){return n.mode&1?lt&2&&_n!==0?_n&-_n:GN.transition!==null?(Of===0&&(Of=jE()),Of):(n=mt,n!==0||(n=window.event,n=n===void 0?16:zE(n.type)),n):1}function yi(n,e,r,i){if(50<vc)throw vc=0,Zg=null,Error(ye(185));fh(n,r,i),(!(lt&2)||n!==pn)&&(n===pn&&(!(lt&2)&&(gp|=r),ln===4&&no(n,_n)),ir(n,i),r===1&&lt===0&&!(e.mode&1)&&(Ql=Qt()+500,fp&&Mo()))}function ir(n,e){var r=n.callbackNode;GA(n,e);var i=sd(n,n===pn?_n:0);if(i===0)r!==null&&D_(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&D_(r),e===1)n.tag===0?WN(Cw.bind(null,n)):oT(Cw.bind(null,n)),BN(function(){!(lt&6)&&Mo()}),r=null;else{switch(DE(i)){case 1:r=fv;break;case 4:r=PE;break;case 16:r=id;break;case 536870912:r=OE;break;default:r=id}r=iI(r,XT.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function XT(n,e){if(Pf=-1,Of=0,lt&6)throw Error(ye(327));var r=n.callbackNode;if(Ol()&&n.callbackNode!==r)return null;var i=sd(n,n===pn?_n:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Ed(n,i);else{e=i;var s=lt;lt|=2;var o=ZT();(pn!==n||_n!==e)&&(ds=null,Ql=Qt()+500,ya(n,e));do try{pR();break}catch(l){JT(n,l)}while(!0);Iv(),wd.current=o,lt=s,en!==null?e=0:(pn=null,_n=0,e=ln)}if(e!==0){if(e===2&&(s=Sg(n),s!==0&&(i=s,e=ey(n,s))),e===1)throw r=Hc,ya(n,0),no(n,i),ir(n,Qt()),r;if(e===6)no(n,i);else{if(s=n.current.alternate,!(i&30)&&!fR(s)&&(e=Ed(n,i),e===2&&(o=Sg(n),o!==0&&(i=o,e=ey(n,o))),e===1))throw r=Hc,ya(n,0),no(n,i),ir(n,Qt()),r;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(ye(345));case 2:oa(n,Jn,ds);break;case 3:if(no(n,i),(i&130023424)===i&&(e=Uv+500-Qt(),10<e)){if(sd(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Hn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=jg(oa.bind(null,n,Jn,ds),e);break}oa(n,Jn,ds);break;case 4:if(no(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-gi(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Qt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hR(i/1960))-i,10<i){n.timeoutHandle=jg(oa.bind(null,n,Jn,ds),i);break}oa(n,Jn,ds);break;case 5:oa(n,Jn,ds);break;default:throw Error(ye(329))}}}return ir(n,Qt()),n.callbackNode===r?XT.bind(null,n):null}function ey(n,e){var r=yc;return n.current.memoizedState.isDehydrated&&(ya(n,e).flags|=256),n=Ed(n,e),n!==2&&(e=Jn,Jn=r,e!==null&&ty(e)),n}function ty(n){Jn===null?Jn=n:Jn.push.apply(Jn,n)}function fR(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!wi(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(n,e){for(e&=~Fv,e&=~gp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-gi(e),i=1<<r;n[r]=-1,e&=~i}}function Cw(n){if(lt&6)throw Error(ye(327));Ol();var e=sd(n,0);if(!(e&1))return ir(n,Qt()),null;var r=Ed(n,e);if(n.tag!==0&&r===2){var i=Sg(n);i!==0&&(e=i,r=ey(n,i))}if(r===1)throw r=Hc,ya(n,0),no(n,e),ir(n,Qt()),r;if(r===6)throw Error(ye(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,oa(n,Jn,ds),ir(n,Qt()),null}function zv(n,e){var r=lt;lt|=1;try{return n(e)}finally{lt=r,lt===0&&(Ql=Qt()+500,fp&&Mo())}}function ka(n){ao!==null&&ao.tag===0&&!(lt&6)&&Ol();var e=lt;lt|=1;var r=Br.transition,i=mt;try{if(Br.transition=null,mt=1,n)return n()}finally{mt=i,Br.transition=r,lt=e,!(lt&6)&&Mo()}}function $v(){yr=Sl.current,Ct(Sl)}function ya(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,$N(r)),en!==null)for(r=en.return;r!==null;){var i=r;switch(bv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&cd();break;case 3:Wl(),Ct(nr),Ct(Mn),Rv();break;case 5:Nv(i);break;case 4:Wl();break;case 13:Ct(Dt);break;case 19:Ct(Dt);break;case 10:Sv(i.type._context);break;case 22:case 23:$v()}r=r.return}if(pn=n,en=n=vo(n.current,null),_n=yr=e,ln=0,Hc=null,Fv=gp=Ca=0,Jn=yc=null,ha!==null){for(e=0;e<ha.length;e++)if(r=ha[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}ha=null}return n}function JT(n,e){do{var r=en;try{if(Iv(),Af.current=_d,vd){for(var i=Mt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}vd=!1}if(Sa=0,dn=an=Mt=null,mc=!1,$c=0,Vv.current=null,r===null||r.return===null){ln=1,Hc=e,en=null;break}e:{var o=n,a=r.return,l=r,u=e;if(e=_n,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=pw(a);if(v!==null){v.flags&=-257,mw(v,a,l,o,e),v.mode&1&&dw(o,c,e),e=v,u=c;var w=e.updateQueue;if(w===null){var b=new Set;b.add(u),e.updateQueue=b}else w.add(u);break e}else{if(!(e&1)){dw(o,c,e),Bv();break e}u=Error(ye(426))}}else if(Rt&&l.mode&1){var S=pw(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),mw(S,a,l,o,e),Ev(Gl(u,l));break e}}o=u=Gl(u,l),ln!==4&&(ln=2),yc===null?yc=[o]:yc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var E=DT(o,u,e);aw(o,E);break e;case 1:l=u;var I=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(go===null||!go.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=MT(o,l,e);aw(o,P);break e}}o=o.return}while(o!==null)}tI(r)}catch(M){e=M,en===r&&r!==null&&(en=r=r.return);continue}break}while(!0)}function ZT(){var n=wd.current;return wd.current=_d,n===null?_d:n}function Bv(){(ln===0||ln===3||ln===2)&&(ln=4),pn===null||!(Ca&268435455)&&!(gp&268435455)||no(pn,_n)}function Ed(n,e){var r=lt;lt|=2;var i=ZT();(pn!==n||_n!==e)&&(ds=null,ya(n,e));do try{dR();break}catch(s){JT(n,s)}while(!0);if(Iv(),lt=r,wd.current=i,en!==null)throw Error(ye(261));return pn=null,_n=0,ln}function dR(){for(;en!==null;)eI(en)}function pR(){for(;en!==null&&!FA();)eI(en)}function eI(n){var e=rI(n.alternate,n,yr);n.memoizedProps=n.pendingProps,e===null?tI(n):en=e,Vv.current=null}function tI(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=aR(r,e),r!==null){r.flags&=32767,en=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ln=6,en=null;return}}else if(r=oR(r,e,yr),r!==null){en=r;return}if(e=e.sibling,e!==null){en=e;return}en=e=n}while(e!==null);ln===0&&(ln=5)}function oa(n,e,r){var i=mt,s=Br.transition;try{Br.transition=null,mt=1,mR(n,e,r,i)}finally{Br.transition=s,mt=i}return null}function mR(n,e,r,i){do Ol();while(ao!==null);if(lt&6)throw Error(ye(327));r=n.finishedWork;var s=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(ye(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(QA(n,o),n===pn&&(en=pn=null,_n=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lf||(lf=!0,iI(id,function(){return Ol(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Br.transition,Br.transition=null;var a=mt;mt=1;var l=lt;lt|=4,Vv.current=null,uR(n,r),QT(r,n),DN(Pg),od=!!Rg,Pg=Rg=null,n.current=r,cR(r),UA(),lt=l,mt=a,Br.transition=o}else n.current=r;if(lf&&(lf=!1,ao=n,bd=s),o=n.pendingLanes,o===0&&(go=null),BA(r.stateNode),ir(n,Qt()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(xd)throw xd=!1,n=Jg,Jg=null,n;return bd&1&&n.tag!==0&&Ol(),o=n.pendingLanes,o&1?n===Zg?vc++:(vc=0,Zg=n):vc=0,Mo(),null}function Ol(){if(ao!==null){var n=DE(bd),e=Br.transition,r=mt;try{if(Br.transition=null,mt=16>n?16:n,ao===null)var i=!1;else{if(n=ao,ao=null,bd=0,lt&6)throw Error(ye(331));var s=lt;for(lt|=4,De=n.current;De!==null;){var o=De,a=o.child;if(De.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(De=c;De!==null;){var h=De;switch(h.tag){case 0:case 11:case 15:gc(8,h,o)}var p=h.child;if(p!==null)p.return=h,De=p;else for(;De!==null;){h=De;var m=h.sibling,v=h.return;if(KT(h),h===c){De=null;break}if(m!==null){m.return=v,De=m;break}De=v}}}var w=o.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}De=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,De=a;else e:for(;De!==null;){if(o=De,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gc(9,o,o.return)}var E=o.sibling;if(E!==null){E.return=o.return,De=E;break e}De=o.return}}var I=n.current;for(De=I;De!==null;){a=De;var R=a.child;if(a.subtreeFlags&2064&&R!==null)R.return=a,De=R;else e:for(a=I;De!==null;){if(l=De,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mp(9,l)}}catch(M){qt(l,l.return,M)}if(l===a){De=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,De=P;break e}De=l.return}}if(lt=s,Mo(),$i&&typeof $i.onPostCommitFiberRoot=="function")try{$i.onPostCommitFiberRoot(ap,n)}catch{}i=!0}return i}finally{mt=r,Br.transition=e}}return!1}function kw(n,e,r){e=Gl(r,e),e=DT(n,e,1),n=mo(n,e,1),e=Hn(),n!==null&&(fh(n,1,e),ir(n,e))}function qt(n,e,r){if(n.tag===3)kw(n,n,r);else for(;e!==null;){if(e.tag===3){kw(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(go===null||!go.has(i))){n=Gl(r,n),n=MT(e,n,1),e=mo(e,n,1),n=Hn(),e!==null&&(fh(e,1,n),ir(e,n));break}}e=e.return}}function gR(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Hn(),n.pingedLanes|=n.suspendedLanes&r,pn===n&&(_n&r)===r&&(ln===4||ln===3&&(_n&130023424)===_n&&500>Qt()-Uv?ya(n,0):Fv|=r),ir(n,e)}function nI(n,e){e===0&&(n.mode&1?(e=Xh,Xh<<=1,!(Xh&130023424)&&(Xh=4194304)):e=1);var r=Hn();n=ks(n,e),n!==null&&(fh(n,e,r),ir(n,r))}function yR(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),nI(n,r)}function vR(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ye(314))}i!==null&&i.delete(e),nI(n,r)}var rI;rI=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||nr.current)er=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return er=!1,sR(n,e,r);er=!!(n.flags&131072)}else er=!1,Rt&&e.flags&1048576&&aT(e,dd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Rf(n,e),n=e.pendingProps;var s=ql(e,Mn.current);Pl(e,r),s=Ov(null,e,i,n,s,r);var o=jv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(i)?(o=!0,hd(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kv(e),s.updater=pp,e.stateNode=s,s._reactInternals=e,zg(e,i,n,r),e=qg(null,e,i,!0,o,r)):(e.tag=0,Rt&&o&&xv(e),Bn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Rf(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=wR(i),n=ui(i,n),s){case 0:e=Bg(null,e,i,n,r);break e;case 1:e=vw(null,e,i,n,r);break e;case 11:e=gw(null,e,i,n,r);break e;case 14:e=yw(null,e,i,ui(i.type,n),r);break e}throw Error(ye(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),Bg(n,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),vw(n,e,i,s,r);case 3:e:{if(UT(e),n===null)throw Error(ye(387));i=e.pendingProps,o=e.memoizedState,s=o.element,dT(n,e),gd(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Gl(Error(ye(423)),e),e=_w(n,e,i,r,s);break e}else if(i!==s){s=Gl(Error(ye(424)),e),e=_w(n,e,i,r,s);break e}else for(vr=po(e.stateNode.containerInfo.firstChild),wr=e,Rt=!0,hi=null,r=hT(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hl(),i===s){e=As(n,e,r);break e}Bn(n,e,i,r)}e=e.child}return e;case 5:return pT(e),n===null&&Vg(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,a=s.children,Og(i,s)?a=null:o!==null&&Og(i,o)&&(e.flags|=32),FT(n,e),Bn(n,e,a,r),e.child;case 6:return n===null&&Vg(e),null;case 13:return zT(n,e,r);case 4:return Av(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Kl(e,null,i,r):Bn(n,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),gw(n,e,i,s,r);case 7:return Bn(n,e,e.pendingProps,r),e.child;case 8:return Bn(n,e,e.pendingProps.children,r),e.child;case 12:return Bn(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Et(pd,i._currentValue),i._currentValue=a,o!==null)if(wi(o.value,a)){if(o.children===s.children&&!nr.current){e=As(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=Es(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Fg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ye(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Fg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Bn(n,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Pl(e,r),s=Kr(s),i=i(s),e.flags|=1,Bn(n,e,i,r),e.child;case 14:return i=e.type,s=ui(i,e.pendingProps),s=ui(i.type,s),yw(n,e,i,s,r);case 15:return LT(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),Rf(n,e),e.tag=1,rr(i)?(n=!0,hd(e)):n=!1,Pl(e,r),jT(e,i,s),zg(e,i,s,r),qg(null,e,i,!0,n,r);case 19:return $T(n,e,r);case 22:return VT(n,e,r)}throw Error(ye(156,e.tag))};function iI(n,e){return RE(n,e)}function _R(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,e,r,i){return new _R(n,e,r,i)}function qv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wR(n){if(typeof n=="function")return qv(n)?1:0;if(n!=null){if(n=n.$$typeof,n===uv)return 11;if(n===cv)return 14}return 2}function vo(n,e){var r=n.alternate;return r===null?(r=$r(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function jf(n,e,r,i,s,o){var a=2;if(i=n,typeof n=="function")qv(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case gl:return va(r.children,s,o,e);case lv:a=8,s|=8;break;case hg:return n=$r(12,r,e,s|2),n.elementType=hg,n.lanes=o,n;case fg:return n=$r(13,r,e,s),n.elementType=fg,n.lanes=o,n;case dg:return n=$r(19,r,e,s),n.elementType=dg,n.lanes=o,n;case pE:return yp(r,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case fE:a=10;break e;case dE:a=9;break e;case uv:a=11;break e;case cv:a=14;break e;case Xs:a=16,i=null;break e}throw Error(ye(130,n==null?n:typeof n,""))}return e=$r(a,r,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function va(n,e,r,i){return n=$r(7,n,i,e),n.lanes=r,n}function yp(n,e,r,i){return n=$r(22,n,i,e),n.elementType=pE,n.lanes=r,n.stateNode={isHidden:!1},n}function Om(n,e,r){return n=$r(6,n,null,e),n.lanes=r,n}function jm(n,e,r){return e=$r(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function xR(n,e,r,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pm(0),this.expirationTimes=pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hv(n,e,r,i,s,o,a,l,u){return n=new xR(n,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=$r(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kv(o),n}function bR(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ml,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function sI(n){if(!n)return Io;n=n._reactInternals;e:{if(Va(n)!==n||n.tag!==1)throw Error(ye(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(n.tag===1){var r=n.type;if(rr(r))return sT(n,r,e)}return e}function oI(n,e,r,i,s,o,a,l,u){return n=Hv(r,i,!0,n,s,o,a,l,u),n.context=sI(null),r=n.current,i=Hn(),s=yo(r),o=Es(i,s),o.callback=e??null,mo(r,o,s),n.current.lanes=s,fh(n,s,i),ir(n,i),n}function vp(n,e,r,i){var s=e.current,o=Hn(),a=yo(s);return r=sI(r),e.context===null?e.context=r:e.pendingContext=r,e=Es(o,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=mo(s,e,a),n!==null&&(yi(n,s,a,o),kf(n,s,a)),a}function Td(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Aw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Kv(n,e){Aw(n,e),(n=n.alternate)&&Aw(n,e)}function ER(){return null}var aI=typeof reportError=="function"?reportError:function(n){console.error(n)};function Wv(n){this._internalRoot=n}_p.prototype.render=Wv.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ye(409));vp(n,e,null,null)};_p.prototype.unmount=Wv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ka(function(){vp(null,n,null,null)}),e[Cs]=null}};function _p(n){this._internalRoot=n}_p.prototype.unstable_scheduleHydration=function(n){if(n){var e=VE();n={blockedOn:null,target:n,priority:e};for(var r=0;r<to.length&&e!==0&&e<to[r].priority;r++);to.splice(r,0,n),r===0&&UE(n)}};function Gv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function wp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function TR(n,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=Td(a);o.call(c)}}var a=oI(e,i,n,0,null,!1,!1,"",Nw);return n._reactRootContainer=a,n[Cs]=a.current,Lc(n.nodeType===8?n.parentNode:n),ka(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=Td(u);l.call(c)}}var u=Hv(n,0,!1,null,null,!1,!1,"",Nw);return n._reactRootContainer=u,n[Cs]=u.current,Lc(n.nodeType===8?n.parentNode:n),ka(function(){vp(e,u,r,i)}),u}function xp(n,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=Td(a);l.call(u)}}vp(e,a,n,s)}else a=TR(r,e,n,s,i);return Td(a)}ME=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=ec(e.pendingLanes);r!==0&&(dv(e,r|1),ir(e,Qt()),!(lt&6)&&(Ql=Qt()+500,Mo()))}break;case 13:ka(function(){var i=ks(n,1);if(i!==null){var s=Hn();yi(i,n,1,s)}}),Kv(n,1)}};pv=function(n){if(n.tag===13){var e=ks(n,134217728);if(e!==null){var r=Hn();yi(e,n,134217728,r)}Kv(n,134217728)}};LE=function(n){if(n.tag===13){var e=yo(n),r=ks(n,e);if(r!==null){var i=Hn();yi(r,n,e,i)}Kv(n,e)}};VE=function(){return mt};FE=function(n,e){var r=mt;try{return mt=n,e()}finally{mt=r}};Eg=function(n,e,r){switch(e){case"input":if(gg(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var s=hp(i);if(!s)throw Error(ye(90));gE(i),gg(i,s)}}}break;case"textarea":vE(n,r);break;case"select":e=r.value,e!=null&&kl(n,!!r.multiple,e,!1)}};IE=zv;SE=ka;var IR={usingClientEntryPoint:!1,Events:[ph,wl,hp,EE,TE,zv]},$u={findFiberByHostInstance:ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SR={bundleType:$u.bundleType,version:$u.version,rendererPackageName:$u.rendererPackageName,rendererConfig:$u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=AE(n),n===null?null:n.stateNode},findFiberByHostInstance:$u.findFiberByHostInstance||ER,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{ap=uf.inject(SR),$i=uf}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;Tr.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gv(e))throw Error(ye(200));return bR(n,e,null,r)};Tr.createRoot=function(n,e){if(!Gv(n))throw Error(ye(299));var r=!1,i="",s=aI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hv(n,1,!1,null,null,r,!1,i,s),n[Cs]=e.current,Lc(n.nodeType===8?n.parentNode:n),new Wv(e)};Tr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ye(188)):(n=Object.keys(n).join(","),Error(ye(268,n)));return n=AE(e),n=n===null?null:n.stateNode,n};Tr.flushSync=function(n){return ka(n)};Tr.hydrate=function(n,e,r){if(!wp(e))throw Error(ye(200));return xp(null,n,e,!0,r)};Tr.hydrateRoot=function(n,e,r){if(!Gv(n))throw Error(ye(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=aI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=oI(e,null,n,1,r??null,s,!1,o,a),n[Cs]=e.current,Lc(n),i)for(n=0;n<i.length;n++)r=i[n],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new _p(e)};Tr.render=function(n,e,r){if(!wp(e))throw Error(ye(200));return xp(null,n,e,!1,r)};Tr.unmountComponentAtNode=function(n){if(!wp(n))throw Error(ye(40));return n._reactRootContainer?(ka(function(){xp(null,null,n,!1,function(){n._reactRootContainer=null,n[Cs]=null})}),!0):!1};Tr.unstable_batchedUpdates=zv;Tr.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!wp(r))throw Error(ye(200));if(n==null||n._reactInternals===void 0)throw Error(ye(38));return xp(n,e,r,!1,i)};Tr.version="18.3.1-next-f1338f8080-20240426";function lI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lI)}catch(n){console.error(n)}}lI(),lE.exports=Tr;var CR=lE.exports,Rw=CR;ug.createRoot=Rw.createRoot,ug.hydrateRoot=Rw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kc(){return Kc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Kc.apply(this,arguments)}var lo;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(lo||(lo={}));const Pw="popstate";function kR(n){n===void 0&&(n={});function e(s,o){let{pathname:a="/",search:l="",hash:u=""}=Fa(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),ny("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:uI(o))}function i(s,o){bp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return NR(e,r,i,n)}function un(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AR(){return Math.random().toString(36).substr(2,8)}function Ow(n,e){return{usr:n.state,key:n.key,idx:e}}function ny(n,e,r,i){return r===void 0&&(r=null),Kc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Fa(e):e,{state:r,key:e&&e.key||i||AR()})}function uI(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Fa(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function NR(n,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=lo.Pop,u=null,c=h();c==null&&(c=0,a.replaceState(Kc({},a.state,{idx:c}),""));function h(){return(a.state||{idx:null}).idx}function p(){l=lo.Pop;let S=h(),E=S==null?null:S-c;c=S,u&&u({action:l,location:b.location,delta:E})}function m(S,E){l=lo.Push;let I=ny(b.location,S,E);r&&r(I,S),c=h()+1;let R=Ow(I,c),P=b.createHref(I);try{a.pushState(R,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(P)}o&&u&&u({action:l,location:b.location,delta:1})}function v(S,E){l=lo.Replace;let I=ny(b.location,S,E);r&&r(I,S),c=h();let R=Ow(I,c),P=b.createHref(I);a.replaceState(R,"",P),o&&u&&u({action:l,location:b.location,delta:0})}function w(S){let E=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof S=="string"?S:uI(S);return I=I.replace(/ $/,"%20"),un(E,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,E)}let b={get action(){return l},get location(){return n(s,a)},listen(S){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Pw,p),u=S,()=>{s.removeEventListener(Pw,p),u=null}},createHref(S){return e(s,S)},createURL:w,encodeLocation(S){let E=w(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:v,go(S){return a.go(S)}};return b}var jw;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(jw||(jw={}));function RR(n,e,r){return r===void 0&&(r="/"),PR(n,e,r)}function PR(n,e,r,i){let s=typeof e=="string"?Fa(e):e,o=fI(s.pathname||"/",r);if(o==null)return null;let a=cI(n);OR(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=HR(o);l=$R(a[u],c)}return l}function cI(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(un(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let c=_a([i,u.relativePath]),h=r.concat(u);o.children&&o.children.length>0&&(un(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cI(o.children,e,h,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:UR(c,o.index),routesMeta:h})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of hI(o.path))s(o,a,u)}),e}function hI(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=hI(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>n.startsWith("/")&&u===""?"/":u)}function OR(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:zR(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const jR=/^:[\w-]+$/,DR=3,MR=2,LR=1,VR=10,FR=-2,Dw=n=>n==="*";function UR(n,e){let r=n.split("/"),i=r.length;return r.some(Dw)&&(i+=FR),e&&(i+=MR),r.filter(s=>!Dw(s)).reduce((s,o)=>s+(jR.test(o)?DR:o===""?LR:VR),i)}function zR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function $R(n,e,r){let{routesMeta:i}=n,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=BR({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:_a([o,p.pathname]),pathnameBase:JR(_a([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=_a([o,p.pathnameBase]))}return a}function BR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=qR(n.path,n.caseSensitive,n.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,h,p)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let b=l[p]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const w=l[p];return v&&!w?c[m]=void 0:c[m]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:n}}function qR(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),bp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function HR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function fI(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}const KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WR=n=>KR.test(n);function GR(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof n=="string"?Fa(n):n,o;if(r)if(WR(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),bp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Mw(r.substring(1),"/"):o=Mw(r,e)}else o=e;return{pathname:o,search:ZR(i),hash:eP(s)}}function Mw(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Dm(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QR(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function YR(n,e){let r=QR(n);return e?r.map((i,s)=>s===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function XR(n,e,r,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Fa(n):(s=Kc({},n),un(!s.pathname||!s.pathname.includes("?"),Dm("?","pathname","search",s)),un(!s.pathname||!s.pathname.includes("#"),Dm("#","pathname","hash",s)),un(!s.search||!s.search.includes("#"),Dm("#","search","hash",s)));let o=n===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let p=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=GR(s,l),c=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const _a=n=>n.join("/").replace(/\/\/+/g,"/"),JR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,eP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const dI=["post","put","patch","delete"];new Set(dI);const nP=["get",...dI];new Set(nP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wc(){return Wc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Wc.apply(this,arguments)}const Qv=le.createContext(null),rP=le.createContext(null),Ep=le.createContext(null),Tp=le.createContext(null),Ua=le.createContext({outlet:null,matches:[],isDataRoute:!1}),pI=le.createContext(null);function Ip(){return le.useContext(Tp)!=null}function Yv(){return Ip()||un(!1),le.useContext(Tp).location}function mI(n){le.useContext(Ep).static||le.useLayoutEffect(n)}function Lo(){let{isDataRoute:n}=le.useContext(Ua);return n?gP():iP()}function iP(){Ip()||un(!1);let n=le.useContext(Qv),{basename:e,future:r,navigator:i}=le.useContext(Ep),{matches:s}=le.useContext(Ua),{pathname:o}=Yv(),a=JSON.stringify(YR(s,r.v7_relativeSplatPath)),l=le.useRef(!1);return mI(()=>{l.current=!0}),le.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){i.go(c);return}let p=XR(c,JSON.parse(a),o,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:_a([e,p.pathname])),(h.replace?i.replace:i.push)(p,h.state,h)},[e,i,a,o,n])}function gI(){let{matches:n}=le.useContext(Ua),e=n[n.length-1];return e?e.params:{}}function sP(n,e){return oP(n,e)}function oP(n,e,r,i){Ip()||un(!1);let{navigator:s}=le.useContext(Ep),{matches:o}=le.useContext(Ua),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Yv(),h;if(e){var p;let S=typeof e=="string"?Fa(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||un(!1),h=S}else h=c;let m=h.pathname||"/",v=m;if(u!=="/"){let S=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=RR(n,{pathname:v}),b=hP(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:_a([u,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:_a([u,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,r,i);return e&&b?le.createElement(Tp.Provider,{value:{location:Wc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:lo.Pop}},b):b}function aP(){let n=mP(),e=tP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},e),r?le.createElement("pre",{style:s},r):null,null)}const lP=le.createElement(aP,null);class uP extends le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?le.createElement(Ua.Provider,{value:this.props.routeContext},le.createElement(pI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cP(n){let{routeContext:e,match:r,children:i}=n,s=le.useContext(Qv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),le.createElement(Ua.Provider,{value:e},i)}function hP(n,e,r,i){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let a=n,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||un(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,c=-1;if(r&&i&&i.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:m,errors:v}=r,w=p.route.loader&&m[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((h,p,m)=>{let v,w=!1,b=null,S=null;r&&(v=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||lP,u&&(c<0&&m===0?(yP("route-fallback"),w=!0,S=null):c===m&&(w=!0,S=p.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,m+1)),I=()=>{let R;return v?R=b:w?R=S:p.route.Component?R=le.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=h,le.createElement(cP,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:r!=null},children:R})};return r&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?le.createElement(uP,{location:r.location,revalidation:r.revalidation,component:b,error:v,children:I(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):I()},null)}var yI=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(yI||{}),vI=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(vI||{});function fP(n){let e=le.useContext(Qv);return e||un(!1),e}function dP(n){let e=le.useContext(rP);return e||un(!1),e}function pP(n){let e=le.useContext(Ua);return e||un(!1),e}function _I(n){let e=pP(),r=e.matches[e.matches.length-1];return r.route.id||un(!1),r.route.id}function mP(){var n;let e=le.useContext(pI),r=dP(),i=_I();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function gP(){let{router:n}=fP(yI.UseNavigateStable),e=_I(vI.UseNavigateStable),r=le.useRef(!1);return mI(()=>{r.current=!0}),le.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Wc({fromRouteId:e},o)))},[n,e])}const Lw={};function yP(n,e,r){Lw[n]||(Lw[n]=!0)}function vP(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Di(n){un(!1)}function _P(n){let{basename:e="/",children:r=null,location:i,navigationType:s=lo.Pop,navigator:o,static:a=!1,future:l}=n;Ip()&&un(!1);let u=e.replace(/^\/*/,"/"),c=le.useMemo(()=>({basename:u,navigator:o,static:a,future:Wc({v7_relativeSplatPath:!1},l)}),[u,l,o,a]);typeof i=="string"&&(i=Fa(i));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:w="default"}=i,b=le.useMemo(()=>{let S=fI(h,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:v,key:w},navigationType:s}},[u,h,p,m,v,w,s]);return b==null?null:le.createElement(Ep.Provider,{value:c},le.createElement(Tp.Provider,{children:r,value:b}))}function Vw(n){let{children:e,location:r}=n;return sP(ry(e),r)}new Promise(()=>{});function ry(n,e){e===void 0&&(e=[]);let r=[];return le.Children.forEach(n,(i,s)=>{if(!le.isValidElement(i))return;let o=[...e,s];if(i.type===le.Fragment){r.push.apply(r,ry(i.props.children,o));return}i.type!==Di&&un(!1),!i.props.index||!i.props.children||un(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ry(i.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const wP="6";try{window.__reactRouterVersion=wP}catch{}const xP="startTransition",Fw=gA[xP];function bP(n){let{basename:e,children:r,future:i,window:s}=n,o=le.useRef();o.current==null&&(o.current=kR({window:s,v5Compat:!0}));let a=o.current,[l,u]=le.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},h=le.useCallback(p=>{c&&Fw?Fw(()=>u(p)):u(p)},[u,c]);return le.useLayoutEffect(()=>a.listen(h),[a,h]),le.useEffect(()=>vP(i),[i]),le.createElement(_P,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:i})}var Uw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Uw||(Uw={}));var zw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(zw||(zw={}));var EP=Object.defineProperty,Id=Object.getOwnPropertySymbols,wI=Object.prototype.hasOwnProperty,xI=Object.prototype.propertyIsEnumerable,$w=(n,e,r)=>e in n?EP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,iy=(n,e)=>{for(var r in e||(e={}))wI.call(e,r)&&$w(n,r,e[r]);if(Id)for(var r of Id(e))xI.call(e,r)&&$w(n,r,e[r]);return n},sy=(n,e)=>{var r={};for(var i in n)wI.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&Id)for(var i of Id(n))e.indexOf(i)<0&&xI.call(n,i)&&(r[i]=n[i]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Aa;(n=>{const e=class et{constructor(u,c,h,p){if(this.version=u,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],u<et.MIN_VERSION||u>et.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let m=[];for(let w=0;w<this.size;w++)m.push(!1);for(let w=0;w<this.size;w++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(h);if(this.drawCodewords(v),p==-1){let w=1e9;for(let b=0;b<8;b++){this.applyMask(b),this.drawFormatBits(b);const S=this.getPenaltyScore();S<w&&(p=b,w=S),this.applyMask(b)}}s(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(u,c){const h=n.QrSegment.makeSegments(u);return et.encodeSegments(h,c)}static encodeBinary(u,c){const h=n.QrSegment.makeBytes(u);return et.encodeSegments([h],c)}static encodeSegments(u,c,h=1,p=40,m=-1,v=!0){if(!(et.MIN_VERSION<=h&&h<=p&&p<=et.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let w,b;for(w=h;;w++){const R=et.getNumDataCodewords(w,c)*8,P=a.getTotalBits(u,w);if(P<=R){b=P;break}if(w>=p)throw new RangeError("Data too long")}for(const R of[et.Ecc.MEDIUM,et.Ecc.QUARTILE,et.Ecc.HIGH])v&&b<=et.getNumDataCodewords(w,R)*8&&(c=R);let S=[];for(const R of u){r(R.mode.modeBits,4,S),r(R.numChars,R.mode.numCharCountBits(w),S);for(const P of R.getData())S.push(P)}s(S.length==b);const E=et.getNumDataCodewords(w,c)*8;s(S.length<=E),r(0,Math.min(4,E-S.length),S),r(0,(8-S.length%8)%8,S),s(S.length%8==0);for(let R=236;S.length<E;R^=253)r(R,8,S);let I=[];for(;I.length*8<S.length;)I.push(0);return S.forEach((R,P)=>I[P>>>3]|=R<<7-(P&7)),new et(w,c,I,m)}getModule(u,c){return 0<=u&&u<this.size&&0<=c&&c<this.size&&this.modules[c][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),c=u.length;for(let h=0;h<c;h++)for(let p=0;p<c;p++)h==0&&p==0||h==0&&p==c-1||h==c-1&&p==0||this.drawAlignmentPattern(u[h],u[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const c=this.errorCorrectionLevel.formatBits<<3|u;let h=c;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const p=(c<<10|h)^21522;s(p>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,i(p,m));this.setFunctionModule(8,7,i(p,6)),this.setFunctionModule(8,8,i(p,7)),this.setFunctionModule(7,8,i(p,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,i(p,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,i(p,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,i(p,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let h=0;h<12;h++)u=u<<1^(u>>>11)*7973;const c=this.version<<12|u;s(c>>>18==0);for(let h=0;h<18;h++){const p=i(c,h),m=this.size-11+h%3,v=Math.floor(h/3);this.setFunctionModule(m,v,p),this.setFunctionModule(v,m,p)}}drawFinderPattern(u,c){for(let h=-4;h<=4;h++)for(let p=-4;p<=4;p++){const m=Math.max(Math.abs(p),Math.abs(h)),v=u+p,w=c+h;0<=v&&v<this.size&&0<=w&&w<this.size&&this.setFunctionModule(v,w,m!=2&&m!=4)}}drawAlignmentPattern(u,c){for(let h=-2;h<=2;h++)for(let p=-2;p<=2;p++)this.setFunctionModule(u+p,c+h,Math.max(Math.abs(p),Math.abs(h))!=1)}setFunctionModule(u,c,h){this.modules[c][u]=h,this.isFunction[c][u]=!0}addEccAndInterleave(u){const c=this.version,h=this.errorCorrectionLevel;if(u.length!=et.getNumDataCodewords(c,h))throw new RangeError("Invalid argument");const p=et.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][c],m=et.ECC_CODEWORDS_PER_BLOCK[h.ordinal][c],v=Math.floor(et.getNumRawDataModules(c)/8),w=p-v%p,b=Math.floor(v/p);let S=[];const E=et.reedSolomonComputeDivisor(m);for(let R=0,P=0;R<p;R++){let M=u.slice(P,P+b-m+(R<w?0:1));P+=M.length;const L=et.reedSolomonComputeRemainder(M,E);R<w&&M.push(0),S.push(M.concat(L))}let I=[];for(let R=0;R<S[0].length;R++)S.forEach((P,M)=>{(R!=b-m||M>=w)&&I.push(P[R])});return s(I.length==v),I}drawCodewords(u){if(u.length!=Math.floor(et.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let p=0;p<this.size;p++)for(let m=0;m<2;m++){const v=h-m,b=(h+1&2)==0?this.size-1-p:p;!this.isFunction[b][v]&&c<u.length*8&&(this.modules[b][v]=i(u[c>>>3],7-(c&7)),c++)}}s(c==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let h=0;h<this.size;h++){let p;switch(u){case 0:p=(h+c)%2==0;break;case 1:p=c%2==0;break;case 2:p=h%3==0;break;case 3:p=(h+c)%3==0;break;case 4:p=(Math.floor(h/3)+Math.floor(c/2))%2==0;break;case 5:p=h*c%2+h*c%3==0;break;case 6:p=(h*c%2+h*c%3)%2==0;break;case 7:p=((h+c)%2+h*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][h]&&p&&(this.modules[c][h]=!this.modules[c][h])}}getPenaltyScore(){let u=0;for(let m=0;m<this.size;m++){let v=!1,w=0,b=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[m][S]==v?(w++,w==5?u+=et.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,b),v||(u+=this.finderPenaltyCountPatterns(b)*et.PENALTY_N3),v=this.modules[m][S],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,b)*et.PENALTY_N3}for(let m=0;m<this.size;m++){let v=!1,w=0,b=[0,0,0,0,0,0,0];for(let S=0;S<this.size;S++)this.modules[S][m]==v?(w++,w==5?u+=et.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,b),v||(u+=this.finderPenaltyCountPatterns(b)*et.PENALTY_N3),v=this.modules[S][m],w=1);u+=this.finderPenaltyTerminateAndCount(v,w,b)*et.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let v=0;v<this.size-1;v++){const w=this.modules[m][v];w==this.modules[m][v+1]&&w==this.modules[m+1][v]&&w==this.modules[m+1][v+1]&&(u+=et.PENALTY_N2)}let c=0;for(const m of this.modules)c=m.reduce((v,w)=>v+(w?1:0),c);const h=this.size*this.size,p=Math.ceil(Math.abs(c*20-h*10)/h)-1;return s(0<=p&&p<=9),u+=p*et.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let h=[6];for(let p=this.size-7;h.length<u;p-=c)h.splice(1,0,p);return h}}static getNumRawDataModules(u){if(u<et.MIN_VERSION||u>et.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*u+128)*u+64;if(u>=2){const h=Math.floor(u/7)+2;c-=(25*h-10)*h-55,u>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(u,c){return Math.floor(et.getNumRawDataModules(u)/8)-et.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u]*et.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let c=[];for(let p=0;p<u-1;p++)c.push(0);c.push(1);let h=1;for(let p=0;p<u;p++){for(let m=0;m<c.length;m++)c[m]=et.reedSolomonMultiply(c[m],h),m+1<c.length&&(c[m]^=c[m+1]);h=et.reedSolomonMultiply(h,2)}return c}static reedSolomonComputeRemainder(u,c){let h=c.map(p=>0);for(const p of u){const m=p^h.shift();h.push(0),c.forEach((v,w)=>h[w]^=et.reedSolomonMultiply(v,m))}return h}static reedSolomonMultiply(u,c){if(u>>>8||c>>>8)throw new RangeError("Byte out of range");let h=0;for(let p=7;p>=0;p--)h=h<<1^(h>>>7)*285,h^=(c>>>p&1)*u;return s(h>>>8==0),h}finderPenaltyCountPatterns(u){const c=u[1];s(c<=this.size*3);const h=c>0&&u[2]==c&&u[3]==c*3&&u[4]==c&&u[5]==c;return(h&&u[0]>=c*4&&u[6]>=c?1:0)+(h&&u[6]>=c*4&&u[0]>=c?1:0)}finderPenaltyTerminateAndCount(u,c,h){return u&&(this.finderPenaltyAddHistory(c,h),c=0),c+=this.size,this.finderPenaltyAddHistory(c,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(u,c){c[0]==0&&(u+=this.size),c.pop(),c.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function r(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let h=u-1;h>=0;h--)c.push(l>>>h&1)}function i(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const o=class Bt{constructor(u,c,h){if(this.mode=u,this.numChars=c,this.bitData=h,c<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(u){let c=[];for(const h of u)r(h,8,c);return new Bt(Bt.Mode.BYTE,u.length,c)}static makeNumeric(u){if(!Bt.isNumeric(u))throw new RangeError("String contains non-numeric characters");let c=[];for(let h=0;h<u.length;){const p=Math.min(u.length-h,3);r(parseInt(u.substring(h,h+p),10),p*3+1,c),h+=p}return new Bt(Bt.Mode.NUMERIC,u.length,c)}static makeAlphanumeric(u){if(!Bt.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],h;for(h=0;h+2<=u.length;h+=2){let p=Bt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h))*45;p+=Bt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h+1)),r(p,11,c)}return h<u.length&&r(Bt.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h)),6,c),new Bt(Bt.Mode.ALPHANUMERIC,u.length,c)}static makeSegments(u){return u==""?[]:Bt.isNumeric(u)?[Bt.makeNumeric(u)]:Bt.isAlphanumeric(u)?[Bt.makeAlphanumeric(u)]:[Bt.makeBytes(Bt.toUtf8ByteArray(u))]}static makeEci(u){let c=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,c);else if(u<16384)r(2,2,c),r(u,14,c);else if(u<1e6)r(6,3,c),r(u,21,c);else throw new RangeError("ECI assignment value out of range");return new Bt(Bt.Mode.ECI,0,c)}static isNumeric(u){return Bt.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Bt.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,c){let h=0;for(const p of u){const m=p.mode.numCharCountBits(c);if(p.numChars>=1<<m)return 1/0;h+=4+m+p.bitData.length}return h}static toUtf8ByteArray(u){u=encodeURI(u);let c=[];for(let h=0;h<u.length;h++)u.charAt(h)!="%"?c.push(u.charCodeAt(h)):(c.push(parseInt(u.substring(h+1,h+3),16)),h+=2);return c}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;n.QrSegment=o})(Aa||(Aa={}));(n=>{(e=>{const r=class{constructor(s,o){this.ordinal=s,this.formatBits=o}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(n.QrCode||(n.QrCode={}))})(Aa||(Aa={}));(n=>{(e=>{const r=class{constructor(s,o){this.modeBits=s,this.numBitsCharCount=o}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(n.QrSegment||(n.QrSegment={}))})(Aa||(Aa={}));var Cl=Aa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var TP={L:Cl.QrCode.Ecc.LOW,M:Cl.QrCode.Ecc.MEDIUM,Q:Cl.QrCode.Ecc.QUARTILE,H:Cl.QrCode.Ecc.HIGH},bI=128,EI="L",TI="#FFFFFF",II="#000000",SI=!1,CI=1,IP=4,SP=0,CP=.1;function kI(n,e=0){const r=[];return n.forEach(function(i,s){let o=null;i.forEach(function(a,l){if(!a&&o!==null){r.push(`M${o+e} ${s+e}h${l-o}v1H${o+e}z`),o=null;return}if(l===i.length-1){if(!a)return;o===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${o+e},${s+e} h${l+1-o}v1H${o+e}z`);return}a&&o===null&&(o=l)})}),r.join("")}function AI(n,e){return n.slice().map((r,i)=>i<e.y||i>=e.y+e.h?r:r.map((s,o)=>o<e.x||o>=e.x+e.w?s:!1))}function kP(n,e,r,i){if(i==null)return null;const s=n.length+r*2,o=Math.floor(e*CP),a=s/e,l=(i.width||o)*a,u=(i.height||o)*a,c=i.x==null?n.length/2-l/2:i.x*a,h=i.y==null?n.length/2-u/2:i.y*a,p=i.opacity==null?1:i.opacity;let m=null;if(i.excavate){let w=Math.floor(c),b=Math.floor(h),S=Math.ceil(l+c-w),E=Math.ceil(u+h-b);m={x:w,y:b,w:S,h:E}}const v=i.crossOrigin;return{x:c,y:h,h:u,w:l,excavation:m,opacity:p,crossOrigin:v}}function AP(n,e){return e!=null?Math.max(Math.floor(e),0):n?IP:SP}function NI({value:n,level:e,minVersion:r,includeMargin:i,marginSize:s,imageSettings:o,size:a,boostLevel:l}){let u=yt.useMemo(()=>{const w=(Array.isArray(n)?n:[n]).reduce((b,S)=>(b.push(...Cl.QrSegment.makeSegments(S)),b),[]);return Cl.QrCode.encodeSegments(w,TP[e],r,void 0,void 0,l)},[n,e,r,l]);const{cells:c,margin:h,numCells:p,calculatedImageSettings:m}=yt.useMemo(()=>{let v=u.getModules();const w=AP(i,s),b=v.length+w*2,S=kP(v,a,w,o);return{cells:v,margin:w,numCells:b,calculatedImageSettings:S}},[u,a,o,i,s]);return{qrcode:u,margin:h,cells:c,numCells:p,calculatedImageSettings:m}}var NP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),RP=yt.forwardRef(function(e,r){const i=e,{value:s,size:o=bI,level:a=EI,bgColor:l=TI,fgColor:u=II,includeMargin:c=SI,minVersion:h=CI,boostLevel:p,marginSize:m,imageSettings:v}=i,b=sy(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:S}=b,E=sy(b,["style"]),I=v==null?void 0:v.src,R=yt.useRef(null),P=yt.useRef(null),M=yt.useCallback(F=>{R.current=F,typeof r=="function"?r(F):r&&(r.current=F)},[r]),[L,k]=yt.useState(!1),{margin:C,cells:D,numCells:V,calculatedImageSettings:U}=NI({value:s,level:a,minVersion:h,boostLevel:p,includeMargin:c,marginSize:m,imageSettings:v,size:o});yt.useEffect(()=>{if(R.current!=null){const F=R.current,Z=F.getContext("2d");if(!Z)return;let ee=D;const fe=P.current,re=U!=null&&fe!==null&&fe.complete&&fe.naturalHeight!==0&&fe.naturalWidth!==0;re&&U.excavation!=null&&(ee=AI(D,U.excavation));const ue=window.devicePixelRatio||1;F.height=F.width=o*ue;const de=o/V*ue;Z.scale(de,de),Z.fillStyle=l,Z.fillRect(0,0,V,V),Z.fillStyle=u,NP?Z.fill(new Path2D(kI(ee,C))):D.forEach(function(Ie,ce){Ie.forEach(function(Ne,Pe){Ne&&Z.fillRect(Pe+C,ce+C,1,1)})}),U&&(Z.globalAlpha=U.opacity),re&&Z.drawImage(fe,U.x+C,U.y+C,U.w,U.h)}}),yt.useEffect(()=>{k(!1)},[I]);const B=iy({height:o,width:o},S);let j=null;return I!=null&&(j=yt.createElement("img",{src:I,key:I,style:{display:"none"},onLoad:()=>{k(!0)},ref:P,crossOrigin:U==null?void 0:U.crossOrigin})),yt.createElement(yt.Fragment,null,yt.createElement("canvas",iy({style:B,height:o,width:o,ref:M,role:"img"},E)),j)});RP.displayName="QRCodeCanvas";var Xv=yt.forwardRef(function(e,r){const i=e,{value:s,size:o=bI,level:a=EI,bgColor:l=TI,fgColor:u=II,includeMargin:c=SI,minVersion:h=CI,boostLevel:p,title:m,marginSize:v,imageSettings:w}=i,b=sy(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:S,cells:E,numCells:I,calculatedImageSettings:R}=NI({value:s,level:a,minVersion:h,boostLevel:p,includeMargin:c,marginSize:v,imageSettings:w,size:o});let P=E,M=null;w!=null&&R!=null&&(R.excavation!=null&&(P=AI(E,R.excavation)),M=yt.createElement("image",{href:w.src,height:R.h,width:R.w,x:R.x+S,y:R.y+S,preserveAspectRatio:"none",opacity:R.opacity,crossOrigin:R.crossOrigin}));const L=kI(P,S);return yt.createElement("svg",iy({height:o,width:o,viewBox:`0 0 ${I} ${I}`,ref:r,role:"img"},b),!!m&&yt.createElement("title",null,m),yt.createElement("path",{fill:l,d:`M0,0 h${I}v${I}H0z`,shapeRendering:"crispEdges"}),yt.createElement("path",{fill:u,d:L,shapeRendering:"crispEdges"}),M)});Xv.displayName="QRCodeSVG";var Bw;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(Bw||(Bw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qw;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(qw||(qw={}));var Hw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Hw||(Hw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=["user","model","function","system"];var Ww;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Ww||(Ww={}));var Gw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Gw||(Gw={}));var Qw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Qw||(Qw={}));var Yw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Yw||(Yw={}));var _c;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(_c||(_c={}));var Xw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Xw||(Xw={}));var Jw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Jw||(Jw={}));var Zw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Zw||(Zw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ll extends Dn{constructor(e,r){super(e),this.response=r}}class RI extends Dn{constructor(e,r,i,s){super(e),this.status=r,this.statusText=i,this.errorDetails=s}}class _o extends Dn{}class PI extends Dn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="https://generativelanguage.googleapis.com",OP="v1beta",jP="0.24.1",DP="genai-js";var Na;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Na||(Na={}));class MP{constructor(e,r,i,s,o){this.model=e,this.task=r,this.apiKey=i,this.stream=s,this.requestOptions=o}toString(){var e,r;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||OP;let o=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||PP}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function LP(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${DP}/${jP}`),e.join(" ")}async function VP(n){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",LP(n.requestOptions)),r.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new _o(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,o]of i.entries()){if(s==="x-goog-api-key")throw new _o(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new _o(`Header name ${s} can only be set using the apiClient field`);r.append(s,o)}}return r}async function FP(n,e,r,i,s,o){const a=new MP(n,e,r,i,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},BP(o)),{method:"POST",headers:await VP(a),body:s})}}async function gh(n,e,r,i,s,o={},a=fetch){const{url:l,fetchOptions:u}=await FP(n,e,r,i,s,o);return UP(l,u,a)}async function UP(n,e,r=fetch){let i;try{i=await r(n,e)}catch(s){zP(s,n)}return i.ok||await $P(i,n),i}function zP(n,e){let r=n;throw r.name==="AbortError"?(r=new PI(`Request aborted when fetching ${e.toString()}: ${n.message}`),r.stack=n.stack):n instanceof RI||n instanceof _o||(r=new Dn(`Error fetching from ${e.toString()}: ${n.message}`),r.stack=n.stack),r}async function $P(n,e){let r="",i;try{const s=await n.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new RI(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${r}`,n.status,n.statusText,i)}function BP(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const r=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>r.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Df(n.candidates[0]))throw new ll(`${Zs(n)}`,n);return qP(n)}else if(n.promptFeedback)throw new ll(`Text not available. ${Zs(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Df(n.candidates[0]))throw new ll(`${Zs(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ex(n)[0]}else if(n.promptFeedback)throw new ll(`Function call not available. ${Zs(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Df(n.candidates[0]))throw new ll(`${Zs(n)}`,n);return ex(n)}else if(n.promptFeedback)throw new ll(`Function call not available. ${Zs(n)}`,n)},n}function qP(n){var e,r,i,s;const o=[];if(!((r=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function ex(n){var e,r,i,s;const o=[];if(!((r=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const a of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const HP=[_c.RECITATION,_c.SAFETY,_c.LANGUAGE];function Df(n){return!!n.finishReason&&HP.includes(n.finishReason)}function Zs(n){var e,r,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((r=n.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const o=n.candidates[0];Df(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function Gc(n){return this instanceof Gc?(this.v=n,this):new Gc(n)}function KP(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,e||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(m){i[m]&&(s[m]=function(v){return new Promise(function(w,b){o.push([m,v,w,b])>1||l(m,v)})})}function l(m,v){try{u(i[m](v))}catch(w){p(o[0][3],w)}}function u(m){m.value instanceof Gc?Promise.resolve(m.value.v).then(c,h):p(o[0][2],m)}function c(m){l("next",m)}function h(m){l("throw",m)}function p(m,v){m(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function WP(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=YP(e),[i,s]=r.tee();return{stream:QP(i),response:GP(s)}}async function GP(n){const e=[],r=n.getReader();for(;;){const{done:i,value:s}=await r.read();if(i)return Jv(XP(e));e.push(s)}}function QP(n){return KP(this,arguments,function*(){const r=n.getReader();for(;;){const{value:i,done:s}=yield Gc(r.read());if(s)break;yield yield Gc(Jv(i))}})}function YP(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return o();function o(){return e.read().then(({value:a,done:l})=>{if(l){if(s.trim()){i.error(new Dn("Failed to parse stream"));return}i.close();return}s+=a;let u=s.match(tx),c;for(;u;){try{c=JSON.parse(u[1])}catch{i.error(new Dn(`Error parsing JSON response: "${u[1]}"`));return}i.enqueue(c),s=s.substring(u[0].length),u=s.match(tx)}return o()}).catch(a=>{let l=a;throw l.stack=a.stack,l.name==="AbortError"?l=new PI("Request aborted when reading from the stream"):l=new Dn("Error reading from the stream"),l})}}})}function XP(n){const e=n[n.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const o of i.candidates)if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:s}),r.candidates[s].citationMetadata=o.citationMetadata,r.candidates[s].groundingMetadata=o.groundingMetadata,r.candidates[s].finishReason=o.finishReason,r.candidates[s].finishMessage=o.finishMessage,r.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){r.candidates[s].content||(r.candidates[s].content={role:o.content.role||"user",parts:[]});const a={};for(const l of o.content.parts)l.text&&(a.text=l.text),l.functionCall&&(a.functionCall=l.functionCall),l.executableCode&&(a.executableCode=l.executableCode),l.codeExecutionResult&&(a.codeExecutionResult=l.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[s].content.parts.push(a)}s++}i.usageMetadata&&(r.usageMetadata=i.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(n,e,r,i){const s=await gh(e,Na.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(r),i);return WP(s)}async function jI(n,e,r,i){const o=await(await gh(e,Na.GENERATE_CONTENT,n,!1,JSON.stringify(r),i)).json();return{response:Jv(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Qc(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const r of n)typeof r=="string"?e.push({text:r}):e.push(r);return JP(e)}function JP(n){const e={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,s=!1;for(const o of n)"functionResponse"in o?(r.parts.push(o),s=!0):(e.parts.push(o),i=!0);if(i&&s)throw new Dn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new Dn("No content is provided for sending chat message.");return i?e:r}function ZP(n,e){var r;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new _o("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const o=Qc(n);i.contents=[o]}return{generateContentRequest:i}}function nx(n){let e;return n.contents?e=n:e={contents:[Qc(n)]},n.systemInstruction&&(e.systemInstruction=DI(n.systemInstruction)),e}function eO(n){return typeof n=="string"||Array.isArray(n)?{content:Qc(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],tO={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function nO(n){let e=!1;for(const r of n){const{role:i,parts:s}=r;if(!e&&i!=="user")throw new Dn(`First content should be with role 'user', got ${i}`);if(!Kw.includes(i))throw new Dn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(Kw)}`);if(!Array.isArray(s))throw new Dn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Dn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of s)for(const u of rx)u in l&&(o[u]+=1);const a=tO[i];for(const l of rx)if(!a.includes(l)&&o[l]>0)throw new Dn(`Content with role '${i}' can't contain '${l}' part`);e=!0}}function ix(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const r=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const i of r.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="SILENT_ERROR";class rO{constructor(e,r,i,s={}){this.model=r,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(nO(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var i,s,o,a,l,u;await this._sendPromise;const c=Qc(e),h={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,c]},p=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>jI(this._apiKey,this.model,h,p)).then(v=>{var w;if(ix(v.response)){this._history.push(c);const b=Object.assign({parts:[],role:"model"},(w=v.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(b)}else{const b=Zs(v.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}m=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,m}async sendMessageStream(e,r={}){var i,s,o,a,l,u;await this._sendPromise;const c=Qc(e),h={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(u=this.params)===null||u===void 0?void 0:u.cachedContent,contents:[...this._history,c]},p=Object.assign(Object.assign({},this._requestOptions),r),m=OI(this._apiKey,this.model,h,p);return this._sendPromise=this._sendPromise.then(()=>m).catch(v=>{throw new Error(sx)}).then(v=>v.response).then(v=>{if(ix(v)){this._history.push(c);const w=Object.assign({},v.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=Zs(v);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(v=>{v.message!==sx&&console.error(v)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(n,e,r,i){return(await gh(e,Na.COUNT_TOKENS,n,!1,JSON.stringify(r),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(n,e,r,i){return(await gh(e,Na.EMBED_CONTENT,n,!1,JSON.stringify(r),i)).json()}async function oO(n,e,r,i){const s=r.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await gh(e,Na.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,r,i={}){this.apiKey=e,this._requestOptions=i,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=DI(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var i;const s=nx(e),o=Object.assign(Object.assign({},this._requestOptions),r);return jI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}async generateContentStream(e,r={}){var i;const s=nx(e),o=Object.assign(Object.assign({},this._requestOptions),r);return OI(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),o)}startChat(e){var r;return new rO(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const i=ZP(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return iO(this.apiKey,this.model,i,s)}async embedContent(e,r={}){const i=eO(e),s=Object.assign(Object.assign({},this._requestOptions),r);return sO(this.apiKey,this.model,i,s)}async batchEmbedContents(e,r={}){const i=Object.assign(Object.assign({},this._requestOptions),r);return oO(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Dn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ox(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,i){if(!e.name)throw new _o("Cached content must contain a `name` field.");if(!e.model)throw new _o("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(r!=null&&r[a]&&e[a]&&(r==null?void 0:r[a])!==e[a]){if(a==="model"){const l=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(l===u)continue}throw new _o(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new ox(this.apiKey,o,i)}}var MI={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(b_,function(){var r=function(d,g){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var N in T)Object.prototype.hasOwnProperty.call(T,N)&&(_[N]=T[N])})(d,g)},i=function(){return(i=Object.assign||function(d){for(var g,_=1,T=arguments.length;_<T;_++)for(var N in g=arguments[_])Object.prototype.hasOwnProperty.call(g,N)&&(d[N]=g[N]);return d}).apply(this,arguments)};function s(d,g,_){for(var T,N=0,O=g.length;N<O;N++)!T&&N in g||((T=T||Array.prototype.slice.call(g,0,N))[N]=g[N]);return d.concat(T||Array.prototype.slice.call(g))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:b_,a=Object.keys,l=Array.isArray;function u(d,g){return typeof g!="object"||a(g).forEach(function(_){d[_]=g[_]}),d}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,h={}.hasOwnProperty;function p(d,g){return h.call(d,g)}function m(d,g){typeof g=="function"&&(g=g(c(d))),(typeof Reflect>"u"?a:Reflect.ownKeys)(g).forEach(function(_){w(d,_,g[_])})}var v=Object.defineProperty;function w(d,g,_,T){v(d,g,u(_&&p(_,"get")&&typeof _.get=="function"?{get:_.get,set:_.set,configurable:!0}:{value:_,configurable:!0,writable:!0},T))}function b(d){return{from:function(g){return d.prototype=Object.create(g.prototype),w(d.prototype,"constructor",d),{extend:m.bind(null,d.prototype)}}}}var S=Object.getOwnPropertyDescriptor,E=[].slice;function I(d,g,_){return E.call(d,g,_)}function R(d,g){return g(d)}function P(d){if(!d)throw new Error("Assertion Failed")}function M(d){o.setImmediate?setImmediate(d):setTimeout(d,0)}function L(d,g){if(typeof g=="string"&&p(d,g))return d[g];if(!g)return d;if(typeof g!="string"){for(var _=[],T=0,N=g.length;T<N;++T){var O=L(d,g[T]);_.push(O)}return _}var $=g.indexOf(".");if($!==-1){var q=d[g.substr(0,$)];return q==null?void 0:L(q,g.substr($+1))}}function k(d,g,_){if(d&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof g!="string"&&"length"in g){P(typeof _!="string"&&"length"in _);for(var T=0,N=g.length;T<N;++T)k(d,g[T],_[T])}else{var O,$,q=g.indexOf(".");q!==-1?(O=g.substr(0,q),($=g.substr(q+1))===""?_===void 0?l(d)&&!isNaN(parseInt(O))?d.splice(O,1):delete d[O]:d[O]=_:k(q=!(q=d[O])||!p(d,O)?d[O]={}:q,$,_)):_===void 0?l(d)&&!isNaN(parseInt(g))?d.splice(g,1):delete d[g]:d[g]=_}}function C(d){var g,_={};for(g in d)p(d,g)&&(_[g]=d[g]);return _}var D=[].concat;function V(d){return D.apply([],d)}var Sr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(V([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(g){return g+d+"Array"})}))).filter(function(d){return o[d]}),U=new Set(Sr.map(function(d){return o[d]})),B=null;function j(d){return B=new WeakMap,d=function g(_){if(!_||typeof _!="object")return _;var T=B.get(_);if(T)return T;if(l(_)){T=[],B.set(_,T);for(var N=0,O=_.length;N<O;++N)T.push(g(_[N]))}else if(U.has(_.constructor))T=_;else{var $,q=c(_);for($ in T=q===Object.prototype?{}:Object.create(q),B.set(_,T),_)p(_,$)&&(T[$]=g(_[$]))}return T}(d),B=null,d}var F={}.toString;function Z(d){return F.call(d).slice(8,-1)}var ee=typeof Symbol<"u"?Symbol.iterator:"@@iterator",fe=typeof ee=="symbol"?function(d){var g;return d!=null&&(g=d[ee])&&g.apply(d)}:function(){return null};function re(d,g){return g=d.indexOf(g),0<=g&&d.splice(g,1),0<=g}var ue={};function de(d){var g,_,T,N;if(arguments.length===1){if(l(d))return d.slice();if(this===ue&&typeof d=="string")return[d];if(N=fe(d)){for(_=[];!(T=N.next()).done;)_.push(T.value);return _}if(d==null)return[d];if(typeof(g=d.length)!="number")return[d];for(_=new Array(g);g--;)_[g]=d[g];return _}for(g=arguments.length,_=new Array(g);g--;)_[g]=arguments[g];return _}var Ie=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Yn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Or=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Yn),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ne(d,g){this.name=d,this.message=g}function Pe(d,g){return d+". Errors: "+Object.keys(g).map(function(_){return g[_].toString()}).filter(function(_,T,N){return N.indexOf(_)===T}).join(`
`)}function Me(d,g,_,T){this.failures=g,this.failedKeys=T,this.successCount=_,this.message=Pe(d,g)}function Ge(d,g){this.name="BulkError",this.failures=Object.keys(g).map(function(_){return g[_]}),this.failuresByPos=g,this.message=Pe(d,this.failures)}b(Ne).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(Me).from(Ne),b(Ge).from(Ne);var Be=Or.reduce(function(d,g){return d[g]=g+"Error",d},{}),Xt=Ne,Le=Or.reduce(function(d,g){var _=g+"Error";function T(N,O){this.name=_,N?typeof N=="string"?(this.message="".concat(N).concat(O?`
 `+O:""),this.inner=O||null):typeof N=="object"&&(this.message="".concat(N.name," ").concat(N.message),this.inner=N):(this.message=ce[g]||_,this.inner=null)}return b(T).from(Xt),d[g]=T,d},{});Le.Syntax=SyntaxError,Le.Type=TypeError,Le.Range=RangeError;var _u=Yn.reduce(function(d,g){return d[g+"Error"]=Le[g],d},{}),zo=Or.reduce(function(d,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(d[g+"Error"]=Le[g]),d},{});function Je(){}function or(d){return d}function Ha(d,g){return d==null||d===or?g:function(_){return g(d(_))}}function Gr(d,g){return function(){d.apply(this,arguments),g.apply(this,arguments)}}function Se(d,g){return d===Je?g:function(){var _=d.apply(this,arguments);_!==void 0&&(arguments[0]=_);var T=this.onsuccess,N=this.onerror;this.onsuccess=null,this.onerror=null;var O=g.apply(this,arguments);return T&&(this.onsuccess=this.onsuccess?Gr(T,this.onsuccess):T),N&&(this.onerror=this.onerror?Gr(N,this.onerror):N),O!==void 0?O:_}}function Ye(d,g){return d===Je?g:function(){d.apply(this,arguments);var _=this.onsuccess,T=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),_&&(this.onsuccess=this.onsuccess?Gr(_,this.onsuccess):_),T&&(this.onerror=this.onerror?Gr(T,this.onerror):T)}}function Ft(d,g){return d===Je?g:function(_){var T=d.apply(this,arguments);u(_,T);var N=this.onsuccess,O=this.onerror;return this.onsuccess=null,this.onerror=null,_=g.apply(this,arguments),N&&(this.onsuccess=this.onsuccess?Gr(N,this.onsuccess):N),O&&(this.onerror=this.onerror?Gr(O,this.onerror):O),T===void 0?_===void 0?void 0:_:u(T,_)}}function ht(d,g){return d===Je?g:function(){return g.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function Ut(d,g){return d===Je?g:function(){var _=d.apply(this,arguments);if(_&&typeof _.then=="function"){for(var T=this,N=arguments.length,O=new Array(N);N--;)O[N]=arguments[N];return _.then(function(){return g.apply(T,O)})}return g.apply(this,arguments)}}zo.ModifyError=Me,zo.DexieError=Ne,zo.BulkError=Ge;var hn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $o(d){hn=d}var En={},Tn=100,Sr=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,c(d),d];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,c(g),d]}(),Yn=Sr[0],Or=Sr[1],Sr=Sr[2],Or=Or&&Or.then,Cr=Yn&&Yn.constructor,es=!!Sr,kr=function(d,g){ur.push([d,g]),Qr&&(queueMicrotask(wu),Qr=!1)},ut=!0,Qr=!0,ar=[],zt=[],lr=or,kt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Je,pgp:!1,env:{},finalize:Je},Re=kt,ur=[],sn=0,Vn=[];function _e(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=Re;if(typeof d!="function"){if(d!==En)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Fn(this,this._value))}this._state=null,this._value=null,++g.ref,function _(T,N){try{N(function(O){if(T._state===null){if(O===T)throw new TypeError("A promise cannot be resolved with itself.");var $=T._lib&&hr();O&&typeof O.then=="function"?_(T,function(q,K){O instanceof _e?O._then(q,K):O.then(q,K)}):(T._state=!0,T._value=O,mn(T)),$&&Ms()}},Fn.bind(null,T))}catch(O){Fn(T,O)}}(this,d)}var cr={get:function(){var d=Re,g=fr;function _(T,N){var O=this,$=!d.global&&(d!==Re||g!==fr),q=$&&!Ar(),K=new _e(function(W,J){At(O,new Ot(Eu(T,d,$,q),Eu(N,d,$,q),W,J,d))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return _.prototype=En,_},set:function(d){w(this,"then",d&&d.prototype===En?cr:{get:function(){return d},set:cr.set})}};function Ot(d,g,_,T,N){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof g=="function"?g:null,this.resolve=_,this.reject=T,this.psd=N}function Fn(d,g){var _,T;zt.push(g),d._state===null&&(_=d._lib&&hr(),g=lr(g),d._state=!1,d._value=g,T=d,ar.some(function(N){return N._value===T._value})||ar.push(T),mn(d),_&&Ms())}function mn(d){var g=d._listeners;d._listeners=[];for(var _=0,T=g.length;_<T;++_)At(d,g[_]);var N=d._PSD;--N.ref||N.finalize(),sn===0&&(++sn,kr(function(){--sn==0&&xu()},[]))}function At(d,g){if(d._state!==null){var _=d._state?g.onFulfilled:g.onRejected;if(_===null)return(d._state?g.resolve:g.reject)(d._value);++g.psd.ref,++sn,kr(Ka,[_,d,g])}else d._listeners.push(g)}function Ka(d,g,_){try{var T,N=g._value;!g._state&&zt.length&&(zt=[]),T=hn&&g._consoleTask?g._consoleTask.run(function(){return d(N)}):d(N),g._state||zt.indexOf(N)!==-1||function(O){for(var $=ar.length;$;)if(ar[--$]._value===O._value)return ar.splice($,1)}(g),_.resolve(T)}catch(O){_.reject(O)}finally{--sn==0&&xu(),--_.psd.ref||_.psd.finalize()}}function wu(){Nr(kt,function(){hr()&&Ms()})}function hr(){var d=ut;return Qr=ut=!1,d}function Ms(){var d,g,_;do for(;0<ur.length;)for(d=ur,ur=[],_=d.length,g=0;g<_;++g){var T=d[g];T[0].apply(null,T[1])}while(0<ur.length);Qr=ut=!0}function xu(){var d=ar;ar=[],d.forEach(function(T){T._PSD.onunhandled.call(null,T._value,T)});for(var g=Vn.slice(0),_=g.length;_;)g[--_]()}function ts(d){return new _e(En,!1,d)}function vt(d,g){var _=Re;return function(){var T=hr(),N=Re;try{return Xr(_,!0),d.apply(this,arguments)}catch(O){g&&g(O)}finally{Xr(N,!1),T&&Ms()}}}m(_e.prototype,{then:cr,_then:function(d,g){At(this,new Ot(null,null,d,g,Re))},catch:function(d){if(arguments.length===1)return this.then(null,d);var g=d,_=arguments[1];return typeof g=="function"?this.then(null,function(T){return(T instanceof g?_:ts)(T)}):this.then(null,function(T){return(T&&T.name===g?_:ts)(T)})},finally:function(d){return this.then(function(g){return _e.resolve(d()).then(function(){return g})},function(g){return _e.resolve(d()).then(function(){return ts(g)})})},timeout:function(d,g){var _=this;return d<1/0?new _e(function(T,N){var O=setTimeout(function(){return N(new Le.Timeout(g))},d);_.then(T,N).finally(clearTimeout.bind(null,O))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(_e.prototype,Symbol.toStringTag,"Dexie.Promise"),kt.env=jh(),m(_e,{all:function(){var d=de.apply(null,arguments).map(Bo);return new _e(function(g,_){d.length===0&&g([]);var T=d.length;d.forEach(function(N,O){return _e.resolve(N).then(function($){d[O]=$,--T||g(d)},_)})})},resolve:function(d){return d instanceof _e?d:d&&typeof d.then=="function"?new _e(function(g,_){d.then(g,_)}):new _e(En,!0,d)},reject:ts,race:function(){var d=de.apply(null,arguments).map(Bo);return new _e(function(g,_){d.map(function(T){return _e.resolve(T).then(g,_)})})},PSD:{get:function(){return Re},set:function(d){return Re=d}},totalEchoes:{get:function(){return fr}},newPSD:Yr,usePSD:Nr,scheduler:{get:function(){return kr},set:function(d){kr=d}},rejectionMapper:{get:function(){return lr},set:function(d){lr=d}},follow:function(d,g){return new _e(function(_,T){return Yr(function(N,O){var $=Re;$.unhandleds=[],$.onunhandled=O,$.finalize=Gr(function(){var q,K=this;q=function(){K.unhandleds.length===0?N():O(K.unhandleds[0])},Vn.push(function W(){q(),Vn.splice(Vn.indexOf(W),1)}),++sn,kr(function(){--sn==0&&xu()},[])},$.finalize),d()},g,_,T)})}}),Cr&&(Cr.allSettled&&w(_e,"allSettled",function(){var d=de.apply(null,arguments).map(Bo);return new _e(function(g){d.length===0&&g([]);var _=d.length,T=new Array(_);d.forEach(function(N,O){return _e.resolve(N).then(function($){return T[O]={status:"fulfilled",value:$}},function($){return T[O]={status:"rejected",reason:$}}).then(function(){return--_||g(T)})})})}),Cr.any&&typeof AggregateError<"u"&&w(_e,"any",function(){var d=de.apply(null,arguments).map(Bo);return new _e(function(g,_){d.length===0&&_(new AggregateError([]));var T=d.length,N=new Array(T);d.forEach(function(O,$){return _e.resolve(O).then(function(q){return g(q)},function(q){N[$]=q,--T||_(new AggregateError(N))})})})}),Cr.withResolvers&&(_e.withResolvers=Cr.withResolvers));var Ht={awaits:0,echoes:0,id:0},bu=0,Ii=[],Wa=0,fr=0,Oh=0;function Yr(d,g,_,T){var N=Re,O=Object.create(N);return O.parent=N,O.ref=0,O.global=!1,O.id=++Oh,kt.env,O.env=es?{Promise:_e,PromiseProp:{value:_e,configurable:!0,writable:!0},all:_e.all,race:_e.race,allSettled:_e.allSettled,any:_e.any,resolve:_e.resolve,reject:_e.reject}:{},g&&u(O,g),++N.ref,O.finalize=function(){--this.parent.ref||this.parent.finalize()},T=Nr(O,d,_,T),O.ref===0&&O.finalize(),T}function Si(){return Ht.id||(Ht.id=++bu),++Ht.awaits,Ht.echoes+=Tn,Ht.id}function Ar(){return!!Ht.awaits&&(--Ht.awaits==0&&(Ht.id=0),Ht.echoes=Ht.awaits*Tn,!0)}function Bo(d){return Ht.echoes&&d&&d.constructor===Cr?(Si(),d.then(function(g){return Ar(),g},function(g){return Ar(),_t(g)})):d}function nm(){var d=Ii[Ii.length-1];Ii.pop(),Xr(d,!1)}function Xr(d,g){var _,T=Re;(g?!Ht.echoes||Wa++&&d===Re:!Wa||--Wa&&d===Re)||queueMicrotask(g?(function(N){++fr,Ht.echoes&&--Ht.echoes!=0||(Ht.echoes=Ht.awaits=Ht.id=0),Ii.push(Re),Xr(N,!0)}).bind(null,d):nm),d!==Re&&(Re=d,T===kt&&(kt.env=jh()),es&&(_=kt.env.Promise,g=d.env,(T.global||d.global)&&(Object.defineProperty(o,"Promise",g.PromiseProp),_.all=g.all,_.race=g.race,_.resolve=g.resolve,_.reject=g.reject,g.allSettled&&(_.allSettled=g.allSettled),g.any&&(_.any=g.any))))}function jh(){var d=o.Promise;return es?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Nr(d,g,_,T,N){var O=Re;try{return Xr(d,!0),g(_,T,N)}finally{Xr(O,!1)}}function Eu(d,g,_,T){return typeof d!="function"?d:function(){var N=Re;_&&Si(),Xr(g,!0);try{return d.apply(this,arguments)}finally{Xr(N,!1),T&&queueMicrotask(Ar)}}}function qo(d){Promise===Cr&&Ht.echoes===0?Wa===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Or).indexOf("[native code]")===-1&&(Si=Ar=Je);var _t=_e.reject,Un="",dr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Dh="String expected.",ns=[],Ho="__dbnames",Ga="readonly",Ko="readwrite";function Jr(d,g){return d?g?function(){return d.apply(this,arguments)&&g.apply(this,arguments)}:d:g}var Tu={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wo(d){return typeof d!="string"||/\./.test(d)?function(g){return g}:function(g){return g[d]===void 0&&d in g&&delete(g=j(g))[d],g}}function Iu(){throw Le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ze(d,g){try{var _=Zr(d),T=Zr(g);if(_!==T)return _==="Array"?1:T==="Array"?-1:_==="binary"?1:T==="binary"?-1:_==="string"?1:T==="string"?-1:_==="Date"?1:T!=="Date"?NaN:-1;switch(_){case"number":case"Date":case"string":return g<d?1:d<g?-1:0;case"binary":return function(N,O){for(var $=N.length,q=O.length,K=$<q?$:q,W=0;W<K;++W)if(N[W]!==O[W])return N[W]<O[W]?-1:1;return $===q?0:$<q?-1:1}(pr(d),pr(g));case"Array":return function(N,O){for(var $=N.length,q=O.length,K=$<q?$:q,W=0;W<K;++W){var J=Ze(N[W],O[W]);if(J!==0)return J}return $===q?0:$<q?-1:1}(d,g)}}catch{}return NaN}function Zr(d){var g=typeof d;return g!="object"?g:ArrayBuffer.isView(d)?"binary":(d=Z(d),d==="ArrayBuffer"?"binary":d)}function pr(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function Ci(d,g,_){var T=d.schema.yProps;return T?(g&&0<_.numFailures&&(g=g.filter(function(N,O){return!_.failures[O]})),Promise.all(T.map(function(N){return N=N.updatesTable,g?d.db.table(N).where("k").anyOf(g).delete():d.db.table(N).clear()})).then(function(){return _})):_}var ei=(Qa.prototype.execute=function(d){var g=this["@@propmod"];if(g.add!==void 0){var _=g.add;if(l(_))return s(s([],l(d)?d:[],!0),_).sort();if(typeof _=="number")return(Number(d)||0)+_;if(typeof _=="bigint")try{return BigInt(d)+_}catch{return BigInt(0)+_}throw new TypeError("Invalid term ".concat(_))}if(g.remove!==void 0){var T=g.remove;if(l(T))return l(d)?d.filter(function(N){return!T.includes(N)}).sort():[];if(typeof T=="number")return Number(d)-T;if(typeof T=="bigint")try{return BigInt(d)-T}catch{return BigInt(0)-T}throw new TypeError("Invalid subtrahend ".concat(T))}return _=(_=g.replacePrefix)===null||_===void 0?void 0:_[0],_&&typeof d=="string"&&d.startsWith(_)?g.replacePrefix[1]+d.substring(_.length):d},Qa);function Qa(d){this["@@propmod"]=d}function gt(d,g){for(var _=a(g),T=_.length,N=!1,O=0;O<T;++O){var $=_[O],q=g[$],K=L(d,$);q instanceof ei?(k(d,$,q.execute(K)),N=!0):K!==q&&(k(d,$,q),N=!0)}return N}var Go=(ct.prototype._trans=function(d,g,_){var T=this._tx||Re.trans,N=this.name,O=hn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function $(W,J,H){if(!H.schema[N])throw new Le.NotFound("Table "+N+" not part of transaction");return g(H.idbtrans,H)}var q=hr();try{var K=T&&T.db._novip===this.db._novip?T===Re.trans?T._promise(d,$,_):Yr(function(){return T._promise(d,$,_)},{trans:T,transless:Re.transless||Re}):function W(J,H,ne,G){if(J.idbdb&&(J._state.openComplete||Re.letThrough||J._vip)){var Y=J._createTransaction(H,ne,J._dbSchema);try{Y.create(),J._state.PR1398_maxLoop=3}catch(X){return X.name===Be.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return W(J,H,ne,G)})):_t(X)}return Y._promise(H,function(X,te){return Yr(function(){return Re.trans=Y,G(X,te,Y)})}).then(function(X){if(H==="readwrite")try{Y.idbtrans.commit()}catch{}return H==="readonly"?X:Y._completion.then(function(){return X})})}if(J._state.openComplete)return _t(new Le.DatabaseClosed(J._state.dbOpenError));if(!J._state.isBeingOpened){if(!J._state.autoOpen)return _t(new Le.DatabaseClosed);J.open().catch(Je)}return J._state.dbReadyPromise.then(function(){return W(J,H,ne,G)})}(this.db,d,[this.name],$);return O&&(K._consoleTask=O,K=K.catch(function(W){return console.trace(W),_t(W)})),K}finally{q&&Ms()}},ct.prototype.get=function(d,g){var _=this;return d&&d.constructor===Object?this.where(d).first(g):d==null?_t(new Le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(T){return _.core.get({trans:T,key:d}).then(function(N){return _.hook.reading.fire(N)})}).then(g)},ct.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(l(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var g=a(d);if(g.length===1)return this.where(g[0]).equals(d[g[0]]);var _=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&g.every(function(W){return 0<=q.keyPath.indexOf(W)})){for(var K=0;K<g.length;++K)if(g.indexOf(q.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(q,K){return q.keyPath.length-K.keyPath.length})[0];if(_&&this.db._maxKey!==Un){var O=_.keyPath.slice(0,g.length);return this.where(O).equals(O.map(function(K){return d[K]}))}!_&&hn&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var T=this.schema.idxByName;function N(q,K){return Ze(q,K)===0}var $=g.reduce(function(H,K){var W=H[0],J=H[1],H=T[K],ne=d[K];return[W||H,W||!H?Jr(J,H&&H.multi?function(G){return G=L(G,K),l(G)&&G.some(function(Y){return N(ne,Y)})}:function(G){return N(ne,L(G,K))}):J]},[null,null]),O=$[0],$=$[1];return O?this.where(O.name).equals(d[O.keyPath]).filter($):_?this.filter($):this.where(g).equals("")},ct.prototype.filter=function(d){return this.toCollection().and(d)},ct.prototype.count=function(d){return this.toCollection().count(d)},ct.prototype.offset=function(d){return this.toCollection().offset(d)},ct.prototype.limit=function(d){return this.toCollection().limit(d)},ct.prototype.each=function(d){return this.toCollection().each(d)},ct.prototype.toArray=function(d){return this.toCollection().toArray(d)},ct.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ct.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,l(d)?"[".concat(d.join("+"),"]"):d))},ct.prototype.reverse=function(){return this.toCollection().reverse()},ct.prototype.mapToClass=function(d){var g,_=this.db,T=this.name;function N(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Iu&&(function(K,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function J(){this.constructor=K}r(K,W),K.prototype=W===null?Object.create(W):(J.prototype=W.prototype,new J)}(N,g=d),Object.defineProperty(N.prototype,"db",{get:function(){return _},enumerable:!1,configurable:!0}),N.prototype.table=function(){return T},d=N);for(var O=new Set,$=d.prototype;$;$=c($))Object.getOwnPropertyNames($).forEach(function(K){return O.add(K)});function q(K){if(!K)return K;var W,J=Object.create(d.prototype);for(W in K)if(!O.has(W))try{J[W]=K[W]}catch{}return J}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=q,this.hook("reading",q),d},ct.prototype.defineClass=function(){return this.mapToClass(function(d){u(this,d)})},ct.prototype.add=function(d,g){var _=this,T=this.schema.primKey,N=T.auto,O=T.keyPath,$=d;return O&&N&&($=Wo(O)(d)),this._trans("readwrite",function(q){return _.core.mutate({trans:q,type:"add",keys:g!=null?[g]:null,values:[$]})}).then(function(q){return q.numFailures?_e.reject(q.failures[0]):q.lastResult}).then(function(q){if(O)try{k(d,O,q)}catch{}return q})},ct.prototype.upsert=function(d,g){var _=this,T=this.schema.primKey.keyPath;return this._trans("readwrite",function(N){return _.core.get({trans:N,key:d}).then(function(O){var $=O??{};return gt($,g),T&&k($,T,d),_.core.mutate({trans:N,type:"put",values:[$],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[g]}}).then(function(q){return q.numFailures?_e.reject(q.failures[0]):!!O})})})},ct.prototype.update=function(d,g){return typeof d!="object"||l(d)?this.where(":id").equals(d).modify(g):(d=L(d,this.schema.primKey.keyPath),d===void 0?_t(new Le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(g))},ct.prototype.put=function(d,g){var _=this,T=this.schema.primKey,N=T.auto,O=T.keyPath,$=d;return O&&N&&($=Wo(O)(d)),this._trans("readwrite",function(q){return _.core.mutate({trans:q,type:"put",values:[$],keys:g!=null?[g]:null})}).then(function(q){return q.numFailures?_e.reject(q.failures[0]):q.lastResult}).then(function(q){if(O)try{k(d,O,q)}catch{}return q})},ct.prototype.delete=function(d){var g=this;return this._trans("readwrite",function(_){return g.core.mutate({trans:_,type:"delete",keys:[d]}).then(function(T){return Ci(g,[d],T)}).then(function(T){return T.numFailures?_e.reject(T.failures[0]):void 0})})},ct.prototype.clear=function(){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"deleteRange",range:Tu}).then(function(_){return Ci(d,null,_)})}).then(function(g){return g.numFailures?_e.reject(g.failures[0]):void 0})},ct.prototype.bulkGet=function(d){var g=this;return this._trans("readonly",function(_){return g.core.getMany({keys:d,trans:_}).then(function(T){return T.map(function(N){return g.hook.reading.fire(N)})})})},ct.prototype.bulkAdd=function(d,g,_){var T=this,N=Array.isArray(g)?g:void 0,O=(_=_||(N?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function($){var W=T.schema.primKey,q=W.auto,W=W.keyPath;if(W&&N)throw new Le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(N&&N.length!==d.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var K=d.length,W=W&&q?d.map(Wo(W)):d;return T.core.mutate({trans:$,type:"add",keys:N,values:W,wantResults:O}).then(function(Y){var H=Y.numFailures,ne=Y.results,G=Y.lastResult,Y=Y.failures;if(H===0)return O?ne:G;throw new Ge("".concat(T.name,".bulkAdd(): ").concat(H," of ").concat(K," operations failed"),Y)})})},ct.prototype.bulkPut=function(d,g,_){var T=this,N=Array.isArray(g)?g:void 0,O=(_=_||(N?void 0:g))?_.allKeys:void 0;return this._trans("readwrite",function($){var W=T.schema.primKey,q=W.auto,W=W.keyPath;if(W&&N)throw new Le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(N&&N.length!==d.length)throw new Le.InvalidArgument("Arguments objects and keys must have the same length");var K=d.length,W=W&&q?d.map(Wo(W)):d;return T.core.mutate({trans:$,type:"put",keys:N,values:W,wantResults:O}).then(function(Y){var H=Y.numFailures,ne=Y.results,G=Y.lastResult,Y=Y.failures;if(H===0)return O?ne:G;throw new Ge("".concat(T.name,".bulkPut(): ").concat(H," of ").concat(K," operations failed"),Y)})})},ct.prototype.bulkUpdate=function(d){var g=this,_=this.core,T=d.map(function($){return $.key}),N=d.map(function($){return $.changes}),O=[];return this._trans("readwrite",function($){return _.getMany({trans:$,keys:T,cache:"clone"}).then(function(q){var K=[],W=[];d.forEach(function(H,ne){var G=H.key,Y=H.changes,X=q[ne];if(X){for(var te=0,se=Object.keys(Y);te<se.length;te++){var oe=se[te],he=Y[oe];if(oe===g.schema.primKey.keyPath){if(Ze(he,G)!==0)throw new Le.Constraint("Cannot update primary key in bulkUpdate()")}else k(X,oe,he)}O.push(ne),K.push(G),W.push(X)}});var J=K.length;return _.mutate({trans:$,type:"put",keys:K,values:W,updates:{keys:T,changeSpecs:N}}).then(function(H){var ne=H.numFailures,G=H.failures;if(ne===0)return J;for(var Y=0,X=Object.keys(G);Y<X.length;Y++){var te,se=X[Y],oe=O[Number(se)];oe!=null&&(te=G[se],delete G[se],G[oe]=te)}throw new Ge("".concat(g.name,".bulkUpdate(): ").concat(ne," of ").concat(J," operations failed"),G)})})})},ct.prototype.bulkDelete=function(d){var g=this,_=d.length;return this._trans("readwrite",function(T){return g.core.mutate({trans:T,type:"delete",keys:d}).then(function(N){return Ci(g,d,N)})}).then(function($){var N=$.numFailures,O=$.lastResult,$=$.failures;if(N===0)return O;throw new Ge("".concat(g.name,".bulkDelete(): ").concat(N," of ").concat(_," operations failed"),$)})},ct);function ct(){}function ti(d){function g($,q){if(q){for(var K=arguments.length,W=new Array(K-1);--K;)W[K-1]=arguments[K];return _[$].subscribe.apply(null,W),d}if(typeof $=="string")return _[$]}var _={};g.addEventType=O;for(var T=1,N=arguments.length;T<N;++T)O(arguments[T]);return g;function O($,q,K){if(typeof $!="object"){var W;q=q||ht;var J={subscribers:[],fire:K=K||Je,subscribe:function(H){J.subscribers.indexOf(H)===-1&&(J.subscribers.push(H),J.fire=q(J.fire,H))},unsubscribe:function(H){J.subscribers=J.subscribers.filter(function(ne){return ne!==H}),J.fire=J.subscribers.reduce(q,K)}};return _[$]=g[$]=J}a(W=$).forEach(function(H){var ne=W[H];if(l(ne))O(H,W[H][0],W[H][1]);else{if(ne!=="asap")throw new Le.InvalidArgument("Invalid event config");var G=O(H,or,function(){for(var Y=arguments.length,X=new Array(Y);Y--;)X[Y]=arguments[Y];G.subscribers.forEach(function(te){M(function(){te.apply(null,X)})})})}})}}function Qo(d,g){return b(g).from({prototype:d}),g}function rs(d,g){return!(d.filter||d.algorithm||d.or)&&(g?d.justLimit:!d.replayFilter)}function Su(d,g){d.filter=Jr(d.filter,g)}function Cu(d,g,_){var T=d.replayFilter;d.replayFilter=T?function(){return Jr(T(),g())}:g,d.justLimit=_&&!T}function Ya(d,g){if(d.isPrimKey)return g.primaryKey;var _=g.getIndexByKeyPath(d.index);if(!_)throw new Le.Schema("KeyPath "+d.index+" on object store "+g.name+" is not indexed");return _}function Mh(d,g,_){var T=Ya(d,g.schema);return g.openCursor({trans:_,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:T,range:d.range}})}function ki(d,g,_,T){var N=d.replayFilter?Jr(d.filter,d.replayFilter()):d.filter;if(d.or){var O={},$=function(q,K,W){var J,H;N&&!N(K,W,function(ne){return K.stop(ne)},function(ne){return K.fail(ne)})||((H=""+(J=K.primaryKey))=="[object ArrayBuffer]"&&(H=""+new Uint8Array(J)),p(O,H)||(O[H]=!0,g(q,K,W)))};return Promise.all([d.or._iterate($,_),Ai(Mh(d,T,_),d.algorithm,$,!d.keysOnly&&d.valueMapper)])}return Ai(Mh(d,T,_),Jr(d.algorithm,N),g,!d.keysOnly&&d.valueMapper)}function Ai(d,g,_,T){var N=vt(T?function(O,$,q){return _(T(O),$,q)}:_);return d.then(function(O){if(O)return O.start(function(){var $=function(){return O.continue()};g&&!g(O,function(q){return $=q},function(q){O.stop(q),$=Je},function(q){O.fail(q),$=Je})||N(O.value,O,function(q){return $=q}),$()})})}var Lh=(st.prototype._read=function(d,g){var _=this._ctx;return _.error?_.table._trans(null,_t.bind(null,_.error)):_.table._trans("readonly",d).then(g)},st.prototype._write=function(d){var g=this._ctx;return g.error?g.table._trans(null,_t.bind(null,g.error)):g.table._trans("readwrite",d,"locked")},st.prototype._addAlgorithm=function(d){var g=this._ctx;g.algorithm=Jr(g.algorithm,d)},st.prototype._iterate=function(d,g){return ki(this._ctx,d,g,this._ctx.table.core)},st.prototype.clone=function(d){var g=Object.create(this.constructor.prototype),_=Object.create(this._ctx);return d&&u(_,d),g._ctx=_,g},st.prototype.raw=function(){return this._ctx.valueMapper=null,this},st.prototype.each=function(d){var g=this._ctx;return this._read(function(_){return ki(g,d,_,g.table.core)})},st.prototype.count=function(d){var g=this;return this._read(function(_){var T=g._ctx,N=T.table.core;if(rs(T,!0))return N.count({trans:_,query:{index:Ya(T,N.schema),range:T.range}}).then(function($){return Math.min($,T.limit)});var O=0;return ki(T,function(){return++O,!1},_,N).then(function(){return O})}).then(d)},st.prototype.sortBy=function(d,g){var _=d.split(".").reverse(),T=_[0],N=_.length-1;function O(K,W){return W?O(K[_[W]],W-1):K[T]}var $=this._ctx.dir==="next"?1:-1;function q(K,W){return Ze(O(K,N),O(W,N))*$}return this.toArray(function(K){return K.sort(q)}).then(g)},st.prototype.toArray=function(d){var g=this;return this._read(function(_){var T=g._ctx;if(T.dir==="next"&&rs(T,!0)&&0<T.limit){var N=T.valueMapper,O=Ya(T,T.table.core.schema);return T.table.core.query({trans:_,limit:T.limit,values:!0,query:{index:O,range:T.range}}).then(function(q){return q=q.result,N?q.map(N):q})}var $=[];return ki(T,function(q){return $.push(q)},_,T.table.core).then(function(){return $})},d)},st.prototype.offset=function(d){var g=this._ctx;return d<=0||(g.offset+=d,rs(g)?Cu(g,function(){var _=d;return function(T,N){return _===0||(_===1?--_:N(function(){T.advance(_),_=0}),!1)}}):Cu(g,function(){var _=d;return function(){return--_<0}})),this},st.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Cu(this._ctx,function(){var g=d;return function(_,T,N){return--g<=0&&T(N),0<=g}},!0),this},st.prototype.until=function(d,g){return Su(this._ctx,function(_,T,N){return!d(_.value)||(T(N),g)}),this},st.prototype.first=function(d){return this.limit(1).toArray(function(g){return g[0]}).then(d)},st.prototype.last=function(d){return this.reverse().first(d)},st.prototype.filter=function(d){var g;return Su(this._ctx,function(_){return d(_.value)}),(g=this._ctx).isMatch=Jr(g.isMatch,d),this},st.prototype.and=function(d){return this.filter(d)},st.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},st.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},st.prototype.desc=function(){return this.reverse()},st.prototype.eachKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,T){d(T.key,T)})},st.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},st.prototype.eachPrimaryKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(_,T){d(T.primaryKey,T)})},st.prototype.keys=function(d){var g=this._ctx;g.keysOnly=!g.isMatch;var _=[];return this.each(function(T,N){_.push(N.key)}).then(function(){return _}).then(d)},st.prototype.primaryKeys=function(d){var g=this._ctx;if(g.dir==="next"&&rs(g,!0)&&0<g.limit)return this._read(function(T){var N=Ya(g,g.table.core.schema);return g.table.core.query({trans:T,values:!1,limit:g.limit,query:{index:N,range:g.range}})}).then(function(T){return T.result}).then(d);g.keysOnly=!g.isMatch;var _=[];return this.each(function(T,N){_.push(N.primaryKey)}).then(function(){return _}).then(d)},st.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},st.prototype.firstKey=function(d){return this.limit(1).keys(function(g){return g[0]}).then(d)},st.prototype.lastKey=function(d){return this.reverse().firstKey(d)},st.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var g={};return Su(this._ctx,function(N){var T=N.primaryKey.toString(),N=p(g,T);return g[T]=!0,!N}),this},st.prototype.modify=function(d){var g=this,_=this._ctx;return this._write(function(T){var N=typeof d=="function"?d:function(X){return gt(X,d)},O=_.table.core,W=O.schema.primaryKey,$=W.outbound,q=W.extractKey,K=200,W=g.db._options.modifyChunkSize;W&&(K=typeof W=="object"?W[O.name]||W["*"]||200:W);function J(X,oe){var se=oe.failures,oe=oe.numFailures;ne+=X-oe;for(var he=0,me=a(se);he<me.length;he++){var xe=me[he];H.push(se[xe])}}var H=[],ne=0,G=[],Y=d===ku;return g.clone().primaryKeys().then(function(X){function te(oe){var he=Math.min(K,X.length-oe),me=X.slice(oe,oe+he);return(Y?Promise.resolve([]):O.getMany({trans:T,keys:me,cache:"immutable"})).then(function(xe){var Ce=[],ve=[],Ee=$?[]:null,ke=Y?me:[];if(!Y)for(var Te=0;Te<he;++Te){var je=xe[Te],We={value:j(je),primKey:X[oe+Te]};N.call(We,We.value,We)!==!1&&(We.value==null?ke.push(X[oe+Te]):$||Ze(q(je),q(We.value))===0?(ve.push(We.value),$&&Ee.push(X[oe+Te])):(ke.push(X[oe+Te]),Ce.push(We.value)))}return Promise.resolve(0<Ce.length&&O.mutate({trans:T,type:"add",values:Ce}).then(function(Qe){for(var Xe in Qe.failures)ke.splice(parseInt(Xe),1);J(Ce.length,Qe)})).then(function(){return(0<ve.length||se&&typeof d=="object")&&O.mutate({trans:T,type:"put",keys:Ee,values:ve,criteria:se,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<oe}).then(function(Qe){return J(ve.length,Qe)})}).then(function(){return(0<ke.length||se&&Y)&&O.mutate({trans:T,type:"delete",keys:ke,criteria:se,isAdditionalChunk:0<oe}).then(function(Qe){return Ci(_.table,ke,Qe)}).then(function(Qe){return J(ke.length,Qe)})}).then(function(){return X.length>oe+he&&te(oe+K)})})}var se=rs(_)&&_.limit===1/0&&(typeof d!="function"||Y)&&{index:_.index,range:_.range};return te(0).then(function(){if(0<H.length)throw new Me("Error modifying one or more objects",H,ne,G);return X.length})})})},st.prototype.delete=function(){var d=this._ctx,g=d.range;return!rs(d)||d.table.schema.yProps||!d.isPrimKey&&g.type!==3?this.modify(ku):this._write(function(_){var T=d.table.core.schema.primaryKey,N=g;return d.table.core.count({trans:_,query:{index:T,range:N}}).then(function(O){return d.table.core.mutate({trans:_,type:"deleteRange",range:N}).then(function(K){var q=K.failures,K=K.numFailures;if(K)throw new Me("Could not delete some values",Object.keys(q).map(function(W){return q[W]}),O-K);return O-K})})})},st);function st(){}var ku=function(d,g){return g.value=null};function Vh(d,g){return d<g?-1:d===g?0:1}function Fh(d,g){return g<d?-1:d===g?0:1}function Jt(d,g,_){return d=d instanceof Uh?new d.Collection(d):d,d._ctx.error=new(_||TypeError)(g),d}function Ls(d){return new d.Collection(d,function(){return ni("")}).limit(0)}function Xa(d,g,_,T){var N,O,$,q,K,W,J,H=_.length;if(!_.every(function(Y){return typeof Y=="string"}))return Jt(d,Dh);function ne(Y){N=Y==="next"?function(te){return te.toUpperCase()}:function(te){return te.toLowerCase()},O=Y==="next"?function(te){return te.toLowerCase()}:function(te){return te.toUpperCase()},$=Y==="next"?Vh:Fh;var X=_.map(function(te){return{lower:O(te),upper:N(te)}}).sort(function(te,se){return $(te.lower,se.lower)});q=X.map(function(te){return te.upper}),K=X.map(function(te){return te.lower}),J=(W=Y)==="next"?"":T}ne("next"),d=new d.Collection(d,function(){return Ni(q[0],K[H-1]+T)}),d._ondirectionchange=function(Y){ne(Y)};var G=0;return d._addAlgorithm(function(Y,X,te){var se=Y.key;if(typeof se!="string")return!1;var oe=O(se);if(g(oe,K,G))return!0;for(var he=null,me=G;me<H;++me){var xe=function(Ce,ve,Ee,ke,Te,je){for(var We=Math.min(Ce.length,ke.length),Qe=-1,Xe=0;Xe<We;++Xe){var mr=ve[Xe];if(mr!==ke[Xe])return Te(Ce[Xe],Ee[Xe])<0?Ce.substr(0,Xe)+Ee[Xe]+Ee.substr(Xe+1):Te(Ce[Xe],ke[Xe])<0?Ce.substr(0,Xe)+ke[Xe]+Ee.substr(Xe+1):0<=Qe?Ce.substr(0,Qe)+ve[Qe]+Ee.substr(Qe+1):null;Te(Ce[Xe],mr)<0&&(Qe=Xe)}return We<ke.length&&je==="next"?Ce+Ee.substr(Ce.length):We<Ce.length&&je==="prev"?Ce.substr(0,Ee.length):Qe<0?null:Ce.substr(0,Qe)+ke[Qe]+Ee.substr(Qe+1)}(se,oe,q[me],K[me],$,W);xe===null&&he===null?G=me+1:(he===null||0<$(he,xe))&&(he=xe)}return X(he!==null?function(){Y.continue(he+J)}:te),!1}),d}function Ni(d,g,_,T){return{type:2,lower:d,upper:g,lowerOpen:_,upperOpen:T}}function ni(d){return{type:1,lower:d,upper:d}}var Uh=(Object.defineProperty($t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$t.prototype.between=function(d,g,_,T){_=_!==!1,T=T===!0;try{return 0<this._cmp(d,g)||this._cmp(d,g)===0&&(_||T)&&(!_||!T)?Ls(this):new this.Collection(this,function(){return Ni(d,g,!_,!T)})}catch{return Jt(this,dr)}},$t.prototype.equals=function(d){return d==null?Jt(this,dr):new this.Collection(this,function(){return ni(d)})},$t.prototype.above=function(d){return d==null?Jt(this,dr):new this.Collection(this,function(){return Ni(d,void 0,!0)})},$t.prototype.aboveOrEqual=function(d){return d==null?Jt(this,dr):new this.Collection(this,function(){return Ni(d,void 0,!1)})},$t.prototype.below=function(d){return d==null?Jt(this,dr):new this.Collection(this,function(){return Ni(void 0,d,!1,!0)})},$t.prototype.belowOrEqual=function(d){return d==null?Jt(this,dr):new this.Collection(this,function(){return Ni(void 0,d)})},$t.prototype.startsWith=function(d){return typeof d!="string"?Jt(this,Dh):this.between(d,d+Un,!0,!0)},$t.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):Xa(this,function(g,_){return g.indexOf(_[0])===0},[d],Un)},$t.prototype.equalsIgnoreCase=function(d){return Xa(this,function(g,_){return g===_[0]},[d],"")},$t.prototype.anyOfIgnoreCase=function(){var d=de.apply(ue,arguments);return d.length===0?Ls(this):Xa(this,function(g,_){return _.indexOf(g)!==-1},d,"")},$t.prototype.startsWithAnyOfIgnoreCase=function(){var d=de.apply(ue,arguments);return d.length===0?Ls(this):Xa(this,function(g,_){return _.some(function(T){return g.indexOf(T)===0})},d,Un)},$t.prototype.anyOf=function(){var d=this,g=de.apply(ue,arguments),_=this._cmp;try{g.sort(_)}catch{return Jt(this,dr)}if(g.length===0)return Ls(this);var T=new this.Collection(this,function(){return Ni(g[0],g[g.length-1])});T._ondirectionchange=function(O){_=O==="next"?d._ascending:d._descending,g.sort(_)};var N=0;return T._addAlgorithm(function(O,$,q){for(var K=O.key;0<_(K,g[N]);)if(++N===g.length)return $(q),!1;return _(K,g[N])===0||($(function(){O.continue(g[N])}),!1)}),T},$t.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$t.prototype.noneOf=function(){var d=de.apply(ue,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Jt(this,dr)}var g=d.reduce(function(_,T){return _?_.concat([[_[_.length-1][1],T]]):[[-1/0,T]]},null);return g.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},$t.prototype.inAnyRange=function(se,g){var _=this,T=this._cmp,N=this._ascending,O=this._descending,$=this._min,q=this._max;if(se.length===0)return Ls(this);if(!se.every(function(oe){return oe[0]!==void 0&&oe[1]!==void 0&&N(oe[0],oe[1])<=0}))return Jt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Le.InvalidArgument);var K=!g||g.includeLowers!==!1,W=g&&g.includeUppers===!0,J,H=N;function ne(oe,he){return H(oe[0],he[0])}try{(J=se.reduce(function(oe,he){for(var me=0,xe=oe.length;me<xe;++me){var Ce=oe[me];if(T(he[0],Ce[1])<0&&0<T(he[1],Ce[0])){Ce[0]=$(Ce[0],he[0]),Ce[1]=q(Ce[1],he[1]);break}}return me===xe&&oe.push(he),oe},[])).sort(ne)}catch{return Jt(this,dr)}var G=0,Y=W?function(oe){return 0<N(oe,J[G][1])}:function(oe){return 0<=N(oe,J[G][1])},X=K?function(oe){return 0<O(oe,J[G][0])}:function(oe){return 0<=O(oe,J[G][0])},te=Y,se=new this.Collection(this,function(){return Ni(J[0][0],J[J.length-1][1],!K,!W)});return se._ondirectionchange=function(oe){H=oe==="next"?(te=Y,N):(te=X,O),J.sort(ne)},se._addAlgorithm(function(oe,he,me){for(var xe,Ce=oe.key;te(Ce);)if(++G===J.length)return he(me),!1;return!Y(xe=Ce)&&!X(xe)||(_._cmp(Ce,J[G][1])===0||_._cmp(Ce,J[G][0])===0||he(function(){H===N?oe.continue(J[G][0]):oe.continue(J[G][1])}),!1)}),se},$t.prototype.startsWithAnyOf=function(){var d=de.apply(ue,arguments);return d.every(function(g){return typeof g=="string"})?d.length===0?Ls(this):this.inAnyRange(d.map(function(g){return[g,g+Un]})):Jt(this,"startsWithAnyOf() only works with strings")},$t);function $t(){}function zn(d){return vt(function(g){return Vs(g),d(g.target.error),!1})}function Vs(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var ri="storagemutated",is="x-storagemutated-1",ii=ti(null,ri),Au=(at.prototype._lock=function(){return P(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},at.prototype._unlock=function(){if(P(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Nr(d[1],d[0])}catch{}}return this},at.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},at.prototype.create=function(d){var g=this;if(!this.mode)return this;var _=this.db.idbdb,T=this.db._state.dbOpenError;if(P(!this.idbtrans),!d&&!_)switch(T&&T.name){case"DatabaseClosedError":throw new Le.DatabaseClosed(T);case"MissingAPIError":throw new Le.MissingAPI(T.message,T);default:throw new Le.OpenFailed(T)}if(!this.active)throw new Le.TransactionInactive;return P(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||_).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=vt(function(N){Vs(N),g._reject(d.error)}),d.onabort=vt(function(N){Vs(N),g.active&&g._reject(new Le.Abort(d.error)),g.active=!1,g.on("abort").fire(N)}),d.oncomplete=vt(function(){g.active=!1,g._resolve(),"mutatedParts"in d&&ii.storagemutated.fire(d.mutatedParts)}),this},at.prototype._promise=function(d,g,_){var T=this;if(d==="readwrite"&&this.mode!=="readwrite")return _t(new Le.ReadOnly("Transaction is readonly"));if(!this.active)return _t(new Le.TransactionInactive);if(this._locked())return new _e(function(O,$){T._blockedFuncs.push([function(){T._promise(d,g,_).then(O,$)},Re])});if(_)return Yr(function(){var O=new _e(function($,q){T._lock();var K=g($,q,T);K&&K.then&&K.then($,q)});return O.finally(function(){return T._unlock()}),O._lib=!0,O});var N=new _e(function(O,$){var q=g(O,$,T);q&&q.then&&q.then(O,$)});return N._lib=!0,N},at.prototype._root=function(){return this.parent?this.parent._root():this},at.prototype.waitFor=function(d){var g,_=this._root(),T=_e.resolve(d);_._waitingFor?_._waitingFor=_._waitingFor.then(function(){return T}):(_._waitingFor=T,_._waitingQueue=[],g=_.idbtrans.objectStore(_.storeNames[0]),function O(){for(++_._spinCount;_._waitingQueue.length;)_._waitingQueue.shift()();_._waitingFor&&(g.get(-1/0).onsuccess=O)}());var N=_._waitingFor;return new _e(function(O,$){T.then(function(q){return _._waitingQueue.push(vt(O.bind(null,q)))},function(q){return _._waitingQueue.push(vt($.bind(null,q)))}).finally(function(){_._waitingFor===N&&(_._waitingFor=null)})})},at.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Le.Abort))},at.prototype.table=function(d){var g=this._memoizedTables||(this._memoizedTables={});if(p(g,d))return g[d];var _=this.schema[d];if(!_)throw new Le.NotFound("Table "+d+" not part of transaction");return _=new this.db.Table(d,_,this),_.core=this.db.core.table(d),g[d]=_},at);function at(){}function Nu(d,g,_,T,N,O,$,q){return{name:d,keyPath:g,unique:_,multi:T,auto:N,compound:O,src:(_&&!$?"&":"")+(T?"*":"")+(N?"++":"")+zh(g),type:q}}function zh(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function Ja(d,g,_){return{name:d,primKey:g,indexes:_,mappedClass:null,idxByName:(T=function(N){return[N.name,N]},_.reduce(function(N,O,$){return $=T(O,$),$&&(N[$[0]]=$[1]),N},{}))};var T}var Fs=function(d){try{return d.only([[]]),Fs=function(){return[[]]},[[]]}catch{return Fs=function(){return Un},Un}};function Za(d){return d==null?function(){}:typeof d=="string"?(g=d).split(".").length===1?function(_){return _[g]}:function(_){return L(_,g)}:function(_){return L(_,d)};var g}function Yo(d){return[].slice.call(d)}var Ri=0;function Us(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function rm(d,g,K){function T(te){if(te.type===3)return null;if(te.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var G=te.lower,Y=te.upper,X=te.lowerOpen,te=te.upperOpen;return G===void 0?Y===void 0?null:g.upperBound(Y,!!te):Y===void 0?g.lowerBound(G,!!X):g.bound(G,Y,!!X,!!te)}function N(ne){var G,Y=ne.name;return{name:Y,schema:ne,mutate:function(X){var te=X.trans,se=X.type,oe=X.keys,he=X.values,me=X.range;return new Promise(function(xe,Ce){xe=vt(xe);var ve=te.objectStore(Y),Ee=ve.keyPath==null,ke=se==="put"||se==="add";if(!ke&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var Te,je=(oe||he||{length:1}).length;if(oe&&he&&oe.length!==he.length)throw new Error("Given keys array must have same length as given values array.");if(je===0)return xe({numFailures:0,failures:{},results:[],lastResult:void 0});function We($n){++mr,Vs($n)}var Qe=[],Xe=[],mr=0;if(se==="deleteRange"){if(me.type===4)return xe({numFailures:mr,failures:Xe,results:[],lastResult:void 0});me.type===3?Qe.push(Te=ve.clear()):Qe.push(Te=ve.delete(T(me)))}else{var Ee=ke?Ee?[he,oe]:[he,null]:[oe,null],Ke=Ee[0],Sn=Ee[1];if(ke)for(var Cn=0;Cn<je;++Cn)Qe.push(Te=Sn&&Sn[Cn]!==void 0?ve[se](Ke[Cn],Sn[Cn]):ve[se](Ke[Cn])),Te.onerror=We;else for(Cn=0;Cn<je;++Cn)Qe.push(Te=ve[se](Ke[Cn])),Te.onerror=We}function Hh($n){$n=$n.target.result,Qe.forEach(function(ra,lm){return ra.error!=null&&(Xe[lm]=ra.error)}),xe({numFailures:mr,failures:Xe,results:se==="delete"?oe:Qe.map(function(ra){return ra.result}),lastResult:$n})}Te.onerror=function($n){We($n),Hh($n)},Te.onsuccess=Hh})},getMany:function(X){var te=X.trans,se=X.keys;return new Promise(function(oe,he){oe=vt(oe);for(var me,xe=te.objectStore(Y),Ce=se.length,ve=new Array(Ce),Ee=0,ke=0,Te=function(Qe){Qe=Qe.target,ve[Qe._pos]=Qe.result,++ke===Ee&&oe(ve)},je=zn(he),We=0;We<Ce;++We)se[We]!=null&&((me=xe.get(se[We]))._pos=We,me.onsuccess=Te,me.onerror=je,++Ee);Ee===0&&oe(ve)})},get:function(X){var te=X.trans,se=X.key;return new Promise(function(oe,he){oe=vt(oe);var me=te.objectStore(Y).get(se);me.onsuccess=function(xe){return oe(xe.target.result)},me.onerror=zn(he)})},query:(G=W,function(X){return new Promise(function(te,se){te=vt(te);var oe,he,me,Ee=X.trans,xe=X.values,Ce=X.limit,Te=X.query,ve=Ce===1/0?void 0:Ce,ke=Te.index,Te=Te.range,Ee=Ee.objectStore(Y),ke=ke.isPrimaryKey?Ee:Ee.index(ke.name),Te=T(Te);if(Ce===0)return te({result:[]});G?((ve=xe?ke.getAll(Te,ve):ke.getAllKeys(Te,ve)).onsuccess=function(je){return te({result:je.target.result})},ve.onerror=zn(se)):(oe=0,he=!xe&&"openKeyCursor"in ke?ke.openKeyCursor(Te):ke.openCursor(Te),me=[],he.onsuccess=function(je){var We=he.result;return We?(me.push(xe?We.value:We.primaryKey),++oe===Ce?te({result:me}):void We.continue()):te({result:me})},he.onerror=zn(se))})}),openCursor:function(X){var te=X.trans,se=X.values,oe=X.query,he=X.reverse,me=X.unique;return new Promise(function(xe,Ce){xe=vt(xe);var ke=oe.index,ve=oe.range,Ee=te.objectStore(Y),Ee=ke.isPrimaryKey?Ee:Ee.index(ke.name),ke=he?me?"prevunique":"prev":me?"nextunique":"next",Te=!se&&"openKeyCursor"in Ee?Ee.openKeyCursor(T(ve),ke):Ee.openCursor(T(ve),ke);Te.onerror=zn(Ce),Te.onsuccess=vt(function(je){var We,Qe,Xe,mr,Ke=Te.result;Ke?(Ke.___id=++Ri,Ke.done=!1,We=Ke.continue.bind(Ke),Qe=(Qe=Ke.continuePrimaryKey)&&Qe.bind(Ke),Xe=Ke.advance.bind(Ke),mr=function(){throw new Error("Cursor not stopped")},Ke.trans=te,Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=function(){throw new Error("Cursor not started")},Ke.fail=vt(Ce),Ke.next=function(){var Sn=this,Cn=1;return this.start(function(){return Cn--?Sn.continue():Sn.stop()}).then(function(){return Sn})},Ke.start=function(Sn){function Cn(){if(Te.result)try{Sn()}catch($n){Ke.fail($n)}else Ke.done=!0,Ke.start=function(){throw new Error("Cursor behind last entry")},Ke.stop()}var Hh=new Promise(function($n,ra){$n=vt($n),Te.onerror=zn(ra),Ke.fail=ra,Ke.stop=function(lm){Ke.stop=Ke.continue=Ke.continuePrimaryKey=Ke.advance=mr,$n(lm)}});return Te.onsuccess=vt(function($n){Te.onsuccess=Cn,Cn()}),Ke.continue=We,Ke.continuePrimaryKey=Qe,Ke.advance=Xe,Cn(),Hh},xe(Ke)):xe(null)},Ce)})},count:function(X){var te=X.query,se=X.trans,oe=te.index,he=te.range;return new Promise(function(me,xe){var Ce=se.objectStore(Y),ve=oe.isPrimaryKey?Ce:Ce.index(oe.name),Ce=T(he),ve=Ce?ve.count(Ce):ve.count();ve.onsuccess=vt(function(Ee){return me(Ee.target.result)}),ve.onerror=zn(xe)})}}}var O,$,q,J=($=K,q=Yo((O=d).objectStoreNames),{schema:{name:O.name,tables:q.map(function(ne){return $.objectStore(ne)}).map(function(ne){var G=ne.keyPath,te=ne.autoIncrement,Y=l(G),X={},te={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:G==null,compound:Y,keyPath:G,autoIncrement:te,unique:!0,extractKey:Za(G)},indexes:Yo(ne.indexNames).map(function(se){return ne.index(se)}).map(function(me){var oe=me.name,he=me.unique,xe=me.multiEntry,me=me.keyPath,xe={name:oe,compound:l(me),keyPath:me,unique:he,multiEntry:xe,extractKey:Za(me)};return X[Us(me)]=xe}),getIndexByKeyPath:function(se){return X[Us(se)]}};return X[":id"]=te.primaryKey,G!=null&&(X[Us(G)]=te.primaryKey),te})},hasGetAll:0<q.length&&"getAll"in $.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=J.schema,W=J.hasGetAll,J=K.tables.map(N),H={};return J.forEach(function(ne){return H[ne.name]=ne}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(ne){if(!H[ne])throw new Error("Table '".concat(ne,"' not found"));return H[ne]},MIN_KEY:-1/0,MAX_KEY:Fs(g),schema:K}}function Xo(d,g,_,T){var N=_.IDBKeyRange;return _.indexedDB,{dbcore:(T=rm(g,N,T),d.dbcore.reduce(function(O,$){return $=$.create,i(i({},O),$(O))},T))}}function Jo(d,T){var _=T.db,T=Xo(d._middlewares,_,d._deps,T);d.core=T.dbcore,d.tables.forEach(function(N){var O=N.name;d.core.schema.tables.some(function($){return $.name===O})&&(N.core=d.core.table(O),d[O]instanceof d.Table&&(d[O].core=N.core))})}function zs(d,g,_,T){_.forEach(function(N){var O=T[N];g.forEach(function($){var q=function K(W,J){return S(W,J)||(W=c(W))&&K(W,J)}($,N);(!q||"value"in q&&q.value===void 0)&&($===d.Transaction.prototype||$ instanceof d.Transaction?w($,N,{get:function(){return this.table(N)},set:function(K){v(this,N,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):$[N]=new d.Table(N,O))})})}function $s(d,g){g.forEach(function(_){for(var T in _)_[T]instanceof d.Table&&delete _[T]})}function $h(d,g){return d._cfg.version-g._cfg.version}function el(d,g,_,T){var N=d._dbSchema;_.objectStoreNames.contains("$meta")&&!N.$meta&&(N.$meta=Ja("$meta",Pu("")[0],[]),d._storeNames.push("$meta"));var O=d._createTransaction("readwrite",d._storeNames,N);O.create(_),O._completion.catch(T);var $=O._reject.bind(O),q=Re.transless||Re;Yr(function(){return Re.trans=O,Re.transless=q,g!==0?(Jo(d,_),W=g,((K=O).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(J){return J??W}):_e.resolve(W)).then(function(J){return ne=J,G=O,Y=_,X=[],J=(H=d)._versions,te=H._dbSchema=Bs(0,H.idbdb,Y),(J=J.filter(function(se){return se._cfg.version>=ne})).length!==0?(J.forEach(function(se){X.push(function(){var oe=te,he=se._cfg.dbschema;qs(H,oe,Y),qs(H,he,Y),te=H._dbSchema=he;var me=tl(oe,he);me.add.forEach(function(ke){ss(Y,ke[0],ke[1].primKey,ke[1].indexes)}),me.change.forEach(function(ke){if(ke.recreate)throw new Le.Upgrade("Not yet support for changing primary key");var Te=Y.objectStore(ke.name);ke.add.forEach(function(je){return Zo(Te,je)}),ke.change.forEach(function(je){Te.deleteIndex(je.name),Zo(Te,je)}),ke.del.forEach(function(je){return Te.deleteIndex(je)})});var xe=se._cfg.contentUpgrade;if(xe&&se._cfg.version>ne){Jo(H,Y),G._memoizedTables={};var Ce=C(he);me.del.forEach(function(ke){Ce[ke]=oe[ke]}),$s(H,[H.Transaction.prototype]),zs(H,[H.Transaction.prototype],a(Ce),Ce),G.schema=Ce;var ve,Ee=Ie(xe);return Ee&&Si(),me=_e.follow(function(){var ke;(ve=xe(G))&&Ee&&(ke=Ar.bind(null,null),ve.then(ke,ke))}),ve&&typeof ve.then=="function"?_e.resolve(ve):me.then(function(){return ve})}}),X.push(function(oe){var he,me,xe=se._cfg.dbschema;he=xe,me=oe,[].slice.call(me.db.objectStoreNames).forEach(function(Ce){return he[Ce]==null&&me.db.deleteObjectStore(Ce)}),$s(H,[H.Transaction.prototype]),zs(H,[H.Transaction.prototype],H._storeNames,H._dbSchema),G.schema=H._dbSchema}),X.push(function(oe){H.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(H.idbdb.version/10)===se._cfg.version?(H.idbdb.deleteObjectStore("$meta"),delete H._dbSchema.$meta,H._storeNames=H._storeNames.filter(function(he){return he!=="$meta"})):oe.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return X.length?_e.resolve(X.shift()(G.idbtrans)).then(se):_e.resolve()}().then(function(){Ru(te,Y)})):_e.resolve();var H,ne,G,Y,X,te}).catch($)):(a(N).forEach(function(J){ss(_,J,N[J].primKey,N[J].indexes)}),Jo(d,_),void _e.follow(function(){return d.on.populate.fire(O)}).catch($));var K,W})}function im(d,g){Ru(d._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var _=Bs(0,d.idbdb,g);qs(d,d._dbSchema,g);for(var T=0,N=tl(_,d._dbSchema).change;T<N.length;T++){var O=function($){if($.change.length||$.recreate)return console.warn("Unable to patch indexes of table ".concat($.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=g.objectStore($.name);$.add.forEach(function(K){hn&&console.debug("Dexie upgrade patch: Creating missing index ".concat($.name,".").concat(K.src)),Zo(q,K)})}(N[T]);if(typeof O=="object")return O.value}}function tl(d,g){var _,T={del:[],add:[],change:[]};for(_ in d)g[_]||T.del.push(_);for(_ in g){var N=d[_],O=g[_];if(N){var $={name:_,def:O,recreate:!1,del:[],add:[],change:[]};if(""+(N.primKey.keyPath||"")!=""+(O.primKey.keyPath||"")||N.primKey.auto!==O.primKey.auto)$.recreate=!0,T.change.push($);else{var q=N.idxByName,K=O.idxByName,W=void 0;for(W in q)K[W]||$.del.push(W);for(W in K){var J=q[W],H=K[W];J?J.src!==H.src&&$.change.push(H):$.add.push(H)}(0<$.del.length||0<$.add.length||0<$.change.length)&&T.change.push($)}}else T.add.push([_,O])}return T}function ss(d,g,_,T){var N=d.db.createObjectStore(g,_.keyPath?{keyPath:_.keyPath,autoIncrement:_.auto}:{autoIncrement:_.auto});return T.forEach(function(O){return Zo(N,O)}),N}function Ru(d,g){a(d).forEach(function(_){g.db.objectStoreNames.contains(_)||(hn&&console.debug("Dexie: Creating missing table",_),ss(g,_,d[_].primKey,d[_].indexes))})}function Zo(d,g){d.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Bs(d,g,_){var T={};return I(g.objectStoreNames,0).forEach(function(N){for(var O=_.objectStore(N),$=Nu(zh(W=O.keyPath),W||"",!0,!1,!!O.autoIncrement,W&&typeof W!="string",!0),q=[],K=0;K<O.indexNames.length;++K){var J=O.index(O.indexNames[K]),W=J.keyPath,J=Nu(J.name,W,!!J.unique,!!J.multiEntry,!1,W&&typeof W!="string",!1);q.push(J)}T[N]=Ja(N,$,q)}),T}function qs(d,g,_){for(var T=_.db.objectStoreNames,N=0;N<T.length;++N){var O=T[N],$=_.objectStore(O);d._hasGetAll="getAll"in $;for(var q=0;q<$.indexNames.length;++q){var K=$.indexNames[q],W=$.index(K).keyPath,J=typeof W=="string"?W:"["+I(W).join("+")+"]";!g[O]||(W=g[O].idxByName[J])&&(W.name=K,delete g[O].idxByName[J],g[O].idxByName[K]=W)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Pu(d){return d.split(",").map(function(g,_){var O=g.split(":"),T=(N=O[1])===null||N===void 0?void 0:N.trim(),N=(g=O[0].trim()).replace(/([&*]|\+\+)/g,""),O=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Nu(N,O||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),l(O),_===0,T)})}var nl=(os.prototype._createTableSchema=Ja,os.prototype._parseIndexSyntax=Pu,os.prototype._parseStoresSpec=function(d,g){var _=this;a(d).forEach(function(T){if(d[T]!==null){var N=_._parseIndexSyntax(d[T]),O=N.shift();if(!O)throw new Le.Schema("Invalid schema for table "+T+": "+d[T]);if(O.unique=!0,O.multi)throw new Le.Schema("Primary key cannot be multiEntry*");N.forEach(function($){if($.auto)throw new Le.Schema("Only primary key can be marked as autoIncrement (++)");if(!$.keyPath)throw new Le.Schema("Index must have a name and cannot be an empty string")}),N=_._createTableSchema(T,O,N),g[T]=N}})},os.prototype.stores=function(_){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,_):_;var _=g._versions,T={},N={};return _.forEach(function(O){u(T,O._cfg.storesSource),N=O._cfg.dbschema={},O._parseStoresSpec(T,N)}),g._dbSchema=N,$s(g,[g._allTables,g,g.Transaction.prototype]),zs(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],a(N),N),g._storeNames=a(N),this},os.prototype.upgrade=function(d){return this._cfg.contentUpgrade=Ut(this._cfg.contentUpgrade||Je,d),this},os);function os(){}function rl(d,g){var _=d._dbNamesDB;return _||(_=d._dbNamesDB=new ls(Ho,{addons:[],indexedDB:d,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),_.table("dbnames")}function si(d){return d&&typeof d.databases=="function"}function il(d){return Yr(function(){return Re.letThrough=!0,d()})}function sl(d){return!("from"in d)}var on=function(d,g){if(!this){var _=new on;return d&&"d"in d&&u(_,d),_}u(this,arguments.length?{d:1,from:d,to:1<arguments.length?g:d}:{d:0})};function Hs(d,g,_){var T=Ze(g,_);if(!isNaN(T)){if(0<T)throw RangeError();if(sl(d))return u(d,{from:g,to:_,d:1});var N=d.l,T=d.r;if(Ze(_,d.from)<0)return N?Hs(N,g,_):d.l={from:g,to:_,d:1,l:null,r:null},Ou(d);if(0<Ze(g,d.to))return T?Hs(T,g,_):d.r={from:g,to:_,d:1,l:null,r:null},Ou(d);Ze(g,d.from)<0&&(d.from=g,d.l=null,d.d=T?T.d+1:1),0<Ze(_,d.to)&&(d.to=_,d.r=null,d.d=d.l?d.l.d+1:1),_=!d.r,N&&!d.l&&Pi(d,N),T&&_&&Pi(d,T)}}function Pi(d,g){sl(g)||function _(T,K){var O=K.from,$=K.to,q=K.l,K=K.r;Hs(T,O,$),q&&_(T,q),K&&_(T,K)}(d,g)}function In(d,g){var _=ea(g),T=_.next();if(T.done)return!1;for(var N=T.value,O=ea(d),$=O.next(N.from),q=$.value;!T.done&&!$.done;){if(Ze(q.from,N.to)<=0&&0<=Ze(q.to,N.from))return!0;Ze(N.from,q.from)<0?N=(T=_.next(q.from)).value:q=($=O.next(N.from)).value}return!1}function ea(d){var g=sl(d)?null:{s:0,n:d};return{next:function(_){for(var T=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,T)for(;g.n.l&&Ze(_,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!T||Ze(_,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Ou(d){var g,_,T=(((g=d.r)===null||g===void 0?void 0:g.d)||0)-(((_=d.l)===null||_===void 0?void 0:_.d)||0),N=1<T?"r":T<-1?"l":"";N&&(g=N=="r"?"l":"r",_=i({},d),T=d[N],d.from=T.from,d.to=T.to,d[N]=T[N],_[N]=T[g],(d[g]=_).d=as(_)),d.d=as(d)}function as(_){var g=_.r,_=_.l;return(g?_?Math.max(g.d,_.d):g.d:_?_.d:0)+1}function f(d,g){return a(g).forEach(function(_){d[_]?Pi(d[_],g[_]):d[_]=function T(N){var O,$,q={};for(O in N)p(N,O)&&($=N[O],q[O]=!$||typeof $!="object"||U.has($.constructor)?$:T($));return q}(g[_])}),d}function x(d,g){return d.all||g.all||Object.keys(d).some(function(_){return g[_]&&In(g[_],d[_])})}m(on.prototype,((Or={add:function(d){return Pi(this,d),this},addKey:function(d){return Hs(this,d,d),this},addKeys:function(d){var g=this;return d.forEach(function(_){return Hs(g,_,_)}),this},hasKey:function(d){var g=ea(this).next(d).value;return g&&Ze(g.from,d)<=0&&0<=Ze(g.to,d)}})[ee]=function(){return ea(this)},Or));var A={},z={},ie=!1;function ae(d){f(z,d),ie||(ie=!0,setTimeout(function(){ie=!1,be(z,!(z={}))},0))}function be(d,g){g===void 0&&(g=!1);var _=new Set;if(d.all)for(var T=0,N=Object.values(A);T<N.length;T++)He($=N[T],d,_,g);else for(var O in d){var $,q=/^idb\:\/\/(.*)\/(.*)\//.exec(O);q&&(O=q[1],q=q[2],($=A["idb://".concat(O,"/").concat(q)])&&He($,d,_,g))}_.forEach(function(K){return K()})}function He(d,g,_,T){for(var N=[],O=0,$=Object.entries(d.queries.query);O<$.length;O++){for(var q=$[O],K=q[0],W=[],J=0,H=q[1];J<H.length;J++){var ne=H[J];x(g,ne.obsSet)?ne.subscribers.forEach(function(te){return _.add(te)}):T&&W.push(ne)}T&&N.push([K,W])}if(T)for(var G=0,Y=N;G<Y.length;G++){var X=Y[G],K=X[0],W=X[1];d.queries.query[K]=W}}function Kt(d){var g=d._state,_=d._deps.indexedDB;if(g.isBeingOpened||d.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?_t(g.dbOpenError):d});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var T=g.openCanceller,N=Math.round(10*d.verno),O=!1;function $(){if(g.openCanceller!==T)throw new Le.DatabaseClosed("db.open() was cancelled")}function q(){return new _e(function(ne,G){if($(),!_)throw new Le.MissingAPI;var Y=d.name,X=g.autoSchema||!N?_.open(Y):_.open(Y,N);if(!X)throw new Le.MissingAPI;X.onerror=zn(G),X.onblocked=vt(d._fireOnBlocked),X.onupgradeneeded=vt(function(te){var se;J=X.transaction,g.autoSchema&&!d._options.allowEmptyDB?(X.onerror=Vs,J.abort(),X.result.close(),(se=_.deleteDatabase(Y)).onsuccess=se.onerror=vt(function(){G(new Le.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):(J.onerror=zn(G),te=te.oldVersion>Math.pow(2,62)?0:te.oldVersion,H=te<1,d.idbdb=X.result,O&&im(d,J),el(d,te/10,J,G))},G),X.onsuccess=vt(function(){J=null;var te,se,oe,he,me,xe=d.idbdb=X.result,Ce=I(xe.objectStoreNames);if(0<Ce.length)try{var ve=xe.transaction((he=Ce).length===1?he[0]:he,"readonly");if(g.autoSchema)se=xe,oe=ve,(te=d).verno=se.version/10,oe=te._dbSchema=Bs(0,se,oe),te._storeNames=I(se.objectStoreNames,0),zs(te,[te._allTables],a(oe),oe);else if(qs(d,d._dbSchema,ve),((me=tl(Bs(0,(me=d).idbdb,ve),me._dbSchema)).add.length||me.change.some(function(Ee){return Ee.add.length||Ee.change.length}))&&!O)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),xe.close(),N=xe.version+1,O=!0,ne(q());Jo(d,ve)}catch{}ns.push(d),xe.onversionchange=vt(function(Ee){g.vcFired=!0,d.on("versionchange").fire(Ee)}),xe.onclose=vt(function(){d.close({disableAutoOpen:!1})}),H&&(me=d._deps,ve=Y,xe=me.indexedDB,me=me.IDBKeyRange,si(xe)||ve===Ho||rl(xe,me).put({name:ve}).catch(Je)),ne()},G)}).catch(function(ne){switch(ne==null?void 0:ne.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<N)return N=0,q()}return _e.reject(ne)})}var K,W=g.dbReadyResolve,J=null,H=!1;return _e.race([T,(typeof navigator>"u"?_e.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ne){function G(){return indexedDB.databases().finally(ne)}K=setInterval(G,100),G()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(q)]).then(function(){return $(),g.onReadyBeingFired=[],_e.resolve(il(function(){return d.on.ready.fire(d.vip)})).then(function ne(){if(0<g.onReadyBeingFired.length){var G=g.onReadyBeingFired.reduce(Ut,Je);return g.onReadyBeingFired=[],_e.resolve(il(function(){return G(d.vip)})).then(ne)}})}).finally(function(){g.openCanceller===T&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(ne){g.dbOpenError=ne;try{J&&J.abort()}catch{}return T===g.openCanceller&&d._close(),_t(ne)}).finally(function(){g.openComplete=!0,W()}).then(function(){var ne;return H&&(ne={},d.tables.forEach(function(G){G.schema.indexes.forEach(function(Y){Y.name&&(ne["idb://".concat(d.name,"/").concat(G.name,"/").concat(Y.name)]=new on(-1/0,[[[]]]))}),ne["idb://".concat(d.name,"/").concat(G.name,"/")]=ne["idb://".concat(d.name,"/").concat(G.name,"/:dels")]=new on(-1/0,[[[]]])}),ii(ri).fire(ne),be(ne,!0)),d})}function ft(d){function g(O){return d.next(O)}var _=N(g),T=N(function(O){return d.throw(O)});function N(O){return function(K){var q=O(K),K=q.value;return q.done?K:K&&typeof K.then=="function"?K.then(_,T):l(K)?Promise.all(K).then(_,T):_(K)}}return N(g)()}function jt(d,g,_){for(var T=l(d)?d.slice():[d],N=0;N<_;++N)T.push(g);return T}var Rr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return i(i({},d),{table:function(g){var _=d.table(g),T=_.schema,N={},O=[];function $(H,ne,G){var Y=Us(H),X=N[Y]=N[Y]||[],te=H==null?0:typeof H=="string"?1:H.length,se=0<ne,se=i(i({},G),{name:se?"".concat(Y,"(virtual-from:").concat(G.name,")"):G.name,lowLevelIndex:G,isVirtual:se,keyTail:ne,keyLength:te,extractKey:Za(H),unique:!se&&G.unique});return X.push(se),se.isPrimaryKey||O.push(se),1<te&&$(te===2?H[0]:H.slice(0,te-1),ne+1,G),X.sort(function(oe,he){return oe.keyTail-he.keyTail}),se}g=$(T.primaryKey.keyPath,0,T.primaryKey),N[":id"]=[g];for(var q=0,K=T.indexes;q<K.length;q++){var W=K[q];$(W.keyPath,0,W)}function J(H){var ne,G=H.query.index;return G.isVirtual?i(i({},H),{query:{index:G.lowLevelIndex,range:(ne=H.query.range,G=G.keyTail,{type:ne.type===1?2:ne.type,lower:jt(ne.lower,ne.lowerOpen?d.MAX_KEY:d.MIN_KEY,G),lowerOpen:!0,upper:jt(ne.upper,ne.upperOpen?d.MIN_KEY:d.MAX_KEY,G),upperOpen:!0})}}):H}return i(i({},_),{schema:i(i({},T),{primaryKey:g,indexes:O,getIndexByKeyPath:function(H){return(H=N[Us(H)])&&H[0]}}),count:function(H){return _.count(J(H))},query:function(H){return _.query(J(H))},openCursor:function(H){var ne=H.query.index,G=ne.keyTail,Y=ne.isVirtual,X=ne.keyLength;return Y?_.openCursor(J(H)).then(function(se){return se&&te(se)}):_.openCursor(H);function te(se){return Object.create(se,{continue:{value:function(oe){oe!=null?se.continue(jt(oe,H.reverse?d.MAX_KEY:d.MIN_KEY,G)):H.unique?se.continue(se.key.slice(0,X).concat(H.reverse?d.MIN_KEY:d.MAX_KEY,G)):se.continue()}},continuePrimaryKey:{value:function(oe,he){se.continuePrimaryKey(jt(oe,d.MAX_KEY,G),he)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var oe=se.key;return X===1?oe[0]:oe.slice(0,X)}},value:{get:function(){return se.value}}})}}})}})}};function oi(d,g,_,T){return _=_||{},T=T||"",a(d).forEach(function(N){var O,$,q;p(g,N)?(O=d[N],$=g[N],typeof O=="object"&&typeof $=="object"&&O&&$?(q=Z(O))!==Z($)?_[T+N]=g[N]:q==="Object"?oi(O,$,_,T+N+"."):O!==$&&(_[T+N]=g[N]):O!==$&&(_[T+N]=g[N])):_[T+N]=void 0}),a(g).forEach(function(N){p(d,N)||(_[T+N]=g[N])}),_}function Pr(d,g){return g.type==="delete"?g.keys:g.keys||g.values.map(d.extractKey)}var Oi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return i(i({},d),{table:function(g){var _=d.table(g),T=_.schema.primaryKey;return i(i({},_),{mutate:function(N){var O=Re.trans,$=O.table(g).hook,q=$.deleting,K=$.creating,W=$.updating;switch(N.type){case"add":if(K.fire===Je)break;return O._promise("readwrite",function(){return J(N)},!0);case"put":if(K.fire===Je&&W.fire===Je)break;return O._promise("readwrite",function(){return J(N)},!0);case"delete":if(q.fire===Je)break;return O._promise("readwrite",function(){return J(N)},!0);case"deleteRange":if(q.fire===Je)break;return O._promise("readwrite",function(){return function H(ne,G,Y){return _.query({trans:ne,values:!1,query:{index:T,range:G},limit:Y}).then(function(X){var te=X.result;return J({type:"delete",keys:te,trans:ne}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):te.length<Y?{failures:[],numFailures:0,lastResult:void 0}:H(ne,i(i({},G),{lower:te[te.length-1],lowerOpen:!0}),Y)})})}(N.trans,N.range,1e4)},!0)}return _.mutate(N);function J(H){var ne,G,Y,X=Re.trans,te=H.keys||Pr(T,H);if(!te)throw new Error("Keys missing");return(H=H.type==="add"||H.type==="put"?i(i({},H),{keys:te}):i({},H)).type!=="delete"&&(H.values=s([],H.values)),H.keys&&(H.keys=s([],H.keys)),ne=_,Y=te,((G=H).type==="add"?Promise.resolve([]):ne.getMany({trans:G.trans,keys:Y,cache:"immutable"})).then(function(se){var oe=te.map(function(he,me){var xe,Ce,ve,Ee=se[me],ke={onerror:null,onsuccess:null};return H.type==="delete"?q.fire.call(ke,he,Ee,X):H.type==="add"||Ee===void 0?(xe=K.fire.call(ke,he,H.values[me],X),he==null&&xe!=null&&(H.keys[me]=he=xe,T.outbound||k(H.values[me],T.keyPath,he))):(xe=oi(Ee,H.values[me]),(Ce=W.fire.call(ke,xe,he,Ee,X))&&(ve=H.values[me],Object.keys(Ce).forEach(function(Te){p(ve,Te)?ve[Te]=Ce[Te]:k(ve,Te,Ce[Te])}))),ke});return _.mutate(H).then(function(he){for(var me=he.failures,xe=he.results,Ce=he.numFailures,he=he.lastResult,ve=0;ve<te.length;++ve){var Ee=(xe||te)[ve],ke=oe[ve];Ee==null?ke.onerror&&ke.onerror(me[ve]):ke.onsuccess&&ke.onsuccess(H.type==="put"&&se[ve]?H.values[ve]:Ee)}return{failures:me,results:xe,numFailures:Ce,lastResult:he}}).catch(function(he){return oe.forEach(function(me){return me.onerror&&me.onerror(he)}),Promise.reject(he)})})}}})}})}};function ta(d,g,_){try{if(!g||g.keys.length<d.length)return null;for(var T=[],N=0,O=0;N<g.keys.length&&O<d.length;++N)Ze(g.keys[N],d[O])===0&&(T.push(_?j(g.values[N]):g.values[N]),++O);return T.length===d.length?T:null}catch{return null}}var ju={stack:"dbcore",level:-1,create:function(d){return{table:function(g){var _=d.table(g);return i(i({},_),{getMany:function(T){if(!T.cache)return _.getMany(T);var N=ta(T.keys,T.trans._cache,T.cache==="clone");return N?_e.resolve(N):_.getMany(T).then(function(O){return T.trans._cache={keys:T.keys,values:T.cache==="clone"?j(O):O},O})},mutate:function(T){return T.type!=="add"&&(T.trans._cache=null),_.mutate(T)}})}}}};function m_(d,g){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function g_(d,g){switch(d){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Qk={stack:"dbcore",level:0,name:"Observability",create:function(d){var g=d.schema.name,_=new on(d.MIN_KEY,d.MAX_KEY);return i(i({},d),{transaction:function(T,N,O){if(Re.subscr&&N!=="readonly")throw new Le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return d.transaction(T,N,O)},table:function(T){var N=d.table(T),O=N.schema,$=O.primaryKey,H=O.indexes,q=$.extractKey,K=$.outbound,W=$.autoIncrement&&H.filter(function(G){return G.compound&&G.keyPath.includes($.keyPath)}),J=i(i({},N),{mutate:function(G){function Y(Te){return Te="idb://".concat(g,"/").concat(T,"/").concat(Te),he[Te]||(he[Te]=new on)}var X,te,se,oe=G.trans,he=G.mutatedParts||(G.mutatedParts={}),me=Y(""),xe=Y(":dels"),Ce=G.type,ke=G.type==="deleteRange"?[G.range]:G.type==="delete"?[G.keys]:G.values.length<50?[Pr($,G).filter(function(Te){return Te}),G.values]:[],ve=ke[0],Ee=ke[1],ke=G.trans._cache;return l(ve)?(me.addKeys(ve),(ke=Ce==="delete"||ve.length===Ee.length?ta(ve,ke):null)||xe.addKeys(ve),(ke||Ee)&&(X=Y,te=ke,se=Ee,O.indexes.forEach(function(Te){var je=X(Te.name||"");function We(Xe){return Xe!=null?Te.extractKey(Xe):null}function Qe(Xe){return Te.multiEntry&&l(Xe)?Xe.forEach(function(mr){return je.addKey(mr)}):je.addKey(Xe)}(te||se).forEach(function(Xe,Sn){var Ke=te&&We(te[Sn]),Sn=se&&We(se[Sn]);Ze(Ke,Sn)!==0&&(Ke!=null&&Qe(Ke),Sn!=null&&Qe(Sn))})}))):ve?(Ee={from:(Ee=ve.lower)!==null&&Ee!==void 0?Ee:d.MIN_KEY,to:(Ee=ve.upper)!==null&&Ee!==void 0?Ee:d.MAX_KEY},xe.add(Ee),me.add(Ee)):(me.add(_),xe.add(_),O.indexes.forEach(function(Te){return Y(Te.name).add(_)})),N.mutate(G).then(function(Te){return!ve||G.type!=="add"&&G.type!=="put"||(me.addKeys(Te.results),W&&W.forEach(function(je){for(var We=G.values.map(function(Ke){return je.extractKey(Ke)}),Qe=je.keyPath.findIndex(function(Ke){return Ke===$.keyPath}),Xe=0,mr=Te.results.length;Xe<mr;++Xe)We[Xe][Qe]=Te.results[Xe];Y(je.name).addKeys(We)})),oe.mutatedParts=f(oe.mutatedParts||{},he),Te})}}),H=function(Y){var X=Y.query,Y=X.index,X=X.range;return[Y,new on((Y=X.lower)!==null&&Y!==void 0?Y:d.MIN_KEY,(X=X.upper)!==null&&X!==void 0?X:d.MAX_KEY)]},ne={get:function(G){return[$,new on(G.key)]},getMany:function(G){return[$,new on().addKeys(G.keys)]},count:H,query:H,openCursor:H};return a(ne).forEach(function(G){J[G]=function(Y){var X=Re.subscr,te=!!X,se=m_(Re,N)&&g_(G,Y)?Y.obsSet={}:X;if(te){var oe=function(Ee){return Ee="idb://".concat(g,"/").concat(T,"/").concat(Ee),se[Ee]||(se[Ee]=new on)},he=oe(""),me=oe(":dels"),X=ne[G](Y),te=X[0],X=X[1];if((G==="query"&&te.isPrimaryKey&&!Y.values?me:oe(te.name||"")).add(X),!te.isPrimaryKey){if(G!=="count"){var xe=G==="query"&&K&&Y.values&&N.query(i(i({},Y),{values:!1}));return N[G].apply(this,arguments).then(function(Ee){if(G==="query"){if(K&&Y.values)return xe.then(function(We){return We=We.result,he.addKeys(We),Ee});var ke=Y.values?Ee.result.map(q):Ee.result;(Y.values?he:me).addKeys(ke)}else if(G==="openCursor"){var Te=Ee,je=Y.values;return Te&&Object.create(Te,{key:{get:function(){return me.addKey(Te.primaryKey),Te.key}},primaryKey:{get:function(){var We=Te.primaryKey;return me.addKey(We),We}},value:{get:function(){return je&&he.addKey(Te.primaryKey),Te.value}}})}return Ee})}me.add(_)}}return N[G].apply(this,arguments)}}),J}})}};function y_(d,g,_){if(_.numFailures===0)return g;if(g.type==="deleteRange")return null;var T=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return _.numFailures===T?null:(g=i({},g),l(g.keys)&&(g.keys=g.keys.filter(function(N,O){return!(O in _.failures)})),"values"in g&&l(g.values)&&(g.values=g.values.filter(function(N,O){return!(O in _.failures)})),g)}function sm(d,g){return _=d,((T=g).lower===void 0||(T.lowerOpen?0<Ze(_,T.lower):0<=Ze(_,T.lower)))&&(d=d,(g=g).upper===void 0||(g.upperOpen?Ze(d,g.upper)<0:Ze(d,g.upper)<=0));var _,T}function v_(d,g,ne,T,N,O){if(!ne||ne.length===0)return d;var $=g.query.index,q=$.multiEntry,K=g.query.range,W=T.schema.primaryKey.extractKey,J=$.extractKey,H=($.lowLevelIndex||$).extractKey,ne=ne.reduce(function(G,Y){var X=G,te=[];if(Y.type==="add"||Y.type==="put")for(var se=new on,oe=Y.values.length-1;0<=oe;--oe){var he,me=Y.values[oe],xe=W(me);se.hasKey(xe)||(he=J(me),(q&&l(he)?he.some(function(Te){return sm(Te,K)}):sm(he,K))&&(se.addKey(xe),te.push(me)))}switch(Y.type){case"add":var Ce=new on().addKeys(g.values?G.map(function(je){return W(je)}):G),X=G.concat(g.values?te.filter(function(je){return je=W(je),!Ce.hasKey(je)&&(Ce.addKey(je),!0)}):te.map(function(je){return W(je)}).filter(function(je){return!Ce.hasKey(je)&&(Ce.addKey(je),!0)}));break;case"put":var ve=new on().addKeys(Y.values.map(function(je){return W(je)}));X=G.filter(function(je){return!ve.hasKey(g.values?W(je):je)}).concat(g.values?te:te.map(function(je){return W(je)}));break;case"delete":var Ee=new on().addKeys(Y.keys);X=G.filter(function(je){return!Ee.hasKey(g.values?W(je):je)});break;case"deleteRange":var ke=Y.range;X=G.filter(function(je){return!sm(W(je),ke)})}return X},d);return ne===d?d:(ne.sort(function(G,Y){return Ze(H(G),H(Y))||Ze(W(G),W(Y))}),g.limit&&g.limit<1/0&&(ne.length>g.limit?ne.length=g.limit:d.length===g.limit&&ne.length<g.limit&&(N.dirty=!0)),O?Object.freeze(ne):ne)}function __(d,g){return Ze(d.lower,g.lower)===0&&Ze(d.upper,g.upper)===0&&!!d.lowerOpen==!!g.lowerOpen&&!!d.upperOpen==!!g.upperOpen}function Yk(d,g){return function(_,T,N,O){if(_===void 0)return T!==void 0?-1:0;if(T===void 0)return 1;if((T=Ze(_,T))===0){if(N&&O)return 0;if(N)return 1;if(O)return-1}return T}(d.lower,g.lower,d.lowerOpen,g.lowerOpen)<=0&&0<=function(_,T,N,O){if(_===void 0)return T!==void 0?1:0;if(T===void 0)return-1;if((T=Ze(_,T))===0){if(N&&O)return 0;if(N)return-1;if(O)return 1}return T}(d.upper,g.upper,d.upperOpen,g.upperOpen)}function Xk(d,g,_,T){d.subscribers.add(_),T.addEventListener("abort",function(){var N,O;d.subscribers.delete(_),d.subscribers.size===0&&(N=d,O=g,setTimeout(function(){N.subscribers.size===0&&re(O,N)},3e3))})}var Jk={stack:"dbcore",level:0,name:"Cache",create:function(d){var g=d.schema.name;return i(i({},d),{transaction:function(_,T,N){var O,$,q=d.transaction(_,T,N);return T==="readwrite"&&($=(O=new AbortController).signal,N=function(K){return function(){if(O.abort(),T==="readwrite"){for(var W=new Set,J=0,H=_;J<H.length;J++){var ne=H[J],G=A["idb://".concat(g,"/").concat(ne)];if(G){var Y=d.table(ne),X=G.optimisticOps.filter(function(je){return je.trans===q});if(q._explicit&&K&&q.mutatedParts)for(var te=0,se=Object.values(G.queries.query);te<se.length;te++)for(var oe=0,he=(Ce=se[te]).slice();oe<he.length;oe++)x((ve=he[oe]).obsSet,q.mutatedParts)&&(re(Ce,ve),ve.subscribers.forEach(function(je){return W.add(je)}));else if(0<X.length){G.optimisticOps=G.optimisticOps.filter(function(je){return je.trans!==q});for(var me=0,xe=Object.values(G.queries.query);me<xe.length;me++)for(var Ce,ve,Ee,ke=0,Te=(Ce=xe[me]).slice();ke<Te.length;ke++)(ve=Te[ke]).res!=null&&q.mutatedParts&&(K&&!ve.dirty?(Ee=Object.isFrozen(ve.res),Ee=v_(ve.res,ve.req,X,Y,ve,Ee),ve.dirty?(re(Ce,ve),ve.subscribers.forEach(function(je){return W.add(je)})):Ee!==ve.res&&(ve.res=Ee,ve.promise=_e.resolve({result:Ee}))):(ve.dirty&&re(Ce,ve),ve.subscribers.forEach(function(je){return W.add(je)})))}}}W.forEach(function(je){return je()})}}},q.addEventListener("abort",N(!1),{signal:$}),q.addEventListener("error",N(!1),{signal:$}),q.addEventListener("complete",N(!0),{signal:$})),q},table:function(_){var T=d.table(_),N=T.schema.primaryKey;return i(i({},T),{mutate:function(O){var $=Re.trans;if(N.outbound||$.db._options.cache==="disabled"||$.explicit||$.idbtrans.mode!=="readwrite")return T.mutate(O);var q=A["idb://".concat(g,"/").concat(_)];return q?($=T.mutate(O),O.type!=="add"&&O.type!=="put"||!(50<=O.values.length||Pr(N,O).some(function(K){return K==null}))?(q.optimisticOps.push(O),O.mutatedParts&&ae(O.mutatedParts),$.then(function(K){0<K.numFailures&&(re(q.optimisticOps,O),(K=y_(0,O,K))&&q.optimisticOps.push(K),O.mutatedParts&&ae(O.mutatedParts))}),$.catch(function(){re(q.optimisticOps,O),O.mutatedParts&&ae(O.mutatedParts)})):$.then(function(K){var W=y_(0,i(i({},O),{values:O.values.map(function(J,H){var ne;return K.failures[H]?J:(J=(ne=N.keyPath)!==null&&ne!==void 0&&ne.includes(".")?j(J):i({},J),k(J,N.keyPath,K.results[H]),J)})}),K);q.optimisticOps.push(W),queueMicrotask(function(){return O.mutatedParts&&ae(O.mutatedParts)})}),$):T.mutate(O)},query:function(O){if(!m_(Re,T)||!g_("query",O))return T.query(O);var $=((W=Re.trans)===null||W===void 0?void 0:W.db._options.cache)==="immutable",H=Re,q=H.requery,K=H.signal,W=function(Y,X,te,se){var oe=A["idb://".concat(Y,"/").concat(X)];if(!oe)return[];if(!(X=oe.queries[te]))return[null,!1,oe,null];var he=X[(se.query?se.query.index.name:null)||""];if(!he)return[null,!1,oe,null];switch(te){case"query":var me=he.find(function(xe){return xe.req.limit===se.limit&&xe.req.values===se.values&&__(xe.req.query.range,se.query.range)});return me?[me,!0,oe,he]:[he.find(function(xe){return("limit"in xe.req?xe.req.limit:1/0)>=se.limit&&(!se.values||xe.req.values)&&Yk(xe.req.query.range,se.query.range)}),!1,oe,he];case"count":return me=he.find(function(xe){return __(xe.req.query.range,se.query.range)}),[me,!!me,oe,he]}}(g,_,"query",O),J=W[0],H=W[1],ne=W[2],G=W[3];return J&&H?J.obsSet=O.obsSet:(H=T.query(O).then(function(Y){var X=Y.result;if(J&&(J.res=X),$){for(var te=0,se=X.length;te<se;++te)Object.freeze(X[te]);Object.freeze(X)}else Y.result=j(X);return Y}).catch(function(Y){return G&&J&&re(G,J),Promise.reject(Y)}),J={obsSet:O.obsSet,promise:H,subscribers:new Set,type:"query",req:O,dirty:!1},G?G.push(J):(G=[J],(ne=ne||(A["idb://".concat(g,"/").concat(_)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[O.query.index.name||""]=G)),Xk(J,G,q,K),J.promise.then(function(Y){return{result:v_(Y.result,O,ne==null?void 0:ne.optimisticOps,T,J,$)}})}})}})}};function Bh(d,g){return new Proxy(d,{get:function(_,T,N){return T==="db"?g:Reflect.get(_,T,N)}})}var ls=(Wt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Le.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var g=this._versions,_=g.filter(function(T){return T._cfg.version===d})[0];return _||(_=new this.Version(d),g.push(_),g.sort($h),_.stores({}),this._state.autoSchema=!1,_)},Wt.prototype._whenReady=function(d){var g=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?d():new _e(function(_,T){if(g._state.openComplete)return T(new Le.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void T(new Le.DatabaseClosed);g.open().catch(Je)}g._state.dbReadyPromise.then(_,T)}).then(d)},Wt.prototype.use=function(d){var g=d.stack,_=d.create,T=d.level,N=d.name;return N&&this.unuse({stack:g,name:N}),d=this._middlewares[g]||(this._middlewares[g]=[]),d.push({stack:g,create:_,level:T??10,name:N}),d.sort(function(O,$){return O.level-$.level}),this},Wt.prototype.unuse=function(d){var g=d.stack,_=d.name,T=d.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(N){return T?N.create!==T:!!_&&N.name!==_})),this},Wt.prototype.open=function(){var d=this;return Nr(kt,function(){return Kt(d)})},Wt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,g=ns.indexOf(this);if(0<=g&&ns.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new _e(function(_){d.dbReadyResolve=_}),d.openCanceller=new _e(function(_,T){d.cancelOpen=T}))},Wt.prototype.close=function(_){var g=(_===void 0?{disableAutoOpen:!0}:_).disableAutoOpen,_=this._state;g?(_.isBeingOpened&&_.cancelOpen(new Le.DatabaseClosed),this._close(),_.autoOpen=!1,_.dbOpenError=new Le.DatabaseClosed):(this._close(),_.autoOpen=this._options.autoOpen||_.isBeingOpened,_.openComplete=!1,_.dbOpenError=null)},Wt.prototype.delete=function(d){var g=this;d===void 0&&(d={disableAutoOpen:!0});var _=0<arguments.length&&typeof arguments[0]!="object",T=this._state;return new _e(function(N,O){function $(){g.close(d);var q=g._deps.indexedDB.deleteDatabase(g.name);q.onsuccess=vt(function(){var K,W,J;K=g._deps,W=g.name,J=K.indexedDB,K=K.IDBKeyRange,si(J)||W===Ho||rl(J,K).delete(W).catch(Je),N()}),q.onerror=zn(O),q.onblocked=g._fireOnBlocked}if(_)throw new Le.InvalidArgument("Invalid closeOptions argument to db.delete()");T.isBeingOpened?T.dbReadyPromise.then($):$()})},Wt.prototype.backendDB=function(){return this.idbdb},Wt.prototype.isOpen=function(){return this.idbdb!==null},Wt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Wt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Wt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Wt.prototype,"tables",{get:function(){var d=this;return a(this._allTables).map(function(g){return d._allTables[g]})},enumerable:!1,configurable:!0}),Wt.prototype.transaction=function(){var d=(function(g,_,T){var N=arguments.length;if(N<2)throw new Le.InvalidArgument("Too few arguments");for(var O=new Array(N-1);--N;)O[N-1]=arguments[N];return T=O.pop(),[g,V(O),T]}).apply(this,arguments);return this._transaction.apply(this,d)},Wt.prototype._transaction=function(d,g,_){var T=this,N=Re.trans;N&&N.db===this&&d.indexOf("!")===-1||(N=null);var O,$,q=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if($=g.map(function(W){if(W=W instanceof T.Table?W.name:W,typeof W!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return W}),d=="r"||d===Ga)O=Ga;else{if(d!="rw"&&d!=Ko)throw new Le.InvalidArgument("Invalid transaction mode: "+d);O=Ko}if(N){if(N.mode===Ga&&O===Ko){if(!q)throw new Le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");N=null}N&&$.forEach(function(W){if(N&&N.storeNames.indexOf(W)===-1){if(!q)throw new Le.SubTransaction("Table "+W+" not included in parent transaction.");N=null}}),q&&N&&!N.active&&(N=null)}}catch(W){return N?N._promise(null,function(J,H){H(W)}):_t(W)}var K=(function W(J,H,ne,G,Y){return _e.resolve().then(function(){var X=Re.transless||Re,te=J._createTransaction(H,ne,J._dbSchema,G);if(te.explicit=!0,X={trans:te,transless:X},G)te.idbtrans=G.idbtrans;else try{te.create(),te.idbtrans._explicit=!0,J._state.PR1398_maxLoop=3}catch(he){return he.name===Be.InvalidState&&J.isOpen()&&0<--J._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),J.close({disableAutoOpen:!1}),J.open().then(function(){return W(J,H,ne,null,Y)})):_t(he)}var se,oe=Ie(Y);return oe&&Si(),X=_e.follow(function(){var he;(se=Y.call(te,te))&&(oe?(he=Ar.bind(null,null),se.then(he,he)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=ft(se)))},X),(se&&typeof se.then=="function"?_e.resolve(se).then(function(he){return te.active?he:_t(new Le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return se})).then(function(he){return G&&te._resolve(),te._completion.then(function(){return he})}).catch(function(he){return te._reject(he),_t(he)})})}).bind(null,this,O,$,N,_);return N?N._promise(O,K,"lock"):Re.trans?Nr(Re.transless,function(){return T._whenReady(K)}):this._whenReady(K)},Wt.prototype.table=function(d){if(!p(this._allTables,d))throw new Le.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Wt);function Wt(d,g){var _=this;this._middlewares={},this.verno=0;var T=Wt.dependencies;this._options=g=i({addons:Wt.addons,autoOpen:!0,indexedDB:T.indexedDB,IDBKeyRange:T.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},T=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var N,O,$,q,K,W={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Je,dbReadyPromise:null,cancelOpen:Je,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};W.dbReadyPromise=new _e(function(H){W.dbReadyResolve=H}),W.openCanceller=new _e(function(H,ne){W.cancelOpen=ne}),this._state=W,this.name=d,this.on=ti(this,"populate","blocked","versionchange","close",{ready:[Ut,Je]}),this.once=function(H,ne){var G=function(){for(var Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];_.on(H).unsubscribe(G),ne.apply(_,Y)};return _.on(H,G)},this.on.ready.subscribe=R(this.on.ready.subscribe,function(H){return function(ne,G){Wt.vip(function(){var Y,X=_._state;X.openComplete?(X.dbOpenError||_e.resolve().then(ne),G&&H(ne)):X.onReadyBeingFired?(X.onReadyBeingFired.push(ne),G&&H(ne)):(H(ne),Y=_,G||H(function te(){Y.on.ready.unsubscribe(ne),Y.on.ready.unsubscribe(te)}))})}}),this.Collection=(N=this,Qo(Lh.prototype,function(se,te){this.db=N;var G=Tu,Y=null;if(te)try{G=te()}catch(oe){Y=oe}var X=se._ctx,te=X.table,se=te.hook.reading.fire;this._ctx={table:te,index:X.index,isPrimKey:!X.index||te.schema.primKey.keyPath&&X.index===te.schema.primKey.name,range:G,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:X.or,valueMapper:se!==or?se:null}})),this.Table=(O=this,Qo(Go.prototype,function(H,ne,G){this.db=O,this._tx=G,this.name=H,this.schema=ne,this.hook=O._allTables[H]?O._allTables[H].hook:ti(null,{creating:[Se,Je],reading:[Ha,or],updating:[Ft,Je],deleting:[Ye,Je]})})),this.Transaction=($=this,Qo(Au.prototype,function(H,ne,G,Y,X){var te=this;H!=="readonly"&&ne.forEach(function(se){se=(se=G[se])===null||se===void 0?void 0:se.yProps,se&&(ne=ne.concat(se.map(function(oe){return oe.updatesTable})))}),this.db=$,this.mode=H,this.storeNames=ne,this.schema=G,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=ti(this,"complete","error","abort"),this.parent=X||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _e(function(se,oe){te._resolve=se,te._reject=oe}),this._completion.then(function(){te.active=!1,te.on.complete.fire()},function(se){var oe=te.active;return te.active=!1,te.on.error.fire(se),te.parent?te.parent._reject(se):oe&&te.idbtrans&&te.idbtrans.abort(),_t(se)})})),this.Version=(q=this,Qo(nl.prototype,function(H){this.db=q,this._cfg={version:H,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,Qo(Uh.prototype,function(H,ne,G){if(this.db=K,this._ctx={table:H,index:ne===":id"?null:ne,or:G},this._cmp=this._ascending=Ze,this._descending=function(Y,X){return Ze(X,Y)},this._max=function(Y,X){return 0<Ze(Y,X)?Y:X},this._min=function(Y,X){return Ze(Y,X)<0?Y:X},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new Le.MissingAPI})),this.on("versionchange",function(H){0<H.newVersion?console.warn("Another connection wants to upgrade database '".concat(_.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(_.name,"'. Closing db now to resume the delete request.")),_.close({disableAutoOpen:!1})}),this.on("blocked",function(H){!H.newVersion||H.newVersion<H.oldVersion?console.warn("Dexie.delete('".concat(_.name,"') was blocked")):console.warn("Upgrade '".concat(_.name,"' blocked by other connection holding version ").concat(H.oldVersion/10))}),this._maxKey=Fs(g.IDBKeyRange),this._createTransaction=function(H,ne,G,Y){return new _.Transaction(H,ne,G,_._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(H){_.on("blocked").fire(H),ns.filter(function(ne){return ne.name===_.name&&ne!==_&&!ne._state.vcFired}).map(function(ne){return ne.on("versionchange").fire(H)})},this.use(ju),this.use(Jk),this.use(Qk),this.use(Rr),this.use(Oi);var J=new Proxy(this,{get:function(H,ne,G){if(ne==="_vip")return!0;if(ne==="table")return function(X){return Bh(_.table(X),J)};var Y=Reflect.get(H,ne,G);return Y instanceof Go?Bh(Y,J):ne==="tables"?Y.map(function(X){return Bh(X,J)}):ne==="_createTransaction"?function(){return Bh(Y.apply(this,arguments),J)}:Y}});this.vip=J,T.forEach(function(H){return H(_)})}var qh,Or=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Zk=(om.prototype.subscribe=function(d,g,_){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:g,complete:_})},om.prototype[Or]=function(){return this},om);function om(d){this._subscribe=d}try{qh={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{qh={indexedDB:null,IDBKeyRange:null}}function w_(d){var g,_=!1,T=new Zk(function(N){var O=Ie(d),$,q=!1,K={},W={},J={get closed(){return q},unsubscribe:function(){q||(q=!0,$&&$.abort(),H&&ii.storagemutated.unsubscribe(G))}};N.start&&N.start(J);var H=!1,ne=function(){return qo(Y)},G=function(X){f(K,X),x(W,K)&&ne()},Y=function(){var X,te,se;!q&&qh.indexedDB&&(K={},X={},$&&$.abort(),$=new AbortController,se=function(oe){var he=hr();try{O&&Si();var me=Yr(d,oe);return me=O?me.finally(Ar):me}finally{he&&Ms()}}(te={subscr:X,signal:$.signal,requery:ne,querier:d,trans:null}),Promise.resolve(se).then(function(oe){_=!0,g=oe,q||te.signal.aborted||(K={},function(he){for(var me in he)if(p(he,me))return;return 1}(W=X)||H||(ii(ri,G),H=!0),qo(function(){return!q&&N.next&&N.next(oe)}))},function(oe){_=!1,["DatabaseClosedError","AbortError"].includes(oe==null?void 0:oe.name)||q||qo(function(){q||N.error&&N.error(oe)})}))};return setTimeout(ne,0),J});return T.hasValue=function(){return _},T.getValue=function(){return g},T}var na=ls;function am(d){var g=Ks;try{Ks=!0,ii.storagemutated.fire(d),be(d,!0)}finally{Ks=g}}m(na,i(i({},zo),{delete:function(d){return new na(d,{addons:[]}).delete()},exists:function(d){return new na(d,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return g=na.dependencies,_=g.indexedDB,g=g.IDBKeyRange,(si(_)?Promise.resolve(_.databases()).then(function(T){return T.map(function(N){return N.name}).filter(function(N){return N!==Ho})}):rl(_,g).toCollection().primaryKeys()).then(d)}catch{return _t(new Le.MissingAPI)}var g,_},defineClass:function(){return function(d){u(this,d)}},ignoreTransaction:function(d){return Re.trans?Nr(Re.transless,d):d()},vip:il,async:function(d){return function(){try{var g=ft(d.apply(this,arguments));return g&&typeof g.then=="function"?g:_e.resolve(g)}catch(_){return _t(_)}}},spawn:function(d,g,_){try{var T=ft(d.apply(_,g||[]));return T&&typeof T.then=="function"?T:_e.resolve(T)}catch(N){return _t(N)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(d,g){return g=_e.resolve(typeof d=="function"?na.ignoreTransaction(d):d).timeout(g||6e4),Re.trans?Re.trans.waitFor(g):g},Promise:_e,debug:{get:function(){return hn},set:function(d){$o(d)}},derive:b,extend:u,props:m,override:R,Events:ti,on:ii,liveQuery:w_,extendObservabilitySet:f,getByKeyPath:L,setByKeyPath:k,delByKeyPath:function(d,g){typeof g=="string"?k(d,g,void 0):"length"in g&&[].map.call(g,function(_){k(d,_,void 0)})},shallowClone:C,deepClone:j,getObjectDiff:oi,cmp:Ze,asap:M,minKey:-1/0,addons:[],connections:ns,errnames:Be,dependencies:qh,cache:A,semVer:"4.2.1",version:"4.2.1".split(".").map(function(d){return parseInt(d)}).reduce(function(d,g,_){return d+g/Math.pow(10,2*_)})})),na.maxKey=Fs(na.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ii(ri,function(d){Ks||(d=new CustomEvent(is,{detail:d}),Ks=!0,dispatchEvent(d),Ks=!1)}),addEventListener(is,function(d){d=d.detail,Ks||am(d)}));var ol,Ks=!1,x_=function(){};return typeof BroadcastChannel<"u"&&((x_=function(){(ol=new BroadcastChannel(is)).onmessage=function(d){return d.data&&am(d.data)}})(),typeof ol.unref=="function"&&ol.unref(),ii(ri,function(d){Ks||ol.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!ls.disableBfCache&&d.persisted){hn&&console.debug("Dexie: handling persisted pagehide"),ol!=null&&ol.close();for(var g=0,_=ns;g<_.length;g++)_[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!ls.disableBfCache&&d.persisted&&(hn&&console.debug("Dexie: handling persisted pageshow"),x_(),am({all:new on(-1/0,[[]])}))})),_e.rejectionMapper=function(d,g){return!d||d instanceof Ne||d instanceof TypeError||d instanceof SyntaxError||!d.name||!_u[d.name]?d:(g=new _u[d.name](g||d.message,d),"stack"in d&&w(g,"stack",{get:function(){return this.inner.stack}}),g)},$o(hn),i(ls,Object.freeze({__proto__:null,Dexie:ls,liveQuery:w_,Entity:Iu,cmp:Ze,PropModification:ei,replacePrefix:function(d,g){return new ei({replacePrefix:[d,g]})},add:function(d){return new ei({add:d})},remove:function(d){return new ei({remove:d})},default:ls,RangeSet:on,mergeRanges:Pi,rangesOverlap:In}),{default:ls}),ls})})(MI);var lO=MI.exports;const oy=ev(lO),ax=Symbol.for("Dexie"),Yl=globalThis[ax]||(globalThis[ax]=oy);if(oy.semVer!==Yl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${oy.semVer} and ${Yl.semVer}`);const{liveQuery:K7,mergeRanges:W7,rangesOverlap:G7,RangeSet:Q7,cmp:Y7,Entity:X7,PropModification:J7,replacePrefix:Z7,add:eB,remove:tB,DexieYProvider:nB}=Yl,wt=new Yl("NexusMindDB");wt.version(4).stores({contacts:"id, name, ocrText, phone, email, company, *tags, lastUpdated",settings:"id",schedules:"id, title, date, *contactIds, type"});function uO(n,e,r){var i,s;typeof n=="function"?(i=e||[],s=r):(i=[],s=e);var o=yt.useRef({hasResult:!1,result:s,error:null}),a=yt.useReducer(function(c){return c+1},0);a[0];var l=a[1],u=yt.useMemo(function(){var c=typeof n=="function"?n():n;if(!c||typeof c.subscribe!="function")throw n===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!o.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")o.current.result=c.getValue(),o.current.hasResult=!0;else{var h=c.subscribe(function(p){o.current.result=p,o.current.hasResult=!0});typeof h=="function"?h():h.unsubscribe()}return c},i);if(yt.useDebugValue(o.current.result),yt.useEffect(function(){var c=u.subscribe(function(h){var p=o.current;(p.error!==null||p.result!==h)&&(p.error=null,p.result=h,p.hasResult=!0,l())},function(h){var p=o.current;p.error!==h&&(p.error=h,l())});return typeof c=="function"?c:c.unsubscribe.bind(c)},i),o.current.error)throw o.current.error;return o.current.result}function Mf(n,e,r){return uO(function(){return Yl.liveQuery(n)},e||[],r)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(n){var e=Yl.DexieYProvider;e&&e.release(n)});const cO=()=>{};var lx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=function(n){const e=[];let r=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},hO=function(n){const e=[];let r=0,i=0;for(;r<n.length;){const s=n[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[r++],a=n[r++],l=n[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=n[r++],a=n[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},VI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let m=(l&15)<<2|c>>6,v=c&63;u||(v=64,a||(m=64)),i.push(r[h],r[p],r[m],r[v])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=r[n.charAt(s++)],l=s<n.length?r[n.charAt(s)]:0;++s;const c=s<n.length?r[n.charAt(s)]:64;++s;const p=s<n.length?r[n.charAt(s)]:64;if(++s,o==null||l==null||c==null||p==null)throw new fO;const m=o<<2|l>>4;if(i.push(m),c!==64){const v=l<<4&240|c>>2;if(i.push(v),p!==64){const w=c<<6&192|p;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dO=function(n){const e=LI(n);return VI.encodeByteArray(e,!0)},Sd=function(n){return dO(n).replace(/\./g,"")},FI=function(n){try{return VI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=()=>pO().__FIREBASE_DEFAULTS__,gO=()=>{if(typeof process>"u"||typeof lx>"u")return;const n=lx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&FI(n[1]);return e&&JSON.parse(e)},Sp=()=>{try{return cO()||mO()||gO()||yO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},UI=n=>{var e,r;return(r=(e=Sp())==null?void 0:e.emulatorHosts)==null?void 0:r[n]},vO=n=>{const e=UI(n);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},zI=()=>{var n;return(n=Sp())==null?void 0:n.config},$I=n=>{var e;return(e=Sp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BI(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Sd(JSON.stringify(r)),Sd(JSON.stringify(a)),""].join(".")}const wc={};function xO(){const n={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?n.emulator.push(e):n.prod.push(e);return n}function bO(n){let e=document.getElementById(n),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),r=!0),{created:r,element:e}}let ux=!1;function qI(n,e){if(typeof window>"u"||typeof document>"u"||!hu(window.location.host)||wc[n]===e||wc[n]||ux)return;wc[n]=e;function r(m){return`__firebase__banner__${m}`}const i="__firebase__banner",o=xO().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ux=!0,a()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=bO(i),v=r("text"),w=document.getElementById(v)||document.createElement("span"),b=r("learnmore"),S=document.getElementById(b)||document.createElement("a"),E=r("preprendIcon"),I=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const R=m.element;l(R),h(S,b);const P=c();u(I,E),R.append(I,w,S,P),document.body.appendChild(R)}o?(w.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function TO(){var e;const n=(e=Sp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function SO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CO(){const n=Ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kO(){return!TO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KI(){try{return typeof indexedDB=="object"}catch{return!1}}function WI(){return new Promise((n,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(r){e(r)}})}function AO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="FirebaseError";class Ei extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=NO,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?RO(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ei(s,l,i)}}function RO(n,e){return n.replace(PO,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const PO=/\{\$([^}]+)}/g;function OO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e){if(n===e)return!0;const r=Object.keys(n),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(cx(o)&&cx(a)){if(!So(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function cx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(n){const e=[];for(const[r,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jO(n,e){const r=new DO(n,e);return r.subscribe.bind(r)}class DO{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");MO(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Mm),s.error===void 0&&(s.error=Mm),s.complete===void 0&&(s.complete=Mm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MO(n,e){if(typeof n!="object"||n===null)return!1;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1e3,VO=2,FO=4*60*60*1e3,UO=.5;function hx(n,e=LO,r=VO){const i=e*Math.pow(r,n),s=Math.round(UO*i*(Math.random()-.5)*2);return Math.min(FO,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){return n&&n._delegate?n._delegate:n}class xi{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new _O;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BO(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){const i=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$O(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $O(n){return n===aa?void 0:n}function BO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new zO(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const HO={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},KO=nt.INFO,WO={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},GO=(n,e,...r)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=WO[e];if(s)console[s](`[${i}]  ${n.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=KO,this._logHandler=GO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const QO=(n,e)=>e.some(r=>n instanceof r);let fx,dx;function YO(){return fx||(fx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XO(){return dx||(dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GI=new WeakMap,ay=new WeakMap,QI=new WeakMap,Lm=new WeakMap,Zv=new WeakMap;function JO(n){const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{r(wo(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&GI.set(r,n)}).catch(()=>{}),Zv.set(e,n),e}function ZO(n){if(ay.has(n))return;const e=new Promise((r,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});ay.set(n,e)}let ly={get(n,e,r){if(n instanceof IDBTransaction){if(e==="done")return ay.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QI.get(n);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wo(n[e])},set(n,e,r){return n[e]=r,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ej(n){ly=n(ly)}function tj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=n.call(Vm(this),e,...r);return QI.set(i,e.sort?e.sort():[e]),wo(i)}:XO().includes(n)?function(...e){return n.apply(Vm(this),e),wo(GI.get(this))}:function(...e){return wo(n.apply(Vm(this),e))}}function nj(n){return typeof n=="function"?tj(n):(n instanceof IDBTransaction&&ZO(n),QO(n,YO())?new Proxy(n,ly):n)}function wo(n){if(n instanceof IDBRequest)return JO(n);if(Lm.has(n))return Lm.get(n);const e=nj(n);return e!==n&&(Lm.set(n,e),Zv.set(e,n)),e}const Vm=n=>Zv.get(n);function YI(n,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=wo(a);return i&&a.addEventListener("upgradeneeded",u=>{i(wo(a.result),u.oldVersion,u.newVersion,wo(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const rj=["get","getKey","getAll","getAllKeys","count"],ij=["put","add","delete","clear"],Fm=new Map;function px(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Fm.get(e))return Fm.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=ij.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||rj.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Fm.set(e,o),o}ej(n=>({...n,get:(e,r,i)=>px(e,r)||n.get(e,r,i),has:(e,r)=>!!px(e,r)||n.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(oj(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function oj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uy="@firebase/app",mx="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Cp("@firebase/app"),aj="@firebase/app-compat",lj="@firebase/analytics-compat",uj="@firebase/analytics",cj="@firebase/app-check-compat",hj="@firebase/app-check",fj="@firebase/auth",dj="@firebase/auth-compat",pj="@firebase/database",mj="@firebase/data-connect",gj="@firebase/database-compat",yj="@firebase/functions",vj="@firebase/functions-compat",_j="@firebase/installations",wj="@firebase/installations-compat",xj="@firebase/messaging",bj="@firebase/messaging-compat",Ej="@firebase/performance",Tj="@firebase/performance-compat",Ij="@firebase/remote-config",Sj="@firebase/remote-config-compat",Cj="@firebase/storage",kj="@firebase/storage-compat",Aj="@firebase/firestore",Nj="@firebase/ai",Rj="@firebase/firestore-compat",Pj="firebase",Oj="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="[DEFAULT]",jj={[uy]:"fire-core",[aj]:"fire-core-compat",[uj]:"fire-analytics",[lj]:"fire-analytics-compat",[hj]:"fire-app-check",[cj]:"fire-app-check-compat",[fj]:"fire-auth",[dj]:"fire-auth-compat",[pj]:"fire-rtdb",[mj]:"fire-data-connect",[gj]:"fire-rtdb-compat",[yj]:"fire-fn",[vj]:"fire-fn-compat",[_j]:"fire-iid",[wj]:"fire-iid-compat",[xj]:"fire-fcm",[bj]:"fire-fcm-compat",[Ej]:"fire-perf",[Tj]:"fire-perf-compat",[Ij]:"fire-rc",[Sj]:"fire-rc-compat",[Cj]:"fire-gcs",[kj]:"fire-gcs-compat",[Aj]:"fire-fst",[Rj]:"fire-fst-compat",[Nj]:"fire-vertex","fire-js":"fire-js",[Pj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Map,Dj=new Map,hy=new Map;function gx(n,e){try{n.container.addComponent(e)}catch(r){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,r)}}function Qi(n){const e=n.name;if(hy.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;hy.set(e,n);for(const r of Cd.values())gx(r,n);for(const r of Dj.values())gx(r,n);return!0}function $a(n,e){const r=n.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),n.container.getProvider(e)}function fi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xo=new za("app","Firebase",Mj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,r,i){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=Oj;function XI(n,e={}){let r=n;typeof e!="object"&&(e={name:e});const i={name:cy,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw xo.create("bad-app-name",{appName:String(s)});if(r||(r=zI()),!r)throw xo.create("no-options");const o=Cd.get(s);if(o){if(So(r,o.options)&&So(i,o.config))return o;throw xo.create("duplicate-app",{appName:s})}const a=new qO(s);for(const u of hy.values())a.addComponent(u);const l=new Lj(r,i,a);return Cd.set(s,l),l}function e0(n=cy){const e=Cd.get(n);if(!e&&n===cy&&zI())return XI();if(!e)throw xo.create("no-app",{appName:n});return e}function qr(n,e,r){let i=jj[n]??n;r&&(i+=`-${r}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(a.join(" "));return}Qi(new xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="firebase-heartbeat-database",Fj=1,Yc="firebase-heartbeat-store";let Um=null;function JI(){return Um||(Um=YI(Vj,Fj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yc)}catch(r){console.warn(r)}}}}).catch(n=>{throw xo.create("idb-open",{originalErrorMessage:n.message})})),Um}async function Uj(n){try{const r=(await JI()).transaction(Yc),i=await r.objectStore(Yc).get(ZI(n));return await r.done,i}catch(e){if(e instanceof Ei)Ns.warn(e.message);else{const r=xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(r.message)}}}async function yx(n,e){try{const i=(await JI()).transaction(Yc,"readwrite");await i.objectStore(Yc).put(e,ZI(n)),await i.done}catch(r){if(r instanceof Ei)Ns.warn(r.message);else{const i=xo.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ns.warn(i.message)}}}function ZI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=1024,$j=30;class Bj{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Hj(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>$j){const a=Kj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=vx(),{heartbeatsToSend:i,unsentEntries:s}=qj(this._heartbeatsCache.heartbeats),o=Sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return Ns.warn(r),""}}}function vx(){return new Date().toISOString().substring(0,10)}function qj(n,e=zj){const r=[];let i=n.slice();for(const s of n){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),_x(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),_x(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class Hj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KI()?WI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Uj(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _x(n){return Sd(JSON.stringify({version:2,heartbeats:n})).length}function Kj(n){if(n.length===0)return-1;let e=0,r=n[0].date;for(let i=1;i<n.length;i++)n[i].date<r&&(r=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(n){Qi(new xi("platform-logger",e=>new sj(e),"PRIVATE")),Qi(new xi("heartbeat",e=>new Bj(e),"PRIVATE")),qr(uy,mx,n),qr(uy,mx,"esm2020"),qr("fire-js","")}Wj("");var Gj="firebase",Qj="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(Gj,Qj,"app");function e2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yj=e2,t2=new za("auth","Firebase",e2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Cp("@firebase/auth");function Xj(n,...e){kd.logLevel<=nt.WARN&&kd.warn(`Auth (${fu}): ${n}`,...e)}function Lf(n,...e){kd.logLevel<=nt.ERROR&&kd.error(`Auth (${fu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,...e){throw n0(n,...e)}function vi(n,...e){return n0(n,...e)}function t0(n,e,r){const i={...Yj(),[e]:r};return new za("auth","Firebase",i).create(e,{appName:n.name})}function wa(n){return t0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jj(n,e,r){const i=r;if(!(e instanceof i))throw i.name!==e.constructor.name&&Yi(n,"argument-error"),t0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function n0(n,...e){if(typeof n!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(r,...i)}return t2.create(n,...e)}function ze(n,e,...r){if(!n)throw n0(e,...r)}function _s(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Lf(e),new Error(e)}function Rs(n,e){n||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Zj(){return wx()==="http:"||wx()==="https:"}function wx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zj()||HI()||"connection"in navigator)?navigator.onLine:!0}function tD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Rs(r>e,"Short delay should be less than long delay!"),this.isMobile=EO()||SO()}get(){return eD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:r}=n.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iD=new vh(3e4,6e4);function i0(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function du(n,e,r,i,s={}){return r2(n,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=yh({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:u,...o};return IO()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&hu(n.emulatorConfig.host)&&(c.credentials="include"),n2.fetch()(await i2(n,n.config.apiHost,r,l),c)})}async function r2(n,e,r){n._canInitEmulator=!1;const i={...nD,...e};try{const s=new oD(n),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw cf(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw cf(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw cf(n,"user-disabled",a);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw t0(n,h,c);Yi(n,h)}}catch(s){if(s instanceof Ei)throw s;Yi(n,"network-request-failed",{message:String(s)})}}async function sD(n,e,r,i,s={}){const o=await du(n,e,r,i,s);return"mfaPendingCredential"in o&&Yi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function i2(n,e,r,i){const s=`${e}${r}?${i}`,o=n,a=o.config.emulator?r0(n.config,s):`${n.config.apiScheme}://${s}`;return rD.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class oD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),iD.get())})}}function cf(n,e,r){const i={appName:n.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=vi(n,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(n,e){return du(n,"POST","/v1/accounts:delete",e)}async function Ad(n,e){return du(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lD(n,e=!1){const r=Yt(n),i=await r.getIdToken(e),s=s0(i);ze(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:xc(zm(s.auth_time)),issuedAtTime:xc(zm(s.iat)),expirationTime:xc(zm(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function zm(n){return Number(n)*1e3}function s0(n){const[e,r,i]=n.split(".");if(e===void 0||r===void 0||i===void 0)return Lf("JWT malformed, contained fewer than 3 sections"),null;try{const s=FI(r);return s?JSON.parse(s):(Lf("Failed to decode base64 JWT payload"),null)}catch(s){return Lf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xx(n){const e=s0(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xc(n,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Ei&&uD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function uD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(n){var p;const e=n.auth,r=await n.getIdToken(),i=await Xc(n,Ad(e,{idToken:r}));ze(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(p=s.providerUserInfo)!=null&&p.length?s2(s.providerUserInfo):[],a=fD(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dy(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,h)}async function hD(n){const e=Yt(n);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fD(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function s2(n){return n.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(n,e){const r=await r2(n,{},async()=>{const i=yh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await i2(n,s,"/v1/token",`key=${o}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:i};return n.emulatorConfig&&hu(n.emulatorConfig.host)&&(u.credentials="include"),n2.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function pD(n,e){return du(n,"POST","/v2/accounts:revokeToken",i0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const r=xx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await dD(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new jl;return i&&(ze(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(ze(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(ze(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jl,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:r,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new cD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Xc(this,this.stsTokenManager.getToken(this.auth,e));return ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return lD(this,e)}reload(){return hD(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(wa(this.auth));const e=await this.getIdToken();return await Xc(this,aD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const i=r.displayName??void 0,s=r.email??void 0,o=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,c=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:v,providerData:w,stsTokenManager:b}=r;ze(p&&b,e,"internal-error");const S=jl.fromJSON(this.name,b);ze(typeof p=="string",e,"internal-error"),Gs(i,e.name),Gs(s,e.name),ze(typeof m=="boolean",e,"internal-error"),ze(typeof v=="boolean",e,"internal-error"),Gs(o,e.name),Gs(a,e.name),Gs(l,e.name),Gs(u,e.name),Gs(c,e.name),Gs(h,e.name);const E=new pi({uid:p,auth:e,email:s,emailVerified:m,displayName:i,isAnonymous:v,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:S,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(E.providerData=w.map(I=>({...I}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,r,i=!1){const s=new jl;s.updateFromServerResponse(r);const o=new pi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Nd(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];ze(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?s2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new jl;l.updateFromIdToken(i);const u=new pi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new dy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Map;function ws(n){Rs(n instanceof Function,"Expected a class definition");let e=bx.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}o2.type="NONE";const Ex=o2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n,e,r){return`firebase:${n}:${e}:${r}`}class Dl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Vf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Vf("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Ad(this.auth,{idToken:e}).catch(()=>{});return r?pi._fromGetAccountInfoResponse(this.auth,r,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Dl(ws(Ex),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||ws(Ex);const a=Vf(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const h=await c._get(a);if(h){let p;if(typeof h=="string"){const m=await Ad(e,{idToken:h}).catch(()=>{});if(!m)break;p=await pi._fromGetAccountInfoResponse(e,m,h)}else p=pi._fromJSON(e,h);c!==o&&(l=p),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Dl(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new Dl(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f2(e))return"Blackberry";if(d2(e))return"Webos";if(l2(e))return"Safari";if((e.includes("chrome/")||u2(e))&&!e.includes("edge/"))return"Chrome";if(h2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function a2(n=Ln()){return/firefox\//i.test(n)}function l2(n=Ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u2(n=Ln()){return/crios\//i.test(n)}function c2(n=Ln()){return/iemobile/i.test(n)}function h2(n=Ln()){return/android/i.test(n)}function f2(n=Ln()){return/blackberry/i.test(n)}function d2(n=Ln()){return/webos/i.test(n)}function o0(n=Ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mD(n=Ln()){var e;return o0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function gD(){return CO()&&document.documentMode===10}function p2(n=Ln()){return o0(n)||h2(n)||d2(n)||f2(n)||/windows phone/i.test(n)||c2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n,e=[]){let r;switch(n){case"Browser":r=Tx(Ln());break;case"Worker":r=`${Tx(Ln())}-${n}`;break;default:r=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${fu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(n,e={}){return du(n,"GET","/v2/passwordPolicy",i0(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=6;class wD{constructor(e){var i;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??_D,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ix(this),this.idTokenSubscription=new Ix(this),this.beforeStateQueue=new yD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ws(r)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Ad(this,{idToken:e}),i=await pi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(fi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(wa(this));const r=e?Yt(e):null;return r&&ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vD(this),r=new wD(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await pD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ws(e)||this._popupRedirectResolver;ze(r,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[ws(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var r;if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&Xj(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kp(n){return Yt(n)}class Ix{constructor(e){this.auth=e,this.observer=null,this.addObserver=jO(r=>this.observer=r)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bD(n){a0=n}function ED(n){return a0.loadJS(n)}function TD(){return a0.gapiScript}function ID(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n,e){const r=$a(n,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(So(o,e??{}))return s;Yi(s,"already-initialized")}return r.initialize({options:e})}function CD(n,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(ws);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function kD(n,e,r){const i=kp(n);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=g2(e),{host:a,port:l}=AD(e),u=l===null?"":`:${l}`,c={url:`${o}//${a}${u}/`},h=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(So(c,i.config.emulator)&&So(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,hu(a)?(BI(`${o}//${a}${u}`),qI("Auth",!0)):ND()}function g2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AD(n){const e=g2(n),r=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Sx(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:Sx(a)}}}function Sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ND(){function n(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,r){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(n,e){return sD(n,"POST","/v1/accounts:signInWithIdp",i0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="http://localhost";class Ra extends y2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Yi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...o}=r;if(!i||!s)return null;const a=new Ra(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ml(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Ml(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ml(e,r)}buildRequest(){const e={requestUri:RD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=yh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends l0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends _h{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends _h{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ra._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return gs.credential(r,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends _h{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.GITHUB_SIGN_IN_METHOD="github.com";io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends _h{constructor(){super("twitter.com")}static credential(e,r){return Ra._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return so.credential(r,i)}catch{return null}}}so.TWITTER_SIGN_IN_METHOD="twitter.com";so.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await pi._fromIdTokenResponse(e,i,s),a=Cx(i);return new Xl({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=Cx(i);return new Xl({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function Cx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Ei{constructor(e,r,i,s){super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new Rd(e,r,i,s)}}function v2(n,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(n):r._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(n,o,e,i):o})}async function PD(n,e,r=!1){const i=await Xc(n,e._linkToIdToken(n.auth,await n.getIdToken()),r);return Xl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(n,e,r=!1){const{auth:i}=n;if(fi(i.app))return Promise.reject(wa(i));const s="reauthenticate";try{const o=await Xc(n,v2(i,s,e,n),r);ze(o.idToken,i,"internal-error");const a=s0(o.idToken);ze(a,i,"internal-error");const{sub:l}=a;return ze(n.uid===l,i,"user-mismatch"),Xl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Yi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n,e,r=!1){if(fi(n.app))return Promise.reject(wa(n));const i="signIn",s=await v2(n,i,e),o=await Xl._fromIdTokenResponse(n,i,s);return r||await n._updateCurrentUser(o.user),o}function DD(n,e,r,i){return Yt(n).onIdTokenChanged(e,r,i)}function MD(n,e,r){return Yt(n).beforeAuthStateChanged(e,r)}function LD(n,e,r,i){return Yt(n).onAuthStateChanged(e,r,i)}function VD(n){return Yt(n).signOut()}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=1e3,UD=10;class w2 extends _2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UD):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},FD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}w2.type="LOCAL";const zD=w2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2 extends _2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}x2.type="SESSION";const b2=x2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new Ap(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await $D(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return n+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=u0("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function qD(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function HD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function WD(){return E2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebaseLocalStorageDb",GD=1,Od="firebaseLocalStorage",I2="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Np(n,e){return n.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function QD(){const n=indexedDB.deleteDatabase(T2);return new wh(n).toPromise()}function py(){const n=indexedDB.open(T2,GD);return new Promise((e,r)=>{n.addEventListener("error",()=>{r(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Od,{keyPath:I2})}catch(s){r(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await QD(),e(await py()))})})}async function kx(n,e,r){const i=Np(n,!0).put({[I2]:e,value:r});return new wh(i).toPromise()}async function YD(n,e){const r=Np(n,!1).get(e),i=await new wh(r).toPromise();return i===void 0?null:i.value}function Ax(n,e){const r=Np(n,!0).delete(e);return new wh(r).toPromise()}const XD=800,JD=3;class S2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await py(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>JD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ap._getInstance(WD()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,i;if(this.activeServiceWorker=await HD(),!this.activeServiceWorker)return;this.sender=new BD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await py();return await kx(e,Pd,"1"),await Ax(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>kx(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>YD(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ax(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Np(s,!1).getAll();return new wh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S2.type="LOCAL";const ZD=S2;new vh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(n,e){return e?ws(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends y2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ml(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ml(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function e4(n){return jD(n.auth,new c0(n),n.bypassAuthState)}function t4(n){const{auth:e,user:r}=n;return ze(r,e,"internal-error"),OD(r,new c0(n),n.bypassAuthState)}async function n4(n){const{auth:e,user:r}=n;return ze(r,e,"internal-error"),PD(r,new c0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:Yi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=new vh(2e3,1e4);async function i4(n,e,r){if(fi(n.app))return Promise.reject(vi(n,"operation-not-supported-in-this-environment"));const i=kp(n);Jj(n,e,l0);const s=C2(i,r);return new da(i,"signInViaPopup",e,s).executeNotNull()}class da extends k2{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,da.currentPopupAction&&da.currentPopupAction.cancel(),da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=u0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if((i=(r=this.authWindow)==null?void 0:r.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r4.get())};e()}}da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="pendingRedirect",Ff=new Map;class o4 extends k2{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const i=await a4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a4(n,e){const r=c4(e),i=u4(n);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function l4(n,e){Ff.set(n._key(),e)}function u4(n){return ws(n._redirectPersistence)}function c4(n){return Vf(s4,n.config.apiKey,n.name)}async function h4(n,e,r=!1){if(fi(n.app))return Promise.reject(wa(n));const i=kp(n),s=C2(i,e),a=await new o4(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=10*60*1e3;class d4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p4(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!A2(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";r.onError(vi(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nx(e))}saveEventToCache(e){this.cachedEventUids.add(Nx(e)),this.lastProcessedEventTime=Date.now()}}function Nx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function A2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function p4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(n,e={}){return du(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y4=/^https?/;async function v4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await m4(n);for(const r of e)try{if(_4(r))return}catch{}Yi(n,"unauthorized-domain")}function _4(n){const e=fy(),{protocol:r,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?r==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!y4.test(r))return!1;if(g4.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new vh(3e4,6e4);function Rx(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let r=0;r<n.CP.length;r++)n.CP[r]=null}}function x4(n){return new Promise((e,r)=>{var s,o,a;function i(){Rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rx(),r(vi(n,"network-request-failed"))},timeout:w4.get()})}if((o=(s=qi().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=qi().gapi)!=null&&a.load)i();else{const l=ID("iframefcb");return qi()[l]=()=>{gapi.load?i():r(vi(n,"network-request-failed"))},ED(`${TD()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function b4(n){return Uf=Uf||x4(n),Uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new vh(5e3,15e3),T4="__/auth/iframe",I4="emulator/auth/iframe",S4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k4(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const r=e.emulator?r0(e,I4):`https://${n.config.authDomain}/${T4}`,i={apiKey:e.apiKey,appName:n.name,v:fu},s=C4.get(n.config.apiHost);s&&(i.eid=s);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${yh(i).slice(1)}`}async function A4(n){const e=await b4(n),r=qi().gapi;return ze(r,n,"internal-error"),e.open({where:document.body,url:k4(n),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S4,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=vi(n,"network-request-failed"),l=qi().setTimeout(()=>{o(a)},E4.get());function u(){qi().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R4=500,P4=600,O4="_blank",j4="http://localhost";class Px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(n,e,r,i=R4,s=P4){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u={...N4,width:i.toString(),height:s.toString(),top:o,left:a},c=Ln().toLowerCase();r&&(l=u2(c)?O4:r),a2(c)&&(e=e||j4,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(mD(c)&&l!=="_self")return M4(e||"",l),new Px(null);const p=window.open(e||"",l,h);ze(p,n,"popup-blocked");try{p.focus()}catch{}return new Px(p)}function M4(n,e){const r=document.createElement("a");r.href=n,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="__/auth/handler",V4="emulator/auth/handler",F4=encodeURIComponent("fac");async function Ox(n,e,r,i,s,o){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:r,redirectUrl:i,v:fu,eventId:s};if(e instanceof l0){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",OO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof _h){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await n._getAppCheckToken(),c=u?`#${F4}=${encodeURIComponent(u)}`:"";return`${U4(n)}?${yh(l).slice(1)}${c}`}function U4({config:n}){return n.emulator?r0(n,V4):`https://${n.authDomain}/${L4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class z4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b2,this._completeRedirectFn=h4,this._overrideRedirectResult=l4}async _openPopup(e,r,i,s){var a;Rs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Ox(e,r,i,fy(),s);return D4(e,o,u0())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await Ox(e,r,i,fy(),s);return qD(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Rs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await A4(e),i=new d4(e);return r.register("authEvent",s=>(ze(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send($m,{type:$m},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[$m];o!==void 0&&r(!!o),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=v4(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return p2()||l2()||o0()}}const $4=z4;var jx="@firebase/auth",Dx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H4(n){Qi(new xi("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;ze(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m2(n)},c=new xD(i,s,o,u);return CD(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Qi(new xi("auth-internal",e=>{const r=kp(e.getProvider("auth").getImmediate());return(i=>new B4(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(jx,Dx,q4(n)),qr(jx,Dx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=5*60,W4=$I("authIdTokenMaxAge")||K4;let Mx=null;const G4=n=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>W4)return;const s=r==null?void 0:r.token;Mx!==s&&(Mx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Q4(n=e0()){const e=$a(n,"auth");if(e.isInitialized())return e.getImmediate();const r=SD(n,{popupRedirectResolver:$4,persistence:[ZD,zD,b2]}),i=$I("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=G4(o.toString());MD(r,a,()=>a(r.currentUser)),DD(r,l=>a(l))}}const s=UI("auth");return s&&kD(r,`http://${s}`),r}function Y4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}bD({loadJS(n){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const o=vi("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",Y4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H4("Browser");var Lx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,N2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,C){function D(){}D.prototype=C.prototype,k.F=C.prototype,k.prototype=new D,k.prototype.constructor=k,k.D=function(V,U,B){for(var j=Array(arguments.length-2),F=2;F<arguments.length;F++)j[F-2]=arguments[F];return C.prototype[U].apply(V,j)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,r),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,C,D){D||(D=0);const V=Array(16);if(typeof C=="string")for(var U=0;U<16;++U)V[U]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(U=0;U<16;++U)V[U]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=k.g[0],D=k.g[1],U=k.g[2];let B=k.g[3],j;j=C+(B^D&(U^B))+V[0]+3614090360&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(U^C&(D^U))+V[1]+3905402710&4294967295,B=C+(j<<12&4294967295|j>>>20),j=U+(D^B&(C^D))+V[2]+606105819&4294967295,U=B+(j<<17&4294967295|j>>>15),j=D+(C^U&(B^C))+V[3]+3250441966&4294967295,D=U+(j<<22&4294967295|j>>>10),j=C+(B^D&(U^B))+V[4]+4118548399&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(U^C&(D^U))+V[5]+1200080426&4294967295,B=C+(j<<12&4294967295|j>>>20),j=U+(D^B&(C^D))+V[6]+2821735955&4294967295,U=B+(j<<17&4294967295|j>>>15),j=D+(C^U&(B^C))+V[7]+4249261313&4294967295,D=U+(j<<22&4294967295|j>>>10),j=C+(B^D&(U^B))+V[8]+1770035416&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(U^C&(D^U))+V[9]+2336552879&4294967295,B=C+(j<<12&4294967295|j>>>20),j=U+(D^B&(C^D))+V[10]+4294925233&4294967295,U=B+(j<<17&4294967295|j>>>15),j=D+(C^U&(B^C))+V[11]+2304563134&4294967295,D=U+(j<<22&4294967295|j>>>10),j=C+(B^D&(U^B))+V[12]+1804603682&4294967295,C=D+(j<<7&4294967295|j>>>25),j=B+(U^C&(D^U))+V[13]+4254626195&4294967295,B=C+(j<<12&4294967295|j>>>20),j=U+(D^B&(C^D))+V[14]+2792965006&4294967295,U=B+(j<<17&4294967295|j>>>15),j=D+(C^U&(B^C))+V[15]+1236535329&4294967295,D=U+(j<<22&4294967295|j>>>10),j=C+(U^B&(D^U))+V[1]+4129170786&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^U&(C^D))+V[6]+3225465664&4294967295,B=C+(j<<9&4294967295|j>>>23),j=U+(C^D&(B^C))+V[11]+643717713&4294967295,U=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(U^B))+V[0]+3921069994&4294967295,D=U+(j<<20&4294967295|j>>>12),j=C+(U^B&(D^U))+V[5]+3593408605&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^U&(C^D))+V[10]+38016083&4294967295,B=C+(j<<9&4294967295|j>>>23),j=U+(C^D&(B^C))+V[15]+3634488961&4294967295,U=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(U^B))+V[4]+3889429448&4294967295,D=U+(j<<20&4294967295|j>>>12),j=C+(U^B&(D^U))+V[9]+568446438&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^U&(C^D))+V[14]+3275163606&4294967295,B=C+(j<<9&4294967295|j>>>23),j=U+(C^D&(B^C))+V[3]+4107603335&4294967295,U=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(U^B))+V[8]+1163531501&4294967295,D=U+(j<<20&4294967295|j>>>12),j=C+(U^B&(D^U))+V[13]+2850285829&4294967295,C=D+(j<<5&4294967295|j>>>27),j=B+(D^U&(C^D))+V[2]+4243563512&4294967295,B=C+(j<<9&4294967295|j>>>23),j=U+(C^D&(B^C))+V[7]+1735328473&4294967295,U=B+(j<<14&4294967295|j>>>18),j=D+(B^C&(U^B))+V[12]+2368359562&4294967295,D=U+(j<<20&4294967295|j>>>12),j=C+(D^U^B)+V[5]+4294588738&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^U)+V[8]+2272392833&4294967295,B=C+(j<<11&4294967295|j>>>21),j=U+(B^C^D)+V[11]+1839030562&4294967295,U=B+(j<<16&4294967295|j>>>16),j=D+(U^B^C)+V[14]+4259657740&4294967295,D=U+(j<<23&4294967295|j>>>9),j=C+(D^U^B)+V[1]+2763975236&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^U)+V[4]+1272893353&4294967295,B=C+(j<<11&4294967295|j>>>21),j=U+(B^C^D)+V[7]+4139469664&4294967295,U=B+(j<<16&4294967295|j>>>16),j=D+(U^B^C)+V[10]+3200236656&4294967295,D=U+(j<<23&4294967295|j>>>9),j=C+(D^U^B)+V[13]+681279174&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^U)+V[0]+3936430074&4294967295,B=C+(j<<11&4294967295|j>>>21),j=U+(B^C^D)+V[3]+3572445317&4294967295,U=B+(j<<16&4294967295|j>>>16),j=D+(U^B^C)+V[6]+76029189&4294967295,D=U+(j<<23&4294967295|j>>>9),j=C+(D^U^B)+V[9]+3654602809&4294967295,C=D+(j<<4&4294967295|j>>>28),j=B+(C^D^U)+V[12]+3873151461&4294967295,B=C+(j<<11&4294967295|j>>>21),j=U+(B^C^D)+V[15]+530742520&4294967295,U=B+(j<<16&4294967295|j>>>16),j=D+(U^B^C)+V[2]+3299628645&4294967295,D=U+(j<<23&4294967295|j>>>9),j=C+(U^(D|~B))+V[0]+4096336452&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~U))+V[7]+1126891415&4294967295,B=C+(j<<10&4294967295|j>>>22),j=U+(C^(B|~D))+V[14]+2878612391&4294967295,U=B+(j<<15&4294967295|j>>>17),j=D+(B^(U|~C))+V[5]+4237533241&4294967295,D=U+(j<<21&4294967295|j>>>11),j=C+(U^(D|~B))+V[12]+1700485571&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~U))+V[3]+2399980690&4294967295,B=C+(j<<10&4294967295|j>>>22),j=U+(C^(B|~D))+V[10]+4293915773&4294967295,U=B+(j<<15&4294967295|j>>>17),j=D+(B^(U|~C))+V[1]+2240044497&4294967295,D=U+(j<<21&4294967295|j>>>11),j=C+(U^(D|~B))+V[8]+1873313359&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~U))+V[15]+4264355552&4294967295,B=C+(j<<10&4294967295|j>>>22),j=U+(C^(B|~D))+V[6]+2734768916&4294967295,U=B+(j<<15&4294967295|j>>>17),j=D+(B^(U|~C))+V[13]+1309151649&4294967295,D=U+(j<<21&4294967295|j>>>11),j=C+(U^(D|~B))+V[4]+4149444226&4294967295,C=D+(j<<6&4294967295|j>>>26),j=B+(D^(C|~U))+V[11]+3174756917&4294967295,B=C+(j<<10&4294967295|j>>>22),j=U+(C^(B|~D))+V[2]+718787259&4294967295,U=B+(j<<15&4294967295|j>>>17),j=D+(B^(U|~C))+V[9]+3951481745&4294967295,k.g[0]=k.g[0]+C&4294967295,k.g[1]=k.g[1]+(U+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+U&4294967295,k.g[3]=k.g[3]+B&4294967295}i.prototype.v=function(k,C){C===void 0&&(C=k.length);const D=C-this.blockSize,V=this.C;let U=this.h,B=0;for(;B<C;){if(U==0)for(;B<=D;)s(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<C;)if(V[U++]=k.charCodeAt(B++),U==this.blockSize){s(this,V),U=0;break}}else for(;B<C;)if(V[U++]=k[B++],U==this.blockSize){s(this,V),U=0;break}}this.h=U,this.o+=C},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var C=1;C<k.length-8;++C)k[C]=0;C=this.o*8;for(var D=k.length-8;D<k.length;++D)k[D]=C&255,C/=256;for(this.v(k),k=Array(16),C=0,D=0;D<4;++D)for(let V=0;V<32;V+=8)k[C++]=this.g[D]>>>V&255;return k};function o(k,C){var D=l;return Object.prototype.hasOwnProperty.call(D,k)?D[k]:D[k]=C(k)}function a(k,C){this.h=C;const D=[];let V=!0;for(let U=k.length-1;U>=0;U--){const B=k[U]|0;V&&B==C||(D[U]=B,V=!1)}this.g=D}var l={};function u(k){return-128<=k&&k<128?o(k,function(C){return new a([C|0],C<0?-1:0)}):new a([k|0],k<0?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return S(c(-k));const C=[];let D=1;for(let V=0;k>=D;V++)C[V]=k/D|0,D*=4294967296;return new a(C,0)}function h(k,C){if(k.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k.charAt(0)=="-")return S(h(k.substring(1),C));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=c(Math.pow(C,8));let V=p;for(let B=0;B<k.length;B+=8){var U=Math.min(8,k.length-B);const j=parseInt(k.substring(B,B+U),C);U<8?(U=c(Math.pow(C,U)),V=V.j(U).add(c(j))):(V=V.j(D),V=V.add(c(j)))}return V}var p=u(0),m=u(1),v=u(16777216);n=a.prototype,n.m=function(){if(b(this))return-S(this).m();let k=0,C=1;for(let D=0;D<this.g.length;D++){const V=this.i(D);k+=(V>=0?V:4294967296+V)*C,C*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(w(this))return"0";if(b(this))return"-"+S(this).toString(k);const C=c(Math.pow(k,6));var D=this;let V="";for(;;){const U=P(D,C).g;D=E(D,U.j(C));let B=((D.g.length>0?D.g[0]:D.h)>>>0).toString(k);if(D=U,w(D))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function w(k){if(k.h!=0)return!1;for(let C=0;C<k.g.length;C++)if(k.g[C]!=0)return!1;return!0}function b(k){return k.h==-1}n.l=function(k){return k=E(this,k),b(k)?-1:w(k)?0:1};function S(k){const C=k.g.length,D=[];for(let V=0;V<C;V++)D[V]=~k.g[V];return new a(D,~k.h).add(m)}n.abs=function(){return b(this)?S(this):this},n.add=function(k){const C=Math.max(this.g.length,k.g.length),D=[];let V=0;for(let U=0;U<=C;U++){let B=V+(this.i(U)&65535)+(k.i(U)&65535),j=(B>>>16)+(this.i(U)>>>16)+(k.i(U)>>>16);V=j>>>16,B&=65535,j&=65535,D[U]=j<<16|B}return new a(D,D[D.length-1]&-2147483648?-1:0)};function E(k,C){return k.add(S(C))}n.j=function(k){if(w(this)||w(k))return p;if(b(this))return b(k)?S(this).j(S(k)):S(S(this).j(k));if(b(k))return S(this.j(S(k)));if(this.l(v)<0&&k.l(v)<0)return c(this.m()*k.m());const C=this.g.length+k.g.length,D=[];for(var V=0;V<2*C;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<k.g.length;U++){const B=this.i(V)>>>16,j=this.i(V)&65535,F=k.i(U)>>>16,Z=k.i(U)&65535;D[2*V+2*U]+=j*Z,I(D,2*V+2*U),D[2*V+2*U+1]+=B*Z,I(D,2*V+2*U+1),D[2*V+2*U+1]+=j*F,I(D,2*V+2*U+1),D[2*V+2*U+2]+=B*F,I(D,2*V+2*U+2)}for(k=0;k<C;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=C;k<2*C;k++)D[k]=0;return new a(D,0)};function I(k,C){for(;(k[C]&65535)!=k[C];)k[C+1]+=k[C]>>>16,k[C]&=65535,C++}function R(k,C){this.g=k,this.h=C}function P(k,C){if(w(C))throw Error("division by zero");if(w(k))return new R(p,p);if(b(k))return C=P(S(k),C),new R(S(C.g),S(C.h));if(b(C))return C=P(k,S(C)),new R(S(C.g),C.h);if(k.g.length>30){if(b(k)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var D=m,V=C;V.l(k)<=0;)D=M(D),V=M(V);var U=L(D,1),B=L(V,1);for(V=L(V,2),D=L(D,2);!w(V);){var j=B.add(V);j.l(k)<=0&&(U=U.add(D),B=j),V=L(V,1),D=L(D,1)}return C=E(k,U.j(C)),new R(U,C)}for(U=p;k.l(C)>=0;){for(D=Math.max(1,Math.floor(k.m()/C.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=c(D),j=B.j(C);b(j)||j.l(k)>0;)D-=V,B=c(D),j=B.j(C);w(B)&&(B=m),U=U.add(B),k=E(k,j)}return new R(U,k)}n.B=function(k){return P(this,k).h},n.and=function(k){const C=Math.max(this.g.length,k.g.length),D=[];for(let V=0;V<C;V++)D[V]=this.i(V)&k.i(V);return new a(D,this.h&k.h)},n.or=function(k){const C=Math.max(this.g.length,k.g.length),D=[];for(let V=0;V<C;V++)D[V]=this.i(V)|k.i(V);return new a(D,this.h|k.h)},n.xor=function(k){const C=Math.max(this.g.length,k.g.length),D=[];for(let V=0;V<C;V++)D[V]=this.i(V)^k.i(V);return new a(D,this.h^k.h)};function M(k){const C=k.g.length+1,D=[];for(let V=0;V<C;V++)D[V]=k.i(V)<<1|k.i(V-1)>>>31;return new a(D,k.h)}function L(k,C){const D=C>>5;C%=32;const V=k.g.length-D,U=[];for(let B=0;B<V;B++)U[B]=C>0?k.i(B+D)>>>C|k.i(B+D+1)<<32-C:k.i(B+D);return new a(U,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,N2=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,bo=a}).apply(typeof Lx<"u"?Lx:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R2,nc,P2,zf,my,O2,j2,D2;(function(){var n,e=Object.defineProperty;function r(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var x=0;x<f.length;++x){var A=f[x];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=r(this);function s(f,x){if(x)e:{var A=i;f=f.split(".");for(var z=0;z<f.length-1;z++){var ie=f[z];if(!(ie in A))break e;A=A[ie]}f=f[f.length-1],z=A[f],x=x(z),x!=z&&x!=null&&e(A,f,{configurable:!0,writable:!0,value:x})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(x){var A=[],z;for(z in x)Object.prototype.hasOwnProperty.call(x,z)&&A.push([z,x[z]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function u(f,x,A){return f.call.apply(f.bind,arguments)}function c(f,x,A){return c=u,c.apply(null,arguments)}function h(f,x){var A=Array.prototype.slice.call(arguments,1);return function(){var z=A.slice();return z.push.apply(z,arguments),f.apply(this,z)}}function p(f,x){function A(){}A.prototype=x.prototype,f.Z=x.prototype,f.prototype=new A,f.prototype.constructor=f,f.Ob=function(z,ie,ae){for(var be=Array(arguments.length-2),He=2;He<arguments.length;He++)be[He-2]=arguments[He];return x.prototype[ie].apply(z,be)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function v(f){const x=f.length;if(x>0){const A=Array(x);for(let z=0;z<x;z++)A[z]=f[z];return A}return[]}function w(f,x){for(let z=1;z<arguments.length;z++){const ie=arguments[z];var A=typeof ie;if(A=A!="object"?A:ie?Array.isArray(ie)?"array":A:"null",A=="array"||A=="object"&&typeof ie.length=="number"){A=f.length||0;const ae=ie.length||0;f.length=A+ae;for(let be=0;be<ae;be++)f[A+be]=ie[be]}else f.push(ie)}}class b{constructor(x,A){this.i=x,this.j=A,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function S(f){a.setTimeout(()=>{throw f},0)}function E(){var f=k;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class I{constructor(){this.h=this.g=null}add(x,A){const z=R.get();z.set(x,A),this.h?this.h.next=z:this.g=z,this.h=z}}var R=new b(()=>new P,f=>f.reset());class P{constructor(){this.next=this.g=this.h=null}set(x,A){this.h=x,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let M,L=!1,k=new I,C=()=>{const f=Promise.resolve(void 0);M=()=>{f.then(D)}};function D(){for(var f;f=E();){try{f.h.call(f.g)}catch(A){S(A)}var x=R;x.j(f),x.h<100&&(x.h++,f.next=x.g,x.g=f)}L=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};a.addEventListener("test",A,x),a.removeEventListener("test",A,x)}catch{}return f}();function j(f){return/^[\s\xa0]*$/.test(f)}function F(f,x){U.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,x)}p(F,U),F.prototype.init=function(f,x){const A=this.type=f.type,z=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget,x||(A=="mouseover"?x=f.fromElement:A=="mouseout"&&(x=f.toElement)),this.relatedTarget=x,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ee=0;function fe(f,x,A,z,ie){this.listener=f,this.proxy=null,this.src=x,this.type=A,this.capture=!!z,this.ha=ie,this.key=++ee,this.da=this.fa=!1}function re(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ue(f,x,A){for(const z in f)x.call(A,f[z],z,f)}function de(f,x){for(const A in f)x.call(void 0,f[A],A,f)}function Ie(f){const x={};for(const A in f)x[A]=f[A];return x}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(f,x){let A,z;for(let ie=1;ie<arguments.length;ie++){z=arguments[ie];for(A in z)f[A]=z[A];for(let ae=0;ae<ce.length;ae++)A=ce[ae],Object.prototype.hasOwnProperty.call(z,A)&&(f[A]=z[A])}}function Pe(f){this.src=f,this.g={},this.h=0}Pe.prototype.add=function(f,x,A,z,ie){const ae=f.toString();f=this.g[ae],f||(f=this.g[ae]=[],this.h++);const be=Ge(f,x,z,ie);return be>-1?(x=f[be],A||(x.fa=!1)):(x=new fe(x,this.src,ae,!!z,ie),x.fa=A,f.push(x)),x};function Me(f,x){const A=x.type;if(A in f.g){var z=f.g[A],ie=Array.prototype.indexOf.call(z,x,void 0),ae;(ae=ie>=0)&&Array.prototype.splice.call(z,ie,1),ae&&(re(x),f.g[A].length==0&&(delete f.g[A],f.h--))}}function Ge(f,x,A,z){for(let ie=0;ie<f.length;++ie){const ae=f[ie];if(!ae.da&&ae.listener==x&&ae.capture==!!A&&ae.ha==z)return ie}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Xt={};function Le(f,x,A,z,ie){if(Array.isArray(x)){for(let ae=0;ae<x.length;ae++)Le(f,x[ae],A,z,ie);return null}return A=Ft(A),f&&f[Z]?f.J(x,A,l(z)?!!z.capture:!1,ie):_u(f,x,A,!1,z,ie)}function _u(f,x,A,z,ie,ae){if(!x)throw Error("Invalid event type");const be=l(ie)?!!ie.capture:!!ie;let He=Se(f);if(He||(f[Be]=He=new Pe(f)),A=He.add(x,A,z,be,ae),A.proxy)return A;if(z=zo(),A.proxy=z,z.src=f,z.listener=A,f.addEventListener)B||(ie=be),ie===void 0&&(ie=!1),f.addEventListener(x.toString(),z,ie);else if(f.attachEvent)f.attachEvent(Ha(x.toString()),z);else if(f.addListener&&f.removeListener)f.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return A}function zo(){function f(A){return x.call(f.src,f.listener,A)}const x=Gr;return f}function Je(f,x,A,z,ie){if(Array.isArray(x))for(var ae=0;ae<x.length;ae++)Je(f,x[ae],A,z,ie);else z=l(z)?!!z.capture:!!z,A=Ft(A),f&&f[Z]?(f=f.i,ae=String(x).toString(),ae in f.g&&(x=f.g[ae],A=Ge(x,A,z,ie),A>-1&&(re(x[A]),Array.prototype.splice.call(x,A,1),x.length==0&&(delete f.g[ae],f.h--)))):f&&(f=Se(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Ge(x,A,z,ie)),(A=f>-1?x[f]:null)&&or(A))}function or(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[Z])Me(x.i,f);else{var A=f.type,z=f.proxy;x.removeEventListener?x.removeEventListener(A,z,f.capture):x.detachEvent?x.detachEvent(Ha(A),z):x.addListener&&x.removeListener&&x.removeListener(z),(A=Se(x))?(Me(A,f),A.h==0&&(A.src=null,x[Be]=null)):re(f)}}}function Ha(f){return f in Xt?Xt[f]:Xt[f]="on"+f}function Gr(f,x){if(f.da)f=!0;else{x=new F(x,this);const A=f.listener,z=f.ha||f.src;f.fa&&or(f),f=A.call(z,x)}return f}function Se(f){return f=f[Be],f instanceof Pe?f:null}var Ye="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ft(f){return typeof f=="function"?f:(f[Ye]||(f[Ye]=function(x){return f.handleEvent(x)}),f[Ye])}function ht(){V.call(this),this.i=new Pe(this),this.M=this,this.G=null}p(ht,V),ht.prototype[Z]=!0,ht.prototype.removeEventListener=function(f,x,A,z){Je(this,f,x,A,z)};function Ut(f,x){var A,z=f.G;if(z)for(A=[];z;z=z.G)A.push(z);if(f=f.M,z=x.type||x,typeof x=="string")x=new U(x,f);else if(x instanceof U)x.target=x.target||f;else{var ie=x;x=new U(z,f),Ne(x,ie)}ie=!0;let ae,be;if(A)for(be=A.length-1;be>=0;be--)ae=x.g=A[be],ie=hn(ae,z,!0,x)&&ie;if(ae=x.g=f,ie=hn(ae,z,!0,x)&&ie,ie=hn(ae,z,!1,x)&&ie,A)for(be=0;be<A.length;be++)ae=x.g=A[be],ie=hn(ae,z,!1,x)&&ie}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var f=this.i;for(const x in f.g){const A=f.g[x];for(let z=0;z<A.length;z++)re(A[z]);delete f.g[x],f.h--}}this.G=null},ht.prototype.J=function(f,x,A,z){return this.i.add(String(f),x,!1,A,z)},ht.prototype.K=function(f,x,A,z){return this.i.add(String(f),x,!0,A,z)};function hn(f,x,A,z){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();let ie=!0;for(let ae=0;ae<x.length;++ae){const be=x[ae];if(be&&!be.da&&be.capture==A){const He=be.listener,Kt=be.ha||be.src;be.fa&&Me(f.i,be),ie=He.call(Kt,z)!==!1&&ie}}return ie&&!z.defaultPrevented}function $o(f,x){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:a.setTimeout(f,x||0)}function En(f){f.g=$o(()=>{f.g=null,f.i&&(f.i=!1,En(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class Tn extends V{constructor(x,A){super(),this.m=x,this.l=A,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:En(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(f){V.call(this),this.h=f,this.g={}}p(Yn,V);var Sr=[];function Cr(f){ue(f.g,function(x,A){this.g.hasOwnProperty(A)&&or(x)},f),f.g={}}Yn.prototype.N=function(){Yn.Z.N.call(this),Cr(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var es=a.JSON.stringify,kr=a.JSON.parse,ut=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Qr(){}function ar(){}var zt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function lr(){U.call(this,"d")}p(lr,U);function kt(){U.call(this,"c")}p(kt,U);var Re={},ur=null;function sn(){return ur=ur||new ht}Re.Ia="serverreachability";function Vn(f){U.call(this,Re.Ia,f)}p(Vn,U);function _e(f){const x=sn();Ut(x,new Vn(x))}Re.STAT_EVENT="statevent";function cr(f,x){U.call(this,Re.STAT_EVENT,f),this.stat=x}p(cr,U);function Ot(f){const x=sn();Ut(x,new cr(x,f))}Re.Ja="timingevent";function Fn(f,x){U.call(this,Re.Ja,f),this.size=x}p(Fn,U);function mn(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},x)}function At(){this.g=!0}At.prototype.ua=function(){this.g=!1};function Ka(f,x,A,z,ie,ae){f.info(function(){if(f.g)if(ae){var be="",He=ae.split("&");for(let ft=0;ft<He.length;ft++){var Kt=He[ft].split("=");if(Kt.length>1){const jt=Kt[0];Kt=Kt[1];const Rr=jt.split("_");be=Rr.length>=2&&Rr[1]=="type"?be+(jt+"="+Kt+"&"):be+(jt+"=redacted&")}}}else be=null;else be=ae;return"XMLHTTP REQ ("+z+") [attempt "+ie+"]: "+x+`
`+A+`
`+be})}function wu(f,x,A,z,ie,ae,be){f.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ie+"]: "+x+`
`+A+`
`+ae+" "+be})}function hr(f,x,A,z){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+xu(f,A)+(z?" "+z:"")})}function Ms(f,x){f.info(function(){return"TIMEOUT: "+x})}At.prototype.info=function(){};function xu(f,x){if(!f.g)return x;if(!x)return null;try{const ae=JSON.parse(x);if(ae){for(f=0;f<ae.length;f++)if(Array.isArray(ae[f])){var A=ae[f];if(!(A.length<2)){var z=A[1];if(Array.isArray(z)&&!(z.length<1)){var ie=z[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let be=1;be<z.length;be++)z[be]=""}}}}return es(ae)}catch{return x}}var ts={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ht;function bu(){}p(bu,Qr),bu.prototype.g=function(){return new XMLHttpRequest},Ht=new bu;function Ii(f){return encodeURIComponent(String(f))}function Wa(f){var x=1;f=f.split(":");const A=[];for(;x>0&&f.length;)A.push(f.shift()),x--;return f.length&&A.push(f.join(":")),A}function fr(f,x,A,z){this.j=f,this.i=x,this.l=A,this.S=z||1,this.V=new Yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oh}function Oh(){this.i=null,this.g="",this.h=!1}var Yr={},Si={};function Ar(f,x,A){f.M=1,f.A=Go(pr(x)),f.u=A,f.R=!0,Bo(f,null)}function Bo(f,x){f.F=Date.now(),Nr(f),f.B=pr(f.A);var A=f.B,z=f.S;Array.isArray(z)||(z=[String(z)]),Vh(A.i,"t",z),f.C=0,A=f.j.L,f.h=new Oh,f.g=on(f.j,A?x:null,!f.u),f.P>0&&(f.O=new Tn(c(f.Y,f,f.g),f.P)),x=f.V,A=f.g,z=f.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(Sr[0]=ie.toString()),ie=Sr);for(let ae=0;ae<ie.length;ae++){const be=Le(A,ie[ae],z||x.handleEvent,!1,x.h||x);if(!be)break;x.g[be.key]=be}x=f.J?Ie(f.J):{},f.u?(f.v||(f.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,x)):(f.v="GET",f.g.ea(f.B,f.v,null,x)),_e(),Ka(f.i,f.v,f.B,f.l,f.S,f.u)}fr.prototype.ba=function(f){f=f.target;const x=this.O;x&&Ri(f)==3?x.j():this.Y(f)},fr.prototype.Y=function(f){try{if(f==this.g)e:{const He=Ri(this.g),Kt=this.g.ya(),ft=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Us(this.g)))){this.K||He!=4||Kt==7||(Kt==8||ft<=0?_e(3):_e(2)),qo(this);var x=this.g.ca();this.X=x;var A=nm(this);if(this.o=x==200,wu(this.i,this.v,this.B,this.l,this.S,He,x),this.o){if(this.U&&!this.L){t:{if(this.g){var z,ie=this.g;if((z=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(z)){var ae=z;break t}}ae=null}if(f=ae)hr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dr(this,f);else{this.o=!1,this.m=3,Ot(12),Un(this),_t(this);break e}}if(this.R){f=!0;let jt;for(;!this.K&&this.C<A.length;)if(jt=jh(this,A),jt==Si){He==4&&(this.m=4,Ot(14),f=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Yr){this.m=4,Ot(15),hr(this.i,this.l,A,"[Invalid Chunk]"),f=!1;break}else hr(this.i,this.l,jt,null),dr(this,jt);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||A.length!=0||this.h.h||(this.m=1,Ot(16),f=!1),this.o=this.o&&f,!f)hr(this.i,this.l,A,"[Invalid Chunked Response]"),Un(this),_t(this);else if(A.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),qs(be),be.P=!0,Ot(11))}}else hr(this.i,this.l,A,null),dr(this,A);He==4&&Un(this),this.o&&!this.K&&(He==4?os(this.j,this):(this.o=!1,Nr(this)))}else rm(this.g),x==400&&A.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Un(this),_t(this)}}}catch{}finally{}};function nm(f){if(!Xr(f))return f.g.la();const x=Us(f.g);if(x==="")return"";let A="";const z=x.length,ie=Ri(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Un(f),_t(f),"";f.h.i=new a.TextDecoder}for(let ae=0;ae<z;ae++)f.h.h=!0,A+=f.h.i.decode(x[ae],{stream:!(ie&&ae==z-1)});return x.length=0,f.h.g+=A,f.C=0,f.h.g}function Xr(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function jh(f,x){var A=f.C,z=x.indexOf(`
`,A);return z==-1?Si:(A=Number(x.substring(A,z)),isNaN(A)?Yr:(z+=1,z+A>x.length?Si:(x=x.slice(z,z+A),f.C=z+A,x)))}fr.prototype.cancel=function(){this.K=!0,Un(this)};function Nr(f){f.T=Date.now()+f.H,Eu(f,f.H)}function Eu(f,x){if(f.D!=null)throw Error("WatchDog timer not null");f.D=mn(c(f.aa,f),x)}function qo(f){f.D&&(a.clearTimeout(f.D),f.D=null)}fr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Ms(this.i,this.B),this.M!=2&&(_e(),Ot(17)),Un(this),this.m=2,_t(this)):Eu(this,this.T-f)};function _t(f){f.j.I==0||f.K||os(f.j,f)}function Un(f){qo(f);var x=f.O;x&&typeof x.dispose=="function"&&x.dispose(),f.O=null,Cr(f.V),f.g&&(x=f.g,f.g=null,x.abort(),x.dispose())}function dr(f,x){try{var A=f.j;if(A.I!=0&&(A.g==f||Ko(A.h,f))){if(!f.L&&Ko(A.h,f)&&A.I==3){try{var z=A.Ba.g.parse(x)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ie=z;if(ie[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<f.F)nl(A),$s(A);else break e;Bs(A),Ot(18)}}else A.xa=ie[1],0<A.xa-A.K&&ie[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=mn(c(A.Va,A),6e3));Ga(A.h)<=1&&A.ta&&(A.ta=void 0)}else si(A,11)}else if((f.L||A.g==f)&&nl(A),!j(x))for(ie=A.Ba.g.parse(x),x=0;x<ie.length;x++){let ft=ie[x];const jt=ft[0];if(!(jt<=A.K))if(A.K=jt,ft=ft[1],A.I==2)if(ft[0]=="c"){A.M=ft[1],A.ba=ft[2];const Rr=ft[3];Rr!=null&&(A.ka=Rr,A.j.info("VER="+A.ka));const oi=ft[4];oi!=null&&(A.za=oi,A.j.info("SVER="+A.za));const Pr=ft[5];Pr!=null&&typeof Pr=="number"&&Pr>0&&(z=1.5*Pr,A.O=z,A.j.info("backChannelRequestTimeoutMs_="+z)),z=A;const Oi=f.g;if(Oi){const ta=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var ae=z.h;ae.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Jr(ae,ae.h),ae.h=null))}if(z.G){const ju=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;ju&&(z.wa=ju,gt(z.J,z.G,ju))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-f.F,A.j.info("Handshake RTT: "+A.T+"ms")),z=A;var be=f;if(z.na=sl(z,z.L?z.ba:null,z.W),be.L){Tu(z.h,be);var He=be,Kt=z.O;Kt&&(He.H=Kt),He.D&&(qo(He),Nr(He)),z.g=be}else Zo(z);A.i.length>0&&el(A)}else ft[0]!="stop"&&ft[0]!="close"||si(A,7);else A.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?si(A,7):zs(A):ft[0]!="noop"&&A.l&&A.l.qa(ft),A.A=0)}}_e(4)}catch{}}var Dh=class{constructor(f,x){this.g=f,this.map=x}};function ns(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ho(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ga(f){return f.h?1:f.g?f.g.size:0}function Ko(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Jr(f,x){f.g?f.g.add(x):f.h=x}function Tu(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}ns.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Wo(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const A of f.g.values())x=x.concat(A.G);return x}return v(f.i)}var Iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(f,x){if(f){f=f.split("&");for(let A=0;A<f.length;A++){const z=f[A].indexOf("=");let ie,ae=null;z>=0?(ie=f[A].substring(0,z),ae=f[A].substring(z+1)):ie=f[A],x(ie,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Zr(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;f instanceof Zr?(this.l=f.l,Ci(this,f.j),this.o=f.o,this.g=f.g,ei(this,f.u),this.h=f.h,Qa(this,Fh(f.i)),this.m=f.m):f&&(x=String(f).match(Iu))?(this.l=!1,Ci(this,x[1]||"",!0),this.o=ct(x[2]||""),this.g=ct(x[3]||"",!0),ei(this,x[4]),this.h=ct(x[5]||"",!0),Qa(this,x[6]||"",!0),this.m=ct(x[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}Zr.prototype.toString=function(){const f=[];var x=this.j;x&&f.push(ti(x,rs,!0),":");var A=this.g;return(A||x=="file")&&(f.push("//"),(x=this.o)&&f.push(ti(x,rs,!0),"@"),f.push(Ii(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&f.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(ti(A,A.charAt(0)=="/"?Cu:Su,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",ti(A,Mh)),f.join("")},Zr.prototype.resolve=function(f){const x=pr(this);let A=!!f.j;A?Ci(x,f.j):A=!!f.o,A?x.o=f.o:A=!!f.g,A?x.g=f.g:A=f.u!=null;var z=f.h;if(A)ei(x,f.u);else if(A=!!f.h){if(z.charAt(0)!="/")if(this.g&&!this.h)z="/"+z;else{var ie=x.h.lastIndexOf("/");ie!=-1&&(z=x.h.slice(0,ie+1)+z)}if(ie=z,ie==".."||ie==".")z="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){z=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const ae=[];for(let be=0;be<ie.length;){const He=ie[be++];He=="."?z&&be==ie.length&&ae.push(""):He==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),z&&be==ie.length&&ae.push("")):(ae.push(He),z=!0)}z=ae.join("/")}else z=ie}return A?x.h=z:A=f.i.toString()!=="",A?Qa(x,Fh(f.i)):A=!!f.m,A&&(x.m=f.m),x};function pr(f){return new Zr(f)}function Ci(f,x,A){f.j=A?ct(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function ei(f,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);f.u=x}else f.u=null}function Qa(f,x,A){x instanceof ki?(f.i=x,Ls(f.i,f.l)):(A||(x=ti(x,Ya)),f.i=new ki(x,f.l))}function gt(f,x,A){f.i.set(x,A)}function Go(f){return gt(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ct(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ti(f,x,A){return typeof f=="string"?(f=encodeURI(f).replace(x,Qo),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Qo(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var rs=/[#\/\?@]/g,Su=/[#\?:]/g,Cu=/[#\?]/g,Ya=/[#\?@]/g,Mh=/#/g;function ki(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Ai(f){f.g||(f.g=new Map,f.h=0,f.i&&Ze(f.i,function(x,A){f.add(decodeURIComponent(x.replace(/\+/g," ")),A)}))}n=ki.prototype,n.add=function(f,x){Ai(this),this.i=null,f=Jt(this,f);let A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(x),this.h+=1,this};function Lh(f,x){Ai(f),x=Jt(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function st(f,x){return Ai(f),x=Jt(f,x),f.g.has(x)}n.forEach=function(f,x){Ai(this),this.g.forEach(function(A,z){A.forEach(function(ie){f.call(x,ie,z,this)},this)},this)};function ku(f,x){Ai(f);let A=[];if(typeof x=="string")st(f,x)&&(A=A.concat(f.g.get(Jt(f,x))));else for(f=Array.from(f.g.values()),x=0;x<f.length;x++)A=A.concat(f[x]);return A}n.set=function(f,x){return Ai(this),this.i=null,f=Jt(this,f),st(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=ku(this,f),f.length>0?String(f[0]):x):x};function Vh(f,x,A){Lh(f,x),A.length>0&&(f.i=null,f.g.set(Jt(f,x),v(A)),f.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(let z=0;z<x.length;z++){var A=x[z];const ie=Ii(A);A=ku(this,A);for(let ae=0;ae<A.length;ae++){let be=ie;A[ae]!==""&&(be+="="+Ii(A[ae])),f.push(be)}}return this.i=f.join("&")};function Fh(f){const x=new ki;return x.i=f.i,f.g&&(x.g=new Map(f.g),x.h=f.h),x}function Jt(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Ls(f,x){x&&!f.j&&(Ai(f),f.i=null,f.g.forEach(function(A,z){const ie=z.toLowerCase();z!=ie&&(Lh(this,z),Vh(this,ie,A))},f)),f.j=x}function Xa(f,x){const A=new At;if(a.Image){const z=new Image;z.onload=h(ni,A,"TestLoadImage: loaded",!0,x,z),z.onerror=h(ni,A,"TestLoadImage: error",!1,x,z),z.onabort=h(ni,A,"TestLoadImage: abort",!1,x,z),z.ontimeout=h(ni,A,"TestLoadImage: timeout",!1,x,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=f}else x(!1)}function Ni(f,x){const A=new At,z=new AbortController,ie=setTimeout(()=>{z.abort(),ni(A,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:z.signal}).then(ae=>{clearTimeout(ie),ae.ok?ni(A,"TestPingServer: ok",!0,x):ni(A,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(ie),ni(A,"TestPingServer: error",!1,x)})}function ni(f,x,A,z,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),z(A)}catch{}}function Uh(){this.g=new ut}function $t(f){this.i=f.Sb||null,this.h=f.ab||!1}p($t,Qr),$t.prototype.g=function(){return new zn(this.i,this.h)};function zn(f,x){ht.call(this),this.H=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(zn,ht),n=zn.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=x,this.readyState=1,is(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(x.body=f),(this.H||a).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vs(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vs(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?ri(this):is(this),this.readyState==3&&Vs(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,ri(this))},n.Na=function(f){this.g&&(this.response=f,ri(this))},n.ga=function(){this.g&&ri(this)};function ri(f){f.readyState=4,f.l=null,f.j=null,f.B=null,is(f)}n.setRequestHeader=function(f,x){this.A.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var A=x.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=x.next();return f.join(`\r
`)};function is(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(zn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ii(f){let x="";return ue(f,function(A,z){x+=z,x+=":",x+=A,x+=`\r
`}),x}function Au(f,x,A){e:{for(z in A){var z=!1;break e}z=!0}z||(A=ii(A),typeof f=="string"?A!=null&&Ii(A):gt(f,x,A))}function at(f){ht.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(at,ht);var Nu=/^https?$/i,zh=["POST","PUT"];n=at.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,x,A,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ht.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(ae){Ja(this,ae);return}if(f=A||"",A=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ie in z)A.set(ie,z[ie]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ae of z.keys())A.set(ae,z.get(ae));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(A.keys()).find(ae=>ae.toLowerCase()=="content-type"),ie=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(zh,x,void 0)>=0)||z||ie||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,be]of A)this.g.setRequestHeader(ae,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ae){Ja(this,ae)}};function Ja(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.o=5,Fs(f),Yo(f)}function Fs(f){f.A||(f.A=!0,Ut(f,"complete"),Ut(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Ut(this,"complete"),Ut(this,"abort"),Yo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yo(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Za(this):this.Xa())},n.Xa=function(){Za(this)};function Za(f){if(f.h&&typeof o<"u"){if(f.v&&Ri(f)==4)setTimeout(f.Ca.bind(f),0);else if(Ut(f,"readystatechange"),Ri(f)==4){f.h=!1;try{const ae=f.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var A;if(!(A=x)){var z;if(z=ae===0){let be=String(f.D).match(Iu)[1]||null;!be&&a.self&&a.self.location&&(be=a.self.location.protocol.slice(0,-1)),z=!Nu.test(be?be.toLowerCase():"")}A=z}if(A)Ut(f,"complete"),Ut(f,"success");else{f.o=6;try{var ie=Ri(f)>2?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.ca()+"]",Fs(f)}}finally{Yo(f)}}}}function Yo(f,x){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const A=f.g;f.g=null,x||Ut(f,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ri(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),kr(x)}};function Us(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function rm(f){const x={};f=(f.g&&Ri(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<f.length;z++){if(j(f[z]))continue;var A=Wa(f[z]);const ie=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ae=x[ie]||[];x[ie]=ae,ae.push(A)}de(x,function(z){return z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xo(f,x,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||x}function Jo(f){this.za=0,this.i=[],this.j=new At,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xo("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xo("baseRetryDelayMs",5e3,f),this.Za=Xo("retryDelaySeedMs",1e4,f),this.Ta=Xo("forwardChannelMaxRetries",2,f),this.va=Xo("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new ns(f&&f.concurrentRequestLimit),this.Ba=new Uh,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Jo.prototype,n.ka=8,n.I=1,n.connect=function(f,x,A,z){Ot(0),this.W=f,this.H=x||{},A&&z!==void 0&&(this.H.OSID=A,this.H.OAID=z),this.F=this.X,this.J=sl(this,null,this.W),el(this)};function zs(f){if($h(f),f.I==3){var x=f.V++,A=pr(f.J);if(gt(A,"SID",f.M),gt(A,"RID",x),gt(A,"TYPE","terminate"),ss(f,A),x=new fr(f,f.j,x),x.M=2,x.A=Go(pr(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(x.A.toString(),"")}catch{}!A&&a.Image&&(new Image().src=x.A,A=!0),A||(x.g=on(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Nr(x)}il(f)}function $s(f){f.g&&(qs(f),f.g.cancel(),f.g=null)}function $h(f){$s(f),f.v&&(a.clearTimeout(f.v),f.v=null),nl(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function el(f){if(!Ho(f.h)&&!f.m){f.m=!0;var x=f.Ea;M||C(),L||(M(),L=!0),k.add(x,f),f.D=0}}function im(f,x){return Ga(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=x.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=mn(c(f.Ea,f,x),rl(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const ie=new fr(this,this.j,f);let ae=this.o;if(this.U&&(ae?(ae=Ie(ae),Ne(ae,this.U)):ae=this.U),this.u!==null||this.R||(ie.J=ae,ae=null),this.S)e:{for(var x=0,A=0;A<this.i.length;A++){t:{var z=this.i[A];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(x+=z,x>4096){x=A;break e}if(x===4096||A===this.i.length-1){x=A+1;break e}}x=1e3}else x=1e3;x=Ru(this,ie,x),A=pr(this.J),gt(A,"RID",f),gt(A,"CVER",22),this.G&&gt(A,"X-HTTP-Session-Id",this.G),ss(this,A),ae&&(this.R?x="headers="+Ii(ii(ae))+"&"+x:this.u&&Au(A,this.u,ae)),Jr(this.h,ie),this.Ra&&gt(A,"TYPE","init"),this.S?(gt(A,"$req",x),gt(A,"SID","null"),ie.U=!0,Ar(ie,A,null)):Ar(ie,A,x),this.I=2}}else this.I==3&&(f?tl(this,f):this.i.length==0||Ho(this.h)||tl(this))};function tl(f,x){var A;x?A=x.l:A=f.V++;const z=pr(f.J);gt(z,"SID",f.M),gt(z,"RID",A),gt(z,"AID",f.K),ss(f,z),f.u&&f.o&&Au(z,f.u,f.o),A=new fr(f,f.j,A,f.D+1),f.u===null&&(A.J=f.o),x&&(f.i=x.G.concat(f.i)),x=Ru(f,A,1e3),A.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Jr(f.h,A),Ar(A,z,x)}function ss(f,x){f.H&&ue(f.H,function(A,z){gt(x,z,A)}),f.l&&ue({},function(A,z){gt(x,z,A)})}function Ru(f,x,A){A=Math.min(f.i.length,A);const z=f.l?c(f.l.Ka,f.l,f):null;e:{var ie=f.i;let He=-1;for(;;){const Kt=["count="+A];He==-1?A>0?(He=ie[0].g,Kt.push("ofs="+He)):He=0:Kt.push("ofs="+He);let ft=!0;for(let jt=0;jt<A;jt++){var ae=ie[jt].g;const Rr=ie[jt].map;if(ae-=He,ae<0)He=Math.max(0,ie[jt].g-100),ft=!1;else try{ae="req"+ae+"_"||"";try{var be=Rr instanceof Map?Rr:Object.entries(Rr);for(const[oi,Pr]of be){let Oi=Pr;l(Pr)&&(Oi=es(Pr)),Kt.push(ae+oi+"="+encodeURIComponent(Oi))}}catch(oi){throw Kt.push(ae+"type="+encodeURIComponent("_badmap")),oi}}catch{z&&z(Rr)}}if(ft){be=Kt.join("&");break e}}be=void 0}return f=f.i.splice(0,A),x.G=f,be}function Zo(f){if(!f.g&&!f.v){f.Y=1;var x=f.Da;M||C(),L||(M(),L=!0),k.add(x,f),f.A=0}}function Bs(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=mn(c(f.Da,f),rl(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Pu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=mn(c(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),$s(this),Pu(this))};function qs(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function Pu(f){f.g=new fr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var x=pr(f.na);gt(x,"RID","rpc"),gt(x,"SID",f.M),gt(x,"AID",f.K),gt(x,"CI",f.F?"0":"1"),!f.F&&f.ia&&gt(x,"TO",f.ia),gt(x,"TYPE","xmlhttp"),ss(f,x),f.u&&f.o&&Au(x,f.u,f.o),f.O&&(f.g.H=f.O);var A=f.g;f=f.ba,A.M=1,A.A=Go(pr(x)),A.u=null,A.R=!0,Bo(A,f)}n.Va=function(){this.C!=null&&(this.C=null,$s(this),Bs(this),Ot(19))};function nl(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function os(f,x){var A=null;if(f.g==x){nl(f),qs(f),f.g=null;var z=2}else if(Ko(f.h,x))A=x.G,Tu(f.h,x),z=1;else return;if(f.I!=0){if(x.o)if(z==1){A=x.u?x.u.length:0,x=Date.now()-x.F;var ie=f.D;z=sn(),Ut(z,new Fn(z,A)),el(f)}else Zo(f);else if(ie=x.m,ie==3||ie==0&&x.X>0||!(z==1&&im(f,x)||z==2&&Bs(f)))switch(A&&A.length>0&&(x=f.h,x.i=x.i.concat(A)),ie){case 1:si(f,5);break;case 4:si(f,10);break;case 3:si(f,6);break;default:si(f,2)}}}function rl(f,x){let A=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(A*=2),A*x}function si(f,x){if(f.j.info("Error code "+x),x==2){var A=c(f.bb,f),z=f.Ua;const ie=!z;z=new Zr(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ci(z,"https"),Go(z),ie?Xa(z.toString(),A):Ni(z.toString(),A)}else Ot(2);f.I=0,f.l&&f.l.pa(x),il(f),$h(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function il(f){if(f.I=0,f.ja=[],f.l){const x=Wo(f.h);(x.length!=0||f.i.length!=0)&&(w(f.ja,x),w(f.ja,f.i),f.h.i.length=0,v(f.i),f.i.length=0),f.l.oa()}}function sl(f,x,A){var z=A instanceof Zr?pr(A):new Zr(A);if(z.g!="")x&&(z.g=x+"."+z.g),ei(z,z.u);else{var ie=a.location;z=ie.protocol,x=x?x+"."+ie.hostname:ie.hostname,ie=+ie.port;const ae=new Zr(null);z&&Ci(ae,z),x&&(ae.g=x),ie&&ei(ae,ie),A&&(ae.h=A),z=ae}return A=f.G,x=f.wa,A&&x&&gt(z,A,x),gt(z,"VER",f.ka),ss(f,z),z}function on(f,x,A){if(x&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Aa&&!f.ma?new at(new $t({ab:A})):new at(f.ma),x.Fa(f.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hs(){}n=Hs.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pi(){}Pi.prototype.g=function(f,x){return new In(f,x)};function In(f,x){ht.call(this),this.g=new Jo(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(f?f["X-WebChannel-Client-Profile"]=x.sa:f={"X-WebChannel-Client-Profile":x.sa}),this.g.U=f,(f=x&&x.Qb)&&!j(f)&&(this.g.u=f),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!j(x)&&(this.g.G=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new as(this)}p(In,ht),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){zs(this.g)},In.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.v&&(A={},A.__data__=es(f),f=A);x.i.push(new Dh(x.Ya++,f)),x.I==3&&el(x)},In.prototype.N=function(){this.g.l=null,delete this.j,zs(this.g),delete this.g,In.Z.N.call(this)};function ea(f){lr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const A in x){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}p(ea,lr);function Ou(){kt.call(this),this.status=1}p(Ou,kt);function as(f){this.g=f}p(as,Hs),as.prototype.ra=function(){Ut(this.g,"a")},as.prototype.qa=function(f){Ut(this.g,new ea(f))},as.prototype.pa=function(f){Ut(this.g,new Ou)},as.prototype.oa=function(){Ut(this.g,"b")},Pi.prototype.createWebChannel=Pi.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,D2=function(){return new Pi},j2=function(){return sn()},O2=Re,my={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ts.NO_ERROR=0,ts.TIMEOUT=8,ts.HTTP_ERROR=6,zf=ts,vt.COMPLETE="complete",P2=vt,ar.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",ht.prototype.listen=ht.prototype.J,nc=ar,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,R2=at}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu="12.8.0";function X4(n){pu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new Cp("@firebase/firestore");function hl(){return Pa.logLevel}function Oe(n,...e){if(Pa.logLevel<=nt.DEBUG){const r=e.map(h0);Pa.debug(`Firestore (${pu}): ${n}`,...r)}}function Ps(n,...e){if(Pa.logLevel<=nt.ERROR){const r=e.map(h0);Pa.error(`Firestore (${pu}): ${n}`,...r)}}function Jl(n,...e){if(Pa.logLevel<=nt.WARN){const r=e.map(h0);Pa.warn(`Firestore (${pu}): ${n}`,...r)}}function h0(n){if(typeof n=="string")return n;try{return function(r){return JSON.stringify(r)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,M2(n,i,r)}function M2(n,e,r){let i=`FIRESTORE (${pu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(r!==void 0)try{i+=" CONTEXT: "+JSON.stringify(r)}catch{i+=" CONTEXT: "+r}throw Ps(i),new Error(i)}function pt(n,e,r,i){let s="Unexpected state";typeof r=="string"?s=r:i=r,n||M2(e,s,i)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ei{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Pn.UNAUTHENTICATED))}shutdown(){}}class Z4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class eM{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){pt(this.o===void 0,42304);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ts,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ts)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pt(typeof i.accessToken=="string",31837,{l:i}),new L2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class tM{constructor(e,r,i){this.P=e,this.T=r,this.I=i,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class nM{constructor(e,r,i){this.P=e,this.T=r,this.I=i}getToken(){return Promise.resolve(new tM(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rM{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){pt(this.o===void 0,3512);const i=o=>{o.error!=null&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(pt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new Vx(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<n;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=iM(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function rt(n,e){return n<e?-1:n>e?1:0}function gy(n,e){const r=Math.min(n.length,e.length);for(let i=0;i<r;i++){const s=n.charAt(i),o=e.charAt(i);if(s!==o)return Bm(s)===Bm(o)?rt(s,o):Bm(s)?1:-1}return rt(n.length,e.length)}const sM=55296,oM=57343;function Bm(n){const e=n.charCodeAt(0);return e>=sM&&e<=oM}function Zl(n,e,r){return n.length===e.length&&n.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="__name__";class Vi{constructor(e,r,i){r===void 0?r=0:r>e.length&&Ue(637,{offset:r,range:e.length}),i===void 0?i=e.length-r:i>e.length-r&&Ue(1746,{length:i,range:e.length-r}),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Vi.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return rt(e.length,r.length)}static compareSegments(e,r){const i=Vi.isNumericId(e),s=Vi.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Vi.extractNumericId(e).compare(Vi.extractNumericId(r)):gy(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class bt extends Vi{construct(e,r,i){return new bt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new bt(r)}static emptyPath(){return new bt([])}}const aM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends Vi{construct(e,r,i){return new vn(e,r,i)}static isValidIdentifier(e){return aM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fx}static keyField(){return new vn([Fx])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Ae(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ae(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ae(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new Ae(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(r)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(bt.fromString(e))}static fromName(e){return new Fe(bt.fromString(e).popFirst(5))}static empty(){return new Fe(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return bt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(n,e,r){if(!r)throw new Ae(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lM(n,e,r,i){if(e===!0&&i===!0)throw new Ae(pe.INVALID_ARGUMENT,`${n} and ${r} cannot be used together.`)}function Ux(n){if(!Fe.isDocumentKey(n))throw new Ae(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zx(n){if(Fe.isDocumentKey(n))throw new Ae(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function F2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Rp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ue(12329,{type:typeof n})}function Co(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Rp(n);throw new Ae(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,e){const r={typeString:n};return e&&(r.value=e),r}function xh(n,e){if(!F2(n))throw new Ae(pe.INVALID_ARGUMENT,"JSON must be an object");let r;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){r=`JSON missing required field: '${i}'`;break}const a=n[i];if(s&&typeof a!==s){r=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){r=`Expected '${i}' field to equal '${o.value}'`;break}}if(r)throw new Ae(pe.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=-62135596800,Bx=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Bx);return new St(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<$x)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bx}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xh(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:nn("string",St._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new St(0,0))}static max(){return new $e(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=-1;function uM(n,e){const r=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(i===1e9?new St(r+1,0):new St(r,i));return new ko(s,Fe.empty(),e)}function cM(n){return new ko(n.readTime,n.key,Jc)}class ko{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new ko($e.min(),Fe.empty(),Jc)}static max(){return new ko($e.max(),Fe.empty(),Jc)}}function hM(n,e){let r=n.readTime.compareTo(e.readTime);return r!==0?r:(r=Fe.comparator(n.documentKey,e.documentKey),r!==0?r:rt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==fM)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ge((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ge?r:ge.resolve(r)}catch(r){return ge.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ge.reject(r)}static resolve(e){return new ge((r,i)=>{r(e)})}static reject(e){return new ge((r,i)=>{i(e)})}static waitFor(e){return new ge((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=ge.resolve(!1);for(const i of e)r=r.next(s=>s?ge.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new ge((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(h=>{a[c]=h,++l,l===o&&i(a)},h=>s(h))}})}static doWhile(e,r){return new ge((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function pM(n){const e=n.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function gu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=-1;function Op(n){return n==null}function jd(n){return n===0&&1/n==-1/0}function mM(n){return typeof n=="number"&&Number.isInteger(n)&&!jd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="";function gM(n){let e="";for(let r=0;r<n.length;r++)e.length>0&&(e=qx(e)),e=yM(n.get(r),e);return qx(e)}function yM(n,e){let r=e;const i=n.length;for(let s=0;s<i;s++){const o=n.charAt(s);switch(o){case"\0":r+="";break;case U2:r+="";break;default:r+=o}}return r}function qx(n){return n+U2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(n){let e=0;for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e++;return e}function Vo(n,e){for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e(r,n[r])}function z2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r){this.comparator=e,this.root=r||yn.EMPTY}insert(e,r){return new Vt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??yn.RED,this.left=s??yn.EMPTY,this.right=o??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new yn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,r,i,s,o){return this}insert(e,r,i){return new yn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Kx(this.data.getIterator())}getIteratorFrom(e){return new Kx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new cn(this.comparator);return r.data=e,r}}class Kx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new _r([])}unionWith(e){let r=new cn(vn.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new _r(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $2("Invalid base64 string: "+o):o}}(e);return new xn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new xn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const vM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(n){if(pt(!!n,39018),typeof n=="string"){let e=0;const r=vM.exec(n);if(pt(!!r,46558,{timestamp:n}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(n.seconds),nanos:Gt(n.nanos)}}function Gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function No(n){return typeof n=="string"?xn.fromBase64String(n):xn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="server_timestamp",q2="__type__",H2="__previous_value__",K2="__local_write_time__";function p0(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[q2])==null?void 0:i.stringValue)===B2}function jp(n){const e=n.mapValue.fields[H2];return p0(e)?jp(e):e}function Zc(n){const e=Ao(n.mapValue.fields[K2].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,r,i,s,o,a,l,u,c,h,p){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h,this.apiKey=p}}const Dd="(default)";class eh{constructor(e,r){this.projectId=e,this.database=r||Dd}static empty(){return new eh("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof eh&&e.projectId===this.projectId&&e.database===this.database}}function wM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Ae(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eh(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="__type__",xM="__max__",df={mapValue:{}},G2="__vector__",Md="value";function Ro(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?p0(n)?4:EM(n)?9007199254740991:bM(n)?10:11:Ue(28295,{value:n})}function Xi(n,e){if(n===e)return!0;const r=Ro(n);if(r!==Ro(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zc(n).isEqual(Zc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Ao(s.timestampValue),l=Ao(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return No(s.bytesValue).isEqual(No(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Gt(s.geoPointValue.latitude)===Gt(o.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Gt(s.integerValue)===Gt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Gt(s.doubleValue),l=Gt(o.doubleValue);return a===l?jd(a)===jd(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Zl(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Hx(a)!==Hx(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Xi(a[u],l[u])))return!1;return!0}(n,e);default:return Ue(52216,{left:n})}}function th(n,e){return(n.values||[]).find(r=>Xi(r,e))!==void 0}function eu(n,e){if(n===e)return 0;const r=Ro(n),i=Ro(e);if(r!==i)return rt(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Gt(o.integerValue||o.doubleValue),u=Gt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return Wx(n.timestampValue,e.timestampValue);case 4:return Wx(Zc(n),Zc(e));case 5:return gy(n.stringValue,e.stringValue);case 6:return function(o,a){const l=No(o),u=No(a);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=rt(l[c],u[c]);if(h!==0)return h}return rt(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){const l=rt(Gt(o.latitude),Gt(a.latitude));return l!==0?l:rt(Gt(o.longitude),Gt(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Gx(n.arrayValue,e.arrayValue);case 10:return function(o,a){var m,v,w,b;const l=o.fields||{},u=a.fields||{},c=(m=l[Md])==null?void 0:m.arrayValue,h=(v=u[Md])==null?void 0:v.arrayValue,p=rt(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((b=h==null?void 0:h.values)==null?void 0:b.length)||0);return p!==0?p:Gx(c,h)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===df.mapValue&&a===df.mapValue)return 0;if(o===df.mapValue)return 1;if(a===df.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=gy(u[p],h[p]);if(m!==0)return m;const v=eu(l[u[p]],c[h[p]]);if(v!==0)return v}return rt(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Ue(23264,{he:r})}}function Wx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return rt(n,e);const r=Ao(n),i=Ao(e),s=rt(r.seconds,i.seconds);return s!==0?s:rt(r.nanos,i.nanos)}function Gx(n,e){const r=n.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=eu(r[s],i[s]);if(o)return o}return rt(r.length,i.length)}function tu(n){return yy(n)}function yy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ao(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(r){return No(r).toBase64()}(n.bytesValue):"referenceValue"in n?function(r){return Fe.fromName(r).toString()}(n.referenceValue):"geoPointValue"in n?function(r){return`geo(${r.latitude},${r.longitude})`}(n.geoPointValue):"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=yy(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${yy(r.fields[a])}`;return s+"}"}(n.mapValue):Ue(61005,{value:n})}function $f(n){switch(Ro(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jp(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return No(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+$f(o),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Vo(i.fields,(o,a)=>{s+=o.length+$f(a)}),s}(n.mapValue);default:throw Ue(13486,{value:n})}}function Qx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vy(n){return!!n&&"integerValue"in n}function m0(n){return!!n&&"arrayValue"in n}function Yx(n){return!!n&&"nullValue"in n}function Xx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bf(n){return!!n&&"mapValue"in n}function bM(n){var r,i;return((i=(((r=n==null?void 0:n.mapValue)==null?void 0:r.fields)||{})[W2])==null?void 0:i.stringValue)===G2}function bc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Vo(n.mapValue.fields,(r,i)=>e.mapValue.fields[r]=bc(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(n.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=bc(n.arrayValue.values[r]);return e}return{...n}}function EM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Bf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(r)}setAll(e){let r=vn.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=bc(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());Bf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Bf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Vo(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Zn(bc(this.value))}}function Q2(n){const e=[];return Vo(n.fields,(r,i)=>{const s=new vn([r]);if(Bf(i)){const o=Q2(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new jn(e,0,$e.min(),$e.min(),$e.min(),Zn.empty(),0)}static newFoundDocument(e,r,i,s){return new jn(e,1,r,$e.min(),i,s,0)}static newNoDocument(e,r){return new jn(e,2,r,$e.min(),$e.min(),Zn.empty(),0)}static newUnknownDocument(e,r){return new jn(e,3,r,$e.min(),$e.min(),Zn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,r){this.position=e,this.inclusive=r}}function Jx(n,e,r){let i=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?i=Fe.comparator(Fe.fromName(a.referenceValue),r.key):i=eu(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let r=0;r<n.position.length;r++)if(!Xi(n.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,r="asc"){this.field=e,this.dir=r}}function TM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{}class tn extends Y2{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new SM(e,r,i):r==="array-contains"?new AM(e,i):r==="in"?new NM(e,i):r==="not-in"?new RM(e,i):r==="array-contains-any"?new PM(e,i):new tn(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new CM(e,i):new kM(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(eu(r,this.value)):r!==null&&Ro(this.value)===Ro(r)&&this.matchesComparison(eu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends Y2{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new bi(e,r)}matches(e){return X2(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function X2(n){return n.op==="and"}function J2(n){return IM(n)&&X2(n)}function IM(n){for(const e of n.filters)if(e instanceof bi)return!1;return!0}function _y(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+tu(n.value);if(J2(n))return n.filters.map(e=>_y(e)).join(",");{const e=n.filters.map(r=>_y(r)).join(",");return`${n.op}(${e})`}}function Z2(n,e){return n instanceof tn?function(i,s){return s instanceof tn&&i.op===s.op&&i.field.isEqual(s.field)&&Xi(i.value,s.value)}(n,e):n instanceof bi?function(i,s){return s instanceof bi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&Z2(a,s.filters[l]),!0):!1}(n,e):void Ue(19439)}function eS(n){return n instanceof tn?function(r){return`${r.field.canonicalString()} ${r.op} ${tu(r.value)}`}(n):n instanceof bi?function(r){return r.op.toString()+" {"+r.getFilters().map(eS).join(" ,")+"}"}(n):"Filter"}class SM extends tn{constructor(e,r,i){super(e,r,i),this.key=Fe.fromName(i.referenceValue)}matches(e){const r=Fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class CM extends tn{constructor(e,r){super(e,"in",r),this.keys=tS("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class kM extends tn{constructor(e,r){super(e,"not-in",r),this.keys=tS("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function tS(n,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(i=>Fe.fromName(i.referenceValue))}class AM extends tn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return m0(r)&&th(r.arrayValue,this.value)}}class NM extends tn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&th(this.value.arrayValue,r)}}class RM extends tn{constructor(e,r){super(e,"not-in",r)}matches(e){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!th(this.value.arrayValue,r)}}class PM extends tn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!m0(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>th(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function e1(n,e=null,r=[],i=[],s=null,o=null,a=null){return new OM(n,e,r,i,s,o,a)}function g0(n){const e=qe(n);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>_y(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Op(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>tu(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>tu(i)).join(",")),e.Te=r}return e.Te}function y0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!TM(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if(!Z2(n.filters[r],e.filters[r]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zx(n.startAt,e.startAt)&&Zx(n.endAt,e.endAt)}function wy(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function jM(n,e,r,i,s,o,a,l){return new bh(n,e,r,i,s,o,a,l)}function v0(n){return new bh(n)}function t1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DM(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nS(n){return n.collectionGroup!==null}function Ec(n){const e=qe(n);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new cn(vn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Vd(o,i))}),r.has(vn.keyField().canonicalString())||e.Ie.push(new Vd(vn.keyField(),i))}return e.Ie}function Hi(n){const e=qe(n);return e.Ee||(e.Ee=MM(e,Ec(n))),e.Ee}function MM(n,e){if(n.limitType==="F")return e1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Vd(s.field,o)});const r=n.endAt?new Ld(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ld(n.startAt.position,n.startAt.inclusive):null;return e1(n.path,n.collectionGroup,e,n.filters,n.limit,r,i)}}function xy(n,e){const r=n.filters.concat([e]);return new bh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),r,n.limit,n.limitType,n.startAt,n.endAt)}function by(n,e,r){return new bh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,r,n.startAt,n.endAt)}function Dp(n,e){return y0(Hi(n),Hi(e))&&n.limitType===e.limitType}function rS(n){return`${g0(Hi(n))}|lt:${n.limitType}`}function fl(n){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>eS(s)).join(", ")}]`),Op(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>tu(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>tu(s)).join(",")),`Target(${i})`}(Hi(n))}; limitType=${n.limitType})`}function Mp(n,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Fe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,s){for(const o of Ec(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Jx(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,Ec(i),s)||i.endAt&&!function(a,l,u){const c=Jx(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,Ec(i),s))}(n,e)}function LM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iS(n){return(e,r)=>{let i=!1;for(const s of Ec(n)){const o=VM(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function VM(n,e,r){const i=n.field.isKeyField()?Fe.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?eu(u,c):Ue(42886)}(n.field,e,r);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ue(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return z2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new Vt(Fe.comparator);function Os(){return FM}const sS=new Vt(Fe.comparator);function rc(...n){let e=sS;for(const r of n)e=e.insert(r.key,r);return e}function oS(n){let e=sS;return n.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function pa(){return Tc()}function aS(){return Tc()}function Tc(){return new Ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const UM=new Vt(Fe.comparator),zM=new cn(Fe.comparator);function it(...n){let e=zM;for(const r of n)e=e.add(r);return e}const $M=new cn(rt);function BM(){return $M}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function lS(n){return{integerValue:""+n}}function qM(n,e){return mM(e)?lS(e):_0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this._=void 0}}function HM(n,e,r){return n instanceof Fd?function(s,o){const a={fields:{[q2]:{stringValue:B2},[K2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&p0(o)&&(o=jp(o)),o&&(a.fields[H2]=o),{mapValue:a}}(r,e):n instanceof nh?cS(n,e):n instanceof rh?hS(n,e):function(s,o){const a=uS(s,o),l=n1(a)+n1(s.Ae);return vy(a)&&vy(s.Ae)?lS(l):_0(s.serializer,l)}(n,e)}function KM(n,e,r){return n instanceof nh?cS(n,e):n instanceof rh?hS(n,e):r}function uS(n,e){return n instanceof Ud?function(i){return vy(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Fd extends Lp{}class nh extends Lp{constructor(e){super(),this.elements=e}}function cS(n,e){const r=fS(e);for(const i of n.elements)r.some(s=>Xi(s,i))||r.push(i);return{arrayValue:{values:r}}}class rh extends Lp{constructor(e){super(),this.elements=e}}function hS(n,e){let r=fS(e);for(const i of n.elements)r=r.filter(s=>!Xi(s,i));return{arrayValue:{values:r}}}class Ud extends Lp{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function n1(n){return Gt(n.integerValue||n.doubleValue)}function fS(n){return m0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function WM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof nh&&s instanceof nh||i instanceof rh&&s instanceof rh?Zl(i.elements,s.elements,Xi):i instanceof Ud&&s instanceof Ud?Xi(i.Ae,s.Ae):i instanceof Fd&&s instanceof Fd}(n.transform,e.transform)}class GM{constructor(e,r){this.version=e,this.transformResults=r}}class Hr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Vp{}function dS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new w0(n.key,Hr.none()):new Eh(n.key,n.data,Hr.none());{const r=n.data,i=Zn.empty();let s=new cn(vn.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Fo(n.key,i,new _r(s.toArray()),Hr.none())}}function QM(n,e,r){n instanceof Eh?function(s,o,a){const l=s.value.clone(),u=i1(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,r):n instanceof Fo?function(s,o,a){if(!qf(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=i1(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(pS(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Ic(n,e,r,i){return n instanceof Eh?function(o,a,l,u){if(!qf(o.precondition,a))return l;const c=o.value.clone(),h=s1(o.fieldTransforms,u,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,e,r,i):n instanceof Fo?function(o,a,l,u){if(!qf(o.precondition,a))return l;const c=s1(o.fieldTransforms,u,a),h=a.data;return h.setAll(pS(o)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,r,i):function(o,a,l){return qf(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,r)}function YM(n,e){let r=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),o=uS(i.transform,s||null);o!=null&&(r===null&&(r=Zn.empty()),r.set(i.field,o))}return r||null}function r1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Zl(i,s,(o,a)=>WM(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Eh extends Vp{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fo extends Vp{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function pS(n){const e=new Map;return n.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=n.data.field(r);e.set(r,i)}}),e}function i1(n,e,r){const i=new Map;pt(n.length===r.length,32656,{Ve:r.length,de:n.length});for(let s=0;s<r.length;s++){const o=n[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,KM(a,l,r[s]))}return i}function s1(n,e,r){const i=new Map;for(const s of n){const o=s.transform,a=r.data.field(s.field);i.set(s.field,HM(o,a,e))}return i}class w0 extends Vp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XM extends Vp{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&QM(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=Ic(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=Ic(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=aS();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=dS(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument($e.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),it())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(r,i)=>r1(r,i))&&Zl(this.baseMutations,e.baseMutations,(r,i)=>r1(r,i))}}class x0{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){pt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return UM}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new x0(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,ot;function t3(n){switch(n){case pe.OK:return Ue(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ue(15467,{code:n})}}function mS(n){if(n===void 0)return Ps("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Zt.OK:return pe.OK;case Zt.CANCELLED:return pe.CANCELLED;case Zt.UNKNOWN:return pe.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return pe.INTERNAL;case Zt.UNAVAILABLE:return pe.UNAVAILABLE;case Zt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Zt.NOT_FOUND:return pe.NOT_FOUND;case Zt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Zt.ABORTED:return pe.ABORTED;case Zt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Zt.DATA_LOSS:return pe.DATA_LOSS;default:return Ue(39323,{code:n})}}(ot=Zt||(Zt={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new bo([4294967295,4294967295],0);function o1(n){const e=n3().encode(n),r=new N2;return r.update(e),new Uint8Array(r.digest())}function a1(n){const e=new DataView(n.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bo([r,i],0),new bo([s,o],0)]}class b0{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new ic(`Invalid padding: ${r}`);if(i<0)throw new ic(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new ic(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=bo.fromNumber(this.ge)}ye(e,r,i){let s=e.add(r.multiply(bo.fromNumber(i)));return s.compare(r3)===1&&(s=new bo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=o1(e),[i,s]=a1(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);if(!this.we(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new b0(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=o1(e),[i,s]=a1(r);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,s,o);this.be(a)}}be(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,Th.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Fp($e.min(),s,new Vt(rt),Os(),it())}}class Th{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new Th(i,r,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r,i,s){this.Se=e,this.removedTargetIds=r,this.key=i,this.De=s}}class gS{constructor(e,r){this.targetId=e,this.Ce=r}}class yS{constructor(e,r,i=xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class l1{constructor(){this.ve=0,this.Fe=u1(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),r=it(),i=it();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Ue(38017,{changeType:o})}}),new Th(this.Me,this.xe,e,r,i)}Ke(){this.Oe=!1,this.Fe=u1()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class i3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Os(),this.He=pf(),this.Je=pf(),this.Ze=new Vt(rt)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const i=this.nt(r);switch(e.state){case 0:this.rt(r)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),i.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((i,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,i=e.Ce.count,s=this.ot(r);if(s){const o=s.target;if(wy(o))if(i===0){const a=new Fe(o.path);this.et(r,a,jn.newNoDocument(a,$e.min()))}else pt(i===1,20013,{expectedCount:i});else{const a=this._t(r);if(a!==i){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,c)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=No(i).toUint8Array()}catch(u){if(u instanceof $2)return Jl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new b0(a,s,o)}catch(u){return Jl(u instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,i){return r.Ce.count===i-this.Pt(e,r.targetId)?0:2}Pt(e,r){const i=this.Ge.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(r,o,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&wy(l.target)){const u=new Fe(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,jn.newNoDocument(u,e))}o.Be&&(r.set(a,o.ke()),o.Ke())}});let i=it();this.Je.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Fp(e,r,this.Ze,this.je,i);return this.je=Os(),this.He=pf(),this.Je=pf(),this.Ze=new Vt(rt),s}Ye(e,r){if(!this.rt(e))return;const i=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,i),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),i&&(this.je=this.je.insert(r,i))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new l1,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new cn(rt),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new cn(rt),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Oe("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new l1),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function pf(){return new Vt(Fe.comparator)}function u1(){return new Vt(Fe.comparator)}const s3={asc:"ASCENDING",desc:"DESCENDING"},o3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a3={and:"AND",or:"OR"};class l3{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Ey(n,e){return n.useProto3Json||Op(e)?e:{value:e}}function zd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u3(n,e){return zd(n,e.toTimestamp())}function Ki(n){return pt(!!n,49232),$e.fromTimestamp(function(r){const i=Ao(r);return new St(i.seconds,i.nanos)}(n))}function E0(n,e){return Ty(n,e).canonicalString()}function Ty(n,e){const r=function(s){return new bt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?r:r.child(e)}function _S(n){const e=bt.fromString(n);return pt(TS(e),10190,{key:e.toString()}),e}function Iy(n,e){return E0(n.databaseId,e.path)}function qm(n,e){const r=_S(e);if(r.get(1)!==n.databaseId.projectId)throw new Ae(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+n.databaseId.projectId);if(r.get(3)!==n.databaseId.database)throw new Ae(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+n.databaseId.database);return new Fe(xS(r))}function wS(n,e){return E0(n.databaseId,e)}function c3(n){const e=_S(n);return e.length===4?bt.emptyPath():xS(e)}function Sy(n){return new bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xS(n){return pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c1(n,e,r){return{name:Iy(n,e),fields:r.value.mapValue.fields}}function h3(n,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ue(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(pt(h===void 0||typeof h=="string",58123),xn.fromBase64String(h||"")):(pt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),xn.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const h=c.code===void 0?pe.UNKNOWN:mS(c.code);return new Ae(h,c.message||"")}(a);r=new yS(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=qm(n,i.document.name),o=Ki(i.document.updateTime),a=i.document.createTime?Ki(i.document.createTime):$e.min(),l=new Zn({mapValue:{fields:i.document.fields}}),u=jn.newFoundDocument(s,o,a,l),c=i.targetIds||[],h=i.removedTargetIds||[];r=new Hf(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=qm(n,i.document),o=i.readTime?Ki(i.readTime):$e.min(),a=jn.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Hf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=qm(n,i.document),o=i.removedTargetIds||[];r=new Hf([],o,s,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new e3(s,o),l=i.targetId;r=new gS(l,a)}}return r}function f3(n,e){let r;if(e instanceof Eh)r={update:c1(n,e.key,e.value)};else if(e instanceof w0)r={delete:Iy(n,e.key)};else if(e instanceof Fo)r={update:c1(n,e.key,e.data),updateMask:x3(e.fieldMask)};else{if(!(e instanceof XM))return Ue(16599,{dt:e.type});r={verify:Iy(n,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Fd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof nh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ud)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Ue(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:u3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue(27497)}(n,e.precondition)),r}function d3(n,e){return n&&n.length>0?(pt(e!==void 0,14353),n.map(r=>function(s,o){let a=s.updateTime?Ki(s.updateTime):Ki(o);return a.isEqual($e.min())&&(a=Ki(o)),new GM(a,s.transformResults||[])}(r,e))):[]}function p3(n,e){return{documents:[wS(n,e.path)]}}function m3(n,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=wS(n,s);const o=function(c){if(c.length!==0)return ES(bi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:dl(m.field),direction:v3(m.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Ey(n,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:r,parent:s}}function g3(n){let e=c3(n.parent);const r=n.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){pt(i===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];r.where&&(o=function(p){const m=bS(p);return m instanceof bi&&J2(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(p){return p.map(m=>function(w){return new Vd(pl(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Op(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(p){const m=!!p.before,v=p.values||[];return new Ld(v,m)}(r.startAt));let c=null;return r.endAt&&(c=function(p){const m=!p.before,v=p.values||[];return new Ld(v,m)}(r.endAt)),jM(e,s,a,o,l,"F",u,c)}function y3(n,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function bS(n){return n.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=pl(r.unaryFilter.field);return tn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=pl(r.unaryFilter.field);return tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=pl(r.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pl(r.unaryFilter.field);return tn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}}(n):n.fieldFilter!==void 0?function(r){return tn.create(pl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(r){return bi.create(r.compositeFilter.filters.map(i=>bS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}}(r.compositeFilter.op))}(n):Ue(30097,{filter:n})}function v3(n){return s3[n]}function _3(n){return o3[n]}function w3(n){return a3[n]}function dl(n){return{fieldPath:n.canonicalString()}}function pl(n){return vn.fromServerFormat(n.fieldPath)}function ES(n){return n instanceof tn?function(r){if(r.op==="=="){if(Xx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NAN"}};if(Yx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Xx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NOT_NAN"}};if(Yx(r.value))return{unaryFilter:{field:dl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(r.field),op:_3(r.op),value:r.value}}}(n):n instanceof bi?function(r){const i=r.getFilters().map(s=>ES(s));return i.length===1?i[0]:{compositeFilter:{op:w3(r.op),filters:i}}}(n):Ue(54877,{filter:n})}function x3(n){const e=[];return n.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function TS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function IS(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,r,i,s,o=$e.min(),a=$e.min(),l=xn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.yt=e}}function E3(n){const e=g3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?by(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.Sn=new I3}addToCollectionParentIndex(e,r){return this.Sn.add(r),ge.resolve()}getCollectionParents(e,r){return ge.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return ge.resolve()}deleteFieldIndex(e,r){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,r){return ge.resolve()}getDocumentsMatchingTarget(e,r){return ge.resolve(null)}getIndexType(e,r){return ge.resolve(0)}getFieldIndexes(e,r){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,r){return ge.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,r){return ge.resolve(ko.min())}updateCollectionGroup(e,r,i){return ge.resolve()}updateIndexEntries(e,r){return ge.resolve()}}class I3{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new cn(bt.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new cn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SS=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(SS,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new nu(0)}static ar(){return new nu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="LruGarbageCollector",S3=1048576;function d1([n,e],[r,i]){const s=rt(n,r);return s===0?rt(e,i):s}class C3{constructor(e){this.Pr=e,this.buffer=new cn(d1),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();d1(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class k3{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Oe(f1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){gu(r)?Oe(f1,"Ignoring IndexedDB error during garbage collection: ",r):await mu(r)}await this.Ar(3e5)})}}class A3{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return ge.resolve(Pp.ce);const i=new C3(r);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.Vr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(h1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h1):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let i,s,o,a,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(i=p,l=Date.now(),this.removeTargets(e,i,r))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(c=Date.now(),hl()<=nt.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:p})))}}function N3(n,e){return new A3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.changes=new Ba(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?ge.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&Ic(i.mutation,s,_r.empty(),St.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,it()).next(()=>i))}getLocalViewOfDocuments(e,r,i=it()){const s=pa();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=rc();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=pa();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,it()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=Os();const a=Tc(),l=function(){return Tc()}();return r.forEach((u,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Fo)?o=o.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),Ic(h.mutation,c,h.mutation.getFieldMask(),St.now())):a.set(c.key,_r.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,h)=>a.set(c,h)),r.forEach((c,h)=>l.set(c,new P3(h,a.get(c)??null))),l))}recalculateAndSaveOverlays(e,r){const i=Tc();let s=new Vt((a,l)=>a-l),o=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=i.get(u)||_r.empty();h=l.applyToLocalView(c,h),i.set(u,h);const p=(s.get(l.batchId)||it()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,p=aS();h.forEach(m=>{if(!o.has(m)){const v=dS(r.get(m),i.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,p))}return ge.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return DM(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nS(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):ge.resolve(pa());let l=Jc,u=o;return a.next(c=>ge.forEach(c,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?ge.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,it())).next(h=>({batchId:l,changes:oS(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Fe(r)).next(i=>{let s=rc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=rc();return this.indexManager.getCollectionParents(e,o).next(l=>ge.forEach(l,u=>{const c=function(p,m){return new bh(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,jn.newInvalidDocument(h)))});let l=rc();return a.forEach((u,c)=>{const h=o.get(u);h!==void 0&&Ic(h.mutation,c,_r.empty(),St.now()),Mp(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return ge.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ki(s.createTime)}}(r)),ge.resolve()}getNamedQuery(e,r){return ge.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:E3(s.bundledQuery),readTime:Ki(s.readTime)}}(r)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.overlays=new Vt(Fe.comparator),this.Lr=new Map}getOverlay(e,r){return ge.resolve(this.overlays.get(r))}getOverlays(e,r){const i=pa();return ge.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.bt(e,r,o)}),ge.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Lr.delete(i)),ge.resolve()}getOverlaysForCollection(e,r,i){const s=pa(),o=r.length+1,a=new Fe(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ge.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new Vt((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let h=o.get(c.largestBatchId);h===null&&(h=pa(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=pa(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=s)););return ge.resolve(l)}bt(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new ZM(r,i));let o=this.Lr.get(r);o===void 0&&(o=it(),this.Lr.set(r,o)),this.Lr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.kr=new cn(fn.Kr),this.qr=new cn(fn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const i=new fn(e,r);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Wr(new fn(e,r))}Qr(e,r){e.forEach(i=>this.removeReference(i,r))}Gr(e){const r=new Fe(new bt([])),i=new fn(r,e),s=new fn(r,e+1),o=[];return this.qr.forEachInRange([i,s],a=>{this.Wr(a),o.push(a.key)}),o}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new Fe(new bt([])),i=new fn(r,e),s=new fn(r,e+1);let o=it();return this.qr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new fn(e,0),i=this.kr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class fn{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return Fe.comparator(e.key,r.key)||rt(e.Hr,r.Hr)}static Ur(e,r){return rt(e.Hr,r.Hr)||Fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new cn(fn.Kr)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new JM(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new fn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ge.resolve(a)}lookupMutationBatch(e,r){return ge.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Xr(i),o=s<0?0:s;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?d0:this.Yn-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new fn(r,0),s=new fn(r,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([i,s],a=>{const l=this.Zr(a.Hr);o.push(l)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new cn(rt);return r.forEach(s=>{const o=new fn(s,0),a=new fn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],l=>{i=i.add(l.Hr)})}),ge.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;Fe.isDocumentKey(o)||(o=o.child(""));const a=new fn(new Fe(o),0);let l=new cn(rt);return this.Jr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Hr)),!0)},a),ge.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){pt(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ge.forEach(r.mutations,s=>{const o=new fn(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=i})}nr(e){}containsKey(e,r){const i=new fn(r,0),s=this.Jr.firstAfterOrEqual(i);return ge.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.ti=e,this.docs=function(){return new Vt(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return ge.resolve(i?i.document.mutableCopy():jn.newInvalidDocument(r))}getEntries(e,r){let i=Os();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():jn.newInvalidDocument(s))}),ge.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=Os();const a=r.path,l=new Fe(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||hM(cM(h),i)<=0||(s.has(h.key)||Mp(r,h))&&(o=o.insert(h.key,h.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,r,i,s){Ue(9500)}ni(e,r){return ge.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new F3(this)}getSize(e){return ge.resolve(this.size)}}class F3 extends R3{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)}),ge.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.persistence=e,this.ri=new Ba(r=>g0(r),y0),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new T0,this.targetCount=0,this.oi=nu._r()}forEachTarget(e,r){return this.ri.forEach((i,s)=>r(s)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ii&&(this.ii=r),ge.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new nu(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,ge.resolve()}updateTargetData(e,r){return this.lr(r),ge.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ge.waitFor(o).next(()=>s)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,r){const i=this.ri.get(r)||null;return ge.resolve(i)}addMatchingKeys(e,r,i){return this.si.$r(r,i),ge.resolve()}removeMatchingKeys(e,r,i){this.si.Qr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),ge.resolve()}getMatchingKeysForTargetId(e,r){const i=this.si.jr(r);return ge.resolve(i)}containsKey(e,r){return ge.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,r){this._i={},this.overlays={},this.ai=new Pp(0),this.ui=!1,this.ui=!0,this.ci=new M3,this.referenceDelegate=e(this),this.li=new U3(this),this.indexManager=new T3,this.remoteDocumentCache=function(s){return new V3(s)}(i=>this.referenceDelegate.hi(i)),this.serializer=new b3(r),this.Pi=new j3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new D3,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this._i[e.toKey()];return i||(i=new L3(r,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,i){Oe("MemoryPersistence","Starting transaction:",e);const s=new z3(this.ai.next());return this.referenceDelegate.Ti(),i(s).next(o=>this.referenceDelegate.Ii(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,r){return ge.or(Object.values(this._i).map(i=>()=>i.containsKey(e,r)))}}class z3 extends dM{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new T0,this.Ai=null}static Vi(e){return new I0(e)}get di(){if(this.Ai)return this.Ai;throw Ue(60996)}addReference(e,r,i){return this.Ri.addReference(i,r),this.di.delete(i.toString()),ge.resolve()}removeReference(e,r,i){return this.Ri.removeReference(i,r),this.di.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),ge.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.di.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.di,i=>{const s=Fe.fromPath(i);return this.mi(e,s).next(o=>{o||r.removeEntry(s,$e.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(i=>{i?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return ge.or([()=>ge.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class $d{constructor(e,r){this.persistence=e,this.fi=new Ba(i=>gM(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=N3(this,r)}static Vi(e,r){return new $d(e,r)}Ti(){}Ii(e){return ge.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}pr(e){let r=0;return this.mr(e,i=>{r++}).next(()=>r)}mr(e,r){return ge.forEach(this.fi,(i,s)=>this.wr(e,i,s).next(o=>o?ge.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(i++,o.removeEntry(a,$e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),ge.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ge.resolve()}removeReference(e,r,i){return this.fi.set(i,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),ge.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=$f(e.data.value)),r}wr(e,r,i){return ge.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return ge.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Ts=i,this.Is=s}static Es(e,r){let i=it(),s=it();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new S0(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return kO()?8:pM(Ln())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.gs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ps(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new $3;return this.ys(e,r,a).next(l=>{if(o.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>o.result)}ws(e,r,i,s){return i.documentReadCount<this.Vs?(hl()<=nt.DEBUG&&Oe("QueryEngine","SDK will not create cache indexes for query:",fl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ge.resolve()):(hl()<=nt.DEBUG&&Oe("QueryEngine","Query:",fl(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(hl()<=nt.DEBUG&&Oe("QueryEngine","The SDK decides to create cache indexes for query:",fl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(r))):ge.resolve())}gs(e,r){if(t1(r))return ge.resolve(null);let i=Hi(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=by(r,null,"F"),i=Hi(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=it(...o);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.bs(r,l);return this.Ss(r,c,a,u.readTime)?this.gs(e,by(r,null,"F")):this.Ds(e,c,r,u)}))})))}ps(e,r,i,s){return t1(r)||s.isEqual($e.min())?ge.resolve(null):this.fs.getDocuments(e,i).next(o=>{const a=this.bs(r,o);return this.Ss(r,a,i,s)?ge.resolve(null):(hl()<=nt.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fl(r)),this.Ds(e,a,r,uM(s,Jc)).next(l=>l))})}bs(e,r){let i=new cn(iS(e));return r.forEach((s,o)=>{Mp(e,o)&&(i=i.add(o))}),i}Ss(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,r,i){return hl()<=nt.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",fl(r)),this.fs.getDocumentsMatchingQuery(e,r,ko.min(),i)}Ds(e,r,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LocalStore",q3=3e8;class H3{constructor(e,r,i,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new Vt(rt),this.Fs=new Ba(o=>g0(o),y0),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function K3(n,e,r,i){return new H3(n,e,r,i)}async function kS(n,e){const r=qe(n);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.Os(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=it();for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of o){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Ns:c,removedBatchIds:a,addedBatchIds:l}))})})}function W3(n,e){const r=qe(n);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const p=c.batch,m=p.keys();let v=ge.resolve();return m.forEach(w=>{v=v.next(()=>h.getEntry(u,w)).next(b=>{const S=c.docVersions.get(w);pt(S!==null,48541),b.version.compareTo(S)<0&&(p.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=it();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function AS(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function G3(n,e){const r=qe(n),i=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;l.push(r.li.removeMatchingKeys(o,h.removedDocuments,p).next(()=>r.li.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(xn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,i)),s=s.insert(p,v),function(b,S,E){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=q3?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,v,h)&&l.push(r.li.updateTargetData(o,v))});let u=Os(),c=it();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(Q3(o,a,e.documentUpdates).next(h=>{u=h.Bs,c=h.Ls})),!i.isEqual($e.min())){const h=r.li.getLastRemoteSnapshotVersion(o).next(p=>r.li.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(h)}return ge.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.vs=s,o))}function Q3(n,e,r){let i=it(),s=it();return r.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let a=Os();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual($e.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Oe(C0,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function Y3(n,e){const r=qe(n);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=d0),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function X3(n,e){const r=qe(n);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.li.getTargetData(i,e).next(o=>o?(s=o,ge.resolve(s)):r.li.allocateTargetId(i).next(a=>(s=new uo(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.li.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(i.targetId,i),r.Fs.set(e,i.targetId)),i})}async function Cy(n,e,r){const i=qe(n),s=i.vs.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!gu(a))throw a;Oe(C0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function p1(n,e,r){const i=qe(n);let s=$e.min(),o=it();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,h){const p=qe(u),m=p.Fs.get(h);return m!==void 0?ge.resolve(p.vs.get(m)):p.li.getTargetData(c,h)}(i,a,Hi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,r?s:$e.min(),r?o:it())).next(l=>(J3(i,LM(e),l),{documents:l,ks:o})))}function J3(n,e,r){let i=n.Ms.get(e)||$e.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ms.set(e,i)}class m1{constructor(){this.activeTargetIds=BM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z3{constructor(){this.vo=new m1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,i){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new m1,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="ConnectivityMonitor";class y1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Oe(g1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Oe(g1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=null;function ky(){return mf===null?mf=function(){return 268435456+Math.round(2147483648*Math.random())}():mf++,"0x"+mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="RestConnection",t5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class n5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,r,i,s,o){const a=ky(),l=this.Qo(e,r.toUriEncodedString());Oe(Hm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,o);const{host:c}=new URL(l),h=hu(c);return this.zo(e,l,u,i,h).then(p=>(Oe(Hm,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Jl(Hm,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}jo(e,r,i,s,o,a){return this.Wo(e,r,i,s,o)}Go(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Qo(e,r){const i=t5[e];let s=`${this.qo}/v1/${r}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection",Bu=(n,e,r)=>{n.listen(e,i=>{try{r(i)}catch(s){setTimeout(()=>{throw s},0)}})};class Ll extends n5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ll.c_){const e=j2();Bu(e,O2.STAT_EVENT,r=>{r.stat===my.PROXY?Oe(Nn,"STAT_EVENT: detected buffering proxy"):r.stat===my.NOPROXY&&Oe(Nn,"STAT_EVENT: detected no buffering proxy")}),Ll.c_=!0}}zo(e,r,i,s,o){const a=ky();return new Promise((l,u)=>{const c=new R2;c.setWithCredentials(!0),c.listenOnce(P2.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zf.NO_ERROR:const p=c.getResponseJson();Oe(Nn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case zf.TIMEOUT:Oe(Nn,`RPC '${e}' ${a} timed out`),u(new Ae(pe.DEADLINE_EXCEEDED,"Request time out"));break;case zf.HTTP_ERROR:const m=c.getStatus();if(Oe(Nn,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const b=function(E){const I=E.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(I)>=0?I:pe.UNKNOWN}(w.status);u(new Ae(b,w.message))}else u(new Ae(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Ae(pe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Oe(Nn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);Oe(Nn,`RPC '${e}' ${a} sending request:`,s),c.send(r,"POST",h,i,15)})}T_(e,r,i){const s=ky(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,i),l.encodeInitMessageHeaders=!0;const c=o.join("");Oe(Nn,`Creating RPC '${e}' stream ${s}: ${c}`,l);const h=a.createWebChannel(c,l);this.I_(h);let p=!1,m=!1;const v=new r5({Ho:w=>{m?Oe(Nn,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(p||(Oe(Nn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),Oe(Nn,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},Jo:()=>h.close()});return Bu(h,nc.EventType.OPEN,()=>{m||(Oe(Nn,`RPC '${e}' stream ${s} transport opened.`),v.i_())}),Bu(h,nc.EventType.CLOSE,()=>{m||(m=!0,Oe(Nn,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(h))}),Bu(h,nc.EventType.ERROR,w=>{m||(m=!0,Jl(Nn,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),v.o_(new Ae(pe.UNAVAILABLE,"The operation could not be completed")))}),Bu(h,nc.EventType.MESSAGE,w=>{var b;if(!m){const S=w.data[0];pt(!!S,16349);const E=S,I=(E==null?void 0:E.error)||((b=E[0])==null?void 0:b.error);if(I){Oe(Nn,`RPC '${e}' stream ${s} received error:`,I);const R=I.status;let P=function(k){const C=Zt[k];if(C!==void 0)return mS(C)}(R),M=I.message;P===void 0&&(P=pe.INTERNAL,M="Unknown error status: "+R+" with message "+I.message),m=!0,v.o_(new Ae(P,M)),h.close()}else Oe(Nn,`RPC '${e}' stream ${s} received:`,S),v.__(S)}}),Ll.u_(),setTimeout(()=>{v.s_()},0),v}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,i){super.Go(e,r,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return D2()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(n){return new Ll(n)}function Km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n){return new l3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ll.c_=!1;class NS{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=r,this.R_=i,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-i);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="PersistentStream";class RS{constructor(e,r,i,s,o,a,l,u){this.Ci=e,this.b_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new NS(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===pe.RESOURCE_EXHAUSTED?(Ps(r.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===r&&this.G_(i,s)},i=>{e(()=>{const s=new Ae(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,r){const i=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.Yo(()=>{i(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Oe(v1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Oe(v1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s5 extends RS{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=h3(this.serializer,e),i=function(o){if(!("targetChange"in o))return $e.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?$e.min():a.readTime?Ki(a.readTime):$e.min()}(e);return this.listener.J_(r,i)}Z_(e){const r={};r.database=Sy(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=wy(u)?{documents:p3(o,u)}:{query:m3(o,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=vS(o,a.resumeToken);const c=Ey(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo($e.min())>0){l.readTime=zd(o,a.snapshotVersion.toTimestamp());const c=Ey(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=y3(this.serializer,e);i&&(r.labels=i),this.K_(r)}X_(e){const r={};r.database=Sy(this.serializer),r.removeTarget=e,this.K_(r)}}class o5 extends RS{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=d3(e.writeResults,e.commitTime),i=Ki(e.commitTime);return this.listener.na(i,r)}ra(){const e={};e.database=Sy(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>f3(this.serializer,i))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{}class l5 extends a5{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ae(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,Ty(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(pe.UNKNOWN,o.toString())})}jo(e,r,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Ty(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(pe.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function u5(n,e,r,i){return new l5(n,e,r,i)}class c5{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(r),this.aa=!1):Oe("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class h5{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo(a=>{i.enqueueAndForget(async()=>{qa(this)&&(Oe(Oa,"Restarting streams for network reachability change."),await async function(u){const c=qe(u);c.Ea.add(4),await Ih(c),c.Va.set("Unknown"),c.Ea.delete(4),await zp(c)}(this))})}),this.Va=new c5(i,s)}}async function zp(n){if(qa(n))for(const e of n.Ra)await e(!0)}async function Ih(n){for(const e of n.Ra)await e(!1)}function PS(n,e){const r=qe(n);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),R0(r)?N0(r):yu(r).O_()&&A0(r,e))}function k0(n,e){const r=qe(n),i=yu(r);r.Ia.delete(e),i.O_()&&OS(r,e),r.Ia.size===0&&(i.O_()?i.L_():qa(r)&&r.Va.set("Unknown"))}function A0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const r=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yu(n).Z_(e)}function OS(n,e){n.da.$e(e),yu(n).X_(e)}function N0(n){n.da=new i3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),yu(n).start(),n.Va.ua()}function R0(n){return qa(n)&&!yu(n).x_()&&n.Ia.size>0}function qa(n){return qe(n).Ea.size===0}function jS(n){n.da=void 0}async function f5(n){n.Va.set("Online")}async function d5(n){n.Ia.forEach((e,r)=>{A0(n,e)})}async function p5(n,e){jS(n),R0(n)?(n.Va.ha(e),N0(n)):n.Va.set("Unknown")}async function m5(n,e,r){if(n.Va.set("Online"),e instanceof yS&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(n,e)}catch(i){Oe(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bd(n,i)}else if(e instanceof Hf?n.da.Xe(e):e instanceof gS?n.da.st(e):n.da.tt(e),!r.isEqual($e.min()))try{const i=await AS(n.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.da.Tt(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.Ia.get(c);h&&o.Ia.set(c,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(xn.EMPTY_BYTE_STRING,h.snapshotVersion)),OS(o,u);const p=new uo(h.target,u,c,h.sequenceNumber);A0(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(n,r)}catch(i){Oe(Oa,"Failed to raise snapshot:",i),await Bd(n,i)}}async function Bd(n,e,r){if(!gu(e))throw e;n.Ea.add(1),await Ih(n),n.Va.set("Offline"),r||(r=()=>AS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Oe(Oa,"Retrying IndexedDB access"),await r(),n.Ea.delete(1),await zp(n)})}function DS(n,e){return e().catch(r=>Bd(n,r,e))}async function $p(n){const e=qe(n),r=Po(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:d0;for(;g5(e);)try{const s=await Y3(e.localStore,i);if(s===null){e.Ta.length===0&&r.L_();break}i=s.batchId,y5(e,s)}catch(s){await Bd(e,s)}MS(e)&&LS(e)}function g5(n){return qa(n)&&n.Ta.length<10}function y5(n,e){n.Ta.push(e);const r=Po(n);r.O_()&&r.Y_&&r.ea(e.mutations)}function MS(n){return qa(n)&&!Po(n).x_()&&n.Ta.length>0}function LS(n){Po(n).start()}async function v5(n){Po(n).ra()}async function _5(n){const e=Po(n);for(const r of n.Ta)e.ea(r.mutations)}async function w5(n,e,r){const i=n.Ta.shift(),s=x0.from(i,e,r);await DS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await $p(n)}async function x5(n,e){e&&Po(n).Y_&&await async function(i,s){if(function(a){return t3(a)&&a!==pe.ABORTED}(s.code)){const o=i.Ta.shift();Po(i).B_(),await DS(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await $p(i)}}(n,e),MS(n)&&LS(n)}async function _1(n,e){const r=qe(n);r.asyncQueue.verifyOperationInProgress(),Oe(Oa,"RemoteStore received new credentials");const i=qa(r);r.Ea.add(3),await Ih(r),i&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await zp(r)}async function b5(n,e){const r=qe(n);e?(r.Ea.delete(2),await zp(r)):e||(r.Ea.add(2),await Ih(r),r.Va.set("Unknown"))}function yu(n){return n.ma||(n.ma=function(r,i,s){const o=qe(r);return o.sa(),new s5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:f5.bind(null,n),Yo:d5.bind(null,n),t_:p5.bind(null,n),J_:m5.bind(null,n)}),n.Ra.push(async e=>{e?(n.ma.B_(),R0(n)?N0(n):n.Va.set("Unknown")):(await n.ma.stop(),jS(n))})),n.ma}function Po(n){return n.fa||(n.fa=function(r,i,s){const o=qe(r);return o.sa(),new o5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:v5.bind(null,n),t_:x5.bind(null,n),ta:_5.bind(null,n),na:w5.bind(null,n)}),n.Ra.push(async e=>{e?(n.fa.B_(),await $p(n)):(await n.fa.stop(),n.Ta.length>0&&(Oe(Oa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new P0(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O0(n,e){if(Ps("AsyncQueue",`${e}: ${n}`),gu(n))return new Ae(pe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{static emptySet(e){return new Vl(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||Fe.comparator(r.key,i.key):(r,i)=>Fe.comparator(r.key,i.key),this.keyedMap=rc(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.ga=new Vt(Fe.comparator)}track(e){const r=e.doc.key,i=this.ga.get(r);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(r,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(r):e.type===1&&i.type===2?this.ga=this.ga.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Ue(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,i)=>{e.push(i)}),e}}class ru{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new ru(e,r,Vl.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class T5{constructor(){this.queries=x1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,i){const s=qe(r),o=s.queries;s.queries=x1(),o.forEach((a,l)=>{for(const u of l.ba)u.onError(i)})})(this,new Ae(pe.ABORTED,"Firestore shutting down"))}}function x1(){return new Ba(n=>rS(n),Dp)}async function VS(n,e){const r=qe(n);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.Sa()&&e.Da()&&(i=2):(o=new E5,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await r.onListen(s,!0);break;case 1:o.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=O0(a,`Initialization of query '${fl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ba.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&j0(r)}async function FS(n,e){const r=qe(n),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function I5(n,e){const r=qe(n);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ba)l.Fa(s)&&(i=!0);a.wa=s}}i&&j0(r)}function S5(n,e,r){const i=qe(n),s=i.queries.get(e);if(s)for(const o of s.ba)o.onError(r);i.queries.delete(e)}function j0(n){n.Ca.forEach(e=>{e.next()})}var Ay,b1;(b1=Ay||(Ay={})).Ma="default",b1.Cache="cache";class US{constructor(e,r,i){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new ru(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const i=r!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.key=e}}class $S{constructor(e){this.key=e}}class C5{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=it(),this.mutatedKeys=it(),this.eu=iS(e),this.tu=new Vl(this.eu)}get nu(){return this.Za}ru(e,r){const i=r?r.iu:new w1,s=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),v=Mp(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;m&&v?m.data.isEqual(v.data)?w!==b&&(i.track({type:3,doc:v}),S=!0):this.su(m,v)||(i.track({type:2,doc:v}),S=!0,(u&&this.eu(v,u)>0||c&&this.eu(v,c)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),S=!0):m&&!v&&(i.track({type:1,doc:m}),S=!0,(u||c)&&(l=!0)),S&&(v?(a=a.add(v),o=b?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Ss:l,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,p)=>function(v,w){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:S})}};return b(v)-b(w)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(i),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,c=u!==this.Xa;return this.Xa=u,a.length!==0||c?{snapshot:new ru(this.query,e.tu,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=it(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))});const r=[];return e.forEach(i=>{this.Ya.has(i)||r.push(new $S(i))}),this.Ya.forEach(i=>{e.has(i)||r.push(new zS(i))}),r}cu(e){this.Za=e.ks,this.Ya=it();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return ru.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const D0="SyncEngine";class k5{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class A5{constructor(e){this.key=e,this.hu=!1}}class N5{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ba(l=>rS(l),Dp),this.Iu=new Map,this.Eu=new Set,this.Ru=new Vt(Fe.comparator),this.Au=new Map,this.Vu=new T0,this.du={},this.mu=new Map,this.fu=nu.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R5(n,e,r=!0){const i=GS(n);let s;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await BS(i,e,r,!0),s}async function P5(n,e){const r=GS(n);await BS(r,e,!0,!1)}async function BS(n,e,r,i){const s=await X3(n.localStore,Hi(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await O5(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&r&&PS(n.remoteStore,s),l}async function O5(n,e,r,i,s){n.pu=(p,m,v)=>async function(b,S,E,I){let R=S.view.ru(E);R.Ss&&(R=await p1(b.localStore,S.query,!1).then(({documents:k})=>S.view.ru(k,R)));const P=I&&I.targetChanges.get(S.targetId),M=I&&I.targetMismatches.get(S.targetId)!=null,L=S.view.applyChanges(R,b.isPrimaryClient,P,M);return T1(b,S.targetId,L.au),L.snapshot}(n,p,m,v);const o=await p1(n.localStore,e,!0),a=new C5(e,o.ks),l=a.ru(o.documents),u=Th.createSynthesizedTargetChangeForCurrentChange(r,i&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);T1(n,r,c.au);const h=new k5(e,r,a);return n.Tu.set(e,h),n.Iu.has(r)?n.Iu.get(r).push(e):n.Iu.set(r,[e]),c.snapshot}async function j5(n,e,r){const i=qe(n),s=i.Tu.get(e),o=i.Iu.get(s.targetId);if(o.length>1)return i.Iu.set(s.targetId,o.filter(a=>!Dp(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Cy(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&k0(i.remoteStore,s.targetId),Ny(i,s.targetId)}).catch(mu)):(Ny(i,s.targetId),await Cy(i.localStore,s.targetId,!0))}async function D5(n,e){const r=qe(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),k0(r.remoteStore,i.targetId))}async function M5(n,e,r){const i=B5(n);try{const s=await function(a,l){const u=qe(a),c=St.now(),h=l.reduce((v,w)=>v.add(w.key),it());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Os(),b=it();return u.xs.getEntries(v,h).next(S=>{w=S,w.forEach((E,I)=>{I.isValidDocument()||(b=b.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,w)).next(S=>{p=S;const E=[];for(const I of l){const R=YM(I,p.get(I.key).overlayedDocument);R!=null&&E.push(new Fo(I.key,R,Q2(R.value.mapValue),Hr.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,E,l)}).next(S=>{m=S;const E=S.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(v,S.batchId,E)})}).then(()=>({batchId:m.batchId,changes:oS(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.du[a.currentUser.toKey()];c||(c=new Vt(rt)),c=c.insert(l,u),a.du[a.currentUser.toKey()]=c}(i,s.batchId,r),await Sh(i,s.changes),await $p(i.remoteStore)}catch(s){const o=O0(s,"Failed to persist write");r.reject(o)}}async function qS(n,e){const r=qe(n);try{const i=await G3(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Au.get(o);a&&(pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?pt(a.hu,14607):s.removedDocuments.size>0&&(pt(a.hu,42227),a.hu=!1))}),await Sh(r,i,e)}catch(i){await mu(i)}}function E1(n,e,r){const i=qe(n);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=qe(a);u.onlineState=l;let c=!1;u.queries.forEach((h,p)=>{for(const m of p.ba)m.va(l)&&(c=!0)}),c&&j0(u)}(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function L5(n,e,r){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Au.get(e),o=s&&s.key;if(o){let a=new Vt(Fe.comparator);a=a.insert(o,jn.newNoDocument(o,$e.min()));const l=it().add(o),u=new Fp($e.min(),new Map,new Vt(rt),a,l);await qS(i,u),i.Ru=i.Ru.remove(o),i.Au.delete(e),M0(i)}else await Cy(i.localStore,e,!1).then(()=>Ny(i,e,r)).catch(mu)}async function V5(n,e){const r=qe(n),i=e.batch.batchId;try{const s=await W3(r.localStore,e);KS(r,i,null),HS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await Sh(r,s)}catch(s){await mu(s)}}async function F5(n,e,r){const i=qe(n);try{const s=await function(a,l){const u=qe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(p=>(pt(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);KS(i,e,r),HS(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await Sh(i,s)}catch(s){await mu(s)}}function HS(n,e){(n.mu.get(e)||[]).forEach(r=>{r.resolve()}),n.mu.delete(e)}function KS(n,e,r){const i=qe(n);let s=i.du[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Ny(n,e,r=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),r&&n.Pu.yu(i,r);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach(i=>{n.Vu.containsKey(i)||WS(n,i)})}function WS(n,e){n.Eu.delete(e.path.canonicalString());const r=n.Ru.get(e);r!==null&&(k0(n.remoteStore,r),n.Ru=n.Ru.remove(e),n.Au.delete(r),M0(n))}function T1(n,e,r){for(const i of r)i instanceof zS?(n.Vu.addReference(i.key,e),U5(n,i)):i instanceof $S?(Oe(D0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||WS(n,i.key)):Ue(19791,{wu:i})}function U5(n,e){const r=e.key,i=r.path.canonicalString();n.Ru.get(r)||n.Eu.has(i)||(Oe(D0,"New document in limbo: "+r),n.Eu.add(i),M0(n))}function M0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const r=new Fe(bt.fromString(e)),i=n.fu.next();n.Au.set(i,new A5(r)),n.Ru=n.Ru.insert(r,i),PS(n.remoteStore,new uo(Hi(v0(r.path)),i,"TargetPurposeLimboResolution",Pp.ce))}}async function Sh(n,e,r){const i=qe(n),s=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((l,u)=>{a.push(i.pu(u,e,r).then(c=>{var h;if((c||r)&&i.isPrimaryClient){const p=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=S0.Es(u.targetId,c);o.push(p)}}))}),await Promise.all(a),i.Pu.J_(s),await async function(u,c){const h=qe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ge.forEach(c,m=>ge.forEach(m.Ts,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>ge.forEach(m.Is,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!gu(p))throw p;Oe(C0,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const v=h.vs.get(m),w=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(w);h.vs=h.vs.insert(m,b)}}}(i.localStore,o))}async function z5(n,e){const r=qe(n);if(!r.currentUser.isEqual(e)){Oe(D0,"User change. New user:",e.toKey());const i=await kS(r.localStore,e);r.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new Ae(pe.CANCELLED,a))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sh(r,i.Ns)}}function $5(n,e){const r=qe(n),i=r.Au.get(e);if(i&&i.hu)return it().add(i.key);{let s=it();const o=r.Iu.get(e);if(!o)return s;for(const a of o){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function GS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L5.bind(null,e),e.Pu.J_=I5.bind(null,e.eventManager),e.Pu.yu=S5.bind(null,e.eventManager),e}function B5(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F5.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Up(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return K3(this.persistence,new B3,e.initialUser,this.serializer)}Cu(e){return new CS(I0.Vi,this.serializer)}Du(e){return new Z3}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class q5 extends qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){pt(this.persistence.referenceDelegate instanceof $d,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new k3(i,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new CS(i=>$d.Vi(i,r),this.serializer)}}class Ry{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=z5.bind(null,this.syncEngine),await b5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T5}()}createDatastore(e){const r=Up(e.databaseInfo.databaseId),i=i5(e.databaseInfo);return u5(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new h5(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>E1(this.syncEngine,r,0),function(){return y1.v()?new y1:new e5}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,h){const p=new N5(s,o,a,l,u,c);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=qe(s);Oe(Oa,"RemoteStore shutting down."),o.Ea.add(5),await Ih(o),o.Aa.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Ry.provider={build:()=>new Ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class H5{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this._databaseInfo=s,this.user=Pn.UNAUTHENTICATED,this.clientId=f0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{Oe(Oo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(Oe(Oo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=O0(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Wm(n,e){n.asyncQueue.verifyOperationInProgress(),Oe(Oo,"Initializing OfflineComponentProvider");const r=n.configuration;await e.initialize(r);let i=r.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await kS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function I1(n,e){n.asyncQueue.verifyOperationInProgress();const r=await K5(n);Oe(Oo,"Initializing OnlineComponentProvider"),await e.initialize(r,n.configuration),n.setCredentialChangeListener(i=>_1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>_1(e.remoteStore,s)),n._onlineComponents=e}async function K5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Oe(Oo,"Using user provided OfflineComponentProvider");try{await Wm(n,n._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Jl("Error using user provided cache. Falling back to memory cache: "+r),await Wm(n,new qd)}}else Oe(Oo,"Using default OfflineComponentProvider"),await Wm(n,new q5(void 0));return n._offlineComponents}async function YS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Oe(Oo,"Using user provided OnlineComponentProvider"),await I1(n,n._uninitializedComponentsProvider._online)):(Oe(Oo,"Using default OnlineComponentProvider"),await I1(n,new Ry))),n._onlineComponents}function W5(n){return YS(n).then(e=>e.syncEngine)}async function XS(n){const e=await YS(n),r=e.eventManager;return r.onListen=R5.bind(null,e.syncEngine),r.onUnlisten=j5.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=P5.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=D5.bind(null,e.syncEngine),r}function G5(n,e,r={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const h=new QS({next:m=>{h.Nu(),a.enqueueAndForget(()=>FS(o,p));const v=m.docs.has(l);!v&&m.fromCache?c.reject(new Ae(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?c.reject(new Ae(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new US(v0(l.path),h,{includeMetadataChanges:!0,Ka:!0});return VS(o,p)}(await XS(n),n.asyncQueue,e,r,i)),i.promise}function Q5(n,e,r={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const h=new QS({next:m=>{h.Nu(),a.enqueueAndForget(()=>FS(o,p)),m.fromCache&&u.source==="server"?c.reject(new Ae(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new US(l,h,{includeMetadataChanges:!0,Ka:!0});return VS(o,p)}(await XS(n),n.asyncQueue,e,r,i)),i.promise}function Y5(n,e){const r=new Ts;return n.asyncQueue.enqueueAndForget(async()=>M5(await W5(n),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="ComponentProvider",S1=new Map;function J5(n,e,r,i,s){return new _M(n,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,JS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firestore.googleapis.com",C1=!0;class k1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZS,this.ssl=C1}else this.host=e.host,this.ssl=e.ssl??C1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S3)throw new Ae(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bp{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new J4;switch(i.type){case"firstParty":return new nM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=S1.get(r);i&&(Oe(X5,"Removing Datastore"),S1.delete(r),i.terminate())}(this),Promise.resolve()}}function Z5(n,e,r,i={}){var c;n=Co(n,Bp);const s=hu(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${r}`;s&&(BI(`https://${l}`),qI("Firestore",!0)),o.host!==ZS&&o.host!==l&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:s,emulatorOptions:i};if(!So(u,a)&&(n._setSettings(u),i.mockUserToken)){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=Pn.MOCK_USER;else{h=wO(i.mockUserToken,(c=n._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Ae(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Pn(m)}n._authCredentials=new Z4(new L2(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vu(this.firestore,e,this._query)}}class rn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,i){if(xh(r,rn._jsonSchema))return new rn(e,i||null,new Fe(bt.fromString(r.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:nn("string",rn._jsonSchemaVersion),referencePath:nn("string")};class Eo extends vu{constructor(e,r,i){super(e,r,v0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Fe(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function Kf(n,e,...r){if(n=Yt(n),V2("collection","path",e),n instanceof Bp){const i=bt.fromString(e,...r);return zx(i),new Eo(n,null,i)}{if(!(n instanceof rn||n instanceof Eo))throw new Ae(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bt.fromString(e,...r));return zx(i),new Eo(n.firestore,null,i)}}function la(n,e,...r){if(n=Yt(n),arguments.length===1&&(e=f0.newId()),V2("doc","path",e),n instanceof Bp){const i=bt.fromString(e,...r);return Ux(i),new rn(n,null,new Fe(i))}{if(!(n instanceof rn||n instanceof Eo))throw new Ae(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(bt.fromString(e,...r));return Ux(i),new rn(n.firestore,n instanceof Eo?n.converter:null,new Fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="AsyncQueue";class N1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new NS(this,"async_queue_retry"),this._c=()=>{const i=Km();i&&Oe(A1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const r=Km();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Km();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Ts;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!gu(e))throw e;Oe(A1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",R1(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=r,r}enqueueAfterDelay(e,r,i){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=P0.createAndSchedule(this,e,r,i,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&Ue(47125,{Pc:R1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function R1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ch extends Bp{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new N1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new N1(e),this._firestoreClient=void 0,await e}}}function eL(n,e){const r=typeof n=="object"?n:e0(),i=typeof n=="string"?n:Dd,s=$a(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=vO("firestore");o&&Z5(s,...o)}return s}function qp(n){if(n._terminated)throw new Ae(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||tL(n),n._firestoreClient}function tL(n){var i,s,o,a;const e=n._freezeSettings(),r=J5(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new H5(n._authCredentials,n._appCheckCredentials,n._queue,r,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fr(xn.fromBase64String(e))}catch(r){throw new Ae(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Fr(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xh(e,Fr._jsonSchema))return Fr.fromBase64String(e.bytes)}}Fr._jsonSchemaVersion="firestore/bytes/1.0",Fr._jsonSchema={type:nn("string",Fr._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ae(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ae(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ae(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if(xh(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:nn("string",Wi._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xh(e,_i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new _i(e.vectorValues);throw new Ae(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_i._jsonSchemaVersion="firestore/vectorValue/1.0",_i._jsonSchema={type:nn("string",_i._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=/^__.*__$/;class rL{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Eh(e,this.data,r,this.fieldTransforms)}}class eC{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Fo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function tC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{dataSource:n})}}class F0{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new F0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Hd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tC(this.dataSource)&&nL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iL{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Up(e)}createContext(e,r,i,s=!1){return new F0({dataSource:e,methodName:r,targetDoc:i,path:vn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U0(n){const e=n._freezeSettings(),r=Up(n._databaseId);return new iL(n._databaseId,!!e.ignoreUndefinedProperties,r)}function nC(n,e,r,i,s,o={}){const a=n.createContext(o.merge||o.mergeFields?2:0,e,r,s);z0("Data must be an object, but it was:",a,i);const l=rC(i,a);let u,c;if(o.merge)u=new _r(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=iu(e,p,r);if(!a.contains(m))throw new Ae(pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oC(h,m)||h.push(m)}u=new _r(h),c=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=a.fieldTransforms;return new rL(new Zn(l),u,c)}class Hp extends V0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hp}}function sL(n,e,r,i){const s=n.createContext(1,e,r);z0("Data must be an object, but it was:",s,i);const o=[],a=Zn.empty();Vo(i,(u,c)=>{const h=sC(e,u,r);c=Yt(c);const p=s.childContextForFieldPath(h);if(c instanceof Hp)o.push(h);else{const m=kh(c,p);m!=null&&(o.push(h),a.set(h,m))}});const l=new _r(o);return new eC(a,l,s.fieldTransforms)}function oL(n,e,r,i,s,o){const a=n.createContext(1,e,r),l=[iu(e,i,r)],u=[s];if(o.length%2!=0)throw new Ae(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(iu(e,o[m])),u.push(o[m+1]);const c=[],h=Zn.empty();for(let m=l.length-1;m>=0;--m)if(!oC(c,l[m])){const v=l[m];let w=u[m];w=Yt(w);const b=a.childContextForFieldPath(v);if(w instanceof Hp)c.push(v);else{const S=kh(w,b);S!=null&&(c.push(v),h.set(v,S))}}const p=new _r(c);return new eC(h,p,a.fieldTransforms)}function aL(n,e,r,i=!1){return kh(r,n.createContext(i?4:3,e))}function kh(n,e){if(iC(n=Yt(n)))return z0("Unsupported field value:",e,n),rC(n,e);if(n instanceof V0)return function(i,s){if(!tC(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=kh(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(n,e)}return function(i,s){if((i=Yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=St.fromDate(i);return{timestampValue:zd(s.serializer,o)}}if(i instanceof St){const o=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zd(s.serializer,o)}}if(i instanceof Wi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fr)return{bytesValue:vS(s.serializer,i._byteString)};if(i instanceof rn){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:E0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof _i)return function(a,l){const u=a instanceof _i?a.toArray():a;return{mapValue:{fields:{[W2]:{stringValue:G2},[Md]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return _0(l.serializer,h)})}}}}}}(i,s);if(IS(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Rp(i)}`)}(n,e)}function rC(n,e){const r={};return z2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(n,(i,s)=>{const o=kh(s,e.childContextForField(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function iC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof Wi||n instanceof Fr||n instanceof rn||n instanceof V0||n instanceof _i||IS(n))}function z0(n,e,r){if(!iC(r)||!F2(r)){const i=Rp(r);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function iu(n,e,r){if((e=Yt(e))instanceof L0)return e._internalPath;if(typeof e=="string")return sC(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,r)}const lL=new RegExp("[~\\*/\\[\\]]");function sC(n,e,r){if(e.search(lL)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,r);try{return new L0(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,r)}}function Hd(n,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Ae(pe.INVALID_ARGUMENT,l+n+u)}function oC(n,e){return n.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{convertValue(e,r="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(No(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Vo(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var i,s,o;const r=(o=(s=(i=e.fields)==null?void 0:i[Md].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>Gt(a.doubleValue));return new _i(r)}convertGeoPoint(e){return new Wi(Gt(e.latitude),Gt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=jp(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){const r=Ao(e);return new St(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=bt.fromString(e);pt(TS(i),9688,{name:e});const s=new eh(i.get(1),i.get(3)),o=new Fe(i.popFirst(5));return s.isEqual(r)||Ps(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends uL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,r)}}const P1="@firebase/firestore",O1="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(iu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class cL extends lC{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $0{}class fL extends $0{}function dL(n,e,...r){let i=[];e instanceof $0&&i.push(e),i=i.concat(r),function(o){const a=o.filter(u=>u instanceof B0).length,l=o.filter(u=>u instanceof Kp).length;if(a>1||a>0&&l>0)throw new Ae(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Kp extends fL{constructor(e,r,i){super(),this._field=e,this._op=r,this._value=i,this.type="where"}static _create(e,r,i){return new Kp(e,r,i)}_apply(e){const r=this._parse(e);return uC(e._query,r),new vu(e.firestore,e.converter,xy(e._query,r))}_parse(e){const r=U0(e.firestore);return function(o,a,l,u,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Ae(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){D1(p,h);const w=[];for(const b of p)w.push(j1(u,o,b));m={arrayValue:{values:w}}}else m=j1(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||D1(p,h),m=aL(l,a,p,h==="in"||h==="not-in");return tn.create(c,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function pL(n,e,r){const i=e,s=iu("where",n);return Kp._create(s,i,r)}class B0 extends $0{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new B0(e,r)}_parse(e){const r=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return r.length===1?r[0]:bi.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,o){let a=s;const l=o.getFlattenedFilters();for(const u of l)uC(a,u),a=xy(a,u)}(e._query,r),new vu(e.firestore,e.converter,xy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function j1(n,e,r){if(typeof(r=Yt(r))=="string"){if(r==="")throw new Ae(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nS(e)&&r.indexOf("/")!==-1)throw new Ae(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const i=e.path.child(bt.fromString(r));if(!Fe.isDocumentKey(i))throw new Ae(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qx(n,new Fe(i))}if(r instanceof rn)return Qx(n,r._key);throw new Ae(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rp(r)}.`)}function D1(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uC(n,e){const r=function(s,o){for(const a of s)for(const l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ae(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function cC(n,e,r){let i;return i=n?r&&(r.merge||r.mergeFields)?n.toFirestore(e,r):n.toFirestore(e):e,i}class sc{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xa extends lC{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(iu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=xa._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:nn("string",xa._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class Wf extends xa{data(e={}){return super.data(e)}}class Fl{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new sc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Wf(this._firestore,this._userDataWriter,i.key,i,new sc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ae(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Wf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Wf(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sc(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:mL(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=f0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fl._jsonSchemaVersion="firestore/querySnapshot/1.0",Fl._jsonSchema={type:nn("string",Fl._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=U0(e)}set(e,r,i){this._verifyNotCommitted();const s=Gm(e,this._firestore),o=cC(s.converter,r,i),a=nC(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Hr.none())),this}update(e,r,i,...s){this._verifyNotCommitted();const o=Gm(e,this._firestore);let a;return a=typeof(r=Yt(r))=="string"||r instanceof L0?oL(this._dataReader,"WriteBatch.update",o._key,r,i,s):sL(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(a.toMutation(o._key,Hr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Gm(e,this._firestore);return this._mutations=this._mutations.concat(new w0(r._key,Hr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gm(n,e){if((n=Yt(n)).firestore!==e)throw new Ae(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n){n=Co(n,rn);const e=Co(n.firestore,Ch),r=qp(e);return G5(r,n._key).then(i=>yL(e,n,i))}function Qf(n){n=Co(n,vu);const e=Co(n.firestore,Ch),r=qp(e),i=new aC(e);return hL(n._query),Q5(r,n._query).then(s=>new Fl(e,i,n,s))}function M1(n,e,r){n=Co(n,rn);const i=Co(n.firestore,Ch),s=cC(n.converter,e,r),o=U0(i);return hC(i,[nC(o,"setDoc",n._key,s,n.converter!==null,r).toMutation(n._key,Hr.none())])}function hC(n,e){const r=qp(n);return Y5(r,e)}function yL(n,e,r){const i=r.docs.get(e._key),s=new aC(n);return new xa(n,s,e._key,i,new sc(r.hasPendingWrites,r.fromCache),e.converter)}function Qm(n){return n=Co(n,Ch),qp(n),new gL(n,e=>hC(n,e))}(function(e,r=!0){X4(fu),Qi(new xi("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new Ch(new eM(i.getProvider("auth-internal")),new rM(a,i.getProvider("app-check-internal")),wM(a,s),a);return o={useFetchStreams:r,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),qr(P1,O1,e),qr(P1,O1,"esm2020")})();const fC="@firebase/installations",q0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1e4,pC=`w:${q0}`,mC="FIS_v2",vL="https://firebaseinstallations.googleapis.com/v1",_L=60*60*1e3,wL="installations",xL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ja=new za(wL,xL,bL);function gC(n){return n instanceof Ei&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC({projectId:n}){return`${vL}/projects/${n}/installations`}function vC(n){return{token:n.token,requestStatus:2,expiresIn:TL(n.expiresIn),creationTime:Date.now()}}async function _C(n,e){const i=(await e.json()).error;return ja.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function wC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function EL(n,{refreshToken:e}){const r=wC(n);return r.append("Authorization",IL(e)),r}async function xC(n){const e=await n();return e.status>=500&&e.status<600?n():e}function TL(n){return Number(n.replace("s","000"))}function IL(n){return`${mC} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL({appConfig:n,heartbeatServiceProvider:e},{fid:r}){const i=yC(n),s=wC(n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={fid:r,authVersion:mC,appId:n.appId,sdkVersion:pC},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await xC(()=>fetch(i,l));if(u.ok){const c=await u.json();return{fid:c.fid||r,registrationStatus:2,refreshToken:c.refreshToken,authToken:vC(c.authToken)}}else throw await _C("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=/^[cdef][\w-]{21}$/,Py="";function AL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const r=NL(n);return kL.test(r)?r:Py}catch{return Py}}function NL(n){return CL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Map;function TC(n,e){const r=Wp(n);IC(r,e),RL(r,e)}function IC(n,e){const r=EC.get(n);if(r)for(const i of r)i(e)}function RL(n,e){const r=PL();r&&r.postMessage({key:n,fid:e}),OL()}let ma=null;function PL(){return!ma&&"BroadcastChannel"in self&&(ma=new BroadcastChannel("[Firebase] FID Change"),ma.onmessage=n=>{IC(n.data.key,n.data.fid)}),ma}function OL(){EC.size===0&&ma&&(ma.close(),ma=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="firebase-installations-database",DL=1,Da="firebase-installations-store";let Ym=null;function H0(){return Ym||(Ym=YI(jL,DL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Da)}}})),Ym}async function Kd(n,e){const r=Wp(n),s=(await H0()).transaction(Da,"readwrite"),o=s.objectStore(Da),a=await o.get(r);return await o.put(e,r),await s.done,(!a||a.fid!==e.fid)&&TC(n,e.fid),e}async function SC(n){const e=Wp(n),i=(await H0()).transaction(Da,"readwrite");await i.objectStore(Da).delete(e),await i.done}async function Gp(n,e){const r=Wp(n),s=(await H0()).transaction(Da,"readwrite"),o=s.objectStore(Da),a=await o.get(r),l=e(a);return l===void 0?await o.delete(r):await o.put(l,r),await s.done,l&&(!a||a.fid!==l.fid)&&TC(n,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(n){let e;const r=await Gp(n.appConfig,i=>{const s=ML(i),o=LL(n,s);return e=o.registrationPromise,o.installationEntry});return r.fid===Py?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function ML(n){const e=n||{fid:AL(),registrationStatus:0};return CC(e)}function LL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ja.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=VL(n,r);return{installationEntry:r,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:FL(n)}:{installationEntry:e}}async function VL(n,e){try{const r=await SL(n,e);return Kd(n.appConfig,r)}catch(r){throw gC(r)&&r.customData.serverCode===409?await SC(n.appConfig):await Kd(n.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function FL(n){let e=await L1(n.appConfig);for(;e.registrationStatus===1;)await bC(100),e=await L1(n.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:i}=await K0(n);return i||r}return e}function L1(n){return Gp(n,e=>{if(!e)throw ja.create("installation-not-found");return CC(e)})}function CC(n){return UL(n)?{fid:n.fid,registrationStatus:0}:n}function UL(n){return n.registrationStatus===1&&n.registrationTime+dC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL({appConfig:n,heartbeatServiceProvider:e},r){const i=$L(n,r),s=EL(n,r),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const a={installation:{sdkVersion:pC,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await xC(()=>fetch(i,l));if(u.ok){const c=await u.json();return vC(c)}else throw await _C("Generate Auth Token",u)}function $L(n,{fid:e}){return`${yC(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(n,e=!1){let r;const i=await Gp(n.appConfig,o=>{if(!kC(o))throw ja.create("not-registered");const a=o.authToken;if(!e&&HL(a))return o;if(a.requestStatus===1)return r=BL(n,e),o;{if(!navigator.onLine)throw ja.create("app-offline");const l=WL(o);return r=qL(n,l),l}});return r?await r:i.authToken}async function BL(n,e){let r=await V1(n.appConfig);for(;r.authToken.requestStatus===1;)await bC(100),r=await V1(n.appConfig);const i=r.authToken;return i.requestStatus===0?W0(n,e):i}function V1(n){return Gp(n,e=>{if(!kC(e))throw ja.create("not-registered");const r=e.authToken;return GL(r)?{...e,authToken:{requestStatus:0}}:e})}async function qL(n,e){try{const r=await zL(n,e),i={...e,authToken:r};return await Kd(n.appConfig,i),r}catch(r){if(gC(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await SC(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Kd(n.appConfig,i)}throw r}}function kC(n){return n!==void 0&&n.registrationStatus===2}function HL(n){return n.requestStatus===2&&!KL(n)}function KL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+_L}function WL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function GL(n){return n.requestStatus===1&&n.requestTime+dC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(n){const e=n,{installationEntry:r,registrationPromise:i}=await K0(e);return i?i.catch(console.error):W0(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n,e=!1){const r=n;return await XL(r),(await W0(r,e)).token}async function XL(n){const{registrationPromise:e}=await K0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(n){if(!n||!n.options)throw Xm("App Configuration");if(!n.name)throw Xm("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!n.options[r])throw Xm(r);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Xm(n){return ja.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="installations",ZL="installations-internal",e6=n=>{const e=n.getProvider("app").getImmediate(),r=JL(e),i=$a(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},t6=n=>{const e=n.getProvider("app").getImmediate(),r=$a(e,AC).getImmediate();return{getId:()=>QL(r),getToken:s=>YL(r,s)}};function n6(){Qi(new xi(AC,e6,"PUBLIC")),Qi(new xi(ZL,t6,"PRIVATE"))}n6();qr(fC,q0);qr(fC,q0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="analytics",r6="firebase_id",i6="origin",s6=60*1e3,o6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",G0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new Cp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xr=new za("analytics","Analytics",a6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(n){if(!n.startsWith(G0)){const e=xr.create("invalid-gtag-resource",{gtagURL:n});return Kn.warn(e.message),""}return n}function NC(n){return Promise.all(n.map(e=>e.catch(r=>r)))}function u6(n,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(n,e)),r}function c6(n,e){const r=u6("firebase-js-sdk-policy",{createScriptURL:l6}),i=document.createElement("script"),s=`${G0}?l=${n}&id=${e}`;i.src=r?r==null?void 0:r.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function h6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function f6(n,e,r,i,s,o){const a=i[s];try{if(a)await e[a];else{const u=(await NC(r)).find(c=>c.measurementId===s);u&&await e[u.appId]}}catch(l){Kn.error(l)}n("config",s,o)}async function d6(n,e,r,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await NC(r);for(const u of a){const c=l.find(p=>p.measurementId===u),h=c&&e[c.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",i,s||{})}catch(o){Kn.error(o)}}function p6(n,e,r,i){async function s(o,...a){try{if(o==="event"){const[l,u]=a;await d6(n,e,r,l,u)}else if(o==="config"){const[l,u]=a;await f6(n,e,r,i,l,u)}else if(o==="consent"){const[l,u]=a;n("consent",l,u)}else if(o==="get"){const[l,u,c]=a;n("get",l,u,c)}else if(o==="set"){const[l]=a;n("set",l)}else n(o,...a)}catch(l){Kn.error(l)}}return s}function m6(n,e,r,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=p6(o,n,e,r),{gtagCore:o,wrappedGtag:window[s]}}function g6(n){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(G0)&&r.src.includes(n))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=30,v6=1e3;class _6{constructor(e={},r=v6){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const RC=new _6;function w6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function x6(n){var a;const{appId:e,apiKey:r}=n,i={method:"GET",headers:w6(r)},s=o6.replace("{app-id}",e),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();(a=u.error)!=null&&a.message&&(l=u.error.message)}catch{}throw xr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function b6(n,e=RC,r){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw xr.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw xr.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new I6;return setTimeout(async()=>{l.abort()},s6),PC({appId:i,apiKey:s,measurementId:o},a,l,e)}async function PC(n,{throttleEndTimeMillis:e,backoffCount:r},i,s=RC){var l;const{appId:o,measurementId:a}=n;try{await E6(i,e)}catch(u){if(a)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await x6(n);return s.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!T6(c)){if(s.deleteThrottleMetadata(o),a)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw u}const h=Number((l=c==null?void 0:c.customData)==null?void 0:l.httpStatus)===503?hx(r,s.intervalMillis,y6):hx(r,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:r+1};return s.setThrottleMetadata(o,p),Kn.debug(`Calling attemptFetch again in ${h} millis`),PC(n,p,i,s)}}function E6(n,e){return new Promise((r,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(r,s);n.addEventListener(()=>{clearTimeout(o),i(xr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function T6(n){if(!(n instanceof Ei)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class I6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function S6(n,e,r,i,s){if(s&&s.global){n("event",r,i);return}else{const o=await e,a={...i,send_to:o};n("event",r,a)}}async function C6(n,e,r,i){if(i&&i.global){const s={};for(const o of Object.keys(r))s[`user_properties.${o}`]=r[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(){if(KI())try{await WI()}catch(n){return Kn.warn(xr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Kn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function A6(n,e,r,i,s,o,a){const l=b6(n);l.then(m=>{r[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Kn.error(m)),e.push(l);const u=k6().then(m=>{if(m)return i.getId()}),[c,h]=await Promise.all([l,u]);g6(o)||c6(o,c.measurementId),s("js",new Date);const p=(a==null?void 0:a.config)??{};return p[i6]="firebase",p.update=!0,h!=null&&(p[r6]=h),s("config",c.measurementId,p),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.app=e}_delete(){return delete Ul[this.app.options.appId],Promise.resolve()}}let Ul={},F1=[];const U1={};let Jm="dataLayer",R6="gtag",z1,Q0,$1=!1;function P6(){const n=[];if(HI()&&n.push("This is a browser extension environment."),AO()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),r=xr.create("invalid-analytics-context",{errorInfo:e});Kn.warn(r.message)}}function O6(n,e,r){P6();const i=n.options.appId;if(!i)throw xr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xr.create("no-api-key");if(Ul[i]!=null)throw xr.create("already-exists",{id:i});if(!$1){h6(Jm);const{wrappedGtag:o,gtagCore:a}=m6(Ul,F1,U1,Jm,R6);Q0=o,z1=a,$1=!0}return Ul[i]=A6(n,F1,U1,e,z1,Jm,r),new N6(n)}function j6(n=e0()){n=Yt(n);const e=$a(n,Wd);return e.isInitialized()?e.getImmediate():D6(n)}function D6(n,e={}){const r=$a(n,Wd);if(r.isInitialized()){const s=r.getImmediate();if(So(e,r.getOptions()))return s;throw xr.create("already-initialized")}return r.initialize({options:e})}function M6(n,e,r){n=Yt(n),C6(Q0,Ul[n.app.options.appId],e,r).catch(i=>Kn.error(i))}function L6(n,e,r,i){n=Yt(n),S6(Q0,Ul[n.app.options.appId],e,r,i).catch(s=>Kn.error(s))}const B1="@firebase/analytics",q1="0.10.19";function V6(){Qi(new xi(Wd,(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return O6(i,s,r)},"PUBLIC")),Qi(new xi("analytics-internal",n,"PRIVATE")),qr(B1,q1),qr(B1,q1,"esm2020");function n(e){try{const r=e.getProvider(Wd).getImmediate();return{logEvent:(i,s,o)=>L6(r,i,s,o),setUserProperties:(i,s)=>M6(r,i,s)}}catch(r){throw xr.create("interop-component-reg-failed",{reason:r})}}}V6();const OC={apiKey:"AIzaSyAC3NrbNayY3xqNPyAQxLhDNiXN0hgPgDA",authDomain:"nexus-mind-c32cf.firebaseapp.com",projectId:"nexus-mind-c32cf",storageBucket:"nexus-mind-c32cf.firebasestorage.app",messagingSenderId:"875586424699",appId:"1:875586424699:web:fd086d034f584277ebb7de",measurementId:"G-8MBZWJRWK6"};OC.apiKey||console.warn("Firebase API Key is missing. Cloud sync will not work.");const Y0=XI(OC),Zm=Q4(Y0),F6=new gs,Dr=eL(Y0);typeof window<"u"&&j6(Y0);const jC=le.createContext(),Uo=()=>le.useContext(jC),U6=({children:n})=>{const e=Mf(()=>wt.contacts.orderBy("lastUpdated").reverse().toArray()),r=Mf(()=>wt.schedules.orderBy("date").toArray()),i=Mf(()=>wt.settings.get("userProfile")),[s,o]=le.useState(null),[a,l]=le.useState(null),[u,c]=le.useState(!1),[h,p]=le.useState(!1);le.useEffect(()=>{const j=LD(Zm,F=>{l(F)});return()=>j()},[]);const m=async()=>{try{const F=(await i4(Zm,F6)).user,Z=la(Dr,"users",F.uid);return(await Gf(Z)).exists()&&await wt.contacts.count()===0&&window.confirm("")&&(l(F),await b()),F}catch(j){throw console.error("Login Error:",j),j}},v=async()=>{try{await VD(Zm)}catch(j){console.error("Logout Error:",j)}},w=async()=>{if(!a){console.error("Sync Error: No user logged in");return}c(!0);try{const j=await wt.contacts.toArray(),F=await wt.schedules.toArray(),Z=await wt.settings.get("userProfile")||{},ee=ue=>ue==null?null:ue instanceof Date?ue.toISOString():Array.isArray(ue)?ue.map(de=>ee(de)):typeof ue=="object"?Object.entries(ue).reduce((de,[Ie,ce])=>(ce!==void 0&&(de[Ie]=ee(ce)),de),{}):ue,fe=la(Dr,"users",a.uid);console.log("Attempting to write profile to:",fe.path),await M1(fe,{profile:ee(Z),lastSynced:new Date().toISOString(),email:a.email||""},{merge:!0}),console.log("Profile sync successful");const re=async(ue,de)=>{const Ie=Kf(Dr,"users",a.uid,ue);console.log(`Syncing ${ue}, items: ${de.length}`);let ce=[];try{ce=(await Qf(Ie)).docs.map(Xt=>Xt.id)}catch(Be){throw console.error(`Error fetching existing ${ue}:`,Be),Be.code==="permission-denied"?new Error(` ${ue} `):Be}const Ne=de.map(Be=>Be.id).filter(Boolean),Pe=ce.filter(Be=>!Ne.includes(Be));let Me=Qm(Dr),Ge=0;for(const Be of Pe)Me.delete(la(Ie,Be)),Ge++,Ge===500&&(await Me.commit(),Me=Qm(Dr),Ge=0);for(const Be of de){if(!Be.id)continue;const Xt=ee(Be);Me.set(la(Ie,Be.id),Xt),Ge++,Ge===500&&(await Me.commit(),Me=Qm(Dr),Ge=0)}Ge>0&&await Me.commit()};await re("contacts",j),await re("schedules",F),console.log("Synced to cloud successfully (Mirror Mode)")}catch(j){throw console.error("Sync Error Detailed:",j),j.code==="permission-denied"||j.message.includes("permission-denied")?new Error(" Firebase Rules "):new Error(`: ${j.message}`)}finally{c(!1)}},b=async()=>{if(a){c(!0);try{const j=la(Dr,"users",a.uid),F=await Gf(j);if(F.exists()){const ce=F.data();ce.profile&&await wt.settings.put({...ce.profile,id:"userProfile"})}const Z=ce=>{if(!ce||typeof ce!="object")return ce;const Ne=Array.isArray(ce)?[]:{};for(const[Pe,Me]of Object.entries(ce))typeof Me=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(Me)?Ne[Pe]=new Date(Me):typeof Me=="object"?Ne[Pe]=Z(Me):Ne[Pe]=Me;return Ne},ee=Kf(Dr,"users",a.uid,"contacts"),fe=await Qf(ee),re=[];fe.forEach(ce=>{re.push(Z(ce.data()))}),re.length>0&&(await wt.contacts.clear(),await wt.contacts.bulkPut(re));const ue=Kf(Dr,"users",a.uid,"schedules"),de=await Qf(ue),Ie=[];de.forEach(ce=>{Ie.push(Z(ce.data()))}),Ie.length>0&&(await wt.schedules.clear(),await wt.schedules.bulkPut(Ie)),console.log("Synced from cloud successfully (Mirror Mode)")}catch(j){throw console.error("Download Error:",j),j}finally{c(!1)}}};le.useEffect(()=>{(async()=>{await wt.settings.get("userProfile")||await wt.settings.add({id:"userProfile",name:"",bio:"",avatar:"",themeColor:"#2b6cee",links:[],categories:["","","","",""]})})()},[]),le.useEffect(()=>{if(i!=null&&i.themeColor){document.documentElement.style.setProperty("--primary-color",i.themeColor);const j=i.themeColor.replace("#",""),F=parseInt(j.substring(0,2),16),Z=parseInt(j.substring(2,4),16),ee=parseInt(j.substring(4,6),16);document.documentElement.style.setProperty("--primary-color-rgb",`${F}, ${Z}, ${ee}`)}},[i==null?void 0:i.themeColor]);const S=async j=>{const F=crypto.randomUUID();return await wt.contacts.add({...j,id:F,lastUpdated:new Date}),a&&w().catch(console.error),F},E=async(j,F)=>{p(!0),await wt.contacts.update(j,{...F,lastUpdated:new Date}),a&&w().catch(console.error)},I=async(j,F)=>await wt.contacts.update(j,{position:F}),R=async j=>{await wt.settings.update("userProfile",j),a&&w().catch(console.error)},P=async j=>{await wt.contacts.delete(j),a&&w().catch(console.error)},M=async()=>{if(!a)throw new Error("");try{const j=await wt.settings.get("userProfile");if(!j)throw new Error("");const F=la(Dr,"public_profiles",a.uid),Z={name:j.name||"",avatar:j.avatar||"",bio:j.bio||"",links:j.links||[],uid:a.uid,updatedAt:new Date().toISOString()};return console.log("Attempting to write to Firestore: public_profiles/"+a.uid),await M1(F,Z),console.log("Write operation completed!"),(await Gf(F)).exists()?console.log("Verification success: Document exists in Firestore!"):console.error("Verification failed: Document still not found after write!"),a.uid}catch(j){throw console.error("Failed to publish profile:",j),j}},L=async(j,F)=>{const Z=await wt.contacts.get(j);if(Z){const ee=[...Z.memories||[],{...F,date:F.date||new Date}];await wt.contacts.update(j,{memories:ee,lastUpdated:new Date}),a&&w().catch(console.error)}},[k,C]=le.useState(null),D=(j,F="")=>new Promise(Z=>{C({title:j,placeholder:F,onConfirm:ee=>{C(null),Z(ee)},onCancel:()=>{C(null),Z(null)}})}),V=async j=>{const F=crypto.randomUUID();return await wt.schedules.add({...j,id:F}),a&&w().catch(console.error),F},U=async(j,F)=>{await wt.schedules.update(j,F),a&&w().catch(console.error)},B=async j=>{await wt.schedules.delete(j),a&&w().catch(console.error)};return y.jsxs(jC.Provider,{value:{contacts:e,schedules:r,currentContactId:s,setCurrentContactId:o,userProfile:i,updateContactPosition:I,updateProfile:R,publishProfile:M,addContact:S,updateContact:E,deleteContact:P,addMemory:L,addSchedule:V,updateSchedule:U,deleteSchedule:B,customPrompt:D,promptConfig:k,setPromptConfig:C,currentUser:a,login:m,logout:v,syncToCloud:w,syncFromCloud:b,isSyncing:u,unsavedChanges:h,setUnsavedChanges:p},children:[n,k&&y.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:y.jsxs("div",{className:"w-full max-w-xs bg-[#1a1a1a] border border-white/10 rounded-2xl p-6 shadow-2xl animate-in zoom-in-95 duration-200",children:[y.jsx("h3",{className:"text-lg font-bold mb-4 text-white/90",children:k.title}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white outline-none focus:ring-1 ring-primary mb-6",placeholder:k.placeholder,onKeyDown:j=>{j.key==="Enter"&&k.onConfirm(j.target.value),j.key==="Escape"&&k.onCancel()},id:"custom-prompt-input"}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:k.onCancel,className:"flex-1 py-3 rounded-xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:()=>{const j=document.getElementById("custom-prompt-input").value;k.onConfirm(j)},className:"flex-1 py-3 rounded-xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:""})]})]})})]})},z6=()=>{const n=Lo(),{contacts:e,addContact:r,updateContact:i,addMemory:s,userProfile:o,updateProfile:a,customPrompt:l,schedules:u,currentUser:c,login:h}=Uo(),[p,m]=le.useState(!1),[v,w]=le.useState(!1),[b,S]=le.useState(""),[E,I]=le.useState(!1),[R,P]=le.useState(!1),[M,L]=le.useState(!1),k=le.useMemo(()=>c?`${window.location.origin+window.location.pathname.replace(/\/$/,"")}/#/p/${c.uid}`:null,[c]),C=[{icon:"auto_awesome_motion",title:"",desc:"",color:"text-primary"},{icon:"qr_code_2",title:"",desc:" QR  QR Code",color:"text-amber-400"},{icon:"hub",title:"",desc:"",color:"text-indigo-400"},{icon:"search",title:"",desc:"",color:"text-purple-400"},{icon:"calendar_month",title:"",desc:"",color:"text-emerald-400"},{icon:"cloud_sync",title:"100% ",desc:" Google",color:"text-blue-400"}],D=le.useMemo(()=>{if(!u||!e)return[];const Se=new Date;return Se.setHours(0,0,0,0),u.filter(Ye=>{const Ft=new Date(Ye.date);Ft.setHours(0,0,0,0);const ht=Math.ceil((Ft.getTime()-Se.getTime())/(1e3*60*60*24));return ht>=0&&ht<=3}).map(Ye=>({...Ye,diffDays:Math.ceil((new Date(Ye.date).getTime()-Se.getTime())/(1e3*60*60*24))}))},[u,e]),[V,U]=le.useState(!1),[B,j]=le.useState(""),[F,Z]=le.useState(null),[ee,fe]=le.useState(""),[re,ue]=le.useState(""),[de,Ie]=le.useState(""),[ce,Ne]=le.useState(""),[Pe,Me]=le.useState(""),[Ge,Be]=le.useState(new Date().toISOString().split("T")[0]),[Xt,Le]=le.useState("synced"),[_u,zo]=le.useState(!1),Je=le.useMemo(()=>(o==null?void 0:o.categories)||["","","","",""],[o]);yt.useEffect(()=>{Je.length>0&&!Pe&&Me(Je[0])},[Je]);const or=le.useMemo(()=>B.trim()?(e==null?void 0:e.filter(Se=>{var Ye,Ft;return Se.name.toLowerCase().includes(B.toLowerCase())||((Ye=Se.company)==null?void 0:Ye.toLowerCase().includes(B.toLowerCase()))||((Ft=Se.tags)==null?void 0:Ft.some(ht=>ht.toLowerCase().includes(B.toLowerCase())))}).sort((Se,Ye)=>new Date(Ye.lastUpdated).getTime()-new Date(Se.lastUpdated).getTime()))||[]:[],[e,B]),Ha=async()=>{let Se=F;if(!Se&&re.trim())Se=await r({name:re,phone:ce,tags:[Pe,""],importance:50,birthday:de||null,memories:[]});else if(Se&&(de||ce)){const Ye={};de&&(Ye.birthday=de),ce&&(Ye.phone=ce),await i(Se,Ye)}Se&&ee.trim()&&(await s(Se,{content:ee,location:"",date:new Date(Ge)}),U(!1),j(""),Z(null),fe(""),ue(""),Ie(""),Ne(""),Me(Je[0]||""),Be(new Date().toISOString().split("T")[0]),m(!1),navigator.vibrate&&navigator.vibrate(50))},Gr=async Se=>{var ht,Ut,hn,$o;const Ye=Se.target.files[0];if(!Ye)return;w(!0);let Ft="";try{const En=kt=>new Promise((Re,ur)=>{const sn=new FileReader;sn.readAsDataURL(kt),sn.onload=Vn=>{const _e=new Image;_e.src=Vn.target.result,_e.onload=()=>{const cr=document.createElement("canvas"),Ot=1024,Fn=1024;let mn=_e.width,At=_e.height;mn>At?mn>Ot&&(At*=Ot/mn,mn=Ot):At>Fn&&(mn*=Fn/At,At=Fn),cr.width=mn,cr.height=At,cr.getContext("2d").drawImage(_e,0,0,mn,At);const wu=cr.toDataURL("image/jpeg",.7);Re(wu)},_e.onerror=()=>ur(new Error(""))},sn.onerror=()=>ur(new Error(""))});console.log(" ..."),Ft=await En(Ye);const Tn=Ft.replace(/^data:image\/\w+;base64,/,""),Yn="AIzaSyCoWWuzkT7jR1SN7BCP-rFlCYPaYvfh1Wk".trim();if(!Yn)throw new Error(" API Key");const Sr=` JSON

1.  KaneChen Vice President
2.  Email 
3. summary []  []  []
4.  "call", "mail", "business"
5.  JSON Markdown 
JSON {"name":"","phone":"0913-889-333","email":"KaneChen@chailease.com.tw","company":"","title":"","address":"806616 811","website":"www.finatrade.com.tw","summary":""}`,Cr=new aO(Yn),es=["gemini-3-flash-preview","gemini-2.5-flash"];let kr=null,ut=null,Qr="";const ar=[];console.log(" ...");for(const kt of es){S(` ${kt} ...`);let Re=!1;const ur=[kt,`models/${kt}`];for(const sn of ur){if(Re)break;try{ar.push(sn);const _e=Cr.getGenerativeModel({model:sn}).generateContent([Sr,{inlineData:{data:Tn,mimeType:"image/jpeg"}}]),cr=new Promise((At,Ka)=>setTimeout(()=>Ka(new Error("Request Timeout")),3e4)),Fn=await(await Promise.race([_e,cr])).response;if(!Fn)throw new Error("Empty Response");if((Fn.candidates||[]).length===0){const At=Fn.promptFeedback;throw At&&At.blockReason?new Error(`Security Block: ${At.blockReason}`):new Error("No Result")}if(Qr=Fn.text(),Qr){const At=Qr.replace(/```json|```/g,"").trim();ut=JSON.parse(At),Re=!0;break}}catch(Vn){if(kr=Vn,(ht=Vn.message)!=null&&ht.includes("404")||(Ut=Vn.message)!=null&&Ut.includes("403")||(hn=Vn.message)!=null&&hn.includes("401"))break}}if(ut)break}if(!ut){const kt=`
: ${ar.join(", ")}
: ${kr==null?void 0:kr.message}`;throw new Error(kt)}const zt=e.find(kt=>ut.phone&&kt.phone===ut.phone||ut.name&&kt.name===ut.name);let lr;zt?window.confirm(`${zt.name}${zt.phone?` (${zt.phone})`:""}


()`)?(lr=zt.id,await i(lr,{company:ut.company||zt.company,title:ut.title||zt.title,email:ut.email||zt.email,address:ut.address||zt.address,website:ut.website||zt.website,cardImage:Ft||zt.cardImage,lastUpdated:new Date().toISOString()})):lr=await r({name:ut.name||"",phone:ut.phone||"",email:ut.email||"",company:ut.company||"",title:ut.title||"",address:ut.address||"",website:ut.website||"",bio:"",cardImage:Ft,ocrText:"",tags:["AI  ()"],memories:[],importance:50}):lr=await r({name:ut.name||"",phone:ut.phone||"",email:ut.email||"",company:ut.company||"",title:ut.title||"",address:ut.address||"",website:ut.website||"",bio:"",cardImage:Ft,ocrText:"",tags:["AI "],memories:[],importance:50}),navigator.vibrate&&navigator.vibrate(50),n(`/profile/${lr}`)}catch(En){console.error("Gemini OCR Detailed Error:",En),En.status||($o=En.message)!=null&&$o.match(/\d{3}/)&&En.message.match(/\d{3}/)[0];let Tn=En.message||"";Tn.includes("403")||Tn.includes("PERMISSION_DENIED")?Tn=`API 
1. Google Cloud Console  (Referrer Restrictions)
2. API  Generative Language API
3.  (/ VPN)`:Tn.includes("429")||Tn.includes("RESOURCE_EXHAUSTED")?Tn="":Tn.includes("404")&&(Tn=" AI "),alert(`${Tn}`)}finally{w(!1),m(!1)}};return y.jsxs("div",{className:"w-full h-full",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 mb-2 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>L(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-amber-400 hover:bg-amber-400/10 hover:border-amber-400/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"qr_code_2"})}),y.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>n("/settings"),children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-lg rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx("div",{className:"size-12 rounded-2xl bg-gradient-to-br from-primary to-primary/60 p-0.5 shadow-lg shadow-primary/20 relative z-10",children:y.jsx("div",{className:"w-full h-full rounded-[14px] bg-[#0a0a0c] flex items-center justify-center overflow-hidden",children:o!=null&&o.avatar?y.jsx("img",{src:o.avatar,className:"w-full h-full object-cover",alt:"avatar"}):y.jsx("span",{className:"material-symbols-outlined text-white/20 text-2xl",children:"person"})})})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-clip-text",children:""}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"size-1.5 rounded-full bg-primary animate-pulse"}),y.jsx("p",{className:"text-[10px] font-black text-white/30 tracking-[0.2em] uppercase",children:"Nexus Core Active"})]})]})]}),y.jsx("button",{onClick:()=>P(!0),className:"size-11 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 hover:border-primary/20 transition-all active:scale-90 group",children:y.jsx("span",{className:"material-symbols-outlined text-[22px] group-hover:rotate-12 transition-transform",children:"help_outline"})})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{type:"text",placeholder:"...",value:B,onChange:Se=>j(Se.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/40 transition-all"})]})]}),D.length>0&&y.jsx("div",{className:"px-6 py-4 animate-in fade-in slide-in-from-top-4 duration-500",children:y.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-[28px] p-5 backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-[20px]",children:"notification_important"}),y.jsx("h2",{className:"text-xs font-bold text-primary uppercase tracking-widest",children:""})]}),y.jsx("div",{className:"space-y-4",children:D.map(Se=>y.jsxs("div",{className:"flex items-center justify-between group",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 truncate",children:Se.title}),y.jsxs("div",{className:"flex gap-2",children:[Se.contactIds.slice(0,3).map(Ye=>{var Ft;return y.jsx("button",{onClick:()=>n(`/profile/${Ye}`),className:"text-[10px] text-primary/80 font-bold hover:text-primary transition-colors underline decoration-primary/30 underline-offset-2",children:(Ft=e.find(ht=>ht.id===Ye))==null?void 0:Ft.name},Ye)}),Se.contactIds.length>3&&y.jsx("span",{className:"text-[10px] text-white/30",children:"..."})]})]}),y.jsxs("div",{className:"text-right shrink-0 ml-4",children:[y.jsx("p",{className:"text-[10px] font-black text-primary uppercase",children:Se.diffDays===0?"":`${Se.diffDays} `}),y.jsxs("button",{onClick:()=>n("/vault"),className:"text-[10px] font-bold text-white/30 hover:text-white transition-colors flex items-center gap-1 mt-1",children:["",y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"})]})]})]},Se.id))})]})}),y.jsx("div",{className:"mb-8 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:["","","",""].map((Se,Ye)=>y.jsx("button",{className:`px-5 py-2.5 rounded-xl text-xs font-bold whitespace-nowrap transition-all duration-300 ${Ye===0?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white border border-white/5"}`,children:Se},Se))})}),y.jsxs("main",{className:"flex-1 pb-32",children:[v&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/5 rounded-3xl border border-white/5 border-dashed",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl animate-pulse"}),y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent relative z-10"})]}),y.jsx("span",{className:"mt-4 text-sm font-medium text-white/40 animate-pulse",children:b||"..."})]}),(e==null?void 0:e.length)===0&&!v&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-white/20",children:[y.jsx("div",{className:"size-20 rounded-full bg-white/5 flex items-center justify-center mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"database_off"})}),y.jsx("p",{className:"text-sm font-medium",children:""})]}),y.jsx("div",{className:"grid grid-cols-1 gap-4",children:or.map(Se=>{var Ye,Ft,ht;return y.jsx("div",{onClick:()=>n(`/profile/${Se.id}`),className:"glass-card-modern group p-5 rounded-[24px] cursor-pointer",children:y.jsxs("div",{className:"flex items-center gap-5",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"size-16 rounded-2xl overflow-hidden bg-black/40 border border-white/10 group-hover:border-primary/40 transition-all duration-500",children:Se.cardImage?y.jsx("img",{src:Se.cardImage,alt:Se.name,className:"size-full object-cover group-hover:scale-110 transition-transform duration-700"}):y.jsx("div",{className:"size-full flex items-center justify-center text-white/10 text-2xl font-black bg-gradient-to-br from-white/5 to-transparent",children:Se.name[0]})}),Se.importance>80&&y.jsx("div",{className:"absolute -top-1.5 -right-1.5 size-5 bg-primary rounded-full border-2 border-[#030303] flex items-center justify-center shadow-lg shadow-primary/40",children:y.jsx("span",{className:"material-symbols-outlined text-[10px] text-white font-black",children:"priority_high"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[y.jsx("h3",{className:"text-[17px] font-bold text-white group-hover:text-primary transition-colors truncate",children:Se.name}),y.jsx("span",{className:"text-[10px] font-medium text-white/20 tracking-wider uppercase",children:new Date(Se.lastUpdated).toLocaleDateString("zh-TW",{month:"short",day:"numeric"})})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[10px] font-black text-primary px-2.5 py-1 bg-primary/10 rounded-lg border border-primary/20 uppercase tracking-widest",children:((Ye=Se.tags)==null?void 0:Ye[0])||""}),y.jsx("p",{className:"text-[13px] text-white/40 truncate italic font-medium",children:((ht=(Ft=Se.memories)==null?void 0:Ft[0])==null?void 0:ht.content)||"..."})]})]}),y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 -translate-x-2 group-hover:translate-x-0",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary text-xl",children:"chevron_right"})})]})},Se.id)})})]}),y.jsx("div",{className:"fixed bottom-28 right-6 z-50",children:y.jsxs("div",{className:"relative",children:[p&&y.jsxs("div",{className:"absolute bottom-full right-0 mb-4 space-y-3 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[y.jsxs("label",{className:"flex items-center justify-end gap-3 cursor-pointer group",children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"contact_page"})}),y.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Gr})]}),y.jsxs("button",{className:"flex items-center justify-end gap-3 group",onClick:()=>U(!0),children:[y.jsx("span",{className:"bg-[#1c1f27] border border-white/10 px-4 py-2 rounded-2xl text-xs font-bold text-white/80 shadow-2xl opacity-0 group-hover:opacity-100 transition-opacity",children:""}),y.jsx("div",{className:"size-14 bg-[#1c1f27] border border-white/10 rounded-[22px] flex items-center justify-center text-white/60 hover:text-primary hover:border-primary/50 transition-all shadow-2xl",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"edit_note"})})]})]}),y.jsx("button",{className:`size-16 rounded-[24px] bg-primary flex items-center justify-center transition-all duration-500 shadow-xl shadow-primary/30 active:scale-90 ${p?"rotate-[135deg] rounded-full":"rotate-0"}`,onClick:()=>m(!p),children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"add"})})]})}),R&&y.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-sm bg-[#1a1a1a] border border-white/10 rounded-[32px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"px-8 pt-10 pb-6 text-center border-b border-white/5 bg-gradient-to-b from-primary/10 to-transparent",children:[y.jsx("div",{className:"size-16 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-[32px]",children:"auto_awesome"})}),y.jsx("h3",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-bold text-primary/60 uppercase tracking-[0.2em] mt-1",children:"Nexus Mind Guide"})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto no-scrollbar space-y-6",children:C.map((Se,Ye)=>y.jsxs("div",{className:"flex gap-4 group",children:[y.jsx("div",{className:"size-10 rounded-xl bg-white/5 flex items-center justify-center shrink-0 group-hover:bg-white/10 transition-colors",children:y.jsx("span",{className:`material-symbols-outlined text-[20px] ${Se.color}`,children:Se.icon})}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("h4",{className:"text-xs font-bold text-white/90",children:Se.title}),y.jsx("p",{className:"text-[10px] leading-relaxed text-white/40 font-medium",children:Se.desc})]})]},Ye))}),y.jsx("div",{className:"p-6 bg-white/5",children:y.jsx("button",{onClick:()=>P(!1),className:"w-full py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 active:scale-95",children:""})})]})}),M&&y.jsxs("div",{className:"fixed inset-0 z-[150] flex items-end justify-center px-4 pb-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>L(!1)}),y.jsxs("div",{className:"w-full max-w-[440px] bg-gradient-to-b from-[#1a1c22] to-[#0a0a0c] border border-white/10 rounded-[40px] p-8 relative z-10 animate-in slide-in-from-bottom-full duration-500 shadow-2xl",children:[y.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full mx-auto mb-10"}),y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"size-20 rounded-[28px] bg-amber-400/10 flex items-center justify-center mb-6 ring-1 ring-amber-400/20",children:y.jsx("span",{className:"material-symbols-outlined text-amber-400 text-4xl",children:"qr_code_2"})}),y.jsx("h2",{className:"text-2xl font-black text-white mb-2",children:""}),c?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-white/40 text-sm mb-10 leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute -inset-4 bg-primary/20 blur-2xl rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),y.jsx("div",{className:"p-6 bg-white rounded-[32px] shadow-2xl relative z-10",children:y.jsx(Xv,{value:k,size:240,level:"H",includeMargin:!0,imageSettings:{src:(o==null?void 0:o.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:48,width:48,excavate:!0}})})]}),y.jsxs("div",{className:"mt-10 w-full p-5 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-between group cursor-pointer hover:bg-white/10 transition-all",onClick:()=>{navigator.clipboard.writeText(k),alert("")},children:[y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsx("span",{className:"text-[10px] font-black text-white/20 uppercase tracking-widest mb-1",children:""}),y.jsx("span",{className:"text-xs text-primary font-bold truncate max-w-[200px]",children:k})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary transition-colors",children:"content_copy"})]})]}):y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-white/40 text-sm leading-relaxed max-w-[280px]",children:" QR Code"}),y.jsxs("button",{onClick:h,className:"flex items-center gap-3 px-8 py-4 rounded-2xl bg-white text-black font-black text-sm hover:bg-white/90 transition-all active:scale-95 shadow-xl",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})," Google "]})]})]}),y.jsx("button",{onClick:()=>L(!1),className:"w-full h-16 bg-white/5 hover:bg-white/10 text-white font-bold rounded-3xl mt-8 transition-all border border-white/5 active:scale-95",children:""})]})]}),V&&y.jsxs("div",{className:"fixed inset-0 z-[110] flex items-end justify-center px-0",children:[y.jsx("div",{className:"fixed inset-0 bg-background-dark/60 backdrop-blur-sm",onClick:()=>U(!1)}),y.jsxs("div",{className:"relative w-full max-w-[480px] bg-[#16181d] border-t border-white/10 rounded-t-[40px] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-full duration-500 ease-out",children:[y.jsx("div",{className:"h-1.5 w-12 bg-white/10 rounded-full mx-auto mt-3 mb-2"}),y.jsxs("div",{className:"p-8 space-y-6 max-h-[90vh] overflow-y-auto no-scrollbar pb-12",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-white",children:""}),y.jsx("p",{className:"text-xs text-white/40 font-bold mt-1 uppercase tracking-widest",children:"New Memory Fragment"})]}),y.jsx("button",{onClick:()=>U(!1),className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white/40 hover:text-white",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person_add"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"text",className:"w-full bg-white/5 border border-white/10 rounded-[20px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all placeholder:text-white/20",placeholder:"...",value:B,onChange:Se=>{j(Se.target.value),F||ue(Se.target.value)}}),F&&y.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-primary/20 text-primary text-[10px] font-bold px-3 py-1.5 rounded-full border border-primary/20",children:[y.jsx("span",{children:""}),y.jsx("button",{onClick:()=>{Z(null),j(re)},className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]}),B&&!F&&y.jsx("div",{className:"bg-white/5 border border-white/10 rounded-[20px] overflow-hidden mt-2 max-h-48 overflow-y-auto no-scrollbar divide-y divide-white/5",children:or.length>0?or.map(Se=>{var Ye;return y.jsxs("button",{className:"w-full text-left px-5 py-4 text-[14px] text-white/80 hover:bg-primary/10 transition-colors flex justify-between items-center group",onClick:()=>{Z(Se.id),j(Se.name),ue(Se.name)},children:[y.jsx("span",{className:"font-bold group-hover:text-primary transition-colors",children:Se.name}),y.jsx("span",{className:"text-[10px] font-bold text-white/30 bg-white/5 px-2 py-1 rounded-md uppercase tracking-wider",children:(Ye=Se.tags)==null?void 0:Ye[0]})]},Se.id)}):y.jsxs("div",{className:"px-5 py-4 text-[13px] text-white/40 italic flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"",B,""]})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"label"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[Je.map(Se=>y.jsx("button",{onClick:()=>Me(Se),className:`px-4 py-2.5 rounded-[15px] text-[12px] font-bold transition-all border ${Pe===Se?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:Se},Se)),y.jsxs("button",{onClick:async()=>{const Se=await l("","...");if(Se){const Ye=(o==null?void 0:o.categories)||["","","","",""];Ye.includes(Se)||(a({...o,categories:[...Ye,Se]}),Me(Se))}},className:"px-4 py-2.5 rounded-[15px] text-[12px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"add"}),""]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"edit_note"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-[24px] px-5 py-4 text-white text-[15px] focus:ring-1 ring-primary/50 outline-none transition-all h-32 resize-none no-scrollbar placeholder:text-white/20",placeholder:"...",value:ee,onChange:Se=>fe(Se.target.value)})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"event"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"date",className:"w-1/2 bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-white text-[13px] focus:ring-1 ring-primary outline-none transition-all color-scheme-dark",value:Ge,onChange:Se=>Be(Se.target.value)})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-primary text-base",children:"call"}),y.jsx("label",{className:"text-[11px] font-bold text-white/40 uppercase tracking-widest",children:""})]}),y.jsx("input",{type:"tel",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-4 text-white text-[14px] focus:ring-1 ring-primary outline-none transition-all placeholder:text-white/20",placeholder:"",value:ce,onChange:Se=>Ne(Se.target.value)})]})]}),y.jsx("button",{className:`w-full py-5 rounded-[24px] font-bold text-[16px] tracking-wide transition-all mt-4 ${(F||re)&&ee?"bg-primary text-white shadow-xl shadow-primary/30 active:scale-95":"bg-white/5 text-white/10 cursor-not-allowed"}`,disabled:!((F||re)&&ee),onClick:Ha,children:""})]})]})]})]})},$6=()=>{const n=Lo(),{contacts:e,userProfile:r}=Uo(),[i,s]=le.useState(""),[o,a]=le.useState(""),l=le.useMemo(()=>["",...(r==null?void 0:r.categories)||["","","","",""]],[r]),u=le.useMemo(()=>{let c=e||[];if(o!==""&&(c=c.filter(h=>{var p;return(p=h.tags)==null?void 0:p.includes(o)})),i.trim()){const h=i.toLowerCase();c=c.filter(p=>{var I,R,P,M,L,k;const m=(I=p.name)==null?void 0:I.toLowerCase().includes(h),v=(R=p.company)==null?void 0:R.toLowerCase().includes(h),w=(P=p.phone)==null?void 0:P.toLowerCase().includes(h),b=(M=p.tags)==null?void 0:M.some(C=>C.toLowerCase().includes(h)),S=(L=p.ocrText)==null?void 0:L.toLowerCase().includes(h),E=(k=p.memories)==null?void 0:k.some(C=>C.content.toLowerCase().includes(h));return m||v||w||b||S||E?(p._matchReason=m?"":v?"":w?"":b?` #${h}`:S?"":"",!0):!1})}else o===""&&(c=c.slice(0,5));return c},[e,i,o]);return y.jsxs("div",{className:"bg-mesh pb-32 overflow-x-hidden",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-12 pb-6 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",onClick:()=>n(-1),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h1",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em] mt-0.5",children:"Synesthetic Search"})]}),y.jsx("div",{className:"size-10"})]})]}),y.jsx("div",{className:"px-6 py-6",children:y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-white/20 text-[20px] group-focus-within:text-primary transition-colors",children:"search"})}),y.jsx("input",{className:"block w-full h-12 pl-12 pr-10 bg-[#1c1f27]/60 backdrop-blur-md border border-white/5 rounded-2xl text-[14px] font-medium text-white placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-xl",placeholder:"...",type:"text",value:i,onChange:c=>s(c.target.value)}),i&&y.jsx("div",{className:"absolute inset-y-0 right-4 flex items-center",children:y.jsx("button",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center text-white/30 hover:text-white transition-colors",onClick:()=>s(""),children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})})]})}),y.jsx("div",{className:"flex gap-2 px-6 pb-6 overflow-x-auto no-scrollbar",children:l.map(c=>y.jsx("button",{onClick:()=>a(c),className:`flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-xl px-5 transition-all duration-300 border ${o===c?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:text-white/60 hover:border-white/10"}`,children:y.jsx("span",{className:"text-xs font-bold tracking-wider",children:c})},c))}),y.jsxs("main",{className:"px-6 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[y.jsx("h3",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-white/30",children:i||o!==""?` (${u.length})`:""}),y.jsx("span",{className:"text-[10px] font-bold text-primary/40 uppercase",children:"Sort by Date"})]}),y.jsx("div",{className:"grid gap-4",children:u.map(c=>y.jsx("div",{className:"group relative bg-[#1c1f27]/40 backdrop-blur-md border border-white/5 rounded-[32px] overflow-hidden transition-all duration-500 hover:border-primary/30 hover:bg-[#1c1f27]/60 active:scale-[0.98]",onClick:()=>n(`/profile/${c.id}`),children:y.jsxs("div",{className:"p-5 flex gap-4",children:[y.jsx("div",{className:"size-20 rounded-2xl bg-white/5 flex items-center justify-center overflow-hidden border border-white/10 group-hover:border-primary/20 transition-colors shrink-0",children:c.cardImage?y.jsx("img",{className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",src:c.cardImage,alt:c.name}):y.jsx("span",{className:"material-symbols-outlined text-white/10 text-3xl",children:"person"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[y.jsx("div",{className:"flex items-center gap-2 mb-1",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider",children:c._matchReason||""})}),y.jsx("h4",{className:"text-lg font-bold text-white group-hover:text-primary transition-colors truncate",children:c.name}),y.jsxs("div",{className:"flex items-center gap-3 mt-1 text-white/30",children:[c.phone&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call"}),y.jsx("span",{className:"text-[11px] font-medium",children:c.phone})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),y.jsx("span",{className:"text-[11px] font-medium",children:new Date(c.lastUpdated).toLocaleDateString("zh-TW")})]})]})]}),y.jsx("div",{className:"flex items-center",children:y.jsx("span",{className:"material-symbols-outlined text-white/10 group-hover:text-primary/50 transition-colors",children:"chevron_right"})})]})},c.id))}),u.length===0&&y.jsxs("div",{className:"text-center py-20 animate-in fade-in zoom-in duration-500",children:[y.jsx("div",{className:"size-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/10",children:"search_off"})}),y.jsx("p",{className:"text-white/20 text-sm font-bold tracking-widest uppercase",children:"..."})]})]})]})},B6=()=>{var V,U,B,j;const{id:n}=gI(),e=Lo(),{updateContact:r,deleteContact:i,userProfile:s,updateProfile:o,customPrompt:a,schedules:l}=Uo(),u=Mf(()=>wt.contacts.get(n),[n]),c=le.useMemo(()=>!l||!n?[]:l.filter(F=>F.contactIds.includes(n)),[l,n]),[h,p]=le.useState(!1),[m,v]=le.useState(!1),[w,b]=le.useState(null),[S,E]=le.useState(!1),I=(F,Z)=>{const ee=F.target.files[0];if(!ee)return;const fe=new FileReader;fe.onloadend=()=>{const re=fe.result;b(ue=>({...ue,cardImage:re}))},fe.readAsDataURL(ee)};if(!u)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-dark",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const R=()=>{var F;b({name:u.name,company:u.company||"",title:u.title||"",birthday:u.birthday||"",phone:u.phone||"",email:u.email||"",tags:((F=u.tags)==null?void 0:F.join(", "))||"",events:u.events||[],bio:u.bio||"",links:u.links||[],gallery:u.gallery||[],cardImage:u.cardImage||""}),v(!0),p(!1)},P=async()=>{await r(n,{name:w.name,company:w.company,title:w.title,birthday:w.birthday||null,phone:w.phone,email:w.email,tags:w.tags.split(",").map(F=>F.trim()).filter(F=>F),events:w.events,bio:w.bio,links:w.links,gallery:w.gallery,cardImage:w.cardImage}),v(!1)},M=()=>{var Z;const F=`
Nexus Mind 
${u.name}
${u.phone?`${u.phone}`:""}
${u.bio?`${u.bio}`:""}
${(Z=u.tags)!=null&&Z.length?`${u.tags.join(", ")}`:""}
    `.trim();navigator.clipboard.writeText(F),E(!0),setTimeout(()=>E(!1),2e3),p(!1)},L=async()=>{window.confirm(` ${u.name} `)&&(await i(n),e("/"))},k=async F=>{if(window.confirm("")){const Z=[...u.memories];Z.splice(F,1),await r(n,{memories:Z})}},C=async(F,Z)=>{const ee=await a("","...",F);if(ee&&ee!==F){const fe=[...s.categories||["","","","",""]];fe[Z]=ee,await o({...s,categories:fe});const re=w.tags.split(",").map(ue=>ue.trim()).filter(ue=>ue);if(re.includes(F)){const ue=re.map(de=>de===F?ee:de);b({...w,tags:ue.join(", ")})}}},D=async(F,Z)=>{if(window.confirm(`${F}`)){const ee=(s.categories||["","","","",""]).filter((re,ue)=>ue!==Z);await o({...s,categories:ee});const fe=w.tags.split(",").map(re=>re.trim()).filter(re=>re);if(fe.includes(F)){const re=fe.filter(ue=>ue!==F);b({...w,tags:re.join(", ")})}}};return y.jsxs("div",{className:"bg-nexus min-h-screen text-white pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-50 -mx-4 px-6 pt-8 pb-4 flex items-center justify-between transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsx("div",{onClick:()=>e(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90 cursor-pointer",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:""}),y.jsx("p",{className:"text-[10px] text-primary font-bold tracking-[0.2em] uppercase",children:"Profile Analytics"})]}),y.jsxs("div",{className:"relative flex w-10 items-center justify-end",children:[y.jsx("button",{onClick:()=>p(!h),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-white hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"more_vert"})}),h&&y.jsxs("div",{className:"absolute top-12 right-0 w-48 bg-[#1c1f27] border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200 origin-top-right",children:[y.jsxs("button",{onClick:R,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"edit"}),""]}),y.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-white/80 hover:bg-white/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary/80",children:"content_copy"}),""]}),y.jsx("div",{className:"h-px bg-white/5 mx-4 my-1"}),y.jsxs("button",{onClick:L,className:"w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-400/10 text-left transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"}),y.jsx("span",{children:""})]})]})]})]}),y.jsx("div",{className:"px-6 py-4",children:y.jsxs("div",{className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/5 group shadow-2xl",children:[u.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-700 group-hover:scale-105",style:{backgroundImage:`url(${u.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background-dark via-background-dark/20 to-transparent opacity-60"})}):y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/5",children:y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/5",children:"image"})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 flex items-end justify-between z-10",children:y.jsxs("div",{children:[y.jsx("div",{className:"flex items-center gap-2 mb-2",children:y.jsx("span",{className:"text-[10px] font-bold text-primary px-2 py-0.5 bg-primary/10 rounded-full border border-primary/20 uppercase tracking-wider backdrop-blur-md",children:((V=u.tags)==null?void 0:V[0])||""})}),y.jsx("h1",{className:"text-3xl font-black text-white tracking-tight mb-1 drop-shadow-lg",children:u.name}),y.jsxs("div",{className:"flex flex-col gap-1",children:[u.company&&y.jsxs("div",{className:"flex items-center gap-2 text-primary/80 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"business"}),y.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:u.company})]}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 text-white/60 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.email&&y.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"mail"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.email})]})]})]})})]})}),y.jsxs("div",{className:"px-6 pb-2",children:[c.length>0&&y.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary ml-1",children:""}),y.jsx("div",{className:"space-y-3",children:c.map(F=>{const Z=Math.ceil((new Date(F.date)-new Date().setHours(0,0,0,0))/864e5),ee=Z>=0&&Z<=3;return y.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${ee?"bg-primary/10 border-primary/30 shadow-lg shadow-primary/5":"bg-white/5 border-white/10"}`,children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm text-white",children:F.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-1",children:new Date(F.date).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})})]}),y.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg ${ee?"bg-primary text-white":"bg-white/10 text-white/60"}`,children:Z===0?"":Z<0?"":`${Z} `})]}),ee&&y.jsxs("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-primary animate-pulse",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"info"}),""]})]},F.id)})})]}),m?y.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 bg-[#1c1f27]/40 backdrop-blur-xl border border-white/5 rounded-[32px] p-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsxs("div",{onClick:()=>document.getElementById("card-image-input").click(),className:"relative w-full aspect-[16/10] bg-[#1c1f27] rounded-[32px] overflow-hidden border border-white/10 group cursor-pointer hover:border-primary/50 transition-all shadow-2xl",children:[w.cardImage?y.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w.cardImage})`},children:y.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})}):y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-white/20",children:[y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"add_a_photo"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("input",{id:"card-image-input",type:"file",accept:"image/*",className:"hidden",onChange:F=>I(F)})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",value:w.name,onChange:F=>b({...w,name:F.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:w.company,onChange:F=>b({...w,company:F.target.value})})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"tel",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"09xx-xxx-xxx",value:w.phone,onChange:F=>b({...w,phone:F.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-1/2 bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-3 text-white text-[14px] font-medium focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner color-scheme-dark",value:w.birthday,onChange:F=>b({...w,birthday:F.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"email",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"example@mail.com",value:w.email,onChange:F=>b({...w,email:F.target.value})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("div",{className:"bg-[#1c1f27] rounded-2xl p-4 border border-white/10 shadow-inner",children:y.jsxs("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar",children:[((s==null?void 0:s.categories)||["","","","",""]).map((F,Z)=>{const ee=w.tags.split(",").map(re=>re.trim()).filter(re=>re),fe=ee.includes(F);return y.jsxs("div",{className:`group flex items-center gap-1 pl-3 pr-1 py-1.5 rounded-xl text-[11px] font-bold transition-all border ${fe?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10 hover:border-white/10"}`,children:[y.jsx("span",{onClick:()=>{let re;fe?re=ee.filter(ue=>ue!==F):re=[...ee,F],b({...w,tags:re.join(", ")})},className:"cursor-pointer",children:F}),y.jsxs("div",{className:"flex items-center gap-0.5 ml-1 border-l border-white/10 pl-1",children:[y.jsx("button",{type:"button",onClick:()=>C(F,Z),className:"p-0.5 text-white/20 hover:text-white transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{type:"button",onClick:()=>D(F,Z),className:"p-0.5 text-white/20 hover:text-red-400 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},F)}),y.jsxs("button",{type:"button",onClick:async()=>{const F=await a("","...");if(F){const Z=(s==null?void 0:s.categories)||["","","","",""];if(!Z.includes(F)){o({...s,categories:[...Z,F]});const ee=w.tags.split(",").map(fe=>fe.trim()).filter(fe=>fe);b({...w,tags:[...ee,F].join(", ")})}}},className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-primary/10 border border-primary/20 border-dashed text-primary hover:bg-primary/20 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"add"}),""]}),y.jsxs("button",{type:"button",onClick:()=>e("/settings"),className:"px-4 py-2 rounded-xl text-[11px] font-bold bg-white/5 border border-white/10 border-dashed text-white/30 hover:text-white/60 transition-all flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"settings"}),""]})]})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" (IG Style Bio)"}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.bio,onChange:F=>b({...w,bio:F.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>b({...w,links:[...w.links,{label:"",url:""}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.links.map((F,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-300",children:[y.jsx("input",{className:"w-20 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all shrink-0",placeholder:"",value:F.label,onChange:ee=>{const fe=[...w.links];fe[Z].label=ee.target.value,b({...w,links:fe})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:F.url,onChange:ee=>{const fe=[...w.links];fe[Z].url=ee.target.value,b({...w,links:fe})}}),y.jsx("button",{onClick:()=>b({...w,links:w.links.filter((ee,fe)=>fe!==Z)}),className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:" / "}),y.jsxs("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add_photo_alternate"}),""]}),y.jsx("input",{id:"gallery-upload-input",type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:F=>{Array.from(F.target.files).forEach(ee=>{const fe=new FileReader;fe.onloadend=()=>{b(re=>({...re,gallery:[...re.gallery,fe.result]}))},fe.readAsDataURL(ee)})}})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[w.gallery.map((F,Z)=>y.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden border border-white/5 group/img shadow-lg",children:[y.jsx("img",{src:F,className:"w-full h-full object-cover transition-transform duration-500 group-hover/img:scale-110",alt:""}),y.jsx("button",{onClick:()=>b({...w,gallery:w.gallery.filter((ee,fe)=>fe!==Z)}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover/img:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[18px]",children:"delete"})})]},Z)),y.jsx("button",{onClick:()=>document.getElementById("gallery-upload-input").click(),className:"aspect-square rounded-xl border-2 border-dashed border-white/5 flex flex-col items-center justify-center text-white/10 hover:text-white/20 hover:border-white/10 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"text",className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner",placeholder:"",value:w.title,onChange:F=>b({...w,title:F.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:" / "}),y.jsx("textarea",{className:"w-full bg-[#1c1f27] border border-white/10 rounded-2xl px-5 py-4 text-white text-[13px] font-medium placeholder:text-white/20 focus:outline-none focus:ring-1 focus:ring-primary/50 focus:border-primary/50 transition-all shadow-inner h-28",placeholder:"...",value:w.bio,onChange:F=>b({...w,bio:F.target.value})})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),y.jsxs("button",{onClick:()=>b({...w,events:[...w.events,{date:new Date().toISOString().split("T")[0],title:"",type:"event"}]}),className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:opacity-80 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsx("div",{className:"space-y-2",children:w.events.map((F,Z)=>y.jsxs("div",{className:"flex gap-2 items-center animate-in slide-in-from-right-2 duration-200",children:[y.jsx("input",{type:"date",className:"bg-[#1c1f27] border border-white/10 rounded-xl px-2 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all color-scheme-dark w-[110px] shrink-0",value:F.date,onChange:ee=>{const fe=[...w.events];fe[Z].date=ee.target.value,b({...w,events:fe})}}),y.jsx("input",{className:"flex-1 min-w-0 bg-[#1c1f27] border border-white/10 rounded-xl px-3 py-3 text-[13px] text-white focus:ring-1 ring-primary/50 outline-none transition-all",placeholder:"",value:F.title,onChange:ee=>{const fe=[...w.events];fe[Z].title=ee.target.value,b({...w,events:fe})}}),y.jsx("button",{onClick:()=>{const ee=[...w.events];ee.splice(Z,1),b({...w,events:ee})},className:"size-11 rounded-xl bg-red-400/5 text-red-400/40 hover:text-red-400 hover:bg-red-400/10 transition-all flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]},Z))})]}),y.jsxs("div",{className:"flex gap-3 pt-6",children:[y.jsx("button",{onClick:P,className:"flex-1 h-14 bg-primary text-white rounded-2xl font-bold text-sm shadow-xl shadow-primary/20 active:scale-95 transition-all",children:""}),y.jsx("button",{onClick:()=>v(!1),className:"px-8 h-14 bg-white/5 text-white/60 rounded-2xl font-bold text-sm hover:bg-white/10 transition-all",children:""})]})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-white tracking-tight text-[32px] font-extrabold leading-tight",children:u.name}),y.jsx("p",{className:"text-white/60 text-lg font-medium leading-normal mt-1",children:u.title||u.company||""}),u.phone&&y.jsxs("a",{href:`tel:${u.phone}`,className:"flex items-center gap-2 mt-2 text-primary/80 hover:text-primary transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"call"}),y.jsx("span",{className:"text-sm font-medium tracking-wide",children:u.phone})]}),u.bio&&y.jsx("p",{className:"text-white/80 text-sm mt-3 leading-relaxed whitespace-pre-wrap",children:u.bio}),u.links&&u.links.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.links.map((F,Z)=>y.jsxs("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 bg-white/5 hover:bg-white/10 border border-white/10 px-3 py-1.5 rounded-lg text-xs font-bold text-blue-400 transition-all",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"link"}),F.label]},Z))}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[(U=u.tags)==null?void 0:U.map((F,Z)=>y.jsxs("div",{className:`${Z===0?"bg-primary/20 text-primary border-primary/30":"bg-white/5 text-white/80 border-white/10"} px-3 py-1 rounded-full text-xs font-bold border`,children:["#",F]},Z)),u.birthday&&y.jsxs("div",{className:"bg-pink-500/10 text-pink-500 border-pink-500/20 px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"cake"}),new Date(u.birthday).toLocaleDateString("zh-TW",{month:"long",day:"numeric"})]})]})]})]}),y.jsx("div",{className:"h-4"}),u.gallery&&u.gallery.length>0&&y.jsxs("div",{className:"px-4 mb-6",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-4",children:""}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.gallery.map((F,Z)=>y.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/5 cursor-pointer hover:opacity-90 transition-opacity",children:y.jsx("img",{src:F,className:"w-full h-full object-cover",alt:`gallery-${Z}`})},Z))})]}),y.jsxs("div",{className:"px-4",children:[y.jsx("h3",{className:"text-white/40 text-[11px] font-bold uppercase tracking-[0.2em] mb-6",children:""}),y.jsxs("div",{className:"space-y-8",children:[(B=u.memories)==null?void 0:B.map((F,Z)=>y.jsxs("div",{className:`relative ${Z!==u.memories.length-1?"timeline-line":""} pl-8 group/item`,children:[y.jsx("div",{className:`absolute ${Z===0?"left-0 size-[15px] bg-primary ring-4 ring-primary/20":"left-[3px] size-2 bg-white/20"} top-1.5 rounded-full`}),y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsxs("div",{className:"flex flex-col flex-1",children:[y.jsx("span",{className:"text-white font-semibold text-sm",children:F.content}),y.jsxs("span",{className:"text-white/40 text-xs mt-1",children:[new Date(F.date).toLocaleDateString("zh-TW"),"  ",F.location]})]}),y.jsx("button",{onClick:()=>k(Z),className:"opacity-0 group-hover/item:opacity-100 p-2 text-white/20 hover:text-red-400 transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]},Z)),!((j=u.memories)!=null&&j.length)&&y.jsx("p",{className:"text-white/20 text-sm italic",children:""})]})]}),S&&y.jsx("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-primary text-white px-6 py-3 rounded-full shadow-2xl z-[100] animate-in fade-in slide-in-from-bottom-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"}),y.jsx("span",{className:"text-sm font-bold",children:""})]})})]})},q6=()=>{var I;const n=Lo(),{contacts:e,updateContact:r,addMemory:i}=Uo(),[s,o]=le.useState(!1),[a,l]=le.useState(""),[u,c]=le.useState(65),[h,p]=le.useState(40),[m,v]=le.useState(null);le.useEffect(()=>{e&&e.length>0&&!m&&(v(e[0].id),c(e[0].importance||50))},[e]);const w=R=>{const P=parseInt(R.target.value);c(P),m&&r(m,{importance:P})},b=async()=>{!a.trim()||!m||(await i(m,{content:a,location:"Stealth Input"}),navigator.vibrate&&navigator.vibrate(50),l(""),o(!1))},S=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),b())},E=e==null?void 0:e.find(R=>R.id===m);return y.jsxs("div",{className:"text-white overflow-hidden select-none relative h-screen bg-[#030303]",children:[y.jsxs("div",{className:"absolute top-0 w-full z-50 px-8 pt-6 pb-4 flex justify-between items-center transition-all",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none -z-10"}),y.jsx("div",{className:"text-sm font-black tracking-tighter",onClick:()=>n(-1),children:y.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded-md backdrop-blur-md",children:"9:41"})}),y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"signal_cellular_4_bar"}),y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"wifi"}),y.jsxs("button",{className:"flex items-center gap-1 group focus:outline-none",onClick:()=>o(!0),children:[y.jsx("span",{className:"text-[11px] font-bold text-white/80 group-active:text-primary transition-colors",children:"100%"}),y.jsx("span",{className:"material-symbols-outlined text-[24px] text-white group-active:text-primary transition-colors",children:"battery_full"})]})]})]}),y.jsxs("main",{className:"relative h-screen w-full flex flex-col justify-start pt-16 px-6 gap-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"ios-platter p-4 rounded-3xl grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",onClick:()=>n("/"),children:[y.jsx("div",{className:"size-11 rounded-full bg-primary flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"grid_view"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[y.jsx("div",{className:"size-11 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-white text-[22px]",children:"cell_tower"})}),y.jsx("span",{className:"text-[10px] font-medium text-white/60",children:""})]})]}),y.jsxs("div",{className:"ios-platter p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[y.jsxs("div",{className:"w-full flex justify-between items-center opacity-40",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:""}),y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"more_horiz"})]}),y.jsxs("div",{className:"text-center py-2",children:[y.jsx("div",{className:"text-sm font-bold truncate w-28",children:(E==null?void 0:E.name)||""}),y.jsx("div",{className:"text-xs text-white/50",children:((I=E==null?void 0:E.tags)==null?void 0:I[0])||""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 h-48",children:[y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:u,onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${u}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${u>50?"text-black/40":"text-white/40"}`,children:"priority_high"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${u>50?"text-black/40":"text-white/40"}`,children:""})]})]}),y.jsxs("div",{className:"ios-platter rounded-3xl relative overflow-hidden flex flex-col items-center justify-end",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:h,onChange:R=>p(parseInt(R.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",style:{writingMode:"bt-lr",appearance:"slider-vertical"}}),y.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-white/90 transition-all duration-200",style:{height:`${h}%`}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2 pointer-events-none pb-4",children:[y.jsx("span",{className:`material-symbols-outlined text-[28px] ${h>50?"text-black/40":"text-white/40"}`,children:"speed"}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${h>50?"text-black/40":"text-white/40"}`,children:""})]})]})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"flashlight_on"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"timer"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined",children:"calculate"})}),y.jsx("div",{className:"ios-platter aspect-square rounded-2xl flex items-center justify-center",onClick:()=>n("/search"),children:y.jsx("span",{className:"material-symbols-outlined text-primary",children:"location_on"})})]}),y.jsxs("div",{className:"mt-auto pb-10 flex flex-col items-center",children:[y.jsx("div",{className:"w-32 h-1.5 bg-white/20 rounded-full mb-4"}),y.jsx("p",{className:"text-[10px] text-white/30 font-medium tracking-wide",children:" SYSTEM OVERRIDE ACTIVE"})]})]}),s&&y.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-md flex flex-col items-center justify-center p-8 transition-opacity duration-300",children:y.jsxs("div",{className:"w-full max-w-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("span",{className:"text-xs font-bold text-white/40 tracking-[0.2em] uppercase",children:" Stealth Input"}),y.jsx("button",{onClick:()=>o(!1),className:"text-[10px] text-primary bg-primary/20 px-2 py-0.5 rounded",children:" CLOSE"})]}),y.jsx("textarea",{autoFocus:!0,className:"w-full bg-transparent border-none text-white text-xl font-light placeholder-white/20 focus:ring-0 resize-none no-scrollbar h-64",placeholder:"...",value:a,onChange:R=>l(R.target.value),onKeyDown:S}),y.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-white/10 pt-4",children:[y.jsxs("div",{className:"flex gap-4",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"mic"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"image"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 text-[20px]",children:"add_location"})]}),y.jsx("button",{className:"bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-2 px-4 rounded-full transition-colors",onClick:b,children:" SAVE TO VAULT"})]})]})}),y.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-[#0f172a] via-[#1e293b] to-[#111318]",children:[y.jsx("div",{className:"absolute top-[-10%] right-[-10%] size-96 bg-primary/20 rounded-full blur-[120px]"}),y.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] size-96 bg-white/5 rounded-full blur-[120px]"})]})]})},H6=()=>{const n=Lo(),{contacts:e,schedules:r,addSchedule:i,deleteSchedule:s}=Uo(),[o,a]=le.useState(!1),[l,u]=le.useState({title:"",date:"",contactIds:[]}),[c,h]=le.useState(""),p=le.useMemo(()=>e?e.filter(b=>{var S;return b.name.toLowerCase().includes(c.toLowerCase())||((S=b.tags)==null?void 0:S.some(E=>E.toLowerCase().includes(c.toLowerCase())))}):[],[e,c]),m=le.useMemo(()=>{if(!e)return[];const b=[],S=new Date;S.setHours(0,0,0,0),r&&r.forEach(I=>{const R=new Date(I.date);R.setHours(0,0,0,0);const P=Math.ceil((R-S)/(1e3*60*60*24));b.push({id:`schedule-${I.id}`,date:R,title:I.title,description:`: ${I.contactIds.map(M=>{var L;return(L=e.find(k=>k.id===M))==null?void 0:L.name}).filter(Boolean).join(", ")}`,type:"schedule",diffDays:P,isUpcoming:P<=30&&P>=0,contactIds:I.contactIds,scheduleId:I.id})});const E=/(\d{4}[-/])?(\d{1,2})[-/](\d{1,2})/g;return e.forEach(I=>{if(I.birthday){const[R,P,M]=I.birthday.split("-").map(Number),L=new Date(S.getFullYear(),P-1,M);L<S&&L.setFullYear(S.getFullYear()+1);const k=Math.ceil((L-S)/(1e3*60*60*24));b.push({id:`birthday-${I.id}`,contactId:I.id,contactName:I.name,date:L,title:"",description:`${I.name} `,type:"birthday",diffDays:k,isUpcoming:k<=30&&k>=0})}if(I.events&&I.events.forEach((R,P)=>{const M=new Date(R.date);M.setHours(0,0,0,0);const L=Math.ceil((M-S)/(1e3*60*60*24));b.push({id:`event-${I.id}-${P}`,contactId:I.id,contactName:I.name,date:M,title:R.title,description:"",type:R.type||"event",diffDays:L,isUpcoming:L<=30&&L>=0})}),I.memories&&I.memories.forEach((R,P)=>{const M=new Date(R.date);M.setHours(0,0,0,0);const L=Math.ceil((M-S)/(1e3*60*60*24));b.push({id:`memory-${I.id}-${P}`,contactId:I.id,contactName:I.name,date:M,title:"",description:R.content.substring(0,20)+(R.content.length>20?"...":""),type:"memory",diffDays:L,isUpcoming:L<=30&&L>=0});let k;for(;(k=E.exec(R.content))!==null;){const[C,D,V,U]=k,B=D?parseInt(D.replace(/[-/]/,"")):S.getFullYear(),j=new Date(B,parseInt(V)-1,parseInt(U));if(j.setHours(0,0,0,0),!isNaN(j.getTime())){const F=Math.ceil((j-S)/864e5);b.push({id:`extracted-mem-${I.id}-${P}-${k.index}`,contactId:I.id,contactName:I.name,date:j,title:"",description:`: ${C}`,type:"extracted",diffDays:F,isUpcoming:F<=30&&F>=0})}}}),I.ocrText){let R;for(;(R=E.exec(I.ocrText))!==null;){const[P,M,L,k]=R,C=M?parseInt(M.replace(/[-/]/,"")):S.getFullYear(),D=new Date(C,parseInt(L)-1,parseInt(k));if(D.setHours(0,0,0,0),!isNaN(D.getTime())){const V=Math.ceil((D-S)/864e5);b.push({id:`extracted-ocr-${I.id}-${R.index}`,contactId:I.id,contactName:I.name,date:D,title:"/",description:`: ${P}`,type:"extracted",diffDays:V,isUpcoming:V<=30&&V>=0})}}}}),b.sort((I,R)=>R.date-I.date)},[e]),v=m.filter(b=>b.isUpcoming),w=m.filter(b=>!b.isUpcoming);return y.jsxs("div",{className:"pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:()=>n(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"Important Schedules"})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"size-11 rounded-2xl bg-primary/10 border border-primary/20 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/20",children:y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"add"})})]})]}),y.jsxs("main",{className:"p-4 space-y-8",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-primary",children:" 30 "}),y.jsx("div",{className:"space-y-3",children:v.length>0?v.map(b=>y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 flex gap-4 items-start hover:border-primary/40 transition-all cursor-pointer",onClick:()=>n(`/profile/${b.contactId}`),children:[y.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center shrink-0 ${b.type==="birthday"?"bg-pink-500/20 text-pink-500":b.type==="memory"?"bg-blue-500/20 text-blue-500":b.type==="extracted"?"bg-amber-500/20 text-amber-500":b.type==="schedule"?"bg-emerald-500/20 text-emerald-500":"bg-primary/20 text-primary"}`,children:y.jsx("span",{className:"material-symbols-outlined",children:b.type==="birthday"?"cake":b.type==="memory"?"history":b.type==="extracted"?"find_in_page":b.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsxs("div",{className:"min-w-0",children:[y.jsx("h3",{className:"font-bold text-sm text-white/90 truncate",children:b.title}),y.jsx("p",{className:"text-[10px] text-white/40 mt-0.5 truncate",children:b.contactName||""})]}),y.jsxs("div",{className:"text-right shrink-0",children:[y.jsx("p",{className:"text-xs font-bold text-white/80",children:b.date.toLocaleDateString("zh-TW",{month:"short",day:"numeric"})}),y.jsx("p",{className:`text-[10px] font-bold ${b.diffDays===0?"text-red-500":"text-primary"}`,children:b.diffDays===0?"":`${b.diffDays} `}),b.type==="schedule"&&y.jsx("button",{onClick:S=>{S.stopPropagation(),window.confirm("")&&s(b.scheduleId)},className:"mt-1 text-red-500/40 hover:text-red-500 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"delete"})})]})]}),y.jsx("p",{className:"text-xs text-white/60 mt-2 line-clamp-1",children:b.description})]})]},b.id)):y.jsx("div",{className:"py-8 text-center border border-dashed border-white/10 rounded-2xl",children:y.jsx("p",{className:"text-xs text-white/20 italic",children:""})})})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/30",children:""}),y.jsx("div",{className:"space-y-3",children:w.map(b=>y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 flex gap-4 items-center hover:bg-white/[0.07] transition-all cursor-pointer",onClick:()=>n(`/profile/${b.contactId}`),children:[y.jsxs("div",{className:"text-center min-w-[50px]",children:[y.jsx("p",{className:"text-[10px] font-bold text-white/40 uppercase",children:b.date.getFullYear()}),y.jsx("p",{className:"text-sm font-black text-white/80",children:b.date.toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})})]}),y.jsx("div",{className:"size-8 rounded-lg bg-white/5 flex items-center justify-center shrink-0",children:y.jsx("span",{className:"material-symbols-outlined text-sm text-white/40",children:b.type==="birthday"?"cake":b.type==="memory"?"history":b.type==="extracted"?"find_in_page":b.type==="schedule"?"calendar_today":"event_available"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("h3",{className:"text-xs font-bold text-white/70 truncate",children:[b.title,"  ",b.contactName||""]}),y.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5",children:b.description})]})]},b.id))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center p-0 sm:p-6 bg-black/60 backdrop-blur-sm animate-in fade-in duration-300",children:y.jsxs("div",{className:"w-full max-w-[480px] bg-[#1a1a1a] border-t sm:border border-white/10 rounded-t-[32px] sm:rounded-[32px] p-8 shadow-2xl animate-in slide-in-from-bottom-full duration-500",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"text-xl font-bold text-white",children:""}),y.jsx("button",{onClick:()=>a(!1),className:"material-symbols-outlined text-white/40",children:"close"})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all",placeholder:"...",value:l.title,onChange:b=>u({...l,title:b.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em] ml-1",children:""}),y.jsx("input",{type:"date",className:"w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-4 text-white text-[15px] font-medium outline-none focus:ring-1 ring-primary transition-all color-scheme-dark",value:l.date,onChange:b=>u({...l,date:b.target.value})})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center ml-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-primary uppercase tracking-[0.2em]",children:""}),l.contactIds.length>0&&y.jsxs("span",{className:"text-[10px] font-bold text-primary/60",children:[" ",l.contactIds.length," "]})]}),y.jsxs("div",{className:"relative mb-3",children:[y.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-white/20 text-[18px]",children:"search"}),y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-white text-xs font-medium outline-none focus:ring-1 ring-primary/50 transition-all",placeholder:"...",value:c,onChange:b=>h(b.target.value)}),c&&y.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 size-6 flex items-center justify-center text-white/20 hover:text-white/40",children:y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),y.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto no-scrollbar p-1",children:p.length>0?p.map(b=>y.jsx("button",{onClick:()=>{const S=l.contactIds.includes(b.id)?l.contactIds.filter(E=>E!==b.id):[...l.contactIds,b.id];u({...l,contactIds:S})},className:`px-4 py-2 rounded-xl text-[11px] font-bold transition-all border ${l.contactIds.includes(b.id)?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:bg-white/10"}`,children:b.name},b.id)):y.jsx("div",{className:"w-full py-4 text-center text-[10px] text-white/20 italic",children:""})})]}),y.jsxs("div",{className:"flex gap-4 pt-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-sm font-bold text-white/40 hover:bg-white/10 transition-all",children:""}),y.jsx("button",{onClick:async()=>{!l.title||!l.date||(await i(l),a(!1),u({title:"",date:"",contactIds:[]}))},disabled:!l.title||!l.date,className:"flex-1 py-4 rounded-2xl bg-primary text-sm font-bold text-white hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none",children:""})]})]})]})})]})},K6=()=>{var de,Ie;const n=Lo(),{userProfile:e,updateProfile:r,publishProfile:i,customPrompt:s,currentUser:o,login:a,logout:l,syncToCloud:u,syncFromCloud:c,isSyncing:h,setUnsavedChanges:p}=Uo(),[m,v]=le.useState(!1),[w,b]=le.useState(!1),[S,E]=le.useState(!1),[I,R]=le.useState(null),[P,M]=le.useState(""),[L,k]=le.useState({name:"",bio:"",avatar:"",themeColor:"",links:[],categories:[]}),C=JSON.stringify(L)!==JSON.stringify({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",themeColor:(e==null?void 0:e.themeColor)||"#2b6cee",links:(e==null?void 0:e.links)||[],categories:(e==null?void 0:e.categories)||["","","","",""]});le.useEffect(()=>(p(m&&C),()=>p(!1)),[m,C,p]),le.useEffect(()=>{const ce=Ne=>{m&&C&&(Ne.preventDefault(),Ne.returnValue="")};return window.addEventListener("beforeunload",ce),()=>{window.removeEventListener("beforeunload",ce)}},[m,C]);const D=()=>{m&&C?window.confirm("")&&(p(!1),n(-1)):n(-1)};le.useEffect(()=>{e&&k({name:e.name||"",bio:e.bio||"",avatar:e.avatar||"",themeColor:e.themeColor||"#2b6cee",links:e.links||[],categories:e.categories||["","","","",""]})},[e]);const V=[{name:"Nexus Blue",value:"#2b6cee"},{name:"Cyber Purple",value:"#8b5cf6"},{name:"Neon Pink",value:"#ec4899"},{name:"Emerald",value:"#10b981"},{name:"Amber",value:"#f59e0b"},{name:"Crimson",value:"#ef4444"},{name:"Midnight",value:"#334155"}],U=async()=>{await r(L),p(!1),v(!1)},B=ce=>{const Ne=ce.target.files[0];if(!Ne)return;const Pe=new FileReader;Pe.onloadend=()=>{k(Me=>({...Me,avatar:Pe.result}))},Pe.readAsDataURL(Ne)},j=async()=>{try{await u(),alert("")}catch(ce){alert(""+ce.message)}},F=async()=>{if(window.confirm(""))try{await c(),alert("")}catch(ce){alert(""+ce.message)}},Z=async()=>{const ce=await s("","...");if(ce)if(m)L.categories.includes(ce)||k({...L,categories:[...L.categories,ce]});else{const Ne=e.categories||["","","","",""];Ne.includes(ce)||await r({...e,categories:[...Ne,ce]})}},ee=async(ce,Ne)=>{const Pe=await s("","...",ce);if(Pe&&Pe!==ce)if(m){const Me=[...L.categories];Me[Ne]=Pe,k({...L,categories:Me})}else{const Me=[...e.categories||["","","","",""]];Me[Ne]=Pe,await r({categories:Me})}},fe=async ce=>{const Ne=m?L.categories[ce]:e.categories[ce];if(window.confirm(`${Ne}`))if(m)k({...L,categories:L.categories.filter((Pe,Me)=>Me!==ce)});else{const Me=[...e.categories||["","","","",""]].filter((Ge,Be)=>Be!==ce);await r({categories:Me})}},re=async()=>{if(!o){alert(" Google ");return}E(!0),R(null);try{const ce=await i(),Pe=`${window.location.origin+window.location.pathname.replace(/\/$/,"").replace(/\/settings$/,"")}/#/p/${ce}`;M(Pe),R("success"),b(!0),alert(""),console.log("SUCCESS: Profile published to Firestore. Link:",Pe)}catch(ce){console.error("Share failed:",ce),R("error"),alert(""+ce.message)}finally{E(!1)}},ue=async ce=>{m?k({...L,themeColor:ce}):await r({...e,themeColor:ce})};return e?y.jsxs("div",{className:"text-white pb-24",children:[y.jsxs("div",{className:"sticky top-0 z-40 -mx-4 px-6 pt-8 pb-4 transition-all duration-300",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#030303] via-[#030303]/80 to-transparent pointer-events-none -z-10"}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{onClick:D,className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary hover:bg-primary/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_back_ios_new"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-black tracking-tight text-white",children:""}),y.jsx("p",{className:"text-[10px] font-black text-primary uppercase tracking-[0.2em]",children:"v1.0.1  User Preferences"})]})]}),m?y.jsx("button",{onClick:U,className:"text-xs font-black text-white px-6 py-2.5 rounded-xl bg-primary hover:bg-primary-dark transition-all uppercase tracking-widest shadow-lg shadow-primary/20",children:""}):y.jsx("button",{onClick:()=>v(!0),className:"text-xs font-black text-primary px-5 py-2.5 rounded-xl bg-primary/10 border border-primary/20 hover:bg-primary hover:text-white transition-all uppercase tracking-widest shadow-lg shadow-primary/10",children:""})]})]}),y.jsxs("main",{className:"px-6 pt-8 space-y-8",children:[y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"size-24 rounded-full overflow-hidden border-2 border-primary/30 p-1",children:L.avatar?y.jsx("img",{src:L.avatar,className:"w-full h-full object-cover rounded-full",alt:"avatar"}):y.jsx("div",{className:"w-full h-full bg-white/5 rounded-full flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-4xl text-white/20",children:"person"})})}),m&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>document.getElementById("avatar-input").click(),className:"absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx("span",{className:"material-symbols-outlined text-white",children:"photo_camera"})}),y.jsx("input",{id:"avatar-input",type:"file",accept:"image/*",className:"hidden",onChange:B})]})]}),y.jsx("div",{className:"text-center space-y-1 w-full",children:m?y.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-center text-xl font-bold text-white focus:ring-1 ring-primary outline-none",value:L.name,onChange:ce=>k({...L,name:ce.target.value}),placeholder:""}):y.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:e.name})}),!m&&y.jsxs("button",{onClick:re,disabled:S,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 hover:border-primary/50 hover:bg-primary/10 transition-all group",children:[y.jsx("span",{className:`material-symbols-outlined text-sm ${S?"animate-spin":"text-primary"}`,children:S?"sync":"share"}),y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-white/60 group-hover:text-primary transition-colors",children:""})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),m?y.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl px-4 py-3 text-sm text-white/80 focus:ring-1 ring-primary outline-none min-h-[100px]",value:L.bio,onChange:ce=>k({...L,bio:ce.target.value}),placeholder:"..."}):y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl px-4 py-4 text-sm text-white/70 leading-relaxed italic whitespace-pre-wrap",children:e.bio||""})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center px-1",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),m&&y.jsxs("button",{onClick:()=>k({...L,links:[...L.links,{label:"",url:""}]}),className:"text-[10px] font-bold text-primary flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})," "]})]}),y.jsxs("div",{className:"space-y-2",children:[(de=m?L.links:e.links)==null?void 0:de.map((ce,Ne)=>y.jsx("div",{className:"flex gap-2 items-center",children:m?y.jsxs(y.Fragment,{children:[y.jsx("input",{className:"w-24 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"",value:ce.label,onChange:Pe=>{const Me=[...L.links];Me[Ne].label=Pe.target.value,k({...L,links:Me})}}),y.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-xs text-white",placeholder:"URL",value:ce.url,onChange:Pe=>{const Me=[...L.links];Me[Ne].url=Pe.target.value,k({...L,links:Me})}}),y.jsx("button",{onClick:()=>k({...L,links:L.links.filter((Pe,Me)=>Me!==Ne)}),className:"text-white/20 hover:text-red-400 p-1",children:y.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]}):y.jsxs("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/5 hover:bg-white/10 border border-white/5 rounded-xl px-4 py-3 flex items-center justify-between group transition-all",children:[y.jsx("span",{className:"text-sm font-medium text-white/80",children:ce.label}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary text-sm transition-colors",children:"open_in_new"})]})},Ne)),!m&&((Ie=e.links)==null?void 0:Ie.length)===0&&y.jsx("div",{className:"text-center py-4 text-white/20 text-xs italic",children:""})]})]}),!m&&y.jsxs("div",{className:"pt-8 space-y-4",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1",children:""}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:o?y.jsxs("div",{className:"divide-y divide-white/5",children:[y.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[y.jsx("img",{src:o.photoURL,className:"size-10 rounded-full border border-primary/20",alt:"avatar"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-bold truncate",children:o.displayName}),y.jsx("p",{className:"text-[10px] text-white/30 truncate",children:o.email})]}),y.jsx("button",{onClick:l,className:"px-3 py-1.5 rounded-lg bg-white/5 hover:bg-red-500/10 text-white/40 hover:text-red-400 text-[10px] font-bold transition-all",children:""})]}),y.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[y.jsxs("button",{onClick:j,disabled:h,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${h?"animate-spin":""}`,children:"cloud_upload"}),h?"...":""]}),y.jsxs("button",{onClick:F,disabled:h,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white/60 text-xs font-bold transition-all disabled:opacity-50",children:[y.jsx("span",{className:`material-symbols-outlined text-lg ${h?"animate-spin":""}`,children:"cloud_download"}),""]})]})]}):y.jsxs("button",{onClick:a,className:"w-full px-4 py-5 flex items-center gap-4 hover:bg-white/5 transition-colors text-left",children:[y.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg",className:"size-5",alt:"google"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-bold",children:" Google "}),y.jsx("p",{className:"text-[10px] text-white/30",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]})}),y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 pt-4 block",children:""}),y.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl overflow-hidden",children:[y.jsxs("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors border-b border-white/5 text-left",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined text-white/40",children:"lock"}),y.jsx("span",{className:"text-sm",children:""})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20",children:"chevron_right"})]}),y.jsx("button",{className:"w-full px-4 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left text-red-400",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),y.jsx("span",{className:"text-sm",children:""})]})})]}),y.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest",children:""}),y.jsxs("button",{onClick:Z,className:"text-primary text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"}),""]})]}),y.jsxs("div",{className:"bg-white/5 rounded-xl p-4 min-h-[100px]",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:(m?L.categories:e.categories).map((ce,Ne)=>y.jsxs("div",{className:"group flex items-center gap-2 pl-3 pr-2 py-1.5 rounded-full text-[11px] font-bold transition-all border border-white/10 bg-white/5 text-white/80 hover:border-primary/30",children:[y.jsx("span",{children:ce}),y.jsxs("div",{className:"flex items-center gap-1 border-l border-white/10 ml-1 pl-1",children:[y.jsx("button",{onClick:()=>ee(ce,Ne),className:"text-white/20 hover:text-primary transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})}),y.jsx("button",{onClick:()=>fe(Ne),className:"text-white/20 hover:text-red-400 transition-all flex items-center p-0.5",children:y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]})]},Ne))}),!(m?L.categories:e.categories).length&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-4 opacity-30",children:[y.jsx("span",{className:"material-symbols-outlined text-2xl mb-1",children:"category"}),y.jsx("p",{className:"text-[10px] italic",children:""})]})]})]}),y.jsx("div",{className:"text-center pt-4",children:y.jsx("p",{className:"text-[10px] text-white/20 font-medium tracking-widest uppercase",children:"Nexus Mind v1.2.0"})})]}),y.jsxs("div",{className:"space-y-4 pt-8 border-t border-white/5",children:[y.jsx("label",{className:"text-[10px] font-bold text-white/40 uppercase tracking-widest px-1 block",children:" ()"}),y.jsx("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:y.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-3",children:[V.map(ce=>y.jsx("button",{onClick:()=>ue(ce.value),className:`relative aspect-square rounded-xl transition-all duration-300 ${(m?L.themeColor:e.themeColor)===ce.value?"scale-110 ring-2 ring-white ring-offset-4 ring-offset-[#030303]":"hover:scale-105 opacity-50"} cursor-pointer`,style:{backgroundColor:ce.value},title:ce.name,children:(m?L.themeColor:e.themeColor)===ce.value&&y.jsx("span",{className:"material-symbols-outlined text-white text-sm absolute inset-0 flex items-center justify-center",children:"check"})},ce.value)),y.jsxs("div",{className:"relative aspect-square rounded-xl bg-white/5 border border-dashed border-white/20 flex items-center justify-center group overflow-hidden",children:[y.jsx("input",{type:"color",value:m?L.themeColor:e.themeColor,onChange:ce=>ue(ce.target.value),className:"absolute inset-0 opacity-0 cursor-pointer"}),y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-white transition-colors",children:"palette"})]})]})})]})]}),w&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-6",children:[y.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>b(!1)}),y.jsx("div",{className:"relative w-full max-w-sm bg-[#1c1f27] border border-white/10 rounded-[32px] p-8 animate-in zoom-in-95 duration-300",children:y.jsxs("div",{className:"flex flex-col items-center text-center space-y-6",children:[y.jsx("div",{className:"size-16 rounded-2xl bg-primary/20 flex items-center justify-center",children:y.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"qr_code_2"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:""}),y.jsx("p",{className:"text-sm text-white/40",children:""})]}),y.jsx("div",{className:"p-5 bg-white rounded-3xl shadow-xl",children:y.jsx(Xv,{value:P,size:200,level:"H",includeMargin:!0,imageSettings:{src:(e==null?void 0:e.avatar)||"/pwa-192x192.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}})}),y.jsxs("div",{className:"w-full space-y-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white/5 border border-white/10 rounded-xl",children:[y.jsx("span",{className:"flex-1 text-[10px] text-white/40 truncate",children:P}),y.jsx("button",{onClick:()=>{navigator.clipboard.writeText(P),alert("")},className:"text-primary text-[10px] font-bold uppercase tracking-widest",children:""})]}),y.jsx("button",{onClick:()=>b(!1),className:"w-full py-4 rounded-2xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all",children:""})]})]})})]})]}):null},W6=()=>{const{uid:n}=gI(),[e,r]=le.useState(null),[i,s]=le.useState(!0),[o,a]=le.useState(null);return le.useEffect(()=>{(async()=>{const u=n==null?void 0:n.trim();if(!u){a(""),s(!1);return}try{console.log("Fetching profile for UID:",u);const c=la(Dr,"public_profiles",u),h=await Gf(c);if(h.exists()){const p=h.data();console.log("Profile data found by ID:",p),r(p)}else{console.log("Document ID not found, trying query by field 'uid'...");const p=dL(Kf(Dr,"public_profiles"),pL("uid","==",u)),m=await Qf(p);if(m.empty)console.error("FIREBASE_DATA_MISSING: No document found for UID:",u),a("");else{const v=m.docs[0].data();console.log("Profile data found by field query:",v),r(v)}}}catch(c){console.error("FIREBASE_FETCH_ERROR:",c),c.code==="permission-denied"?a(" Rules  allow read"):a(""+(c.message||""))}finally{s(!1)}})()},[n]),i?y.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o||!e?y.jsxs("div",{className:"min-h-screen bg-[#030303] flex flex-col items-center justify-center p-6 text-center",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-white/10 mb-4",children:"person_off"}),y.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:o||""}),y.jsx("p",{className:"text-sm text-white/40 mb-8",children:""}),y.jsx("button",{onClick:()=>window.location.href="#/",className:"px-8 py-3 bg-primary/10 border border-primary/20 text-primary rounded-2xl font-bold text-sm hover:bg-primary hover:text-white transition-all",children:""})]}):y.jsxs("div",{className:"min-h-screen bg-[#030303] text-white selection:bg-primary/30 overflow-x-hidden relative",children:[y.jsxs("div",{className:"fixed inset-0 pointer-events-none -z-10",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-primary/5 via-transparent to-transparent"}),y.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-[80%] h-[80%] bg-primary/5 blur-[120px] rounded-full"})]}),y.jsxs("main",{className:"relative z-10 max-w-2xl mx-auto px-6 pt-12 pb-32",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-10 animate-in fade-in duration-300",children:[y.jsxs("div",{className:"relative mb-8 group",children:[y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-2xl rounded-full group-hover:bg-primary/40 transition-all duration-700 scale-110 pointer-events-none"}),e.avatar?y.jsx("img",{src:e.avatar,className:"relative size-32 rounded-full object-cover border-4 border-white/10 shadow-2xl pointer-events-none",alt:e.name}):y.jsx("div",{className:"relative size-32 rounded-full bg-gradient-to-br from-white/10 to-white/5 border-4 border-white/10 flex items-center justify-center shadow-2xl pointer-events-none",children:y.jsx("span",{className:"material-symbols-outlined text-5xl text-white/20",children:"person"})})]}),y.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4 bg-gradient-to-b from-white to-white/60 bg-clip-text text-transparent",children:e.name}),y.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6"}),y.jsx("p",{className:"text-lg text-white/60 leading-relaxed font-medium max-w-md italic whitespace-pre-wrap",children:e.bio})]}),e.links&&e.links.length>0&&y.jsxs("div",{className:"space-y-4 animate-in fade-in duration-700 delay-100",children:[y.jsx("h2",{className:"text-[10px] font-black text-primary uppercase tracking-[0.3em] text-center mb-8",children:""}),e.links.map((l,u)=>y.jsxs("a",{href:l.url.startsWith("http")?l.url:`https://${l.url}`,target:"_blank",rel:"noopener noreferrer",className:"group relative flex items-center justify-between p-6 bg-white/5 border border-white/10 rounded-3xl hover:bg-white/10 hover:border-primary/50 transition-all duration-500 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[y.jsx("div",{className:"size-10 rounded-2xl bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-white/40 group-hover:text-primary transition-colors",children:l.label.toLowerCase().includes("ig")||l.label.toLowerCase().includes("instagram")?"camera":l.label.toLowerCase().includes("fb")||l.label.toLowerCase().includes("facebook")?"facebook":"link"})}),y.jsx("span",{className:"font-bold text-lg text-white/80 group-hover:text-white transition-colors",children:l.label})]}),y.jsx("span",{className:"material-symbols-outlined text-white/20 group-hover:text-primary group-hover:translate-x-1 transition-all relative z-10",children:"arrow_forward"})]},u))]}),y.jsxs("footer",{className:"mt-24 flex flex-col items-center gap-6 animate-in fade-in duration-500 delay-300",children:[y.jsx("div",{className:"h-px w-12 bg-white/10 mb-2"}),y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-bold text-white/90 mb-2",children:" Nexus Mind"}),y.jsx("p",{className:"text-sm text-white/40 mb-6",children:""}),y.jsxs("a",{href:window.location.origin+"/nexus-mind/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-2xl bg-primary/10 border border-primary/20 text-primary hover:bg-primary hover:text-white transition-all duration-300 font-bold text-sm shadow-lg shadow-primary/5",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"explore"}),""]})]}),y.jsxs("div",{className:"mt-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:[y.jsx("span",{className:"text-[10px] font-bold text-white/20 uppercase tracking-widest",children:"Powered by"}),y.jsx("span",{className:"text-[10px] font-black text-primary uppercase tracking-widest",children:"Nexus Mind"})]})]})]})]})};function G6(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(h){c=!0,s=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function Q6(n,e,r){return e=rV(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function H1(n,e){return J6(n)||G6(n,e)||DC(n,e)||tV()}function Y6(n){return X6(n)||Z6(n)||DC(n)||eV()}function X6(n){if(Array.isArray(n))return Oy(n)}function J6(n){if(Array.isArray(n))return n}function Z6(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function DC(n,e){if(n){if(typeof n=="string")return Oy(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(n,e)}}function Oy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function eV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nV(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rV(n){var e=nV(n,"string");return typeof e=="symbol"?e:String(e)}var iV=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(Y6(Object.entries(e).filter(function(s){var o=H1(s,1),a=o[0];return!i.has(a)}).map(function(s){var o=H1(s,2),a=o[0],l=o[1];return Q6({},a,l)}))))};function jy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function sV(n){if(Array.isArray(n))return n}function oV(n){if(Array.isArray(n))return jy(n)}function aV(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lV(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(h){c=!0,s=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function uV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hV(n,e){return sV(n)||lV(n,e)||MC(n,e)||uV()}function K1(n){return oV(n)||aV(n)||MC(n)||cV()}function MC(n,e){if(n){if(typeof n=="string")return jy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jy(n,e):void 0}}function fV(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,s=e.nodeMapper,o=s===void 0?function(h){return h}:s,a=e.methodNames,l=a===void 0?[]:a,u=e.initPropNames,c=u===void 0?[]:u;return le.forwardRef(function(h,p){var m=le.useRef(),v=le.useMemo(function(){var S=Object.fromEntries(c.filter(function(E){return h.hasOwnProperty(E)}).map(function(E){return[E,h[E]]}));return n(S)},[]);W1(function(){v(o(m.current))},le.useLayoutEffect),W1(function(){return v._destructor instanceof Function?v._destructor:void 0});var w=le.useCallback(function(S){for(var E=arguments.length,I=new Array(E>1?E-1:0),R=1;R<E;R++)I[R-1]=arguments[R];return v[S]instanceof Function?v[S].apply(v,I):void 0},[v]),b=le.useRef({});return Object.keys(iV(h,[].concat(K1(l),K1(c)))).filter(function(S){return b.current[S]!==h[S]}).forEach(function(S){return w(S,h[S])}),b.current=h,le.useImperativeHandle(p,function(){return Object.fromEntries(l.map(function(S){return[S,function(){for(var E=arguments.length,I=new Array(E),R=0;R<E;R++)I[R]=arguments[R];return w.apply(void 0,[S].concat(I))}]}))},[w]),yt.createElement(i,{ref:m})})}function W1(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le.useEffect,r=le.useRef(),i=le.useRef(!1),s=le.useRef(!1),o=le.useState(0),a=hV(o,2);a[0];var l=a[1];i.current&&(s.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(u){return u+1}),function(){s.current&&r.current&&r.current()}},[])}var Dy="http://www.w3.org/1999/xhtml";const G1={svg:"http://www.w3.org/2000/svg",xhtml:Dy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qp(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),G1.hasOwnProperty(e)?{space:G1[e],local:n}:n}function dV(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Dy&&e.documentElement.namespaceURI===Dy?e.createElement(n):e.createElementNS(r,n)}}function pV(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function LC(n){var e=Qp(n);return(e.local?pV:dV)(e)}function mV(){}function X0(n){return n==null?mV:function(){return this.querySelector(n)}}function gV(n){typeof n!="function"&&(n=X0(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=new Array(a),u,c,h=0;h<a;++h)(u=o[h])&&(c=n.call(u,u.__data__,h,o))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c);return new Er(i,this._parents)}function yV(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function vV(){return[]}function VC(n){return n==null?vV:function(){return this.querySelectorAll(n)}}function _V(n){return function(){return yV(n.apply(this,arguments))}}function wV(n){typeof n=="function"?n=_V(n):n=VC(n);for(var e=this._groups,r=e.length,i=[],s=[],o=0;o<r;++o)for(var a=e[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&(i.push(n.call(u,u.__data__,c,a)),s.push(u));return new Er(i,s)}function FC(n){return function(){return this.matches(n)}}function UC(n){return function(e){return e.matches(n)}}var xV=Array.prototype.find;function bV(n){return function(){return xV.call(this.children,n)}}function EV(){return this.firstElementChild}function TV(n){return this.select(n==null?EV:bV(typeof n=="function"?n:UC(n)))}var IV=Array.prototype.filter;function SV(){return Array.from(this.children)}function CV(n){return function(){return IV.call(this.children,n)}}function kV(n){return this.selectAll(n==null?SV:CV(typeof n=="function"?n:UC(n)))}function AV(n){typeof n!="function"&&(n=FC(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new Er(i,this._parents)}function zC(n){return new Array(n.length)}function NV(){return new Er(this._enter||this._groups.map(zC),this._parents)}function Gd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Gd.prototype={constructor:Gd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function RV(n){return function(){return n}}function PV(n,e,r,i,s,o){for(var a=0,l,u=e.length,c=o.length;a<c;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):r[a]=new Gd(n,o[a]);for(;a<u;++a)(l=e[a])&&(s[a]=l)}function OV(n,e,r,i,s,o,a){var l,u,c=new Map,h=e.length,p=o.length,m=new Array(h),v;for(l=0;l<h;++l)(u=e[l])&&(m[l]=v=a.call(u,u.__data__,l,e)+"",c.has(v)?s[l]=u:c.set(v,u));for(l=0;l<p;++l)v=a.call(n,o[l],l,o)+"",(u=c.get(v))?(i[l]=u,u.__data__=o[l],c.delete(v)):r[l]=new Gd(n,o[l]);for(l=0;l<h;++l)(u=e[l])&&c.get(m[l])===u&&(s[l]=u)}function jV(n){return n.__data__}function DV(n,e){if(!arguments.length)return Array.from(this,jV);var r=e?OV:PV,i=this._parents,s=this._groups;typeof n!="function"&&(n=RV(n));for(var o=s.length,a=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var h=i[c],p=s[c],m=p.length,v=MV(n.call(h,h&&h.__data__,c,i)),w=v.length,b=l[c]=new Array(w),S=a[c]=new Array(w),E=u[c]=new Array(m);r(h,p,b,S,E,v,e);for(var I=0,R=0,P,M;I<w;++I)if(P=b[I]){for(I>=R&&(R=I+1);!(M=S[R])&&++R<w;);P._next=M||null}}return a=new Er(a,i),a._enter=l,a._exit=u,a}function MV(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function LV(){return new Er(this._exit||this._groups.map(zC),this._parents)}function VV(n,e,r){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?o.remove():r(o),i&&s?i.merge(s).order():s}function FV(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,s=r.length,o=i.length,a=Math.min(s,o),l=new Array(s),u=0;u<a;++u)for(var c=r[u],h=i[u],p=c.length,m=l[u]=new Array(p),v,w=0;w<p;++w)(v=c[w]||h[w])&&(m[w]=v);for(;u<s;++u)l[u]=r[u];return new Er(l,this._parents)}function UV(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],s=i.length-1,o=i[s],a;--s>=0;)(a=i[s])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function zV(n){n||(n=$V);function e(p,m){return p&&m?n(p.__data__,m.__data__):!p-!m}for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o){for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,h=0;h<l;++h)(c=a[h])&&(u[h]=c);u.sort(e)}return new Er(s,this._parents).order()}function $V(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function BV(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function qV(){return Array.from(this)}function HV(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length;s<o;++s){var a=i[s];if(a)return a}return null}function KV(){let n=0;for(const e of this)++n;return n}function WV(){return!this.node()}function GV(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&n.call(l,l.__data__,o,s);return this}function QV(n){return function(){this.removeAttribute(n)}}function YV(n){return function(){this.removeAttributeNS(n.space,n.local)}}function XV(n,e){return function(){this.setAttribute(n,e)}}function JV(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function ZV(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function eF(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function tF(n,e){var r=Qp(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?YV:QV:typeof e=="function"?r.local?eF:ZV:r.local?JV:XV)(r,e))}function $C(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function nF(n){return function(){this.style.removeProperty(n)}}function rF(n,e,r){return function(){this.style.setProperty(n,e,r)}}function iF(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function sF(n,e,r){return arguments.length>1?this.each((e==null?nF:typeof e=="function"?iF:rF)(n,e,r??"")):su(this.node(),n)}function su(n,e){return n.style.getPropertyValue(e)||$C(n).getComputedStyle(n,null).getPropertyValue(e)}function oF(n){return function(){delete this[n]}}function aF(n,e){return function(){this[n]=e}}function lF(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function uF(n,e){return arguments.length>1?this.each((e==null?oF:typeof e=="function"?lF:aF)(n,e)):this.node()[n]}function BC(n){return n.trim().split(/^|\s+/)}function J0(n){return n.classList||new qC(n)}function qC(n){this._node=n,this._names=BC(n.getAttribute("class")||"")}qC.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function HC(n,e){for(var r=J0(n),i=-1,s=e.length;++i<s;)r.add(e[i])}function KC(n,e){for(var r=J0(n),i=-1,s=e.length;++i<s;)r.remove(e[i])}function cF(n){return function(){HC(this,n)}}function hF(n){return function(){KC(this,n)}}function fF(n,e){return function(){(e.apply(this,arguments)?HC:KC)(this,n)}}function dF(n,e){var r=BC(n+"");if(arguments.length<2){for(var i=J0(this.node()),s=-1,o=r.length;++s<o;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?fF:e?cF:hF)(r,e))}function pF(){this.textContent=""}function mF(n){return function(){this.textContent=n}}function gF(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function yF(n){return arguments.length?this.each(n==null?pF:(typeof n=="function"?gF:mF)(n)):this.node().textContent}function vF(){this.innerHTML=""}function _F(n){return function(){this.innerHTML=n}}function wF(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function xF(n){return arguments.length?this.each(n==null?vF:(typeof n=="function"?wF:_F)(n)):this.node().innerHTML}function bF(){this.nextSibling&&this.parentNode.appendChild(this)}function EF(){return this.each(bF)}function TF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IF(){return this.each(TF)}function SF(n){var e=typeof n=="function"?n:LC(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function CF(){return null}function kF(n,e){var r=typeof n=="function"?n:LC(n),i=e==null?CF:typeof e=="function"?e:X0(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function AF(){var n=this.parentNode;n&&n.removeChild(this)}function NF(){return this.each(AF)}function RF(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function PF(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function OF(n){return this.select(n?PF:RF)}function jF(n){return arguments.length?this.property("__data__",n):this.node().__data__}function DF(n){return function(e){n.call(this,e,this.__data__)}}function MF(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function LF(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,o;r<s;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function VF(n,e,r){return function(){var i=this.__on,s,o=DF(e);if(i){for(var a=0,l=i.length;a<l;++a)if((s=i[a]).type===n.type&&s.name===n.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=r),s.value=e;return}}this.addEventListener(n.type,o,r),s={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(s):this.__on=[s]}}function FF(n,e,r){var i=MF(n+""),s,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,h;u<c;++u)for(s=0,h=l[u];s<o;++s)if((a=i[s]).type===h.type&&a.name===h.name)return h.value}return}for(l=e?VF:LF,s=0;s<o;++s)this.each(l(i[s],e,r));return this}function WC(n,e,r){var i=$C(n),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function UF(n,e){return function(){return WC(this,n,e)}}function zF(n,e){return function(){return WC(this,n,e.apply(this,arguments))}}function $F(n,e){return this.each((typeof e=="function"?zF:UF)(n,e))}function*BF(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],s=0,o=i.length,a;s<o;++s)(a=i[s])&&(yield a)}var GC=[null];function Er(n,e){this._groups=n,this._parents=e}function Ah(){return new Er([[document.documentElement]],GC)}function qF(){return this}Er.prototype=Ah.prototype={constructor:Er,select:gV,selectAll:wV,selectChild:TV,selectChildren:kV,filter:AV,data:DV,enter:NV,exit:LV,join:VV,merge:FV,selection:qF,order:UV,sort:zV,call:BV,nodes:qV,node:HV,size:KV,empty:WV,each:GV,attr:tF,style:sF,property:uF,classed:dF,text:yF,html:xF,raise:EF,lower:IF,append:SF,insert:kF,remove:NF,clone:OF,datum:jF,on:FF,dispatch:$F,[Symbol.iterator]:BF};function Ur(n){return typeof n=="string"?new Er([[document.querySelector(n)]],[document.documentElement]):new Er([[n]],GC)}function HF(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Fi(n,e){if(n=HF(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}}return[n.pageX,n.pageY]}var KF={value:()=>{}};function Nh(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Yf(r)}function Yf(n){this._=n}function WF(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Yf.prototype=Nh.prototype={constructor:Yf,on:function(n,e){var r=this._,i=WF(n+"",r),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(n=i[o]).type)&&(s=GF(r[s],n.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(s=(n=i[o]).type)r[s]=Q1(r[s],n.name,e);else if(e==null)for(s in r)r[s]=Q1(r[s],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new Yf(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,o;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,s=o.length;i<s;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(e,r)}};function GF(n,e){for(var r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value}function Q1(n,e,r){for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n[i]=KF,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}const QF={passive:!1},ih={capture:!0,passive:!1};function eg(n){n.stopImmediatePropagation()}function zl(n){n.preventDefault(),n.stopImmediatePropagation()}function QC(n){var e=n.document.documentElement,r=Ur(n).on("dragstart.drag",zl,ih);"onselectstart"in e?r.on("selectstart.drag",zl,ih):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function YC(n,e){var r=n.document.documentElement,i=Ur(n).on("dragstart.drag",null);e&&(i.on("click.drag",zl,ih),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const gf=n=>()=>n;function My(n,{sourceEvent:e,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}My.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function YF(n){return!n.ctrlKey&&!n.button}function XF(){return this.parentNode}function JF(n,e){return e??{x:n.x,y:n.y}}function ZF(){return navigator.maxTouchPoints||"ontouchstart"in this}function e9(){var n=YF,e=XF,r=JF,i=ZF,s={},o=Nh("start","drag","end"),a=0,l,u,c,h,p=0;function m(P){P.on("mousedown.drag",v).filter(i).on("touchstart.drag",S).on("touchmove.drag",E,QF).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(P,M){if(!(h||!n.call(this,P,M))){var L=R(this,e.call(this,P,M),P,M,"mouse");L&&(Ur(P.view).on("mousemove.drag",w,ih).on("mouseup.drag",b,ih),QC(P.view),eg(P),c=!1,l=P.clientX,u=P.clientY,L("start",P))}}function w(P){if(zl(P),!c){var M=P.clientX-l,L=P.clientY-u;c=M*M+L*L>p}s.mouse("drag",P)}function b(P){Ur(P.view).on("mousemove.drag mouseup.drag",null),YC(P.view,c),zl(P),s.mouse("end",P)}function S(P,M){if(n.call(this,P,M)){var L=P.changedTouches,k=e.call(this,P,M),C=L.length,D,V;for(D=0;D<C;++D)(V=R(this,k,P,M,L[D].identifier,L[D]))&&(eg(P),V("start",P,L[D]))}}function E(P){var M=P.changedTouches,L=M.length,k,C;for(k=0;k<L;++k)(C=s[M[k].identifier])&&(zl(P),C("drag",P,M[k]))}function I(P){var M=P.changedTouches,L=M.length,k,C;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),k=0;k<L;++k)(C=s[M[k].identifier])&&(eg(P),C("end",P,M[k]))}function R(P,M,L,k,C,D){var V=o.copy(),U=Fi(D||L,M),B,j,F;if((F=r.call(P,new My("beforestart",{sourceEvent:L,target:m,identifier:C,active:a,x:U[0],y:U[1],dx:0,dy:0,dispatch:V}),k))!=null)return B=F.x-U[0]||0,j=F.y-U[1]||0,function Z(ee,fe,re){var ue=U,de;switch(ee){case"start":s[C]=Z,de=a++;break;case"end":delete s[C],--a;case"drag":U=Fi(re||fe,M),de=a;break}V.call(ee,P,new My(ee,{sourceEvent:fe,subject:F,target:m,identifier:C,active:de,x:U[0]+B,y:U[1]+j,dx:U[0]-ue[0],dy:U[1]-ue[1],dispatch:V}),k)}}return m.filter=function(P){return arguments.length?(n=typeof P=="function"?P:gf(!!P),m):n},m.container=function(P){return arguments.length?(e=typeof P=="function"?P:gf(P),m):e},m.subject=function(P){return arguments.length?(r=typeof P=="function"?P:gf(P),m):r},m.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:gf(!!P),m):i},m.on=function(){var P=o.on.apply(o,arguments);return P===o?m:P},m.clickDistance=function(P){return arguments.length?(p=(P=+P)*P,m):Math.sqrt(p)},m}function Z0(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function XC(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function Rh(){}var sh=.7,Qd=1/sh,$l="\\s*([+-]?\\d+)\\s*",oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",t9=/^#([0-9a-f]{3,8})$/,n9=new RegExp(`^rgb\\(${$l},${$l},${$l}\\)$`),r9=new RegExp(`^rgb\\(${Gi},${Gi},${Gi}\\)$`),i9=new RegExp(`^rgba\\(${$l},${$l},${$l},${oh}\\)$`),s9=new RegExp(`^rgba\\(${Gi},${Gi},${Gi},${oh}\\)$`),o9=new RegExp(`^hsl\\(${oh},${Gi},${Gi}\\)$`),a9=new RegExp(`^hsla\\(${oh},${Gi},${Gi},${oh}\\)$`),Y1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Z0(Rh,ah,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:X1,formatHex:X1,formatHex8:l9,formatHsl:u9,formatRgb:J1,toString:J1});function X1(){return this.rgb().formatHex()}function l9(){return this.rgb().formatHex8()}function u9(){return JC(this).formatHsl()}function J1(){return this.rgb().formatRgb()}function ah(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=t9.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?Z1(e):r===3?new tr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?yf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?yf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=n9.exec(n))?new tr(e[1],e[2],e[3],1):(e=r9.exec(n))?new tr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=i9.exec(n))?yf(e[1],e[2],e[3],e[4]):(e=s9.exec(n))?yf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=o9.exec(n))?nb(e[1],e[2]/100,e[3]/100,1):(e=a9.exec(n))?nb(e[1],e[2]/100,e[3]/100,e[4]):Y1.hasOwnProperty(n)?Z1(Y1[n]):n==="transparent"?new tr(NaN,NaN,NaN,0):null}function Z1(n){return new tr(n>>16&255,n>>8&255,n&255,1)}function yf(n,e,r,i){return i<=0&&(n=e=r=NaN),new tr(n,e,r,i)}function c9(n){return n instanceof Rh||(n=ah(n)),n?(n=n.rgb(),new tr(n.r,n.g,n.b,n.opacity)):new tr}function Ly(n,e,r,i){return arguments.length===1?c9(n):new tr(n,e,r,i??1)}function tr(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}Z0(tr,Ly,XC(Rh,{brighter(n){return n=n==null?Qd:Math.pow(Qd,n),new tr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?sh:Math.pow(sh,n),new tr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new tr(ba(this.r),ba(this.g),ba(this.b),Yd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eb,formatHex:eb,formatHex8:h9,formatRgb:tb,toString:tb}));function eb(){return`#${ga(this.r)}${ga(this.g)}${ga(this.b)}`}function h9(){return`#${ga(this.r)}${ga(this.g)}${ga(this.b)}${ga((isNaN(this.opacity)?1:this.opacity)*255)}`}function tb(){const n=Yd(this.opacity);return`${n===1?"rgb(":"rgba("}${ba(this.r)}, ${ba(this.g)}, ${ba(this.b)}${n===1?")":`, ${n})`}`}function Yd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ba(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ga(n){return n=ba(n),(n<16?"0":"")+n.toString(16)}function nb(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new di(n,e,r,i)}function JC(n){if(n instanceof di)return new di(n.h,n.s,n.l,n.opacity);if(n instanceof Rh||(n=ah(n)),!n)return new di;if(n instanceof di)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,s=Math.min(e,r,i),o=Math.max(e,r,i),a=NaN,l=o-s,u=(o+s)/2;return l?(e===o?a=(r-i)/l+(r<i)*6:r===o?a=(i-e)/l+2:a=(e-r)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new di(a,l,u,n.opacity)}function f9(n,e,r,i){return arguments.length===1?JC(n):new di(n,e,r,i??1)}function di(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}Z0(di,f9,XC(Rh,{brighter(n){return n=n==null?Qd:Math.pow(Qd,n),new di(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?sh:Math.pow(sh,n),new di(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new tr(tg(n>=240?n-240:n+120,s,i),tg(n,s,i),tg(n<120?n+240:n-120,s,i),this.opacity)},clamp(){return new di(rb(this.h),vf(this.s),vf(this.l),Yd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Yd(this.opacity);return`${n===1?"hsl(":"hsla("}${rb(this.h)}, ${vf(this.s)*100}%, ${vf(this.l)*100}%${n===1?")":`, ${n})`}`}}));function rb(n){return n=(n||0)%360,n<0?n+360:n}function vf(n){return Math.max(0,Math.min(1,n||0))}function tg(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const ZC=n=>()=>n;function d9(n,e){return function(r){return n+r*e}}function p9(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function m9(n){return(n=+n)==1?ek:function(e,r){return r-e?p9(e,r,n):ZC(isNaN(e)?r:e)}}function ek(n,e){var r=e-n;return r?d9(n,r):ZC(isNaN(n)?e:n)}const ib=function n(e){var r=m9(e);function i(s,o){var a=r((s=Ly(s)).r,(o=Ly(o)).r),l=r(s.g,o.g),u=r(s.b,o.b),c=ek(s.opacity,o.opacity);return function(h){return s.r=a(h),s.g=l(h),s.b=u(h),s.opacity=c(h),s+""}}return i.gamma=n,i}(1);function eo(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var Vy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ng=new RegExp(Vy.source,"g");function g9(n){return function(){return n}}function y9(n){return function(e){return n(e)+""}}function v9(n,e){var r=Vy.lastIndex=ng.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(n=n+"",e=e+"";(i=Vy.exec(n))&&(s=ng.exec(e));)(o=s.index)>r&&(o=e.slice(r,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:eo(i,s)})),r=ng.lastIndex;return r<e.length&&(o=e.slice(r),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?y9(u[0].x):g9(e):(e=u.length,function(c){for(var h=0,p;h<e;++h)l[(p=u[h]).i]=p.x(c);return l.join("")})}var sb=180/Math.PI,Fy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tk(n,e,r,i,s,o){var a,l,u;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(u=n*r+e*i)&&(r-=n*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),n*i<e*r&&(n=-n,e=-e,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*sb,skewX:Math.atan(u)*sb,scaleX:a,scaleY:l}}var _f;function _9(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Fy:tk(e.a,e.b,e.c,e.d,e.e,e.f)}function w9(n){return n==null||(_f||(_f=document.createElementNS("http://www.w3.org/2000/svg","g")),_f.setAttribute("transform",n),!(n=_f.transform.baseVal.consolidate()))?Fy:(n=n.matrix,tk(n.a,n.b,n.c,n.d,n.e,n.f))}function nk(n,e,r,i){function s(c){return c.length?c.pop()+" ":""}function o(c,h,p,m,v,w){if(c!==p||h!==m){var b=v.push("translate(",null,e,null,r);w.push({i:b-4,x:eo(c,p)},{i:b-2,x:eo(h,m)})}else(p||m)&&v.push("translate("+p+e+m+r)}function a(c,h,p,m){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),m.push({i:p.push(s(p)+"rotate(",null,i)-2,x:eo(c,h)})):h&&p.push(s(p)+"rotate("+h+i)}function l(c,h,p,m){c!==h?m.push({i:p.push(s(p)+"skewX(",null,i)-2,x:eo(c,h)}):h&&p.push(s(p)+"skewX("+h+i)}function u(c,h,p,m,v,w){if(c!==p||h!==m){var b=v.push(s(v)+"scale(",null,",",null,")");w.push({i:b-4,x:eo(c,p)},{i:b-2,x:eo(h,m)})}else(p!==1||m!==1)&&v.push(s(v)+"scale("+p+","+m+")")}return function(c,h){var p=[],m=[];return c=n(c),h=n(h),o(c.translateX,c.translateY,h.translateX,h.translateY,p,m),a(c.rotate,h.rotate,p,m),l(c.skewX,h.skewX,p,m),u(c.scaleX,c.scaleY,h.scaleX,h.scaleY,p,m),c=h=null,function(v){for(var w=-1,b=m.length,S;++w<b;)p[(S=m[w]).i]=S.x(v);return p.join("")}}}var x9=nk(_9,"px, ","px)","deg)"),b9=nk(w9,", ",")",")"),E9=1e-12;function ob(n){return((n=Math.exp(n))+1/n)/2}function T9(n){return((n=Math.exp(n))-1/n)/2}function I9(n){return((n=Math.exp(2*n))-1)/(n+1)}const S9=function n(e,r,i){function s(o,a){var l=o[0],u=o[1],c=o[2],h=a[0],p=a[1],m=a[2],v=h-l,w=p-u,b=v*v+w*w,S,E;if(b<E9)E=Math.log(m/c)/e,S=function(k){return[l+k*v,u+k*w,c*Math.exp(e*k*E)]};else{var I=Math.sqrt(b),R=(m*m-c*c+i*b)/(2*c*r*I),P=(m*m-c*c-i*b)/(2*m*r*I),M=Math.log(Math.sqrt(R*R+1)-R),L=Math.log(Math.sqrt(P*P+1)-P);E=(L-M)/e,S=function(k){var C=k*E,D=ob(M),V=c/(r*I)*(D*I9(e*C+M)-T9(M));return[l+V*v,u+V*w,c*D/ob(e*C+M)]}}return S.duration=E*1e3*e/Math.SQRT2,S}return s.rho=function(o){var a=Math.max(.001,+o),l=a*a,u=l*l;return n(a,l,u)},s}(Math.SQRT2,2,4);var ou=0,oc=0,qu=0,rk=1e3,Xd,ac,Jd=0,Ma=0,Yp=0,lh=typeof performance=="object"&&performance.now?performance:Date,ik=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function e_(){return Ma||(ik(C9),Ma=lh.now()+Yp)}function C9(){Ma=0}function Zd(){this._call=this._time=this._next=null}Zd.prototype=t_.prototype={constructor:Zd,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?e_():+r)+(e==null?0:+e),!this._next&&ac!==this&&(ac?ac._next=this:Xd=this,ac=this),this._call=n,this._time=r,Uy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uy())}};function t_(n,e,r){var i=new Zd;return i.restart(n,e,r),i}function k9(){e_(),++ou;for(var n=Xd,e;n;)(e=Ma-n._time)>=0&&n._call.call(void 0,e),n=n._next;--ou}function ab(){Ma=(Jd=lh.now())+Yp,ou=oc=0;try{k9()}finally{ou=0,N9(),Ma=0}}function A9(){var n=lh.now(),e=n-Jd;e>rk&&(Yp-=e,Jd=n)}function N9(){for(var n,e=Xd,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:Xd=r);ac=n,Uy(i)}function Uy(n){if(!ou){oc&&(oc=clearTimeout(oc));var e=n-Ma;e>24?(n<1/0&&(oc=setTimeout(ab,n-lh.now()-Yp)),qu&&(qu=clearInterval(qu))):(qu||(Jd=lh.now(),qu=setInterval(A9,rk)),ou=1,ik(ab))}}function lb(n,e,r){var i=new Zd;return e=e==null?0:+e,i.restart(s=>{i.stop(),n(s+e)},e,r),i}var R9=Nh("start","end","cancel","interrupt"),P9=[],sk=0,ub=1,zy=2,Xf=3,cb=4,$y=5,Jf=6;function Xp(n,e,r,i,s,o){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;O9(n,r,{name:e,index:i,group:s,on:R9,tween:P9,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:sk})}function n_(n,e){var r=Ti(n,e);if(r.state>sk)throw new Error("too late; already scheduled");return r}function Zi(n,e){var r=Ti(n,e);if(r.state>Xf)throw new Error("too late; already running");return r}function Ti(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function O9(n,e,r){var i=n.__transition,s;i[e]=r,r.timer=t_(o,0,r.time);function o(c){r.state=ub,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var h,p,m,v;if(r.state!==ub)return u();for(h in i)if(v=i[h],v.name===r.name){if(v.state===Xf)return lb(a);v.state===cb?(v.state=Jf,v.timer.stop(),v.on.call("interrupt",n,n.__data__,v.index,v.group),delete i[h]):+h<e&&(v.state=Jf,v.timer.stop(),v.on.call("cancel",n,n.__data__,v.index,v.group),delete i[h])}if(lb(function(){r.state===Xf&&(r.state=cb,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=zy,r.on.call("start",n,n.__data__,r.index,r.group),r.state===zy){for(r.state=Xf,s=new Array(m=r.tween.length),h=0,p=-1;h<m;++h)(v=r.tween[h].value.call(n,n.__data__,r.index,r.group))&&(s[++p]=v);s.length=p+1}}function l(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=$y,1),p=-1,m=s.length;++p<m;)s[p].call(n,h);r.state===$y&&(r.on.call("end",n,n.__data__,r.index,r.group),u())}function u(){r.state=Jf,r.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function Zf(n,e){var r=n.__transition,i,s,o=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){o=!1;continue}s=i.state>zy&&i.state<$y,i.state=Jf,i.timer.stop(),i.on.call(s?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}o&&delete n.__transition}}function j9(n){return this.each(function(){Zf(this,n)})}function D9(n,e){var r,i;return function(){var s=Zi(this,n),o=s.tween;if(o!==r){i=r=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function M9(n,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var o=Zi(this,n),a=o.tween;if(a!==i){s=(i=a).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}o.tween=s}}function L9(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Ti(this.node(),r).tween,s=0,o=i.length,a;s<o;++s)if((a=i[s]).name===n)return a.value;return null}return this.each((e==null?D9:M9)(r,n,e))}function r_(n,e,r){var i=n._id;return n.each(function(){var s=Zi(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return Ti(s,i).value[e]}}function ok(n,e){var r;return(typeof e=="number"?eo:e instanceof ah?ib:(r=ah(e))?(e=r,ib):v9)(n,e)}function V9(n){return function(){this.removeAttribute(n)}}function F9(n){return function(){this.removeAttributeNS(n.space,n.local)}}function U9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttribute(n);return a===s?null:a===i?o:o=e(i=a,r)}}function z9(n,e,r){var i,s=r+"",o;return function(){var a=this.getAttributeNS(n.space,n.local);return a===s?null:a===i?o:o=e(i=a,r)}}function $9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function B9(n,e,r){var i,s,o;return function(){var a,l=r(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),u=l+"",a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l)))}}function q9(n,e){var r=Qp(n),i=r==="transform"?b9:ok;return this.attrTween(n,typeof e=="function"?(r.local?B9:$9)(r,i,r_(this,"attr."+n,e)):e==null?(r.local?F9:V9)(r):(r.local?z9:U9)(r,i,e))}function H9(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function K9(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function W9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&K9(n,o)),r}return s._value=e,s}function G9(n,e){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&H9(n,o)),r}return s._value=e,s}function Q9(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Qp(n);return this.tween(r,(i.local?W9:G9)(i,e))}function Y9(n,e){return function(){n_(this,n).delay=+e.apply(this,arguments)}}function X9(n,e){return e=+e,function(){n_(this,n).delay=e}}function J9(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Y9:X9)(e,n)):Ti(this.node(),e).delay}function Z9(n,e){return function(){Zi(this,n).duration=+e.apply(this,arguments)}}function e8(n,e){return e=+e,function(){Zi(this,n).duration=e}}function t8(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Z9:e8)(e,n)):Ti(this.node(),e).duration}function n8(n,e){if(typeof e!="function")throw new Error;return function(){Zi(this,n).ease=e}}function r8(n){var e=this._id;return arguments.length?this.each(n8(e,n)):Ti(this.node(),e).ease}function i8(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Zi(this,n).ease=r}}function s8(n){if(typeof n!="function")throw new Error;return this.each(i8(this._id,n))}function o8(n){typeof n!="function"&&(n=FC(n));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var o=e[s],a=o.length,l=i[s]=[],u,c=0;c<a;++c)(u=o[c])&&n.call(u,u.__data__,c,o)&&l.push(u);return new js(i,this._parents,this._name,this._id)}function a8(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=e[l],c=r[l],h=u.length,p=a[l]=new Array(h),m,v=0;v<h;++v)(m=u[v]||c[v])&&(p[v]=m);for(;l<i;++l)a[l]=e[l];return new js(a,this._parents,this._name,this._id)}function l8(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function u8(n,e,r){var i,s,o=l8(e)?n_:Zi;return function(){var a=o(this,n),l=a.on;l!==i&&(s=(i=l).copy()).on(e,r),a.on=s}}function c8(n,e){var r=this._id;return arguments.length<2?Ti(this.node(),r).on.on(n):this.each(u8(r,n,e))}function h8(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function f8(){return this.on("end.remove",h8(this._id))}function d8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=X0(n));for(var i=this._groups,s=i.length,o=new Array(s),a=0;a<s;++a)for(var l=i[a],u=l.length,c=o[a]=new Array(u),h,p,m=0;m<u;++m)(h=l[m])&&(p=n.call(h,h.__data__,m,l))&&("__data__"in h&&(p.__data__=h.__data__),c[m]=p,Xp(c[m],e,r,m,c,Ti(h,r)));return new js(o,this._parents,e,r)}function p8(n){var e=this._name,r=this._id;typeof n!="function"&&(n=VC(n));for(var i=this._groups,s=i.length,o=[],a=[],l=0;l<s;++l)for(var u=i[l],c=u.length,h,p=0;p<c;++p)if(h=u[p]){for(var m=n.call(h,h.__data__,p,u),v,w=Ti(h,r),b=0,S=m.length;b<S;++b)(v=m[b])&&Xp(v,e,r,b,m,w);o.push(m),a.push(h)}return new js(o,a,e,r)}var m8=Ah.prototype.constructor;function g8(){return new m8(this._groups,this._parents)}function y8(n,e){var r,i,s;return function(){var o=su(this,n),a=(this.style.removeProperty(n),su(this,n));return o===a?null:o===r&&a===i?s:s=e(r=o,i=a)}}function ak(n){return function(){this.style.removeProperty(n)}}function v8(n,e,r){var i,s=r+"",o;return function(){var a=su(this,n);return a===s?null:a===i?o:o=e(i=a,r)}}function _8(n,e,r){var i,s,o;return function(){var a=su(this,n),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(n),su(this,n))),a===u?null:a===i&&u===s?o:(s=u,o=e(i=a,l))}}function w8(n,e){var r,i,s,o="style."+e,a="end."+o,l;return function(){var u=Zi(this,n),c=u.on,h=u.value[o]==null?l||(l=ak(e)):void 0;(c!==r||s!==h)&&(i=(r=c).copy()).on(a,s=h),u.on=i}}function x8(n,e,r){var i=(n+="")=="transform"?x9:ok;return e==null?this.styleTween(n,y8(n,i)).on("end.style."+n,ak(n)):typeof e=="function"?this.styleTween(n,_8(n,i,r_(this,"style."+n,e))).each(w8(this._id,n)):this.styleTween(n,v8(n,i,e),r).on("end.style."+n,null)}function b8(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function E8(n,e,r){var i,s;function o(){var a=e.apply(this,arguments);return a!==s&&(i=(s=a)&&b8(n,a,r)),i}return o._value=e,o}function T8(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,E8(n,e,r??""))}function I8(n){return function(){this.textContent=n}}function S8(n){return function(){var e=n(this);this.textContent=e??""}}function C8(n){return this.tween("text",typeof n=="function"?S8(r_(this,"text",n)):I8(n==null?"":n+""))}function k8(n){return function(e){this.textContent=n.call(this,e)}}function A8(n){var e,r;function i(){var s=n.apply(this,arguments);return s!==r&&(e=(r=s)&&k8(s)),e}return i._value=n,i}function N8(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,A8(n))}function R8(){for(var n=this._name,e=this._id,r=lk(),i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)if(u=a[c]){var h=Ti(u,e);Xp(u,n,r,c,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new js(i,this._parents,n,r)}function P8(){var n,e,r=this,i=r._id,s=r.size();return new Promise(function(o,a){var l={value:a},u={value:function(){--s===0&&o()}};r.each(function(){var c=Zi(this,i),h=c.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&o()})}var O8=0;function js(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function lk(){return++O8}var us=Ah.prototype;js.prototype={constructor:js,select:d8,selectAll:p8,selectChild:us.selectChild,selectChildren:us.selectChildren,filter:o8,merge:a8,selection:g8,transition:R8,call:us.call,nodes:us.nodes,node:us.node,size:us.size,empty:us.empty,each:us.each,on:c8,attr:q9,attrTween:Q9,style:x8,styleTween:T8,text:C8,textTween:N8,remove:f8,tween:L9,delay:J9,duration:t8,ease:r8,easeVarying:s8,end:P8,[Symbol.iterator]:us[Symbol.iterator]};function j8(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var D8={time:null,delay:0,duration:250,ease:j8};function M8(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function L8(n){var e,r;n instanceof js?(e=n._id,n=n._name):(e=lk(),(r=D8).time=e_(),n=n==null?null:n+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var a=i[o],l=a.length,u,c=0;c<l;++c)(u=a[c])&&Xp(u,n,e,c,a,r||M8(u,e));return new js(i,this._parents,n,e)}Ah.prototype.interrupt=j9;Ah.prototype.transition=L8;const wf=n=>()=>n;function V8(n,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function xs(n,e,r){this.k=n,this.x=e,this.y=r}xs.prototype={constructor:xs,scale:function(n){return n===1?this:new xs(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new xs(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var i_=new xs(1,0,0);Li.prototype=xs.prototype;function Li(n){for(;!n.__zoom;)if(!(n=n.parentNode))return i_;return n.__zoom}function rg(n){n.stopImmediatePropagation()}function Hu(n){n.preventDefault(),n.stopImmediatePropagation()}function F8(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function U8(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function hb(){return this.__zoom||i_}function z8(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function $8(){return navigator.maxTouchPoints||"ontouchstart"in this}function B8(n,e,r){var i=n.invertX(e[0][0])-r[0][0],s=n.invertX(e[1][0])-r[1][0],o=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function q8(){var n=F8,e=U8,r=B8,i=z8,s=$8,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,u=S9,c=Nh("start","zoom","end"),h,p,m,v=500,w=150,b=0,S=10;function E(F){F.property("__zoom",hb).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",U).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(F,Z,ee,fe){var re=F.selection?F.selection():F;re.property("__zoom",hb),F!==re?M(F,Z,ee,fe):re.interrupt().each(function(){L(this,arguments).event(fe).start().zoom(null,typeof Z=="function"?Z.apply(this,arguments):Z).end()})},E.scaleBy=function(F,Z,ee,fe){E.scaleTo(F,function(){var re=this.__zoom.k,ue=typeof Z=="function"?Z.apply(this,arguments):Z;return re*ue},ee,fe)},E.scaleTo=function(F,Z,ee,fe){E.transform(F,function(){var re=e.apply(this,arguments),ue=this.__zoom,de=ee==null?P(re):typeof ee=="function"?ee.apply(this,arguments):ee,Ie=ue.invert(de),ce=typeof Z=="function"?Z.apply(this,arguments):Z;return r(R(I(ue,ce),de,Ie),re,a)},ee,fe)},E.translateBy=function(F,Z,ee,fe){E.transform(F,function(){return r(this.__zoom.translate(typeof Z=="function"?Z.apply(this,arguments):Z,typeof ee=="function"?ee.apply(this,arguments):ee),e.apply(this,arguments),a)},null,fe)},E.translateTo=function(F,Z,ee,fe,re){E.transform(F,function(){var ue=e.apply(this,arguments),de=this.__zoom,Ie=fe==null?P(ue):typeof fe=="function"?fe.apply(this,arguments):fe;return r(i_.translate(Ie[0],Ie[1]).scale(de.k).translate(typeof Z=="function"?-Z.apply(this,arguments):-Z,typeof ee=="function"?-ee.apply(this,arguments):-ee),ue,a)},fe,re)};function I(F,Z){return Z=Math.max(o[0],Math.min(o[1],Z)),Z===F.k?F:new xs(Z,F.x,F.y)}function R(F,Z,ee){var fe=Z[0]-ee[0]*F.k,re=Z[1]-ee[1]*F.k;return fe===F.x&&re===F.y?F:new xs(F.k,fe,re)}function P(F){return[(+F[0][0]+ +F[1][0])/2,(+F[0][1]+ +F[1][1])/2]}function M(F,Z,ee,fe){F.on("start.zoom",function(){L(this,arguments).event(fe).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(fe).end()}).tween("zoom",function(){var re=this,ue=arguments,de=L(re,ue).event(fe),Ie=e.apply(re,ue),ce=ee==null?P(Ie):typeof ee=="function"?ee.apply(re,ue):ee,Ne=Math.max(Ie[1][0]-Ie[0][0],Ie[1][1]-Ie[0][1]),Pe=re.__zoom,Me=typeof Z=="function"?Z.apply(re,ue):Z,Ge=u(Pe.invert(ce).concat(Ne/Pe.k),Me.invert(ce).concat(Ne/Me.k));return function(Be){if(Be===1)Be=Me;else{var Xt=Ge(Be),Le=Ne/Xt[2];Be=new xs(Le,ce[0]-Xt[0]*Le,ce[1]-Xt[1]*Le)}de.zoom(null,Be)}})}function L(F,Z,ee){return!ee&&F.__zooming||new k(F,Z)}function k(F,Z){this.that=F,this.args=Z,this.active=0,this.sourceEvent=null,this.extent=e.apply(F,Z),this.taps=0}k.prototype={event:function(F){return F&&(this.sourceEvent=F),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(F,Z){return this.mouse&&F!=="mouse"&&(this.mouse[1]=Z.invert(this.mouse[0])),this.touch0&&F!=="touch"&&(this.touch0[1]=Z.invert(this.touch0[0])),this.touch1&&F!=="touch"&&(this.touch1[1]=Z.invert(this.touch1[0])),this.that.__zoom=Z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(F){var Z=Ur(this.that).datum();c.call(F,this.that,new V8(F,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:c}),Z)}};function C(F,...Z){if(!n.apply(this,arguments))return;var ee=L(this,Z).event(F),fe=this.__zoom,re=Math.max(o[0],Math.min(o[1],fe.k*Math.pow(2,i.apply(this,arguments)))),ue=Fi(F);if(ee.wheel)(ee.mouse[0][0]!==ue[0]||ee.mouse[0][1]!==ue[1])&&(ee.mouse[1]=fe.invert(ee.mouse[0]=ue)),clearTimeout(ee.wheel);else{if(fe.k===re)return;ee.mouse=[ue,fe.invert(ue)],Zf(this),ee.start()}Hu(F),ee.wheel=setTimeout(de,w),ee.zoom("mouse",r(R(I(fe,re),ee.mouse[0],ee.mouse[1]),ee.extent,a));function de(){ee.wheel=null,ee.end()}}function D(F,...Z){if(m||!n.apply(this,arguments))return;var ee=F.currentTarget,fe=L(this,Z,!0).event(F),re=Ur(F.view).on("mousemove.zoom",ce,!0).on("mouseup.zoom",Ne,!0),ue=Fi(F,ee),de=F.clientX,Ie=F.clientY;QC(F.view),rg(F),fe.mouse=[ue,this.__zoom.invert(ue)],Zf(this),fe.start();function ce(Pe){if(Hu(Pe),!fe.moved){var Me=Pe.clientX-de,Ge=Pe.clientY-Ie;fe.moved=Me*Me+Ge*Ge>b}fe.event(Pe).zoom("mouse",r(R(fe.that.__zoom,fe.mouse[0]=Fi(Pe,ee),fe.mouse[1]),fe.extent,a))}function Ne(Pe){re.on("mousemove.zoom mouseup.zoom",null),YC(Pe.view,fe.moved),Hu(Pe),fe.event(Pe).end()}}function V(F,...Z){if(n.apply(this,arguments)){var ee=this.__zoom,fe=Fi(F.changedTouches?F.changedTouches[0]:F,this),re=ee.invert(fe),ue=ee.k*(F.shiftKey?.5:2),de=r(R(I(ee,ue),fe,re),e.apply(this,Z),a);Hu(F),l>0?Ur(this).transition().duration(l).call(M,de,fe,F):Ur(this).call(E.transform,de,fe,F)}}function U(F,...Z){if(n.apply(this,arguments)){var ee=F.touches,fe=ee.length,re=L(this,Z,F.changedTouches.length===fe).event(F),ue,de,Ie,ce;for(rg(F),de=0;de<fe;++de)Ie=ee[de],ce=Fi(Ie,this),ce=[ce,this.__zoom.invert(ce),Ie.identifier],re.touch0?!re.touch1&&re.touch0[2]!==ce[2]&&(re.touch1=ce,re.taps=0):(re.touch0=ce,ue=!0,re.taps=1+!!h);h&&(h=clearTimeout(h)),ue&&(re.taps<2&&(p=ce[0],h=setTimeout(function(){h=null},v)),Zf(this),re.start())}}function B(F,...Z){if(this.__zooming){var ee=L(this,Z).event(F),fe=F.changedTouches,re=fe.length,ue,de,Ie,ce;for(Hu(F),ue=0;ue<re;++ue)de=fe[ue],Ie=Fi(de,this),ee.touch0&&ee.touch0[2]===de.identifier?ee.touch0[0]=Ie:ee.touch1&&ee.touch1[2]===de.identifier&&(ee.touch1[0]=Ie);if(de=ee.that.__zoom,ee.touch1){var Ne=ee.touch0[0],Pe=ee.touch0[1],Me=ee.touch1[0],Ge=ee.touch1[1],Be=(Be=Me[0]-Ne[0])*Be+(Be=Me[1]-Ne[1])*Be,Xt=(Xt=Ge[0]-Pe[0])*Xt+(Xt=Ge[1]-Pe[1])*Xt;de=I(de,Math.sqrt(Be/Xt)),Ie=[(Ne[0]+Me[0])/2,(Ne[1]+Me[1])/2],ce=[(Pe[0]+Ge[0])/2,(Pe[1]+Ge[1])/2]}else if(ee.touch0)Ie=ee.touch0[0],ce=ee.touch0[1];else return;ee.zoom("touch",r(R(de,Ie,ce),ee.extent,a))}}function j(F,...Z){if(this.__zooming){var ee=L(this,Z).event(F),fe=F.changedTouches,re=fe.length,ue,de;for(rg(F),m&&clearTimeout(m),m=setTimeout(function(){m=null},v),ue=0;ue<re;++ue)de=fe[ue],ee.touch0&&ee.touch0[2]===de.identifier?delete ee.touch0:ee.touch1&&ee.touch1[2]===de.identifier&&delete ee.touch1;if(ee.touch1&&!ee.touch0&&(ee.touch0=ee.touch1,delete ee.touch1),ee.touch0)ee.touch0[1]=this.__zoom.invert(ee.touch0[0]);else if(ee.end(),ee.taps===2&&(de=Fi(de,this),Math.hypot(p[0]-de[0],p[1]-de[1])<S)){var Ie=Ur(this).on("dblclick.zoom");Ie&&Ie.apply(this,arguments)}}}return E.wheelDelta=function(F){return arguments.length?(i=typeof F=="function"?F:wf(+F),E):i},E.filter=function(F){return arguments.length?(n=typeof F=="function"?F:wf(!!F),E):n},E.touchable=function(F){return arguments.length?(s=typeof F=="function"?F:wf(!!F),E):s},E.extent=function(F){return arguments.length?(e=typeof F=="function"?F:wf([[+F[0][0],+F[0][1]],[+F[1][0],+F[1][1]]]),E):e},E.scaleExtent=function(F){return arguments.length?(o[0]=+F[0],o[1]=+F[1],E):[o[0],o[1]]},E.translateExtent=function(F){return arguments.length?(a[0][0]=+F[0][0],a[1][0]=+F[1][0],a[0][1]=+F[0][1],a[1][1]=+F[1][1],E):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},E.constrain=function(F){return arguments.length?(r=F,E):r},E.duration=function(F){return arguments.length?(l=+F,E):l},E.interpolate=function(F){return arguments.length?(u=F,E):u},E.on=function(){var F=c.on.apply(c,arguments);return F===c?E:F},E.clickDistance=function(F){return arguments.length?(b=(F=+F)*F,E):Math.sqrt(b)},E.tapDistance=function(F){return arguments.length?(S=+F,E):S},E}class fb extends Map{constructor(e,r=W8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,s]of e)this.set(i,s)}get(e){return super.get(db(this,e))}has(e){return super.has(db(this,e))}set(e,r){return super.set(H8(this,e),r)}delete(e){return super.delete(K8(this,e))}}function db({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function H8({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function K8({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function W8(n){return n!==null&&typeof n=="object"?n.valueOf():n}function pb(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function mb(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of n)(s=e(s,++i,n))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function G8(n,e){let r=0;for(let i of n)(i=+i)&&(r+=i);return r}var Q8=typeof global=="object"&&global&&global.Object===Object&&global,Y8=typeof self=="object"&&self&&self.Object===Object&&self,uk=Q8||Y8||Function("return this")(),ep=uk.Symbol,ck=Object.prototype,X8=ck.hasOwnProperty,J8=ck.toString,Ku=ep?ep.toStringTag:void 0;function Z8(n){var e=X8.call(n,Ku),r=n[Ku];try{n[Ku]=void 0;var i=!0}catch{}var s=J8.call(n);return i&&(e?n[Ku]=r:delete n[Ku]),s}var eU=Object.prototype,tU=eU.toString;function nU(n){return tU.call(n)}var rU="[object Null]",iU="[object Undefined]",gb=ep?ep.toStringTag:void 0;function sU(n){return n==null?n===void 0?iU:rU:gb&&gb in Object(n)?Z8(n):nU(n)}function oU(n){return n!=null&&typeof n=="object"}var aU="[object Symbol]";function lU(n){return typeof n=="symbol"||oU(n)&&sU(n)==aU}var uU=/\s/;function cU(n){for(var e=n.length;e--&&uU.test(n.charAt(e)););return e}var hU=/^\s+/;function fU(n){return n&&n.slice(0,cU(n)+1).replace(hU,"")}function tp(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var yb=NaN,dU=/^[-+]0x[0-9a-f]+$/i,pU=/^0b[01]+$/i,mU=/^0o[0-7]+$/i,gU=parseInt;function vb(n){if(typeof n=="number")return n;if(lU(n))return yb;if(tp(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=tp(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=fU(n);var r=pU.test(n);return r||mU.test(n)?gU(n.slice(2),r?2:8):dU.test(n)?yb:+n}var ig=function(){return uk.Date.now()},yU="Expected a function",vU=Math.max,_U=Math.min;function hk(n,e,r){var i,s,o,a,l,u,c=0,h=!1,p=!1,m=!0;if(typeof n!="function")throw new TypeError(yU);e=vb(e)||0,tp(r)&&(h=!!r.leading,p="maxWait"in r,o=p?vU(vb(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function v(L){var k=i,C=s;return i=s=void 0,c=L,a=n.apply(C,k),a}function w(L){return c=L,l=setTimeout(E,e),h?v(L):a}function b(L){var k=L-u,C=L-c,D=e-k;return p?_U(D,o-C):D}function S(L){var k=L-u,C=L-c;return u===void 0||k>=e||k<0||p&&C>=o}function E(){var L=ig();if(S(L))return I(L);l=setTimeout(E,b(L))}function I(L){return l=void 0,m&&i?v(L):(i=s=void 0,a)}function R(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function P(){return l===void 0?a:I(ig())}function M(){var L=ig(),k=S(L);if(i=arguments,s=this,u=L,k){if(l===void 0)return w(u);if(p)return clearTimeout(l),l=setTimeout(E,e),v(u)}return l===void 0&&(l=setTimeout(E,e)),a}return M.cancel=R,M.flush=P,M}var wU="Expected a function";function xU(n,e,r){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(wU);return tp(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),hk(n,e,{leading:i,maxWait:e,trailing:s})}var Ea=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Ea.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Ea.Bounce.In(n*2)*.5:Ea.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),lc=function(){return performance.now()},fk=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=0,o=r;s<o.length;s++){var a=o[s];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,s=e;i<s.length;i++){var o=s[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=lc()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<i.length;s++){var o=this._tweens[i[s]],a=!r;o&&o.update(e,a)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),By={Linear:function(n,e){var r=n.length-1,i=r*e,s=Math.floor(i),o=By.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[s],n[s+1>r?r:s+1],i-s)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},dk=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),qy=new fk,_b=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ea.Linear.None,this._interpolationFunction=By.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=dk.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=qy,qy.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=lc()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var s={};for(var o in this._valuesEnd)s[o]=this._valuesEnd[o];this._valuesEnd=s}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,s,o){for(var a in i){var l=e[a],u=Array.isArray(l),c=u?"array":typeof l,h=!u&&Array.isArray(i[a]);if(!(c==="undefined"||c==="function")){if(h){var p=i[a];if(p.length===0)continue;for(var m=[l],v=0,w=p.length;v<w;v+=1){var b=this._handleRelativeValue(l,p[v]);if(isNaN(b)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(b)}h&&(i[a]=m)}if((c==="object"||u)&&l&&!h){r[a]=u?[]:{};var S=l;for(var E in S)r[a][E]=S[E];s[a]=u?[]:{};var p=i[a];if(!this._isDynamic){var I={};for(var E in p)I[E]=p[E];i[a]=p=I}this._setupProperties(S,r[a],p,s[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=l),u||(r[a]*=1),h?s[a]=i[a].slice().reverse():s[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=lc()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=lc()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Ea.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=By.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,s;if(e===void 0&&(e=lc()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((s=this._repeatDelayTime)!==null&&s!==void 0?s:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(i._duration===0||a>u)return 1;var b=Math.trunc(a/l),S=a-b*l,E=Math.min(S/i._duration,1);return E===0&&a===i._duration?1:E},h=c(),p=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,p),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||a>=this._duration)if(this._repeat>0){var m=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=m);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*m,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var v=0,w=this._chainedTweens.length;v<w;v++)this._chainedTweens[v].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,s){for(var o in i)if(r[o]!==void 0){var a=r[o]||0,l=i[o],u=Array.isArray(e[o]),c=Array.isArray(l),h=!u&&c;h?e[o]=this._interpolationFunction(l,s):typeof l=="object"&&l?this._updateProperties(e[o],a,l,s):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[o]=a+(l-a)*s))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();dk.nextId;var Ji=qy;Ji.getAll.bind(Ji);Ji.removeAll.bind(Ji);Ji.add.bind(Ji);Ji.remove.bind(Ji);Ji.update.bind(Ji);function wb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function bU(n){if(Array.isArray(n))return n}function EU(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function IU(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(h){c=!0,s=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function SU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CU(n,e){return bU(n)||IU(n,e)||kU(n,e)||SU()}function kU(n,e){if(n){if(typeof n=="string")return wb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wb(n,e):void 0}}var AU=TU(function n(e,r){var i=r.default,s=i===void 0?null:i,o=r.triggerUpdate,a=o===void 0?!0:o,l=r.onChange,u=l===void 0?function(c,h){}:l;EU(this,n),this.name=e,this.defaultVal=s,this.triggerUpdate=a,this.onChange=u});function s_(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,s=i===void 0?{}:i,o=n.methods,a=o===void 0?{}:o,l=n.aliases,u=l===void 0?{}:l,c=n.init,h=c===void 0?function(){}:c,p=n.update,m=p===void 0?function(){}:p,v=Object.keys(s).map(function(w){return new AU(w,s[w])});return function w(){for(var b=arguments.length,S=new Array(b),E=0;E<b;E++)S[E]=arguments[E];var I=!!(this instanceof w&&this.constructor),R=I?S.shift():void 0,P=S[0],M=P===void 0?{}:P,L=Object.assign({},r instanceof Function?r(M):r,{initialised:!1}),k={};function C(U){return D(U,M),V(),C}var D=function(B,j){h.call(C,B,L,j),L.initialised=!0},V=hk(function(){L.initialised&&(m.call(C,L,k),k={})},1);return v.forEach(function(U){C[U.name]=B(U);function B(j){var F=j.name,Z=j.triggerUpdate,ee=Z===void 0?!1:Z,fe=j.onChange,re=fe===void 0?function(Ie,ce){}:fe,ue=j.defaultVal,de=ue===void 0?null:ue;return function(Ie){var ce=L[F];if(!arguments.length)return ce;var Ne=Ie===void 0?de:Ie;return L[F]=Ne,re.call(C,Ne,L,ce),!k.hasOwnProperty(F)&&(k[F]=ce),ee&&V(),C}}}),Object.keys(a).forEach(function(U){C[U]=function(){for(var B,j=arguments.length,F=new Array(j),Z=0;Z<j;Z++)F[Z]=arguments[Z];return(B=a[U]).call.apply(B,[C,L].concat(F))}}),Object.entries(u).forEach(function(U){var B=CU(U,2),j=B[0],F=B[1];return C[j]=C[F]}),C.resetProps=function(){return v.forEach(function(U){C[U.name](U.defaultVal)}),C},C.resetProps(),L._rerender=V,I&&R&&C(R),C}}var dt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};function np(n){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(n)}var NU=/^\s+/,RU=/\s+$/;function Ve(n,e){if(n=n||"",e=e||{},n instanceof Ve)return n;if(!(this instanceof Ve))return new Ve(n,e);var r=PU(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ve.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,s,o,a,l;return r=e.r/255,i=e.g/255,s=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),s<=.03928?l=s/12.92:l=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*a+.0722*l},setAlpha:function(e){return this._a=pk(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=bb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=bb(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+s+"%)":"hsva("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=xb(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=xb(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+s+"%)":"hsla("+r+", "+i+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return Eb(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return MU(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Nt(this._r,255)*100)+"%",g:Math.round(Nt(this._g,255)*100)+"%",b:Math.round(Nt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Nt(this._r,255)*100)+"%, "+Math.round(Nt(this._g,255)*100)+"%, "+Math.round(Nt(this._b,255)*100)+"%)":"rgba("+Math.round(Nt(this._r,255)*100)+"%, "+Math.round(Nt(this._g,255)*100)+"%, "+Math.round(Nt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:GU[Eb(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+Tb(this._r,this._g,this._b,this._a),i=r,s=this._gradientType?"GradientType = 1, ":"";if(e){var o=Ve(e);i="#"+Tb(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,s=this._a<1&&this._a>=0,o=!r&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Ve(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(UU,arguments)},brighten:function(){return this._applyModification(zU,arguments)},darken:function(){return this._applyModification($U,arguments)},desaturate:function(){return this._applyModification(LU,arguments)},saturate:function(){return this._applyModification(VU,arguments)},greyscale:function(){return this._applyModification(FU,arguments)},spin:function(){return this._applyModification(BU,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(KU,arguments)},complement:function(){return this._applyCombination(qU,arguments)},monochromatic:function(){return this._applyCombination(WU,arguments)},splitcomplement:function(){return this._applyCombination(HU,arguments)},triad:function(){return this._applyCombination(Ib,[3])},tetrad:function(){return this._applyCombination(Ib,[4])}};Ve.fromRatio=function(n,e){if(np(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=uc(n[i]));n=r}return Ve(n,e)};function PU(n){var e={r:0,g:0,b:0},r=1,i=null,s=null,o=null,a=!1,l=!1;return typeof n=="string"&&(n=JU(n)),np(n)=="object"&&(cs(n.r)&&cs(n.g)&&cs(n.b)?(e=OU(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):cs(n.h)&&cs(n.s)&&cs(n.v)?(i=uc(n.s),s=uc(n.v),e=DU(n.h,i,s),a=!0,l="hsv"):cs(n.h)&&cs(n.s)&&cs(n.l)&&(i=uc(n.s),o=uc(n.l),e=jU(n.h,i,o),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=pk(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function OU(n,e,r){return{r:Nt(n,255)*255,g:Nt(e,255)*255,b:Nt(r,255)*255}}function xb(n,e,r){n=Nt(n,255),e=Nt(e,255),r=Nt(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=(i+s)/2;if(i==s)o=a=0;else{var u=i-s;switch(a=l>.5?u/(2-i-s):u/(i+s),i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,l}}function jU(n,e,r){var i,s,o;n=Nt(n,360),e=Nt(e,100),r=Nt(r,100);function a(c,h,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?c+(h-c)*6*p:p<1/2?h:p<2/3?c+(h-c)*(2/3-p)*6:c}if(e===0)i=s=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;i=a(u,l,n+1/3),s=a(u,l,n),o=a(u,l,n-1/3)}return{r:i*255,g:s*255,b:o*255}}function bb(n,e,r){n=Nt(n,255),e=Nt(e,255),r=Nt(r,255);var i=Math.max(n,e,r),s=Math.min(n,e,r),o,a,l=i,u=i-s;if(a=i===0?0:u/i,i==s)o=0;else{switch(i){case n:o=(e-r)/u+(e<r?6:0);break;case e:o=(r-n)/u+2;break;case r:o=(n-e)/u+4;break}o/=6}return{h:o,s:a,v:l}}function DU(n,e,r){n=Nt(n,360)*6,e=Nt(e,100),r=Nt(r,100);var i=Math.floor(n),s=n-i,o=r*(1-e),a=r*(1-s*e),l=r*(1-(1-s)*e),u=i%6,c=[r,a,o,o,l,r][u],h=[l,r,r,a,o,o][u],p=[o,o,l,r,r,a][u];return{r:c*255,g:h*255,b:p*255}}function Eb(n,e,r,i){var s=[mi(Math.round(n).toString(16)),mi(Math.round(e).toString(16)),mi(Math.round(r).toString(16))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function MU(n,e,r,i,s){var o=[mi(Math.round(n).toString(16)),mi(Math.round(e).toString(16)),mi(Math.round(r).toString(16)),mi(mk(i))];return s&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Tb(n,e,r,i){var s=[mi(mk(i)),mi(Math.round(n).toString(16)),mi(Math.round(e).toString(16)),mi(Math.round(r).toString(16))];return s.join("")}Ve.equals=function(n,e){return!n||!e?!1:Ve(n).toRgbString()==Ve(e).toRgbString()};Ve.random=function(){return Ve.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function LU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.s-=e/100,r.s=Jp(r.s),Ve(r)}function VU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.s+=e/100,r.s=Jp(r.s),Ve(r)}function FU(n){return Ve(n).desaturate(100)}function UU(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.l+=e/100,r.l=Jp(r.l),Ve(r)}function zU(n,e){e=e===0?0:e||10;var r=Ve(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Ve(r)}function $U(n,e){e=e===0?0:e||10;var r=Ve(n).toHsl();return r.l-=e/100,r.l=Jp(r.l),Ve(r)}function BU(n,e){var r=Ve(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Ve(r)}function qU(n){var e=Ve(n).toHsl();return e.h=(e.h+180)%360,Ve(e)}function Ib(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ve(n).toHsl(),i=[Ve(n)],s=360/e,o=1;o<e;o++)i.push(Ve({h:(r.h+o*s)%360,s:r.s,l:r.l}));return i}function HU(n){var e=Ve(n).toHsl(),r=e.h;return[Ve(n),Ve({h:(r+72)%360,s:e.s,l:e.l}),Ve({h:(r+216)%360,s:e.s,l:e.l})]}function KU(n,e,r){e=e||6,r=r||30;var i=Ve(n).toHsl(),s=360/r,o=[Ve(n)];for(i.h=(i.h-(s*e>>1)+720)%360;--e;)i.h=(i.h+s)%360,o.push(Ve(i));return o}function WU(n,e){e=e||6;for(var r=Ve(n).toHsv(),i=r.h,s=r.s,o=r.v,a=[],l=1/e;e--;)a.push(Ve({h:i,s,v:o})),o=(o+l)%1;return a}Ve.mix=function(n,e,r){r=r===0?0:r||50;var i=Ve(n).toRgb(),s=Ve(e).toRgb(),o=r/100,a={r:(s.r-i.r)*o+i.r,g:(s.g-i.g)*o+i.g,b:(s.b-i.b)*o+i.b,a:(s.a-i.a)*o+i.a};return Ve(a)};Ve.readability=function(n,e){var r=Ve(n),i=Ve(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Ve.isReadable=function(n,e,r){var i=Ve.readability(n,e),s,o;switch(o=!1,s=ZU(r),s.level+s.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};Ve.mostReadable=function(n,e,r){var i=null,s=0,o,a,l,u;r=r||{},a=r.includeFallbackColors,l=r.level,u=r.size;for(var c=0;c<e.length;c++)o=Ve.readability(n,e[c]),o>s&&(s=o,i=Ve(e[c]));return Ve.isReadable(n,i,{level:l,size:u})||!a?i:(r.includeFallbackColors=!1,Ve.mostReadable(n,["#fff","#000"],r))};var Hy=Ve.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},GU=Ve.hexNames=QU(Hy);function QU(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function pk(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Nt(n,e){YU(n)&&(n="100%");var r=XU(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Jp(n){return Math.min(1,Math.max(0,n))}function gr(n){return parseInt(n,16)}function YU(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function XU(n){return typeof n=="string"&&n.indexOf("%")!=-1}function mi(n){return n.length==1?"0"+n:""+n}function uc(n){return n<=1&&(n=n*100+"%"),n}function mk(n){return Math.round(parseFloat(n)*255).toString(16)}function Sb(n){return gr(n)/255}var li=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function cs(n){return!!li.CSS_UNIT.exec(n)}function JU(n){n=n.replace(NU,"").replace(RU,"").toLowerCase();var e=!1;if(Hy[n])n=Hy[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=li.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=li.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=li.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=li.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=li.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=li.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=li.hex8.exec(n))?{r:gr(r[1]),g:gr(r[2]),b:gr(r[3]),a:Sb(r[4]),format:e?"name":"hex8"}:(r=li.hex6.exec(n))?{r:gr(r[1]),g:gr(r[2]),b:gr(r[3]),format:e?"name":"hex"}:(r=li.hex4.exec(n))?{r:gr(r[1]+""+r[1]),g:gr(r[2]+""+r[2]),b:gr(r[3]+""+r[3]),a:Sb(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=li.hex3.exec(n))?{r:gr(r[1]+""+r[1]),g:gr(r[2]+""+r[2]),b:gr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function ZU(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function Ky(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ez(n){if(Array.isArray(n))return Ky(n)}function gk(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function tz(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nz(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jr(n,e){return n.get(gk(n,e))}function Cb(n,e,r){tz(n,e),e.set(n,r)}function kb(n,e,r){return n.set(gk(n,e),r),r}function rz(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,uz(i.key),i)}}function iz(n,e,r){return e&&rz(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function sz(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function az(n){return ez(n)||sz(n)||cz(n)||oz()}function lz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function uz(n){var e=lz(n,"string");return typeof e=="symbol"?e:e+""}function cz(n,e){if(n){if(typeof n=="string")return Ky(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ky(n,e):void 0}}var hz=123,fz=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},yk=function(e,r,i){return(e<<16)+(r<<8)+i},dz=function(e){var r=Ve(e).toRgb(),i=r.r,s=r.g,o=r.b;return yk(i,s,o)},Ab=function(e,r){return e*hz%Math.pow(2,r)},ia=new WeakMap,hs=new WeakMap,pz=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;nz(this,n),Cb(this,ia,void 0),Cb(this,hs,void 0),kb(hs,this,e),this.reset()}return iz(n,[{key:"reset",value:function(){kb(ia,this,["__reserved for background__"])}},{key:"register",value:function(r){if(jr(ia,this).length>=Math.pow(2,24-jr(hs,this)))return null;var i=jr(ia,this).length,s=Ab(i,jr(hs,this)),o=fz(i+(s<<24-jr(hs,this)));return jr(ia,this).push(r),o}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?dz(r):yk.apply(void 0,az(r));if(!i)return null;var s=i&Math.pow(2,24-jr(hs,this))-1,o=i>>24-jr(hs,this)&Math.pow(2,jr(hs,this))-1;return Ab(s,jr(hs,this))!==o||s>=jr(ia,this).length?null:jr(ia,this)[s]}}])}(),Ph,Pt,vk,_k,ua,Nb,wk,xk,bk,o_,Wy,Gy,uh={},Ek=[],mz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Zp=Array.isArray;function zi(n,e){for(var r in e)n[r]=e[r];return n}function a_(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function gz(n,e,r){var i,s,o,a={};for(o in e)o=="key"?i=e[o]:o=="ref"?s=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Ph.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return Sc(n,a,i,s,null)}function Sc(n,e,r,i,s){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++vk,__i:-1,__u:0};return s==null&&Pt.vnode!=null&&Pt.vnode(o),o}function em(n){return n.children}function ed(n,e){this.props=n,this.context=e}function au(n,e){if(e==null)return n.__?au(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?au(n):null}function Tk(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Tk(n)}}function Rb(n){(!n.__d&&(n.__d=!0)&&ua.push(n)&&!rp.__r++||Nb!=Pt.debounceRendering)&&((Nb=Pt.debounceRendering)||wk)(rp)}function rp(){for(var n,e,r,i,s,o,a,l=1;ua.length;)ua.length>l&&ua.sort(xk),n=ua.shift(),l=ua.length,n.__d&&(r=void 0,i=void 0,s=(i=(e=n).__v).__e,o=[],a=[],e.__P&&((r=zi({},i)).__v=i.__v+1,Pt.vnode&&Pt.vnode(r),l_(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[s]:null,o,s??au(i),!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,Ck(o,r,a),i.__e=i.__=null,r.__e!=s&&Tk(r)));rp.__r=0}function Ik(n,e,r,i,s,o,a,l,u,c,h){var p,m,v,w,b,S,E,I=i&&i.__k||Ek,R=e.length;for(u=yz(r,e,I,u,R),p=0;p<R;p++)(v=r.__k[p])!=null&&(m=v.__i==-1?uh:I[v.__i]||uh,v.__i=p,S=l_(n,v,m,s,o,a,l,u,c,h),w=v.__e,v.ref&&m.ref!=v.ref&&(m.ref&&u_(m.ref,null,v),h.push(v.ref,v.__c||w,v)),b==null&&w!=null&&(b=w),(E=!!(4&v.__u))||m.__k===v.__k?u=Sk(v,u,n,E):typeof v.type=="function"&&S!==void 0?u=S:w&&(u=w.nextSibling),v.__u&=-7);return r.__e=b,u}function yz(n,e,r,i,s){var o,a,l,u,c,h=r.length,p=h,m=0;for(n.__k=new Array(s),o=0;o<s;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[o]=Sc(null,a,null,null,null):Zp(a)?a=n.__k[o]=Sc(em,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=n.__k[o]=Sc(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[o]=a,u=o+m,a.__=n,a.__b=n.__b+1,l=null,(c=a.__i=vz(a,r,u,p))!=-1&&(p--,(l=r[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(s>h?m--:s<h&&m++),typeof a.type!="function"&&(a.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,a.__u|=4))):n.__k[o]=null;if(p)for(o=0;o<h;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=au(l)),Ak(l,l));return i}function Sk(n,e,r,i){var s,o;if(typeof n.type=="function"){for(s=n.__k,o=0;s&&o<s.length;o++)s[o]&&(s[o].__=n,e=Sk(s[o],e,r,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=au(n)),r.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function vz(n,e,r,i){var s,o,a,l=n.key,u=n.type,c=e[r],h=c!=null&&(2&c.__u)==0;if(c===null&&l==null||h&&l==c.key&&u==c.type)return r;if(i>(h?1:0)){for(s=r-1,o=r+1;s>=0||o<e.length;)if((c=e[a=s>=0?s--:o++])!=null&&!(2&c.__u)&&l==c.key&&u==c.type)return a}return-1}function Pb(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||mz.test(e)?r:r+"px"}function xf(n,e,r,i,s){var o,a;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||Pb(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||Pb(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(bk,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=o_,n.addEventListener(e,o?Gy:Wy,o)):n.removeEventListener(e,o?Gy:Wy,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function Ob(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=o_++;else if(e.t<r.u)return;return r(Pt.event?Pt.event(e):e)}}}function l_(n,e,r,i,s,o,a,l,u,c){var h,p,m,v,w,b,S,E,I,R,P,M,L,k,C,D,V,U=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),o=[l=e.__e=r.__e]),(h=Pt.__b)&&h(e);e:if(typeof U=="function")try{if(E=e.props,I="prototype"in U&&U.prototype.render,R=(h=U.contextType)&&i[h.__c],P=h?R?R.props.value:h.__:i,r.__c?S=(p=e.__c=r.__c).__=p.__E:(I?e.__c=p=new U(E,P):(e.__c=p=new ed(E,P),p.constructor=U,p.render=wz),R&&R.sub(p),p.state||(p.state={}),p.__n=i,m=p.__d=!0,p.__h=[],p._sb=[]),I&&p.__s==null&&(p.__s=p.state),I&&U.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=zi({},p.__s)),zi(p.__s,U.getDerivedStateFromProps(E,p.__s))),v=p.props,w=p.state,p.__v=e,m)I&&U.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),I&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(I&&U.getDerivedStateFromProps==null&&E!==v&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(E,P),e.__v==r.__v||!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(E,p.__s,P)===!1){for(e.__v!=r.__v&&(p.props=E,p.state=p.__s,p.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(B){B&&(B.__=e)}),M=0;M<p._sb.length;M++)p.__h.push(p._sb[M]);p._sb=[],p.__h.length&&a.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(E,p.__s,P),I&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(v,w,b)})}if(p.context=P,p.props=E,p.__P=n,p.__e=!1,L=Pt.__r,k=0,I){for(p.state=p.__s,p.__d=!1,L&&L(e),h=p.render(p.props,p.state,p.context),C=0;C<p._sb.length;C++)p.__h.push(p._sb[C]);p._sb=[]}else do p.__d=!1,L&&L(e),h=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++k<25);p.state=p.__s,p.getChildContext!=null&&(i=zi(zi({},i),p.getChildContext())),I&&!m&&p.getSnapshotBeforeUpdate!=null&&(b=p.getSnapshotBeforeUpdate(v,w)),D=h,h!=null&&h.type===em&&h.key==null&&(D=kk(h.props.children)),l=Ik(n,Zp(D)?D:[D],e,r,i,s,o,a,l,u,c),p.base=e.__e,e.__u&=-161,p.__h.length&&a.push(p),S&&(p.__E=p.__=null)}catch(B){if(e.__v=null,u||o!=null)if(B.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(V=o.length;V--;)a_(o[V]);Qy(e)}else e.__e=r.__e,e.__k=r.__k,B.then||Qy(e);Pt.__e(B,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=_z(r.__e,e,r,i,s,o,a,u,c);return(h=Pt.diffed)&&h(e),128&e.__u?void 0:l}function Qy(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Qy)}function Ck(n,e,r){for(var i=0;i<r.length;i++)u_(r[i],r[++i],r[++i]);Pt.__c&&Pt.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){Pt.__e(o,s.__v)}})}function kk(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:Zp(n)?n.map(kk):zi({},n)}function _z(n,e,r,i,s,o,a,l,u){var c,h,p,m,v,w,b,S=r.props||uh,E=e.props,I=e.type;if(I=="svg"?s="http://www.w3.org/2000/svg":I=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((v=o[c])&&"setAttribute"in v==!!I&&(I?v.localName==I:v.nodeType==3)){n=v,o[c]=null;break}}if(n==null){if(I==null)return document.createTextNode(E);n=document.createElementNS(s,I,E.is&&E),l&&(Pt.__m&&Pt.__m(e,o),l=!1),o=null}if(I==null)S===E||l&&n.data==E||(n.data=E);else{if(o=o&&Ph.call(n.childNodes),!l&&o!=null)for(S={},c=0;c<n.attributes.length;c++)S[(v=n.attributes[c]).name]=v.value;for(c in S)if(v=S[c],c!="children"){if(c=="dangerouslySetInnerHTML")p=v;else if(!(c in E)){if(c=="value"&&"defaultValue"in E||c=="checked"&&"defaultChecked"in E)continue;xf(n,c,null,v,s)}}for(c in E)v=E[c],c=="children"?m=v:c=="dangerouslySetInnerHTML"?h=v:c=="value"?w=v:c=="checked"?b=v:l&&typeof v!="function"||S[c]===v||xf(n,c,v,S[c],s);if(h)l||p&&(h.__html==p.__html||h.__html==n.innerHTML)||(n.innerHTML=h.__html),e.__k=[];else if(p&&(n.innerHTML=""),Ik(e.type=="template"?n.content:n,Zp(m)?m:[m],e,r,i,I=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,a,o?o[0]:r.__k&&au(r,0),l,u),o!=null)for(c=o.length;c--;)a_(o[c]);l||(c="value",I=="progress"&&w==null?n.removeAttribute("value"):w!=null&&(w!==n[c]||I=="progress"&&!w||I=="option"&&w!=S[c])&&xf(n,c,w,S[c],s),c="checked",b!=null&&b!=n[c]&&xf(n,c,b,S[c],s))}return n}function u_(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(s){Pt.__e(s,r)}}function Ak(n,e,r){var i,s;if(Pt.unmount&&Pt.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||u_(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){Pt.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(s=0;s<i.length;s++)i[s]&&Ak(i[s],e,r||typeof n.type!="function");r||a_(n.__e),n.__c=n.__=n.__e=void 0}function wz(n,e,r){return this.constructor(n,r)}function xz(n,e,r){var i,s,o,a;e==document&&(e=document.documentElement),Pt.__&&Pt.__(n,e),s=(i=!1)?null:e.__k,o=[],a=[],l_(e,n=e.__k=gz(em,null,[n]),s||uh,uh,e.namespaceURI,s?null:e.firstChild?Ph.call(e.childNodes):null,o,s?s.__e:e.firstChild,i,a),Ck(o,n,a)}function Nk(n,e,r){var i,s,o,a,l=zi({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?s=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Ph.call(arguments,2):r),Sc(n.type,l,i||n.key,s||n.ref,null)}Ph=Ek.slice,Pt={__e:function(n,e,r,i){for(var s,o,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,i||{}),a=s.__d),a)return s.__E=s}catch(l){n=l}throw n}},vk=0,_k=function(n){return n!=null&&n.constructor===void 0},ed.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=zi({},this.state),typeof n=="function"&&(n=n(zi({},r),this.props)),n&&zi(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),Rb(this))},ed.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Rb(this))},ed.prototype.render=em,ua=[],wk=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xk=function(n,e){return n.__v.__b-e.__v.__b},rp.__r=0,bk=/(PointerCapture)$|Capture$/i,o_=0,Wy=Ob(!1),Gy=Ob(!0);function jb(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function bz(n){if(Array.isArray(n))return n}function Ez(n,e,r){return(e=Az(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Tz(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(h){c=!0,s=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function Iz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Db(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function Sz(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Db(Object(r),!0).forEach(function(i){Ez(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Db(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Cz(n,e){return bz(n)||Tz(n,e)||Nz(n,e)||Iz()}function kz(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Az(n){var e=kz(n,"string");return typeof e=="symbol"?e:e+""}function ip(n){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(n)}function Nz(n,e){if(n){if(typeof n=="string")return jb(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jb(n,e):void 0}}var Yy=function(e){if(ip(e)!=="object")return e;var r=Nk(e);if(r.props){var i;r.props=Sz({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(Yy):Yy(r.props.children))}return r},Rz=function(e){return _k(Nk(e))},Pz=function(e,r){delete r.__k,xz(Yy(e),r)};function Oz(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var jz=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;Oz(jz);var Dz=s_({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.style,o=s===void 0?{}:s,a=!!e&&ip(e)==="object"&&!!e.node&&typeof e.node=="function",l=Ur(a?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(c){var h=Cz(c,2),p=h[0],m=h[1];return r.tooltipEl.style(p,m)}),r.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(u),function(c){r.mouseInside=!0;var h=Fi(c),p=l.node(),m=p.offsetWidth,v=p.offsetHeight,w=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/m*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?v>130&&v-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(w.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):Rz(e.content)?(e.tooltipEl.text(""),Pz(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function Mz(n,e,r){var i,s=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var a,l=i.length,u,c=0,h=0,p=0;for(a=0;a<l;++a)u=i[a],c+=u.x||0,h+=u.y||0,p+=u.z||0;for(c=(c/l-n)*s,h=(h/l-e)*s,p=(p/l-r)*s,a=0;a<l;++a)u=i[a],c&&(u.x-=c),h&&(u.y-=h),p&&(u.z-=p)}return o.initialize=function(a){i=a},o.x=function(a){return arguments.length?(n=+a,o):n},o.y=function(a){return arguments.length?(e=+a,o):e},o.z=function(a){return arguments.length?(r=+a,o):r},o.strength=function(a){return arguments.length?(s=+a,o):s},o}function Lz(n){const e=+this._x.call(null,n);return Rk(this.cover(e),e,n)}function Rk(n,e,r){if(isNaN(e))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._x1,u,c,h,p,m;if(!s)return n._root=o,n;for(;s.length;)if((h=e>=(u=(a+l)/2))?a=u:l=u,i=s,!(s=s[p=+h]))return i[p]=o,n;if(c=+n._x.call(null,s.data),e===c)return o.next=s,i?i[p]=o:n._root=o,n;do i=i?i[p]=new Array(2):n._root=new Array(2),(h=e>=(u=(a+l)/2))?a=u:l=u;while((p=+h)==(m=+(c>=u)));return i[m]=s,i[p]=o,n}function Vz(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,s=-1/0;for(let o=0,a;o<e;++o)isNaN(a=+this._x.call(null,n[o]))||(r[o]=a,a<i&&(i=a),a>s&&(s=a));if(i>s)return this;this.cover(i).cover(s);for(let o=0;o<e;++o)Rk(this,r[o],n[o]);return this}function Fz(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,s=this._root,o,a;e>n||n>=r;)switch(a=+(n<e),o=new Array(2),o[a]=s,s=o,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=r,this}function Uz(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function zz(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Is(n,e,r){this.node=n,this.x0=e,this.x1=r}function $z(n,e){var r,i=this._x0,s,o,a=this._x1,l=[],u=this._root,c,h;for(u&&l.push(new Is(u,i,a)),e==null?e=1/0:(i=n-e,a=n+e);c=l.pop();)if(!(!(u=c.node)||(s=c.x0)>a||(o=c.x1)<i))if(u.length){var p=(s+o)/2;l.push(new Is(u[1],p,o),new Is(u[0],s,p)),(h=+(n>=p))&&(c=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=c)}else{var m=Math.abs(n-+this._x.call(null,u.data));m<e&&(e=m,i=n-m,a=n+m,r=u.data)}return r}function Bz(n){if(isNaN(u=+this._x.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._x1,u,c,h,p,m;if(!r)return this;if(r.length)for(;;){if((h=u>=(c=(a+l)/2))?a=c:l=c,e=r,!(r=r[p=+h]))return this;if(!r.length)break;e[p+1&1]&&(i=e,m=p)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[p]=o:delete e[p],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=o,this)}function qz(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function Hz(){return this._root}function Kz(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Wz(n){var e=[],r,i=this._root,s,o,a;for(i&&e.push(new Is(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.x1)&&i.length){var l=(o+a)/2;(s=i[1])&&e.push(new Is(s,l,a)),(s=i[0])&&e.push(new Is(s,o,l))}return this}function Gz(n){var e=[],r=[],i;for(this._root&&e.push(new Is(this._root,this._x0,this._x1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.x1,u=(a+l)/2;(o=s[0])&&e.push(new Is(o,a,u)),(o=s[1])&&e.push(new Is(o,u,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function Qz(n){return n[0]}function Yz(n){return arguments.length?(this._x=n,this):this._x}function Pk(n,e){var r=new c_(e??Qz,NaN,NaN);return n==null?r:r.addAll(n)}function c_(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function Mb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var sr=Pk.prototype=c_.prototype;sr.copy=function(){var n=new c_(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Mb(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var s=0;s<2;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(2)}):e.target[s]=Mb(i));return n};sr.add=Lz;sr.addAll=Vz;sr.cover=Fz;sr.data=Uz;sr.extent=zz;sr.find=$z;sr.remove=Bz;sr.removeAll=qz;sr.root=Hz;sr.size=Kz;sr.visit=Wz;sr.visitAfter=Gz;sr.x=Yz;function Xz(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return Ok(this.cover(e,r),e,r,n)}function Ok(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,u=n._y0,c=n._x1,h=n._y1,p,m,v,w,b,S,E,I;if(!o)return n._root=a,n;for(;o.length;)if((b=e>=(p=(l+c)/2))?l=p:c=p,(S=r>=(m=(u+h)/2))?u=m:h=m,s=o,!(o=o[E=S<<1|b]))return s[E]=a,n;if(v=+n._x.call(null,o.data),w=+n._y.call(null,o.data),e===v&&r===w)return a.next=o,s?s[E]=a:n._root=a,n;do s=s?s[E]=new Array(4):n._root=new Array(4),(b=e>=(p=(l+c)/2))?l=p:c=p,(S=r>=(m=(u+h)/2))?u=m:h=m;while((E=S<<1|b)===(I=(w>=m)<<1|v>=p));return s[I]=o,s[E]=a,n}function Jz(n){var e,r,i=n.length,s,o,a=new Array(i),l=new Array(i),u=1/0,c=1/0,h=-1/0,p=-1/0;for(r=0;r<i;++r)isNaN(s=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=s,l[r]=o,s<u&&(u=s),s>h&&(h=s),o<c&&(c=o),o>p&&(p=o));if(u>h||c>p)return this;for(this.cover(u,c).cover(h,p),r=0;r<i;++r)Ok(this,a[r],l[r],n[r]);return this}function Zz(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(r))s=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var a=s-r||1,l=this._root,u,c;r>n||n>=s||i>e||e>=o;)switch(c=(e<i)<<1|n<r,u=new Array(4),u[c]=l,l=u,a*=2,c){case 0:s=r+a,o=i+a;break;case 1:r=s-a,o=i+a;break;case 2:s=r+a,i=o-a;break;case 3:r=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=s,this._y1=o,this}function e$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function t$(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function qn(n,e,r,i,s){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=s}function n$(n,e,r){var i,s=this._x0,o=this._y0,a,l,u,c,h=this._x1,p=this._y1,m=[],v=this._root,w,b;for(v&&m.push(new qn(v,s,o,h,p)),r==null?r=1/0:(s=n-r,o=e-r,h=n+r,p=e+r,r*=r);w=m.pop();)if(!(!(v=w.node)||(a=w.x0)>h||(l=w.y0)>p||(u=w.x1)<s||(c=w.y1)<o))if(v.length){var S=(a+u)/2,E=(l+c)/2;m.push(new qn(v[3],S,E,u,c),new qn(v[2],a,E,S,c),new qn(v[1],S,l,u,E),new qn(v[0],a,l,S,E)),(b=(e>=E)<<1|n>=S)&&(w=m[m.length-1],m[m.length-1]=m[m.length-1-b],m[m.length-1-b]=w)}else{var I=n-+this._x.call(null,v.data),R=e-+this._y.call(null,v.data),P=I*I+R*R;if(P<r){var M=Math.sqrt(r=P);s=n-M,o=e-M,h=n+M,p=e+M,i=v.data}}return i}function r$(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,c=this._y1,h,p,m,v,w,b,S,E;if(!r)return this;if(r.length)for(;;){if((w=h>=(m=(a+u)/2))?a=m:u=m,(b=p>=(v=(l+c)/2))?l=v:c=v,e=r,!(r=r[S=b<<1|w]))return this;if(!r.length)break;(e[S+1&3]||e[S+2&3]||e[S+3&3])&&(i=e,E=S)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[S]=o:delete e[S],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[E]=r:this._root=r),this):(this._root=o,this)}function i$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function s$(){return this._root}function o$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function a$(n){var e=[],r,i=this._root,s,o,a,l,u;for(i&&e.push(new qn(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.x1,u=r.y1)&&i.length){var c=(o+l)/2,h=(a+u)/2;(s=i[3])&&e.push(new qn(s,c,h,l,u)),(s=i[2])&&e.push(new qn(s,o,h,c,u)),(s=i[1])&&e.push(new qn(s,c,a,l,h)),(s=i[0])&&e.push(new qn(s,o,a,c,h))}return this}function l$(n){var e=[],r=[],i;for(this._root&&e.push(new qn(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,c=i.y1,h=(a+u)/2,p=(l+c)/2;(o=s[0])&&e.push(new qn(o,a,l,h,p)),(o=s[1])&&e.push(new qn(o,h,l,u,p)),(o=s[2])&&e.push(new qn(o,a,p,h,c)),(o=s[3])&&e.push(new qn(o,h,p,u,c))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function u$(n){return n[0]}function c$(n){return arguments.length?(this._x=n,this):this._x}function h$(n){return n[1]}function f$(n){return arguments.length?(this._y=n,this):this._y}function jk(n,e,r){var i=new h_(e??u$,r??h$,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function h_(n,e,r,i,s,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}function Lb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Qn=jk.prototype=h_.prototype;Qn.copy=function(){var n=new h_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Lb(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=Lb(i));return n};Qn.add=Xz;Qn.addAll=Jz;Qn.cover=Zz;Qn.data=e$;Qn.extent=t$;Qn.find=n$;Qn.remove=r$;Qn.removeAll=i$;Qn.root=s$;Qn.size=o$;Qn.visit=a$;Qn.visitAfter=l$;Qn.x=c$;Qn.y=f$;function d$(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return Dk(this.cover(e,r,i),e,r,i,n)}function Dk(n,e,r,i,s){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,a=n._root,l={data:s},u=n._x0,c=n._y0,h=n._z0,p=n._x1,m=n._y1,v=n._z1,w,b,S,E,I,R,P,M,L,k,C;if(!a)return n._root=l,n;for(;a.length;)if((P=e>=(w=(u+p)/2))?u=w:p=w,(M=r>=(b=(c+m)/2))?c=b:m=b,(L=i>=(S=(h+v)/2))?h=S:v=S,o=a,!(a=a[k=L<<2|M<<1|P]))return o[k]=l,n;if(E=+n._x.call(null,a.data),I=+n._y.call(null,a.data),R=+n._z.call(null,a.data),e===E&&r===I&&i===R)return l.next=a,o?o[k]=l:n._root=l,n;do o=o?o[k]=new Array(8):n._root=new Array(8),(P=e>=(w=(u+p)/2))?u=w:p=w,(M=r>=(b=(c+m)/2))?c=b:m=b,(L=i>=(S=(h+v)/2))?h=S:v=S;while((k=L<<2|M<<1|P)===(C=(R>=S)<<2|(I>=b)<<1|E>=w));return o[C]=a,o[k]=l,n}function p$(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),s=new Float64Array(e);let o=1/0,a=1/0,l=1/0,u=-1/0,c=-1/0,h=-1/0;for(let p=0,m,v,w,b;p<e;++p)isNaN(v=+this._x.call(null,m=n[p]))||isNaN(w=+this._y.call(null,m))||isNaN(b=+this._z.call(null,m))||(r[p]=v,i[p]=w,s[p]=b,v<o&&(o=v),v>u&&(u=v),w<a&&(a=w),w>c&&(c=w),b<l&&(l=b),b>h&&(h=b));if(o>u||a>c||l>h)return this;this.cover(o,a,l).cover(u,c,h);for(let p=0;p<e;++p)Dk(this,r[p],i[p],s[p],n[p]);return this}function m$(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,s=this._y0,o=this._z0,a=this._x1,l=this._y1,u=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(s=Math.floor(e))+1,u=(o=Math.floor(r))+1;else{for(var c=a-i||1,h=this._root,p,m;i>n||n>=a||s>e||e>=l||o>r||r>=u;)switch(m=(r<o)<<2|(e<s)<<1|n<i,p=new Array(8),p[m]=h,h=p,c*=2,m){case 0:a=i+c,l=s+c,u=o+c;break;case 1:i=a-c,l=s+c,u=o+c;break;case 2:a=i+c,s=l-c,u=o+c;break;case 3:i=a-c,s=l-c,u=o+c;break;case 4:a=i+c,l=s+c,o=u-c;break;case 5:i=a-c,l=s+c,o=u-c;break;case 6:a=i+c,s=l-c,o=u-c;break;case 7:i=a-c,s=l-c,o=u-c;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this}function g$(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function y$(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function xt(n,e,r,i,s,o,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=s,this.y1=o,this.z1=a}function v$(n,e,r,i){var s,o=this._x0,a=this._y0,l=this._z0,u,c,h,p,m,v,w=this._x1,b=this._y1,S=this._z1,E=[],I=this._root,R,P;for(I&&E.push(new xt(I,o,a,l,w,b,S)),i==null?i=1/0:(o=n-i,a=e-i,l=r-i,w=n+i,b=e+i,S=r+i,i*=i);R=E.pop();)if(!(!(I=R.node)||(u=R.x0)>w||(c=R.y0)>b||(h=R.z0)>S||(p=R.x1)<o||(m=R.y1)<a||(v=R.z1)<l))if(I.length){var M=(u+p)/2,L=(c+m)/2,k=(h+v)/2;E.push(new xt(I[7],M,L,k,p,m,v),new xt(I[6],u,L,k,M,m,v),new xt(I[5],M,c,k,p,L,v),new xt(I[4],u,c,k,M,L,v),new xt(I[3],M,L,h,p,m,k),new xt(I[2],u,L,h,M,m,k),new xt(I[1],M,c,h,p,L,k),new xt(I[0],u,c,h,M,L,k)),(P=(r>=k)<<2|(e>=L)<<1|n>=M)&&(R=E[E.length-1],E[E.length-1]=E[E.length-1-P],E[E.length-1-P]=R)}else{var C=n-+this._x.call(null,I.data),D=e-+this._y.call(null,I.data),V=r-+this._z.call(null,I.data),U=C*C+D*D+V*V;if(U<i){var B=Math.sqrt(i=U);o=n-B,a=e-B,l=r-B,w=n+B,b=e+B,S=r+B,s=I.data}}return s}const _$=(n,e,r,i,s,o)=>Math.sqrt((n-i)**2+(e-s)**2+(r-o)**2);function w$(n,e,r,i){const s=[],o=n-i,a=e-i,l=r-i,u=n+i,c=e+i,h=r+i;return this.visit((p,m,v,w,b,S,E)=>{if(!p.length)do{const I=p.data;_$(n,e,r,this._x(I),this._y(I),this._z(I))<=i&&s.push(I)}while(p=p.next);return m>u||v>c||w>h||b<o||S<a||E<l}),s}function x$(n){if(isNaN(m=+this._x.call(null,n))||isNaN(v=+this._y.call(null,n))||isNaN(w=+this._z.call(null,n)))return this;var e,r=this._root,i,s,o,a=this._x0,l=this._y0,u=this._z0,c=this._x1,h=this._y1,p=this._z1,m,v,w,b,S,E,I,R,P,M,L;if(!r)return this;if(r.length)for(;;){if((I=m>=(b=(a+c)/2))?a=b:c=b,(R=v>=(S=(l+h)/2))?l=S:h=S,(P=w>=(E=(u+p)/2))?u=E:p=E,e=r,!(r=r[M=P<<2|R<<1|I]))return this;if(!r.length)break;(e[M+1&7]||e[M+2&7]||e[M+3&7]||e[M+4&7]||e[M+5&7]||e[M+6&7]||e[M+7&7])&&(i=e,L=M)}for(;r.data!==n;)if(s=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,s?(o?s.next=o:delete s.next,this):e?(o?e[M]=o:delete e[M],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[L]=r:this._root=r),this):(this._root=o,this)}function b$(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function E$(){return this._root}function T$(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function I$(n){var e=[],r,i=this._root,s,o,a,l,u,c,h;for(i&&e.push(new xt(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,a=r.y0,l=r.z0,u=r.x1,c=r.y1,h=r.z1)&&i.length){var p=(o+u)/2,m=(a+c)/2,v=(l+h)/2;(s=i[7])&&e.push(new xt(s,p,m,v,u,c,h)),(s=i[6])&&e.push(new xt(s,o,m,v,p,c,h)),(s=i[5])&&e.push(new xt(s,p,a,v,u,m,h)),(s=i[4])&&e.push(new xt(s,o,a,v,p,m,h)),(s=i[3])&&e.push(new xt(s,p,m,l,u,c,v)),(s=i[2])&&e.push(new xt(s,o,m,l,p,c,v)),(s=i[1])&&e.push(new xt(s,p,a,l,u,m,v)),(s=i[0])&&e.push(new xt(s,o,a,l,p,m,v))}return this}function S$(n){var e=[],r=[],i;for(this._root&&e.push(new xt(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.z0,c=i.x1,h=i.y1,p=i.z1,m=(a+c)/2,v=(l+h)/2,w=(u+p)/2;(o=s[0])&&e.push(new xt(o,a,l,u,m,v,w)),(o=s[1])&&e.push(new xt(o,m,l,u,c,v,w)),(o=s[2])&&e.push(new xt(o,a,v,u,m,h,w)),(o=s[3])&&e.push(new xt(o,m,v,u,c,h,w)),(o=s[4])&&e.push(new xt(o,a,l,w,m,v,p)),(o=s[5])&&e.push(new xt(o,m,l,w,c,v,p)),(o=s[6])&&e.push(new xt(o,a,v,w,m,h,p)),(o=s[7])&&e.push(new xt(o,m,v,w,c,h,p))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function C$(n){return n[0]}function k$(n){return arguments.length?(this._x=n,this):this._x}function A$(n){return n[1]}function N$(n){return arguments.length?(this._y=n,this):this._y}function R$(n){return n[2]}function P$(n){return arguments.length?(this._z=n,this):this._z}function Mk(n,e,r,i){var s=new f_(e??C$,r??A$,i??R$,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function f_(n,e,r,i,s,o,a,l,u){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=s,this._z0=o,this._x1=a,this._y1=l,this._z1=u,this._root=void 0}function Vb(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var bn=Mk.prototype=f_.prototype;bn.copy=function(){var n=new f_(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Vb(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var s=0;s<8;++s)(i=e.source[s])&&(i.length?r.push({source:i,target:e.target[s]=new Array(8)}):e.target[s]=Vb(i));return n};bn.add=d$;bn.addAll=p$;bn.cover=m$;bn.data=g$;bn.extent=y$;bn.find=v$;bn.findAllWithinRadius=w$;bn.remove=x$;bn.removeAll=b$;bn.root=E$;bn.size=T$;bn.visit=I$;bn.visitAfter=S$;bn.x=k$;bn.y=N$;bn.z=P$;function bs(n){return function(){return n}}function ms(n){return(n()-.5)*1e-6}function O$(n){return n.index}function Fb(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function j$(n){var e=O$,r=m,i,s=bs(30),o,a,l,u,c,h,p=1;n==null&&(n=[]);function m(E){return 1/Math.min(u[E.source.index],u[E.target.index])}function v(E){for(var I=0,R=n.length;I<p;++I)for(var P=0,M,L,k,C=0,D=0,V=0,U,B;P<R;++P)M=n[P],L=M.source,k=M.target,C=k.x+k.vx-L.x-L.vx||ms(h),l>1&&(D=k.y+k.vy-L.y-L.vy||ms(h)),l>2&&(V=k.z+k.vz-L.z-L.vz||ms(h)),U=Math.sqrt(C*C+D*D+V*V),U=(U-o[P])/U*E*i[P],C*=U,D*=U,V*=U,k.vx-=C*(B=c[P]),l>1&&(k.vy-=D*B),l>2&&(k.vz-=V*B),L.vx+=C*(B=1-B),l>1&&(L.vy+=D*B),l>2&&(L.vz+=V*B)}function w(){if(a){var E,I=a.length,R=n.length,P=new Map(a.map((L,k)=>[e(L,k,a),L])),M;for(E=0,u=new Array(I);E<R;++E)M=n[E],M.index=E,typeof M.source!="object"&&(M.source=Fb(P,M.source)),typeof M.target!="object"&&(M.target=Fb(P,M.target)),u[M.source.index]=(u[M.source.index]||0)+1,u[M.target.index]=(u[M.target.index]||0)+1;for(E=0,c=new Array(R);E<R;++E)M=n[E],c[E]=u[M.source.index]/(u[M.source.index]+u[M.target.index]);i=new Array(R),b(),o=new Array(R),S()}}function b(){if(a)for(var E=0,I=n.length;E<I;++E)i[E]=+r(n[E],E,n)}function S(){if(a)for(var E=0,I=n.length;E<I;++E)o[E]=+s(n[E],E,n)}return v.initialize=function(E,...I){a=E,h=I.find(R=>typeof R=="function")||Math.random,l=I.find(R=>[1,2,3].includes(R))||2,w()},v.links=function(E){return arguments.length?(n=E,w(),v):n},v.id=function(E){return arguments.length?(e=E,v):e},v.iterations=function(E){return arguments.length?(p=+E,v):p},v.strength=function(E){return arguments.length?(r=typeof E=="function"?E:bs(+E),b(),v):r},v.distance=function(E){return arguments.length?(s=typeof E=="function"?E:bs(+E),S(),v):s},v}const D$=1664525,M$=1013904223,Ub=4294967296;function L$(){let n=1;return()=>(n=(D$*n+M$)%Ub)/Ub}var zb=3;function sg(n){return n.x}function $b(n){return n.y}function V$(n){return n.z}var F$=10,U$=Math.PI*(3-Math.sqrt(5)),z$=Math.PI*20/(9+Math.sqrt(221));function $$(n,e){e=e||2;var r=Math.min(zb,Math.max(1,Math.round(e))),i,s=1,o=.001,a=1-Math.pow(o,1/300),l=0,u=.6,c=new Map,h=t_(v),p=Nh("tick","end"),m=L$();n==null&&(n=[]);function v(){w(),p.call("tick",i),s<o&&(h.stop(),p.call("end",i))}function w(E){var I,R=n.length,P;E===void 0&&(E=1);for(var M=0;M<E;++M)for(s+=(l-s)*a,c.forEach(function(L){L(s)}),I=0;I<R;++I)P=n[I],P.fx==null?P.x+=P.vx*=u:(P.x=P.fx,P.vx=0),r>1&&(P.fy==null?P.y+=P.vy*=u:(P.y=P.fy,P.vy=0)),r>2&&(P.fz==null?P.z+=P.vz*=u:(P.z=P.fz,P.vz=0));return i}function b(){for(var E=0,I=n.length,R;E<I;++E){if(R=n[E],R.index=E,R.fx!=null&&(R.x=R.fx),R.fy!=null&&(R.y=R.fy),R.fz!=null&&(R.z=R.fz),isNaN(R.x)||r>1&&isNaN(R.y)||r>2&&isNaN(R.z)){var P=F$*(r>2?Math.cbrt(.5+E):r>1?Math.sqrt(.5+E):E),M=E*U$,L=E*z$;r===1?R.x=P:r===2?(R.x=P*Math.cos(M),R.y=P*Math.sin(M)):(R.x=P*Math.sin(M)*Math.cos(L),R.y=P*Math.cos(M),R.z=P*Math.sin(M)*Math.sin(L))}(isNaN(R.vx)||r>1&&isNaN(R.vy)||r>2&&isNaN(R.vz))&&(R.vx=0,r>1&&(R.vy=0),r>2&&(R.vz=0))}}function S(E){return E.initialize&&E.initialize(n,m,r),E}return b(),i={tick:w,restart:function(){return h.restart(v),i},stop:function(){return h.stop(),i},numDimensions:function(E){return arguments.length?(r=Math.min(zb,Math.max(1,Math.round(E))),c.forEach(S),i):r},nodes:function(E){return arguments.length?(n=E,b(),c.forEach(S),i):n},alpha:function(E){return arguments.length?(s=+E,i):s},alphaMin:function(E){return arguments.length?(o=+E,i):o},alphaDecay:function(E){return arguments.length?(a=+E,i):+a},alphaTarget:function(E){return arguments.length?(l=+E,i):l},velocityDecay:function(E){return arguments.length?(u=1-E,i):1-u},randomSource:function(E){return arguments.length?(m=E,c.forEach(S),i):m},force:function(E,I){return arguments.length>1?(I==null?c.delete(E):c.set(E,S(I)),i):c.get(E)},find:function(){var E=Array.prototype.slice.call(arguments),I=E.shift()||0,R=(r>1?E.shift():null)||0,P=(r>2?E.shift():null)||0,M=E.shift()||1/0,L=0,k=n.length,C,D,V,U,B,j;for(M*=M,L=0;L<k;++L)B=n[L],C=I-B.x,D=R-(B.y||0),V=P-(B.z||0),U=C*C+D*D+V*V,U<M&&(j=B,M=U);return j},on:function(E,I){return arguments.length>1?(p.on(E,I),i):p.on(E)}}}function B$(){var n,e,r,i,s,o=bs(-30),a,l=1,u=1/0,c=.81;function h(w){var b,S=n.length,E=(e===1?Pk(n,sg):e===2?jk(n,sg,$b):e===3?Mk(n,sg,$b,V$):null).visitAfter(m);for(s=w,b=0;b<S;++b)r=n[b],E.visit(v)}function p(){if(n){var w,b=n.length,S;for(a=new Array(b),w=0;w<b;++w)S=n[w],a[S.index]=+o(S,w,n)}}function m(w){var b=0,S,E,I=0,R,P,M,L,k=w.length;if(k){for(R=P=M=L=0;L<k;++L)(S=w[L])&&(E=Math.abs(S.value))&&(b+=S.value,I+=E,R+=E*(S.x||0),P+=E*(S.y||0),M+=E*(S.z||0));b*=Math.sqrt(4/k),w.x=R/I,e>1&&(w.y=P/I),e>2&&(w.z=M/I)}else{S=w,S.x=S.data.x,e>1&&(S.y=S.data.y),e>2&&(S.z=S.data.z);do b+=a[S.data.index];while(S=S.next)}w.value=b}function v(w,b,S,E,I){if(!w.value)return!0;var R=[S,E,I][e-1],P=w.x-r.x,M=e>1?w.y-r.y:0,L=e>2?w.z-r.z:0,k=R-b,C=P*P+M*M+L*L;if(k*k/c<C)return C<u&&(P===0&&(P=ms(i),C+=P*P),e>1&&M===0&&(M=ms(i),C+=M*M),e>2&&L===0&&(L=ms(i),C+=L*L),C<l&&(C=Math.sqrt(l*C)),r.vx+=P*w.value*s/C,e>1&&(r.vy+=M*w.value*s/C),e>2&&(r.vz+=L*w.value*s/C)),!0;if(w.length||C>=u)return;(w.data!==r||w.next)&&(P===0&&(P=ms(i),C+=P*P),e>1&&M===0&&(M=ms(i),C+=M*M),e>2&&L===0&&(L=ms(i),C+=L*L),C<l&&(C=Math.sqrt(l*C)));do w.data!==r&&(k=a[w.data.index]*s/C,r.vx+=P*k,e>1&&(r.vy+=M*k),e>2&&(r.vz+=L*k));while(w=w.next)}return h.initialize=function(w,...b){n=w,i=b.find(S=>typeof S=="function")||Math.random,e=b.find(S=>[1,2,3].includes(S))||2,p()},h.strength=function(w){return arguments.length?(o=typeof w=="function"?w:bs(+w),p(),h):o},h.distanceMin=function(w){return arguments.length?(l=w*w,h):Math.sqrt(l)},h.distanceMax=function(w){return arguments.length?(u=w*w,h):Math.sqrt(u)},h.theta=function(w){return arguments.length?(c=w*w,h):Math.sqrt(c)},h}function q$(n,e,r,i){var s,o,a=bs(.1),l,u;typeof n!="function"&&(n=bs(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function c(p){for(var m=0,v=s.length;m<v;++m){var w=s[m],b=w.x-e||1e-6,S=(w.y||0)-r||1e-6,E=(w.z||0)-i||1e-6,I=Math.sqrt(b*b+S*S+E*E),R=(u[m]-I)*l[m]*p/I;w.vx+=b*R,o>1&&(w.vy+=S*R),o>2&&(w.vz+=E*R)}}function h(){if(s){var p,m=s.length;for(l=new Array(m),u=new Array(m),p=0;p<m;++p)u[p]=+n(s[p],p,s),l[p]=isNaN(u[p])?0:+a(s[p],p,s)}}return c.initialize=function(p,...m){s=p,o=m.find(v=>[1,2,3].includes(v))||2,h()},c.strength=function(p){return arguments.length?(a=typeof p=="function"?p:bs(+p),h(),c):a},c.radius=function(p){return arguments.length?(n=typeof p=="function"?p:bs(+p),h(),c):n},c.x=function(p){return arguments.length?(e=+p,c):e},c.y=function(p){return arguments.length?(r=+p,c):r},c.z=function(p){return arguments.length?(i=+p,c):i},c}const{abs:Wu,cos:fs,sin:ul,acos:H$,atan2:Gu,sqrt:Qs,pow:Mr}=Math;function Qu(n){return n<0?-Mr(-n,1/3):Mr(n,1/3)}const Lk=Math.PI,bf=2*Lk,Ys=Lk/2,K$=1e-6,og=Number.MAX_SAFE_INTEGER||9007199254740991,ag=Number.MIN_SAFE_INTEGER||-9007199254740991,W$={x:0,y:0,z:0},we={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Qs(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const s=1-n;let o=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:s*o[0].x+n*o[1].x,y:s*o[0].y+n*o[1].y,t:n};return r&&(l.z=s*o[0].z+n*o[1].z),l}if(i<4){let l=s*s,u=n*n,c,h,p,m=0;i===2?(o=[o[0],o[1],o[2],W$],c=l,h=s*n*2,p=u):i===3&&(c=l*s,h=l*n*3,p=s*u*3,m=n*u);const v={x:c*o[0].x+h*o[1].x+p*o[2].x+m*o[3].x,y:c*o[0].y+h*o[1].y+p*o[2].y+m*o[3].y,t:n};return r&&(v.z=c*o[0].z+h*o[1].z+p*o[2].z+m*o[3].z),v}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const s=1-n,o=r,a=e;let l=o[0],u=o[1],c=o[2],h=o[3],p;if(l*=s,u*=n,a.length===2)return p=l+u,{x:(l*a[0].x+u*a[1].x)/p,y:(l*a[0].y+u*a[1].y)/p,z:i?(l*a[0].z+u*a[1].z)/p:!1,t:n};if(l*=s,u*=2*s,c*=n*n,a.length===3)return p=l+u+c,{x:(l*a[0].x+u*a[1].x+c*a[2].x)/p,y:(l*a[0].y+u*a[1].y+c*a[2].y)/p,z:i?(l*a[0].z+u*a[1].z+c*a[2].z)/p:!1,t:n};if(l*=s,u*=1.5*s,c*=3*s,h*=n*n*n,a.length===4)return p=l+u+c+h,{x:(l*a[0].x+u*a[1].x+c*a[2].x+h*a[3].x)/p,y:(l*a[0].y+u*a[1].y+c*a[2].y+h*a[3].y)/p,z:i?(l*a[0].z+u*a[1].z+c*a[2].z+h*a[3].z)/p:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let l=0,u;l<o;l++)u={x:o*(i[l+1].x-i[l].x),y:o*(i[l+1].y-i[l].y)},e&&(u.z=o*(i[l+1].z-i[l].z)),a.push(u);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||we.approximately(n,e)||we.approximately(n,r)},approximately:function(n,e,r){return Wu(n-e)<=(r||K$)},length:function(n){const r=we.Tvalues.length;let i=0;for(let s=0,o;s<r;s++)o=.5*we.Tvalues[s]+.5,i+=we.Cvalues[s]*we.arcfn(o,n);return .5*i},map:function(n,e,r,i,s){const o=r-e,a=s-i,l=n-e,u=l/o;return i+a*u},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(we.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-n.x,a=r.y-n.y,l=i*a-s*o,u=i*o+s*a;return Gu(l,u)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return Qs(r*r+i*i)},closest:function(n,e){let r=Mr(2,63),i,s;return n.forEach(function(o,a){s=we.dist(e,o),s<r&&(r=s,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Mr(n,e)+Mr(1-n,e),i=r-1;return Wu(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=Mr(1-n,e),i=Mr(n,e)+r;return r/i},lli8:function(n,e,r,i,s,o,a,l){const u=(n*i-e*r)*(s-a)-(n-r)*(s*l-o*a),c=(n*i-e*r)*(o-l)-(e-i)*(s*l-o*a),h=(n-r)*(o-l)-(e-i)*(s-a);return h==0?!1:{x:u/h,y:c/h}},lli4:function(n,e,r,i){const s=n.x,o=n.y,a=e.x,l=e.y,u=r.x,c=r.y,h=i.x,p=i.y;return we.lli8(s,o,a,l,u,c,h,p)},lli:function(n,e){return we.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new It(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=og,r=og,i=ag,s=ag;return n.forEach(function(o){const a=o.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+s)/2,max:s,size:s-r}}},shapeintersections:function(n,e,r,i,s){if(!we.bboxoverlap(e,i))return[];const o=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(u){u.virtual||l.forEach(function(c){if(c.virtual)return;const h=u.intersects(c,s);h.length>0&&(h.c1=u,h.c2=c,h.s1=n,h.s2=r,o.push(h))})}),o},makeshape:function(n,e,r){const i=e.points.length,s=n.points.length,o=we.makeline(e.points[i-1],n.points[0]),a=we.makeline(n.points[s-1],e.points[0]),l={startcap:o,forward:n,back:e,endcap:a,bbox:we.findbbox([o,n,e,a])};return l.intersections=function(u){return we.shapeintersections(l,l.bbox,u,u.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=og,s=ag,o,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,u=r.length;l<u;l++)o=r[l],a=n.get(o),a[e]<i&&(i=a[e]),a[e]>s&&(s=a[e]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,s=-Gu(e.p2.y-i,e.p2.x-r),o=function(a){return{x:(a.x-r)*fs(s)-(a.y-i)*ul(s),y:(a.x-r)*ul(s)+(a.y-i)*fs(s)}};return n.map(o)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=we.align(n,e),s=function(k){return 0<=k&&k<=1};if(r===2){const k=i[0].y,C=i[1].y,D=i[2].y,V=k-2*C+D;if(V!==0){const U=-Qs(C*C-k*D),B=-k+C,j=-(U+B)/V,F=-(-U+B)/V;return[j,F].filter(s)}else if(C!==D&&V===0)return[(2*C-D)/(2*C-2*D)].filter(s);return[]}const o=i[0].y,a=i[1].y,l=i[2].y,u=i[3].y;let c=-o+3*a-3*l+u,h=3*o-6*a+3*l,p=-3*o+3*a,m=o;if(we.approximately(c,0)){if(we.approximately(h,0))return we.approximately(p,0)?[]:[-m/p].filter(s);const k=Qs(p*p-4*h*m),C=2*h;return[(k-p)/C,(-p-k)/C].filter(s)}h/=c,p/=c,m/=c;const v=(3*p-h*h)/3,w=v/3,b=(2*h*h*h-9*h*p+27*m)/27,S=b/2,E=S*S+w*w*w;let I,R,P,M,L;if(E<0){const k=-v/3,C=k*k*k,D=Qs(C),V=-b/(2*D),U=V<-1?-1:V>1?1:V,B=H$(U),j=Qu(D),F=2*j;return P=F*fs(B/3)-h/3,M=F*fs((B+bf)/3)-h/3,L=F*fs((B+2*bf)/3)-h/3,[P,M,L].filter(s)}else{if(E===0)return I=S<0?Qu(-S):-Qu(S),P=2*I-h/3,M=-I-h/3,[P,M].filter(s);{const k=Qs(E);return I=Qu(-S+k),R=Qu(S+k),[I-R-h/3].filter(s)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],s=e-2*r+i;if(s!==0){const o=-Qs(r*r-e*i),a=-e+r,l=-(o+a)/s,u=-(-o+a)/s;return[l,u]}else if(r!==i&&s===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,s){let o,a,l,u,c=0,h=0;const p=we.compute(n,e),m=we.compute(n,r),v=p.x*p.x+p.y*p.y;if(i?(o=Qs(Mr(p.y*m.z-m.y*p.z,2)+Mr(p.z*m.x-m.z*p.x,2)+Mr(p.x*m.y-m.x*p.y,2)),a=Mr(v+p.z*p.z,3/2)):(o=p.x*m.y-p.y*m.x,a=Mr(v,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,h=a/o,!s){const w=we.curvature(n-.001,e,r,i,!0).k,b=we.curvature(n+.001,e,r,i,!0).k;u=(b-c+(c-w))/2,l=(Wu(b-c)+Wu(c-w))/2}return{k:c,r:h,dk:u,adk:l}},inflections:function(n){if(n.length<4)return[];const e=we.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,o=e[3].x*e[2].y,a=18*(-3*r+2*i+3*s-o),l=18*(3*r-i-3*s),u=18*(s-r);if(we.approximately(a,0)){if(!we.approximately(l,0)){let m=-u/l;if(0<=m&&m<=1)return[m]}return[]}const c=2*a;if(we.approximately(c,0))return[];const h=l*l-4*a*u;if(h<0)return[];const p=Math.sqrt(h);return[(p-l)/c,-(l+p)/c].filter(function(m){return 0<=m&&m<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let s=0,o,a,l,u;s<i;s++)if(o=r[s],a=n[o].mid,l=e[o].mid,u=(n[o].size+e[o].size)/2,Wu(a-l)>=u)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),s=e.bbox(),o=1e5,a=r||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(n._t1+n._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let l=n.split(.5),u=e.split(.5),c=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];c=c.filter(function(p){return we.bboxoverlap(p.left.bbox(),p.right.bbox())});let h=[];return c.length===0||(c.forEach(function(p){h=h.concat(we.pairiteration(p.left,p.right,a))}),h=h.filter(function(p,m){return h.indexOf(p)===m})),h},getccenter:function(n,e,r){const i=e.x-n.x,s=e.y-n.y,o=r.x-e.x,a=r.y-e.y,l=i*fs(Ys)-s*ul(Ys),u=i*ul(Ys)+s*fs(Ys),c=o*fs(Ys)-a*ul(Ys),h=o*ul(Ys)+a*fs(Ys),p=(n.x+e.x)/2,m=(n.y+e.y)/2,v=(e.x+r.x)/2,w=(e.y+r.y)/2,b=p+l,S=m+u,E=v+c,I=w+h,R=we.lli8(p,m,b,S,v,w,E,I),P=we.dist(R,n);let M=Gu(n.y-R.y,n.x-R.x),L=Gu(e.y-R.y,e.x-R.x),k=Gu(r.y-R.y,r.x-R.x),C;return M<k?((M>L||L>k)&&(M+=bf),M>k&&(C=k,k=M,M=C)):k<L&&L<M?(C=k,k=M,M=C):k+=bf,R.s=M,R.e=k,R.r=P,R},numberSort:function(n,e){return n-e}};class Cc{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return we.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)we.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Cc(r)}}const{abs:Yu,min:Bb,max:qb,cos:G$,sin:Q$,acos:Y$,sqrt:Xu}=Math,X$=Math.PI;class It{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const v=[];r.forEach(function(w){["x","y","z"].forEach(function(b){typeof w[b]<"u"&&v.push(w[b])})}),r=v}let s=!1;const o=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");s=!0}}else if(o!==6&&o!==8&&o!==9&&o!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!s&&(o===9||o===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let v=0,w=a?3:2;v<o;v+=w){var u={x:r[v],y:r[v+1]};a&&(u.z=r[v+2]),l.push(u)}const c=this.order=l.length-1,h=this.dims=["x","y"];a&&h.push("z"),this.dimlen=h.length;const p=we.align(l,{p1:l[0],p2:l[c]}),m=we.dist(l[0],l[c]);this._linear=p.reduce((v,w)=>v+Yu(w.y),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,s){if(typeof s>"u"&&(s=.5),s===0)return new It(r,r,i);if(s===1)return new It(e,r,r);const o=It.getABC(2,e,r,i,s);return new It(e,o.A,i)}static cubicFromPoints(e,r,i,s,o){typeof s>"u"&&(s=.5);const a=It.getABC(3,e,r,i,s);typeof o>"u"&&(o=we.dist(r,a.C));const l=o*(1-s)/s,u=we.dist(e,i),c=(i.x-e.x)/u,h=(i.y-e.y)/u,p=o*c,m=o*h,v=l*c,w=l*h,b={x:r.x-p,y:r.y-m},S={x:r.x+v,y:r.y+w},E=a.A,I={x:E.x+(b.x-E.x)/(1-s),y:E.y+(b.y-E.y)/(1-s)},R={x:E.x+(S.x-E.x)/s,y:E.y+(S.y-E.y)/s},P={x:e.x+(I.x-e.x)/s,y:e.y+(I.y-e.y)/s},M={x:i.x+(R.x-i.x)/(1-s),y:i.y+(R.y-i.y)/(1-s)};return new It(e,P,M,i)}static getUtils(){return we}getUtils(){return It.getUtils()}static get PolyBezier(){return Cc}valueOf(){return this.toString()}toString(){return we.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,s=["M",r,i,this.order===2?"Q":"C"];for(let o=1,a=e.length;o<a;o++)s.push(e[o].x),s.push(e[o].y);return s.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=we.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=we.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return we.length(this.derivative.bind(this))}static getABC(e=2,r,i,s,o=.5){const a=we.projectionratio(o,e),l=1-a,u={x:a*r.x+l*s.x,y:a*r.y+l*s.y},c=we.abcratio(o,e);return{A:{x:i.x+(i.x-u.x)/c,y:i.y+(i.y-u.y)/c},B:i,C:u,S:r,E:s}}getABC(e,r){r=r||this.get(e);let i=this.points[0],s=this.points[this.order];return It.getABC(this.order,i,r,s,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,s;r<e;r++)s=r/(e-1),i=this.compute(s),i.t=s,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),s=[];for(let o=0,a,l=0;o<i.length;o++)a=i[o],we.dist(a,e)<r&&(s.push(a),l+=o/i.length);return s.length?t/=s.length:!1}project(e){const r=this.getLUT(),i=r.length-1,s=we.closest(r,e),o=s.mpos,a=(o-1)/i,l=(o+1)/i,u=.1/i;let c=s.mdist,h=a,p=h,m;c+=1;for(let v;h<l+u;h+=u)m=this.compute(h),v=we.dist(e,m),v<c&&(c=v,p=h);return p=p<0?0:p>1?1:p,m=this.compute(p),m.t=p,m.d=c,m}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?we.computeWithRatios(e,this.points,this.ratios,this._3d):we.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let s=1,o,a;s<i;s++)o=e[s],a=e[s-1],r[s]={x:(i-s)/i*o.x+s/i*a.x,y:(i-s)/i*o.y+s/i*a.y};return r[i]=e[i-1],new It(r)}derivative(e){return we.compute(e,this.dpoints[0],this._3d)}dderivative(e){return we.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new It(we.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return we.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return we.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Xu(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),s=Xu(r.x*r.x+r.y*r.y+r.z*r.z),o=Xu(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=s,r.y/=s,r.z/=s,i.x/=o,i.y/=o,i.z/=o;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Xu(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const u=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,i=[],s=[],o=0;for(s[o++]=r[0],s[o++]=r[1],s[o++]=r[2],this.order===3&&(s[o++]=r[3]);r.length>1;){i=[];for(let a=0,l,u=r.length-1;a<u;a++)l=we.lerp(e,r[a],r[a+1]),s[o++]=l,i.push(l);r=i}return s}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),s={left:this.order===2?new It([i[0],i[3],i[5]]):new It([i[0],i[4],i[7],i[9]]),right:this.order===2?new It([i[5],i[4],i[2]]):new It([i[9],i[8],i[6],i[3]]),span:i};return s.left._t1=we.map(0,0,1,this._t1,this._t2),s.left._t2=we.map(e,0,1,this._t1,this._t2),s.right._t1=we.map(e,0,1,this._t1,this._t2),s.right._t2=we.map(1,0,1,this._t1,this._t2),r?(r=we.map(r,e,1,0,1),s.right.split(r).left):s}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let s=function(a){return a[i]},o=this.dpoints[0].map(s);e[i]=we.droots(o),this.order===3&&(o=this.dpoints[1].map(s),e[i]=e[i].concat(we.droots(o))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(we.numberSort))}).bind(this)),e.values=r.sort(we.numberSort).filter(function(i,s){return r.indexOf(i)===s}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=we.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return we.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),s=this.normal(e),o={c:i,n:s,x:i.x+s.x*r,y:i.y+s.y*r};return this._3d&&(o.z=i.z+s.z*r),o}if(this._linear){const i=this.normal(0),s=this.points.map(function(o){const a={x:o.x+e*i.x,y:o.y+e*i.y};return o.z&&i.z&&(a.z=o.z+e*i.z),a});return[new It(s)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const s=we.angle(this.points[0],this.points[3],this.points[1]),o=we.angle(this.points[0],this.points[3],this.points[2]);if(s>0&&o<0||s<0&&o>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Yu(Y$(i))<X$/3}reduce(){let e,r=0,i=0,s=.01,o,a=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)i=u[e],o=this.split(r,i),o._t1=r,o._t2=i,a.push(o),r=i;return a.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+s;i<=1+s;i+=s)if(o=c.split(r,i),!o.simple()){if(i-=s,Yu(r-i)<s)return[];o=c.split(r,i),o._t1=we.map(r,0,1,c._t1,c._t2),o._t2=we.map(i,0,1,c._t1,c._t2),l.push(o),r=i;break}r<1&&(o=c.split(r,1),o._t1=we.map(r,0,1,c._t1,c._t2),o._t2=c._t2,l.push(o))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const s=this.order;let o=this.points.map((a,l)=>(1-l/s)*r+l/s*i);return new It(this.points.map((a,l)=>({x:a.x+e.x*o[l],y:a.y+e.y*o[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const s=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],c=[],h=we.lli4(u[0],u[0].c,u[1],u[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(p){const m=c[p*r]=we.copy(o[p*r]);m.x+=(p?l:a)*u[p].n.x,m.y+=(p?l:a)*u[p].n.y}),i?([0,1].forEach(function(p){if(!(r===2&&p)){var m=o[p+1],v={x:m.x-h.x,y:m.y-h.y},w=i?i((p+1)/r):e;i&&!s&&(w=-w);var b=Xu(v.x*v.x+v.y*v.y);v.x/=b,v.y/=b,c[p+1]={x:m.x+w*v.x,y:m.y+w*v.y}}}),new It(c)):([0,1].forEach(p=>{if(r===2&&p)return;const m=c[p*r],v=this.derivative(p),w={x:m.x+v.x,y:m.y+v.y};c[p+1]=we.lli4(m,w,h,o[p+1])}),new It(c))}outline(e,r,i,s){if(r=r===void 0?e:r,this._linear){const M=this.normal(0),L=this.points[0],k=this.points[this.points.length-1];let C,D,V;i===void 0&&(i=e,s=r),C={x:L.x+M.x*e,y:L.y+M.y*e},V={x:k.x+M.x*i,y:k.y+M.y*i},D={x:(C.x+V.x)/2,y:(C.y+V.y)/2};const U=[C,D,V];C={x:L.x-M.x*r,y:L.y-M.y*r},V={x:k.x-M.x*s,y:k.y-M.y*s},D={x:(C.x+V.x)/2,y:(C.y+V.y)/2};const B=[V,D,C],j=we.makeline(B[2],U[0]),F=we.makeline(U[2],B[0]),Z=[j,new It(U),F,new It(B)];return new Cc(Z)}const o=this.reduce(),a=o.length,l=[];let u=[],c,h=0,p=this.length();const m=typeof i<"u"&&typeof s<"u";function v(M,L,k,C,D){return function(V){const U=C/k,B=(C+D)/k,j=L-M;return we.map(V,0,1,M+U*j,M+B*j)}}o.forEach(function(M){const L=M.length();m?(l.push(M.scale(v(e,i,p,h,L))),u.push(M.scale(v(-r,-s,p,h,L)))):(l.push(M.scale(e)),u.push(M.scale(-r))),h+=L}),u=u.map(function(M){return c=M.points,c[3]?M.points=[c[3],c[2],c[1],c[0]]:M.points=[c[2],c[1],c[0]],M}).reverse();const w=l[0].points[0],b=l[a-1].points[l[a-1].points.length-1],S=u[a-1].points[u[a-1].points.length-1],E=u[0].points[0],I=we.makeline(S,w),R=we.makeline(b,E),P=[I].concat(l).concat([R]).concat(u);return new Cc(P)}outlineshapes(e,r,i){r=r||e;const s=this.outline(e,r).curves,o=[];for(let a=1,l=s.length;a<l/2;a++){const u=we.makeshape(s[a],s[l-a],i);u.startcap.virtual=a>1,u.endcap.virtual=a<l/2-1,o.push(u)}return o}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof It&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=Bb(e.p1.x,e.p2.x),i=Bb(e.p1.y,e.p2.y),s=qb(e.p1.x,e.p2.x),o=qb(e.p1.y,e.p2.y);return we.roots(this.points,e).filter(a=>{var l=this.get(a);return we.between(l.x,r,s)&&we.between(l.y,i,o)})}selfintersects(e){const r=this.reduce(),i=r.length-2,s=[];for(let o=0,a,l,u;o<i;o++)l=r.slice(o,o+1),u=r.slice(o+2),a=this.curveintersects(l,u,e),s.push(...a);return s}curveintersects(e,r,i){const s=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&s.push({left:a,right:l})})});let o=[];return s.forEach(function(a){const l=we.pairiteration(a.left,a.right,i);l.length>0&&(o=o.concat(l))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,s){const o=(s-i)/4,a=this.get(i+o),l=this.get(s-o),u=we.dist(e,r),c=we.dist(e,a),h=we.dist(e,l);return Yu(c-u)+Yu(h-u)}_iterate(e,r){let i=0,s=1,o;do{o=0,s=1;let a=this.get(i),l,u,c,h,p=!1,m=!1,v,w=s,b=1;do if(m=p,h=c,w=(i+s)/2,l=this.get(w),u=this.get(s),c=we.getccenter(a,l,u),c.interval={start:i,end:s},p=this._error(c,a,i,s)<=e,v=m&&!p,v||(b=s),p){if(s>=1){if(c.interval.end=b=1,h=c,s>1){let E={x:c.x+c.r*G$(c.e),y:c.y+c.r*Q$(c.e)};c.e+=we.angle({x:c.x,y:c.y},E,this.get(1))}break}s=s+(s-i)/2}else s=w;while(!v&&o++<100);if(o>=100)break;h=h||c,r.push(h),i=b}while(s<1);return r}}function Xy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function J$(n){if(Array.isArray(n))return n}function Z$(n){if(Array.isArray(n))return Xy(n)}function e7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function t7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(h){c=!0,s=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function n7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i7(n,e){if(n==null)return{};var r,i,s=s7(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(s[r]=n[r])}return s}function s7(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function o7(n,e){return J$(n)||t7(n,e)||Vk(n,e)||n7()}function a7(n){return Z$(n)||e7(n)||Vk(n)||r7()}function l7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function u7(n){var e=l7(n,"string");return typeof e=="symbol"?e:e+""}function Vk(n,e){if(n){if(typeof n=="string")return Xy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xy(n,e):void 0}}var c7=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),o=n.reduce(function(l,u){var c=l,h=u;return s.forEach(function(p,m){var v=p.keyAccessor,w=p.isProp,b;if(w){var S=h,E=S[v],I=i7(S,[v].map(u7));b=E,h=I}else b=v(h,m);m+1<s.length?(c.hasOwnProperty(b)||(c[b]={}),c=c[b]):r?(c.hasOwnProperty(b)||(c[b]=[]),c[b].push(h)):c[b]=h}),l},{});r instanceof Function&&function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===s.length?Object.keys(u).forEach(function(h){return u[h]=r(u[h])}):Object.values(u).forEach(function(h){return l(h,c+1)})}(o);var a=o;return i&&(a=[],function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===s.length?a.push({keys:c,vals:u}):Object.entries(u).forEach(function(h){var p=o7(h,2),m=p[0],v=p[1];return l(v,[].concat(a7(c),[m]))})}(o),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function h7(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const Hb=Symbol("implicit");function Fk(){var n=new fb,e=[],r=[],i=Hb;function s(o){let a=n.get(o);if(a===void 0){if(i!==Hb)return i;n.set(o,a=e.push(o)-1)}return r[a%r.length]}return s.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new fb;for(const a of o)n.has(a)||n.set(a,e.push(a)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.copy=function(){return Fk(e,r).unknown(i)},h7.apply(s,arguments),s}function f7(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const d7=f7("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function p7(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",r==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var m7=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;p7(m7);function Jy(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function g7(n){if(Array.isArray(n))return n}function y7(n){if(Array.isArray(n))return Jy(n)}function Kb(n,e,r){if(Uk())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var s=new(n.bind.apply(n,i));return s}function ch(n,e,r){return(e=E7(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Uk(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uk=function(){return!!n})()}function v7(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _7(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,s,o,a,l=[],u=!0,c=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(u=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);u=!0);}catch(h){c=!0,s=h}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return l}}function w7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wb(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),r.push.apply(r,i)}return r}function cl(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wb(Object(r),!0).forEach(function(i){ch(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Wb(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function kc(n,e){return g7(n)||_7(n,e)||zk(n,e)||w7()}function zr(n){return y7(n)||v7(n)||zk(n)||x7()}function b7(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function E7(n){var e=b7(n,"string");return typeof e=="symbol"?e:e+""}function Zy(n){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(n)}function zk(n,e){if(n){if(typeof n=="string")return Jy(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jy(n,e):void 0}}var T7=Fk(d7);function Gb(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=T7(e(i))})}function I7(n,e){var r=n.nodes,i=n.links,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.nodeFilter,a=o===void 0?function(){return!0}:o,l=s.onLoopError,u=l===void 0?function(v){throw"Invalid DAG structure! Found cycle in node path: ".concat(v.join(" -> "),".")}:l,c={};r.forEach(function(v){return c[e(v)]={data:v,out:[],depth:-1,skip:!a(v)}}),i.forEach(function(v){var w=v.source,b=v.target,S=P(w),E=P(b);if(!c.hasOwnProperty(S))throw"Missing source node with id: ".concat(S);if(!c.hasOwnProperty(E))throw"Missing target node with id: ".concat(E);var I=c[S],R=c[E];I.out.push(R);function P(M){return Zy(M)==="object"?e(M):M}});var h=[];m(Object.values(c));var p=Object.assign.apply(Object,[{}].concat(zr(Object.entries(c).filter(function(v){var w=kc(v,2),b=w[1];return!b.skip}).map(function(v){var w=kc(v,2),b=w[0],S=w[1];return ch({},b,S.depth)}))));return p;function m(v){for(var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,S=function(){var P=v[E];if(w.indexOf(P)!==-1){var M=[].concat(zr(w.slice(w.indexOf(P))),[P]).map(function(L){return e(L.data)});return h.some(function(L){return L.length===M.length&&L.every(function(k,C){return k===M[C]})})||(h.push(M),u(M)),1}b>P.depth&&(P.depth=b,m(P.out,[].concat(zr(w),[P]),b+(P.skip?0:1)))},E=0,I=v.length;E<I;E++)S()}}var S7=2,Rn=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},Qb=function(e,r){if(!r.isShadow){var i=dt(r.linkDirectionalParticles);r.graphData.links.forEach(function(s){var o=Math.round(Math.abs(i(s)));o?s.__photons=zr(Array(o)).map(function(){return{}}):delete s.__photons})}},sp=s_({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,Qb(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Rn},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Rn},nodeColor:{default:"color",triggerUpdate:!1,onChange:Rn},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Rn},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Rn},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Rn},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Rn},linkColor:{default:"color",triggerUpdate:!1,onChange:Rn},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Rn},linkWidth:{default:1,triggerUpdate:!1,onChange:Rn},linkCurvature:{default:0,triggerUpdate:!1,onChange:Rn},linkCanvasObject:{triggerUpdate:!1,onChange:Rn},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Rn},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Rn},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Rn},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Rn},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:Qb},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),s(),!e.isShadow&&o(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=dt(e.nodeVisibility),u=dt(e.nodeVal),c=dt(e.nodeColor),h=dt(e.nodeCanvasObjectMode),p=e.ctx,m=e.isShadow/e.globalScale,v=e.graphData.nodes.filter(l);p.save(),v.forEach(function(w){var b=h(w);if(e.nodeCanvasObject&&(b==="before"||b==="replace")&&(e.nodeCanvasObject(w,p,e.globalScale),b==="replace")){p.restore();return}var S=Math.sqrt(Math.max(0,u(w)||1))*e.nodeRelSize+m;p.beginPath(),p.arc(w.x,w.y,S,0,2*Math.PI,!1),p.fillStyle=c(w)||"rgba(31, 120, 180, 0.92)",p.fill(),e.nodeCanvasObject&&b==="after"&&e.nodeCanvasObject(w,e.ctx,e.globalScale)}),p.restore()}function s(){var l=dt(e.linkVisibility),u=dt(e.linkColor),c=dt(e.linkWidth),h=dt(e.linkLineDash),p=dt(e.linkCurvature),m=dt(e.linkCanvasObjectMode),v=e.ctx,w=e.isShadow*2,b=e.graphData.links.filter(l);b.forEach(L);var S=[],E=[],I=b;if(e.linkCanvasObject){var R=[],P=[];b.forEach(function(k){return({before:S,after:E,replace:R}[m(k)]||P).push(k)}),I=[].concat(zr(S),E,P),S=S.concat(R)}v.save(),S.forEach(function(k){return e.linkCanvasObject(k,v,e.globalScale)}),v.restore();var M=c7(I,[u,c,h]);v.save(),Object.entries(M).forEach(function(k){var C=kc(k,2),D=C[0],V=C[1],U=!D||D==="undefined"?"rgba(0,0,0,0.15)":D;Object.entries(V).forEach(function(B){var j=kc(B,2),F=j[0],Z=j[1],ee=(F||1)/e.globalScale+w;Object.entries(Z).forEach(function(fe){var re=kc(fe,2);re[0];var ue=re[1],de=h(ue[0]);v.beginPath(),ue.forEach(function(Ie){var ce=Ie.source,Ne=Ie.target;if(!(!ce||!Ne||!ce.hasOwnProperty("x")||!Ne.hasOwnProperty("x"))){v.moveTo(ce.x,ce.y);var Pe=Ie.__controlPoints;Pe?v[Pe.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(v,zr(Pe).concat([Ne.x,Ne.y])):v.lineTo(Ne.x,Ne.y)}}),v.strokeStyle=U,v.lineWidth=ee,v.setLineDash(de||[]),v.stroke()})})}),v.restore(),v.save(),E.forEach(function(k){return e.linkCanvasObject(k,v,e.globalScale)}),v.restore();function L(k){var C=p(k);if(!C){k.__controlPoints=null;return}var D=k.source,V=k.target;if(!(!D||!V||!D.hasOwnProperty("x")||!V.hasOwnProperty("x"))){var U=Math.sqrt(Math.pow(V.x-D.x,2)+Math.pow(V.y-D.y,2));if(U>0){var B=Math.atan2(V.y-D.y,V.x-D.x),j=U*C,F={x:(D.x+V.x)/2+j*Math.cos(B-Math.PI/2),y:(D.y+V.y)/2+j*Math.sin(B-Math.PI/2)};k.__controlPoints=[F.x,F.y]}else{var Z=C*70;k.__controlPoints=[V.x,V.y-Z,V.x+Z,V.y]}}}}function o(){var l=1.6,u=.2,c=dt(e.linkDirectionalArrowLength),h=dt(e.linkDirectionalArrowRelPos),p=dt(e.linkVisibility),m=dt(e.linkDirectionalArrowColor||e.linkColor),v=dt(e.nodeVal),w=e.ctx;w.save(),e.graphData.links.filter(p).forEach(function(b){var S=c(b);if(!(!S||S<0)){var E=b.source,I=b.target;if(!(!E||!I||!E.hasOwnProperty("x")||!I.hasOwnProperty("x"))){var R=Math.sqrt(Math.max(0,v(E)||1))*e.nodeRelSize,P=Math.sqrt(Math.max(0,v(I)||1))*e.nodeRelSize,M=Math.min(1,Math.max(0,h(b))),L=m(b)||"rgba(0,0,0,0.28)",k=S/l/2,C=b.__controlPoints&&Kb(It,[E.x,E.y].concat(zr(b.__controlPoints),[I.x,I.y])),D=C?function(ee){return C.get(ee)}:function(ee){return{x:E.x+(I.x-E.x)*ee||0,y:E.y+(I.y-E.y)*ee||0}},V=C?C.length():Math.sqrt(Math.pow(I.x-E.x,2)+Math.pow(I.y-E.y,2)),U=R+S+(V-R-P-S)*M,B=D(U/V),j=D((U-S)/V),F=D((U-S*(1-u))/V),Z=Math.atan2(B.y-j.y,B.x-j.x)-Math.PI/2;w.beginPath(),w.moveTo(B.x,B.y),w.lineTo(j.x+k*Math.cos(Z),j.y+k*Math.sin(Z)),w.lineTo(F.x,F.y),w.lineTo(j.x-k*Math.cos(Z),j.y-k*Math.sin(Z)),w.fillStyle=L,w.fill()}}}),w.restore()}function a(){var l=dt(e.linkDirectionalParticles),u=dt(e.linkDirectionalParticleSpeed),c=dt(e.linkDirectionalParticleOffset),h=dt(e.linkDirectionalParticleWidth),p=dt(e.linkVisibility),m=dt(e.linkDirectionalParticleColor||e.linkColor),v=e.ctx;v.save(),e.graphData.links.filter(p).forEach(function(w){var b=l(w);if(!(!w.hasOwnProperty("__photons")||!w.__photons.length)){var S=w.source,E=w.target;if(!(!S||!E||!S.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var I=u(w),R=Math.abs(c(w)),P=w.__photons||[],M=Math.max(0,h(w)/2)/Math.sqrt(e.globalScale),L=m(w)||"rgba(0,0,0,0.28)";v.fillStyle=L;var k=w.__controlPoints?Kb(It,[S.x,S.y].concat(zr(w.__controlPoints),[E.x,E.y])):null,C=0,D=!1;P.forEach(function(V){var U=!!V.__singleHop;if(V.hasOwnProperty("__progressRatio")||(V.__progressRatio=U?0:(C+R)/b),!U&&C++,V.__progressRatio+=I,V.__progressRatio>=1)if(!U)V.__progressRatio=V.__progressRatio%1;else{D=!0;return}var B=V.__progressRatio,j=k?k.get(B):{x:S.x+(E.x-S.x)*B||0,y:S.y+(E.y-S.y)*B||0};e.linkDirectionalParticleCanvasObject?e.linkDirectionalParticleCanvasObject(j.x,j.y,w,v,e.globalScale):(v.beginPath(),v.arc(j.x,j.y,M,0,2*Math.PI,!1),v.fill())}),D&&(w.__photons=w.__photons.filter(function(V){return!V.__singleHop||V.__progressRatio<=1}))}}}),v.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:$$().force("link",j$()).force("charge",B$()).force("center",Mz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&Gb(e.graphData.nodes,dt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&Gb(e.graphData.links,dt(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(m){m.source=m[e.linkSource],m.target=m[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(m){return m[e.nodeId]}).links(e.graphData.links);var s=e.dagMode&&I7(e.graphData,function(m){return m[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,zr(Object.values(s||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*S7*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return delete m[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var u=["rl","bu"].includes(e.dagMode),c=function(v){return(s[v[e.nodeId]]-o/2)*a*(u?-1:1)},h=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(m){return m[h]=c(m)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?q$(function(m){var v=s[m[e.nodeId]]||-1;return(e.dagMode==="radialin"?o-v:v)*a}).strength(function(m){return e.dagNodeFilter(m)?1:0}):null);for(var p=0;p<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);p++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function $k(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(o){return{default:i[o](),onChange:function(l,u){r.forEach(function(c){return u[c][o](l)})},triggerUpdate:!1}},linkMethod:function(o){return function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];var h=[];return r.forEach(function(p){var m=a[p],v=m[o].apply(m,u);v!==m&&h.push(v)}),h.length?h[0]:this}}}}var C7=800,k7=4,A7=5,Bk=$k("forceGraph",sp),N7=$k(["forceGraph","shadowGraph"],sp),R7=Object.assign.apply(Object,zr(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return ch({},n,Bk.linkProp(n))})).concat(zr(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return ch({},n,N7.linkProp(n))})))),P7=Object.assign.apply(Object,zr(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return ch({},n,Bk.linkMethod(n))})));function lg(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(o){o.style.width="".concat(n.width,"px"),o.style.height="".concat(n.height,"px"),o.width=n.width*i,o.height=n.height*i,!e&&!r&&o.getContext("2d").scale(i,i)});var s=Li(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/s,(n.height-r)/2/s),n.needsRedraw=!0}}function qk(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function Yb(n,e,r){n.save(),qk(n),n.clearRect(0,0,e,r),n.restore()}var O7=s_({props:cl({width:{default:window.innerWidth,onChange:function(e,r){return lg(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return lg(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(s){return(s||[]).every(function(o){return!o.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(s){var o=s.type,a=s.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=r.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:o,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,s,o){return e(i,i.__indexColor,s,o)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},R7),aliases:{stopAnimation:"pauseAnimation"},methods:cl({graph2ScreenCoords:function(e,r,i){var s=Li(e.canvas);return{x:r*s.k+s.x,y:i*s.k+s.y}},screen2GraphCoords:function(e,r,i){var s=Li(e.canvas);return{x:(r-s.x)/s.k,y:(i-s.y)/s.k}},centerAt:function(e,r,i,s){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var o=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return s?e.tweenGroup.add(new _b(a()).to(o,s).easing(Ea.Quadratic.Out).onUpdate(l).start()):l(o),this}return a();function a(){var u=Li(e.canvas);return{x:(e.width/2-u.x)/u.k,y:(e.height/2-u.y)/u.k}}function l(u){var c=u.x,h=u.y;e.zoom.translateTo(e.zoom.__baseElem,c===void 0?a().x:c,h===void 0?a().y:h),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new _b({k:s()}).to({k:r},i).easing(Ea.Quadratic.Out).onUpdate(function(a){var l=a.k;return o(l)}).start()):o(r),this;return s();function s(){return Li(e.canvas).k}function o(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,o);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,r),this.zoom(c,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=dt(e.nodeVal),s=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},o=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:s(a)}});return o.length?{x:[mb(o,function(a){return a.x-a.r}),pb(o,function(a){return a.x+a.r})],y:[mb(o,function(a){return a.y-a.r}),pb(o,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},P7),stateInit:function(){return{lastSetZoom:1,zoom:q8(),forceGraph:new sp,shadowGraph:new sp().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new pz,tweenGroup:new fk}},init:function(e,r){var i=this;e.innerHTML="";var s=document.createElement("div");s.classList.add("force-graph-container"),s.style.position="relative",e.appendChild(s),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),s.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var o=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var p=null,m=window.devicePixelRatio,v=l.x>0&&l.y>0?a.getImageData(l.x*m,l.y*m,1,1):null;return v&&(p=r.colorTracker.lookup(v.data)),p};Ur(r.canvas).call(e9().subject(function(){if(!r.enableNodeDrag)return null;var h=u();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var p=h.subject;p.__initialDragPos={x:p.x,y:p.y,fx:p.fx,fy:p.fy},h.active||(p.fx=p.x,p.fy=p.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var p=h.subject,m=p.__initialDragPos,v=h,w=Li(r.canvas).k,b={x:m.x+(v.x-m.x)/w-p.x,y:m.y+(v.y-m.y)/w-p.y};["x","y"].forEach(function(S){return p["f".concat(S)]=p[S]=m[S]+(v[S]-m[S])/w}),!(!p.__dragged&&A7>=Math.sqrt(G8(["x","y"].map(function(S){return Math.pow(h[S]-m[S],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,p.__dragged=!0,r.onNodeDrag(p,b))}).on("end",function(h){var p=h.subject,m=p.__initialDragPos,v={x:p.x-m.x,y:p.y-m.y};m.fx===void 0&&(p.fx=void 0),m.fy===void 0&&(p.fy=void 0),delete p.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,p.__dragged&&(delete p.__dragged,r.onNodeDragEnd(p,v))})),r.zoom(r.zoom.__baseElem=Ur(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||dt(r.enableZoomInteraction)(h))&&(h.type==="wheel"||dt(r.enablePanInteraction)(h))}).on("zoom",function(h){var p=h.transform;[o,a].forEach(function(m){qk(m),m.translate(p.x,p.y),m.scale(p.k,p.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(cl(cl({},p),i.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(cl(cl({},h.transform),i.centerAt()))}),lg(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Li(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=k7/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new Dz(s),["pointermove","pointerdown"].forEach(function(h){return s.addEventListener(h,function(p){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=p),!r.isPointerDragging&&p.type==="pointermove"&&r.onBackgroundClick&&(p.pressure>0||r.isPointerPressed)&&(p.pointerType==="mouse"||p.movementX===void 0||[p.movementX,p.movementY].some(function(w){return Math.abs(w)>1}))&&(r.isPointerDragging=!0);var m=v(s);l.x=p.pageX-m.left,l.y=p.pageY-m.top;function v(w){var b=w.getBoundingClientRect(),S=window.pageXOffset||document.documentElement.scrollLeft,E=window.pageYOffset||document.documentElement.scrollTop;return{top:b.top+E,left:b.left+S}}},{passive:!0})}),s.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var p=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var m=r["on".concat(r.hoverObj.type,"Click")];m&&m.apply(void 0,[r.hoverObj.d].concat(p))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,p);if(h.button===2)if(r.hoverObj){var v=r["on".concat(r.hoverObj.type,"RightClick")];v&&v.apply(void 0,[r.hoverObj.d].concat(p))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,p)})}},{passive:!0}),s.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(o),r.shadowGraph(a);var c=xU(function(){Yb(a,r.width,r.height),r.shadowGraph.linkWidth(function(p){return dt(r.linkWidth)(p)+r.linkHoverPrecision});var h=Li(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},C7);r.flushShadowCanvas=c.flush,(this._animationCycle=function h(){var p=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(R){return R.__photons&&R.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var m=r.isPointerDragging?null:u();if(m!==r.hoverObj){var v=r.hoverObj,w=v?v.type:null,b=m?m.type:null;if(w&&w!==b){var S=r["on".concat(w,"Hover")];S&&S(null,v.d)}if(b){var E=r["on".concat(b,"Hover")];E&&E(m.d,w===b?v.d:null)}r.tooltip.content(m&&dt(r["".concat(m.type.toLowerCase(),"Label")])(m.d)||null),r.canvas.classList[(m&&r["on".concat(b,"Click")]||!m&&r.onBackgroundClick)&&dt(r.showPointerCursor)(m==null?void 0:m.d)?"add":"remove"]("clickable"),r.hoverObj=m}p&&c()}if(p){Yb(o,r.width,r.height);var I=Li(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(o,I),r.forceGraph.globalScale(I).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(o,I)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(e){}}),Hk={exports:{}},j7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",D7=j7,M7=D7;function Kk(){}function Wk(){}Wk.resetWarningCache=Kk;var L7=function(){function n(i,s,o,a,l,u){if(u!==M7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Wk,resetWarningCache:Kk};return r.PropTypes=r,r};Hk.exports=L7();var V7=Hk.exports;const Q=ev(V7),tm={width:Q.number,height:Q.number,graphData:Q.shape({nodes:Q.arrayOf(Q.object).isRequired,links:Q.arrayOf(Q.object).isRequired}),backgroundColor:Q.string,nodeRelSize:Q.number,nodeId:Q.string,nodeLabel:Q.oneOfType([Q.string,Q.func]),nodeVal:Q.oneOfType([Q.number,Q.string,Q.func]),nodeVisibility:Q.oneOfType([Q.bool,Q.string,Q.func]),nodeColor:Q.oneOfType([Q.string,Q.func]),nodeAutoColorBy:Q.oneOfType([Q.string,Q.func]),onNodeHover:Q.func,onNodeClick:Q.func,linkSource:Q.string,linkTarget:Q.string,linkLabel:Q.oneOfType([Q.string,Q.func]),linkVisibility:Q.oneOfType([Q.bool,Q.string,Q.func]),linkColor:Q.oneOfType([Q.string,Q.func]),linkAutoColorBy:Q.oneOfType([Q.string,Q.func]),linkWidth:Q.oneOfType([Q.number,Q.string,Q.func]),linkCurvature:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalArrowLength:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalArrowColor:Q.oneOfType([Q.string,Q.func]),linkDirectionalArrowRelPos:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticles:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleSpeed:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleOffset:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleWidth:Q.oneOfType([Q.number,Q.string,Q.func]),linkDirectionalParticleColor:Q.oneOfType([Q.string,Q.func]),onLinkHover:Q.func,onLinkClick:Q.func,dagMode:Q.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:Q.number,dagNodeFilter:Q.func,onDagError:Q.func,d3AlphaMin:Q.number,d3AlphaDecay:Q.number,d3VelocityDecay:Q.number,warmupTicks:Q.number,cooldownTicks:Q.number,cooldownTime:Q.number,onEngineTick:Q.func,onEngineStop:Q.func,getGraphBbox:Q.func},Gk={zoomToFit:Q.func,onNodeRightClick:Q.func,onNodeDrag:Q.func,onNodeDragEnd:Q.func,onLinkRightClick:Q.func,linkHoverPrecision:Q.number,onBackgroundClick:Q.func,onBackgroundRightClick:Q.func,showPointerCursor:Q.oneOfType([Q.bool,Q.func]),enablePointerInteraction:Q.bool,enableNodeDrag:Q.bool},d_={showNavInfo:Q.bool,nodeOpacity:Q.number,nodeResolution:Q.number,nodeThreeObject:Q.oneOfType([Q.object,Q.string,Q.func]),nodeThreeObjectExtend:Q.oneOfType([Q.bool,Q.string,Q.func]),nodePositionUpdate:Q.func,linkOpacity:Q.number,linkResolution:Q.number,linkCurveRotation:Q.oneOfType([Q.number,Q.string,Q.func]),linkMaterial:Q.oneOfType([Q.object,Q.string,Q.func]),linkThreeObject:Q.oneOfType([Q.object,Q.string,Q.func]),linkThreeObjectExtend:Q.oneOfType([Q.bool,Q.string,Q.func]),linkPositionUpdate:Q.func,linkDirectionalArrowResolution:Q.number,linkDirectionalParticleResolution:Q.number,linkDirectionalParticleThreeObject:Q.oneOfType([Q.object,Q.string,Q.func]),forceEngine:Q.oneOf(["d3","ngraph"]),ngraphPhysics:Q.object,numDimensions:Q.oneOf([1,2,3])},F7=Object.assign({},tm,Gk,{linkLineDash:Q.oneOfType([Q.arrayOf(Q.number),Q.string,Q.func]),nodeCanvasObjectMode:Q.oneOfType([Q.string,Q.func]),nodeCanvasObject:Q.func,nodePointerAreaPaint:Q.func,linkCanvasObjectMode:Q.oneOfType([Q.string,Q.func]),linkCanvasObject:Q.func,linkPointerAreaPaint:Q.func,linkDirectionalParticleCanvasObject:Q.func,autoPauseRedraw:Q.bool,minZoom:Q.number,maxZoom:Q.number,enableZoomInteraction:Q.oneOfType([Q.bool,Q.func]),enablePanInteraction:Q.oneOfType([Q.bool,Q.func]),onZoom:Q.func,onZoomEnd:Q.func,onRenderFramePre:Q.func,onRenderFramePost:Q.func});Object.assign({},tm,Gk,d_,{enableNavigationControls:Q.bool,controlType:Q.oneOf(["trackball","orbit","fly"]),rendererConfig:Q.object,extraRenderers:Q.arrayOf(Q.shape({render:Q.func.isRequired}))});Object.assign({},tm,d_,{nodeDesc:Q.oneOfType([Q.string,Q.func]),linkDesc:Q.oneOfType([Q.string,Q.func])});Object.assign({},tm,d_,{markerAttrs:Q.object,yOffset:Q.number,glScale:Q.number});const p_=fV(O7,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});p_.displayName="ForceGraph2D";p_.propTypes=F7;const U7=()=>{const{contacts:n,userProfile:e,updateContactPosition:r}=Uo(),i=Lo(),s=le.useRef(),[o,a]=le.useState({width:window.innerWidth,height:window.innerHeight}),[l,u]=le.useState(""),[c,h]=le.useState(null),[p,m]=le.useState({});le.useEffect(()=>{n&&n.forEach(b=>{if(b.avatar&&!p[b.id]){const S=new Image;S.src=b.avatar,S.onload=()=>{m(E=>({...E,[b.id]:S}))}}})},[n]);const v=le.useMemo(()=>["",...(e==null?void 0:e.categories)||["","","","",""]],[e]);le.useEffect(()=>{const b=()=>{a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const w=le.useMemo(()=>{if(!n)return{nodes:[],links:[]};const b=[],S=[],E=new Map,I=l===""?n:n.filter(P=>(P.tags||[]).includes(l));(l===""?v.filter(P=>P!==""):[l]).forEach(P=>{const M=`cat-${P}`;let L="#ffffff20";P===""?L="#fbbf24":P===""?L="#f87171":P===""?L="#60a5fa":P===""&&(L="#a78bfa");const k={id:M,name:P,isCategory:!0,val:15,color:L};b.push(k),E.set(P,k)}),I.forEach(P=>{let M="#10b981";P.importance>80||(P.tags||[]).includes("")?M="#fbbf24":(P.tags||[]).includes("")?M="#f87171":(P.tags||[]).includes("")?M="#60a5fa":(P.tags||[]).includes("")&&(M="#a78bfa");const L={id:P.id,name:P.name,val:(P.importance||50)/4+5,tags:P.tags||[],color:M,isContact:!0,avatar:P.avatar};P.position&&(L.fx=P.position.x,L.fy=P.position.y),b.push(L),(P.tags||[]).forEach(k=>{E.has(k)&&S.push({source:L.id,target:`cat-${k}`,value:1,color:"rgba(255, 255, 255, 0.05)",isHubLink:!0})})});for(let P=0;P<I.length;P++)for(let M=P+1;M<I.length;M++){const L=I[P],k=I[M],C=(L.tags||[]).filter(D=>(k.tags||[]).includes(D));(C.length>1||C.length===1&&C.includes(""))&&S.push({source:L.id,target:k.id,value:C.length*2,color:"rgba(255, 255, 255, 0.1)",isDirectLink:!0})}return{nodes:b,links:S}},[n,l,v]);return y.jsxs("div",{className:"w-full h-full bg-[#0a0a0c] relative overflow-hidden",children:[y.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 px-6 pt-12 pb-8 bg-gradient-to-b from-[#0a0a0c] via-[#0a0a0c]/80 to-transparent",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-black text-white",children:""}),y.jsx("p",{className:"text-white/40 text-[10px] font-black tracking-[0.2em] uppercase mt-0.5",children:"Social Network Analysis"})]}),y.jsx("button",{onClick:()=>i(-1),className:"size-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-white/40 hover:text-primary transition-all",children:y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]}),y.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:v.map(b=>y.jsx("button",{onClick:()=>u(b),className:`flex h-8 shrink-0 items-center justify-center rounded-lg px-4 transition-all duration-300 border text-[10px] font-black uppercase tracking-wider ${l===b?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white/5 border-white/5 text-white/40 hover:border-white/10"}`,children:b},b))})]}),y.jsx("div",{className:"w-full h-full",children:y.jsx(p_,{ref:s,graphData:w,width:o.width,height:o.height,backgroundColor:"#0a0a0c",nodeLabel:"name",nodeRelSize:4,linkColor:b=>b.color,linkWidth:b=>b.value,onNodeClick:b=>{c&&c.id===b.id?b.isCategory?(u(b.name),h(null)):i(`/profile/${b.id}`):h(b)},onBackgroundClick:()=>h(null),onNodeHover:b=>{b&&h(b)},onNodeDragEnd:b=>{b.fx=b.x,b.fy=b.y,r(b.id,{x:b.x,y:b.y})},enableNodeDrag:!0,cooldownTicks:100,d3AlphaDecay:.01,d3VelocityDecay:.1,d3Force:(b,S)=>{b==="charge"&&S.strength(E=>E.isCategory?-1200:-300),b==="link"&&(S.distance(E=>E.isHubLink?120:60),S.strength(E=>E.isHubLink?.4:.05))},linkCanvasObject:(b,S,E)=>{if(!b.source||!b.target)return;const I=ee=>typeof ee=="object"?ee.id:ee,R=I(b.source),P=I(b.target),M=c?c.id:null,L=M&&(R===M||P===M),k=c?L?.6:.02:.15,C=b.source.x,D=b.source.y,V=b.target.x,U=b.target.y;if(C===void 0||D===void 0||V===void 0||U===void 0)return;const B=250,j=V-C,F=U-D;Math.sqrt(j*j+F*F)>B||(S.beginPath(),S.strokeStyle=L?"#00e5ff":b.color,S.globalAlpha=k,S.lineWidth=(L?2:.5)/Math.max(.5,E),S.moveTo(C,D),S.lineTo(V,U),S.stroke(),S.globalAlpha=1)},nodeCanvasObject:(b,S,E)=>{const I=c&&b.id===c.id,R=D=>typeof D=="object"?D.id:D,P=c&&!I&&w.links.some(D=>{const V=R(D.source),U=R(D.target),B=c.id,j=b.id;return V===j&&U===B||U===j&&V===B}),M=b.name,L=b.isCategory?12:7,k=Math.max(.1,E),C=(I?L*1.5:P?L*1.2:L)/k;if(!(b.x===void 0||b.y===void 0)){if(I||b.isCategory||b.isContact&&b.val>20)try{const D=S.createRadialGradient(b.x,b.y,0,b.x,b.y,C*2.5);D.addColorStop(0,`${b.color}${I?"60":"30"}`),D.addColorStop(1,"transparent"),S.fillStyle=D,S.beginPath(),S.arc(b.x,b.y,C*2.5,0,2*Math.PI),S.fill()}catch{}if(b.isCategory)S.fillStyle="#0a0a0c",S.beginPath(),S.arc(b.x,b.y,C,0,2*Math.PI),S.fill(),S.strokeStyle=b.color,S.lineWidth=2/k,S.setLineDash([2,2]),S.beginPath(),S.arc(b.x,b.y,C,0,2*Math.PI),S.stroke(),S.setLineDash([]),S.font=`900 ${12/k}px "Inter"`,S.textAlign="center",S.textBaseline="middle",S.fillStyle="#ffffff",S.fillText(M,b.x,b.y);else{S.save(),S.beginPath(),S.arc(b.x,b.y,C,0,2*Math.PI),S.clip();const D=p[b.id];D?S.drawImage(D,b.x-C,b.y-C,C*2,C*2):(S.fillStyle=b.color,S.fillRect(b.x-C,b.y-C,C*2,C*2),S.fillStyle="#ffffff",S.font=`bold ${C}px "Inter"`,S.textAlign="center",S.textBaseline="middle",S.fillText(M.charAt(0),b.x,b.y)),S.restore(),S.strokeStyle=I?"#00e5ff":b.color,S.lineWidth=(I?3:1.5)/k,S.beginPath(),S.arc(b.x,b.y,C,0,2*Math.PI),S.stroke(),(I||k>1.5)&&(S.font=`${I?"900":"500"} ${10/k}px "Inter"`,S.textAlign="center",S.fillStyle=I?"#ffffff":"rgba(255, 255, 255, 0.5)",S.fillText(M,b.x,b.y+C+10/k))}}}})}),y.jsx("div",{className:"absolute bottom-32 left-6 right-6 p-4 bg-white/5 border border-white/10 rounded-2xl backdrop-blur-md z-10",children:y.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-[9px] font-black text-white/30 uppercase tracking-[0.15em]",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#fbbf24] shadow-[0_0_8px_rgba(251,191,36,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#f87171] shadow-[0_0_8px_rgba(248,113,113,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#60a5fa] shadow-[0_0_8px_rgba(96,149,250,0.5)]"}),y.jsx("span",{children:" / "})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"size-2 rounded-full bg-[#a78bfa] shadow-[0_0_8px_rgba(167,139,250,0.5)]"}),y.jsx("span",{children:" / "})]})]})}),y.jsxs("div",{className:"absolute bottom-44 right-6 flex flex-col gap-2 z-10",children:[c&&c.isContact&&y.jsxs("button",{onClick:()=>i(`/profile/${c.id}`),className:"h-12 px-6 rounded-2xl bg-primary text-white text-[12px] font-black uppercase tracking-wider flex items-center justify-center shadow-lg shadow-primary/30 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[" ",c.name]}),y.jsx("button",{onClick:()=>s.current.zoomToFit(400),className:"size-12 rounded-2xl bg-white/5 border border-white/10 text-white/40 flex items-center justify-center hover:bg-white/10 transition-all active:scale-90",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"zoom_in_map"})})]})]})},z7=()=>{const n=Lo(),e=Yv(),{unsavedChanges:r,setUnsavedChanges:i}=Uo(),s=[{id:"feed",icon:"auto_awesome_motion",label:"",path:"/"},{id:"search",icon:"search",label:"",path:"/search"},{id:"graph",icon:"hub",label:"",path:"/graph"},{id:"vault",icon:"calendar_month",label:"",path:"/vault"},{id:"settings",icon:"settings",label:"",path:"/settings"}],o=a=>{e.pathname!==a&&(r?window.confirm("")&&(i(!1),n(a),navigator.vibrate&&navigator.vibrate(5)):(n(a),navigator.vibrate&&navigator.vibrate(5)))};return y.jsx("nav",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-[100] px-4 pb-6 pointer-events-none",children:y.jsx("div",{className:"glass-panel rounded-[28px] h-20 flex items-center justify-around px-2 pointer-events-auto",children:s.map(a=>{const l=e.pathname===a.path;return y.jsxs("button",{onClick:()=>o(a.path),className:`flex flex-col items-center justify-center gap-1.5 transition-all duration-500 relative group w-16 ${l?"text-primary":"text-white/20 hover:text-white/40"}`,children:[y.jsxs("div",{className:`relative flex items-center justify-center transition-all duration-500 ${l?"scale-110 -translate-y-1":"scale-100"}`,children:[l&&y.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full scale-150"}),y.jsx("span",{className:`material-symbols-outlined text-[26px] relative z-10 ${l?"font-black":""}`,children:a.icon})]}),y.jsx("span",{className:`text-[9px] font-black uppercase tracking-[0.15em] transition-all duration-500 ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.label}),l&&y.jsx("div",{className:"absolute -bottom-1 w-1 h-1 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary-color-rgb),0.8)]"})]},a.id)})})})},$7=({children:n})=>y.jsxs("div",{className:"bg-nexus min-h-screen text-white font-sans selection:bg-primary/30 overflow-x-hidden",children:[y.jsx("div",{className:"max-w-[480px] mx-auto min-h-screen flex flex-col relative",children:y.jsx("div",{className:"flex-1 px-4 pt-6 pb-32",children:n})}),y.jsx(z7,{})]});function B7(){return y.jsx(U6,{children:y.jsx(bP,{children:y.jsxs(Vw,{children:[y.jsx(Di,{path:"/p/:uid",element:y.jsx(W6,{})}),y.jsx(Di,{path:"/*",element:y.jsx($7,{children:y.jsxs(Vw,{children:[y.jsx(Di,{path:"/",element:y.jsx(z6,{})}),y.jsx(Di,{path:"/search",element:y.jsx($6,{})}),y.jsx(Di,{path:"/profile/:id",element:y.jsx(B6,{})}),y.jsx(Di,{path:"/stealth",element:y.jsx(q6,{})}),y.jsx(Di,{path:"/settings",element:y.jsx(K6,{})}),y.jsx(Di,{path:"/vault",element:y.jsx(H6,{})}),y.jsx(Di,{path:"/graph",element:y.jsx(U7,{})})]})})})]})})})}ug.createRoot(document.getElementById("root")).render(y.jsx(yt.StrictMode,{children:y.jsx(B7,{})}));
